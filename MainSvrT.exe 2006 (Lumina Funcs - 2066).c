/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

CMemory **__cdecl operator new(size_t a1);
void __cdecl operator delete(void *a1);
void __thiscall CAuthPacket::OnIOCallback(CAuthPacket *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
void __thiscall CIOBuffer::Release(CIOBuffer *this);
_DWORD *__thiscall CAuthSocket::CAuthSocket(_DWORD *this);
LONG __thiscall CIOObject::AddRef(int this);
CIOObject *__thiscall CIOObject::OnFree(CIOObject *this);
// void __thiscall CIOObject::OnWaitCallback(CIOObject *this); idb
MRegion *__thiscall CAuthSocket::`scalar deleting destructor'(MRegion *this, unsigned int a2);
void __thiscall CAuthSocket::~CAuthSocket(_DWORD *this);
int __cdecl CAuthSocket::Start();
_DWORD *__thiscall std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(void *this);
// _DWORD *__thiscall std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(_DWORD *this);
BOOL __cdecl CAuthSocket::Stop();
void __thiscall CAuthSocket::Initialize(CIOSocket *a1, LONG Value);
void __thiscall CAuthSocket::OnTimer(CAuthSocket *this, int nId);
void __thiscall CAuthSocket::OnClose(int nAuthSocket); // idb
void __thiscall CAuthSocket::OnRead(CIOSocket *this);
LONG __thiscall CIOBuffer::AddRef(CIOBuffer *this); // idb
BOOL __thiscall CIOObject::PostObject(CIOObject *this, int nId);
void __cdecl CAuthSocket::Process(AUTHPACKET *authpacket);
void __thiscall CIOObject::Release(CIOObject *this);
void CAuthSocket::Write(enum S2A_PROTOCOL nType, ...);
int __cdecl CMemoryPool<CAuthPacket>::Alloc();
LONG __thiscall CIOSpinLock::Enter(CIOSpinLock *this); // idb
LONG __thiscall CIOSpinLock::Leave(CIOSpinLock *this); // idb
LONG __cdecl CMemoryPool<CAuthPacket>::Free(CAuthPacket *pT); // idb
CIOObject *__thiscall CAuthPacket::CAuthPacket(CIOObject *this);
CIOObject *__thiscall CIOObject::CIOObject(CIOObject *this);
std::locale::facet *__thiscall CIOObject::`scalar deleting destructor'(std::locale::facet *this, char a2);
void __thiscall CIOObject::~CIOObject(CIOObject *this); // idb
LONG __thiscall CMemoryPool<CAuthPacket>::CPool::~CPool(void *this);
LONG CMemoryPool<CAuthPacket>::FreeAll();
void CMemoryPool<CSkill>::CPool::~CPool();
void __cdecl CMemoryPool<CSkill>::FreeAll();
void __cdecl CBase::CBase();
void __thiscall sub_402180(int this);
// void __stdcall unknown_libname_2(int a1);
void __stdcall sub_4021B0(int a1, int a2);
void *__thiscall CBase::`scalar deleting destructor'(void *this, char a2);
void __thiscall CBase::~CBase(CBase *this);
int __thiscall CBase::OnFree(CBase *this);
int __thiscall CBase::Set(CBase *this, Symbol symbol, lisp::var value);
lisp::var *__thiscall lisp::var::var(lisp::var *this, lisp::var *v); // idb
int __thiscall lisp::var::operator char const *(lisp::var *this); // idb
int __thiscall lisp::var::null(lisp::var *this); // idb
lisp::var *__thiscall lisp::var::pop(lisp::var *this, lisp::var *result);
CBaseList **__thiscall CBaseList::Push(CBaseList *this, CBase *a2);
CBaseList *__thiscall CBaseList::Pop(CBaseList *this);
CBaseList *__cdecl CMemoryPool<CBaseList>::Alloc();
void __cdecl CMemoryPool<CBaseList>::Free(CBaseList *pT);
void __thiscall sub_4024F0(void *this);
void __cdecl sub_402500();
CBuff *__thiscall CBuff::Copy(CBuff *this);
int __stdcall CBuff::UpdateBuff(CBuff *a1, CChar *pChar);
// CBuff *__thiscall CBuff::`scalar deleting destructor'(CBuff *this, char a2);
_DWORD *__thiscall CBuff::~CBuff(CBuff *this);
CBuffMoveSpeed *CBuff::CreateBuff(int nBuff, ...);
CBuffMoveSpeed *__thiscall CBuffMoveSpeed::CBuffMoveSpeed(CBuffMoveSpeed *this, int nType, unsigned int dwTime, int nValue);
CBuff *__thiscall CBuff::CBuff(CBuff *this, int nType, unsigned int dwTime, int nValue, int nPrty);
CBuffStone *__thiscall CBuffStone::CBuffStone(CBuffStone *this, int nType, unsigned int dwTime, int nValue, int nValue2);
CBuffMeditation *__thiscall CBuffMeditation::CBuffMeditation(CBuffMeditation *this, int nType, unsigned int dwTime, int nValue);
CBuffFatalChance *__thiscall CBuffFatalChance::CBuffFatalChance(CBuffFatalChance *this, int nType, unsigned int dwTime, int nValue, int nValue2);
CBuffRevivalSequela *__thiscall CBuffRevivalSequela::CBuffRevivalSequela(CBuffRevivalSequela *this, int nType, unsigned int dwTime, int nValue);
CBuffStun *__thiscall CBuffStun::CBuffStun(CBuffStun *this, int nType, unsigned int dwTime, int nValue);
CBuffMoveStop *__thiscall CBuffMoveStop::CBuffMoveStop(CBuffMoveStop *this, int nType, unsigned int dwTime, int nValue);
CBuffPoison *__thiscall CBuffPoison::CBuffPoison(CBuffPoison *this, int nType, unsigned int dwTime, int nValue);
CBuffPoisonCloud *__thiscall CBuffPoisonCloud::CBuffPoisonCloud(CBuffPoisonCloud *this, int nType, unsigned int dwTime, int nValue);
CBuffHaste *__thiscall CBuffHaste::CBuffHaste(CBuffHaste *this, int nType, unsigned int dwTime, int nValue);
CBuffHP *__thiscall CBuffHP::CBuffHP(CBuffHP *this, int nType, unsigned int dwTime, int nValue);
CBuffMP *__thiscall CBuffMP::CBuffMP(CBuffMP *this, int nType, unsigned int dwTime, int nValue);
CBuffSleep *__thiscall CBuffSleep::CBuffSleep(CBuffSleep *this, int nType, unsigned int dwTime, int nValue);
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(CBuffCTDefensePer *this, int nType, unsigned int dwTime, int nValue, int mValue2);
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::Copy(CBuffCTDefensePer *this);
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(CBuffCTDefensePer *this, CBuff *pBuff);
CBuffCTHealing *__thiscall CBuffCTHealing::CBuffCTHealing(CBuffCTHealing *this, int nType, unsigned int dwTime, int nValue);
CBuffCTHealing *__thiscall CBuffCTHealing::Copy(CBuffCTHealing *this);
CBuffCTHealing *__thiscall CBuffCTHealing::CBuffCTHealing(CBuffCTHealing *this, CBuff *pBuff);
CBuffCTPrtyPtEx *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(CBuffCTPrtyPtEx *this, int nType, unsigned int dwTime, int nValue, int nPrty, int nCharPrty, int nMStateEx, int nValue2);
CBuffCTPrtyPtEx *__thiscall CBuffCTPrtyPtEx::Copy(CBuffCTPrtyPtEx *this);
CBuffCTPrtyPtEx *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(CBuffCTPrtyPtEx *this, CBuff *Src);
CBuffSuffering *__thiscall CBuffSuffering::CBuffSuffering(CBuffSuffering *this, int nType, unsigned int dwTime, int nValue);
CBuffInchantWeapon *__thiscall CBuffInchantWeapon::CBuffInchantWeapon(CBuffInchantWeapon *this, int nType, unsigned int dwTime, int nValue);
CBuffSpiritDmg *__thiscall CBuffSpiritDmg::CBuffSpiritDmg(CBuffSpiritDmg *this, int nType, unsigned int dwTime, int nValue);
CBuffFlagPrty *__thiscall CBuffFlagPrty::CBuffFlagPrty(CBuffFlagPrty *this, int nType, unsigned int dwTime, int nPrty, __int64 nMState, int nCharPrty, int nValue, int nUpType, int nValue2);
CBuffFlagHP *__thiscall CBuffFlagHP::CBuffFlagHP(CBuffFlagHP *this, int nType, unsigned int dwTime, int nValue);
CBuffBerserk *__thiscall CBuffBerserk::CBuffBerserk(CBuffBerserk *this, int nType, unsigned int dwTime, int nValue, int mValue2);
CBuffSilenceShot *__thiscall CBuffSilenceShot::CBuffSilenceShot(CBuffSilenceShot *this, int nType, unsigned int dwTime, int nValue);
CBuffManaBurn *__thiscall CBuffManaBurn::CBuffManaBurn(CBuffManaBurn *this, int nType, unsigned int dwTime, int nValue);
CBuffPrty *__thiscall CBuffPrty::CBuffPrty(CBuffPrty *this, int nType, unsigned int dwTime, int nPrty, __int64 nMState, int nCharPrty, int nValue, int nUpType, int nValue2);
CBuffPrtyEx *__thiscall CBuffPrtyEx::CBuffPrtyEx(CBuffPrtyEx *this, int nType, unsigned int dwTime, int nPrty, __int64 nMState, int nCharPrty, int nValue, int nUpType, int nValue2);
CBuffExpire *__thiscall CBuffExpire::CBuffExpire(CBuffExpire *this, int nType, unsigned int dwTime, int nValue, __int64 nBState, int nPrty);
CBuffExpireEvent *__thiscall CBuffExpireEvent::CBuffExpireEvent(CBuffExpireEvent *this, int nType, unsigned int dwTime, int nValue, __int64 nBState);
CBuffExpireLuckyStone2 *__thiscall CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(CBuffExpireLuckyStone2 *this, int nType, unsigned int dwTime, int nValue, __int64 nBState);
CBuffRemain *__thiscall CBuffRemain::CBuffRemain(CBuffRemain *this, int nType, unsigned int dwTime, int nValue, __int64 nBState, int nPrty);
CBuffRemainEx *__thiscall CBuffRemainEx::CBuffRemainEx(CBuffRemainEx *this, int nType, unsigned int dwTime, int nValue, int nGState, int nPrty);
CBuffRemain *__thiscall CBuffRemain::CBuffRemain(CBuffRemain *this);
CBuffRemainDead *__thiscall CBuffRemainDead::CBuffRemainDead(CBuffRemainDead *this, int nType, unsigned int dwTime, int nValue, int nEState, int nPrty);
CBuffRemainDeadEx *__thiscall CBuffRemainDeadEx::CBuffRemainDeadEx(CBuffRemainDeadEx *this, int nType, unsigned int dwTime, int nValue, int nEState);
CBuffRemainXBlow *__thiscall CBuffRemainXBlow::CBuffRemainXBlow(CBuffRemainXBlow *this, int nType, unsigned int dwTime, int nValue, __int64 nBState);
CBuffRemainPrty *__thiscall CBuffRemainPrty::CBuffRemainPrty(CBuffRemainPrty *this, int nType, unsigned int dwTime, int nValue, int nCharPrty, __int64 nBState);
_DWORD *__thiscall CBuffRemainCount::CBuffRemainCount(CBuffRemainCount *this, int nType, unsigned int dwTime, int nValue, __int64 nBState);
CBuffRemainLuckyStone1 *__thiscall CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(CBuffRemainLuckyStone1 *this, int nType, unsigned int dwTime, int nValue, __int64 nBState);
CBuffRemainPet *__thiscall CBuffRemainPet::CBuffRemainPet(CBuffRemainPet *this, int nType, int nPrty);
int __stdcall sub_406890(int a1);
CBuffHydrochloricAcid *__thiscall CBuffHydrochloricAcid::CBuffHydrochloricAcid(CBuffHydrochloricAcid *this, int nType, unsigned int dwTime, int nValue);
CBuffMixDamage *__thiscall CBuffMixDamage::CBuffMixDamage(CBuffMixDamage *this, int nType, unsigned int dwTime, int nCount, int nValue);
int __stdcall sub_406970(int a1, int a2);
BOOL __thiscall CBuff::IsExpired(CBuff *this, CChar *pChar); // idb
int __thiscall CBuffMoveSpeed::ApplyBuff(CBuffMoveSpeed *this, CChar *pChar); // idb
void __thiscall CBuffMoveSpeed::FreeBuff(CBuffMoveSpeed *this, CChar *pChar);
int __thiscall CBuffMoveSpeed::UpdateBuff(CBuffMoveSpeed *this, CBuff *pBuff, CChar *pChar);
__int64 __thiscall CChar::IsMState(CChar *this, __int64 nMState); // idb
int __thiscall CBuffMoveSpeed::IsExpired(CBuffMoveSpeed *this, CChar *pChar); // idb
int __thiscall CBuffStone::ApplyBuff(CBuffStone *this, CChar *pChar); // idb
void __thiscall CBuffStone::FreeBuff(CBuffStone *this, CChar *pChar);
int __stdcall CBuffMeditation::ApplyBuff(CChar *pChar);
void __stdcall CBuffMeditation::FreeBuff(CChar *this);
BOOL __thiscall CBuffMeditation::IsExpired(CBuffMeditation *this, CChar *pChar);
int __cdecl Random(int nMin, int nMax);
int __thiscall CBuffFatalChance::ApplyBuff(CBuffFatalChance *this, CChar *pChar); // idb
void __thiscall CBuffFatalChance::FreeBuff(CBuffFatalChance *this, CChar *pChar);
int __thiscall CBuffRevivalSequela::ApplyBuff(CBuffRevivalSequela *this, CChar *pChar);
void __thiscall CBuffRevivalSequela::FreeBuff(CBuffRevivalSequela *this, CChar *pChar);
int __thiscall CBuffRevivalSequela::UpdateBuff(CBuffRevivalSequela *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffStun::ApplyBuff(CBuffStun *this, CChar *pChar);
void __stdcall CBuffStun::FreeBuff(CChar *pChar);
int __thiscall CBuffStun::UpdateBuff(CBuffStun *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffStun::IsExpired(CBuffStun *this, CChar *pChar); // idb
int __thiscall CBuffMoveStop::ApplyBuff(CBuffMoveStop *this, CChar *pChar); // idb
void __thiscall CBuffMoveStop::FreeBuff(CBuffMoveStop *this, CChar *pChar);
int __thiscall CBuffMoveStop::UpdateBuff(CBuffMoveStop *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffMoveStop::IsExpired(CBuffMoveStop *this, CChar *pChar); // idb
int __stdcall CBuffPoison::ApplyBuff(CChar *this, CChar *pChar);
void __stdcall CBuffPoison::FreeBuff(CChar *this, CChar *pChar);
int __thiscall CBuffPoison::UpdateBuff(CBuffPoison *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffPoison::IsExpired(CBuffPoison *this, CChar *pChar);
// int __thiscall CBase::Id(CBase *this); idb
int __stdcall CBuffPoisonCloud::ApplyBuff(CChar *pChar);
void __stdcall CBuffPoisonCloud::FreeBuff(CChar *pChar);
int __thiscall CBuffPoisonCloud::UpdateBuff(CBuffPoisonCloud *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffPoisonCloud::IsExpired(CBuffPoisonCloud *this, CChar *pChar);
int __thiscall CBuffHaste::ApplyBuff(CBuffHaste *this, CChar *pChar); // idb
void __thiscall CBuffHaste::FreeBuff(CBuffHaste *this, CChar *pChar);
int __stdcall CBuffHP::ApplyBuff(CChar *pChar);
void __stdcall CBuffHP::FreeBuff(CChar *pChar);
int __stdcall CBuffMP::ApplyBuff(CChar *pChar);
void __stdcall CBuffMP::FreeBuff(CChar *pChar);
BOOL __thiscall CBuffMP::IsExpired(CBuffMP *this, CChar *pChar);
int __thiscall CBuffSleep::ApplyBuff(CBuffSleep *this, CChar *pChar);
int __thiscall CBuffSleep::FreeBuff(CBuffSleep *this, CChar *pChar);
int __thiscall CBuffSleep::UpdateBuff(CBuffSleep *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffSleep::IsExpired(CBuffSleep *this, CChar *pChar);
int __thiscall CBuffCTDefensePer::ApplyBuff(CBuffCTDefensePer *this, CChar *pChar);
void __thiscall CBuffCTDefensePer::FreeBuff(CBuffCTDefensePer *this, CChar *pChar);
int __stdcall CBuffCTHealing::ApplyBuff(CChar *pChar);
void __stdcall CBuffCTHealing::FreeBuff(CChar *pChar);
int __thiscall CBuffCTHealing::IsExpired(CBuffCTHealing *this, CChar *pChar);
int __thiscall CBuffCTPrtyPtEx::ApplyBuff(CBuffCTPrtyPtEx *this, CChar *pChar);
void __thiscall CBuffCTPrtyPtEx::FreeBuff(CBuffCTPrtyPtEx *this, CChar *pChar);
int __stdcall CBuffSuffering::ApplyBuff(CChar *pChar);
int __stdcall CBuffSuffering::FreeBuff(CChar *pChar);
int __thiscall CBuffSuffering::UpdateBuff(CBuffSuffering *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffSuffering::IsExpired(CBuffSuffering *this, CChar *pChar);
int __thiscall CBuffInchantWeapon::ApplyBuff(CBuffInchantWeapon *this, CChar *pChar);
int __thiscall CBuffInchantWeapon::FreeBuff(CBuffInchantWeapon *this, CChar *pChar);
int __stdcall CBuffSpiritDmg::ApplyBuff(CChar *pChar);
void __stdcall CBuffSpiritDmg::FreeBuff(CChar *pChar);
int __thiscall CBuffSpiritDmg::UpdateBuff(CBuffSpiritDmg *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffSpiritDmg::IsExpired(CBuffSpiritDmg *this, CChar *pChar);
int __thiscall CBuffFlagPrty::ApplyBuff(CBuffFlagPrty *this, CChar *a2); // idb
_DWORD *__thiscall CBuffFlagPrty::FreeBuff(CBuffFlagPrty *this, CChar *pChar);
int __stdcall CBuffFlagHP::ApplyBuff(CChar *pChar);
void __stdcall CBuffFlagHP::FreeBuff(CChar *pChar);
int __thiscall CBuffFlagHP::UpdateBuff(CBuffFlagHP *this, CBuff *pBuff, CChar *pChar);
BOOL __thiscall CBuffHP::IsExpired(CBuffHP *this, CChar *pChar);
int __thiscall CBuffBerserk::ApplyBuff(CBuffBerserk *this, CChar *pChar);
int __thiscall CBuffBerserk::FreeBuff(CBuffBerserk *this, CChar *pChar);
int __stdcall CBuffSilenceShot::ApplyBuff(CChar *pChar);
void __stdcall CBuffSilenceShot::FreeBuff(CChar *pChar);
int __thiscall CBuffSilenceShot::UpdateBuff(CBuffSilenceShot *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffSilenceShot::IsExpired(CBuffSilenceShot *this, CChar *pChar);
int __stdcall CBuffManaBurn::ApplyBuff(CChar *pChar);
void __stdcall CBuffManaBurn::FreeBuff(CChar *pChar);
int __thiscall CBuffManaBurn::UpdateBuff(CBuffManaBurn *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffManaBurn::IsExpired(CBuffManaBurn *this, CChar *pChar);
int __thiscall CBuffPrty::ApplyBuff(CBuffPrty *this, CChar *a2); // idb
int __thiscall CBuffPrty::FreeBuff(int this, _QWORD *a2);
int __thiscall CBuffPrty::UpdateBuff(CBuffPrty *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuff::IsPrty(CBuff *this, int nPrty);
BOOL __thiscall CBuffPrty::IsExpired(CBuffPrty *this, CChar *pChar);
int __thiscall CBuffPrtyEx::ApplyBuff(CBuffPrty *this, CChar *pChar);
int __thiscall CBuffPrtyEx::FreeBuff(CBuffPrty *this, CChar *pChar);
int __thiscall CChar::IsMStateEx(CChar *this, int nMStateEx);
int __thiscall CBuffPrtyEx::UpdateBuff(CBuffPrtyEx *this, CBuff *pBuff, CChar *pChar);
BOOL __thiscall CBuffPrtyEx::IsExpired(CBuffPrtyEx *this, CChar *pChar);
int __thiscall CBuffExpire::SetBuff(CBuffExpire *this, CChar *pChar);
int __thiscall CBuffExpire::ApplyBuff(CBuffExpire *this, CChar *pChar);
BOOL __thiscall CBuffExpire::IsExpired(CBuffExpire *this, CChar *pChar);
int __thiscall CBuffExpireEvent::ApplyBuff(CBuffExpireEvent *this, CChar *pChar);
int __thiscall CBuffExpireEvent::FreeBuff(CBuffExpireEvent *this, CChar *pChar);
int __thiscall CBuffExpireLuckyStone2::ApplyBuff(CBuffExpireLuckyStone2 *this, CChar *pChar);
__int64 __thiscall CChar::IsBState(CChar *this, __int64 nBState);
int __thiscall CBuffRemain::SetBuff(CBuffRemain *this, CChar *pChar);
int __thiscall CBuffRemain::ApplyBuff(CBuffRemain *this, CChar *pChar);
void __thiscall CBuffExpire::FreeBuff(CBuffExpire *this, CChar *pChar);
int __thiscall CBuffRemain::IsExpired(CBuffRemain *this, CChar *pChar);
void __thiscall CBuffRemain::SaveRemain(CBuffRemain *this, CChar *pChar);
int __thiscall CBuffRemainEx::SetBuff(CBuffRemainEx *this, CChar *pChar);
LONG __thiscall CChar::AddGState(CChar *this, int nGState);
int __thiscall CBuffRemainEx::ApplyBuff(CBuffRemainEx *this, CChar *pChar);
void __thiscall CBuffRemainEx::FreeBuff(CBuffRemainEx *this, CChar *pChar);
int __thiscall CBuffRemainDead::SetBuff(CBuffRemainDead *this, CChar *pChar);
int __thiscall CBuffRemainDead::ApplyBuff(CBuffRemainDead *this, CChar *pChar);
void __thiscall CBuffRemainDead::FreeBuff(CBuffRemainDead *this, CChar *pChar);
int __thiscall CBuffRemainDeadEx::SetBuff(CBuffRemainDeadEx *this, CChar *pChar);
_DWORD *__thiscall CPlayer::AddEState(CPlayer *this, int dwEState); // idb
int __thiscall CBuffRemainXBlow::ApplyBuff(CBuffRemainXBlow *this, CChar *pChar, CPlayer *pPlayer);
int __thiscall CBuffRemainPrty::SetBuff(CBuffRemainPrty *this, CChar *pChar);
int __thiscall CBuffRemainPrty::ApplyBuff(CBuffRemainPrty *this, CChar *pChar);
int __thiscall CBuffRemainPrty::FreeBuff(CBuffRemainPrty *this, CChar *pChar);
int __thiscall CBuffRemainCount::UpdateBuff(CBuffRemainCount *this, CBuff *pBuff, CChar *pChar);
int __thiscall CBuffRemainLuckyStone1::ApplyBuff(CBuffRemainLuckyStone1 *this, CChar *pChar);
int __thiscall CBuffRemainPet::ApplyBuff(CBuffRemainPet *this, CChar *pChar);
void __thiscall CBuffRemainPet::FreeBuff(CBuffRemainPet *this, CChar *pChar);
int __thiscall CBuffRemainPet::IsExpired(CBuffRemainPet *this, CChar *pChar);
int __thiscall CBuffHydrochloricAcid::ApplyBuff(CBuffHydrochloricAcid *this, CChar *pChar);
void __stdcall CBuffHydrochloricAcid::FreeBuff(CChar *pChar);
int __thiscall CBuffHydrochloricAcid::IsExpired(CBuffHydrochloricAcid *this, CChar *pChar);
int __thiscall CBuffMixDamage::ApplyBuff(CBuffMixDamage *this, CChar *pChar);
int __thiscall CBuffMixDamage::IsExpired(CBuffMixDamage *this, CChar *pChar);
CCalendar *__thiscall CCalendar::CCalendar(CCalendar *this); // idb
void *__thiscall CCalendar::`scalar deleting destructor'(void *this, char a2);
void __thiscall CCalendar::~CCalendar(CCalendar *this);
void __cdecl CCalendar::Start();
// void CCalendar::Stop();
unsigned __int16 __cdecl static CCalendar::GetTime();
void __thiscall CCalendar::OnTimer(CCalendar *this);
void __thiscall CCalendar::ElapseTime(CCalendar *this);
int __thiscall CCalendar::IsIntercalary(CCalendar *this);
CChar *__thiscall CChar::CChar(CChar *this);
BOOL __thiscall CChar::Index(CChar *this, int nQIndex);
int __stdcall CChar::Damage(CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill);
_DWORD *__thiscall CChar::AddMState(CChar *this, __int64 nMState);
LONG __thiscall CChar::SubGState(CChar *this, int nGState); // idb
LONG __thiscall CChar::AddMStateEx(CChar *this, int nMStateEx); // idb
LONG __thiscall CChar::SubMStateEx(CChar *this, int nMStateEx); // idb
int __thiscall CChar::SubMState(CChar *this, __int64 nMState);
int __thiscall CChar::GetFinalDefense(CChar *this, CChar *a1); // idb
int __thiscall CChar::GetFinalAbsorb(CChar *this, CChar *a1);
int __thiscall CChar::GetFinalResist(CChar *this, CChar *a1, int a2);
int __stdcall sub_40AD70(int a1);
void __thiscall sub_40AD90(void *this, int a2);
void *__thiscall CChar::`scalar deleting destructor'(void *this, char a2);
void __thiscall CChar::~CChar(CChar *this);
void __thiscall CChar::ReviseProperty(CChar *this);
tagRECT *__thiscall CChar::GetDropPt(CChar *this, tagPOINT *ptP);
void __thiscall CChar::SetXY(CChar *this, const tagPOINT *ptP);
void __thiscall CChar::SetDirection(CChar *this, int dx, int dy);
void __thiscall CChar::SetReverseDirection(CChar *this, int nDir);
BOOL __thiscall CChar::IsNormal(CChar *this);
unsigned int __thiscall CBase::IsDeleted(CBase *this);
int __thiscall CChar::IsGState(CChar *this, int nGState); // idb
void __thiscall CChar::SetBuff(CChar *this, int nType, int nRemain);
int __thiscall CChar::AddBuff(CChar *this, CBuff *pNewBuff);
CBuff *__thiscall CChar::_FindBuff(CBuff *this, int nBuff);
unsigned int __thiscall CChar::GetBuffRemain(CChar *this, int nBuff);
void __thiscall CChar::UpdateBuff(CChar *this, int nBuff);
void __thiscall CChar::RefreshBuff(CChar *this);
void __thiscall CChar::CancelBuff(CChar *this, int nBuff);
void __thiscall CChar::CancelAllBuff(CChar *this);
void __thiscall CChar::DeleteAllBuff(CChar *this);
void __thiscall CChar::CancelBuffPrty(CChar *this, int nBuffPrty);
void __thiscall CChar::ResetAllBuff(CChar *this); // idb
void __thiscall CChar::SaveAllBuff(CChar *this); // idb
void CChar::WriteInSight(CChar *this, enum S2C_PROTOCOL nType, char *format, ...);
void CChar::WriteInRect(CChar *this, enum S2C_PROTOCOL nType, int nRadius, char *format, ...);
void __thiscall CConfig::CConfig(CConfig *this);
// std::ios_base *__thiscall lisp::var::var(std::ios_base *this);
void __thiscall CConfig::~CConfig(CConfig *this);
void __thiscall CConfig::Close(CConfig *this);
void __cdecl free_var(int (__thiscall ***a1)(_DWORD));
struct lisp::var *__thiscall lisp::var::car(const lisp::var *this);
struct lisp::var *__thiscall lisp::var::cdr(lisp::var *this);
bool __thiscall lisp::var::consp(const lisp::var *this);
bool __thiscall lisp::var::stringp(const lisp::var *this);
bool __thiscall lisp::var::integerp(const lisp::var *this);
int __thiscall CConfig::GetToken(CConfig *this);
lisp::var *__thiscall CConfig::Find(CConfig *this, lisp::var *result, const char *key);
_DWORD *__thiscall CConfig::GetValue(CConfig *this, Token *Token);
lisp::_string *__thiscall lisp::_string::_string(lisp::_string *this, const char *str);
lisp::var *sub_40C330();
// std::ios_base *__thiscall std::ios_base::ios_base(std::ios_base *this);
char *sub_40C360();
// char unknown_libname_3();
char *__cdecl Strdup(const char *str);
_DWORD *__thiscall CConfig::GetList(CConfig *this);
lisp::_integer *__thiscall lisp::_integer::_integer(lisp::_integer *this, int n); // idb
std::ios_base *__thiscall lisp::_cons::_cons(std::ios_base *this, int a2, int a3);
char *__thiscall sub_40C550(char *this);
// char *__thiscall type_info::raw_name(type_info *this);
int __thiscall CConfig::Open(CConfig *this, const char *FileName);
int __thiscall lisp::var::operator int(lisp::var *this); // idb
const char *__thiscall CConfig::Get(CConfig *this, const char *key);
const char *__thiscall CConfig::Get(CConfig *this, const char *key, const char *defaultValue);
int __thiscall CConfig::GetInt(CConfig *this, char *key); // idb
int __thiscall CConfig::GetInt(CConfig *this, char *key, int defaultValue); // idb
unsigned int __cdecl CConfig::GetTimeStamp();
void __thiscall CDBPacket::OnIOCallback(CDBPacket *this, int bSuccess, ulong dwTransferred, _OVERLAPPED *lpOverlapped);
volatile int *__thiscall CDBSocket::CDBSocket(CDBSocket *this);
void *__thiscall CDBSocket::`scalar deleting destructor'(CDBSocket *this, unsigned int a2);
void __thiscall CDBSocket::~CDBSocket(CDBSocket *this);
int __cdecl CDBSocket::Start();
void __cdecl CDBSocket::Stop();
void __thiscall CDBSocket::OnClose(CDBSocket *this);
void __thiscall CDBSocket::OnRead(CDBSocket *this); // idb
void __cdecl CDBSocket::Process(DBPACKET *dbpacket);
unsigned int __thiscall CSocket::IsSBit(CSocket *this, char bit);
void CDBSocket::Write(enum S2D_PROTOCOL nType, char *format, ...);
CDBPacket *__cdecl CMemoryPool<CDBPacket>::Alloc();
void __cdecl CMemoryPool<CDBPacket>::Free(CDBPacket *packet);
CDBPacket *__thiscall CDBPacket::CDBPacket(CDBPacket *this);
CDBPacket *__thiscall CDBPacket::`scalar deleting destructor'(CDBPacket *this, char a2);
LONG __thiscall CDBPacket::~CDBPacket(CDBPacket *this); // idb
LONG sub_40DE00();
void __thiscall CFindPath::CFindPath(CFindPath *this);
void __thiscall CFindPath::~CFindPath(CFindPath *this);
int __thiscall CFindPath::FindPath(CFindPath *this, tagPOINT *ptSPixel, tagPOINT *ptEPixel);
int __cdecl PowDistance(const tagPOINT *ptP1, const tagPOINT *ptP2);
int __thiscall CFindPath::CalcH(CFindPath *this, tagPOINT *ptP);
CFindPath::NODE *__thiscall CFindPath::GetBestNode(CFindPath *this);
void __thiscall CFindPath::FreeNode(CFindPath *this);
void __thiscall CFindPath::LinkChild(CFindPath *this, CFindPath::NODE *pBest);
void __thiscall CFindPath::LinkChild(CFindPath *this, CFindPath::NODE *pBest, int dx, int dy);
CFindPath::NODE *__thiscall CFindPath::CheckList(CFindPath *this, tagPOINT *ptP, unsigned int h); // idb
void __thiscall CFindPath::Propagation(CFindPath::NODE *this);
void __thiscall CFindPath::Insert(CFindPath *this, CFindPath::NODE *pNew);
CFindPath::NODE *__cdecl CMemoryPool<CFindPath::NODE>::Alloc();
void __cdecl CMemoryPool<CFindPath::NODE>::Free(CFindPath::NODE *a1);
CFindPath::NODE *__thiscall CFindPath::NODE::NODE(CFindPath::NODE *this, int x, int y); // idb
CMemoryPool<CFindPath::NODE>::CPool *__thiscall CMemoryPool<CFindPath::NODE>::CPool::CPool(CMemoryPool<CFindPath::NODE>::CPool *this);
void __thiscall CMemoryPool<CFindPath::NODE>::CPool::~CPool(CMemoryPool<CFindPath::NODE>::CPool *this); // idb
void __cdecl CMemoryPool<CFindPath::NODE>::FreeAll();
CGoto *__thiscall CGoto::CGoto(CGoto *this);
void *__thiscall CGoto::`scalar deleting destructor'(void *this, char a2);
void __thiscall CGoto::~CGoto(CGoto *this);
int __cdecl CGoto::FindGoto(char *szName, GOTO *_goto);
int __thiscall CGoto::Set(CGoto *this, Symbol symbol, lisp::var value);
int __thiscall CGoto::OnLoad(CGoto *this); // idb
CPortal *__thiscall CPortal::CPortal(CPortal *this);
void *__thiscall CPortal::`scalar deleting destructor'(void *this, char a2);
void __thiscall CPortal::~CPortal(CPortal *this);
int __thiscall CPortal::Set(CPortal *this, Symbol symbol, lisp::var value);
int __thiscall CPortal::OnLoad(CPortal *this); // idb
int __cdecl CPortal::OpenPortal(CPlayer *pPlayer); // idb
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::insert(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *result, const std::pair<char const * const,CItem *> *_Val); // idb
bool __thiscall StrCmp::operator()(StrCmp *this, const char *a, const char *b); // idb
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,GOTO *,StrCmp,std::allocator<std::pair<char const * const,GOTO *>>,0>>::find(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval); // idb
std::list<tagPARTICLES *>::iterator *__thiscall std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(std::list<tagPARTICLES *> *this, std::list<tagPARTICLES *>::iterator *result); // idb
CMemory ***__thiscall std::list<tagSUBPARTICLES *>::push_back(std::list<tagPARTICLES *> *this, tagPARTICLES *const *_Val);
std::pair<int,CPng::Region> *__thiscall std::pair<int,CPng::Region>::pair<int,CPng::Region>(std::pair<int,CPng::Region> *this, const int *_Val1, const CPng::Region *_Val2);
int __thiscall sub_40F040(void *this);
int __cdecl sub_40F060(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result); // idb
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::lower_bound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval); // idb
int __thiscall std::exception::_Raise(void *this);
void __thiscall std::length_error::length_error(std::length_error *this, const std::length_error *that);
std::logic_error *__thiscall std::logic_error::logic_error(std::logic_error *this, const std::string *_Message);
// _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int); weak
// int __thiscall sub_40F5F0(_DWORD); weak
std::locale::facet *__thiscall sub_40F610(std::locale::facet *this, char a2);
int __thiscall std::locale::facet::~facet(_DWORD *this);
int __thiscall sub_40F660(int this);
std::logic_error *__thiscall sub_40F680(std::logic_error *this, char a2);
void __thiscall std::logic_error::~logic_error(std::logic_error *this);
void __thiscall sub_40F6E0(std::logic_error *this);
std::logic_error *__thiscall sub_40F700(std::logic_error *this, char a2);
std::string *__thiscall std::string::string(std::string *this, const std::string *_Right);
void __thiscall sub_40F780(void *this);
std::string *__thiscall std::string::assign(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count); // idb
// int __cdecl std::char_traits<char>::copy(void *, void *, size_t); idb
// int __thiscall unknown_libname_4(_DWORD); weak
void __thiscall std::string::_Tidy(int this, char a2, size_t Size);
std::string *__thiscall std::string::erase(std::string *this, unsigned int _Off, unsigned int _Count); // idb
void *__cdecl sub_40F9B0(void *a1, void *a2, size_t a3);
int __thiscall std::string::_Eos(std::string *this, unsigned int _Newsize);
// _DWORD __cdecl std::char_traits<char>::assign(_DWORD, _DWORD); weak
BOOL __thiscall std::string::_Grow(std::string *this, unsigned int _Newsize, bool _Trim);
// int __thiscall unknown_libname_25(_DWORD); weak
int __thiscall std::string::_Copy(std::string *this, unsigned int _Newsize, unsigned int _Oldlen);
CMemory **__stdcall sub_40FC00(size_t a1);
CMemory **__cdecl sub_40FC50(size_t a1);
CMemory ***__thiscall std::list<tagSUBPARTICLES *>::_Insert(std::list<tagPARTICLES *> *this, int a2, int a3);
void *__thiscall sub_40FCF0(void *this);
std::vector<IPAddrMask> *__thiscall std::string::string(std::vector<IPAddrMask> *this, char *Str);
std::string *__thiscall std::vector<IPAddrMask>::capacity(std::vector<IPAddrMask> *this, char *a2);
// int __cdecl std::char_traits<char>::length(char *); idb
std::string *__thiscall std::string::assign(std::string *this, void *Src, size_t Size);
bool __thiscall std::string::_Inside(std::string *this, const char *_Ptr); // idb
// int __cdecl _tolower(int);
unsigned int __thiscall sub_40FE70(int this);
std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const char *const *_Keyval); // idb
int *__thiscall std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *_Wherenode);
int *__thiscall sub_410050(void *this, int a2);
CMemory **__thiscall std::_Tree<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const,KMacro::CStore>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Rarg, const std::pair<int const ,KMacro::CStore> *_Val, char _Carg);
// void *__cdecl operator new(unsigned int, void *); idb
CMemory **__stdcall sub_410210(int a1, int a2, int a3);
std::list<tagPARTICLES *> *__thiscall std::list<tagSUBPARTICLES *>::_Incsize(std::list<tagPARTICLES *> *this, unsigned int _Count);
CMemory **__stdcall sub_4102F0(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_410310(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
unsigned int __thiscall std::allocator<KMiniMapSystem::CMinimapTile>::max_size(std::allocator<OVERLAY_CONTAINER> *this); // idb
CMemory **__stdcall sub_410360(int a1);
unsigned int __thiscall sub_410380(int this);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::const_iterator::_Dec(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<int,KMacro::CodeInfo,std::less<int>,std::allocator<std::pair<int const,KMacro::CodeInfo>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *_Rarg, const std::pair<int const ,CPng::Region> *_Val, char _Carg);
std::allocator<PORTAL> *__thiscall std::allocator<std::pair<int const,STALLITEMINFO>>::max_size(std::allocator<PORTAL> *this, int a2, int a3, const void *a4);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *__cdecl std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(int a1);
CMemory **__cdecl sub_410560(int a1);
CMemory **__cdecl sub_410580(int a1);
std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *__thiscall std::map<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>>::map<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>>(std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const iless *_Parg, const std::allocator<std::pair<char const * const,CItem *> > *_Al);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Init(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<std::string,KMacro::CSkill *,std::less<std::string>,std::allocator<std::pair<std::string const,KMacro::CSkill *>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> > *this); // idb
std::list<tagPARTICLES *> *__thiscall std::list<tagSUBPARTICLES *>::list<tagSUBPARTICLES *>(std::list<tagPARTICLES *> *this);
std::_List_nod<tagPARTICLES *>::_Node *__thiscall std::list<tagPARTICLES *>::_Buynode(std::list<tagPARTICLES *> *this); // idb
int __thiscall sub_410880(void *this);
int __thiscall sub_4108A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tidy(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::erase(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, std::vector<CIOSocket::CIOTimer>::const_iterator a4);
_DWORD *__thiscall std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::erase(_DWORD *this, _DWORD *a2, int a3);
std::logic_error *__thiscall sub_4111A0(std::logic_error *this, const std::string *a2);
void __thiscall sub_4111D0(std::logic_error *this);
std::logic_error *__thiscall sub_4111F0(std::logic_error *this, char a2);
_DWORD *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::clear(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::vector<std::string>::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(std::vector<std::string>::iterator *this, std::vector<std::string>::iterator *result, int __formal); // idb
unsigned int __thiscall std::vector<IPAddrMask>::max_size(std::vector<IPAddrMask> *this, int a2);
int __cdecl sub_411330(int a1);
void *__thiscall sub_411370(void *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_411390(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
int __thiscall std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::const_iterator::_Inc(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
char __cdecl std::swap<unsigned char>(char *_Left, char *_Right);
CGuild *__thiscall CGuild::CGuild(CGuild *this);
CGuild *__thiscall CGuild::`scalar deleting destructor'(CGuild *this, char a2);
void __thiscall CGuild::~CGuild(CGuild *this); // idb
int __thiscall sub_4116E0(void *this);
void __cdecl CGuild::Stop();
void __thiscall CBase::Delete(CBase *item);
void __cdecl CGuild::SecondProcess();
void __cdecl CGuild::MinuteProcess(unsigned int dwTick);
void __thiscall CGuild::OnDelete(CGuild *this);
int __cdecl CGuild::IsLoad(int nGID);
void __cdecl CGuild::Load(int nGID, char *end, CCastle *pCastle);
void __cdecl CGuild::Login(CPlayer *pPlayer);
void __cdecl CGuild::LoginCastle(CPlayer *pPlayer, int nGID);
void __thiscall CGuild::Logout(CGuild *this, CPlayer *pPlayer);
void __cdecl CGuild::DelPlayer(int nPID, int nGID);
int __cdecl CGuild::CreateTrial(CPlayer *pPlayer);
void __thiscall CChar::Lock(CChar *this); // idb
void __thiscall CChar::Unlock(CChar *this);
int __thiscall CParty::GetSize(CParty *this); // idb
int __thiscall CGuild::CreateTrialSecedeAnswer(CGuild *this, CPlayer *pPlayer, int nPID, int nDate);
int __thiscall CGuild::CreateConsent(CGuild *this, CPlayer *pPlayer, int bConsent);
int __thiscall CGuild::IsAllConsent(CGuild *this); // idb
int __stdcall CGuild::CreateGuildName(CGuild *this, CPlayer *Str1);
int __thiscall CGuild::CreateGuildNameAnswer(CGuild *this, CPlayer *pPlayer, int nAnswer, char *szGuildName);
int __thiscall CGuild::IsSkillAble(CGuild *this, int nClass, int nType); // idb
int __thiscall CGuild::Conflux(CGuild *this, CPlayer *pPlayer, char *szName);
int __cdecl CGuild::ConfluxAnswer(CPlayer *pPlayer, int nGID, int nPID, int bAnswer);
int __cdecl CGuild::ConfluxSecedeAnswer(CPlayer *pPlayer, int nGID, int nDate);
BOOL __thiscall CGuild::IsTempMemberFUll(CGuild *this); // idb
int __thiscall CGuild::Secession(CGuild *this, CPlayer *pPlayer);
int __thiscall CGuild::Banish(CGuild *this, CPlayer *pPlayer, char *szName);
int __thiscall CGuild::Appointment(CGuild *this, CPlayer *pPlayer, char *szName, char *szTitle);
int __thiscall CGuild::Dissolution(CGuild *this, CPlayer *pPlayer);
int __thiscall CGuild::TitleChange(CGuild *this, CPlayer *pPlayer, char *szTitle, char *szNewTitle);
int __thiscall CGuild::SetTodayMessage(CGuild *this, CPlayer *pPlayer, char *szMessage);
void __thiscall CGuild::GetTodayMessage(CGuild *this, CPlayer *pPlayer);
void __thiscall CGuild::SendMemberInfo(CGuild *this, CPlayer *pPlayer, int nGID);
int __thiscall CGuild::AdminInfo(CGuild *this, CPlayer *pPlayer);
int __thiscall CGuild::BasicInfo(CGuild *this, CPlayer *pPlayer);
int __thiscall CGuild::SetSkillAble(CGuild *this, CPlayer *pPlayer, int nSubLeaderAble, int nCenturionAble, int nTenAble, int nRegularAble, int nTempAble);
int __thiscall CGuild::CheckStandard(CGuild *this, CPlayer *pPlayer, int nStandard);
int __thiscall CGuild::SetStandard(CGuild *this, CPlayer *pPlayer, int nStandard);
int __thiscall CGuild::OnSetStandard(CGuild *this, int nId, int nAns, int nGID, int nStandard);
int __thiscall CGuild::SetExpADD(CGuild *this, CPlayer *pPlayer, int nExp);
int __cdecl CGuild::SetExp(char *szName, int nExp);
_DWORD __stdcall CGuild::SetConnectTell(CPlayer *pPlayer, int bTell);
void __stdcall CGuild::SetMemberLelvelUp(CGuild *this, char *szName);
int __thiscall CGuild::GetTitle2Class(CGuild *this, char *szTitle); // idb
char *__thiscall CGuild::GetClass2Title(CGuild *this, int nClass); // idb
char *__thiscall CGuild::SetClassTitle(CGuild *this, int nClass, char *szNewTitle); // idb
BOOL __thiscall CGuild::IsMemberFull(CGuild *this);
int __thiscall CGuild::IsAppointmentFull(CGuild *this, int nClass); // idb
int __thiscall CGuild::GetAppointmentLimitTime(CGuild *this, int nClass); // idb
int __stdcall CGuild::IsSameName(char *szName);
CGuild *__cdecl CGuild::FindGuild(int nGID);
CGuild *__cdecl CGuild::FindGuild(char *szName);
CPlayer *__thiscall CGuild::FindLeaderPlayer(CGuild *this);
char *__thiscall CGuild::GetLeaderName(CGuild *this);
int __thiscall CGuild::FindMember(CGuild *this, int a2, char *Str1);
CGuild *__cdecl CGuild::Create(char nLeaderPID);
int __thiscall CGuild::MemberADD(CGuild *this, int nGID, CPlayer *pPlayer, int nClass);
int __thiscall CGuild::MemberDEL(CGuild *this, int pos);
void __thiscall CGuild::SetLevel(CGuild *this, int nLevel);
int __cdecl CGuild::GetGuildSkill(int nLevel); // idb
void __thiscall CGuild::SetPointADD(CGuild *this, CPlayer *pPlayer, int nPoint, int bAdd);
int __thiscall CGuild::CalPenaltyLevel(int *this);
int __thiscall CGuild::CalPenaltyTLevel(int *this);
void __stdcall CGuild::BroadcastLock(void *a1, int a2);
void __thiscall CGuild::Broadcast(int this, void *a2, int a3);
void __cdecl CGuild::SendPlayerSight(int a1, void *a2, int a3);
int __thiscall CGuild::AllianceOffer(int *this, int a2, char *Str1, int a4);
int __thiscall CGuild::AllianceOfferAnswer(int this, int a2, int a3, int a4, int a5);
volatile int *__thiscall CGuild::SetAlliance(int this, int a2, volatile int *a3);
void __thiscall CGuild::AllianceBroadcast(void *this, int a2);
BOOL sub_4173F0();
BOOL sub_417410();
BOOL sub_417430();
BOOL sub_417450();
time_t __cdecl CGuild::GetWarEndTime();
int __thiscall CGuild::WarDeclare(int this, int a2, int a3);
void __cdecl CGuild::WarDelcareList(int a1, char a2);
int __thiscall CGuild::TrialUnfurlStandard(_DWORD *this, int a2, unsigned int a3);
void __thiscall CGuild::UnfurlStandard(int this, int a2, unsigned int a3);
void __cdecl CGuild::BrokenStandard(int a1);
void __cdecl CGuild::BrokenGate(int a1, int a2);
int __cdecl CGuild::CanAttack(int a1, int a2);
int __thiscall CGuild::CastleInfo(void *this, int a2, unsigned int a3);
int __stdcall CGuild::TaxRateControl(int a1, unsigned int a2, int a3);
int __thiscall CGuild::TaxLevy(_DWORD *this, int a2, unsigned int a3);
int __cdecl CGuild::CastleGateNPC(int a1, unsigned int a2, int a3);
_DWORD __stdcall CGuild::CastleSetGateLmit(_DWORD, _DWORD, _DWORD);
BOOL __thiscall CGuild::IsAlliancePeriod(void *this, int a2);
void __cdecl CGuild::ChangePlayerName(int a1, int a2, char *Source);
void __cdecl CGuild::ChangeGuildName(int a1, int a2, char *Source);
unsigned int __thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval);
_DWORD *__thiscall sub_418480(_DWORD *this);
std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *__thiscall std::map<int,CSocket *>::map<int,CSocket *>(std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *this);
int __thiscall sub_418510(void *this);
_DWORD *__thiscall sub_418530(_DWORD *this);
int __thiscall std::vector<CControl *>::size(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4185D0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4);
int __stdcall sub_418670(int a1);
BOOL __stdcall sub_4186F0(_DWORD *a1, _DWORD *a2);
int __stdcall sub_418710(int a1);
int __thiscall sub_418790(_DWORD *this);
int __thiscall sub_4187B0(int this);
void *__thiscall sub_418860(void *this);
void *__thiscall sub_418880(void *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4188A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4);
CAtlTraceSettings *__cdecl sub_418940(CAtlTraceSettings *a1);
_BYTE *__cdecl GetNumeric<unsigned char>(_BYTE *a1, _BYTE *a2);
_WORD *__cdecl GetNumeric<short>(_WORD *a1, _WORD *a2);
_BYTE *__cdecl PutNumeric<unsigned char>(_BYTE *a1, char a2);
BOOL __cdecl std::_Distance2<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, int a2, _DWORD *a3);
void *__thiscall sub_418A00(void *this);
int __thiscall sub_418A30(void *this);
int __thiscall sub_418A50(void *this);
int __thiscall sub_418A70(int this);
CAlliance *__thiscall CAlliance::CAlliance(CAlliance *this);
void *__thiscall sub_418B90(void *this, char a2);
void __thiscall sub_418BC0(std::locale::facet *this);
void __cdecl sub_418BE0();
void __thiscall CAlliance::Clear(int this);
void __thiscall CAlliance::OnDelete(int this);
int __cdecl CAlliance::IsLoad(int a1);
void __cdecl CAlliance::Load(_BYTE *a1);
void __cdecl CAlliance::LoadSetGuild(int a1, int a2, int a3);
void __thiscall CAlliance::DeleteSetGuild(void *this, int a2);
int __cdecl CAlliance::Join(int a1, char *Source, int a3, int a4, char *a5, int a6, int a7);
void __cdecl CAlliance::PostponeExpire();
void __thiscall CAlliance::Postpone(_DWORD *this, int a2, unsigned int a3);
void __cdecl CAlliance::Expire(unsigned int a1);
void __thiscall CAlliance::AllianceInfo(const char *this, int a2);
_DWORD *__thiscall CAlliance::Add(_DWORD *this, int a2);
int __thiscall CAlliance::GetSize(void *this);
volatile int *__thiscall CWar::SetGuild(volatile int **this, volatile int *a2);
void __thiscall CAlliance::BroadcastLock(_DWORD *this, void *a2);
void __thiscall CAlliance::Broadcast(_DWORD *this, void *a2);
void __cdecl CAlliance::ChangeLeaderName(int a1, int a2, char *Source);
void __cdecl CAlliance::ChangeGuildName(int a1, int a2, char *Source);
CCastle *__thiscall CCastle::CCastle(CCastle *this);
void *__thiscall sub_419A00(void *this, char a2);
void __thiscall CCastle::_CCastle(std::locale::facet *this);
void __cdecl CCastle::Start();
void __cdecl sub_419AB0();
void __cdecl CCastle::Load(int a1, int a2);
void __cdecl CCastle::SetWarGuild(volatile int *a1, volatile int *a2);
void __cdecl CCastle::WarBegin(int a1);
int __cdecl CCastle::WarPortal(int a1, int a2, int a3, int a4);
void __thiscall CCastle::_WarMsg(int *this, void *a2);
void __stdcall CCastle::WarMsg(_DWORD);
void __cdecl CCastle::WarList(_DWORD, _DWORD);
void __thiscall CCastle::OnDelete(int this);
void __thiscall CCastle::SetGuild(volatile int **this, volatile int *a2);
XBaseModel *__cdecl CCastle::GetCastle(unsigned int nXModelID); // idb
int __cdecl CCastle::GetMonsterTile2CID(int a1, int a2, int a3);
_DWORD __stdcall CCastle::SubGateState(_DWORD, _DWORD);
BOOL __thiscall CCastle::IsLord(_DWORD *this, int a2);
BOOL __thiscall CCastle::IsAlliance(_DWORD *this, int a2);
int __thiscall CCastle::IsAlreadyDeclare(_DWORD *this, int a2);
int __cdecl CCastle::IsAllCastleWarRelation(int a1);
void __cdecl CCastle::Login(_DWORD *a1, int a2);
void __thiscall CCastle::WarAllianceADD(_DWORD *this, int a2, int a3, int a4, char *a5);
void __thiscall CCastle::WarADD(_DWORD *this, int a2, int a3, char *Source, int a5);
int __thiscall CCastle::GetWarSize(_DWORD *this);
void __thiscall CCastle::WarDelcareList(_DWORD *this, int a2);
BOOL __thiscall CCastle::IsStandardAlive(_DWORD *this);
int __thiscall CCastle::GetStandardUnfurl(_DWORD *this);
void __thiscall CCastle::SetStandardUnfurl(_DWORD *this, int a2);
void __thiscall CCastle::SetCurStandardGuild(int this, int a2, volatile int *a3);
void __cdecl CCastle::UnfurlStandardCancel(int a1);
void __thiscall CCastle::BrokenStandard(int *this, int a2);
int __cdecl CCastle::CreateStandard(int, int, char *Source, int); // idb
void __thiscall CCastle::CreateGate(int this, int a2, int a3, char *Source);
void __stdcall CCastle::CreateNoExistGate(int a1, int a2, char *Source);
int __cdecl CCastle::IsGateAlive(char a1, unsigned int a2);
int __thiscall CCastle::GetTaxRate(_DWORD *this);
void __thiscall CCastle::SetTaxRate(_DWORD *this, int a2, int a3);
BOOL __thiscall CCastle::IsPayment(_DWORD *this);
int __thiscall CCastle::GetTax(_DWORD *this);
void __thiscall CCastle::AddTax(_DWORD *this, int a2);
int __thiscall CCastle::ResetTax(_DWORD *this, int a2);
void __cdecl CCastle::TaxSave();
int __thiscall CCastle::IsGateUse(_DWORD *this, int a2);
int __thiscall CCastle::IsGateUseWarring(_DWORD *this, int a2);
void __cdecl CCastle::GateGoto(int a1, int a2);
int __thiscall CCastle::SetGateLimit(void *this, signed int a2, int a3);
void __cdecl CCastle::SetWarRemainSecondTime(int a1);
void __cdecl CCastle::ChangeLeaderName(int a1, char *Source);
void __cdecl CCastle::ChangeGuildName(int a1, char *Source);
void __thiscall CCastle::SetLordDeclare(_DWORD *this, int a2);
void __cdecl CCastle::SecondProcess();
void __thiscall CCastle::WarEnd(int this);
int __thiscall CCastle::IsWarEnd(int *this);
void __thiscall CCastle::ChangeLord(int this);
int CCastle::IsWarDeclared();
CWar *__thiscall CWar::CWar(CWar *this);
void *__thiscall sub_41C3F0(void *this, char a2);
void __thiscall sub_41C420(std::locale::facet *this);
void __cdecl CWar::Start();
void __cdecl CWar::Load(int a1, char *a2);
void __thiscall sub_41C650(volatile int **this);
_DWORD *__thiscall CWar::ADD(_DWORD *this, int a2);
void __thiscall CWar::Clear(int this);
void __thiscall sub_41C710(_DWORD *this);
void __thiscall sub_41C770(_DWORD *this);
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *__thiscall std::vector<IPAddrMask>::vector<IPAddrMask>(std::vector<CIOSocket::CIOTimer> *this);
CItemInfo *__thiscall std::vector<Event::Section>::operator[](std::vector<CItemInfo> *this, unsigned int _Pos); // idb
CIOSocket::CIOTimer *__thiscall std::vector<IPAddrMask>::push_back(std::vector<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Val);
// std::_String_base *__thiscall std::_String_base::_String_base(std::_String_base *this);
int __stdcall sub_41C8D0(int a1);
int __stdcall sub_41C950(int a1);
const std::length_error *__thiscall std::length_error::length_error(std::length_error *this, const std::length_error *that, void *a3, int a4);
unsigned int *__thiscall std::vector<char const *>::_Ufill(std::vector<unsigned int> *this, unsigned int *_Ptr, unsigned int _Count, const unsigned int *_Val); // idb
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *this, const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *_Val1, const bool *_Val2);
std::list<std::pair<std::string const ,int>>::const_iterator *__thiscall sub_41CAB0(std::list<std::pair<std::string const ,int>>::const_iterator *this);
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval); // idb
unsigned int __thiscall sub_41CB60(std::allocator<tagPARTICLES *> *this);
void __thiscall std::vector<std::list<std::pair<std::string const,int>>::iterator,std::allocator<std::list<std::pair<std::string const,int>>::iterator>>::_Insert_n(int this, char *a2, unsigned int a3, unsigned int *a4);
CMemory **__stdcall sub_41CE40(int a1);
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> >::iterator *__thiscall std::vector<TriggerSystem::CTrigger *>::iterator::operator+=(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> >::iterator *this, int _Off); // idb
int __thiscall std::vector<IPAddrMask>::iterator::operator-(std::vector<CIOSocket::CIOTimer>::iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right); // idb
std::list<std::pair<std::string const ,int>>::const_iterator *__thiscall std::list<std::pair<std::string const,int>>::const_iterator::operator--(std::list<std::pair<std::string const ,int>>::const_iterator *this); // idb
int __thiscall sub_41CEE0(_DWORD *this, _DWORD *a2);
std::pair<int const ,IDirect3DTexture9 *> *__thiscall std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(std::pair<int const ,IDirect3DTexture9 *> *this, const std::pair<int,IDirect3DTexture9 *> *_Right);
char *__thiscall std::vector<CGameScreenOverlay>::_Ucopy<std::vector<CGameScreenOverlay>::const_iterator>(std::allocator<unsigned int> *this, void *Src, int a3, void *a4);
unsigned int __cdecl sub_41CF60(unsigned int *a1, unsigned int a2, const unsigned int *a3);
void *__cdecl std::_Copy_backward_opt<CControl * *,CControl * *>(void *a1, int a2, int a3);
char *__cdecl std::_Uninit_copy<Patch *,Patch *>(void *a1, int a2, void *a3);
void *__thiscall sub_41D000(void *this);
void *__thiscall sub_41D030(void *this);
int __thiscall sub_41D060(void *this);
int __thiscall sub_41D080(void *this);
int __thiscall sub_41D0A0(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D150(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4);
int __thiscall sub_41D1F0(void *this);
int __thiscall sub_41D210(void *this);
int __thiscall sub_41D230(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D2E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4);
CInitItem *__thiscall CInitItem::CInitItem(CInitItem *this);
void *__thiscall CInitItem::`scalar deleting destructor'(CInitItem *this, char a2);
void __thiscall CInitItem::~CInitItem(CInitItem *this);
int __thiscall sub_41D5C0(void *this);
void __cdecl CInitItem::Open();
int __cdecl CInitItem::FindKey(const char *szKey);
CBase *__thiscall CInitItem::Copy(CInitItem *);
int __thiscall CInitItem::Set(CInitItem *this, enum Symbol symbol, lisp::var value);
int __thiscall CInitItem::OnLoad(CInitItem *this);
int __thiscall CInitItem::SetSpec(CInitItem *, lisp::var value);
CSpecPrty *__thiscall CSpecPrty::CSpecPrty(CSpecPrty *this, int nType, int nValue);
CInitItem *__thiscall CSpec::CSpec(CSpec *this, int nValue);
// int __stdcall unknown_libname_5(int a1, int a2);
CSpecPrty *__thiscall CSpecPrty::CSpecPrty(CSpecPrty *this, int nType, int nValue1, int nValue2); // idb
int __thiscall CSpec::CSpec(CSpec *this, int nValue1, int nValue2);
CSpecGState *__thiscall CSpecGState::CSpecGState(CSpecGState *this, int nValue);
CSpecTeleport *__thiscall CSpecTeleport::CSpecTeleport(CSpecTeleport *this, int nValue1, int nValue2);
CSpecRefresh *__thiscall CSpecRefresh::CSpecRefresh(CSpecRefresh *this, int nValue1, int nValue2);
CSpecCharming *__thiscall CSpecCharming::CSpecCharming(CSpecCharming *this, int nValue);
CSpecRepair *__thiscall CSpecRepair::CSpecRepair(CSpecRepair *this, int mValue);
CSpecChangePrefix *__thiscall CSpecChangePrefix::CSpecChangePrefix(CSpecChangePrefix *this, int nICLimit, int nRate0, int nPrefix0, int nRate1, int nPrefix1);
CSpecProtect *__thiscall CSpecProtect::CSpecProtect(CSpecProtect *this);
CSpecBuff *__thiscall CSpecBuff::CSpecBuff(CSpecBuff *this, int nBuffType, int dwTime, int nAmount);
CSpecRevival *__thiscall CSpecRevival::CSpecRevival(CSpecRevival *this, int nValue);
void __thiscall CInitItem::ApplySpec(CInitItem *this, CPlayer *pPlayer);
void __thiscall CInitItem::FreeSpec(CInitItem *this, CPlayer *pPlayer);
int __thiscall CInitItem::Use(CInitItem *this, CPlayer *pPlayer);
int __thiscall CInitItem::Enchant(CInitItem *this, CPlayer *pPlayer, CItem *pItem);
int CInitItem::GetSpecValue(CInitItem *this, enum Symbol symbol, ...);
CPrefix *__thiscall CPrefix::CPrefix(CPrefix *this);
CPrefix *__thiscall CPrefix::`scalar deleting destructor'(CPrefix *this, char a2);
void __thiscall CPrefix::~CPrefix(CPrefix *this);
CBase *__thiscall CPrefix::Copy(CPrefix *);
int __thiscall CPrefix::Set(CPrefix *this, enum Symbol symbol, struct lisp::var value);
int __thiscall CPrefix::OnLoad(CPrefix *this);
void __thiscall CPrefix::ApplySpec(CPrefix *this, CPlayer *pPlayer);
void __thiscall CPrefix::FreeSpec(CPrefix *this, CPlayer *pPlayer);
void __thiscall CSpecPrty::ApplySpec(CSpecPrty *this, CPlayer *pPlayer);
void __thiscall CSpecPrty::FreeSpec(CSpecPrty *this, CPlayer *pPlayer);
void __thiscall CSpecGState::ApplySpec(CSpecGState *this, CPlayer *pPlayer);
void __thiscall CSpecGState::FreeSpec(CSpecGState *this, CPlayer *pPlayer);
int __thiscall CSpecTeleport::Use(CSpecTeleport *this, CPlayer *pPlayer);
int __thiscall CParty::ExistOnPK(CParty *this);
int __thiscall CSpecRefresh::Use(CSpecRefresh *this, CPlayer *pPlayer);
int __thiscall CSpecCharming::Enchant(CSpecCharming *this, CPlayer *pPlayer, CItem *pItem);
int __thiscall CSpecRepair::Enchant(CSpecRepair *this, CPlayer *pPlayer, CItem *pItem);
int __thiscall CSpecChangePrefix::Enchant(CSpecChangePrefix *this, CPlayer *pPlayer, CItem *pItem);
int __thiscall CSpecProtect::Enchant(CSpecProtect *this, CPlayer *pPlayer, CItem *pItem);
int __thiscall CSpecBuff::Use(CSpecBuff *this, CPlayer *pPlayer); // idb
int __thiscall CSpecRevival::Use(CSpecRevival *this, CPlayer *a2);
void *__thiscall sub_41FFC0(void *this);
int __thiscall sub_41FFF0(void *this);
int __thiscall sub_420010(void *this);
_DWORD *__thiscall sub_420030(int *this, _DWORD *a2, int a3);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_420060(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3);
bool __thiscall mbstricmp::operator()(iless *this, const char *a, const char *b); // idb
int __thiscall sub_420250(void *this);
int __thiscall sub_420270(int this, int a2, char a3, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *a4, const std::pair<int const ,CGame_Character::TargetInfo> *a5);
int __thiscall sub_4206B0(int this);
_DWORD *__thiscall sub_420760(_DWORD *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420780(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_420820(_DWORD *this);
int __stdcall sub_420880(int a1);
CMemory **__cdecl sub_420900(int a1);
void *__thiscall sub_420920(void *this);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall std::_Tree_ptr<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tree_ptr<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, char a3);
void __thiscall std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>(CAtlTraceSettings *this);
int __thiscall sub_4209C0(void *this);
int __thiscall sub_4209E0(void *this);
int __thiscall sub_420A00(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420AB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_420B50(_DWORD *this);
int __stdcall sub_420BB0(int a1);
CInitMap *__thiscall CInitMap::CInitMap(CInitMap *this);
CInitMap *__thiscall CInitMap::`scalar deleting destructor'(CInitMap *this, char a2);
void __thiscall CInitMap::~CInitMap(CInitMap *this);
int __thiscall CInitMap::Set(CInitMap *this, enum Symbol symbol, lisp::var value);
int __thiscall CInitMap::OnLoad(CInitMap *this);
DWORD __cdecl SnapCurrentProcessMiniDump(LPCONTEXT lpContext);
void __thiscall CIOException::CInit::CInit(CIOException::CInit *this);
char *__cdecl GetFilePart(char *source);
void __cdecl __noreturn SecurityHandler();
void sub_421120();
void sub_421130();
BOOL __cdecl sendMail();
int __cdecl sendMail_0(const char *host, const char *from, const char *to, const char *body);
int __cdecl sendFile(unsigned int sock, const char *name);
void __cdecl static GenerateExceptionReport(PEXCEPTION_POINTERS data);
BOOL hprintf(void *LogFile, char *Format, ...);
void __cdecl CreateMiniDump(_EXCEPTION_POINTERS *pException);
int __cdecl RecordModuleList(void *LogFile);
// int __cdecl _getdrive();
// int __cdecl sub_422180(HANDLE hFile); idb
const char *__cdecl GetExceptionDescription(unsigned int ExceptionCode); // idb
int __cdecl PrintStack(void *LogFile, unsigned int begin, unsigned int end);
BOOL __cdecl ImageHelpStackWalk(void *LogFile, _CONTEXT *ptrContext);
unsigned int __cdecl IntelStackWalk(int a1, int a2);
LONG __stdcall RecordExceptionInfo(struct _EXCEPTION_POINTERS *ExceptionInfo);
void __thiscall CIOException::CInit::~CInit(CIOException::CInit *this);
void ELOG(char *Format, char a2, ...);
void __stdcall __spoils<edx,ecx> EBREAK();
int __cdecl EBreak();
int __cdecl CIOException::Filter(_EXCEPTION_POINTERS *pExp);
HANDLE __cdecl CIOException::Open(const char *szMailServer, const char *szMailFrom, const char *szMailTo);
BOOL sub_422EC0();
LONG sub_422EE0();
LONG sub_422F00();
void sub_422F10();
LONG sub_422F30();
void __cdecl CIOException::DumpStack(int nThread, void **hThread, unsigned int *nThreadId);
DWORD __cdecl ImageHelpStackWalk(HANDLE hFile, HANDLE hThread);
LONG __thiscall CIOSocket::AddIOThread(volatile LONG *this);
CIOCriticalSection *__thiscall CIOCriticalSection::CIOCriticalSection(CIOCriticalSection *this);
void __thiscall CIOCriticalSection::~CIOCriticalSection(CIOCriticalSection *this);
void __thiscall CIOCriticalSection::Enter(struct _RTL_CRITICAL_SECTION *this);
void __thiscall CIOCriticalSection::Leave(int this);
int sub_423710();
int __cdecl CIOObject::RegisterWait(int nThread);
unsigned int __thiscall CIOSocket::AddIOThread(void *this);
int __cdecl CIOSocket::CloseIOThread();
void __stdcall CIOSocket::FreeIOThread();
// void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this); weak
LONG __thiscall CIOObject::AddRef(CIOObject *this, volatile int *pRef);
void __thiscall CIOObject::Release(CIOObject *this, volatile int *pRef);
int __thiscall CIOObject::RegisterWait(CIOObject *this, void *handle);
void __thiscall CIOObject::AddTimer(CIOObject *this, unsigned int dwTime, int nId);
CIOSocket::CIOTimer *__thiscall CIOSocket::CIOTimer::CIOTimer(CIOSocket::CIOTimer *this, CIOObject *pObject, unsigned int dwTime, int nId);
void __thiscall CIOBuffer::Alloc(CIOObject *this, int nId);
void __thiscall CIOObject::OnIOCallback(CIOObject *this, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
void __thiscall CIOSocket::CIOTimerInstance::OnTimerCallback(CIOSocket::CIOTimerInstance *this, int nId);
void __thiscall CIOSocket::CIOTimerInstance::OnIOCallback(CIOSocket::CIOTimerInstance *this, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
unsigned int __stdcall CIOBuffer::FreeAll(void *formal);
void __stdcall __noreturn CIOSocket::IOThread(void *arglist);
int __stdcall CIOSocket::DumpStack();
int __stdcall `vector constructor iterator'(void *__t, unsigned int __s, int __n, void *(__thiscall *__f)(void *));
CIOBuffer *__cdecl CIOBuffer::Alloc();
LONG __thiscall CIOBuffer::Free(CIOBuffer *this);
int __cdecl CIOBuffer::FreeAll();
_DWORD *__thiscall CIOSocket::CIOSocket(_DWORD *this, int a2);
void __thiscall sub_4241C0(void *this, char a2);
void __thiscall CIOSocket::_CIOSocket(CIOBuffer **a1);
void __thiscall CIOSocket::WriteCallback(CIOSocket *this);
void __thiscall CIOSocket::GracefulClose(CIOSocket *this);
void __thiscall CIOSocket::OnIOCallback(CIOSocket *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
void __thiscall sub_4243D0(CIOSocket *this);
void __thiscall CIOSocket::ReadCallback(CIOSocket *this, unsigned int dwTransferred);
void __thiscall CIOSocket::Read(CIOSocket *this, unsigned int dwLeft);
void __thiscall CIOSocket::WriteCallback(CIOSocket *this, unsigned int dwTransferred);
void __thiscall CIOSocket::Write(CIOSocket *this, CIOBuffer *pBuffer);
void __thiscall CIOServer::CIOServer(CIOServer *this);
CWin32FileIO *__thiscall sub_424990(CWin32FileIO *this, char a2);
void __thiscall CAnger::~CAnger(CWin32FileIO *this);
CIOServer *__thiscall CIOServer::Close(CIOServer *this);
int __thiscall CIOObject::Release(CIOServer *this, int nPort);
BOOL __thiscall CIOServer::OnWaitCallback(CIOServer *this);
int __thiscall CIOServer::Stop(CIOServer *this);
void __thiscall std::priority_queue<CIOSocket::CIOTimer>::top(CIOServer *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
void __thiscall CIOSocket::Initialize(CIOSocket *this);
BOOL __thiscall sub_424D30(void *this);
CIOSocket::CIOTimer *__thiscall sub_424D50(std::vector<CIOSocket::CIOTimer> *this);
int *__thiscall std::priority_queue<CIOSocket::CIOTimer>::push(std::priority_queue<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Pred);
int __thiscall std::priority_queue<CIOSocket::CIOTimer>::pop(std::priority_queue<CIOSocket::CIOTimer> *this);
CIOSocket::CIOTimer *__thiscall std::vector<CIOSocket::CIOTimer>::front(std::vector<CIOSocket::CIOTimer> *this); // idb
char *__thiscall sub_424E30(int this, int a2);
int __thiscall std::vector<CIOSocket::CIOTimer>::pop_back(std::vector<CIOSocket::CIOTimer> *this);
int __thiscall sub_424EF0(std::vector<CIOSocket::CIOTimer> *this, int a2, int a3, int a4);
int __thiscall std::vector<IPAddrMask>::_Destroy(std::vector<CIOSocket::CIOTimer> *this, CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last);
void __thiscall sub_424FA0(int this, CIOSocket::CIOTimer *a2, unsigned int a3, int *a4);
int __thiscall sub_425280(_DWORD *this, _DWORD *a2);
int *__cdecl std::push_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2);
int __cdecl std::pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2);
void *__cdecl std::_Uninitialized_fill_n<IPAddrMask *,unsigned int,IPAddrMask,std::allocator<IPAddrMask>>(void *a1, int a2, int a3);
char *__cdecl std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, const CIOSocket::CIOTimer *_Val);
_DWORD *__thiscall sub_4253A0(_DWORD *this);
int sub_4253C0();
int *__cdecl std::_Push_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2);
int *__cdecl std::_Pop_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2);
// int __cdecl unknown_libname_6(_DWORD, _DWORD); weak
_DWORD *__cdecl std::_Copy_backward_opt<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(_DWORD *a1, _DWORD *a2, _DWORD *a3);
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall std::vector<IPAddrMask>::iterator::operator+(std::vector<CIOSocket::CIOTimer>::iterator *this, std::vector<CIOSocket::CIOTimer>::iterator *result, int _Off); // idb
_DWORD *__thiscall sub_425550(_DWORD *this, int a1);
int *__cdecl std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6);
int *__cdecl std::_Pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6);
BOOL __stdcall sub_4256A0(int a1, int a2);
BOOL __thiscall sub_4256C0(_DWORD *this, _DWORD *a2);
int *__cdecl std::_Adjust_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6);
void *__thiscall sub_425830(void *this);
std::vector<CIOSocket::CIOTimer> *__thiscall sub_425850(std::vector<CIOSocket::CIOTimer> *this);
CIOObject *__thiscall sub_425880(CIOObject *this);
Concurrency::details::_Condition_variable *__thiscall CIOBuffer::CSlot::CSlot(Concurrency::details::_Condition_variable *this);
std::vector<CIOSocket::CIOTimer> *__thiscall sub_4258D0(void *this);
CItem *__thiscall CItem::CItem(CItem *this);
int __thiscall sub_4259B0(_DWORD *this, int a2);
int __thiscall sub_4259D0(_DWORD *this, int a2, int a3);
int __stdcall sub_4259F0(int a1, int a2, int a3, int a4);
void *__thiscall sub_425A00(void *this, char a2);
void __thiscall sub_425A30(std::locale::facet *this);
int __cdecl CItem::InsertInitItem(int a1);
int __cdecl CItem::InsertPrefix(int a1);
int __cdecl sub_425B10(int a1);
void __cdecl CItem::ReloadItemGroup();
CConfig *__thiscall sub_425C20(CConfig *this);
void __thiscall sub_425C40(CConfig *this);
int __cdecl sub_425C60(int a1);
int __cdecl sub_425CB0(int a1);
CItem *__cdecl CItem::NewItem(CInitItem *pInit);
CItemMask *__thiscall CItemMask::CItemMask(CItemMask *this, int a2);
BOOL __thiscall CItemDefense::IsBroken(CItemDefense *this); // idb
CItemMask *__thiscall CItemMask::`scalar deleting destructor'(CItemMask *this, char a2);
CItemStandard *__thiscall CItemStandard::CItemStandard(CItemStandard *this, int a2);
void __thiscall sub_426040(void *this);
CItem *__cdecl CItem::CreateItem(int nPID, char **ppInfo);
CItem *__cdecl CItem::CreateItem(int nIndex, int nPrefix, int nNum, int nVer);
CItem *__cdecl CItem::CreateCheatItem(int nIndex, int nPrefix, int nNum, int nVer);
void __thiscall CItem::AddState(CItem *this, int dwState);
CItem *__cdecl CItem::CreateOwnItem(int nIndex, int nPrefix, int nNum, int nVer);
CItem *__cdecl CItem::CreateDropItem(int nItemGroup, int dwDropItemMask);
CItem *__cdecl CItem::CreateQuestItem(int nItemGroup);
void __cdecl CItem::Close();
void __cdecl CItem::ClearItemGroup();
void __thiscall CItem::OnTimer(CItem *this, int nId);
void __thiscall CItem::PutInfo(CItem *this, char *ppInfo, int nNum);
void __thiscall CItem::Init(CItem *this, int nPID, char *ppInfo);
void __thiscall CItem::Init(CItem *this, int nPrefix, int nNum, int nVer);
void __thiscall CItem::SendDelete(CItem *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer); // idb
void __thiscall CItem::SendCreate(CItem *this, CBase *pPlayer, CIOBuffer *pCreateBuffer);
int __thiscall CItem::Trash(CItem *this, CPlayer *pPlayer, int nLogType);
int __thiscall CItem::Erase(CItem *this, int nLogType);
void __thiscall CItem::Insert(CItem *this, int nPID, int nIID); // idb
void __thiscall CItem::Insert(CItem *this, CPlayer *pPlayer, int nLogType, int bOldItem);
int __thiscall CItem::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum);
void __thiscall CItem::Drop(CItem *this, CChar *pChar, const tagPOINT *ptP, const tagPOINT *ptT, int bDropAll, int bParty, int nKeyID);
CItem *__thiscall CItem::Trade(CItem *this, CPlayer *pPlayer, int nLogType, int nNum);
BOOL __thiscall CItem::CanSell(CItem *this, int nNum);
unsigned int __thiscall CItem::IsState(CItem *this, int dwState); // idb
BOOL __thiscall CItem::CanTrade(CItem *this, int nNum, CPlayer *pPlayer, CPlayer *pOther);
BOOL __thiscall CItem::CanDrop(_DWORD *this, int a2, int a3);
int __thiscall CItem::StorageOut(CItem *this, CPlayer *pPlayer, int nNum, int nIndex, int *nStorNum);
void __thiscall CItem::ForcedStorageIn(CItem *this, int nLogType, int nUID, char *szName, int nPayCode);
int __cdecl CItem::NewIID();
int __thiscall CItem::GetSellMoney(CItem *this, int nNum);
int __thiscall CItem::SetEtc(CItem *this, CPlayer *pPlayer);
void __thiscall CItem::SendItemInfo(CItem *this, CPlayer *, enum S2C_PROTOCOL nType);
void __thiscall CItem::InsertItem(CItem *this, CPlayer *pPlayer, int nLogType, int nIndex, int nPrefix, int nNum, int nVer);
CItemWeapon *__thiscall CItemWeapon::CItemWeapon(CItemWeapon *this, CInitItem *pInit); // idb
void __thiscall sub_4275C0(std::locale::facet *this);
void __thiscall CItemWeapon::PutInfo(CItemWeapon *this, char *ppInfo, int nNum);
void __thiscall CItemWeapon::Init(CItemWeapon *this, int nPID, char *ppInfo);
void __thiscall CItemWeapon::Init(CItemWeapon *this, int nPrefix, int nNum, int nVer);
void __thiscall CItemWeapon::SetWearState(CItemWeapon *this, CPlayer *a2);
void __thiscall CItem::SubState(CItem *this, int dwState);
void __thiscall CPlayer::AddWState(CPlayer *this, unsigned int nWState);
unsigned int __thiscall CPlayer::IsWState(CPlayer *this, int nWState);
int __thiscall CItemWeapon::Trash(CItemWeapon *this, CPlayer *pPlayer, int nLogType);
void __thiscall CItemWeapon::Erase(CItemWeapon *this, int nLogType);
void __thiscall CItemWeapon::ApplySpec(CItemWeapon *this, CPlayer *pPlayer);
void __thiscall CItemWeapon::FreeSpec(CItemWeapon *this, CPlayer *pPlayer);
void __thiscall CItemWeapon::PutOn(CItemWeapon *this, CPlayer *pPlayer);
void __thiscall CItemWeapon::PutOff(CItemWeapon *this, CPlayer *pPlayer);
void __thiscall CPlayer::SubWState(CPlayer *this, int nWState);
void __thiscall CItemWeapon::Insert(CItemWeapon *this, int nPID, int nIID);
int __thiscall CItemWeapon::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum);
BOOL __thiscall CItemDefense::CanSell(CItemDefense *this, int nNum);
int __thiscall CItemWeapon::StorageIn(int this, int a2, int a3);
void __thiscall CItemWeapon::ForcedStorageIn(_DWORD *this, int a2, int a3, char *a4, int a5);
signed int __thiscall CItemWeapon::Charming(_DWORD *this, int a2, int a3);
int __thiscall CItem::GetLevel(_DWORD *this);
int __thiscall CItemWeapon::CharmingCheat(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemDefense::Repair(_DWORD *this, int a2);
int __thiscall CItemWeapon::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CItemWeapon::Protect(_DWORD *this, int a2);
int __thiscall CItemWeapon::GetSellMoney(_DWORD *this, int a2);
void __thiscall CItemWeapon::UpgradeDestroy(CPlayer *this, int a2);
void __thiscall CItemWeapon::UpgradeRateUp(_DWORD *this, int a2);
void __thiscall CItemWeapon::UpgradeLevel(int this, int a2);
CItemDefense *__thiscall CItemDefense::CItemDefense(CItemDefense *this, int a2);
std::locale::facet *__thiscall sub_42A390(std::locale::facet *this, char a2);
void **__thiscall CItemDefense::PutInfo(int this, void **a2, int a3);
int __thiscall CItemDefense::Init2(int this, int a2, _DWORD *a3);
void __thiscall CItemDefense::SetWearState(_DWORD *this, _DWORD *a2);
int __thiscall CItemDefense::Trash(CItem *this, int a2, int a3);
int __thiscall CItemDefense::Erase(CItem *this, int a2);
int __thiscall CItemDefense::ApplySpec(int *this, int a2);
int __thiscall CItemDefense::FreeSpec(int *this, int a2);
void __thiscall CItemDefense::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemDefense::PutOff(_DWORD *this, _DWORD *a2);
void __thiscall sub_42AE20(_DWORD *this, int a2, int a3);
void __thiscall CItemDefense::Insert(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemDefense::UpdateNum(CItem *this, int a2, int a3, int a4);
int __thiscall CItemDefense::StorageIn(int this, int a2, int a3);
int __thiscall CItemDefense::Charming(_DWORD *this, int a2, int a3);
int __thiscall CItemDefense::CharmingCheat(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemDefense::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CItemDefense::Protect(_DWORD *this, int a2);
int __thiscall CItemDefense::GetSellMoney(_DWORD *this, int a2);
void __thiscall CItemDefense::UpgradeDestroy(CPlayer *this, int a2);
void __thiscall CItemMask::SetWearState(_DWORD *this, int a2);
void __stdcall CItemMask::PutOn(int a1);
_DWORD *__thiscall CItemMask::Init(_DWORD *this, int a2, int a3, int a4);
void __thiscall CItemStandard::SetWearState(_DWORD *this, int a2);
int *__thiscall CItemStandard::ApplySpec(int *this, int a2);
int *__thiscall CItemStandard::FreeSpec(int *this, int a2);
void __thiscall CItemStandard::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemStandard::PutOff(_DWORD *this, _DWORD *a2);
int __stdcall CItemStandard::CanDrop(int a1, int a2);
BOOL __thiscall CItemStandard::CanTrade(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemStandard::Broken(CPlayer *this, _DWORD *a2, int a3);
CItemOrnament *__thiscall CItemOrnament::CItemOrnament(CItemOrnament *this, int a2);
int __thiscall CItemOrnament::Init(_DWORD *this, char a2, int a3, int a4);
void __thiscall CItemOrnament::SetWearState(_DWORD *this, _DWORD *a2);
int __thiscall CItemOrnament::Trash(CItem *this, int a2, int a3);
int __thiscall CItemOrnament::Erase(CItem *this, int a2);
BOOL __thiscall CItemOrnament::ApplySpec(int *this, int a2);
BOOL __thiscall sub_42C720(int *this, int a2);
void __thiscall CItemOrnament::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemOrnament::PutOff(_DWORD *this, _DWORD *a2);
void __thiscall CItemOrnament::Insert(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemOrnament::UpdateNum(int this, int a2, int a3, int a4);
BOOL __thiscall CItemTransform::CanDrop(_DWORD *this, int a2, int a3);
int __thiscall CItemOrnament::StorageIn(int this, int a2, int a3);
void __thiscall CItemOrnament::ForcedStorageIn(_DWORD *this, int a2, int a3, char *a4, int a5);
int __thiscall CItemOrnament::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CItemOrnament::GetSellMoney(_DWORD *this, int a2);
void __thiscall CItemOrnament::UpgradeDestroy(int this, int a2);
_DWORD *__thiscall sub_42CF10(_DWORD *this, int a2);
int __thiscall CItem::Sum(CItem *this, int nNum);
int __thiscall CItemGeneral::Use(CItemGeneral *this, CPlayer *pPlayer);
CItem *__thiscall CItemGeneral::Trade(CItemGeneral *this, CPlayer *pPlayer, int nLogType, int nNum);
int __thiscall CItemGeneral::StorageIn(CItemGeneral *this, CPlayer *pPlayer, int nNum);
int __thiscall CItemGeneral::StorageOut(CItem *this, CPlayer *pPlayer, int nNum, int nIndex, _DWORD *nStorNum);
int __thiscall CItemGeneral::Enchant(CItemGeneral *this, CPlayer *pPlayer, CItem *pItem); // idb
CItemGeneral *__thiscall CItemGeneral::CItemGeneral(CItemGeneral *this, CInitItem *pInit);
int __thiscall CItemGeneral::UpdateNum(CItemGeneral *this, CPlayer *pPlayer, int nLogType, int nNum);
BOOL __thiscall CItemQuest::CanMerge(CItemQuest *this, CItem *pConvItem);
CItemMoney *__thiscall CItemMoney::CItemMoney(CItemMoney *this, CInitItem *pInit); // idb
BOOL __thiscall CItemMoney::CanMerge(CItemMoney *this, CItem *pConvItem); // idb
int __thiscall CItemMoney::Trash(CItem *this, CPlayer *pPlayer, int nLogType);
void __thiscall CItemMoney::Insert(CItemMoney *this, CPlayer *pPlayer, int nLogType, int bOldItem);
int __thiscall CItemMoney::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum);
void __thiscall CItemMoney::Drop(CItemMoney *this, CChar *pChar, const tagPOINT *ptP, const tagPOINT *ptT, int bDropAll, int bParty, int nKeyID);
CItem *__thiscall CItemMoney::Trade(CItemMoney *this, CPlayer *pPlayer, int nLogType, int nNum);
int __thiscall CItemMoney::StorageIn(CItemMoney *this, CPlayer *a2, int nNum); // idb
int __thiscall CItemMoney::StorageOut(CItem *this, CPlayer *pPlayer, int nNum, int nIndex, int *nStorNum);
void __thiscall CItemMoney::SetEtc(CItemMoney *this, CPlayer *pPlayer);
CItemTransform *__thiscall CItemTransform::CItemTransform(CItemTransform *this, CInitItem *pInit); // idb
void __thiscall CItemTransform::PutInfo(CItemTransform *this, char **ppInfo, int nNum);
void __thiscall CItemTransform::Init(CItemTransform *this, int nPID, _DWORD *ppInfo);
void __thiscall CItemTransform::Init(CItemTransform *this, int nPrefix, int nNum, int nVer);
void __thiscall CItemTransform::SetWearState(CItemTransform *this, CPlayer *pPlayer);
int __thiscall CItemTransform::Trash(CItemTransform *this, CPlayer *pPlayer, int nLogType);
void __thiscall CItemTransform::Erase(CItemTransform *this, int nLogType);
void __thiscall CItemTransform::ApplySpec(CItemTransform *this, CPlayer *pPlayer);
void __thiscall CItemTransform::FreeSpec(CItemTransform *this, CPlayer *pPlayer);
void __thiscall CItemTransform::PutOn(CItemTransform *this, CPlayer *pPlayer);
void __thiscall CItemTransform::PutOff(CItemTransform *this, CPlayer *pPlayer);
void __thiscall CItemTransform::Insert(CItemTransform *this, CPlayer *pPlayer, int nLogType, int bOldItem); // idb
int __thiscall CItemTransform::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum);
BOOL __thiscall CItemTransform::CanTrade(CItemTransform *this, int nNum, CPlayer *pPlayer, CPlayer *pOther);
int __thiscall CItemTransform::StorageIn(CItemTransform *this, CPlayer *pPlayer, int nNum);
void __thiscall CItemTransform::ForcedStorageIn(CItemTransform *this, int nLogType, int nUID, char *szName, int nPayCode);
void __thiscall CItemTransform::UpdateExp(CItemTransform *this, CPlayer *pPlayer, int bTimer);
void __thiscall CItemTransform::CheatLevelUp(CItemTransform *this, CPlayer *pPlayer, int nNewLevel); // idb
void __thiscall CItemTransform::SaveInfo(CItemTransform *this, int bLevelUp); // idb
void __thiscall CItemTransform::ApplyTransform(CItemTransform *this, CPlayer *pPlayer, int nLevel);
void __thiscall CItemTransform::FreeTransform(CItemTransform *this, CPlayer *pPlayer);
_DWORD *__thiscall sub_42F590(_DWORD *this);
_DWORD *__thiscall sub_42F5F0(_DWORD *this);
_DWORD *__thiscall sub_42F650(_DWORD *this);
int __stdcall sub_42F6B0(int a1);
int __stdcall sub_42F730(int a1);
int __stdcall sub_42F7B0(int a1);
// int __thiscall unknown_libname_7(_DWORD); weak
int __thiscall sub_42F840(_DWORD *this);
int __cdecl sub_42F920(int a1);
_WORD *__cdecl PutNumeric<short>(_WORD *a1, __int16 a2);
void *__thiscall sub_42F980(void *this);
std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *__stdcall sub_42F9B0(void *a1, int a2);
void *__thiscall sub_42F9D0(void *this);
// int __cdecl _initp_misc_winxfltr();
void *__thiscall sub_42FA10(void *this);
int __thiscall sub_42FA40(void *this);
int __thiscall sub_42FA60(void *this);
int __thiscall sub_42FA80(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FB30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_42FBD0(void *this);
int __thiscall sub_42FBF0(void *this);
int __thiscall sub_42FC10(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FCC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_42FD60(void *this);
int __thiscall sub_42FD80(void *this);
int __thiscall sub_42FDA0(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FE50(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, std::vector<CIOSocket::CIOTimer>::const_iterator a4);
CBase *__thiscall CGroup::Copy(CGroup *);
CGroup *__thiscall CGroup::CGroup(CGroup *this);
CGroup *__thiscall CGroup::`scalar deleting destructor'(CGroup *this, char a2);
void __thiscall CGroup::~CGroup(CGroup *this);
int __thiscall CGroup::Set(CGroup *this, Symbol symbol, lisp::var value);
ITEMDROPINFO *__thiscall ITEMDROPINFO::ITEMDROPINFO(ITEMDROPINFO *this);
ITEMDROPINFO *__thiscall ITEMDROPINFO::ITEMDROPINFO(ITEMDROPINFO *this, int itemId); // idb
int __thiscall CGroup::OnLoad(CGroup *this); // idb
void __thiscall CGroup::GetItemInfo(CGroup *this, _DWORD *nIndex, _DWORD *nPrefix, _DWORD *nNum);
int __cdecl CItemGroup::InsertGroup(CGroup *pGroup); // idb
void __cdecl CItemGroup::ClearGroup();
CBase *__thiscall CItemGroup::Copy(CItemGroup *);
CItemGroup *__thiscall CItemGroup::CItemGroup(CItemGroup *this);
void *__thiscall CItemGroup::`scalar deleting destructor'(void *this, char a2);
void __thiscall CItemGroup::~CItemGroup(CItemGroup *this);
int __thiscall CItemGroup::Set(CItemGroup *this, enum Symbol symbol, lisp::var value);
int __thiscall CItemGroup::OnLoad(CItemGroup *this);
CGroup *__thiscall CItemGroup::FindGroup(CItemGroup *this);
void __thiscall CItemGroup::GetItemInfo(CItemGroup *this, int *nIndex, _DWORD *nPrefix, _DWORD *nNum);
CGroup *__thiscall CItemGroup::GetFirstGroup(CItemGroup *this);
void __cdecl CGoods::ForcedStorageIn(int nUID, int nMax, char *packet);
void __cdecl CGoods::ClearGoods();
CBase *__thiscall CGoods::Copy(CGoods *);
CGoods *__thiscall CGoods::CGoods(CGoods *this);
CGoods *__thiscall CGoods::`scalar deleting destructor'(CGoods *this, char a2);
void __thiscall CGoods::~CGoods(CGoods *this); // idb
int __thiscall CGoods::Set(CGoods *this, enum Symbol symbol, struct lisp::var value);
int __thiscall CGoods::OnLoad(CGoods *this);
std::vector<tagRECT> *__thiscall std::vector<ITEMDROPINFO>::vector<ITEMDROPINFO>(std::vector<ITEMDROPINFO> *this); // idb
tagRECT *__thiscall std::vector<ITEMDROPINFO>::~vector<ITEMDROPINFO>(std::vector<ITEMDROPINFO> *this, const tagRECT *a2); // idb
int __thiscall sub_430C20(_DWORD *this, int a2);
_DWORD *__thiscall sub_430C40(_DWORD *this);
XMessageQueue::XTimerElement *__thiscall sub_430CA0(int this, const XMessageQueue::XTimerElement *a2);
_DWORD *__thiscall sub_430D10(_DWORD *this);
char *__thiscall sub_430D70(int this, int a2);
int __thiscall sub_430DE0(void *this);
_DWORD *__thiscall sub_430E00(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_430E30(int *this, _DWORD *a2, int a3);
int __thiscall std::vector<tagRECT>::size(std::vector<tagRECT> *this);
int __thiscall sub_430EA0(std::vector<tagRECT> *this, int a2, int a3, int a4);
std::vector<tagRECT> *__thiscall std::vector<tagRECT>::_Tidy(std::vector<tagRECT> *this);
int __cdecl sub_430F90(int a1);
int __stdcall sub_430FA0(int a1);
int __thiscall sub_431020(std::vector<IPAddrMask> *this, int a2, int a3, int a4);
std::vector<IPAddrMask> *__thiscall std::vector<IPAddrMask>::_Tidy(std::vector<IPAddrMask> *this);
int __cdecl sub_431110(int a1);
int __stdcall sub_431120(int a1);
int __thiscall std::vector<CIOSocket::CIOTimer>::size(std::vector<CIOSocket::CIOTimer> *this);
int __thiscall sub_4311E0(std::vector<CIOSocket::CIOTimer> *this, int a2, int a3, int a4);
char __thiscall std::vector<CIOSocket::CIOTimer>::_Buy(std::vector<CIOSocket::CIOTimer> *this, unsigned int _Capacity);
std::vector<CIOSocket::CIOTimer> *__thiscall std::vector<CSyncPacket::CElement>::_Tidy(std::vector<CIOSocket::CIOTimer> *this);
_DWORD *__thiscall sub_431350(_DWORD *this);
// _DWORD __stdcall unknown_libname_8(_DWORD); weak
_DWORD *__thiscall sub_431390(_DWORD *this);
int __thiscall sub_4313B0(void *this, int a2, int a3);
void __thiscall std::vector<tagRECT>::_Insert_n(int this, tagRECT *a2, unsigned int a3, LONG *a4);
int __thiscall sub_4316C0(void *this, int a2, int a3);
void __thiscall std::vector<XMessageQueue::XElement>::_Insert_n(int this, XMessageQueue::XTimerElement *a2, unsigned int a3, int *a4);
CMemory **__thiscall std::_Tree<std::_Tmap_traits<int,int,std::less<int>,std::allocator<std::pair<int const,int>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Rarg, const std::pair<int const ,CGame_Character::TargetInfo> *_Val, char _Carg);
void __thiscall sub_431A40(int this, CIOSocket::CIOTimer *a2, unsigned int a3, int *a4);
_DWORD *__thiscall sub_431D20(int *this, _DWORD *a2, int a3);
int __thiscall sub_431D50(int *this, _DWORD *a2);
unsigned int __thiscall std::allocator<tagRECT>::max_size(std::allocator<tagRECT> *this); // idb
int __thiscall sub_431DB0(_DWORD *this, _DWORD *a2);
int __thiscall sub_431DD0(_DWORD *this, _DWORD *a2);
char *__cdecl sub_431DF0(void *a1, int a2, int a3);
char *__thiscall sub_431E30(void *this, int a2, int a3, void *a4);
char *__thiscall sub_431E60(void *this, int a2, int a3, void *a4);
void *__cdecl sub_431E90(void *a1, int a2, int a3);
_DWORD *__cdecl std::_Copy_backward_opt<tagRECT *,tagRECT *>(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl std::_Copy_backward_opt<XMessageQueue::XTimerElement *,XMessageQueue::XTimerElement *>(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __cdecl std::_Destroy_range<CSyncPacket::CElement>(int a1, int a2);
char *__cdecl std::allocator<IPAddrMask>::construct(IPAddrMask *_Ptr, const IPAddrMask *_Val, void *a3);
LONG *__cdecl std::_Construct<tagRECT,tagRECT>(tagRECT *_Ptr, const tagRECT *_Val);
void *__thiscall sub_432030(void *this);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, char a3);
void *__thiscall sub_4320A0(void *this);
int __thiscall sub_4320D0(void *this);
int __thiscall sub_4320F0(void *this);
int __thiscall sub_432110(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4321C0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_432260(void *this);
int __thiscall sub_432280(void *this);
int __thiscall sub_4322A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_432350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall lisp::var::operator=(_DWORD *this, int a2);
__int32 __thiscall sub_432410(const char **this);
unsigned __int32 __thiscall sub_432430(const char **this);
int __thiscall lisp::_cons::length(lisp::_cons *this);
std::ios_base *__thiscall sub_4324B0(std::ios_base *this);
unsigned int __thiscall CLog::CInit::~CInit(CLog::CInit *this);
void __cdecl CLog::AddV(int nType, char *format, char *va);
void __thiscall CScreen::Lock(CScreen *this); // idb
void __thiscall CScreen::Unlock(CScreen *this); // idb
void __stdcall CLog::Flush();
void LOG_INFO(char *format, ...); // idb
void LOG_NORMAL(char *format, ...); // idb
void LOG_ERR(char *format, ...); // idb
int __cdecl CMainConfig::Open();
void __thiscall sub_432EC0(int this);
void __cdecl CMainConfig::Close();
char *__cdecl GetStr(int nIndex);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::insert(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *result, const std::pair<int const ,CSocket *> *_Val); // idb
_DWORD *__thiscall sub_433110(_DWORD *this);
std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *result, const int *_Keyval); // idb
_lambda_9ab38a79c03e1e04423ad6818173354b_ *__thiscall _lambda_9ab38a79c03e1e04423ad6818173354b_::_lambda_9ab38a79c03e1e04423ad6818173354b_(_lambda_9ab38a79c03e1e04423ad6818173354b_ *this, _DWORD *a2, const std::string *a3);
int __cdecl sub_433230(int a1);
int __thiscall sub_433240(_DWORD *this, int a1, int a2);
int __stdcall sub_433270(int a1);
int __thiscall sub_4332F0(int this, int a2, char a3, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *a4, const std::pair<unsigned long const ,std::string > *a5);
int __cdecl sub_433730(int a1);
int *__thiscall sub_433740(void *this, int a2);
void __stdcall sub_4338F0(void *a1, int a2);
void *__stdcall sub_433910(int a1);
int __thiscall sub_433930(_DWORD *this);
int __thiscall sub_433950(int *this);
std::pair<unsigned long const ,tagSibmanRankInfo> *__thiscall std::pair<unsigned long const,tagSibmanRankInfo>::pair<unsigned long const,tagSibmanRankInfo>(std::pair<unsigned long const ,tagSibmanRankInfo> *this, const std::pair<unsigned long,tagSibmanRankInfo> *_Right);
int __cdecl sub_433AB0(int a1);
void *__cdecl sub_433AF0(void *a1);
CMemory **__cdecl sub_433B00(int a1);
void *__thiscall sub_433B20(void *this, char a2);
// int __thiscall sub_433B50(_DWORD); weak
std::string *__thiscall sub_433B70(std::vector<IPAddrMask> *this, char *a2);
std::string *__thiscall std::string::string(std::string *this);
void *__thiscall sub_433BC0(void *this);
int __thiscall sub_433BF0(void *this);
int __thiscall sub_433C10(void *this);
int __thiscall sub_433C30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_433CE0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_433D80(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_434510(int *this, _DWORD *a2, int a3);
int __thiscall sub_434540(int *this);
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd);
ATOM __cdecl MyRegisterClass(HINSTANCE__ *hInstance);
int __cdecl InitInstance(HINSTANCE hInstance, int nCmdShow); // idb
int TestException();
LRESULT __stdcall WndProc(HWND hWndParent, UINT Msg, WPARAM wParam, LPARAM lParam);
int __stdcall About(HWND__ *hDlg, unsigned int message, unsigned int wParam, int lParam); // idb
BOOL __stdcall NoticeDialogProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam); // idb
BOOL __stdcall ProtocolDialogProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam); // idb
int __stdcall StartThread(void *__formal); // idb
int __stdcall StopThread(void *arglist);
std::string *__thiscall std::string::append(std::string *this, const std::string *a2);
std::string *__thiscall std::string::append(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count); // idb
void *__thiscall CMemory::CInit::CInit(void *this);
void __thiscall CMemory::CMemory(CMemory *this);
int __thiscall CMemory::_heap_init(CMemory *this);
int __thiscall CMemory::__sbh_heap_init(CMemory *this, unsigned int threshold); // idb
CMemory **__cdecl CMemory::_malloc(unsigned int size);
void *__thiscall CMemory::_heap_alloc_base(CMemory *this, unsigned int size);
CMemory::tagEntry **__thiscall CMemory::__sbh_alloc_block(CMemory *this, int intSize);
CMemory::tagHeader *__thiscall CMemory::__sbh_alloc_new_region(CMemory *this); // idb
int __thiscall CMemory::__sbh_alloc_new_group(CMemory *this, CMemory::tagHeader *pHeader); // idb
void __cdecl CMemory::_free(void *pBlock);
void __thiscall CMemory::_free_base(CMemory *this, void *pBlock);
CMemory::tagHeader *__thiscall CMemory::__sbh_find_block(CMemory *this, void *pvAlloc); // idb
CMemory::tagGroup *__thiscall CMemory::__sbh_free_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc);
CMemory **__cdecl CMemory::_realloc(void *pBlock, unsigned int newsize);
void *__thiscall CMemory::_realloc_base(CMemory *this, void *pBlock, unsigned int newsize);
int __thiscall CMemory::__sbh_resize_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc, int intNew); // idb
void *__cdecl CNoMemoryObject::operator new(size_t nSize); // idb
void __thiscall CMemory::_mlock(CMemory *this); // idb
void __thiscall CMemory::_munlock(CMemory *this); // idb
char *__stdcall `vector destructor iterator'(void *a1, unsigned int a2, int a3, void (__thiscall *a4)(void *));
CInitMonster *__thiscall CInitMonster::CInitMonster(CInitMonster *this);
void *__thiscall CInitMonster::`scalar deleting destructor'(void *this, char a2);
void __thiscall CInitMonster::~CInitMonster(_DWORD *this);
CBase *__thiscall CInitMonster::Copy(CInitMonster *);
int __thiscall CInitMonster::Set(CInitMonster *this, enum Symbol symbol, lisp::var value);
int __thiscall CInitMonster::OnLoad(CInitMonster *this);
void __thiscall CInitMonster::DropItemEx(CInitMonster *this, CMonster *pMonster, int nMax, int nItemGroup, int bParty, int nKeyID, int *nRate, __int64 dwDropItemMask);
void __thiscall CInitMonster::DropItem(CInitMonster *this, CMonster *pMonster, int bParty, int nKeyID, int nBestID, __int64 dwDropItemMask);
BOOL __thiscall CSMap::IsValidTile(CSMap *this, const tagPOINT *ptP, int dwAttr);
BOOL __thiscall CCellMap::IsValidTile(CCellMap *this, const tagPOINT *ptT, __int64 dwAttr, int nQIndex);
CTile *__thiscall CCellMap::GetTile(CCellMap *this, const tagPOINT *_ptT);
CCellMap *__thiscall CSMap::_GetCellMap(CSMap *this, const tagPOINT *ptT); // idb
CGenMonster *__thiscall CGenMonster::CGenMonster(CGenMonster *this);
void *__thiscall CGenMonster::`scalar deleting destructor'(void *this, char a2);
void __thiscall CGenMonster::~CGenMonster(std::locale::facet *this);
CGenMonster *__thiscall CGenMonster::CGenMonster(CGenMonster *this, CMonster *pMonster, int nGenIndex, int nRange, int nMax); // idb
CBase *__thiscall CGenMonster::Copy(CGenMonster *);
int __thiscall CGenMonster::Set(CGenMonster *this, Symbol symbol, lisp::var value);
int __thiscall CGenMonster::OnLoad(CGenMonster *this);
void __thiscall CGenMonster::OnTimer(CGenMonster *this, int nId); // idb
void __thiscall CGenMonster::GetGenTile(CGenMonster *this, tagPOINT *ptP);
void __thiscall CGenMonster::Stop(CGenMonster *this);
int __thiscall CMonsterObject::CMonsterObject(CMonsterObject *this);
CLink *__thiscall CLink::Initialize(CLink *this);
void *__thiscall CMonsterObject::`scalar deleting destructor'(void *this, char a2);
void __thiscall CMonsterObject::OnTimer(CMonsterObject *this, int nId);
void __thiscall CLink::MoveTo(CLink *this, CLink *pTo);
void __thiscall CMonsterObject::Insert(CMonsterObject *this, CLink *pLink);
void __thiscall CLink::Insert(CLink *this, CLink *pLink);
void __thiscall CMonsterObject::Stop(CMonsterObject *this);
int __thiscall CMonster::CMonster(CMonster *this);
int __thiscall CMonster::GetGID(CMonster *this); // idb
char *sub_438EB0();
void __stdcall sub_438EC0(int a1, int a2, int a3, int a4);
void *__thiscall CMonster::`scalar deleting destructor'(CMonster *this, char a2);
void __thiscall CMonster::~CMonster(CMonster *this); // idb
int __thiscall CChar::GetDefense(CChar *this, int nType); // idb
int __thiscall CChar::GetAbsorb(CChar *this); // idb
int __thiscall CChar::GetResist(CChar *this, int nIndex); // idb
CMonster *__thiscall CMonster::CMonster(CMonster *this, CGenMonster *pGen); // idb
void CMonster::Start();
void __cdecl CMonster::Stop();
int __cdecl CMonster::Size();
CMonster *__cdecl CMonster::NewMonster(CInitMonster *pInit, CGenMonster *pGen);
CMonsterMaguni *__thiscall CMonsterMaguni::CMonsterMaguni(CMonsterMaguni *this, CGenMonster *pGen); // idb
int __thiscall CMonsterReal::GetAttackType(CMonsterReal *this); // idb
void __thiscall CMonsterReal::ResetNextMove(CMonsterReal *this, unsigned int dwNextMove, int bRefindPath);
void __thiscall CMonsterReal::~CMonsterReal(CMonsterReal *this);
int __thiscall sub_4398F0(void *this);
_DWORD *__thiscall sub_439910(_DWORD *this, int a2);
void *__thiscall sub_439940(void *this, char a2);
void __thiscall sub_439970(void *this);
_DWORD *__thiscall CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(_DWORD *this, int a2);
_DWORD *__thiscall sub_4399D0(_DWORD *this, int a2);
_DWORD *__thiscall sub_439A00(_DWORD *this, _DWORD *a2);
void *__thiscall sub_439A30(void *this, char a2);
void __thiscall sub_439A60(_DWORD *this);
void *__thiscall sub_439A80(void *this, char a2);
void __thiscall sub_439AB0(_DWORD *this);
_DWORD *__thiscall sub_439AD0(_DWORD *this);
_DWORD *__thiscall sub_439AF0(_DWORD *this);
int __thiscall sub_439B10(_DWORD *this);
char *__thiscall sub_439B30(char *this);
_DWORD *__thiscall sub_439B50(_DWORD *this, _DWORD *a2);
void *__thiscall sub_439B80(void *this, char a2);
void __thiscall sub_439BB0(_DWORD *this);
_DWORD *__thiscall sub_439BD0(_DWORD *this, _DWORD *a2);
CMonsterBlackBug *__thiscall CMonsterBlackBug::CMonsterBlackBug(CMonsterBlackBug *this, int a2);
_DWORD *__thiscall CMonsterEgg::CMonsterEgg(_DWORD *this, int a2);
CMonsterCocoon *__thiscall CMonsterCocoon::CMonsterCocoon(CMonsterCocoon *this, int a2);
_DWORD *__thiscall sub_439D20(_DWORD *this, int a2);
_DWORD *__thiscall CMonsterFireFlower::CMonsterFireFlower(_DWORD *this, int a2);
_DWORD *__thiscall sub_439DE0(_DWORD *this);
char *__thiscall sub_439E80(char *this);
_DWORD *__thiscall sub_439EA0(_DWORD *this);
void *__thiscall sub_439EC0(void *this, char a2);
_DWORD *__thiscall sub_439EF0(_DWORD *this);
_DWORD *__thiscall sub_439F10(_DWORD *this, int a2);
CMonsterInvaderBoss *__thiscall CMonsterInvaderBoss::CMonsterInvaderBoss(CMonsterInvaderBoss *this, int a2);
int __cdecl CMonster::Create(CGenMonster *pGen, CChar *a2);
int __thiscall CChar::GetMaxHP(CChar *this); // idb
CMonster *__cdecl CMonster::FindMonster(DWORD nId);
void __cdecl CMonster::GetMonsterList(std::list<CMonster *> *list_monster, int nIndex);
CMonster *__cdecl CMonster::ScanMonster(int nIndex);
void __thiscall CMonster::OnDelete(CMonster *this);
void __thiscall CMonster::SendDelete(CMonster *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer); // idb
void __thiscall CMonster::SendCreate(CMonster *this, CBase *pPlayer, CIOBuffer *pCreateBuffer);
void __thiscall CMonster::SetTarget(CMonster *this, CChar *pChar);
void __thiscall CMonster::SetProperty(CMonster *this, CInitMonster *pInit);
int __thiscall CMonster::IsRemoved(CMonster *this);
void __thiscall CMonster::Add(int this, int a2);
void __thiscall CMonster::Remove(_DWORD *this);
CLink *__thiscall CLink::Remove(CLink *this);
CIOObject *__thiscall CMonster::GetOperatorName(CMonster *this);
BOOL __thiscall CMonster::CanAttack(CChar *this, CChar *a2, int a3); // idb
CMonsterReal *__thiscall CMonsterReal::CMonsterReal(CMonsterReal *this);
_DWORD *__thiscall CMonsterReal::`scalar deleting destructor'(_DWORD *a1, char a5);
CMonsterReal *__thiscall CMonsterReal::CMonsterReal(CMonsterReal *this, CGenMonster *pGen); // idb
void __thiscall CMonsterReal::OnDelete(CIOCriticalSection *this);
void __thiscall CMonsterReal::SendCreate(CPlayer *this, int a2, int a3);
int __thiscall CMonsterReal::Damage(int *this, int a2, int a3, _DWORD *a4, _DWORD *a5, _DWORD *a6, int a7);
int __thiscall CChar::GetFinalDamage(_DWORD *this, _DWORD *a2, int a3, int a4);
void __thiscall CMonsterReal::Defense(CIOCriticalSection *a1, volatile int *a2);
int __thiscall CMonsterReal::ReviseProperty(CPlayer *this);
int __thiscall CChar::GetMaxMP(CPlayer *a1);
void __thiscall CMonsterReal::SetTarget(void *this, int a2);
void __cdecl CMonsterReal::UpdateProperty(int a1, int a2, int a3, int a4);
void CMonsterReal::UpdatePrtyPt(CMonsterReal *this, int nProperty, ...);
int __thiscall CChar::GetStr(CChar *this); // idb
int __thiscall CChar::GetHth(CChar *this); // idb
int __thiscall CChar::GetInt(CChar *this); // idb
int __thiscall CChar::GetWis(CChar *this); // idb
int __thiscall CChar::GetDex(CChar *this); // idb
void CMonsterReal::UpdatePrtyPer(CMonsterReal *a1, int nProperty, ...);
void __thiscall CPlayer::AddMState(CPlayer *this, __int64 nMState);
void __thiscall CPlayer::SubMState(CPlayer *this, __int64 nMState);
void __thiscall CMonsterReal::SetProperty(CMonsterReal *pChar, CInitMonster *pInit); // idb
CSMap *__thiscall CFindPath::Init(CFindPath *this, CMonster *pOwner, CSMap *pMap, int nPowRange); // idb
void __thiscall CMonsterReal::Add(CMonsterReal *this, CChar *pParent);
void __thiscall CMonsterReal::Remove(CMonsterReal *this);
void __thiscall CMonsterReal::AI(CMonsterReal *this);
void __thiscall CMonsterReal::Tick(CMonsterReal *this);
void __thiscall CMonsterReal::AddHostility(CMonsterReal *this, CChar *pChar, int nHostility, signed int nHostPer);
void __thiscall CMonsterReal::RemoveHostility(CMonsterReal *this, CChar *pChar);
int __thiscall CMonsterReal::GetMSpeed(CMonsterReal *this, int nMoveType); // idb
void __thiscall CMonsterReal::Attack(CMonsterReal *this);
__int64 __cdecl PowDistance64(const tagPOINT *ptP1, const tagPOINT *ptP2);
int __thiscall CChar::GetASpeed(CChar *this); // idb
int __thiscall CChar::GetAttack(CChar *this); // idb
int __thiscall CChar::GetMinAttack(CChar *this); // idb
int __thiscall CChar::GetMaxAttack(CChar *this); // idb
BOOL __thiscall CChar::CheckHit(CChar *this, CChar *pTarget, int nAddHit);
int __thiscall CChar::GetHit(CChar *this); // idb
int __thiscall CChar::GetDodge(CChar *this); // idb
signed int __thiscall CMonsterReal::Move(CMonsterReal *this);
int __thiscall CMonsterReal::GetRandomPt(CMonsterReal *this, tagPOINT *ptDP);
int __thiscall CSMap::IsMoveTile(CSMap *this, void *pSelf, const tagPOINT *ptPS, int dx_, int dy_, __int64 dwAttr);
int __thiscall CCellMap::IsMoveTile(CCellMap *this, void *pSelf, tagPOINT *const ptT, __int64 dwAttr);
// CBase *__thiscall CBase::Next(CBase *this);
CRWLock *__thiscall CCellMap::GetLock(CCellMap *this, const tagPOINT *_ptT); // idb
int __thiscall CMonsterReal::GetChasePt(CMonsterReal *this, tagPOINT *ptDP, __int64 *dwReviseTick);
BOOL __thiscall CFindPath::IsGoal(CFindPath *this); // idb
tagPOINT *__thiscall CFindPath::GetPixel(CFindPath *this);
int __thiscall CFindPath::SetNextPath(CFindPath *this); // idb
CPlayer *__thiscall CMonsterReal::ScanSight(CMonsterReal *this);
void __thiscall CMonsterReal::ManageBuff(CMonsterReal *this); // idb
int __thiscall CMonsterReal::ApplyDamage(CMonsterReal *this, CChar *pChar, int nAttack, int nDamage, int *nNetDamage, int *BFatal, int *nPalsyDamage, CSkill *pSkill); // idb
int __thiscall CChar::GetFatalDamage(CChar *this, int nDamage, _DWORD *bFatal, int nAddFatal); // idb
int __thiscall CMonsterReal::AfterDamage(CMonsterReal *this, CChar *pChar, int nDamage, int nTotalDamage);
void __thiscall CMonsterReal::AllotTransformExp(CMonsterReal *this, int bParty, int nKeyID);
int __thiscall CMonsterReal::AllotExp(CMonsterReal *this, _DWORD *bParty, int *nKeyID, int *nBestID);
int __thiscall std::map<CParty *,int>::~map<CParty *,int>(void *this);
void __thiscall CMonsterReal::ResetHostility(CMonsterReal *this);
int __thiscall CMonsterMaguni::Damage(CMonsterMaguni *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill);
void __thiscall CMonsterMaguni::Die(CMonsterMaguni *this, CChar *pChar, int bFatal, int *bParty, int *nKeyID);
void __thiscall CMonsterMaguniWithSkillOnly::SetTarget(CMonsterMaguniWithSkillOnly *this, CChar *pChar); // idb
void __thiscall CMonsterMaguniWithSkillOnly::AI(CMonsterMaguniWithSkillOnly *this);
void __thiscall CMonsterMaguniWithSkillOnly::Tick(CMonsterMaguniWithSkillOnly *this);
void __thiscall CMonsterMaguniWithSkill::AI(CMonsterMaguniWithSkill *this);
void __thiscall CMonsterMaguniWithSkill::Tick(CMonsterMaguniWithSkill *this);
void __thiscall CMonsterMaguniWithSkill::Attack(CMonsterMaguniWithSkill *this);
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::CMonsterTowerBoss(CMonsterTowerBoss *this);
int __thiscall CMonsterTowerBoss::IsIgnore(CMonsterTowerBoss *this); // idb
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::CMonsterTowerBoss(CMonsterTowerBoss *this, int nMap, CSMap *pMap); // idb
int __cdecl CMonsterTowerBoss::Create();
void __thiscall CMonsterTowerBoss::OnDelete(CMonsterTowerBoss *this);
void __thiscall CMonsterTowerBoss::Defense(CMonsterTowerBoss *a1, CChar *pChar); // idb
void __thiscall CMonsterMaguniMaster::AI(CMonsterMaguniMaster *this);
void __thiscall CMonsterTowerBoss::Tick(CMonsterTowerBoss *this);
void __thiscall CMonsterTowerBoss::Attack(CMonsterTowerBoss *this);
void __thiscall CMonsterTowerBoss::UpdateChild(CMonsterTowerBoss *this, int nMonIndex);
CGenMonster *__thiscall CMonsterTowerBoss::Summon(CMonsterTowerBoss *this, int nMonIndex, int nRange, int nMax, int nNum); // idb
int __thiscall CMonsterTowerBoss::Reaction(CMonsterTowerBoss *this, int nTotalDamage, int bPhysical);
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::OnSummon(CMonsterTowerBoss *this);
int __thiscall CMonsterNotReal::AddBuff(CMonsterNotReal *this, CBuff *pNewBuff);
int __thiscall CMonsterInactive::Damage(CMonsterInactive *this, CChar *pChar, int nAttack, int *nNetDamage, _DWORD *bFatal, _DWORD *nPalsyDamage, CSkill *pSkill);
void __thiscall CMonsterInactive::SetProperty(CMonsterInactive *this, CInitMonster *pInit);
void __thiscall CMonsterInactive::Add(CMonsterInactive *this, CChar *pParent);
int __thiscall CMonsterGuildWar::CMonsterGuildWar(CMonsterGuildWar *this, int nMap, CSMap *pMap, int nDir, int nGID, char *szGuildName);
CMonster *__cdecl CMonsterGuildWar::Create(int nIndex, int nMap, tagPOINT *ptPixel, int nDir, int nGID, char *szGuildName, int bLordDeclare);
BOOL __thiscall CInitMonster::IsRace(CInitMonster *this, int nRace); // idb
int __thiscall CMonsterGuildWar::Damage(CMonsterGuildWar *this, CChar *pChar, int nAttack, int *nNetDamage, _DWORD *bFatal, _DWORD *nPalsyDamage, CSkill *pSkill);
int __thiscall CMonsterGuildWar::SetProperty(CMonsterGuildWar *this, CInitMonster *pInit); // idb
void __thiscall CMonsterGuildWar::Tick(CMonsterGuildWar *this);
void __thiscall CMonsterGuildWar::SetGuild(CMonsterGuildWar *this, int nGID, char *szGuildName);
void __thiscall CPlayer::SubGState(CPlayer *this, int nGState); // idb
int __thiscall CMonsterItem::Damage(CMonsterItem *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill);
void __thiscall CMonsterItem::Tick(CMonsterItem *this);
void __thiscall CMonsterItem::Add(CMonsterItem *this, CChar *pParent);
void __thiscall CMonsterItem::Remove(CMonsterItem *this);
_DWORD *__thiscall CMonsterMagic::CMonsterMagic(CMonsterMagic *this, int nMap, CSMap *pMap, int nDir, int nMagic, __int64 dwTime);
CMonster *__cdecl CMonsterMagic::Create(int nIndex, int nMap, tagPOINT *ptPixel, int nDir, CChar *pParent, int nMagic, int dwTime);
void __thiscall CMonsterMagic::Tick(CMonsterMagic *this);
int __thiscall CMonsterMagic::SetProperty(CMonsterMagic *this, CInitMonster *pInit);
void __thiscall CMonsterMagic::Add(CMonsterMagic *this, CChar *pParent);
void __thiscall CMonsterBlackBug::Tick(CMonsterBlackBug *this);
void __thiscall CMonsterReal::Die(CMonsterReal *this, CChar *pChar, int bFatal, int *bParty, int *nKeyID); // idb
int __thiscall CMonsterBlackBug::Damage(CMonsterBlackBug *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill);
void __thiscall CMonsterBlackBug::UpdateChild(CMonsterBlackBug *this, int nMonIndex);
void __thiscall CMonsterBlackBug::Summon(CMonsterBlackBug *this, int nMonIndex, int nRange, int nMax, int nNum);
void __thiscall CMonsterSiegeGunRuins::AI(CMonsterSiegeGunRuins *this);
void __thiscall CMonsterEgg::Tick(CMonsterEgg *this);
int __thiscall CMonsterEgg::Summon(CMonsterEgg *this, int nMonIndex, int nRange, int nMax, int nNum);
void __thiscall CMonsterEgg::OnSummon(CMonsterEgg *this);
void __thiscall CMonsterCocoon::Tick(CMonsterCocoon *this);
void __cdecl CMonsterMaguniMaster::Create(CMonster *pOwner, CChar *pChar);
_DWORD *__thiscall sub_442DF0(_DWORD *this);
void __thiscall CMonsterMaguniMaster::Tick(int this);
CMonsterBigBirdMother *__thiscall CMonsterBigBirdMother::CMonsterBigBirdMother(CMonsterBigBirdMother *this);
void __cdecl CMonsterBigBirdMother::Create();
void __thiscall CMonsterBigBirdMother::Tick(int this);
CGenMonster *__thiscall CMonsterBigBirdMother::Summon(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall CMonsterBigBirdMother::OnSummon(_DWORD *this);
int __thiscall CMonsterBigBirdMother::Move(int this);
int __thiscall CMonsterBigBirdMother::Damage(CIOCriticalSection *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
void __fastcall CMonsterBigBirdMother::Attack(int a1, int a2);
void __thiscall CMonsterFireFlower::Tick(CIOCriticalSection *this);
void __cdecl CMonsterBigBirdMaster::Create(int a1);
_DWORD *__thiscall sub_444290(_DWORD *this);
void __thiscall sub_4442B0(void *this);
void __thiscall CMonsterBigBirdMaster::Tick(int this);
void __thiscall CMonsterMaguniMaster::Die(int a1, int a5, int a6, int *a7, int *a8);
int __thiscall CMonsterSiegeGun::CMonsterSiegeGun(int this, int a2, int a3, int a4, char *Source, int a6);
CIOCriticalSection *__cdecl CMonsterSiegeGun::Create(int a1, int a2, int a3, int a4, int a5, char *Source, int a7);
void __thiscall CMonsterSiegeGun::AI(int *this);
void __thiscall CMonsterSiegeGun::Tick(CIOCriticalSection *this);
void __thiscall CMonsterSiegeGun::Die(int this, int a2, int a3, int a4, int a5);
void __thiscall CMonsterSiegeGun::SetFire(CIOCriticalSection *this, _DWORD *a2);
void __thiscall CMonsterSiegeGun::Summon(int this, char a2, int a3, int a4, int a5);
void __thiscall CMonsterSiegeGun::SetOperator(CIOCriticalSection *this, int a2);
int __thiscall CMonsterSiegeGun::Damage(CIOCriticalSection *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > *__thiscall std::_Tree<std::_Tmap_traits<int,CAlliance *,std::less<int>,std::allocator<std::pair<int const,CAlliance *>>,0>>::find(std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > *this, std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >::iterator *result, const int *_Keyval, int a4, int a5);
void __cdecl CMonsterSiegeGunBall::Create(char a1, char a2, int a3, int a4);
void __thiscall CMonsterSiegeGunBall::Tick(CIOCriticalSection *this);
void __thiscall CMonsterSiegeGunBall::AI(int *this);
void __thiscall CMonsterSiegeGunRuins::Tick(CIOCriticalSection *this);
void __thiscall CMonsterWithSkillOnly::Tick(int this);
void __thiscall CMonsterWithSkillOnly::Attack(_DWORD *this);
void __thiscall CMonsterInvaderBoss::AI(int *this);
void __thiscall CMonsterInvaderBoss::Tick(int this);
std::vector<CIOSocket::CIOTimer> *__thiscall sub_445B20(std::vector<CIOSocket::CIOTimer> *this);
int __thiscall sub_445B40(_DWORD *this, int a2);
BOOL __thiscall sub_445B60(std::vector<CIOSocket::CIOTimer> *this);
char *__thiscall sub_445B80(int this, int a2);
std::vector<IPAddrMask> *__thiscall sub_445BF0(std::vector<IPAddrMask> *this);
XMessageQueue::XTimerElement *__thiscall sub_445C10(int this, const XMessageQueue::XTimerElement *a2);
void *__thiscall sub_445C80(void *this);
int __thiscall sub_445CB0(void *this);
unsigned int __thiscall sub_445CD0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *a2);
_DWORD *__thiscall sub_445D30(_DWORD *this);
_DWORD *__thiscall sub_445D90(_DWORD *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_445DF0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, const std::pair<int const ,CGame_Character::TargetInfo> *a3);
int __thiscall sub_445FA0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1);
_DWORD *__thiscall sub_446000(_DWORD *this);
_DWORD *__thiscall sub_446060(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_446090(int *this, _DWORD *a2, int a3);
void *__thiscall sub_4460C0(void *this);
int __thiscall sub_4460F0(void *this);
BOOL __thiscall sub_446110(void *this);
_DWORD *__thiscall sub_446130(_DWORD *this, _DWORD *a2, int a3);
int __thiscall std::vector<CIOSocket::CIOTimer>::capacity(std::vector<CIOSocket::CIOTimer> *this);
int __thiscall sub_446200(std::vector<CIOSocket::CIOTimer> *this, int a2, int a3, int a4);
char *__thiscall std::vector<CIOSocket::CIOTimer>::_Xlen(std::vector<CIOSocket::CIOTimer> *this, char *a2, int a3, int a4);
int __thiscall sub_4462B0(std::vector<IPAddrMask> *this, int a2, int a3, int a4);
// int __thiscall unknown_libname_10(_DWORD, _DWORD);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_446350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::equal_range(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *result, const int *_Keyval); // idb
int __stdcall sub_446430(void *a1);
int __thiscall sub_4464B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __stdcall sub_446560(void *a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4465E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __stdcall sub_446680(void *a1);
void *__thiscall sub_446700(void *this, int a2);
void *__thiscall sub_446720(_DWORD *this, void *a1, int a2);
int __thiscall sub_446750(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
unsigned int __thiscall sub_446800(std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *this);
void __thiscall sub_446820(int this, CIOSocket::CIOTimer *a2, unsigned int a3, int *a4);
void __thiscall std::vector<tagShowdownPaticipateInfo>::_Xran(std::vector<tagShowdownPaticipateInfo> *this);
CMemory **__stdcall sub_446B40(int a1);
unsigned int __thiscall sub_446B60(std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *this);
void __thiscall sub_446B80(int this, XMessageQueue::XTimerElement *a2, unsigned int a3, int *a4);
CMemory **__stdcall sub_446E50(int a1);
void *__thiscall sub_446E70(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, const int *a3);
int __thiscall sub_446EA0(_DWORD *this, int a2);
_DWORD *__thiscall sub_446F30(_DWORD *this);
int __cdecl sub_446F90(int a1);
_DWORD *__thiscall sub_446FA0(int *this, _DWORD *a1, int a2);
// _DWORD __stdcall sub_446FD0(_DWORD); weak
int __cdecl sub_446FF0(int a1);
int __cdecl sub_447000(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447010(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_4470B0(int *this, _DWORD *a2);
int __cdecl sub_4470E0(int a1);
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Ubound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval); // idb
CMemory **sub_4471B0();
int __stdcall sub_4472D0(void *a1);
_DWORD *__thiscall std::_Destroy_range<CIOSocket::CIOTimer>(_DWORD *this, int a2);
_DWORD *__thiscall sub_447370(_DWORD *this);
std::vector<XMessageQueue::XTimerElement>::iterator *__thiscall std::vector<XMessageQueue::XElement>::iterator::operator+=(std::vector<XMessageQueue::XTimerElement>::iterator *this, int _Off); // idb
int __stdcall sub_4473F0(void *a1);
int __cdecl std::_Destroy_range<IPAddrMask>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last);
char *__stdcall sub_4474B0(int a1, int a2, void *a3);
CIOSocket::CIOTimer *__cdecl std::copy_backward<IPAddrMask *,IPAddrMask *>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest); // idb
char *__cdecl std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(XMessageQueue::XTimerElement *_First, XMessageQueue::XTimerElement *_Last, const XMessageQueue::XTimerElement *_Val);
// void *__thiscall std::_Init_locks::operator=(void *this, int a2);
// _DWORD __cdecl unknown_libname_11(_DWORD); weak
char *__cdecl std::_Uninit_fill_n<XMessageQueue::XTimerElement *,unsigned int,XMessageQueue::XTimerElement,std::allocator<XMessageQueue::XTimerElement>>(char *a1, int a2, int a3);
_DWORD *__stdcall sub_4475D0(void *a1, int a2);
char *__cdecl sub_4475F0(int a1, int a2, char *a3);
char *__cdecl std::_Uninit_copy<XMessageQueue::XTimerElement *,XMessageQueue::XTimerElement *,std::allocator<XMessageQueue::XTimerElement>>(int a1, int a2, char *a3);
_DWORD *__cdecl std::_Construct<CIOSocket::CIOTimer,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_Ptr, const CIOSocket::CIOTimer *_Val);
_DWORD *__cdecl std::map<int,std::string>::map<int,std::string>(void *a1, _DWORD *a2);
void *__thiscall sub_447760(void *this);
void *__thiscall sub_447790(void *this);
void *__thiscall sub_4477C0(void *this);
int __thiscall sub_4477F0(void *this);
int __thiscall sub_447810(void *this);
int __thiscall sub_447830(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4478E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_447980(void *this);
int __thiscall sub_4479A0(void *this);
int __thiscall sub_4479C0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __thiscall sub_447A70(void *this);
int __thiscall sub_447A90(void *this);
int __thiscall sub_447AB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447B60(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
CInitNPC *__thiscall CInitNPC::CInitNPC(CInitNPC *this);
void *__thiscall CInitNPC::`scalar deleting destructor'(CInitNPC *this, char a2);
void __thiscall CInitNPC::~CInitNPC(CInitNPC *this);
void __cdecl CInitNPC::Close();
CBase *__thiscall CInitNPC::Copy(CInitNPC *);
int __thiscall CInitNPC::Set(CInitNPC *this, enum Symbol symbol, struct lisp::var value);
int __thiscall CInitNPC::OnLoad(CInitNPC *this);
CGenNPC *__thiscall CGenNPC::CGenNPC(CGenNPC *this);
void *__thiscall CGenNPC::`scalar deleting destructor'(CGenNPC *this, char a2);
void __thiscall CGenNPC::~CGenNPC(CGenNPC *this);
void __cdecl CGenNPC::Close();
CBase *__thiscall CGenNPC::Copy(CGenNPC *);
int __thiscall CGenNPC::Set(CGenNPC *this, enum Symbol symbol, struct lisp::var value);
int __thiscall CGenNPC::OnLoad(CGenNPC *this);
int __thiscall CNPCObject::CNPCObject(CNPCObject *this);
void __thiscall CNPCObject::~CNPCObject(CNPCObject *this);
void __thiscall CNPCObject::OnTimer(CNPCObject *this, int nId);
void __thiscall CNPCObject::Insert(CNPCObject *this, CLink *pLink);
CNPC *__thiscall CNPC::CNPC(CNPC *this, CGenNPC *pGen);
BOOL __thiscall sub_448820(CNPC *this, const tagPOINT *a2); // idb
int __cdecl Distance(const tagPOINT *ptP1, const tagPOINT *ptP2);
void __stdcall sub_4488D0(int a1, int a2, int a3);
void *__thiscall CNPC::`scalar deleting destructor'(CNPC *this, char a2);
void __thiscall CNPC::~CNPC(_DWORD *this);
void __cdecl CNPC::Create(CGenNPC *pGen);
CNPCTeleport *__thiscall CNPCTeleport::CNPCTeleport(CNPCTeleport *this, CGenNPC *pGen); // idb
void __thiscall CNPCTeleport::~CNPCTeleport(CNPCTeleport *this);
CNPCMerchant *__thiscall CNPCMerchant::CNPCMerchant(CNPCMerchant *this, CGenNPC *pGen);
void __thiscall CNPCTeleport::`scalar deleting destructor'(_DWORD *this, char a2);
CNPCInformant *__thiscall CNPCInformant::CNPCInformant(CNPCInformant *this, CGenNPC *pGen); // idb
BOOL __thiscall CNPCQuest::CanReply(CNPCQuest *this, tagPOINT *a2); // idb
CNPCScenario *__thiscall CNPCScenario::CNPCScenario(CNPCScenario *this, CGenNPC *pGen); // idb
CNPCDoor *__thiscall CNPCDoor::CNPCDoor(CNPCDoor *this, CGenNPC *pGen); // idb
CNPCSiegeGunStone *__thiscall CNPCSiegeGunStone::CNPCSiegeGunStone(CNPCSiegeGunStone *this, CGenNPC *pGen);
int __cdecl CNPC::Size();
void __cdecl CNPC::Start();
void __cdecl CNPC::Stop();
CNPC *__cdecl CNPC::FindNPC(int nId);
int __cdecl CNPC::CanReply(int nId, tagPOINT *ptP);
void __cdecl CNPC::Reply(int nId, CPlayer *pPlayer);
void __thiscall CNPC::OnDelete(CNPC *this);
void __thiscall CNPC::SendDelete(CNPC *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer);
void __thiscall CNPC::SendCreate(CNPC *this, CBase *pPlayer, CIOBuffer *pCreateBuffer);
void __thiscall CNPC::AddGState(CNPC *this, int nGState); // idb
void __thiscall CNPC::Reply(CNPC *this, CPlayer *pPlayer);
void __cdecl CNPC::WarRelationShow(int nCID, int bShow);
void __thiscall CNPC::Add(CNPC *this);
void __thiscall CNPC::Remove(CNPC *this);
int __thiscall CNPC::IsRemoved(CNPC *this);
void __thiscall CNPC::SetProperty(CNPC *this, CInitNPC *pInit, CGenNPC *pGen);
void __thiscall CNPC::Show(CNPC *this, int bShow);
void __cdecl CNPC::GetNPCList(std::list<CNPC *> *list_npc, int nKind, int nMap);
void __thiscall CNPCQuest::Reply(CNPCQuest *this, CPlayer *pPlayer);
void __cdecl CNPCScenario::MirrorGState(int bAdd, int nGState);
void __cdecl CNPCScenario::ThroneGState(int bAdd, int nGState);
void __cdecl CNPCScenario::ResetBossTower(int bResetNull);
void __thiscall CNPCScenario::Tick(CNPCScenario *this);
void __thiscall CNPCScenario::InitScenario(CNPCScenario *this);
void __thiscall CNPCScenario::Process(CNPCScenario *this, CPlayer *pPlayer, char *packet, char *end);
void __thiscall CNPCTeleport::Process(CNPCTeleport *this, CPlayer *pPlayer, char *packet, char *end);
void __thiscall CNPCDoor::Tick(CNPCDoor *this);
void __thiscall CNPCDoor::Process(CNPCDoor *this, CPlayer *pPlayer, char *packet, char *end);
void __thiscall CNPCSiegeGunStone::Reply(CNPCSiegeGunStone *this, CPlayer *pPlayer);
void __thiscall CNPCSiegeGunStone::Tick(CNPCSiegeGunStone *this);
void __thiscall CPlayer::SubEState(CPlayer *this, int dwEState);
int __thiscall CPlayer::IsEState(CPlayer *this, int dwEState);
void __thiscall CNPCSiegeGunStone::SiegeGunSet(CNPCSiegeGunStone *this, CPlayer *pPlayer, int bSetting, int nIndex);
int __thiscall CPlayerSkill::IsSkill(CPlayerSkill *this, int nSkill);
void __thiscall CNPCSiegeGunStone::SiegeGunUnSet(CNPCSiegeGunStone *this, CPlayer *pPlayer, int bSetting);
void __thiscall CNPCSiegeGunStone::Show(CNPCSiegeGunStone *this, int bShow);
void __thiscall CNPCSiegeGunStone::SendCreate(CNPCSiegeGunStone *this, CBase *a2, CIOBuffer *a3);
void __thiscall CNPCSiegeGunStone::SetOperator(CNPCSiegeGunStone *this, int nOperator);
void __thiscall CNPCSiegeGunStone::SetSiegeGun(CNPCSiegeGunStone *this, int nSiegeGun);
int __thiscall sub_44ADC0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1);
_DWORD *__thiscall sub_44AE20(_DWORD *this, _DWORD *a2, _DWORD *a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44AEB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_44AF50(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_44B6E0(_DWORD *this);
void *__thiscall sub_44B740(void *this);
_DWORD *__thiscall sub_44B760(_DWORD *this);
int __stdcall sub_44B780(void *a1);
unsigned int __thiscall sub_44B800(int this);
std::_List_nod<tagPARTICLES *>::_Node *__thiscall std::_List_nod<tagPARTICLES *>::_Node::_Node(std::_List_nod<tagPARTICLES *>::_Node *this, std::_List_nod<tagPARTICLES *>::_Node *_Nextarg, std::_List_nod<tagPARTICLES *>::_Node *_Prevarg, tagPARTICLES *const *_Myvalarg);
unsigned int __thiscall std::allocator<XSoundPtr>::max_size(std::allocator<tagPARTICLES *> *this); // idb
void *__thiscall sub_44B880(void *this);
void *__thiscall sub_44B8B0(void *this);
void *__thiscall sub_44B8E0(void *this);
// struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this); weak
int __thiscall sub_44B920(void *this);
int __thiscall sub_44B940(void *this);
int __thiscall sub_44B960(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BA10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_44BAB0(_DWORD *this);
int __stdcall sub_44BB10(void *a1);
int __thiscall sub_44BB90(void *this);
int __thiscall sub_44BBB0(void *this);
int __thiscall sub_44BBD0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BC80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_44BD20(_DWORD *this);
int __stdcall sub_44BD80(void *a1);
int __thiscall sub_44BE00(void *this);
int __thiscall sub_44BE20(void *this);
int __thiscall sub_44BE40(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int CObjectDB::Open();
int __thiscall CObjectDB::Open(CObjectDB *this, char *szFileName);
enum Symbol __cdecl CObjectDB::FindSymbol(const char *szSymbol);
int __thiscall CObjectDB::Load(CObjectDB *this, CBase *base);
struct lisp::var *__stdcall lisp::find_nil(lisp *__hidden this, struct lisp::var *, int); // idb
void __cdecl CObjectDB::Close();
LONG sub_44C960();
_DWORD *__thiscall sub_44C970(iless *this, _DWORD *a2, const char **a3);
void *__thiscall sub_44CA00(void *this, void *a1, int a2);
int __thiscall sub_44CA30(int this, const char **a2);
int *__thiscall sub_44CAC0(void *this, int a2);
int *__thiscall sub_44CBF0(void *this, int a2);
CMemory **__stdcall sub_44CD20(int a1);
void *__thiscall sub_44CD40(void *this);
int __stdcall sub_44CD70(int a1);
void *__thiscall sub_44CD90(void *this);
std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *__cdecl std::_Construct<std::_Tree_nod<std::_Tmap_traits<int,std::pair<std::string,std::string>,std::less<int>,std::allocator<std::pair<int const,std::pair<std::string,std::string>>>,1>>::_Node *,std::_Tree_nod<std::_Tmap_traits<int,std::pair<std::string,std::string>,std::less<int>,std::allocator<std::pair<int const,std::pair<std::string,std::string>>>,1>>::_Node *>(std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node **_Ptr, std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *const *_Val);
CQuest *__thiscall CQuest::CQuest(CQuest *this);
void *__thiscall sub_44CE50(void *this, char a2);
void *__thiscall std::_List_ptr<evQuake_s *>::_List_ptr<evQuake_s *>(void *this, char a2);
CMemory **__cdecl sub_44CEC0(int a1);
int __thiscall sub_44CEE0(void *this);
int __thiscall sub_44CF00(void *this);
int __thiscall sub_44CF20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44CFD0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_44D070(_DWORD *this);
int __stdcall sub_44D0D0(void *a1);
int __thiscall sub_44D150(void *this);
int __thiscall sub_44D170(void *this);
int __thiscall sub_44D190(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44D240(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_44D2E0(_DWORD *this);
int __stdcall sub_44D340(void *a1);
CParty *__thiscall CParty::CParty(void *this, int a2);
void *__thiscall sub_44D470(void *this, char a2);
void __thiscall Party::_CParty(void *this);
volatile int *__cdecl sub_44D4E0(int a1);
void __cdecl CParty::Accept(int a1, int a2);
void __cdecl BothUnlock(CPlayer *pA, CPlayer *pB); // idb
void __thiscall CParty::OnFree(CIOObject *this);
void __thiscall CParty::OnTimer(CIOCriticalSection *this, int a2);
void __thiscall CParty::Add(volatile int *this);
void __thiscall CParty::Remove(CIOCriticalSection *this);
int __thiscall CParty::IsHead(CIOCriticalSection *this, int a2);
int __thiscall CParty::IsMember(_DWORD *this, int a2);
int __thiscall CParty::FindTopLevel(_DWORD *this);
void __thiscall CParty::Join(CIOCriticalSection *this, int a2, int a3);
void __thiscall CParty::Leave(void *this, int a2);
void __thiscall CParty::Delete(int this);
void __thiscall CParty::Exile(void *a1, int a2, int a3);
void __thiscall CParty::AllotExp(int a1, int *a2, int a3, _DWORD *a4);
void __thiscall CParty::SendPartyInfo(_DWORD *this, int a2);
void __thiscall CParty::UpdateMemberHP(CIOCriticalSection *this, CPlayer *a2);
void __thiscall CParty::UpdateMemberLevel(CIOCriticalSection *this, int a2);
void __thiscall CParty::Broadcast(CIOCriticalSection *this, void *a2, int a3);
void __thiscall CParty::_Broadcast(_DWORD *this, void *a2, int a3);
volatile int *__thiscall CParty::GetRandomPlayer(CIOCriticalSection *a1);
int __thiscall CParty::Teleport(CIOCriticalSection *this, int a2, int a3);
CMemory *__thiscall CParty::StoreItem(CIOCriticalSection *this, CMemory *a2);
void __thiscall CParty::DistributeItem(CIOCriticalSection *a1, _DWORD *a2);
void __thiscall CParty::AllotTransformExp(_DWORD *this, int a2, _DWORD *a3);
void __thiscall CParty::Healing(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CParty::Chant(void *this, _DWORD *a2, int *a3);
CMemory *__thiscall CParty::GetPlayerList(CIOCriticalSection *this);
CMemory *__thiscall CParty::_GetPlayerList(_DWORD *this);
int __thiscall CParty::GetLuckySize(_DWORD *this, int a2);
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *__thiscall sub_44F580(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this);
char **__thiscall std::vector<CControl *>::erase(char **this, char **a2, char *a3);
int __thiscall sub_44F600(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1);
int __thiscall std::vector<TSmartPointer<TriggerSystem::CEvent>>::capacity(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this);
char __thiscall std::vector<TSmartPointer<TriggerSystem::CEvent>>::_Buy(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this, unsigned int _Capacity);
int __thiscall sub_44F720(std::allocator<int> *this, int *a2, int *a3);
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *__thiscall std::vector<std::list<std::pair<int const,CSocketMsg *>>::iterator,std::allocator<std::list<std::pair<int const,CSocketMsg *>>::iterator>>::_Tidy(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this);
void *__thiscall sub_44F7C0(void *this, char a2);
_DWORD *__thiscall sub_44F7E0(int *this, _DWORD *a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44F810(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_44F8B0(_DWORD *this);
_DWORD *__thiscall sub_44F8D0(_DWORD *this);
int __stdcall sub_44F930(void *a1);
char *__cdecl PutNumeric<int>(char *a1, int Num);
char *__cdecl std::copy<char *,char *>(char *_First, char *_Last, char *_Dest); // idb
int __cdecl std::_Destroy_range<int>(int *_First, int *_Last);
unsigned int __cdecl std::_Uninitialized_fill_n<char *,unsigned int,char,std::allocator<char>>(char *_First, unsigned int _Count, const char *_Val);
unsigned int *__cdecl std::fill<HyperElement::CElement * *,HyperElement::CElement *>(unsigned int *_First, unsigned int *_Last, const unsigned int *_Val);
void *__cdecl sub_44FAC0(void *a1, int a2, int a3);
CMemory **__cdecl sub_44FB00(int a1);
char *__cdecl std::_Uninitialized_copy<Patch * *,Patch * *,std::allocator<Patch *>>(unsigned int *_First, unsigned int *_Last, unsigned int *_Dest);
unsigned int __cdecl std::fill_n<TriggerSystem::CTrigger * *,unsigned int,TriggerSystem::CTrigger *>(unsigned int *_First, unsigned int _Count, const unsigned int *_Val);
void *__thiscall sub_44FB90(void *this);
void *__thiscall std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Tidy(void *this, int a2, char a3);
int __thiscall sub_44FBF0(void *this);
int __thiscall sub_44FC10(void *this);
int __thiscall sub_44FC30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
char *MakePacket(enum S2C_PROTOCOL nType, const char *format, ...);
int __cdecl GetColorLevel(int nMonsterLevel, int nPlayerLevel); // idb
void __thiscall CPlayerObject::OnTimer(CPlayerObject *this, int nId);
CPlayer *__thiscall CPlayer::CPlayer(CPlayer *this, CSocket *pSocket, int nUID, int nPID);
void __thiscall CPlayer::SendPacket(CPlayer *this, CIOBuffer *pBuffer);
void __thiscall CPlayer::SendMove(CPlayer *this, CBase *pPlayer, CIOBuffer *pMoveBuffer);
void __thiscall CPlayer::InitGambleInfo(CPlayer *this);
void *__thiscall CPlayer::`scalar deleting destructor'(CPlayer *this, char a2);
void __thiscall CPlayer::~CPlayer(CPlayer *this);
int __thiscall sub_450650(void *this);
int __thiscall sub_450670(void *this);
int __thiscall sub_450690(void *this);
int __thiscall sub_4506B0(void *this);
int __thiscall sub_4506D0(void *this);
int __thiscall sub_4506F0(void *this);
int __thiscall sub_450710(void *this);
void __cdecl CPlayer::Start();
CPlayer *__cdecl CPlayer::ScanPlayer(int nPID);
CIOObject *__cdecl CPlayer::FindPlayer(int nId);
CIOObject *__cdecl CPlayer::FindPlayer(char *szName);
void CPlayer::WriteAll(enum S2C_PROTOCOL nType, const char *format, ...);
void CPlayer::WriteInMap(int nMap, enum S2C_PROTOCOL nType, const char *format, ...);
void __cdecl CPlayer::LogPlayerStatistic();
void (__thiscall ***__thiscall CPlayer::OnFree(void (__thiscall ***CPlayer)(CPlayer *, int)))(CPlayer *, int);
void __thiscall CPlayer::OnDelete(CPlayer *this);
int __thiscall CPlayer::IsPBit(CPlayer *this, int bit);
void __thiscall CPlayer::SendDelete(CPlayer *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer);
void __thiscall CPlayer::SendCreate(CPlayer *this, CBase *pPlayer, void *pCraeteBuffer);
void __thiscall CPlayer::AI(CPlayer *this);
int __thiscall CPlayer::Damage(CPlayer *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill);
void __thiscall CPlayer::InfoDie(CPlayer *this, int nMonId, int bFatal);
void __thiscall CPlayer::ReviseProperty(CPlayer *this);
void __thiscall CPlayer::AddMStateEx(CPlayer *this, int nMStateEx);
void __thiscall CPlayer::AddBState(CPlayer *this, __int64 nBState, int nRemainTime);
void __thiscall CPlayer::SubMStateEx(CPlayer *this, int nMStateEx);
void __thiscall CPlayer::SubBState(CPlayer *this, __int64 nBState);
int __thiscall CPlayer::GetFinalDefense(CPlayer *this, CChar *pAttacker);
int __thiscall CPlayer::GetFinalAbsorb(CPlayer *this, CChar *pAttacker);
int __thiscall CPlayer::GetFinalResist(CPlayer *this, CChar *pAttacker, int nIndex);
int __thiscall CPlayer::GetMSpeed(CPlayer *this, int nMoveType);
BOOL __thiscall CPlayer::GetAttackType(CPlayer *this);
BOOL __thiscall CPlayer::CheckBlock(CPlayer *this, CChar *pAttacker);
void __thiscall CPlayer::UpdateTransformExp(CPlayer *this, int bTimer);
int __thiscall CPlayer::Add(CPlayer *this);
void __thiscall CPlayer::Remove(CPlayer *this);
void __thiscall CPlayer::Tick(CPlayer *this);
int __thiscall CPlayer::GetAutoRefreshHP(CPlayer *this);
int __thiscall CPlayer::GetAutoRefreshMP(CPlayer *this);
void __cdecl CPlayer::WarPortalAll(int nCID, int nAID);
void __thiscall CPlayer::Send(CPlayer *this, CIOBuffer *pBuffer);
void CPlayer::Write(CPlayer *pPlayer, enum S2C_PROTOCOL nType, const char *format, ...);
void __thiscall CPlayer::Process(CPlayer *this, enum C2S_PROTOCOL nType, const char *packet, int end);
int __thiscall CPlayer::GetInvenSize(char *this);
void __stdcall CPlayer::ExchangeBoddariToItem(int a1, int a2);
void __thiscall CPlayer::ExchahgeItem(CIOCriticalSection *this, CPlayer *a2, int a3, int a4, int a5, int a6);
int __thiscall CPlayer::GetNeedPoint(CPlayer *this, int nProperty);
int __thiscall CPlayer::OnLoadPlayer(void *this, _BYTE *a2);
_DWORD *__thiscall sub_457E30(_DWORD *this);
_DWORD *__thiscall sub_457E60(_DWORD *this);
int __thiscall CPlayer::_Create(CPlayer *a1);
int __thiscall CChar::GetMinMagic(_DWORD *this);
int __thiscall CChar::GetMaxMagic(_DWORD *this);
void __thiscall CPlayer::GameStart(void *this);
void __thiscall CPlayer::GameRestart(void *this);
int __thiscall CSocket::Id(CSocket *this); // idb
void __thiscall CPlayer::SaveAllProperty(CPlayer *this, int bLevelUp);
void CPlayer::UpdateProperty(CPlayer *this, int bProperty, int bAdd, ...);
void CPlayer::UpdatePrtyPt(CPlayer *this, int nProperty, int bAdd, ...);
void __cdecl TODO_CPlayer::Attack(CPlayer *this, int a2, int a3, char a4, int a5);
void __thiscall CPlayer::Attack(CPlayer *this, int nKind, int nId);
void __thiscall CPlayer::LevelUp(CPlayer *this);
void __thiscall CPlayer::Teleport(CPlayer *this, int nMap, const tagPOINT *ptPDest, int nZ, int bCheat);
int __thiscall CSMap::IsOnTile(CSMap *this, const tagPOINT *ptP, __int64 dwAttr);
int __thiscall CCellMap::IsOnTile(CCellMap *this, const tagPOINT *ptT, __int64 dwAttr);
void __thiscall CPlayer::OnTeleport(CPlayer *this, int bAns, int nZ);
int __thiscall CPlayer::_IntoInven(CPlayer *this, CItem *pItem);
void __thiscall CPlayer::_OutofInven(CPlayer *this, CItem *pItem);
CItem *__thiscall CPlayer::FindItem(CPlayer *this, int nIndex, int nNum);
CItem *__thiscall CPlayer::_FindItem(CPlayer *this, int nIndex, int nNum);
CItem *__thiscall CPlayer::_FindMergeItem(CPlayer *this, CItem *pConvItem);
void __thiscall CPlayer::BuyItemEx(CPlayer *this, int nNPCId, int nTaxRatePrev, int nMax, char *info, char *end);
void __thiscall CPlayer::SellItem(CPlayer *this, int nNPCId, int nMax, char *info, char *nNum);
void __thiscall CPlayer::DropItem(CPlayer *this, int nIID, int pNum);
void __thiscall CPlayer::TrashItem(CPlayer *this, int nIID);
int __thiscall CPlayer::RemoveItem(CPlayer *this, int nLogType, int nIndex, int nNum);
void __thiscall CPlayer::PutOnItem(CPlayer *this, int nIID);
void __thiscall CPlayer::PutOffItem(CPlayer *this, int nIID);
void __thiscall CPlayer::UseItem(CPlayer *this, int nIID);
int __thiscall CPlayer::InsertItem(CPlayer *this, int nType, CItem *pAddItem);
int __thiscall CPlayer::_InsertItem(CPlayer *this, int nType, CItem *pAddItem);
void __thiscall CPlayer::EnchantItem(CPlayer *this, int nFromIID, int nToIID);
void __thiscall CPlayer::UpgradeItem(CPlayer *this, int nType, int nIID);
void __thiscall CPlayer::AskTrade(CPlayer *this, int nId);
void __thiscall CPlayer::OnAskTrade(CPlayer *this, int bAns, int nId);
void __thiscall CPlayer::CancelTrade(CPlayer *this);
void __thiscall CPlayer::_EndTrade(CPlayer *this, int nEndType);
void __thiscall CPlayer::ShowOffItem(CPlayer *this, int nMax, char *info, char *end);
int __thiscall CTrade::IsEnd(CTrade *this);
CPlayer *__thiscall CTrade::GetOther(CTrade *this, CPlayer *pPlayer);
void __thiscall CPlayer::TradeAgreed(CPlayer *this);
int __thiscall CPlayer::_CheckTrade(CPlayer *this);
void __thiscall CPlayer::_TradeItem(CPlayer *this, CPlayer *pOther);
void __thiscall CPlayer::_StorageIn(CPlayer *this, ITEMINFO *iteminfo, int nUpdateIID, int nUpdateNum);
int __thiscall CPlayer::_StorageOut(CPlayer *this, int nStorIID, int nStorNum);
int __thiscall CPlayer::_FindStorageItem(CPlayer *this, int nIndex, _DWORD *nIID, int dwInfo, int nVer); // idb
void __thiscall CPlayer::StorageInfo(CPlayer *this);
void __thiscall CPlayer::PutInStorage(CPlayer *this, int nNPCId, int nMax, char *info, char *end);
void __thiscall CPlayer::PutOutStorage(CPlayer *this, int nNPCId, int nMax, char *info, char *end);
void __thiscall CPlayer::SetStallInfo(CPlayer *this, int nSetType, char *packet, char *end);
STALLITEMINFO *__thiscall STALLITEMINFO::STALLITEMINFO(STALLITEMINFO *this, int price);
void __thiscall CPlayer::GetStallInfo(CPlayer *this, int nGetType, CPlayer *pBuyer);
void __thiscall CPlayer::SwitchStall(CPlayer *this, int bStart);
int __thiscall CChar::IsGStateExcept(CChar *this, int nExcept);
void __thiscall CPlayer::BuyItemAtStall(CPlayer *this, CPlayer *pBuyer, int nStall, int nMax, char *packet, char *end);
int __thiscall STALLITEMINFO::Num(STALLITEMINFO *this);
int __thiscall STALLITEMINFO::Minus(STALLITEMINFO *this, int num);
void __cdecl ItemLock(CPlayer *pA, CPlayer *pB);
void __cdecl ItemUnlock(CPlayer *pA, CPlayer *pB);
void __thiscall CPlayer::AskParty(CPlayer *this, int nId);
void __thiscall CPlayer::OnAskParty(CPlayer *this, int bAns, int nId);
void __thiscall CPlayer::LeaveParty(CPlayer *this);
void __thiscall CPlayer::ExileParty(CPlayer *a1, int a2);
unsigned int __thiscall CPlayer::GetPartySize(CPlayer *this);
void __thiscall CPlayer::UpdatePartyMember(CPlayer *this, int a2);
void __thiscall CPlayer::SaveQuestFlag(CPlayer *this, int a2, int a3);
BOOL __thiscall CPlayer::CheckQuestFlag(CPlayer *this, int a2); // idb
int __thiscall CPlayer::CheckQuestClear(CPlayer *this, int a2); // idb
void __thiscall CPlayer::QuestGuide(CPlayer *this, int a2);
void __thiscall CPlayer::AskPvP(CPlayer *a1, int a2);
void __cdecl BothLock(CPlayer *pA, CPlayer *pB);
void __thiscall CPlayer::OnAskPvP(CPlayer *a1, int a2, int a3);
void __thiscall CPlayer::OnPvP(CPlayer *a1);
void __thiscall CPlayer::EndPvP(CPlayer *this, volatile int *a2, int a3, int a4, int a5);
void __thiscall CPlayer::ProcessMsg(CPlayer *this, char *message);
void __thiscall CPlayer::ChatCommand(CPlayer *this, char *command);
void __thiscall CPlayer::Rest(CPlayer *this, int a2);
int __thiscall CPlayer::CutdownExp(CPlayer *this, int a2);
void __thiscall CPlayer::Revival(CPlayer *this);
void __thiscall CPlayer::RevivalSkill(CPlayer *a1, int a2, int a3);
int __thiscall CPlayer::RevivalItem(CPlayer *this, int a2);
void __thiscall CPlayer::SaveRevivalPt(CPlayer *this, int a2, int a3);
void __thiscall CPlayer::ProcessEvent(CPlayer *a1, int a2, void *Src, int a4);
void __thiscall CPlayer::OnProcessEvent(CPlayer *this, int a2, void *Src);
void __thiscall CPlayer::InitStat(CPlayer *this);
_DWORD *__thiscall CPlayer::EventInsert(CPlayer *this, int a2); // idb
_DWORD *__thiscall CPlayer::EventRemoveAll(CPlayer *this);
BOOL __thiscall CPlayer::EventIsMoraTime(CPlayer *this);
unsigned int __thiscall CPlayer::EventSetMora(CPlayer *this, int a2);
void __thiscall CPlayer::EventSaveDB(CPlayer *this); // idb
void __thiscall CPlayer::MLMProcess(CPlayer *a1, int a2, void *Src, int a4);
int *__thiscall sub_466AB0(int *this, int a2, int a3, void *a4, int a5, int a6, int a7, int a8);
void __cdecl sub_466B20(unsigned int a1, unsigned int a2);
void __cdecl sub_466B70(int a1, int a2);
void __thiscall CPlayer::MLMLoad(CPlayer *a1, _DWORD *a2);
_DWORD *__thiscall CPlayer::_MLMInsert(_DWORD **this, _DWORD *a2);
void __thiscall CPlayer::MLMDelete(CPlayer *this, int a2, int a3); // idb
void __thiscall CPlayer::_MLMDelete(_DWORD **this, int a2, int a3);
void __thiscall CPlayer::MLMDeleteAll(CPlayer *a1);
void __thiscall CPlayer::MLMUpdate(CPlayer *this, int a2, int a3, int a4);
MLMLIST *__thiscall CPlayer::_MLMFind(CPlayer *this, int a2, int a3);
void __stdcall CPlayer::_MLMGet(CMemory **a5, int a6);
int __thiscall CPlayer::MLMPupilNum(CPlayer *this); // idb
void __thiscall CPlayer::MLMPayMoney(CPlayer *a1, int a2);
void __thiscall CPlayer::MLMAccumFee(CPlayer *this, int a2);
void __thiscall CPlayer::MLMLevelUp(CPlayer *a1);
void __thiscall CPlayer::FRDProcess(CPlayer *a1, int a2, void *a3, int a4);
_DWORD *__thiscall sub_468200(_DWORD *this);
int *__thiscall sub_468240(int *this, int a2, void *a3, int a4);
int __thiscall CPlayer::MailSend(CPlayer *this, int a2, int a3, char *Str2, int a5, int a6, int a7, int a8, int a9, int a10, int a11);
void __thiscall CPlayer::MailSendResult(CPlayer *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12);
void __thiscall CPlayer::MAILProcess(CPlayer *this, int a2, void *Src, int a4);
_DWORD *__thiscall sub_469C80(_DWORD *this);
int __thiscall CPlayer::IsCooking(CPlayer *this, int a2); // idb
int __thiscall CPlayer::Cooking(CPlayer *this, int a2);
volatile int *__thiscall CPlayer::GetGuild(CPlayer *a1);
void __thiscall CPlayer::SetGuild(CIOObject **this, int a2);
int __thiscall CPlayer::GetGID(CPlayer *this);
void __thiscall CPlayer::SetGID(CPlayer *this, int a2);
void __thiscall CPlayer::SetGuildLevel(CPlayer *this, int a2);
void __thiscall CPlayer::SetGuildName(CPlayer *this, char *Source);
void __thiscall CPlayer::SetGuildStandard(CPlayer *this, int a2);
void __thiscall CPlayer::SetGuildClass(CPlayer *this, int a2, char *Source);
char *__thiscall CPlayer::GetGuildName(CPlayer *this);
int __thiscall CPlayer::GetGuildStandard(CPlayer *this); // idb
char *__thiscall CPlayer::GetGuildClassTitle(CPlayer *this);
int __thiscall CPlayer::IsDefenseSide(CPlayer *a1, unsigned int a5); // idb
int __thiscall CPlayer::CanAttack(CPlayer *this, void *a2, int a3);
void __thiscall CPlayer::PKKill(CPlayer *this, int a2);
int __thiscall sub_46B2C0(int this);
int __thiscall CPlayer::GetDropItemMask(CPlayer *this); // idb
int __thiscall CPlayer::AddBuff(CPlayer *this, std::locale::facet *a2);
void __thiscall CPlayer::PKBulletinInfoSend(CPlayer *this);
void __cdecl CPlayer::PKBulletinLoad(_BYTE *a1);
void __cdecl CPlayer::ScanONPKPlayer();
void __cdecl CPlayer::EventBuff(int a1);
void __thiscall CPlayer::DropItemONPKDie(CIOCriticalSection *this);
void __thiscall CPlayer::Transform(int this, int a2, int a3);
void __thiscall CPlayer::FreeTransform(CIOCriticalSection *this);
void __thiscall CPlayer::BreakStandard(CIOCriticalSection *this);
void __thiscall CPlayer::RefreshStandardBuff(CPlayer *this);
BOOL __thiscall CPlayer::IsWearBuffStandard(CPlayer *this); // idb
void __thiscall CPlayer::Bless(CPlayer *this, int a2, int a3);
void __stdcall CPlayer::SetSystemCode(int a1, int a2);
void __stdcall CPlayer::SetEventCode(int a1, int a2);
int __thiscall CPlayer::IsPCBang(CPlayer *this); // idb
void __thiscall CPlayer::Shortcut(CPlayer *this, int a2, void *Src, int a4);
void __thiscall CPlayer::OnGetMyTelPt(CPlayer *this, int a2, int a3);
_DWORD *__thiscall sub_46C290(_DWORD *this);
void __thiscall sub_46C2D0(void *this);
void __thiscall CPlayer::SetMyTelPt(CPlayer *this, int a2, void *Src, int a4);
_DWORD *__thiscall sub_46C920(_DWORD *this, int a2, _DWORD *a3, int a4);
void __thiscall CPlayer::OnSetMyTelPt(CPlayer *this, int a2, void *Src);
int __thiscall CPlayer::GetPalsyDamage(CPlayer *this, int a2);
int __thiscall CPlayer::CanMove(CPlayer *this);
void __thiscall CPlayer::NPCProcess(CPlayer *this, char a2, int a3, int a4, int a5);
void __thiscall CPlayer::ChangePlayerName(CPlayer *this, char *Str);
void __thiscall CPlayer::OnChangePlayerName(CPlayer *this, int a2, char *Source);
void __thiscall CPlayer::ChangeGuildName(CPlayer *this, char *Str);
void __thiscall CPlayer::OnChangeGuildName(CPlayer *this, int a2, char *Source);
void __thiscall CPlayer::EventProcessNPC(CPlayer *this, int a2, int a3, int a4);
int __stdcall sub_46D490(int *a1, int a2);
int __stdcall sub_46D4B0(int a1, int a2);
int __thiscall CPlayer::InsertOwnItem(CPlayer *this, int a2, int a3);
void __thiscall CPlayer::ExchangeDanjiToItem(CPlayer *this, int a2, CPlayer *a3); // idb
void __thiscall CPlayer::SiegeGunProcess(CPlayer *this, int a2, int a3, int a4, int a5);
void __thiscall CPlayer::SiegeGunControl(CPlayer *this, int a2, void *src, int a4);
void __thiscall CPlayer::SiegeGunUnset(CPlayer *this, int a2);
int __thiscall CPlayer::ReturnToPoint(CPlayer *this, int a2);
int __cdecl CPlayer::CountWarrelationPlayer();
void __thiscall CPlayer::EnforceItem(CPlayer *this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_46EF70(CItem *this); // idb
signed int __stdcall CItem::ChkWeaponUpgrade(int nItem_1, int nItem, int nItem_2); // idb
BOOL __stdcall CItem::CheckSubClass(CItem *a1); // idb
void __thiscall CItem::RemoveItem(CPlayer *Player, CItem *Item);
void __thiscall CPlayer::MixItem(CPlayer *this, int a2, int a3, int a4, int a5, int a6);
unsigned int __thiscall sub_4703E0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_470440(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, const std::pair<int const ,CGame_Character::TargetInfo> *a3);
int __thiscall sub_470600(int *this, int a1);
_DWORD *__thiscall sub_470660(iless *this, _DWORD *a2, const char **a3);
void *__thiscall sub_4706F0(void *this);
int __thiscall sub_470720(void *this);
int __thiscall sub_470740(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1);
std::vector<IPAddrMask> *__thiscall sub_4707A0(void *this);
XMessageQueue::XTimerElement *__thiscall sub_4707D0(int this, const XMessageQueue::XTimerElement *a2);
void *__thiscall sub_470840(void *this);
int __thiscall sub_470870(void *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_470890(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3);
int __thiscall sub_470A40(int *this, int a1);
void *__thiscall sub_470AA0(void *this);
int __thiscall sub_470AD0(void *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_470AF0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3);
_DWORD *__thiscall sub_470CA0(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_471430(int *this, int a1);
_DWORD *__thiscall sub_471490(_DWORD *this);
_DWORD *__thiscall sub_4714F0(_DWORD *this, _DWORD *a2, _DWORD *a3);
void *__thiscall sub_471580(void *this);
int __thiscall sub_4715B0(void *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_4715D0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3);
int __thiscall sub_471780(int *this, int a1);
_DWORD *__thiscall sub_4717E0(_DWORD *this);
_DWORD *__thiscall sub_471840(_DWORD *this, _DWORD *a2, _DWORD *a3);
void *__thiscall sub_4718D0(void *this);
int __thiscall sub_471900(void *this);
int __thiscall sub_471920(int *this, int a1);
void *__thiscall sub_471980(void *this);
int __thiscall sub_4719B0(void *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_4719D0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3);
int __thiscall sub_471B80(int *this, int a1);
_DWORD *__thiscall sub_471BE0(_DWORD *this);
_DWORD *__thiscall sub_471C40(_DWORD *this, _DWORD *a2, _DWORD *a3);
void *__thiscall sub_471CD0(void *this);
int __thiscall sub_471D00(void *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_471D20(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3);
bool __stdcall sub_471ED0(void *a1, void *a2);
_DWORD *__thiscall sub_471F00(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_472690(int *this, int a1);
_DWORD *__thiscall sub_4726F0(_DWORD *this, _DWORD *a2, void *a3);
bool __thiscall sub_472780(_DWORD *this);
CMemory ***__thiscall sub_4727A0(_DWORD *this, int a2);
_DWORD *__thiscall sub_4727D0(_DWORD *this);
_DWORD *__thiscall std::list<std::pair<std::string const,int>>::insert(_DWORD *this, _DWORD *a1, int a2, int a3);
_DWORD *__thiscall sub_472830(_DWORD *this, _DWORD *a2, const void *a3);
std::pair<int,CScriptToCookBoard::tBaseTable> *__thiscall std::pair<int,CScriptToCookBoard::tBaseTable>::pair<int,CScriptToCookBoard::tBaseTable>(std::pair<int,CScriptToCookBoard::tBaseTable> *this, const int *_Val1, const CScriptToCookBoard::tBaseTable *_Val2);
_DWORD *__thiscall sub_472890(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_4728C0(_DWORD *this, _DWORD *a2, const void *a3);
_DWORD *__thiscall sub_4728F0(_DWORD *this, _DWORD *a2, const void *a3);
_DWORD *__thiscall sub_472920(_DWORD *this, _DWORD *a2, const void *a3);
int __thiscall sub_472950(int this, const std::string *a2, _DWORD *a3);
std::list<std::pair<std::string const ,int>> *__thiscall sub_472990(std::list<std::pair<std::string const ,int>> *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4729B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
void *__thiscall sub_472A50(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, const int *a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472A80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
void *__thiscall sub_472B20(void *this, void *a1, int a2);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_472B50(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472B90(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_472C30(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a2, const int *a3);
int __thiscall sub_472C70(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __thiscall std::vector<XMessageQueue::XElement>::capacity(std::vector<XMessageQueue::XTimerElement> *this);
int __thiscall std::vector<XMessageQueue::XElement>::size(std::vector<IPAddrMask> *this);
int __thiscall sub_472DA0(std::vector<IPAddrMask> *this, int a2, int a3, int a4);
char __thiscall std::vector<IPAddrMask>::_Buy(std::vector<IPAddrMask> *this, unsigned int _Capacity);
XMessageQueue::XTimerElement *__thiscall std::vector<XMessageQueue::XElement>::_Ufill(std::vector<XMessageQueue::XTimerElement> *this, XMessageQueue::XTimerElement *_Ptr, unsigned int _Count, const XMessageQueue::XTimerElement *_Val); // idb
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_472ED0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_472FB0(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2);
void *__thiscall sub_472FF0(_DWORD *this, void *a2, char a3, int a4, int a5);
int __thiscall sub_473430(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __cdecl sub_4734E0(int a1);
int __cdecl sub_4734F0(int a1);
int __cdecl sub_473500(int a1);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_473520(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473560(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
void *__thiscall sub_473600(_DWORD *this, void *a1, int a2);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_473630(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2);
int __stdcall sub_473670(void *a1);
void *__thiscall sub_4736F0(int this, void *a2, char a3, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *a4, const std::pair<int const ,KMacro::CShinsu_Ability> *a5);
int *__thiscall sub_473B30(void *this, int a2);
int __cdecl sub_473C60(int a1);
int __cdecl sub_473CA0(int a1);
int *__thiscall sub_473CE0(void *this, int a2);
int __thiscall sub_473E10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __cdecl sub_473EC0(int a1);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_473ED0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
void *__thiscall sub_473FB0(_DWORD *this, void *a1, int a2);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_473FE0(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2);
int __stdcall sub_474020(void *a1);
void *__thiscall sub_4740A0(int this, void *a2, char a3, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *a4, const std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> *a5);
int __thiscall sub_4744E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __cdecl sub_474590(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4745A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
int __thiscall sub_474640(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __cdecl sub_4746F0(int a1);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_474700(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474740(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
void *__thiscall sub_4747E0(_DWORD *this, void *a1, int a2);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_474810(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2);
int __stdcall sub_474850(void *a1);
void *__thiscall sub_4748D0(_DWORD *this, void *a2, char a3, int a4, int a5);
int __thiscall sub_474D10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __cdecl sub_474DC0(int a1);
int __cdecl sub_474DD0(int a1);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_474DE0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474E20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
void *__thiscall sub_474EC0(_DWORD *this, void *a1, int a2);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_474EF0(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2);
void *__thiscall sub_474F30(_DWORD *this, void *a2, char a3, int a4, int a5);
int *__thiscall sub_475370(void *this, int a2);
int __cdecl sub_4754A0(int a1);
int __cdecl sub_4754E0(int a1);
int *__thiscall sub_475520(void *this, int a2);
int __thiscall sub_475650(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
void *__stdcall sub_475700(int a1);
CMemory ***__thiscall sub_475720(_DWORD *this, int a1, int a2);
_DWORD *__thiscall std::list<std::pair<std::string const,int>>::erase(int this, _DWORD *a2, int a3);
// std::_Container_base *__thiscall std::_Container_base::_Container_base(std::_Container_base *this);
void *__thiscall sub_475880(void *this);
void *__thiscall sub_4758A0(void *this);
void *__thiscall sub_4758C0(void *this);
void *__thiscall sub_4758E0(void *this);
void *__thiscall sub_475900(void *this);
void *__thiscall sub_475920(void *this);
void *__thiscall sub_475940(void *this);
int __thiscall sub_475960(int *this);
void *__thiscall sub_475980(void *this);
void *__thiscall sub_4759A0(void *this);
_DWORD *__thiscall sub_4759C0(_DWORD *this);
_DWORD *__thiscall sub_475A20(_DWORD *this);
void *__thiscall sub_475A80(int *this, void *a1, int a2);
int __thiscall sub_475AB0(int this, const char **a2);
_DWORD *__thiscall sub_475B40(_DWORD *this);
void __thiscall sub_475BA0(int this, XMessageQueue::XTimerElement *a2, unsigned int a3, int *a4);
_DWORD *__thiscall sub_475E70(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_476600(_DWORD *this);
int __thiscall sub_476660(_DWORD *this, _DWORD *a2);
int *__thiscall sub_4766F0(void *this, int a2);
CMemory **__stdcall sub_476820(int a1, int a2, int a3, int a4, char a5);
unsigned int __thiscall sub_4768A0(int this);
void *__thiscall sub_4768C0(int *this, void *a1, int a2);
_DWORD *__thiscall sub_4768F0(_DWORD *this);
int __thiscall sub_476960(_DWORD *this, _DWORD *a2);
CMemory **__thiscall std::_Tree<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const,KMacro::CShinsu_Ability>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Rarg, const std::pair<int const ,KMacro::CShinsu_Ability> *_Val, char _Carg);
int __cdecl sub_476A70(int a1);
unsigned int __thiscall sub_476A80(int this);
_DWORD *__thiscall sub_476AA0(_DWORD *this, _DWORD *a2, int a3);
void *__thiscall sub_477230(int *this, void *a1, int a2);
_DWORD *__thiscall sub_477260(_DWORD *this);
int __thiscall sub_4772D0(_DWORD *this, _DWORD *a2);
int *__thiscall sub_477360(void *this, int a2);
int *__thiscall sub_477490(void *this, int a2);
CMemory **__thiscall std::_Tree<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Rarg, const std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> *_Val, char _Carg);
unsigned int __thiscall sub_477640(int this);
_DWORD *__thiscall sub_477660(_DWORD *this);
void *__thiscall sub_4776C0(int *this, void *a1, int a2);
_DWORD *__thiscall sub_4776F0(_DWORD *this);
int __cdecl sub_477760(int a1);
unsigned int __thiscall sub_477770(int this);
_DWORD *__thiscall sub_477790(_DWORD *this, _DWORD *a2, int a3);
void *__thiscall sub_477F20(int *this, void *a1, int a2);
_DWORD *__thiscall sub_477F50(_DWORD *this);
int __thiscall sub_477FC0(_DWORD *this, _DWORD *a2);
int *__thiscall sub_478050(void *this, int a2);
int *__thiscall sub_478180(void *this, int a2);
CMemory **__stdcall sub_4782B0(std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *a1, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *a2, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *a3, const std::pair<int const ,KMacro::BoneInfo> *a4, char a5);
unsigned int __thiscall sub_478330(int this);
_DWORD *__thiscall sub_478350(_DWORD *this);
void *__thiscall sub_4783B0(int *this, void *a1, int a2);
_DWORD *__thiscall sub_4783E0(_DWORD *this);
int __thiscall sub_478450(_DWORD *this, void *a2);
CMemory **__stdcall sub_4784E0(int a1, int a2, int a3, int a4, char a5);
CMemory **__stdcall sub_478560(int a1, int a2, int a3);
_DWORD *__thiscall sub_4785D0(_DWORD *this, unsigned int a2);
CMemory **__stdcall sub_478640(int a1);
int *__thiscall sub_478660(int *this);
_DWORD *__thiscall sub_478680(int *this, _DWORD *a2, int a3);
void *__thiscall sub_4786B0(void *this);
void *__thiscall sub_4786D0(void *this);
void *__thiscall sub_4786F0(void *this);
_DWORD *__thiscall sub_478710(int *this, _DWORD *a2, int a3);
int *__thiscall sub_478740(int *this);
_DWORD *__thiscall sub_478760(int *this, _DWORD *a2, int a3);
void *__thiscall sub_478790(void *this);
int *__thiscall sub_4787B0(int *this);
_DWORD *__thiscall sub_4787E0(int *this, _DWORD *a2, int a3);
void *__thiscall sub_478810(void *this);
void *__thiscall sub_478830(void *this);
void *__thiscall std::list<std::pair<std::string const,int>>::clear(std::list<std::pair<std::string const ,int>> *this);
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *this, const std::vector<KMailSystem::CMailinfo>::iterator *_Val1, const std::vector<KMailSystem::CMailinfo>::iterator *_Val2);
int __stdcall sub_478920(void *a1);
int __thiscall sub_4789A0(_DWORD *this, _DWORD *a2);
int __stdcall sub_478A30(void *a1);
int __thiscall sub_478AB0(int *this);
int __thiscall sub_478AD0(int *this, const char **a2);
int __stdcall sub_478B60(void *a1);
unsigned int __thiscall std::allocator<std::pair<char const * const,int>>::max_size(std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *this); // idb
int __stdcall sub_478C10(void *a1);
int __thiscall sub_478C90(int *this, _DWORD *a2);
CMemory **sub_478D20();
unsigned int __thiscall std::allocator<LayerInfo>::max_size(std::allocator<KGuildSystem::CGuildMember> *this); // idb
CMemory **__stdcall sub_478E70(int a1);
int __cdecl sub_478E90(int a1);
int __cdecl sub_478ED0(int a1);
int __thiscall sub_478F10(int *this, _DWORD *a2);
CMemory **sub_478FA0();
unsigned int __thiscall std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>::max_size(std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *this); // idb
CMemory **__stdcall sub_4790F0(int a1);
int __stdcall sub_479110(void *a1);
int __cdecl sub_479190(int a1);
int __thiscall sub_4791D0(int *this, _DWORD *a2);
CMemory **sub_479260();
unsigned int __thiscall std::allocator<View_ARMY_ADD_RAIDER_TEAM::RAIDERS_MASTER_INFO>::max_size(std::allocator<std::pair<unsigned long const ,std::string > > *this); // idb
CMemory **__stdcall sub_4793B0(int a1);
int __cdecl sub_4793D0(int a1);
int __cdecl sub_479410(int a1);
int __thiscall sub_479450(int *this, _DWORD *a2);
CMemory **sub_4794E0();
unsigned int __thiscall std::allocator<KMailSystem::CMailinfo>::max_size(std::allocator<KMailSystem::CMailinfo> *this); // idb
CMemory **__stdcall sub_479630(int a1);
int __stdcall sub_479650(void *a1);
int __thiscall sub_4796D0(int *this, void *a2);
CMemory **sub_479760();
unsigned int __thiscall std::allocator<MixingForItemList>::max_size(std::allocator<MixingForItemList> *this); // idb
int __thiscall sub_4798B0(char *this);
void *__thiscall sub_4798D0(void *this);
int __thiscall sub_4798F0(int *this);
int __thiscall sub_4799D0(int *this);
int __thiscall sub_479AB0(int *this);
void *__thiscall sub_479B70(void *this);
int __thiscall sub_479B90(int *this);
int __thiscall sub_479C70(int *this);
int __thiscall sub_479D50(int *this);
_DWORD *__thiscall sub_479E10(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6);
_DWORD *__thiscall sub_479E60(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6);
std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const,CScriptToCookBoard::tBaseTable>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *_Rarg, const std::pair<int const ,CScriptToCookBoard::tBaseTable> *_Val, char _Carg);
std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const,KMacro::BoneInfo>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *_Rarg, const std::pair<int const ,KMacro::BoneInfo> *_Val, char _Carg);
char *__thiscall sub_479F60(char *this, int a2, int a3, int a4, int a5, char a6);
_DWORD *__thiscall sub_479FB0(_DWORD *this, int a2, int a3, const void *a4);
CQuest *__thiscall CQuest::~CQuest(CQuest *this, int a2);
int sub_47A030();
void *__thiscall sub_47A060(void *this);
void *__thiscall sub_47A080(void *this);
int __thiscall sub_47A0A0(int *this);
int __thiscall sub_47A160(int *this);
_DWORD *__cdecl sub_47A220(_DWORD *a1, _DWORD *a2);
_DWORD *__cdecl GetNumeric<int>(_DWORD *a1, _DWORD *a2);
int __cdecl sub_47A260(int a1, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14);
BOOL __cdecl std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, int a2, _DWORD *a3);
BOOL __cdecl sub_47A2B0(int a1, int a2, int a3);
BOOL __cdecl sub_47A2E0(int a1, int a2, int a3);
BOOL __cdecl sub_47A310(int a1, int a2, int a3);
BOOL __cdecl sub_47A340(int a1, int a2, int a3);
BOOL __cdecl sub_47A370(int a1, int a2, int a3);
void *__cdecl sub_47A3A0(void *a1);
int __cdecl sub_47A3B0(int a1, int a2);
_DWORD *__cdecl sub_47A3F0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
CMemory **__cdecl sub_47A430(int a1);
CMemory **__cdecl sub_47A450(int a1);
CMemory **__cdecl sub_47A470(int a1);
CMemory **__cdecl sub_47A490(int a1);
CMemory **__cdecl sub_47A4B0(int a1);
void *__thiscall sub_47A4D0(void *this, char a2);
// int __thiscall sub_47A500(_DWORD); weak
BOOL __cdecl sub_47A520(int a1, int a2, _DWORD *a3);
BOOL __cdecl sub_47A560(int a1, int a2, _DWORD *a3);
BOOL __cdecl sub_47A5A0(int a1, int a2, _DWORD *a3);
BOOL __cdecl sub_47A5E0(int a1, int a2, _DWORD *a3);
BOOL __cdecl sub_47A620(int a1, int a2, _DWORD *a3);
int __cdecl std::_Destroy_range<IPAddrMask>(int a1, int a2);
char *__cdecl sub_47A690(int a1, int a2, void *a3);
_DWORD *__stdcall sub_47A6D0(void *a1, int a2);
void *__thiscall sub_47A6F0(void *this);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47A720(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47A760(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this);
_DWORD *__thiscall sub_47A790(_DWORD *this);
int sub_47A7D0();
void *__thiscall std::_List_val<std::pair<int const,IDirect3DTexture9 *>>::_List_val<std::pair<int const,IDirect3DTexture9 *>>(void *this, char a2);
CIOObject *__thiscall sub_47A8B0(CIOObject *this);
int __thiscall sub_47A8D0(void *this);
int __thiscall sub_47A8F0(void *this);
int __thiscall sub_47A910(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
int __thiscall sub_47A9C0(void *this);
int __thiscall sub_47A9E0(void *this);
int __thiscall sub_47AA00(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
BOOL __thiscall CCondClass::IsMeet(CCondClass *this, CPlayer *pPlayer);
BOOL __thiscall CCondLevel::IsMeet(CCondLevel *this, CPlayer *pPlayer);
BOOL __thiscall CCondSpecialty::IsMeet(CCondSpecialty *this, CPlayer *pPlayer);
BOOL __thiscall CCondContribute::IsMeet(CCondContribute *this, CPlayer *pPlayer);
int __thiscall CCondItem::IsMeet(CCondItem *this, CPlayer *pPlayer); // idb
BOOL __thiscall CCondParty::IsMeet(CCondParty *this, CPlayer *pPlayer); // idb
BOOL __thiscall CCondQuest::IsMeet(CCondQuest *this, CPlayer *pPlayer);
BOOL __thiscall CCondClear::IsMeet(CCondClear *this, CPlayer *pPlayer);
BOOL __thiscall CCondNotClear::IsMeet(CCondNotClear *this, CPlayer *pPlayer);
BOOL __thiscall CCondGState::IsMeet(CCondGState *this, CPlayer *pPlayer);
void __thiscall CActionHtml::Action(CActionHtml *nCondHtml, CPlayer *nPlayer); // idb
void __thiscall CActionLink::Action(CActionLink *this, CPlayer *pPlayer); // idb
void __thiscall CActionSpecialty::Action(CActionSpecialty *this, CPlayer *pPlayer); // idb
void __thiscall CActionExp::Action(CActionExp *this, CPlayer *pPlayer);
void __thiscall CActionItem::Action(CActionItem *this, CPlayer *pPlayer);
void __thiscall CActionItemRand::Action(CActionItemRand *this, CPlayer *pPlayer);
void __thiscall CActionCon::Action(CActionCon *this, CPlayer *pPlayer); // idb
void __thiscall CActionSUP::Action(CActionSUP *this, CPlayer *pPlayer); // idb
void __thiscall CActionSaveFlag::Action(CActionSaveFlag *this, CPlayer *pPlayer); // idb
void __thiscall CActionClear::Action(CActionClear *this, CPlayer *pPlayer); // idb
void __thiscall CActionGState::Action(CActionGState *this, CPlayer *pPlayer);
void __thiscall CActionGuide::Action(CActionGuide *this, CPlayer *pPlayer); // idb
void __thiscall CActionRedistribute::Action(CActionRedistribute *this, CPlayer *pPlayer);
void __thiscall CActionTeleport::Action(CActionTeleport *this, CPlayer *pPlayer);
void __thiscall CCase::~CCase(CCase *this);
int __thiscall CCase::SetCondition(CCase *this, lisp::var value);
QUESTITEM *__thiscall QUESTITEM::QUESTITEM(QUESTITEM *this);
std::locale::facet *__thiscall sub_47B8E0(std::locale::facet *this, unsigned int a2);
// std::locale::facet *__thiscall std::locale::facet::facet(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47B940(std::locale::facet *this, char a2);
// std::locale::facet *__thiscall std::locale::facet::~facet(std::locale::facet *this);
std::locale::facet *__thiscall sub_47B990(std::locale::facet *this);
std::locale::facet *__thiscall sub_47B9B0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47B9E0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47BA10(std::locale::facet *this, unsigned int a2);
CActionItem *__thiscall CActionItem::CActionItem(CActionItem *this, unsigned int nValue);
void *__thiscall sub_47BA70(void *this, char a2);
void __thiscall sub_47BAA0(int this);
std::locale::facet *__thiscall sub_47BAC0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47BAF0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47BB20(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47BB50(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47BB80(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47BBB0(std::locale::facet *this, char a2);
int __thiscall CCase::SetAction(CCase *this, lisp::var value);
std::locale::facet *__thiscall sub_47C470(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C4A0(std::locale::facet *this, char a2);
// void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this); weak
void __thiscall sub_47C4F0(std::locale::facet *this);
std::locale::facet *__thiscall sub_47C510(std::locale::facet *this, unsigned int a2);
// _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int); weak
std::locale::facet *__thiscall sub_47C570(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C5A0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C5D0(std::locale::facet *this, char a2);
std::locale::facet *__thiscall sub_47C600(std::locale::facet *this, unsigned int a2);
void *__thiscall sub_47C630(void *this, char a2);
void __thiscall sub_47C660(int this);
std::locale::facet *__thiscall sub_47C680(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C6B0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C6E0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C710(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C740(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C770(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C7A0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C7D0(std::locale::facet *this, unsigned int a2);
std::locale::facet *__thiscall sub_47C800(std::locale::facet *this, unsigned int a2);
_DWORD *__thiscall sub_47C830(_DWORD *this, int a2);
int __thiscall sub_47C880(std::list<tagPARTICLES *> *this, int a2);
BOOL __thiscall sub_47C910(int this, int a2);
void __thiscall CQuest::_CQuest(int this);
void *__thiscall CCase::`scalar deleting destructor'(CCase *this, char a2);
void __cdecl CQuest::Close();
CQuest *__cdecl CQuest::FindQuest(int dwKey);
void __cdecl CQuest::CallProcess(int dwKey, CPlayer *pPlayer);
BOOL __thiscall CQuest::Set(CQuest *this, enum Symbol symbol, struct lisp::var value);
CCase *__thiscall CCase::CCase(CCase *this);
int __thiscall CQuest::SetCase(CQuest *this, CCase *pCase, lisp::var value);
int __thiscall CQuest::OnLoad(CQuest *this); // idb
void __thiscall CQuest::Process(CQuest *this, CPlayer *pPlayer);
std::vector<tagRECT> *__thiscall sub_47CF60(void *this);
tagRECT *__thiscall sub_47CF90(int this, const tagRECT *a2);
CMemory ***__thiscall sub_47D000(_DWORD *this, int a2);
void *__thiscall sub_47D030(void *this);
BOOL __thiscall std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(std::vector<CIOSocket::CIOTimer>::const_iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right);
_DWORD *__thiscall sub_47D0A0(std::list<std::pair<std::string const ,int>>::const_iterator *this, _DWORD *a2, int a3);
int __thiscall std::vector<tagRECT>::capacity(std::vector<tagRECT> *this);
_DWORD *__thiscall sub_47D110(std::vector<tagRECT> *this, _DWORD *a2, int a3, int a4);
char __thiscall std::vector<tagRECT>::_Buy(std::vector<tagRECT> *this, unsigned int _Capacity);
tagRECT *__thiscall std::vector<tagRECT>::_Ufill(std::vector<tagRECT> *this, tagRECT *_Ptr, unsigned int _Count, const tagRECT *_Val); // idb
CMemory ***__thiscall sub_47D240(std::list<tagPARTICLES *> *this, int a2, tagPARTICLES *const *a3);
int sub_47D2C0();
std::list<std::pair<std::string const ,int>> *__thiscall std::list<std::pair<std::string const,int>>::_Tidy(std::list<std::pair<std::string const ,int>> *this);
unsigned int __thiscall sub_47D3D0(std::allocator<tagRECT> *this);
void __thiscall sub_47D3F0(int this, tagRECT *a2, unsigned int a3, LONG *a4);
CMemory **__stdcall sub_47D6D0(int a1);
CMemory **__thiscall std::list<tagSUBPARTICLES *>::_Buynode(std::list<tagPARTICLES *> *this, std::_List_nod<tagPARTICLES *>::_Node *_Next, std::_List_nod<tagPARTICLES *>::_Node *_Prev, tagPARTICLES *const *_Val);
_DWORD *__thiscall sub_47D760(_DWORD *this, unsigned int a2);
int __thiscall sub_47D7D0(int *this, _DWORD *a2);
std::vector<tagRECT>::iterator *__thiscall std::vector<tagRECT>::iterator::operator+=(std::vector<tagRECT>::iterator *this, int _Off); // idb
char *__cdecl sub_47D820(void *a1, int a2, int a3);
int __cdecl sub_47D860(int a1, int a2);
tagRECT *__cdecl std::fill<tagRECT *,tagRECT>(tagRECT *_First, tagRECT *_Last, const tagRECT *_Val);
_DWORD *__cdecl sub_47D8E0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
CMemory **__cdecl sub_47D920(int a1);
char *__cdecl std::_Uninit_fill_n<tagRECT *,unsigned int,tagRECT,std::allocator<tagRECT>>(char *a1, int a2, int a3);
int __cdecl std::_Destroy_range<tagRECT>(int a1, int a2);
char *__cdecl sub_47D9D0(int a1, int a2, void *a3);
LONG *__stdcall sub_47DA10(void *a1, int a2);
char *__cdecl std::_Uninit_copy<tagRECT *,tagRECT *,std::allocator<tagRECT>>(int a1, int a2, char *a3);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47DAA0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this);
int __thiscall sub_47DAD0(void *this);
int __thiscall sub_47DAF0(void *this);
int __thiscall sub_47DB10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47DBC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
_DWORD *__thiscall sub_47DC60(int *this);
int __stdcall sub_47DCC0(void *a1);
void __thiscall CRWLock::CRWLock(CRWLock *this);
void __thiscall CRWLock::~CRWLock(CRWLock *this);
void __thiscall CRWLock::Wait(CRWLock *this);
void __thiscall CRWLock::ReadLock(CRWLock *this);
void __thiscall CServer::CreateSocket(CServer *this);
LONG __thiscall sub_47E060(volatile LONG *this);
LONG __thiscall CRWLock::ReadUnlock(CRWLock *this);
void __thiscall CRWLock::WriteLock(CRWLock *this);
int __fastcall CRWLock::WriteUnlock(CRWLock *this);
void __thiscall CScreen::CScreen(CScreen *this);
void __thiscall CScreen::~CScreen(CScreen *this);
void __thiscall CScreen::Open(CScreen *this, int nWidth, int nHeight);
int CScreen::Add(CScreen *this, unsigned int color, const char *format, ...);
char *__thiscall CLink::Insert(CLink *this, CLink *pLink, char *a3);
void __thiscall CScreen::Empty(CScreen *this);
BOOL __thiscall CScreen::OnPaint(CScreen *this);
void __cdecl CServer::Start();
void __cdecl CServer::Add(CSocket *pSocket);
void __cdecl CServer::Remove(CSocket *pSocket);
int CServer::Size();
int CServer::MaxSize();
void __cdecl CServer::Stop();
void __cdecl CServer::SendAlive();
CSocket *__cdecl CServer::FindSocket(int nId);
void CServer::Relogin();
CIOSocket *__thiscall CServer::CreateSocket(CServer *this, int newSocket, sockaddr_in *addr);
int __thiscall sub_47E990(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *a2);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47E9F0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4);
unsigned int __thiscall sub_47EA90(int this);
_DWORD *__thiscall sub_47EAB0(int *this);
void *__thiscall sub_47EB10(_DWORD *this, void *a2, _DWORD *a3);
int __thiscall sub_47EB40(int *this);
int __stdcall sub_47EB60(void *a1);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47EBE0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this);
int *__thiscall sub_47EC10(int *this);
CIOServer *__thiscall sub_47EC80(CIOServer *this);
void *__thiscall sub_47ECA0(void *this, char a2);
void __thiscall sub_47ECD0(CWin32FileIO *this);
int __thiscall sub_47ECF0(void *this);
int __thiscall sub_47ED10(void *this);
int __thiscall sub_47ED30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
CInitSkill *__thiscall CInitSkill::CInitSkill(CInitSkill *this);
CInitSkill *__thiscall CInitSkill::`scalar deleting destructor'(CInitSkill *this, char a2);
void __thiscall CInitSkill::~CInitSkill(CInitSkill *this); // idb
int __thiscall CInitSkill::Set(CInitSkill *this, Symbol symbol, lisp::var value); // idb
int __thiscall CInitSkill::OnLoad(CInitSkill *this);
CPlayerSkill *__thiscall CPlayerSkill::CPlayerSkill(CPlayerSkill *this);
LONG __thiscall CPlayerSkill::~CPlayerSkill(CPlayerSkill *this); // idb
void __cdecl CPlayerSkill::Open();
void __cdecl CPlayerSkill::Close();
CPlayer *__thiscall CPlayerSkill::Init(CPlayerSkill *this, CPlayer *pOwner); // idb
void __thiscall CPlayerSkill::SetSkill(CPlayerSkill *this, int nSkill, int nLevel); // idb
CSkill *__thiscall CSkill::Copy(CSkill *this);
void __thiscall CSkill::Init(CSkill *this, int nSkill, int nLevel);
void __thiscall CPlayerSkill::LearnSkill(CPlayerSkill *this, int nSkill); // idb
int __thiscall CPlayerSkill::IsLearnSkill(CPlayerSkill *this, int nSkill, int nLevel);
void __thiscall CPlayerSkill::SkillUp(CPlayerSkill *this, signed int nSkill);
void __thiscall CPlayerSkill::CheatSkill(CPlayerSkill *this, int nSkill, int nLevel); // idb
void __thiscall CPlayerSkill::ExcuteSkill(CPlayerSkill *this, int nSkill, char *packet, char *end);
void __thiscall CPlayerSkill::ExcutePassiveSkill(CPlayerSkill *this);
int CPlayerSkill::ExcutePassiveSkill(CPlayerSkill *a1, int nSkill, ...); // idb
void __thiscall CPlayerSkill::ExcuteTransformSkill(CPlayerSkill *this, int nSkill, char *packet, char *end); // idb
int __thiscall CPlayerSkill::IsSpendSUPointSkill(CPlayerSkill *this, int nSkillNum); // idb
int __thiscall CPlayerSkill::LevelUpAutoLearnSkill(CPlayerSkill *this, int nLevel);
void __thiscall CPlayerSkill::ChangeOccupationAutoLearnSkill(CPlayerSkill *this); // idb
void __thiscall CPlayerSkill::Redistribute(CPlayerSkill *this, unsigned int nSkill);
void __thiscall CPlayerSkill::RedistributeAll(CPlayerSkill *this);
void __thiscall CPlayerSkill::RedistributeChild(CPlayerSkill *this, int nSkill); // idb
int __thiscall CPlayerSkill::PreSkill(CPlayerSkill *this, int nSkill, int nTargetId); // idb
void __thiscall CPlayerSkill::Redis2ndJobSkill(CPlayerSkill *this); // idb
void __thiscall CPlayerSkill::UpperChanceStone(CPlayerSkill *this);
CMonsterSkill *__thiscall CMonsterSkill::CMonsterSkill(CMonsterSkill *this);
int __thiscall CMonsterSkill::~CMonsterSkill(CMonsterSkill *this); // idb
int __thiscall sub_4808E0(void *this);
void CMonsterSkill::Open();
void __cdecl CMonsterSkill::Close();
int __thiscall CMonsterSkill::SetCurSkill(CMonsterSkill *this, int nSkill); // idb
int __thiscall CMonsterSkill::SetCurSkillDefault(CMonsterSkill *this);
void __thiscall CMonsterSkill::LoadSkill(CMonsterSkill *this, CMonster *pOwner);
int __thiscall CMonsterSkill::PreSkill(CMonsterSkill *this, CChar *pTarget); // idb
void __thiscall CMonsterSkill::ExcuteSkill(CMonsterSkill *this, CChar *pTarget);
void __thiscall CMonsterSkill::ResetCurSkill(CMonsterSkill *this);
void __thiscall CMonsterSkill::ExcuteSkillWithoutResetSkill(CMonsterSkill *this, CChar *pTarget); // idb
CSkill *__thiscall CSkill::CSkill(CSkill *this);
unsigned int __thiscall CSkill::GetDelay(CSkill *this, CPlayer *pOwner); // idb
BOOL __thiscall CSkill::CanLearn(CSkill *this, int nLevel, int dwSpecialty); // idb
BOOL __thiscall CSkill::CanExcute(CSkill *this, CPlayer *pOwner, CChar *pTarget); // idb
unsigned int __thiscall CSkill::ReviseTick(CSkill *this, CPlayer *pOwner); // idb
BOOL __stdcall CSkill::CanContiSkill(CSkill *this, CPlayer *pOwner, CChar *pChar);
BOOL __thiscall CSkill::CanSkillUp(CSkill *this, CPlayer *pOwner); // idb
int __thiscall CSkill::SpendMPRage(CSkill *this, CPlayer *pOwner); // idb
int __thiscall CSkill::Redistribute(CSkill *this, CPlayer *pOwner); // idb
int __thiscall CSkill::RedistributeByForce(CSkill *this, CPlayer *pOwner); // idb
void __thiscall CBoost::Excute(CBoost *this, CPlayer *pOwner, char *packet, char *end);
BOOL __thiscall CBehead::CanExcute(CBehead *this, CPlayer *pOwner, CChar *pTarget);
void __thiscall CBehead::Excute(CBehead *this, CPlayer *pOwner, char *packet, char *end); // idb
void __thiscall CUpWeapon::ExcutePassive(CUpWeapon *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CUpBow::ExcutePassive(CUpBow *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CUpConCen::ExcutePassive(CUpConCen *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CBlow::Excute(CBlow *a1, CPlayer *pOwner, char *packet, char *end); // idb
void __thiscall CBlow::AddMortal(CBlow *this, CPlayer *pOwner);
BOOL __thiscall CPullSwing::CanExcute(CPullSwing *this, CPlayer *pOwner, CChar *pTarget); // idb
void __thiscall CPullSwing::Excute(CPullSwing *this, CPlayer *pOwner, char *packet, char *end);
BOOL __thiscall CPullSwing::CanSkillUp(CPullSwing *this, CPlayer *pOwner); // idb
unsigned int __thiscall CThunder::GetDelay(CThunder *this, CPlayer *pOwner); // idb
int __thiscall CThunder::Redistribute(CThunder *this, CPlayer *pOwner); // idb
int __thiscall CShot::GetAttack(CShot *this, CPlayer *a2, int nBaseAttack); // idb
int __thiscall CShot::Redistribute(CShot *this, CPlayer *pOwner); // idb
int __thiscall CNegative::Apply(CNegative *this, struct CPlayer *pOwner, struct CChar *pChar, unsigned int dwReviseTick, int *nNetDamage, int *bFatal, int *nPalsyDamage);
int __thiscall CFlameArrow::Redistribute(CFlameArrow *this, CPlayer *pOwner);
unsigned int __thiscall CTranscendental::GetDelay(CTranscendental *this, CPlayer *pOwner); // idb
int __thiscall CTranscendental::Redistribute(CTranscendental *this, CPlayer *pOwner); // idb
int __thiscall CEdge::Apply(CEdge *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nNetDamage, int bFatal, unsigned int *nPalsyDamage); // idb
int __thiscall CUpperSmash::Apply(CUpperSmash *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, _DWORD *nNetDamage, int bFatal, unsigned int *nPalsyDamage); // idb
int __thiscall CUpperSmash::GetAttack(CUpperSmash *this, CPlayer *pOwner, int nBaseAttack); // idb
BOOL __thiscall CUpperSmash::CanSkillUp(CUpperSmash *this, CPlayer *pOwner); // idb
BOOL __thiscall CInfernal::CanExcute(void *this, CPlayer *pOwner, CChar *pTarget); // idb
int __thiscall CInfernal::GetAttack(CInfernal *this, CPlayer *pOwner, int nBaseAttack); // idb
void __thiscall CInfernal::SpendMPRage(CInfernal *this, CPlayer *pOwner);
BOOL __thiscall CInfernal::CanSkillUp(CInfernal *this, CPlayer *pOwner); // idb
BOOL __thiscall CShieldAttack::CanExcute(void *this, CPlayer *pOwner, CChar *pTarget); // idb
int __thiscall CShieldAttack::Apply(CShieldAttack *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int *nNetDamage, int *bFatal, unsigned int *nPalsyDamage); // idb
int __thiscall CShieldAttack::GetAttack(CShieldAttack *this, CPlayer *pOwner, int nBaseAttack); // idb
BOOL __thiscall CShieldAttack::CanSkillUp(CShieldAttack *this, CPlayer *pOwner); // idb
BOOL __thiscall CMock::CanExcute(CMock *this, CPlayer *pOwner, CChar *pTarget);
void __thiscall CMock::Excute(CMock *this, CPlayer *pOwner, char *packet, char *end);
int __thiscall CMock::Redistribute(CMock *this, CPlayer *pOwner);
int __thiscall sub_482990(_DWORD *this, _DWORD *a2);
int __thiscall CStunArrow::GetAttack(CStunArrow *this, CPlayer *pOwner, int nBaseAttack); // idb
int __thiscall CStunArrow::Apply(CStunArrow *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int *nNetDamage, int *bFatal, unsigned int *nPalsyDamage);
int __thiscall CExplosion::GetAttack(CExplosion *this, CPlayer *pOwner, int nBaseAttack);
int __thiscall CGetherShot::GetAttack(CGetherShot *this, int pOwner, int nBaseAttack); // idb
int __thiscall CGetherShot::GetHit(CGetherShot *this); // idb
BOOL __thiscall CGetherShot::CanSkillUp(CGetherShot *this, CPlayer *pOwner); // idb
int __thiscall CMysticArrow::GetAttack(CMysticArrow *this, CPlayer *pOwner, int nBaseAttack);
int __thiscall CMysticArrow::Apply(CMysticArrow *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int *nNetDamage, int *bFatal, unsigned int *nPalsyDamage);
BOOL __thiscall CMysticArrow::CanSkillUp(CMysticArrow *this, CPlayer *pOwner);
void __thiscall CMagic::Excute(CMagic *this, CPlayer *pOwner, char *packet, char *end);
int __thiscall CChar::GetMagic(CChar *this);
int __thiscall CMagic::GetPrtyMagic(CMagic *this, CPlayer *pOwner);
int __thiscall CMagic::GetDelay(CMagic *this, CPlayer *pOwner);
int __thiscall CMagic::Apply(CMagic *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic);
int __thiscall CMagic::ApplyPrtyIce(void *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic);
int __thiscall CMagic::GetResist(CMagic *this, CChar *pOwner, CChar *pTarget);
int __thiscall CSpiritBlast::GetMagic(CSpiritBlast *this, CPlayer *pOwner, int nBaseMagic);
BOOL __thiscall CSpiritBlast::CanSkillUp(CSpiritBlast *this, CPlayer *a2);
int __thiscall CFire::GetMagic(CFire *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CFire::Redistribute(CFire *this, CPlayer *a2);
int __thiscall CFireExplosion::GetMagic(CFireExplosion *this, CPlayer *pOwner, int nBaseMagic);
BOOL __thiscall CFireExplosion::CanSkillUp(CFireExplosion *this, CPlayer *pOwner);
int __thiscall CFireExplosion::Redistribute(_DWORD *this, CPlayer *pOwner); // idb
int __thiscall sub_4836E0(CFireEruption *this, CPlayer *a2, int a3); // idb
int __thiscall CIce::GetMagic(CIce *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CIce::Redistribute(CIce *this, CPlayer *pOwner); // idb
int __thiscall CIceLance::GetMagic(CIceLance *this, CPlayer *pOwner, int nBaseMagic);
BOOL __thiscall CIceLance::CanSkillUp(CIceLance *this, CPlayer *pOwner);
int __thiscall CLitning::GetMagic(CLitning *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CLitning::Redistribute(CLitning *, CPlayer *pOwner);
int __thiscall CShock::GetMagic(CShock *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CSpark::GetMagic(CSpark *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CSpark::Redistribute(CSpark *this, CPlayer *pOwner);
int __thiscall CCallLitning::GetMagic(CCallLitning *this, CPlayer *pOwner, int nBaseMagic);
BOOL __thiscall CCallLitning::CanSkillUp(CCallLitning *this, CPlayer *pOwner); // idb
int __thiscall CCallLitning::Redistribute(CCallLitning *this, CPlayer *a2);
int __thiscall CThunderLitning::GetMagic(CThunderLitning *this, CPlayer *pOwner, int nBaseMagic);
BOOL __thiscall CThunderLitning::CanSkillUp(CThunderLitning *this, CPlayer *pOwner); // idb
void __thiscall CMagicWide::Excute(CMagicWide *this, CPlayer *pOwner, char *packetRecv, char *endRecv);
void __thiscall CMagicWide::ExcuteM(CMagicWide *this, CMonster *pOwner, CChar *pChar);
void __thiscall CMagicWideSelf::Excute(CMagicWideSelf *this, CPlayer *pOwner, char *packetRecv, char *endRecv);
void __thiscall CMagicWideSelf::ExcuteM(CMagicWideSelf *this, CMonster *pOwner, CChar *pChar);
void __thiscall CMagicWidePos::Excute(CMagicWidePos *this, CPlayer *pOwner, char *packet, char *end);
int __thiscall CMagicWideIce::GetMagic(CMagicWideIce *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CMagicWideIce::Redistribute(CMagicWideIce *this, CPlayer *pOwner);
int __thiscall CMagicWideFire::GetMagic(CExplosiveBurst *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CMagicWideFire::Redistribute(CMagicWideFire *this, CPlayer *pOwner);
int __thiscall CExplosiveBurst::GetMagic(CExplosiveBurst *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CExplosiveBurst::Redistribute(CExplosiveBurst *this, CPlayer *pOwner);
void __thiscall CMesmerization::Apply(CMesmerization *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic);
BOOL __thiscall CMesmerization::CanSkillUp(CProtect *this, CPlayer *pOwner);
void __thiscall CMesmerization::SpendMPRage(CMesmerization *this, CPlayer *pOwner);
void __thiscall CSnowField::Apply(CSnowField *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic);
BOOL __thiscall CSnowField::CanSkillUp(CSnowField *this, CPlayer *pOwner); // idb
int __thiscall CChainLitning::GetMagic(CChainLitning *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CChainLitning::Redistribute(CChainLitning *this, CPlayer *pOwner);
int __thiscall CIceRequiem::GetMagic(CIceRequiem *this, CPlayer *pOwner, int nBaseMagic);
int __thiscall CIceRequiem::Redistribute(CIceRequiem *this, CPlayer *pOwner); // idb
void __thiscall CMagicConti::Excute(CMagicConti *this, CPlayer *pOwner, char *packet, char *end);
void __thiscall sub_4855D0(CMagicConti *this, CMonster *a2, tagPOINT ptPixel);
void __thiscall CMagicConti::ExcuteM(CMagicConti *this, CMonster *pOwner, tagPOINT ptPixel);
int __thiscall CThunderStorm::AddMagicMonster(CThunderStorm *this, CPlayer *pOwner, tagPOINT ptPixel);
CMonster *__thiscall CIceStorm::AddMagicMonster(CIceStorm *this, CPlayer *pOwner, tagPOINT ptPixel);
int __thiscall CFireRain::AddMagicMonster(CFireRain *this, CPlayer *pOwner, tagPOINT ptPixel);
int __thiscall CPoisonCloud::AddMagicMonster(CPoisonCloud *this, CPlayer *pOwner, tagPOINT ptPixel);
BOOL __thiscall CPoisonCloud::CanSkillUp(CPoisonCloud *this, CPlayer *pOwner);
int __thiscall CHealing::CanExcute(CHealing *this, CPlayer *pOwner, CChar *pTarget);
int __thiscall CHealing::Redistribute(CHealing *this, CPlayer *pOwner);
BOOL __thiscall CAuraDefense::CanExcute(CAuraDefense *this, CPlayer *a2, CChar *a3); // idb
void __thiscall CHealingAny::Excute(CHealingAny *this, CPlayer *pOwner, char *packet, char *end);
int __thiscall CHealingAny::GetIncHP(CHealingAny *this, CPlayer *pOwner, CChar *pChar);
int __thiscall CHealingAny::Redistribute(CHealingAny *this, CPlayer *pOwner); // idb
int __thiscall CHealingAnyPlus::GetIncHP(CHealingAnyPlus *this, CPlayer *pOwner, CChar *pChar);
int __thiscall CHealingAnyPlus::Redistribute(CHealingAnyPlus *this, CPlayer *pOwner);
int __thiscall CRestoration::GetIncHP(CRestoration *this, CPlayer *pOwner, CChar *pChar);
BOOL __thiscall CRestoration::CanSkillUp(CRestoration *this, CPlayer *pOwner);
int __thiscall CHealingAnyQuick::GetIncHP(int a1, CPlayer *pOwner, CChar *pChar);
int __thiscall CHealingAnyQuick::Redistribute(CHealingAnyQuick *this, CPlayer *pOwner);
int __thiscall CHealingInstance::GetIncHP(CHealingInstance *this, CPlayer *pOwner, CChar *pChar);
BOOL __thiscall CHealingInstance::CanSkillUp(CHealingInstance *this, CPlayer *pOwner);
int __stdcall CHealingGreatRe::GetIncHP(CHealingGreatRe *a1, CPlayer *pOwner, CChar *pChar);
void __thiscall CRest::ExcutePassive(CRest *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
BOOL __thiscall CRest::CanSkillUp(CRest *this, CPlayer *pOwner);
void __thiscall CUpFatal::ExcutePassive(CUpFatal *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
BOOL __thiscall CUpFatal::CanSkillUp(CUpFatal *this, CPlayer *pOwner); // idb
int __thiscall CUpFatal::Redistribute(CUpFatal *this, CPlayer *pOwner);
void __thiscall CUpFatal2::ExcutePassive(CUpFatal2 *a1, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CUpFatal3::ExcutePassive(CUpFatal3 *a1, CPlayer *pOwner, int nNewLevel, int bUpdate);
BOOL __thiscall CMeditation::CanExcute(CMeditation *this, CPlayer *pOwner, CChar *pChar);
void __thiscall CMeditation::Excute(CMeshSpeed *this, CPlayer *pOwner, char *packet, char *end);
void __thiscall CUpLitning::ExcutePassive(CUpLitning *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CUpIce::ExcutePassive(CUpIce *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CUpFire::ExcutePassive(CUpFire *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
void __thiscall CFatalChance::Excute(CFatalChance *this, CPlayer *pOwner, char *packet, char *end);
BOOL __thiscall CFatalChance::CanSkillUp(CFatalChance *this, CPlayer *pOwner); // idb
BOOL __thiscall CUpBlockShield::CanSkillUp(CUpBlockShield *this, CPlayer *pOwner); // idb
BOOL __thiscall CRevival::CanExcute(CRevival *this, CPlayer *pOwner, CChar *pTarget); // idb
void __thiscall CRevival::Excute(CRevival *this, CPlayer *pOwner, char *packet, char *end);
void __thiscall CRevival::Apply(CRevival *this, CPlayer *pOwner, CPlayer *pTarget);
int __thiscall CRevival::Redistribute(CRevival *this, CPlayer *pOwner, CChar *pTarget);
void __thiscall CResurrection::Apply(CResurrection *this, CPlayer *pOwner, CPlayer *pTarget);
void __thiscall CReincarnate::Apply(CResurrection *this, CPlayer *pOwner, CPlayer *pTarget);
void __thiscall CUpEvade::ExcutePassive(CUpEvade *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
int __thiscall CUpEvade::Redistribute(CUpEvade *this, CPlayer *pOwner);
void __thiscall CUpRFEvade::ExcutePassive(CUpRFEvade *this, CPlayer *pOwner, int nNewLevel, int bUpdate);
BOOL __thiscall CUpRFEvade::CanSkillUp(CUpRFEvade *this, CPlayer *pOwner);
void __thiscall CStoneShield::Excute(CStoneShield *this, CPlayer *pOwner, char *packet, char *end);
BOOL __thiscall CHaste::CanExcute(CHaste *this, CPlayer *pOwner, CChar *pTarget);
void __thiscall CHaste::Excute(CHaste *this, CPlayer *pOwner, char *packet, char *end);
void __thiscall CFrostBlast::Excute(CFrostBlast *this, CPlayer *pOwner, char *packet, char *end);
int __thiscall CFrostBlast::Redistribute(CFrostBlast *this, CPlayer *pOwner);
void __thiscall CHealingParty::Excute(CHealingParty *this, CPlayer *pOwner, char *packet, char *end);
int __thiscall CHealingParty::GetIncHP(CHealingParty *this, CPlayer *pOwner);
int __thiscall CHealingParty::Redistribute(CHealingParty *this, CPlayer *pOwner); // idb
int __thiscall CHealingPartyPlus::Redistribute(CHealingPartyPlus *this, CPlayer *pOwner);
int __thiscall CHealingPartyIns::GetIncHP(CHealingPartyIns *this, CPlayer *pOwner);
BOOL __thiscall CHealingPartyIns::CanSkillUp(CHealingPartyIns *this, CPlayer *pOwner);
int __thiscall CWildAccuracy::CanExcute(CWildAccuracy *this, CPlayer *pOwner, CChar *pChar);
void __thiscall CPoisonArrow::Excute(CPoisonArrow *a1, CPlayer *pOwner, char *packet, char *end);
int __thiscall CWildStrength::CanExcute(CWildStrength *this, CPlayer *pOwner, CChar *pChar);
BOOL __thiscall CProtect::CanExcute(CProtect *this, CPlayer *pOwner, CChar *pTarget);
void __thiscall CProtect::Excute(CProtect *a1, CPlayer *pOwner, char *packet, char *end);
BOOL __thiscall CMeshDefense::Apply(CMeshDefense *this, CPlayer *pOwner, CChar *pTarget, int *bSuccess);
BOOL __thiscall CMeshDefense::CanExcute(CMeshDefense *this, CPlayer *pOwner, CChar *pTarget);
void __thiscall CDestroySight::Apply(CDestroySight *this, CPlayer *pOwner, CChar *pTarget, int *bSuccess);
BOOL __thiscall CSilenceArrow::CanExcute(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall CSilenceArrow::Excute(_DWORD *this, CPlayer *pOwner, char *packet, char *end); // idb
void __thiscall CProtectRange::Excute(CProtectRange *this, CPlayer *a1, char *packet, char *end);
int __thiscall sub_488010(_DWORD *this, _DWORD *a2, int a3, int a4);
int __thiscall CUpReinforceVitality::ExcutePassiveV(_DWORD *this, int a2, int a3);
BOOL __thiscall sub_488160(_DWORD *this, int a2);
void __thiscall CRainforceDefense::Excute(_DWORD *this, CPlayer *a2, int a3, int a4); // idb
BOOL __thiscall sub_488260(_DWORD *this, int a2);
BOOL __thiscall sub_4882D0(_DWORD *this, int a2);
void __thiscall CVitalityDrain::Excute(_DWORD *this, CPlayer *a2, char *packet, char *end); // idb
BOOL __thiscall CVitalityDrain::CanSkillUp(_DWORD *this, int a2);
void __thiscall CSuffering::Excute_0(_DWORD *this, CPlayer *pOwner, char *packet, char *end); // idb
BOOL __thiscall sub_4887B0(_DWORD *this, int a2);
void __thiscall CInchantWeapon::Excute(CInchantWeapon *a1, CPlayer *pOwner, char *packet, char *end);
BOOL __thiscall CSuffering::Excute(_DWORD *this, int a2);
void __thiscall CAuraDefense::Excute(_DWORD *this, int a1, void *Src, int a4);
BOOL __thiscall CDash::CanSkillUp(_DWORD *this, int a2);
void __thiscall sub_488B70(_DWORD *a1, int a5, void *a6, int a7);
void __thiscall sub_488CF0(_DWORD *a1, CPlayer *a5, char *packet, char *end); // idb
BOOL __thiscall CSacrifice::CanSkillUp(_DWORD *this, int a2);
void __thiscall sub_488E90(_DWORD *a1, CPlayer *a5, char *packet, char *end); // idb
BOOL __thiscall CDarknessVision::CanSkillUp_0(_DWORD *this, int a2);
void __thiscall CPurge::Excute(CPurge *this, CPlayer *pOwner, char *packet, char *end); // idb
void __thiscall CDoTele::ExcuteM(CDoTele *this, CMonster *pOwner, CChar *pChar, char *a7);
BOOL __thiscall sub_489320(void *this, _DWORD *a2, _DWORD *a3);
int __thiscall sub_4893C0(_DWORD *this, CPlayer *a2);
void __thiscall CDarknessVision::CanSkillUp(_DWORD *this, int a5, void *Src, int a7);
BOOL __thiscall sub_489550(void *this, _DWORD *a2, int a3);
int __stdcall CChangeVitality::GetSpendMP(CPlayer *a1);
void __thiscall sub_4895E0(_DWORD *this, _DWORD *a2, int a3, int a4);
void __thiscall sub_4896C0(_DWORD *this, int *a2, int a3, int a4);
BOOL __thiscall sub_4897F0(void *this, _DWORD *a2, _DWORD *a3);
void __thiscall CSilenceShot::Excute(_DWORD *this, int a1, void *Src, int a4);
BOOL __thiscall CSkillBuff::CanExcute_0(void *this, _DWORD *a2, int a3);
int __thiscall CSkillBuff::PreExcute_0(_DWORD *a1, int a5, int a6);
void __thiscall CSkillBuff::Excute(_DWORD *this, int a1, void *Src, int a4);
void __thiscall sub_489CE0(_DWORD *this, _DWORD *a2, int a3);
int __thiscall CStrenUpStr::Apply(_DWORD *this, int a2, int a3, int a4);
int __thiscall CSkillBuff::CanExcute(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall CStrenUpFatal::CanExcute(void *this, _DWORD *a2, int a3);
int __thiscall CSkillBuff::PreExcute(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall sub_489EA0(_DWORD *this, int a2);
int __thiscall CStrenUpInt::Apply_0(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall CResistPalsy::CanSkillUp(_DWORD *this, int a2);
int __thiscall sub_489F60(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall CCloudSight::CanExcute_0(void *this, _DWORD *a2, int a3);
int __thiscall CMShock::ExcuteM(CMShock *this, CMonster *pOwner, CChar *pChar, _DWORD *a4);
BOOL __thiscall sub_48A050(void *this, _DWORD *a2, int a3);
int __thiscall sub_48A070(_DWORD *this, int a2, int a3, _DWORD *a4);
BOOL __thiscall sub_48A0D0(void *this, _DWORD *a2, int a3);
int __thiscall CMeshChance::Apply(_DWORD *this, int a2, _DWORD *a3, _DWORD *a4);
BOOL __thiscall CMeshDefense::CanSkillUp_0(_DWORD *this, int a2);
int __thiscall sub_48A1E0(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall CMeshHth::Apply(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall CStrenUpInt::Apply(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall sub_48A300(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall CCloudSight::CanExcute(_DWORD *this, int a2, int a3, _DWORD *a4);
BOOL __thiscall CMeshWis::CanSkillUp(_DWORD *this, int a2);
int __thiscall CMeshDefense::Apply(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall CVanishConfi::Apply(void *this, int a2, int a3, _DWORD *a4);
int __thiscall CDestroySight::Apply(void *this, int a2, int a3, _DWORD *a4);
void __thiscall CBenefitAblation::Apply(void *this, int a2, _DWORD *a3, _DWORD *a4);
BOOL __thiscall CMeshDefense::CanSkillUp(void *this, _DWORD *a2, int a3);
void __thiscall CSkillSelfBuff::Excute(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_48A680(_DWORD *this, int a2);
BOOL __thiscall CShootingFire::GetMagicM(CShootingFire *this, CMonster *pOwner);
int __thiscall sub_48A770(_DWORD *this, int a2);
int __thiscall CResistIce::Apply(_DWORD *this, int a2);
int __thiscall CMSiegeGunBallExplosion::GetMagicM(CMSiegeGunBallExplosion *this, CMonster *pOwner); // idb
int __thiscall CMSiegeGunBallExplosion::ExcuteM(CMSiegeGunBallExplosion *this, CMonster *pOwner, CChar *pChar);
int __thiscall CResistPalsy::Apply(_DWORD *this, int a2);
void __thiscall CEmergencyEscape::Apply(void *this, _DWORD *a2);
void __thiscall CChant::Excute(_DWORD *this, _DWORD *a2, int a3, int a4);
CBuffMoveSpeed *__thiscall CChantProtect::CreateBuff(_DWORD *this, int a2);
bool __thiscall std::_Tree<std::_Tmap_traits<CParty *,int,std::less<CParty *>,std::allocator<std::pair<CParty * const,int>>,0>>::find(int this, int a2);
CBuffMoveSpeed *__thiscall CChantHealing::CreateBuff(_DWORD *this, int a2);
CSkill *__thiscall CMemoryPool<CSkill>::Alloc(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall CChantDefLightning::CreateBuff_0(_DWORD *this, int a2);
BOOL __thiscall CChantDefFire::CanSkillUp(_DWORD *this, int a2);
int __thiscall std::_Tree<std::_Tmap_traits<CPlayer *,int,std::less<CPlayer *>,std::allocator<std::pair<CPlayer * const,int>>,0>>::lower_bound(int this, int a2);
CBuffMoveSpeed *__thiscall std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::_Tidy(std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,CSkill *> >,0> > *this, int a2);
CBuffMoveSpeed *__thiscall sub_48AD10(_DWORD *this, int a2);
BOOL __thiscall CChantAccuracy::CanSkillUp(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48ADA0(_DWORD *this, int a2);
int __stdcall CTLitningBlast::GetMagic(int a1, int a2);
BOOL __thiscall std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::erase(_DWORD *this, _DWORD *a2, int a3);
int __stdcall sub_48AE50(int a1, int a2);
int __thiscall sub_48AE70(void *this, int a2, int a3, int a4, int a5, int a6);
void __thiscall sub_48AED0(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3, int a4);
int __stdcall sub_48AF60(int a1, int a2);
int __thiscall CTPhoenix::SpendMPRage(_DWORD *this, int a2);
int __stdcall sub_48AFC0(int a1, int a2);
int __thiscall CChantDefLightning::CreateBuff(void *this, CPlayer *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
void __thiscall CThunder::GetAttack(CThunder *this, CPlayer *pOwner, int nBaseAttack, int a4);
int __thiscall CHealingPartyPlus::GetSkillAddValue(CShootingFire *this, int a2, int a3);
BOOL __thiscall CMock::GetHostility(CMock *this, _DWORD *a2, int a3);
void __thiscall CTShadowFang::Excute(_DWORD *this, int a2, void *Src, int a4);
void __thiscall CTDiamondClow::Excute_0(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3, int a4);
CInfernal *__thiscall CInfernal::CInfernal(CInfernal *this, _DWORD *a2);
int __thiscall CShieldAttack::GetSpendMP(CManaBurn *this, CPlayer *pOwner); // idb
int __thiscall CShot::GetDelay(CStunArrow *this, CPlayer *pOwner);
CExplosion *__thiscall CExplosion::CExplosion(CExplosion *this, int a2, int a3);
int __thiscall CExplosion::GetSpendMP(CExplosion *this, CPlayer *pOwner); // idb
void __thiscall CGetherShot::GetFatalRate(CGetherShot *this, int a2);
LONG __thiscall CTDiamondClow::Excute(_DWORD *this, CIOCriticalSection *a2, int a3);
void __thiscall CDoTele::ExcuteM(_DWORD *this, int *a2, int a3);
void __thiscall CEdge::GetSpendMP(CHealingAnyPlus *this, CPlayer *a5, int a6);
int __thiscall sub_48BC80(void *this, int a2, int a3);
CMeditation *__thiscall CMeditation::CMeditation(CMeditation *this, int a2, int a3);
int __stdcall sub_48BCE0(int a1);
void __thiscall CSkill_MonsterMagic::ExcuteM(_DWORD *this, CIOCriticalSection *a2, int a3);
int __stdcall sub_48BF10(_DWORD *a1);
CHealingPartyIns *__thiscall CHealingPartyIns::CHealingPartyIns(CHealingPartyIns *this, int a2, int a3);
int __thiscall CMPoisonCloud::ApplyM(void *this, int a2, int a3);
CPoisonArrow *__thiscall CPoisonArrow::CPoisonArrow(CPoisonArrow *this, _DWORD *a2);
CSilenceArrow *__thiscall CSilenceArrow::CSilenceArrow(CSilenceArrow *this, _DWORD *a2);
void __thiscall CMSpark::ExcuteM_0(_DWORD *this, int a2, CPlayer *a3);
int __stdcall CMFireRain::GetMagicM(_DWORD *a1);
void __thiscall CDestructionFlame::ExcuteM(_DWORD *this, int a2, CPlayer *a3);
int __stdcall CMSpark::ExcuteM(_DWORD *a1);
void __thiscall CVanishConfi::CVanishConfi(CVanishConfi *this, int a2, CPlayer *a3);
CChantHealing *__thiscall CChantHealing::CChantHealing(CChantHealing *this, _DWORD *a2);
int __thiscall sub_48C880(_DWORD *this, _DWORD *a2, int a3);
void __thiscall CTGroundSplinter::CTGroundSplinter(CTGroundSplinter *this, CIOCriticalSection *a2, _DWORD *a3);
CMShock *__thiscall CMShock::CMShock(CMShock *this, _DWORD *a2);
int __thiscall CDoAscension::GetAddValueType(CDoAscension *this, int a2, int a3);
void __thiscall sub_48CAD0(void *this, int a2, int a3);
void __thiscall sub_48CB10(_DWORD *this, CIOCriticalSection *a2, CPlayer *a3);
int __stdcall sub_48CDA0(int a1);
int __stdcall sub_48CDC0(int a1);
CIOCriticalSection *__stdcall CPurgatorialFlame::AddMagicMonster_0(int a1, int a2, int a3);
int __stdcall sub_48CE20(int a1);
void __stdcall CDemonBeastSummon::ExcuteM(int a1, int pChar);
int __stdcall sub_48CEB0(_DWORD *a1);
int __stdcall sub_48CEE0(int a1);
void __thiscall CMSiegeGunBallExplosion::CMSiegeGunBallExplosion(CMSiegeGunBallExplosion *this, CIOCriticalSection *a2, int nY);
BOOL __stdcall sub_48D100(_QWORD *a1, int a2);
int __thiscall CReturn::Excute(int *this, _DWORD *a2, int a3, int a4);
BOOL __thiscall CPurgatorialFlame::AddMagicMonster(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3);
void __thiscall sub_48D1D0(_DWORD *this, int a2, CPlayer *a3);
CIOCriticalSection *__stdcall CMFujiExplosion::AddMagicMonsterM(_DWORD *a1, int a2, int a3);
int __stdcall CMMagicFuJiExplosion::GetMagicM(int a1);
void __thiscall CMMagicFuJiExplosion::ExcuteM(_DWORD *this, CIOCriticalSection *a2, int a3);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_48D680(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this);
int __thiscall sub_48D6B0(void *this);
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_48D6D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, const std::pair<int const ,CGame_Character::TargetInfo> *a3);
_DWORD *CMemoryPool_CSkill::_Alloc();
LONG __cdecl sub_48D900(int a1);
int __thiscall sub_48D930(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
BOOL __stdcall sub_48D9E0(_DWORD *a1, _DWORD *a2);
_DWORD *__thiscall sub_48DA00(_DWORD *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_48DA20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, std::vector<CIOSocket::CIOTimer>::const_iterator a4);
_DWORD *__thiscall sub_48DAC0(int *this);
int __thiscall sub_48DB20(int *this);
std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<char const *,int,iless,std::allocator<std::pair<char const * const,int>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Rarg, const std::pair<int const ,CGame_Character::TargetInfo> *_Val, char _Carg);
int __stdcall sub_48DC30(void *a1);
_DWORD *__thiscall sub_48DCB0(_DWORD *this);
_DWORD *__thiscall sub_48DCD0(_DWORD *this);
_DWORD *__thiscall sub_48DCF0(_DWORD *this);
_DWORD *__thiscall sub_48DD10(_DWORD *this);
_DWORD *__thiscall sub_48DD30(_DWORD *this);
_DWORD *__thiscall sub_48DD50(_DWORD *this);
_DWORD *__thiscall sub_48DD70(_DWORD *this);
_DWORD *__thiscall sub_48DD90(_DWORD *this);
int __thiscall sub_48DDB0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DDD0(_DWORD *this);
int __thiscall sub_48DDF0(_DWORD *this, int a2, int a3);
int __thiscall sub_48DE10(_DWORD *this);
_DWORD *__thiscall sub_48DE30(_DWORD *this);
int sub_48DE50();
int __thiscall sub_48DE60(_DWORD *this, int a2);
int __thiscall sub_48DE80(_DWORD *this, int a2);
int __thiscall sub_48DEA0(_DWORD *this);
_DWORD *__thiscall sub_48DEC0(_DWORD *this);
int __thiscall sub_48DEE0(_DWORD *this);
int __thiscall sub_48DF00(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DF20(_DWORD *this);
int __thiscall sub_48DF40(_DWORD *this);
int __thiscall sub_48DF60(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DF80(_DWORD *this);
int __stdcall sub_48DFA0(int a1, int a2);
int __thiscall sub_48DFB0(_DWORD *this);
int __thiscall sub_48DFD0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DFF0(_DWORD *this);
int __thiscall sub_48E010(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_48E030(_DWORD *this);
int __thiscall CTranscendental::GetAttack_0(CTranscendental *this, int a2, int a3); // idb
int sub_48E070();
_DWORD *__thiscall sub_48E080(_DWORD *this);
int __thiscall RandomSomething(CCellMap *this, unsigned int a2, int a3);
int sub_48E0E0();
int __thiscall sub_48E0F0(_DWORD *this);
_DWORD *__thiscall sub_48E110(_DWORD *this);
int __thiscall sub_48E130(_DWORD *this, int a2, int a3);
int __thiscall sub_48E150(_DWORD *this);
_DWORD *__thiscall sub_48E170(_DWORD *this);
int __thiscall CFatalWound::GetAttack(CFatalWound *this, int a2, int a3); // idb
_DWORD *__thiscall sub_48E1D0(_DWORD *this);
_DWORD *__thiscall sub_48E1F0(_DWORD *this);
_DWORD *__thiscall sub_48E210(_DWORD *this);
_DWORD *__thiscall sub_48E230(_DWORD *this);
_DWORD *__thiscall sub_48E250(_DWORD *this);
int sub_48E270();
CMock *__thiscall CMock::CMock(CMock *this, int a2);
_DWORD *__thiscall sub_48E2B0(_DWORD *this);
int __thiscall sub_48E2D0(_DWORD *this, int a2);
int __thiscall sub_48E2F0(_DWORD *this);
int __thiscall sub_48E310(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_48E330(_DWORD *this);
_DWORD *__thiscall sub_48E350(_DWORD *this);
_DWORD *__thiscall sub_48E370(_DWORD *this);
_DWORD *__thiscall sub_48E390(_DWORD *this);
_DWORD *__thiscall sub_48E3B0(_DWORD *this);
_DWORD *__thiscall sub_48E3D0(_DWORD *this);
_DWORD *__thiscall sub_48E3F0(_DWORD *this);
int __thiscall CTranscendental::GetAttack(CTranscendental *this, int a2); // idb
_DWORD *__thiscall sub_48E440(_DWORD *this);
_DWORD *__thiscall sub_48E460(_DWORD *this);
int __thiscall sub_48E480(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E4A0(_DWORD *this);
_DWORD *__thiscall sub_48E4C0(_DWORD *this);
int __thiscall sub_48E4E0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E500(_DWORD *this);
_DWORD *__thiscall sub_48E520(_DWORD *this);
_DWORD *__thiscall sub_48E540(_DWORD *this);
_DWORD *__thiscall sub_48E560(_DWORD *this);
_DWORD *__thiscall sub_48E580(_DWORD *this);
// int sub_48E5A0();
int sub_48E5B0();
_DWORD *__thiscall sub_48E5C0(_DWORD *this);
_DWORD *__thiscall sub_48E5E0(_DWORD *this);
_DWORD *__thiscall sub_48E600(_DWORD *this);
_DWORD *__thiscall sub_48E620(_DWORD *this);
int sub_48E640();
_DWORD *__thiscall sub_48E650(_DWORD *this);
int sub_48E670();
_DWORD *__thiscall sub_48E680(_DWORD *this);
_DWORD *__thiscall sub_48E6A0(_DWORD *this);
_DWORD *__thiscall sub_48E6C0(_DWORD *this);
_DWORD *__thiscall sub_48E6E0(_DWORD *this);
int __stdcall sub_48E700(int a1, int a2, int a3);
_DWORD *__thiscall sub_48E710(_DWORD *this);
_DWORD *__thiscall sub_48E730(_DWORD *this);
_DWORD *__thiscall sub_48E750(_DWORD *this);
int __thiscall sub_48E770(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E790(_DWORD *this);
int __thiscall sub_48E7B0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E7D0(_DWORD *this);
int __thiscall sub_48E7F0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E810(_DWORD *this);
int __thiscall sub_48E830(_DWORD *this);
_DWORD *__thiscall sub_48E850(_DWORD *this);
int __thiscall sub_48E870(_DWORD *this);
_DWORD *__thiscall sub_48E890(_DWORD *this);
_DWORD *__thiscall sub_48E8B0(_DWORD *this);
int __thiscall sub_48E8D0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E8F0(_DWORD *this);
_DWORD *__thiscall sub_48E910(_DWORD *this);
_DWORD *__thiscall sub_48E930(_DWORD *this);
_DWORD *__thiscall sub_48E950(_DWORD *this);
_DWORD *__thiscall sub_48E970(_DWORD *this);
_DWORD *__thiscall sub_48E990(_DWORD *this);
_DWORD *__thiscall sub_48E9B0(_DWORD *this);
_DWORD *__thiscall sub_48E9D0(_DWORD *this);
_DWORD *__thiscall sub_48E9F0(_DWORD *this);
_DWORD *__thiscall sub_48EA10(_DWORD *this);
_DWORD *__thiscall sub_48EA30(_DWORD *this);
_DWORD *__thiscall sub_48EA50(_DWORD *this);
_DWORD *__thiscall sub_48EA70(_DWORD *this);
_DWORD *__thiscall sub_48EA90(_DWORD *this);
int __thiscall sub_48EAB0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EAD0(_DWORD *this);
int __thiscall sub_48EAF0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EB10(_DWORD *this);
_DWORD *__thiscall sub_48EB30(_DWORD *this);
_DWORD *__thiscall sub_48EB50(_DWORD *this);
_DWORD *__thiscall sub_48EB70(_DWORD *this);
_DWORD *__thiscall sub_48EB90(_DWORD *this);
_DWORD *__thiscall sub_48EBB0(_DWORD *this);
int sub_48EBD0();
_DWORD *__thiscall sub_48EBE0(_DWORD *this);
_DWORD *__thiscall sub_48EC00(_DWORD *this);
int __thiscall sub_48EC20(_DWORD *this, int a2);
int sub_48EC40();
_DWORD *__thiscall sub_48EC50(_DWORD *this);
_DWORD *__thiscall sub_48EC70(_DWORD *this);
_DWORD *__thiscall sub_48EC90(_DWORD *this);
_DWORD *__thiscall sub_48ECB0(_DWORD *this);
int __thiscall sub_48ECD0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48ECF0(_DWORD *this);
_DWORD *__thiscall sub_48ED10(_DWORD *this);
_DWORD *__thiscall sub_48ED30(_DWORD *this);
_DWORD *__thiscall sub_48ED50(_DWORD *this);
BOOL __thiscall CUpReinforceVitality::CanLearn(_DWORD *this, int a2, unsigned int a3);
_DWORD *__thiscall sub_48EDB0(_DWORD *this);
_DWORD *__thiscall sub_48EDD0(_DWORD *this);
_DWORD *__thiscall sub_48EDF0(_DWORD *this);
int __thiscall sub_48EE10(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EE30(_DWORD *this);
_DWORD *__thiscall sub_48EE50(_DWORD *this);
int __thiscall sub_48EE70(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EE90(_DWORD *this);
int __thiscall sub_48EEB0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EED0(_DWORD *this);
_DWORD *__thiscall sub_48EEF0(_DWORD *this);
_DWORD *__thiscall sub_48EF10(_DWORD *this);
int __thiscall sub_48EF30(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EF50(_DWORD *this);
_DWORD *__thiscall sub_48EF70(_DWORD *this);
_DWORD *__thiscall sub_48EF90(_DWORD *this);
int __thiscall sub_48EFB0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EFD0(_DWORD *this);
_DWORD *__thiscall sub_48EFF0(_DWORD *this);
_DWORD *__thiscall sub_48F010(_DWORD *this);
_DWORD *__thiscall sub_48F030(_DWORD *this);
int __thiscall sub_48F050(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F070(_DWORD *this);
_DWORD *__thiscall sub_48F090(_DWORD *this);
int __thiscall sub_48F0B0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F0D0(_DWORD *this);
int __thiscall sub_48F0F0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F110(_DWORD *this);
int __thiscall sub_48F130(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F150(_DWORD *this);
int __thiscall sub_48F170(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F190(_DWORD *this);
int __thiscall sub_48F1B0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F1D0(_DWORD *this);
int __stdcall sub_48F1F0(int a1);
_DWORD *__thiscall sub_48F200(_DWORD *this);
_DWORD *__thiscall sub_48F220(_DWORD *this);
_DWORD *__thiscall sub_48F240(_DWORD *this);
_DWORD *__thiscall sub_48F260(_DWORD *this);
_DWORD *__thiscall sub_48F280(_DWORD *this);
_DWORD *__thiscall sub_48F2A0(_DWORD *this);
_DWORD *__thiscall sub_48F2C0(_DWORD *this);
_DWORD *__thiscall sub_48F2E0(_DWORD *this);
_DWORD *__thiscall sub_48F300(_DWORD *this);
_DWORD *__thiscall sub_48F320(_DWORD *this);
_DWORD *__thiscall sub_48F340(_DWORD *this);
_DWORD *__thiscall sub_48F360(_DWORD *this);
_DWORD *__thiscall sub_48F380(_DWORD *this);
int __thiscall sub_48F3A0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F3C0(_DWORD *this);
_DWORD *__thiscall sub_48F3E0(_DWORD *this);
_DWORD *__thiscall sub_48F400(_DWORD *this);
_DWORD *__thiscall sub_48F420(_DWORD *this);
int __thiscall sub_48F440(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F460(_DWORD *this);
_DWORD *__thiscall sub_48F480(_DWORD *this);
_DWORD *__thiscall sub_48F4A0(_DWORD *this);
_DWORD *__thiscall sub_48F4C0(_DWORD *this);
_DWORD *__thiscall sub_48F4E0(_DWORD *this);
_DWORD *__thiscall sub_48F500(_DWORD *this);
_DWORD *__thiscall sub_48F520(_DWORD *this);
_DWORD *__thiscall sub_48F540(_DWORD *this);
_DWORD *__thiscall sub_48F560(_DWORD *this);
_DWORD *__thiscall sub_48F580(_DWORD *this);
_DWORD *__thiscall sub_48F5A0(_DWORD *this);
_DWORD *__thiscall sub_48F5C0(_DWORD *this);
_DWORD *__thiscall sub_48F5E0(_DWORD *this);
_DWORD *__thiscall sub_48F600(_DWORD *this);
_DWORD *__thiscall sub_48F620(_DWORD *this);
_DWORD *__thiscall sub_48F640(_DWORD *this);
_DWORD *__thiscall sub_48F660(_DWORD *this);
_DWORD *__thiscall sub_48F680(_DWORD *this);
_DWORD *__thiscall sub_48F6A0(_DWORD *this);
_DWORD *__thiscall sub_48F6C0(_DWORD *this);
int sub_48F6E0();
_DWORD *__thiscall sub_48F6F0(_DWORD *this);
int sub_48F710();
_DWORD *__thiscall sub_48F720(_DWORD *this);
_DWORD *__thiscall sub_48F740(_DWORD *this);
int __thiscall sub_48F760(_DWORD *this);
int __thiscall sub_48F780(_DWORD *this);
int __thiscall sub_48F7A0(_DWORD *this);
_DWORD *__thiscall sub_48F7C0(_DWORD *this);
_DWORD *__thiscall sub_48F7E0(_DWORD *this);
_DWORD *__thiscall sub_48F800(_DWORD *this);
_DWORD *__thiscall sub_48F820(_DWORD *this);
_DWORD *__thiscall sub_48F840(_DWORD *this);
int sub_48F860();
_DWORD *__thiscall sub_48F870(_DWORD *this);
_DWORD *__thiscall sub_48F890(_DWORD *this);
BOOL __thiscall CSkill_MonsterMagic::CanExcuteM(_DWORD *this, int a2, int a3);
int sub_48F900();
_DWORD *__thiscall sub_48F910(_DWORD *this);
int sub_48F930();
_DWORD *__thiscall sub_48F940(_DWORD *this);
int sub_48F960();
_DWORD *__thiscall sub_48F970(_DWORD *this);
_DWORD *__thiscall sub_48F990(_DWORD *this);
_DWORD *__thiscall sub_48F9B0(_DWORD *this);
_DWORD *__thiscall sub_48F9D0(_DWORD *this);
int sub_48F9F0();
_DWORD *__thiscall sub_48FA00(_DWORD *this);
int sub_48FA20();
_DWORD *__thiscall sub_48FA30(_DWORD *this);
int sub_48FA50();
int sub_48FA60();
_DWORD *__thiscall sub_48FA70(_DWORD *this);
_DWORD *__thiscall sub_48FA90(_DWORD *this);
_DWORD *__thiscall sub_48FAB0(_DWORD *this);
int sub_48FAD0();
_DWORD *__thiscall sub_48FAF0(_DWORD *this);
_DWORD *__thiscall sub_48FB10(_DWORD *this);
_DWORD *__thiscall sub_48FB30(_DWORD *this);
_DWORD *__thiscall sub_48FB50(_DWORD *this);
_DWORD *__thiscall sub_48FB70(_DWORD *this);
_DWORD *__thiscall sub_48FB90(_DWORD *this);
_DWORD *__thiscall sub_48FBB0(_DWORD *this);
_DWORD *__thiscall sub_48FBD0(_DWORD *this);
_DWORD *__thiscall sub_48FBF0(_DWORD *this);
_DWORD *__thiscall sub_48FC20(_DWORD *this);
int sub_48FC40();
int sub_48FC50();
_DWORD *__thiscall sub_48FC60(_DWORD *this);
_DWORD *__thiscall sub_48FC90(_DWORD *this);
_DWORD *__thiscall sub_48FCB0(_DWORD *this);
int sub_48FCD0();
CMMagicFuJiExplosion *__thiscall CMMagicFuJiExplosion::CMMagicFuJiExplosion(CMMagicFuJiExplosion *this);
int sub_48FD10();
_DWORD *__thiscall sub_48FD20(_DWORD *this, int a2, int a3);
std::codecvt_base *__thiscall CCellMap::_CCellMap_0(std::codecvt_base **this);
std::codecvt_base *__thiscall std::codecvt_base::`vector deleting destructor'(std::codecvt_base *this, unsigned int a2);
CCompleteFire *__thiscall CCompleteFire::CCompleteFire(CCompleteFire *this, char a2);
int __thiscall CCellMap::AllocTile(_DWORD *this);
int __thiscall CMFireFlowerExplosion::CMFireFlowerExplosion(_DWORD *this, FILE *Stream);
CRWLock *__thiscall CCellMap::ReadLock(_DWORD *this, int a2);
int __thiscall CCellMap::_CCellMap(_DWORD *this, _DWORD *a2, int *a3);
int __thiscall sub_490220(_DWORD *a1, _DWORD *a2);
CRWLock *__thiscall CCellMap::ReadUnlock_0(_DWORD *this, int a2, int a3);
int __thiscall CCellMap::GetRWLockRect_0(_DWORD *this, _DWORD *a2, int *a3);
CRWLock *__thiscall sub_4905E0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __thiscall CSellMap::SendDelete(CCellMap *a1, int a2, _DWORD *a3, int a4);
void __thiscall CCellMap::GetRWLockRect(CCellMap *a1, int a2, _DWORD *a3, int a4);
void __thiscall CSellMap::SendCreate(CCellMap *a1, int a2, _DWORD *a3, int a4);
void __thiscall CSellMap::SendPacket(CCellMap *this, _DWORD *src, int a3);
void __thiscall CCellMap::GetPlayerList(CCellMap *this, const tagPOINT *ptT, struct CBaseList **ppList);
void __thiscall CCellMap::GetPlayerMonsterList(CCellMap *this, const tagPOINT *ptT, struct CBaseList **ppList);
int __thiscall CCellMap::GetClosestPlayer(CCellMap *this, const tagPOINT *ptT, CPlayer **ppPlayer);
int __thiscall CCellMap::GetMonster(CCellMap *this, const tagPOINT *ptT, int nMonIndex, CMonster **ppMonster);
CSMap *__thiscall CSMap::CSMap(CSMap *this);
void __thiscall CSMap::~CSMap(CSMap *this);
CCellMap *__thiscall CCellMap::`scalar deleting destructor'(CCellMap *, char a2);
int __cdecl CSMap::LoadSMap(CInitMap *a1);
_DWORD *__thiscall CSMap::`scalar deleting destructor'(_DWORD *this, char a2);
void __cdecl CSMap::FreeSMap();
CSMap *__cdecl CSMap::FindSMap(int nMap);
int __thiscall CSMap::ReadLock(CSMap *this, const tagRECT *rtTile, const tagRECT *rtMap); // idb
int __thiscall CSMap::ReadUnlock(CSMap *this, const tagRECT *rtTile, const tagRECT *rtMap);
int __thiscall CSMap::ReadWriteLock(CSMap *this, const tagRECT *rtRTile, const tagRECT *rtWTile, const tagRECT *rtMap);
void __thiscall CSMap::ReadWriteUnlock(CSMap *this, const tagRECT *rtRTile, const tagRECT *rtWTile, const tagRECT *rtMap);
int __thiscall CSMap::SetOnMap(CSMap *this, CBase *base, const tagPOINT *ptT);
int __thiscall CSMap::RemoveFromMap(CSMap *this, CBase *pBase, tagPOINT *ptT);
int __thiscall CSMap::MovePlayer(CSMap *this, CPlayer *pPlayer, int dx, int dy, int dz, int bEndPos, int bDash);
void __thiscall CSMap::GetRect(CSMap *this, const struct tagPOINT *pt, struct tagRECT *rt, int nRadius);
void __thiscall CSMap::GetCellMapRect(CSMap *this, const tagRECT *rtTile, tagRECT *rtMap);
CCellMap *__thiscall CSMap::GetCellMap(CSMap *this, const tagPOINT *ptT); // idb
int __thiscall CSMap::MoveMonster(CSMap *this, CMonster *pMonster, int _dx, int _dy, int bEndPos, int bRun);
int __thiscall CSMap::SendCreateInSight(CSMap *this, CPlayer *pPlayer, const tagPOINT *ptTCenter, CIOBuffer *pBuffer);
int __thiscall CSMap::SendPacketInRect(CSMap *this, const tagPOINT *ptTCenter, CIOBuffer *pBuffer, int nRadius);
CBaseList *__thiscall CSMap::GetPlayerListInRect(CSMap *this, const tagPOINT *ptTCenter, int nRadius);
CBaseList *__thiscall CSMap::GetPlayerMonsterListInRect(CSMap *this, const tagPOINT *ptTCenter, int nRadius);
CPlayer *__thiscall CSMap::GetClosestPlayerInRect(CSMap *this, const tagPOINT *ptTCenter, int nRadius);
CMonster *__thiscall CSMap::GetMonsterInRect(CSMap *this, const tagPOINT *ptTCenter, int nMonIndex, int nRadius);
void __thiscall CSMap::PickUpItem(CSMap *this, CPlayer *pPlayer, int nId, const tagPOINT *ptT);
void __thiscall CMapObject::OnTimer(CMapObject *this, int nId); // idb
void __thiscall CMapObject::SetState(CMapObject *pBit, int nMap, int nState);
int __thiscall CMapObject::GetState(CMapObject *this);
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_493EE0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this);
void *__thiscall _f(void *); // idb
void *__thiscall sub_493F60(void *this, char a2);
int __thiscall sub_493F90(void *this);
int __thiscall sub_493FC0(void *this);
int __thiscall sub_493FE0(void *this);
int __thiscall sub_494000(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4940B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4);
_DWORD *__thiscall sub_494150(int *this);
int __stdcall sub_4941B0(void *a1);
int __stdcall IsValidNMID(const char *name); // idb
CSocket *__thiscall CSocket::CSocket(CSocket *this, int socket, sockaddr_in *addr); // idb
void *__thiscall CSocket::`scalar deleting destructor'(CSocket *this, char a2);
void __thiscall CSocket::~CSocket(CSocket *this);
void __thiscall CSocket::OnCreate(CSocket *this);
void __thiscall CSocket::OnRead(CSocket *this);
void __thiscall CSocket::OnClose(CSocket *this);
void __thiscall CSocket::CloseSocket(CSocket *this);
void __thiscall CSocket::Shutdown(CSocket *this); // idb
void __thiscall CSocket::Send(CSocket *this, CIOBuffer *pBuffer);
void CSocket::Write(CSocket *this, enum S2C_PROTOCOL nType, const char *formal, ...);
void __thiscall CSocket::Process(CSocket *this, PACKET *mainpacket);
void __thiscall CSocket::OnLogin(CSocket *this, int nFlag, int nUID, int nType, int nExpTime, int nCID, const char *szBillingInfo);
void __thiscall CSocket::OnLogin(CSocket *this, char *packet, int nCount, int nSize); // idb
void __thiscall CSocket::OnUserCount(CSocket *this, int nSvrId, int nUser, int nMaxUser);
void __thiscall CSocket::OnUserAllCount(CSocket *this, int nAllUser, int nMaxAllUser, int nAllAccount);
void __thiscall CSocket::OnNewPlayer(CSocket *this, int nAns, char *packet);
void __thiscall CSocket::OnDelPlayer(CSocket *this, int nAns);
void __thiscall CSocket::Logout(CSocket *this, int nLogoutType);
void __thiscall CSocket::OnKickOut(CIOCriticalSection *a1);
void __thiscall CSocket::OnBlockAccount(CSocket *this, int a2, int a3, const char *a4); // idb
void __thiscall CSocket::OnFreeAccount(CSocket *this, int a2, int a3, const char *a4); // idb
void __thiscall CSocket::LoadPlayer(CSocket *this, int a2, int a3);
void __thiscall CSocket::OnLoadPlayer(void *this, int a2, int a3);
void __thiscall CSocket::OnCheckCopy(CIOCriticalSection *this, int a2, int a3, int a4, int a5);
void __thiscall CSocket::OnRequestCopy(int this, int a2, void *a3, int a4);
void __thiscall CSocket::OnCopyPlayer(CIOCriticalSection *a1, int a2);
void __cdecl CStatus::Update();
int __thiscall CIOSocket::PendingWrite(CSocket *this); // idb
void *__thiscall CTables::CTables_0(void *this);
// CTile *__thiscall CTile::CTile(CTile *this);
void *__thiscall CTile::~CTile(void *this);
int __thiscall CTile::AddBase(CTile *this, CBase *pBase);
int __thiscall CTile::RemoveBase(CTile *this, CBase *pBase);
CItem *__thiscall CTile::GetItem(CTile *this, int nId);
CTrade *__thiscall CTrade::CTrade(CTrade *this, int a2, int a3);
void *__thiscall sub_496690(void *this, char a2);
void __thiscall CTables::CTables(CTables **this);
void __cdecl CTrade::CreateTrade(CPlayer *pCaller, struct CPlayer *pAcc);
void __thiscall CTrade::OnDelete(CTrade *this); // idb
void __thiscall CTrade::Cancel(CIOCriticalSection **this, int a2);
void __thiscall CTrade::TradeAgreed(CTrade *this, CPlayer *pPlayer); // idb
void __stdcall Encode(char chCodeNum, unsigned __int8 *ptr, int len);
void __stdcall Decode(char chCodeNum, unsigned __int8 *ptr, int len);
time_t __cdecl InitRandom();
int __cdecl Random();
int __cdecl _Random();
int __fastcall BitSet(volatile signed __int32 *a1, unsigned int a2);
int __fastcall BitReset(volatile signed __int32 *a1, unsigned int a2);
char *__stdcall WritePacket(char *a1, char *a2);
char *WritePacket(char *packet, const char *formal, ...);
char *__stdcall ReadPacketV(char *a1, int a2);
void *ReadPacket(char *a1, char *a2, ...);
char *__stdcall ScanPacketV(char *a1, unsigned int a2, int a3);
char *ScanPacket(char *Src, char *a5, const char *a6, ...);
char *__stdcall GetString(char *packet, char *str);
char *__stdcall PutString(char *, const char *); // idb
void __cdecl init_codepage();
int __stdcall mbstricmp(const char *s1, const char *s2); // idb
int __stdcall IsValidString(const char *str); // idb
int __stdcall IsValidName(const char *name); // idb
int __stdcall IsValidAdminName(const char *name); // idb
std::string *__cdecl GetUniqueName(std::string *result); // idb
void __thiscall InitCodePage::InitCodePage(InitCodePage *this);
BOOL __stdcall j_MiniDumpWriteDump(HANDLE hProcess, DWORD ProcessId, HANDLE hFile, MINIDUMP_TYPE DumpType, PMINIDUMP_EXCEPTION_INFORMATION ExceptionParam, PMINIDUMP_USER_STREAM_INFORMATION UserStreamParam, PMINIDUMP_CALLBACK_INFORMATION CallbackParam);
int __stdcall _HsCrypt_InitCrypt(int a1);
int __stdcall _HsCrypt_GetEncMsg(void *Src, int a2, int a3, void *a4, int a5);
int __stdcall _HsCrypt_GetDecMsg(void *Src, int a2, int a3, void *a4, int a5);
int __stdcall _HsCrypt_FSeek(FILE *Stream, int a2);
unsigned int __stdcall _HsCrypt_EncFfile(FILE *Stream, void *a2, size_t ElementCount, unsigned int *a4, unsigned __int8 *a5);
unsigned int __stdcall _HsCrypt_FileFEnc(char *FileName, void *Src, void *a3);
unsigned int __cdecl convert_key(int a1);
__int16 __cdecl aes_set_key(int *a1, int a2, char a3, int a4);
__int16 __cdecl aes_encrypt(_DWORD *a1, int *a2, int a3);
__int16 __cdecl aes_decrypt(_DWORD *a1, int *a2, int a3);
__int16 __cdecl sub_49EFED(int a1, int *a2, int a3);
__int16 __cdecl sub_49F008(int a1, int *a2, int a3);
void *__cdecl AES_ECB_Encrypt(int a1, void *a2, void *Src, int a4, int a5);
void *__cdecl sub_49F10F(int a1, void *a2, void *a3, int a4, int a5);
void __thiscall __noreturn std::_String_base::_Xran(std::_String_base *this);
std::logic_error *__thiscall std::logic_error::logic_error(std::logic_error *this, const std::logic_error *__that);
std::logic_error *__thiscall sub_49F271(std::logic_error *this, const std::logic_error *a2);
void __noreturn sub_49F289();
std::logic_error *__thiscall sub_49F2C9(std::logic_error *this, const std::logic_error *a2);
int __cdecl j_operator_new(size_t); // idb
// void *__cdecl memcpy(void *, const void *, size_t);
// int report_failure(void); weak
void __thiscall sub_49F65E(void *this);
// void *__cdecl memset(void *, int, size_t);
// int __cdecl atexit(void (__cdecl *)());
// time_t __cdecl time(time_t *);
// struct tm *__cdecl localtime(const time_t *);
// int __cdecl abs(int);
// int __cdecl fclose(FILE *);
// int __cdecl isalnum(int);
// int __cdecl ungetc_0(int, FILE *);
// int __cdecl fgetc(FILE *);
// size_t __cdecl strlen(const char *);
// FILE *__cdecl fopen(const char *, const char *);
// int __cdecl strcmp(const char *, const char *);
// void *__cdecl memcpy_0(void *, const void *, size_t);
// char *__cdecl strcpy(char *, const char *);
// time_t __cdecl mktime(struct tm *);
// int sprintf(char *, const char *, ...);
int __cdecl sub_4A0647(int a1);
// char *__cdecl strrchr(const char *, int);
// size_t __cdecl strcspn(const char *, const char *);
// size_t __cdecl strspn(const char *, const char *);
// _DWORD __cdecl _local_unwind2(_DWORD, _DWORD); weak
// int __cdecl _except_handler3(int, PVOID TargetFrame, int); idb
// struct tm *__cdecl gmtime(const time_t *);
// void *__cdecl memchr(const void *, int, size_t);
// int __cdecl _vsnprintf(char *, size_t, const char *, va_list);
// int _snprintf(char *, size_t, const char *, ...);
// int __cdecl _beginthreadex(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, int, int, DWORD dwCreationFlags, LPDWORD lpThreadId); idb
// __int32 __cdecl strtol(const char *, char **, int);
// unsigned __int32 __cdecl strtoul(const char *, char **, int);
// size_t __cdecl fwrite(const void *, size_t, size_t, FILE *);
unsigned int __cdecl fread_0(void *buffer, unsigned int size, unsigned int count, _iobuf *stream);
// int __cdecl vsprintf(char *, const char *, va_list);
// _DWORD __cdecl flsall(_DWORD); weak
// int __cdecl fflush(FILE *);
int sub_4A1236();
// int fscanf(FILE *, const char *, ...);
__int32 __cdecl j__atol(const char *);
// void *__cdecl malloc(size_t);
void nullsub_1();
// unsigned __int64 __usercall unknown_libname_15@<edx:eax>(unsigned __int64 a1@<edx:eax>, unsigned __int8 a2@<cl>);
// int sscanf(const char *, const char *, ...);
// char *__cdecl strncpy(char *, const char *, size_t);
_DWORD __cdecl j_operator_delete(_DWORD); // weak
// size_t __cdecl fread(void *, size_t, size_t, FILE *);
size_t __cdecl sub_4A17A2(void *a1, size_t a2, size_t a3, FILE *a4);
// char *__cdecl strchr(const char *, int);
// void __cdecl srand(unsigned int);
// int __cdecl tolower(int);
// int __cdecl fseek(FILE *, __int32, int);
// __int32 __cdecl _filelength(int);
// void __stdcall __noreturn _CxxThrowException(void *pExceptionObject, _ThrowInfo *pThrowInfo);
// exception *__thiscall exception::exception(exception *__hidden this, const struct exception *); weak
void __thiscall sub_4A2489(void *this);
void *__thiscall sub_4A24AC(void *this, char a2);
// void __cdecl free(void *);
// void __cdecl _lock_file(FILE *Stream);
// void __cdecl _unlock_file(FILE *Stream);
void __cdecl _RTC_Initialize();
void __cdecl sub_4A7C3D(); // idb
// void __cdecl terminate(); idb
void __cdecl __noreturn _inconsistency();
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_4AA18E(int a1, int a2);
int __cdecl sub_4AA1A4(int a1, int a2);
int __cdecl _atodbl(_CRT_DOUBLE *Result, char *String);
int __cdecl sub_4AA1F7(int a1, int a2);
// int __cdecl _stricmp(const char *, const char *);
// _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __cdecl _fileno(FILE *);
int sub_4ABF90();
int sub_4ABFB0();
int sub_4ABFD0();
int sub_4ABFF0();
int sub_4AC010();
int sub_4AC030();
int sub_4AC050();
_DWORD *sub_4AC070();
int sub_4AC090();
int sub_4AC0B0();
int sub_4AC0D0();
int sub_4AC0F0();
int sub_4AC110();
int sub_4AC130();
int sub_4AC150();
int sub_4AC170();
int sub_4AC190();
int sub_4AC1B0();
int sub_4AC1D0();
void sub_4AC1F0();
int sub_4AC930();
int sub_4AC950();
int sub_4AC970();
int sub_4AC990();
int sub_4AC9B0();
int sub_4AC9D0();
int sub_4AC9F0();
int sub_4ACA10();
int sub_4ACA30();
int sub_4ACA50();
int sub_4ACA70();
int sub_4ACA90();
std::ios_base *sub_4ACAB0();
std::ios_base *sub_4ACAC0();
int sub_4ACAD0();
int sub_4ACAF0();
int sub_4ACB10();
int sub_4ACB30();
int sub_4ACB50();
int sub_4ACB70();
int sub_4ACB90();
int sub_4ACBB0();
int sub_4ACBD0();
int sub_4ACBF0();
int sub_4ACC10();
void *sub_4ACC30();
DWORD sub_4ACC40();
int sub_4ACC50();
int sub_4ACC70();
int sub_4ACC90();
int sub_4ACCB0();
int sub_4ACCD0();
int sub_4ACCF0();
int sub_4ACD10();
int sub_4ACD30();
int sub_4ACD60();
int sub_4ACD80();
int sub_4ACDA0();
int sub_4ACDC0();
int sub_4ACDE0();
int sub_4ACE00();
int sub_4ACE20();
int sub_4ACE40();
int sub_4ACE60();
int sub_4ACE80();
int sub_4ACEA0();
int sub_4ACEC0();
void sub_4ACEE0();
int sub_4AE1D0();
void sub_4AE1F0();
DWORD sub_4AE6A0();
int sub_4AE6B0();
int sub_4AE6D0();
DWORD sub_4AE6F0();
int sub_4AE700();
int sub_4AE720();
int sub_4AE740();
int sub_4AE760();
int sub_4AE780();
int sub_4AE7A0();
int sub_4AE7D0();
int sub_4AE7F0();
int sub_4AE810();
int sub_4AE830();
int sub_4AE850();
int sub_4AE870();
int sub_4AE890();
int sub_4AE8B0();
int sub_4AE8D0();
int sub_4AE8F0();
int sub_4AE910();
void sub_4AE930();
_DWORD *sub_4B23C0();
CMMagicFuJiExplosion *sub_4B2580();
DWORD sub_4B2F00();
int sub_4B2F10();
DWORD sub_4B2F30();
int sub_4B2F40();
int sub_4B2F70();
int sub_4B2F90();
void sub_4B2FB0();
void __cdecl sub_4B2FC0();
LONG __cdecl sub_4B2FD0();
void __cdecl sub_4B2FE0(); // idb
void __cdecl sub_4B2FF0();
void __cdecl sub_4B3000(); // idb
void __cdecl sub_4B3010(); // idb
LONG __cdecl sub_4B3020();
void __cdecl sub_4B3030(); // idb
int __cdecl sub_4B3040();
std::list<std::pair<std::string const ,int>> *__cdecl sub_4B3050();
int __cdecl sub_4B3060();
int __cdecl sub_4B3070();
void __cdecl sub_4B3080();
int __cdecl sub_4B3090();
void __cdecl sub_4B30A0();
int __cdecl sub_4B30B0();
void __cdecl sub_4B30C0();
int __cdecl sub_4B30D0();
void __cdecl sub_4B30E0(); // idb
void __cdecl sub_4B30F0(); // idb
int __cdecl sub_4B3100();
std::vector<CIOSocket::CIOTimer> *__cdecl sub_4B3110();
void __cdecl sub_4B3120(); // idb
int __cdecl sub_4B3130();
int __cdecl sub_4B3140();
int __cdecl sub_4B3150();
void __cdecl sub_4B3160();
int __cdecl sub_4B3170();
int __cdecl sub_4B3180();
void __cdecl sub_4B3190(); // idb
unsigned int __cdecl sub_4B31A0();
void __cdecl sub_4B31B0(); // idb
void __cdecl sub_4B31C0(); // idb
void __cdecl sub_4B31D0(); // idb
void __cdecl sub_4B31E0(); // idb
void __cdecl sub_4B31F0(); // idb
void __cdecl sub_4B3200(); // idb
void __cdecl sub_4B3210(); // idb
int __cdecl sub_4B3220();
void __cdecl sub_4B3230(); // idb
int __cdecl sub_4B3240();
void __cdecl sub_4B3250(); // idb
int __cdecl sub_4B3260();
void __cdecl sub_4B3270(); // idb
int __cdecl sub_4B3280();
void __cdecl sub_4B3290(); // idb
void __cdecl sub_4B32A0(); // idb
char *__cdecl sub_4B32B0();
void __cdecl sub_4B32D0(); // idb
void __cdecl sub_4B32E0(); // idb
void __cdecl sub_4B32F0(); // idb
int __cdecl sub_4B3300();
int __cdecl sub_4B3310();
int __cdecl sub_4B3320();
void __cdecl sub_4B3330(); // idb
void __cdecl sub_4B3340(); // idb
void __cdecl sub_4B3350(); // idb
void __cdecl sub_4B3360(); // idb
void __cdecl sub_4B3370(); // idb
int __cdecl sub_4B3380();
int __cdecl sub_4B3390();
int __cdecl sub_4B33A0();
void __cdecl sub_4B33B0(); // idb
int __cdecl sub_4B33C0();
void __cdecl sub_4B33D0(); // idb
int __cdecl sub_4B33E0();
void __cdecl sub_4B33F0(); // idb
int __cdecl sub_4B3400();
char *__cdecl sub_4B3410();
void __cdecl sub_4B3430(); // idb
std::list<std::pair<std::string const ,int>> *__cdecl sub_4B3440();
void __cdecl sub_4B3450(); // idb
void __cdecl sub_4B3460(); // idb
int __cdecl sub_4B3470();
void __cdecl sub_4B3480(); // idb
int __cdecl sub_4B3490();
void __cdecl sub_4B34A0(); // idb
void __cdecl sub_4B34B0();
int __cdecl sub_4B34C0();
int __cdecl sub_4B34D0();
int __cdecl sub_4B34E0();
char *__cdecl sub_4B34F0();
void __cdecl sub_4B3510(); // idb
void __cdecl sub_4B3520(); // idb
BOOL __stdcall GetTextMetricsA(HDC hdc, LPTEXTMETRICA lptm);
BOOL __stdcall TextOutA(HDC hdc, int x, int y, LPCSTR lpString, int c);
COLORREF __stdcall SetTextColor(HDC hdc, COLORREF color);
LONG __stdcall InterlockedDecrement(volatile LONG *lpAddend);
DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
HANDLE __stdcall CreateEventA(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCSTR lpName);
BOOL __stdcall CloseHandle(HANDLE hObject);
BOOL __stdcall ResetEvent(HANDLE hEvent);
LONG __stdcall InterlockedExchange(volatile LONG *Target, LONG Value);
BOOL __stdcall SetEvent(HANDLE hEvent);
LONG __stdcall InterlockedIncrement(volatile LONG *lpAddend);
BOOL __stdcall PostQueuedCompletionStatus(HANDLE CompletionPort, DWORD dwNumberOfBytesTransferred, ULONG_PTR dwCompletionKey, LPOVERLAPPED lpOverlapped);
LONG __stdcall InterlockedCompareExchange(volatile LONG *Destination, LONG Exchange, LONG Comperand);
DWORD __stdcall GetTickCount();
HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
BOOL __stdcall GetThreadContext(HANDLE hThread, LPCONTEXT lpContext);
HANDLE __stdcall GetCurrentThread();
LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
LPSTR __stdcall lstrcpyA(LPSTR lpString1, LPCSTR lpString2);
DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
void __stdcall ExitProcess(UINT uExitCode);
void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
BOOL __stdcall DeleteFileA(LPCSTR lpFileName);
BOOL __stdcall MoveFileExA(LPCSTR lpExistingFileName, LPCSTR lpNewFileName, DWORD dwFlags);
BOOL __stdcall ReadFile(HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToRead, LPDWORD lpNumberOfBytesRead, LPOVERLAPPED lpOverlapped);
HANDLE __stdcall CreateFileA(LPCSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
HANDLE __stdcall GetCurrentProcess();
SIZE_T __stdcall VirtualQuery(LPCVOID lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength);
DWORD __stdcall GetCurrentThreadId();
void __stdcall GetLocalTime(LPSYSTEMTIME lpSystemTime);
DWORD __stdcall SetFilePointer(HANDLE hFile, LONG lDistanceToMove, PLONG lpDistanceToMoveHigh, DWORD dwMoveMethod);
void __stdcall OutputDebugStringA(LPCSTR lpOutputString);
BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
DWORD __stdcall GetCurrentProcessId();
BOOL __stdcall SetThreadPriority(HANDLE hThread, int nPriority);
void __stdcall GetSystemInfo(LPSYSTEM_INFO lpSystemInfo);
BOOL __stdcall IsBadWritePtr(LPVOID lp, UINT_PTR ucb);
void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
DWORD __stdcall ResumeThread(HANDLE hThread);
DWORD __stdcall SuspendThread(HANDLE hThread);
void __stdcall Sleep(DWORD dwMilliseconds);
BOOL __stdcall SwitchToThread();
BOOL __stdcall TryEnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
HANDLE __stdcall CreateIoCompletionPort(HANDLE FileHandle, HANDLE ExistingCompletionPort, ULONG_PTR CompletionKey, DWORD NumberOfConcurrentThreads);
BOOL __stdcall SetProcessPriorityBoost(HANDLE hProcess, BOOL bDisablePriorityBoost);
DWORD __stdcall WaitForMultipleObjects(DWORD nCount, const HANDLE *lpHandles, BOOL bWaitAll, DWORD dwMilliseconds);
BOOL __stdcall GetQueuedCompletionStatus(HANDLE CompletionPort, LPDWORD lpNumberOfBytesTransferred, PULONG_PTR lpCompletionKey, LPOVERLAPPED *lpOverlapped, DWORD dwMilliseconds);
DWORD __stdcall SetThreadIdealProcessor(HANDLE hThread, DWORD dwIdealProcessor);
DWORD __stdcall GetLastError();
LONG __stdcall InterlockedExchangeAdd(volatile LONG *Addend, LONG Value);
HANDLE __stdcall CreateMutexA(LPSECURITY_ATTRIBUTES lpMutexAttributes, BOOL bInitialOwner, LPCSTR lpName);
BOOL __stdcall HeapDestroy(HANDLE hHeap);
HANDLE __stdcall HeapCreate(DWORD flOptions, SIZE_T dwInitialSize, SIZE_T dwMaximumSize);
BOOL __stdcall HeapFree(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem);
BOOL __stdcall VirtualFree(LPVOID lpAddress, SIZE_T dwSize, DWORD dwFreeType);
LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
LPVOID __stdcall VirtualAlloc(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
LPVOID __stdcall HeapReAlloc(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem, SIZE_T dwBytes);
SIZE_T __stdcall HeapSize(HANDLE hHeap, DWORD dwFlags, LPCVOID lpMem);
BOOL __stdcall IsDBCSLeadByte(BYTE TestChar);
UINT __stdcall GetACP();
BOOL __stdcall CopyFileA(LPCSTR lpExistingFileName, LPCSTR lpNewFileName, BOOL bFailIfExists);
int __stdcall lstrlenA(LPCSTR lpString);
HDC __stdcall BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint);
BOOL __stdcall GetClientRect(HWND hWnd, LPRECT lpRect);
BOOL __stdcall EndPaint(HWND hWnd, const PAINTSTRUCT *lpPaint);
BOOL __stdcall SetDlgItemInt(HWND hDlg, int nIDDlgItem, UINT uValue, BOOL bSigned);
UINT __stdcall GetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPSTR lpString, int cchMax);
UINT __stdcall IsDlgButtonChecked(HWND hDlg, int nIDButton);
UINT __stdcall GetDlgItemInt(HWND hDlg, int nIDDlgItem, BOOL *lpTranslated, BOOL bSigned);
HWND __stdcall GetDlgItem(HWND hDlg, int nIDDlgItem);
BOOL __stdcall EnableWindow(HWND hWnd, BOOL bEnable);
BOOL __stdcall EndDialog(HWND hDlg, INT_PTR nResult);
INT_PTR __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
BOOL __stdcall DestroyWindow(HWND hWnd);
void __stdcall PostQuitMessage(int nExitCode);
HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
HMENU __stdcall GetMenu(HWND hWnd);
BOOL __stdcall EnableMenuItem(HMENU hMenu, UINT uIDEnableItem, UINT uEnable);
BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
BOOL __stdcall UpdateWindow(HWND hWnd);
HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName);
HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
ATOM __stdcall RegisterClassExA(const WNDCLASSEXA *);
int __stdcall LoadStringA(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int cchBufferMax);
HACCEL __stdcall LoadAcceleratorsA(HINSTANCE hInstance, LPCSTR lpTableName);
BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax);
int __stdcall TranslateAcceleratorA(HWND hWnd, HACCEL hAccTable, LPMSG lpMsg);
BOOL __stdcall TranslateMessage(const MSG *lpMsg);
LRESULT __stdcall DispatchMessageA(const MSG *lpMsg);
BOOL __stdcall SetWindowTextA(HWND hWnd, LPCSTR lpString);
BOOL __stdcall InvalidateRect(HWND hWnd, const RECT *lpRect, BOOL bErase);
int __stdcall wvsprintfA(LPSTR, LPCSTR, va_list arglist);
BOOL __stdcall PtInRect(const RECT *lprc, POINT pt);
BOOL __stdcall PostMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
BOOL __stdcall KillTimer(HWND hWnd, UINT_PTR uIDEvent);
UINT_PTR __stdcall SetTimer(HWND hWnd, UINT_PTR nIDEvent, UINT uElapse, TIMERPROC lpTimerFunc);
int __stdcall shutdown(SOCKET s, int how);
char *__stdcall inet_ntoa(struct in_addr in);
SOCKET __stdcall accept(SOCKET s, struct sockaddr *addr, int *addrlen);
BOOL __stdcall WSAResetEvent(HANDLE hEvent);
int __stdcall WSAGetLastError();
u_long __stdcall htonl(u_long hostlong);
int __stdcall listen(SOCKET s, int backlog);
HANDLE __stdcall WSACreateEvent();
int __stdcall WSAEventSelect(SOCKET s, HANDLE hEventObject, __int32 lNetworkEvents);
BOOL __stdcall WSACloseEvent(HANDLE hEvent);
int __stdcall WSASend(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesSent, DWORD dwFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
int __stdcall WSARecv(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesRecvd, LPDWORD lpFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
int __stdcall WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);
int __stdcall WSACleanup();
int __stdcall setsockopt(SOCKET s, int level, int optname, const char *optval, int optlen);
int __stdcall recv(SOCKET s, char *buf, int len, int flags);
int __stdcall send(SOCKET s, const char *buf, int len, int flags);
int __stdcall getsockname(SOCKET s, struct sockaddr *name, int *namelen);
SOCKET __stdcall socket(int af, int type, int protocol);
int __stdcall bind(SOCKET s, const struct sockaddr *name, int namelen);
unsigned __int32 __stdcall inet_addr(const char *cp);
struct hostent *__stdcall gethostbyname(const char *name);
u_short __stdcall htons(u_short hostshort);
int __stdcall connect(SOCKET s, const struct sockaddr *name, int namelen);
int __stdcall closesocket(SOCKET s);
BOOL __stdcall StackWalk(DWORD MachineType, HANDLE hProcess, HANDLE hThread, LPSTACKFRAME StackFrame, PVOID ContextRecord, PREAD_PROCESS_MEMORY_ROUTINE ReadMemoryRoutine, PFUNCTION_TABLE_ACCESS_ROUTINE FunctionTableAccessRoutine, PGET_MODULE_BASE_ROUTINE GetModuleBaseRoutine, PTRANSLATE_ADDRESS_ROUTINE TranslateAddress);
BOOL __stdcall SymFromAddr(HANDLE hProcess, DWORD64 Address, PDWORD64 Displacement, PSYMBOL_INFO Symbol);
DWORD __stdcall UnDecorateSymbolName(PCSTR name, PSTR outputString, DWORD maxStringLength, DWORD flags);
BOOL __stdcall SymGetLineFromAddr64(HANDLE hProcess, DWORD64 qwAddr, PDWORD pdwDisplacement, PIMAGEHLP_LINE64 Line64);
BOOL __stdcall SymInitialize(HANDLE hProcess, PCSTR UserSearchPath, BOOL fInvadeProcess);
DWORD __stdcall SymGetOptions();
DWORD __stdcall SymSetOptions(DWORD SymOptions);
BOOL __stdcall SymCleanup(HANDLE hProcess);

//-------------------------------------------------------------------------
// Data declarations

int (__stdcall *AntiCpSvr_MakeGuidReqMsg)(_DWORD, _DWORD); // weak
int (__stdcall *AntiCpSvr_MakeReqMsg)(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int (*AntiCpSvr_Finalize)(void); // weak
int (__stdcall *AntiCpSvr_Initialize)(_DWORD); // weak
int (__stdcall *AntiCpSvr_AnalyzeAckMsg)(_DWORD, _DWORD, _DWORD); // weak
int (__stdcall *AntiCpSvr_AnalyzeGuidAckMsg)(_DWORD, _DWORD, _DWORD); // weak
int (*wsprintfA)(_DWORD, const char *, ...); // weak
PGET_MODULE_BASE_ROUTINE SymGetModuleBase;
PFUNCTION_TABLE_ACCESS_ROUTINE SymFunctionTableAccess;
void *(__thiscall *off_4B433C)(DeathMatch_Wait *__hidden this, unsigned int) = &CAuthSocket::`scalar deleting destructor'; // weak
char DefaultNullString = '\0'; // idb
int (__stdcall *off_4B4564)(int) = &CDBPacket::`scalar deleting destructor'; // weak
int (__stdcall *off_4B457C)(int) = &CIOObject::`scalar deleting destructor'; // weak
int (__stdcall *off_4B4598)(int) = &CBase::`scalar deleting destructor'; // weak
CBuff_vtbl *(__stdcall *CBuff_vtbl[3])(CBuff_vtbl *) = { &sub_48F1F0, &sub_48F1F0, &unknown_libname_2 };
int (__stdcall *off_4B467C[3])(int) = { &sub_48F1F0, &CBuffMoveSpeed::ApplyBuff, &CBuffMoveSpeed::FreeBuff }; // weak
int (__stdcall *off_4B4698[3])(int) = { &sub_48F1F0, &CBuffStone::ApplyBuff, &CBuffStone::FreeBuff }; // weak
int (__stdcall *off_4B46B4[3])(int) = { &sub_48F1F0, &CBuffMeditation::ApplyBuff, &CBuffMeditation::FreeBuff }; // weak
int (__stdcall *off_4B46D0[3])(int) = { &sub_48F1F0, &CBuffFatalChance::ApplyBuff, &CBuffFatalChance::FreeBuff }; // weak
int (__stdcall *off_4B46EC[3])(int) = { &sub_48F1F0, &CBuffRevivalSequela::ApplyBuff, &CBuffRevivalSequela::FreeBuff }; // weak
int (__stdcall *off_4B4708[3])(int) = { &sub_48F1F0, &CBuffStun::ApplyBuff, &CBuffStun::FreeBuff }; // weak
int (__stdcall *off_4B4724[3])(int) = { &sub_48F1F0, &CBuffMoveStop::ApplyBuff, &CBuffMoveStop::FreeBuff }; // weak
int (__stdcall *off_4B4740[3])(int) = { &sub_48F1F0, &CBuffPoison::ApplyBuff, &CBuffPoison::FreeBuff }; // weak
int (__stdcall *off_4B475C[3])(int) = { &sub_48F1F0, &CBuffPoisonCloud::ApplyBuff, &CBuffPoisonCloud::FreeBuff }; // weak
int (__stdcall *off_4B4778[3])(int) = { &sub_48F1F0, &CBuffHaste::ApplyBuff, &CBuffHaste::FreeBuff }; // weak
int (__stdcall *off_4B4794[3])(int) = { &sub_48F1F0, &CBuffHP::ApplyBuff, &CBuffHP::FreeBuff }; // weak
int (__stdcall *off_4B47B0[3])(int) = { &sub_48F1F0, &CBuffMP::ApplyBuff, &CBuffMP::FreeBuff }; // weak
int (__stdcall *off_4B47CC[3])(int) = { &sub_48F1F0, &CBuffSleep::ApplyBuff, &CBuffSleep::FreeBuff }; // weak
int (__stdcall *off_4B47E8[3])(int) = { &sub_48F1F0, &CBuffCTDefensePer::ApplyBuff, &CBuffCTDefensePer::FreeBuff }; // weak
int (__stdcall *off_4B4804[3])(int) = { &sub_48F1F0, &CBuffCTHealing::ApplyBuff, &CBuffCTHealing::FreeBuff }; // weak
int (__stdcall *off_4B4820[3])(int) = { &sub_48F1F0, &CBuffCTPrtyPtEx::ApplyBuff, &CBuffCTPrtyPtEx::FreeBuff }; // weak
int (__stdcall *off_4B483C[3])(int) = { &sub_48F1F0, &CBuffSuffering::ApplyBuff, &CBuffSuffering::FreeBuff }; // weak
int (__stdcall *off_4B4858[3])(int) = { &sub_48F1F0, &CBuffInchantWeapon::ApplyBuff, &CBuffInchantWeapon::FreeBuff }; // weak
int (__stdcall *off_4B4874[3])(int) = { &sub_48F1F0, &CBuffSpiritDmg::ApplyBuff, &CBuffSpiritDmg::FreeBuff }; // weak
int (__stdcall *off_4B4890[3])(int) = { &sub_48F1F0, &CBuffFlagPrty::ApplyBuff, &CBuffFlagPrty::FreeBuff }; // weak
int (__stdcall *off_4B48AC[3])(int) = { &sub_48F1F0, &CBuffFlagHP::ApplyBuff, &CBuffFlagHP::FreeBuff }; // weak
int (__stdcall *off_4B48C8[3])(int) = { &sub_48F1F0, &CBuffBerserk::ApplyBuff, &CBuffBerserk::FreeBuff }; // weak
int (__stdcall *off_4B48E4[3])(int) = { &sub_48F1F0, &CBuffSilenceShot::ApplyBuff, &CBuffSilenceShot::FreeBuff }; // weak
int (__stdcall *off_4B4900[3])(int) = { &sub_48F1F0, &CBuffManaBurn::ApplyBuff, &CBuffManaBurn::FreeBuff }; // weak
int (__stdcall *off_4B491C[3])(int) = { &sub_48F1F0, &CBuffPrty::ApplyBuff, &CBuffPrty::FreeBuff }; // weak
int (__stdcall *off_4B4938[3])(int) = { &sub_48F1F0, &CBuffPrtyEx::ApplyBuff, &CBuffPrtyEx::FreeBuff }; // weak
int (__stdcall *off_4B4954[3])(int) = { &CBuffExpire::SetBuff, &CBuffExpire::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B4970[3])(int) = { &sub_48F1F0, &CBuffExpireEvent::ApplyBuff, &CBuffExpireEvent::FreeBuff }; // weak
int (__stdcall *off_4B498C[3])(int) =
{
  &CBuffExpire::SetBuff,
  &CBuffExpireLuckyStone2::ApplyBuff,
  &CBuffExpire::FreeBuff
}; // weak
int (__stdcall *off_4B49A8[3])(int) = { &CBuffRemain::SetBuff, &CBuffRemain::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B49C4[3])(int) = { &CBuffRemainEx::SetBuff, &CBuffRemainEx::ApplyBuff, &CBuffRemainEx::FreeBuff }; // weak
int (__stdcall *off_4B49E0[3])(int) =
{
  &CBuffRemainDead::SetBuff,
  &CBuffRemainDead::ApplyBuff,
  &CBuffRemainDead::FreeBuff
}; // weak
int (__stdcall *off_4B49FC[3])(int) =
{
  &CBuffRemainDeadEx::SetBuff,
  &CBuffRemainDead::ApplyBuff,
  &CBuffRemainDead::FreeBuff
}; // weak
int (__stdcall *off_4B4A18[3])(int) = { &CBuffRemain::SetBuff, &CBuffRemainXBlow::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B4A34[3])(int) =
{
  &CBuffRemainPrty::SetBuff,
  &CBuffRemainPrty::ApplyBuff,
  &CBuffRemainPrty::FreeBuff
}; // weak
int (__stdcall *off_4B4A50[3])(int) = { &CBuffRemain::SetBuff, &CBuffRemain::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B4A6C[3])(int) =
{
  &CBuffRemain::SetBuff,
  &CBuffRemainLuckyStone1::ApplyBuff,
  &CBuffExpire::FreeBuff
}; // weak
int (__stdcall *off_4B4A88[3])(int) = { &sub_406890, &CBuffRemainPet::ApplyBuff, &CBuffRemainPet::FreeBuff }; // weak
int (__stdcall *off_4B4AA4[3])(int) =
{
  &sub_48F1F0,
  &CBuffHydrochloricAcid::ApplyBuff,
  &CBuffHydrochloricAcid::FreeBuff
}; // weak
int (__stdcall *off_4B4AC0[3])(int) = { &sub_48F1F0, &CBuffMixDamage::ApplyBuff, &unknown_libname_2 }; // weak
int (__stdcall *off_4B4AF8)(int) = &CCalendar::`scalar deleting destructor'; // weak
int (__stdcall *off_4B4B10)(int) = &CChar::`scalar deleting destructor'; // weak
int (*off_4B4BCC[7])() =
{
  &sub_40F5F0,
  &sub_432410,
  &sub_432430,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_3,
  &unknown_libname_3
}; // weak
int (*off_4B4C1C[8])() =
{
  &sub_40C360,
  &sub_40F5F0,
  &sub_40F5F0,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_3,
  &unknown_libname_3,
  &unknown_libname_3
}; // weak
int (*off_4B4C44[4])() = { &sub_40C360, &sub_48E5A0, &sub_48E5A0, &sub_40C550 }; // weak
int (__stdcall *off_4B4CEC)(int) = &CDBSocket::`scalar deleting destructor'; // weak
int (__stdcall *off_4B4EE8)(int) = &CDBPacket::`scalar deleting destructor'; // weak
int (__stdcall *off_4B4F00)(int) = &CGoto::`scalar deleting destructor'; // weak
int (__stdcall *off_4B4F48)(int) = &CPortal::`scalar deleting destructor'; // weak
int (__stdcall *off_4B4FAC)(int) = &sub_40F610; // weak
unsigned int Count = 4294967295u; // idb
int (__stdcall *off_4B4FF0)(int) = &CGuild::`scalar deleting destructor'; // weak
int (__stdcall *off_4B56A0)(int) = &sub_418B90; // weak
int (__stdcall *off_4B5798)(int) = &sub_419A00; // weak
int (__stdcall *off_4B58F0)(int) = &sub_41C3F0; // weak
int (__stdcall *off_4B5978)(int) = &CInitItem::`scalar deleting destructor'; // weak
int (__stdcall *off_4B5AA8[3])(int) = { &CSpecPrty::ApplySpec, &CSpecPrty::FreeSpec, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5AB8[3])(int) = { &unknown_libname_2, &unknown_libname_2, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5AC8[3])(int) = { &CSpecGState::ApplySpec, &CSpecGState::FreeSpec, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5AD8[3])(int) = { &unknown_libname_2, &unknown_libname_2, &CSpecTeleport::Use }; // weak
int (__stdcall *off_4B5AE8[3])(int) = { &unknown_libname_2, &unknown_libname_2, &CSpecRefresh::Use }; // weak
int (__stdcall *off_4B5AF8[3])(int) = { &unknown_libname_2, &unknown_libname_2, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5B08[3])(int) = { &unknown_libname_2, &unknown_libname_2, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5B18[3])(int) = { &unknown_libname_2, &unknown_libname_2, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5B28[3])(int) = { &unknown_libname_2, &unknown_libname_2, &sub_48F1F0 }; // weak
int (__stdcall *off_4B5B38[3])(int) = { &unknown_libname_2, &unknown_libname_2, &CSpecBuff::Use }; // weak
int (__stdcall *off_4B5B48[3])(int) = { &unknown_libname_2, &unknown_libname_2, &CSpecRevival::Use }; // weak
int (__stdcall *off_4B5B58)(int) = &CPrefix::`scalar deleting destructor'; // weak
int (__stdcall *off_4B5D58)(int) = &CInitMap::`scalar deleting destructor'; // weak
int (__stdcall *off_4B6624)(int) = &sub_4241C0; // weak
int (__stdcall *off_4B66D8)(int) = &sub_424990; // weak
int (__stdcall *off_4B677C)(int) = &CDBPacket::`scalar deleting destructor'; // weak
int (__stdcall *off_4B6798)(int) = &sub_425A00; // weak
int (__stdcall *off_4B69E0)(int) = &CItemMask::`scalar deleting destructor'; // weak
int (__stdcall *off_4B6AC0)(int) = &CItemMask::`scalar deleting destructor'; // weak
int (__stdcall *off_4B6C50)(int) = &sub_42A390; // weak
int (__stdcall *off_4B6E58)(int) = &sub_42A390; // weak
int (__stdcall *off_4B7038)(int) = &sub_42A390; // weak
int (__stdcall *off_4B7118)(int) = &sub_42A390; // weak
int (__stdcall *off_4B7248)(int) = &sub_42A390; // weak
int (__stdcall *off_4B7328)(int) = &sub_42A390; // weak
int (__stdcall *off_4B7470)(int) = &sub_42A390; // weak
int (__stdcall *off_4B7558)(int) = &CGroup::`scalar deleting destructor'; // weak
int (__stdcall *off_4B75D8)(int) = &CItemGroup::`scalar deleting destructor'; // weak
int (__stdcall *off_4B7678)(int) = &CGoods::`scalar deleting destructor'; // weak
int (*off_4B76F0[6])() =
{
  &sub_40C360,
  &sub_48E5A0,
  &sub_48E5A0,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_3
}; // weak
char off_4B7858[] = { 'K', 'A', 'L', '\0' }; // idb
int (__stdcall *off_4B7CE0)(int) = &CInitMonster::`scalar deleting destructor'; // weak
int (__stdcall *off_4B7DC8)(int) = &CGenMonster::`scalar deleting destructor'; // weak
int (__stdcall *off_4B7E78)(int) = &CMonsterObject::`scalar deleting destructor'; // weak
int (__stdcall *off_4B7E90)(int) = &CMonster::`scalar deleting destructor'; // weak
int (__stdcall *off_4B7F88)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8090)(int) = &sub_439940; // weak
int (__stdcall *off_4B8198)(int) = &sub_439940; // weak
int (__stdcall *off_4B82A0)(int) = &sub_439A80; // weak
int (__stdcall *off_4B8398)(int) = &sub_439A30; // weak
int (__stdcall *off_4B8490)(int) = &sub_439A80; // weak
int (__stdcall *off_4B8588)(int) = &sub_439B80; // weak
int (__stdcall *off_4B8680)(int) = &sub_439A80; // weak
int (__stdcall *off_4B8778)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8880)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8988)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8A90)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8B98)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8CA0)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8DA8)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8EB0)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B8FB8)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B90C0)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B91D8)(int) = &CMonsterReal::`scalar deleting destructor'; // weak
int (__stdcall *off_4B9308)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B9470)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B9578)(int) = &sub_439EC0; // weak
int (__stdcall *off_4B9680)(int) = &CInitNPC::`scalar deleting destructor'; // weak
int (__stdcall *off_4B96F8)(int) = &CGenNPC::`scalar deleting destructor'; // weak
int (__stdcall *off_4B97A0)(int) = &CMonsterObject::`scalar deleting destructor'; // weak
int (__stdcall *off_4B97B8)(int) = &CNPC::`scalar deleting destructor'; // weak
int (__stdcall *off_4B98F0)(int) = &CNPCTeleport::`scalar deleting destructor'; // weak
int (__stdcall *off_4B99D0)(int) = &CNPCTeleport::`scalar deleting destructor'; // weak
int (__stdcall *off_4B9AB0)(int) = &CNPCTeleport::`scalar deleting destructor'; // weak
int (__stdcall *off_4B9B90)(int) = &CNPCTeleport::`scalar deleting destructor'; // weak
int (__stdcall *off_4B9C70)(int) = &CNPCTeleport::`scalar deleting destructor'; // weak
int (__stdcall *off_4B9D50)(int) = &CNPCTeleport::`scalar deleting destructor'; // weak
int (__stdcall *off_4BA5A0)(int) = &sub_44CE50; // weak
int (__stdcall *off_4BA5E8)(int) = &sub_44D470; // weak
int (__stdcall *off_4BA660)(int) = &CPlayer::`scalar deleting destructor'; // weak
char aOX[12] = " "; // idb
char asc_4BBD80[1] = ""; // idb
char aEnforceItem_0[14] = "Enforce item "; // idb
char aEnforceItem[16] = "Enforce item "; // idb
int (__stdcall *off_4BBF54)(int) = &CDBPacket::`scalar deleting destructor'; // weak
int (__stdcall *off_4BC020[3])(int) = { &sub_47BBB0, &CCondClass::IsMeet, &sub_47B940 }; // weak
int (__stdcall *off_4BC030[18])(int) =
{
  &sub_47BBB0,
  &CCondLevel::IsMeet,
  &sub_47BBB0,
  &CCondSpecialty::IsMeet,
  &sub_47BBB0,
  &CCondContribute::IsMeet,
  &sub_47BA70,
  &CCondItem::IsMeet,
  &sub_47BBB0,
  &CCondParty::IsMeet,
  &sub_47BBB0,
  &CCondQuest::IsMeet,
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC038[16])(int) =
{
  &sub_47BBB0,
  &CCondSpecialty::IsMeet,
  &sub_47BBB0,
  &CCondContribute::IsMeet,
  &sub_47BA70,
  &CCondItem::IsMeet,
  &sub_47BBB0,
  &CCondParty::IsMeet,
  &sub_47BBB0,
  &CCondQuest::IsMeet,
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC040[14])(int) =
{
  &sub_47BBB0,
  &CCondContribute::IsMeet,
  &sub_47BA70,
  &CCondItem::IsMeet,
  &sub_47BBB0,
  &CCondParty::IsMeet,
  &sub_47BBB0,
  &CCondQuest::IsMeet,
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC048[12])(int) =
{
  &sub_47BA70,
  &CCondItem::IsMeet,
  &sub_47BBB0,
  &CCondParty::IsMeet,
  &sub_47BBB0,
  &CCondQuest::IsMeet,
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC050[10])(int) =
{
  &sub_47BBB0,
  &CCondParty::IsMeet,
  &sub_47BBB0,
  &CCondQuest::IsMeet,
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC058[8])(int) =
{
  &sub_47BBB0,
  &CCondQuest::IsMeet,
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC060[6])(int) =
{
  &sub_47BBB0,
  &CCondClear::IsMeet,
  &sub_47BBB0,
  &CCondNotClear::IsMeet,
  &sub_47BBB0,
  &CCondGState::IsMeet
}; // weak
int (__stdcall *off_4BC068[4])(int) = { &sub_47BBB0, &CCondNotClear::IsMeet, &sub_47BBB0, &CCondGState::IsMeet }; // weak
int (__stdcall *off_4BC070[2])(int) = { &sub_47BBB0, &CCondGState::IsMeet }; // weak
int (__stdcall *off_4BC110[3])(int) = { &sub_47C5D0, &CActionHtml::Action, &sub_47C4A0 }; // weak
int (__stdcall *off_4BC120[26])(int) =
{
  &sub_47C5D0,
  &CActionLink::Action,
  &sub_47C5D0,
  &CActionSpecialty::Action,
  &sub_47C5D0,
  &CActionExp::Action,
  &sub_47C630,
  &CActionItem::Action,
  &sub_47C5D0,
  &CActionItemRand::Action,
  &sub_47C5D0,
  &CActionCon::Action,
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC128[24])(int) =
{
  &sub_47C5D0,
  &CActionSpecialty::Action,
  &sub_47C5D0,
  &CActionExp::Action,
  &sub_47C630,
  &CActionItem::Action,
  &sub_47C5D0,
  &CActionItemRand::Action,
  &sub_47C5D0,
  &CActionCon::Action,
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC130[22])(int) =
{
  &sub_47C5D0,
  &CActionExp::Action,
  &sub_47C630,
  &CActionItem::Action,
  &sub_47C5D0,
  &CActionItemRand::Action,
  &sub_47C5D0,
  &CActionCon::Action,
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC138[20])(int) =
{
  &sub_47C630,
  &CActionItem::Action,
  &sub_47C5D0,
  &CActionItemRand::Action,
  &sub_47C5D0,
  &CActionCon::Action,
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC140[18])(int) =
{
  &sub_47C5D0,
  &CActionItemRand::Action,
  &sub_47C5D0,
  &CActionCon::Action,
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC148[16])(int) =
{
  &sub_47C5D0,
  &CActionCon::Action,
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC150[14])(int) =
{
  &sub_47C5D0,
  &CActionSUP::Action,
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC158[12])(int) =
{
  &sub_47C5D0,
  &CActionSaveFlag::Action,
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC160[10])(int) =
{
  &sub_47C5D0,
  &CActionClear::Action,
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC168[8])(int) =
{
  &sub_47C5D0,
  &CActionGState::Action,
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC170[6])(int) =
{
  &sub_47C5D0,
  &CActionGuide::Action,
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC178[4])(int) =
{
  &sub_47C5D0,
  &CActionRedistribute::Action,
  &sub_47C5D0,
  &CActionTeleport::Action
}; // weak
int (__stdcall *off_4BC180[2])(int) = { &sub_47C5D0, &CActionTeleport::Action }; // weak
int (__stdcall *off_4BC224)(int) = &sub_47ECA0; // weak
int (__stdcall *off_4BC240)(int) = &CInitSkill::`scalar deleting destructor'; // weak
int (__stdcall *off_4BC3F0)(int, int) = &sub_48D100; // weak
int (__stdcall *off_4BC440)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC490)(int, int) = &CBehead::CanExcute; // weak
int (__stdcall *off_4BC4E0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC530)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC580)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC5D0)(int, int) = &CPullSwing::CanExcute; // weak
int (__stdcall *off_4BC630)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC690)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC6F0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC750)(int, int) = &CMock::CanExcute; // weak
int (__stdcall *off_4BC7A0)(int, int) = &CMock::CanExcute; // weak
int (__stdcall *off_4BC7F0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC850)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC8B0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC910)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC970)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BC9D0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCA30)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCA90)(int, int) = &CInfernal::CanExcute; // weak
int (__stdcall *off_4BCAF0)(int, int) = &CShieldAttack::CanExcute; // weak
int (__stdcall *off_4BCB50)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCBB0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCC10)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCC70)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCCD0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCD30)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCD90)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCDF0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCE50)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCEB0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCF10)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCF70)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BCFD0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD030)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD090)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD0F0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD150)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD1C0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD230)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD2A0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD310)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD380)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD3F0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD460)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD4D0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD540)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD5B0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD620)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD690)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD700)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD770)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BD7E0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD830)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BD888)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BD8E0)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BD938)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BD990)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BD9E8)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BDA40)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDA90)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDAE0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDB30)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDB80)(int, int) = &CMeditation::CanExcute; // weak
int (__stdcall *off_4BDBD0)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDC20)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDC70)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDCC0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BDD10)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDD60)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDDB0)(int, int) = &CRevival::CanExcute; // weak
int (__stdcall *off_4BDE08)(int, int) = &CRevival::CanExcute; // weak
int (__stdcall *off_4BDE60)(int, int) = &CRevival::CanExcute; // weak
int (__stdcall *off_4BDEB8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDF08)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BDF58)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BDFA8)(int, int) = &CHaste::CanExcute; // weak
int (__stdcall *off_4BDFF8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE048)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE0A8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE108)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE168)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE1B8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE208)(int, int) = &CMeshDefense::CanSkillUp; // weak
void (__thiscall *off_4BE258)(CMeshStr *__hidden this, struct CPlayer *, struct CChar *, int *) = &CProtect::CanExcute; // weak
int (__stdcall *off_4BE2A8)(int, int) = &CMeshDefense::CanExcute; // weak
int (__stdcall *off_4BE2F8)(int, int) = &CSilenceArrow::CanExcute; // weak
int (__stdcall *off_4BE348)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BE398)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE3E8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE438)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE488)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE4D8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE528)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BE578)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BE5C8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE618)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE668)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE6B8)(int, int) = &CAuraDefense::CanExcute; // weak
int (__stdcall *off_4BE708)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BE758)(int, int) = &CMock::CanExcute; // weak
int (__stdcall *off_4BE7A8)(int, int) = &sub_489320; // weak
int (__stdcall *off_4BE7F8)(int, int) = &sub_489550; // weak
int (__stdcall *off_4BE848)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE898)(int, int) = &sub_4897F0; // weak
int (__stdcall *off_4BE8E8)(int, int) = &CStrenUpFatal::CanExcute; // weak
int (__stdcall *off_4BE948)(int, int) = &CSkillBuff::CanExcute_0; // weak
int (__stdcall *off_4BE9A8)(int, int) = &CStrenUpFatal::CanExcute; // weak
int (__stdcall *off_4BEA08)(int, int) = &CStrenUpFatal::CanExcute; // weak
int (__stdcall *off_4BEA68)(int, int) = &CStrenUpFatal::CanExcute; // weak
int (__stdcall *off_4BEAC8)(int, int) = &CStrenUpFatal::CanExcute; // weak
int (__stdcall *off_4BEB28)(int, int) = &CCloudSight::CanExcute_0; // weak
int (__stdcall *off_4BEB88)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEBE8)(int, int) = &sub_48A0D0; // weak
int (__stdcall *off_4BEC48)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BECA8)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BED08)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BED68)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEDC8)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEE28)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEE88)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEEE8)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEF48)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEFA8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF000)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF058)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF0B0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF108)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF160)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF1B8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF210)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF268)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF2C0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF318)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF370)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF3C8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF420)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF478)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF4D0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__thiscall *off_4BF528)(CMock *__hidden this) = &CMock::GetHostility; // weak
void *off_4BF588 = &std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::erase; // weak
void *off_4BF5F8 = &std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::erase; // weak
int (__thiscall *off_4BF648)(CMock *__hidden this) = &CMock::GetHostility; // weak
int (__thiscall *off_4BF6A8)(CMock *__hidden this) = &CMock::GetHostility; // weak
void *off_4BF708 = &std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::erase; // weak
int (__thiscall *off_4BF758)(CMock *__hidden this) = &CMock::GetHostility; // weak
int (__thiscall *off_4BF7B8)(CMock *__hidden this) = &CMock::GetHostility; // weak
void *off_4BF808 = &std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::erase; // weak
int (__stdcall *off_4BF858)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF8C8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF938)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF9A8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFA18)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BFA68)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BFAB8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BFB08)(int, int) = &CSkillBuff::CanExcute_0; // weak
int (__stdcall *off_4BFB68)(int, int) = &CSkillBuff::CanExcute_0; // weak
int (__stdcall *off_4BFBC8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BFC38)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFCA8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFD18)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFD88)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFDF8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFE68)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4BFEB8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFF28)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFF98)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0008)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0068)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C00D8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0148)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C01B8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0218)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0268)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C02C8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0328)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0388)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C03E8)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0458)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C04C8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0538)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0598)(int, int) = &CSkill::CanExcute; // weak
int (__stdcall *off_4C0608)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0678)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0934)(int) = &sub_493F60; // weak
int (__stdcall *off_4C0950)(int) = &CSocket::`scalar deleting destructor'; // weak
int (__stdcall *off_4C0E08)(int) = &sub_496690; // weak
char g_chEncodeCode[13051] =
{
  ')',
  ',',
  '',
  'c',
  '',
  '\x8D',
  '',
  '',
  '',
  '',
  '',
  'J',
  '`',
  '',
  '',
  'I',
  '',
  '?',
  '',
  'f',
  'W',
  'T',
  '\v',
  '\x9D',
  'Q',
  '',
  '',
  'M',
  'S',
  'k',
  '',
  '',
  '',
  '\n',
  'u',
  '',
  '$',
  '',
  '',
  '&',
  '6',
  't',
  '\x16',
  'j',
  '',
  '',
  '',
  '\x1A',
  'b',
  'H',
  '',
  '',
  '',
  '\x1B',
  '',
  '',
  '',
  '',
  '',
  '',
  ';',
  '0',
  'X',
  '',
  '',
  '',
  'F',
  '\x0F',
  'N',
  '',
  '',
  '=',
  '',
  'e',
  'K',
  '\x1F',
  '',
  '\x05',
  'C',
  'A',
  '/',
  'g',
  '}',
  '',
  'Y',
  '',
  'o',
  '',
  '\r',
  '\"',
  '^',
  '',
  'm',
  '\x0E',
  'q',
  '',
  '',
  '4',
  '',
  '',
  '',
  '',
  '\b',
  '',
  '',
  '!',
  '',
  '-',
  'V',
  '',
  'p',
  'O',
  '\x7F',
  'G',
  '*',
  '7',
  '5',
  '\x03',
  '',
  '{',
  '%',
  '\x01',
  '',
  '',
  '\x15',
  '\x11',
  'U',
  'h',
  '',
  '',
  '',
  '',
  '',
  'D',
  's',
  'w',
  '\'',
  '',
  '|',
  '',
  '',
  ']',
  '',
  '',
  '',
  '\x1C',
  '',
  'B',
  'z',
  '\x13',
  '',
  'P',
  '',
  '\x06',
  '\t',
  'L',
  '',
  '\x18',
  '\x1E',
  '',
  '\x90',
  '.',
  '',
  '#',
  'a',
  '',
  '',
  'y',
  '>',
  '',
  '\xFF',
  'l',
  'Z',
  '',
  '',
  '',
  '\x02',
  '\x17',
  '',
  '',
  '',
  '',
  '',
  '',
  '(',
  'i',
  '',
  '\x8F',
  '~',
  '\a',
  '\x04',
  '',
  '',
  'n',
  '',
  'v',
  '8',
  '9',
  '\x19',
  '',
  '\x14',
  '',
  '',
  '',
  '\f',
  '3',
  '',
  '',
  '',
  '',
  '',
  '',
  'x',
  '',
  '',
  '_',
  ' ',
  '\0',
  '',
  '<',
  '',
  '',
  'R',
  'E',
  '\x81',
  '',
  '\x10',
  '',
  '',
  '@',
  '',
  '\\',
  '',
  '',
  '',
  '[',
  '+',
  '',
  '',
  'd',
  '',
  'r',
  '1',
  '',
  '2',
  '',
  '',
  '\x12',
  '\x1D',
  '',
  ':',
  '',
  '',
  '',
  '',
  '',
  '$',
  '>',
  '{',
  '',
  '',
  'j',
  '\x19',
  '',
  '/',
  'e',
  '(',
  '',
  'T',
  '',
  '',
  '',
  '',
  '4',
  'C',
  'l',
  'x',
  '|',
  '\x1F',
  '',
  '',
  '',
  '',
  'N',
  '\0',
  '',
  '\x17',
  '@',
  '\x0E',
  '=',
  '',
  'Q',
  '',
  '',
  'f',
  '',
  '',
  'q',
  '',
  '',
  '\x0F',
  '',
  '^',
  '',
  '\"',
  'O',
  '',
  '\x03',
  '',
  '',
  '2',
  'm',
  '',
  '\x12',
  '',
  '\x8F',
  '',
  'c',
  '',
  ':',
  '',
  '\v',
  '\f',
  '',
  '\x01',
  's',
  '',
  '',
  '',
  '\x10',
  '',
  'i',
  '~',
  '',
  '',
  '',
  '',
  ']',
  'v',
  '',
  '',
  '',
  '}',
  'A',
  '',
  '\x1E',
  'y',
  '',
  '',
  '',
  'Y',
  '',
  '1',
  '',
  '',
  '',
  'p',
  '',
  '',
  'H',
  '',
  '',
  'b',
  '9',
  '',
  '',
  '\x9D',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x7F',
  '\x13',
  '',
  '',
  '',
  '',
  'h',
  '&',
  '',
  ' ',
  'D',
  ';',
  'U',
  '',
  'k',
  '',
  '',
  '\x81',
  '\x05',
  '',
  '#',
  '',
  '',
  '',
  '\x1C',
  '',
  '',
  '<',
  '5',
  '',
  '',
  'J',
  '',
  'o',
  'R',
  '',
  'M',
  '',
  '\x04',
  '\x11',
  '!',
  '[',
  '',
  '_',
  ')',
  '',
  '',
  'n',
  '\x18',
  '8',
  'V',
  ',',
  '-',
  '',
  '',
  'X',
  '',
  '',
  '',
  '\n',
  '3',
  '',
  '',
  '',
  'd',
  'r',
  '',
  '6',
  'G',
  '+',
  'S',
  '',
  'F',
  '7',
  '',
  '\\',
  '\x16',
  'P',
  '\x1D',
  '',
  'W',
  '0',
  '\x06',
  '',
  'K',
  '\r',
  '',
  'I',
  '\'',
  '',
  '',
  '',
  '?',
  'w',
  'g',
  '\x1A',
  '',
  '\xFF',
  'u',
  '',
  '',
  '%',
  '',
  '`',
  't',
  'a',
  '\x1B',
  'L',
  '\x15',
  '\x90',
  'z',
  '',
  '\x8D',
  '',
  '',
  'B',
  '',
  '\t',
  'E',
  '\x14',
  '',
  '',
  '\a',
  '*',
  '\b',
  '',
  '',
  '',
  '',
  '\x02',
  '.',
  'Z',
  '',
  'i',
  'U',
  'R',
  '',
  '',
  '\f',
  '',
  '',
  '\x18',
  '',
  '',
  '~',
  '',
  '',
  '',
  '',
  '',
  '\x19',
  '',
  '(',
  '\x11',
  '',
  '',
  '',
  '',
  '\x17',
  '*',
  '',
  '',
  '',
  '',
  '&',
  'm',
  '\x02',
  '',
  '',
  '',
  '',
  '6',
  '',
  'y',
  '\x05',
  '9',
  'x',
  '',
  '',
  'O',
  'v',
  '',
  'N',
  'F',
  '',
  'z',
  'n',
  'Z',
  '',
  '',
  '0',
  '',
  'Y',
  '',
  '\b',
  'P',
  '',
  'd',
  '',
  '>',
  '',
  '\x14',
  'J',
  '',
  '%',
  '',
  '',
  '\n',
  '-',
  '',
  'I',
  '',
  '',
  '',
  'c',
  '',
  '}',
  '',
  '',
  'M',
  '{',
  ']',
  '@',
  '\'',
  '\x8D',
  '',
  '',
  '',
  '\x0E',
  '\x7F',
  '\x0F',
  '_',
  '',
  '7',
  '',
  '',
  'h',
  '',
  '.',
  '\\',
  'V',
  '',
  '',
  '',
  '',
  'e',
  '2',
  '\x16',
  'C',
  '',
  '<',
  '\x1E',
  '\x1D',
  '',
  '',
  '',
  '',
  's',
  'T',
  '\x03',
  '',
  '',
  '',
  '^',
  '',
  '\0',
  '',
  'g',
  '3',
  '',
  'p',
  '',
  '',
  '\a',
  'G',
  '',
  '',
  '',
  '',
  'W',
  '1',
  '\x1C',
  '',
  '\x15',
  '8',
  '',
  ':',
  '\x1A',
  ')',
  'r',
  't',
  '\t',
  '',
  '',
  '',
  'E',
  '',
  '[',
  '',
  '\x01',
  'l',
  '',
  'b',
  '',
  '',
  '',
  '?',
  '\x90',
  '',
  '\x1F',
  '\x04',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x06',
  'A',
  'o',
  '',
  '',
  '',
  'L',
  '',
  '',
  'w',
  '',
  '',
  'K',
  ';',
  '!',
  '',
  '',
  '#',
  '\x81',
  '+',
  ' ',
  '',
  '',
  '5',
  '\"',
  'a',
  '',
  '',
  ',',
  'k',
  'B',
  'H',
  '\x12',
  '',
  '',
  '',
  '\x10',
  '',
  '\x9D',
  '`',
  '\r',
  '',
  '',
  'X',
  'Q',
  '',
  '4',
  'u',
  'q',
  '',
  '',
  '',
  '',
  '$',
  '\v',
  '\x8F',
  'S',
  'D',
  'j',
  '=',
  '',
  '\xFF',
  '',
  '\x13',
  '',
  '/',
  '',
  '\x1B',
  'f',
  '|',
  'D',
  '',
  '',
  '5',
  '=',
  '\0',
  '\x04',
  'g',
  '',
  '',
  ';',
  '',
  '',
  '\t',
  '\x1F',
  '',
  '',
  '%',
  '',
  '',
  'X',
  '\x1E',
  '\x16',
  '',
  'e',
  '',
  '',
  'S',
  'c',
  'd',
  '@',
  '',
  'T',
  '',
  '',
  '',
  '',
  '',
  '*',
  'z',
  'J',
  'U',
  '',
  '`',
  'W',
  '~',
  '2',
  'j',
  '',
  '',
  ',',
  '\a',
  ':',
  '',
  'P',
  '',
  '',
  '',
  '\x02',
  '3',
  '\x10',
  '',
  '\x17',
  '\x7F',
  '!',
  '\x13',
  '',
  '',
  '',
  '',
  '\v',
  '\x81',
  '\x1D',
  'v',
  '',
  '>',
  '\x03',
  'm',
  'F',
  '\x90',
  '\x11',
  '',
  '8',
  'a',
  '1',
  '',
  '',
  '',
  '\x1C',
  '\x1A',
  '\x1B',
  '',
  '[',
  '6',
  '#',
  '',
  'n',
  '(',
  '',
  '',
  '',
  '',
  '',
  ']',
  '',
  '',
  '',
  '?',
  '\x0F',
  '',
  '',
  'q',
  '',
  '',
  '\x18',
  '',
  '',
  '',
  '}',
  '&',
  '',
  '<',
  '',
  '',
  '',
  'N',
  '',
  '\x19',
  '\\',
  '',
  '',
  '',
  '',
  '',
  't',
  '',
  'Y',
  '',
  '\x8F',
  '',
  'y',
  '',
  'H',
  '',
  '',
  '',
  'K',
  'b',
  '\"',
  '',
  'w',
  '\x15',
  's',
  '',
  'f',
  '',
  '\xFF',
  ')',
  '\x8D',
  '',
  '',
  'p',
  '',
  '',
  '',
  '$',
  'L',
  '\n',
  '{',
  '',
  '',
  '^',
  '-',
  '',
  '',
  '',
  'O',
  '',
  '\b',
  '4',
  ' ',
  '',
  '',
  'B',
  '',
  '\x01',
  'Q',
  'E',
  '',
  '',
  '\x12',
  '',
  '',
  '',
  '\x0E',
  '',
  '',
  'l',
  '',
  '',
  '',
  '',
  'C',
  'V',
  '',
  '\x9D',
  '',
  '',
  '',
  '',
  '',
  '\f',
  '',
  '',
  'Z',
  '_',
  '',
  '|',
  '',
  '.',
  '',
  'I',
  'o',
  '',
  '7',
  'M',
  '\r',
  '',
  '',
  '/',
  'x',
  'k',
  '',
  '\x06',
  '',
  '',
  '\x14',
  'R',
  '',
  '',
  '',
  'G',
  '',
  '0',
  '\'',
  'r',
  '',
  '',
  'h',
  '\x05',
  '+',
  '9',
  'i',
  'u',
  'A',
  '',
  '\x1F',
  '>',
  't',
  'D',
  ';',
  '',
  '',
  '',
  'Y',
  'C',
  'G',
  'm',
  'L',
  '',
  '\x14',
  '',
  '`',
  'R',
  '7',
  '',
  '#',
  '',
  '\x13',
  '',
  ' ',
  '\x19',
  '',
  '',
  '',
  '',
  '5',
  '',
  '&',
  '',
  '',
  '\v',
  '',
  '\x17',
  'f',
  '@',
  '',
  '\x03',
  '{',
  '\x0F',
  'H',
  '',
  '\x15',
  '',
  '',
  '',
  '\x10',
  '',
  '',
  '',
  '9',
  'a',
  '',
  '',
  '-',
  'V',
  '',
  '\x06',
  'b',
  '',
  '^',
  '',
  '2',
  '',
  'z',
  '',
  'U',
  '\x1A',
  '',
  '',
  '*',
  'T',
  '\'',
  '<',
  '',
  'e',
  'A',
  '',
  '',
  '',
  'I',
  '|',
  '',
  '\x11',
  'l',
  '',
  '\x81',
  '',
  '',
  '',
  'p',
  'r',
  '?',
  '\x8F',
  '',
  '',
  'd',
  '\x1E',
  'h',
  '\x1B',
  '',
  '',
  '',
  '\x12',
  '',
  '',
  '$',
  '\x0E',
  '',
  ']',
  '\x02',
  '',
  '',
  'F',
  '',
  '',
  '4',
  '',
  'P',
  'Z',
  '',
  '\x1C',
  'g',
  '6',
  'q',
  'j',
  'N',
  '',
  'S',
  '',
  '',
  'u',
  '',
  'x',
  '\x1D',
  '',
  '\x90',
  'k',
  'v',
  ')',
  '',
  '',
  '}',
  '',
  '',
  'E',
  '',
  '',
  '\b',
  '',
  '',
  '',
  '',
  '\x9D',
  '\n',
  '',
  '',
  '',
  '',
  's',
  '',
  '',
  '',
  'J',
  '',
  '',
  'c',
  '',
  '',
  '',
  '',
  '\x04',
  '8',
  '',
  '\a',
  'X',
  '',
  '',
  '',
  '1',
  '.',
  '\"',
  '',
  '\x7F',
  '[',
  '',
  '',
  '',
  '\xFF',
  '',
  '',
  '\t',
  '',
  '+',
  '\f',
  'W',
  '!',
  'y',
  '%',
  '',
  '',
  '~',
  '',
  '',
  '',
  '\x05',
  '\x01',
  '',
  'O',
  '',
  'w',
  ',',
  '',
  '',
  '',
  '',
  '',
  '',
  'B',
  '',
  '',
  '',
  'Q',
  '\x16',
  'n',
  '',
  ':',
  '\x8D',
  '\x18',
  '0',
  'M',
  'o',
  '(',
  '',
  '',
  '',
  '',
  '',
  '_',
  '\\',
  '',
  '=',
  '\0',
  '',
  '',
  '\r',
  'K',
  'i',
  '/',
  '',
  '',
  '3',
  '',
  '',
  '',
  '',
  '\x9D',
  '',
  'v',
  '9',
  'Q',
  '\x04',
  '',
  '\x14',
  '',
  '*',
  'P',
  '',
  '\x1D',
  '',
  '',
  '\x16',
  '.',
  '>',
  '',
  '',
  '',
  '',
  '\x1C',
  'O',
  'o',
  '',
  '',
  '',
  '\x19',
  'l',
  '',
  '',
  '',
  '\x1A',
  'Y',
  '\t',
  '',
  '\v',
  '\x17',
  '\x03',
  '',
  'j',
  '',
  '',
  'w',
  'y',
  '',
  '\x0E',
  ';',
  '0',
  'e',
  'E',
  '\x02',
  '',
  'G',
  '8',
  '',
  '\x12',
  '',
  '6',
  '',
  '',
  'T',
  '',
  'X',
  '{',
  '',
  '',
  '',
  'u',
  'N',
  '',
  '\x1B',
  '\x11',
  '',
  '\x01',
  '',
  '',
  '',
  'c',
  '5',
  'g',
  'M',
  '',
  '~',
  'B',
  '+',
  '',
  '4',
  '',
  '',
  'n',
  '',
  '\x81',
  '7',
  '',
  '\"',
  '',
  '',
  '',
  'q',
  '}',
  '\f',
  'r',
  '',
  's',
  'S',
  '|',
  '<',
  '',
  'h',
  '_',
  '',
  '',
  'U',
  '',
  '%',
  'R',
  '\x7F',
  '',
  '',
  '',
  'd',
  'f',
  '\'',
  't',
  ']',
  '\n',
  '\a',
  '#',
  '',
  '',
  '&',
  '',
  '\x10',
  '',
  '',
  '\x1F',
  'L',
  '',
  '\x90',
  '',
  '',
  '',
  '\x06',
  '',
  '?',
  'K',
  'W',
  '',
  'z',
  '',
  'm',
  '',
  '\x0F',
  ')',
  '$',
  '',
  '@',
  '\b',
  'i',
  'I',
  '',
  '',
  '',
  ',',
  '\xFF',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x8D',
  '',
  '\\',
  '',
  '',
  ':',
  'x',
  '\x15',
  '',
  '',
  '(',
  '',
  '`',
  'Z',
  'a',
  '',
  '',
  '',
  '[',
  '\x13',
  '',
  '',
  '',
  'b',
  '',
  'C',
  '',
  '',
  '',
  '',
  '',
  '/',
  '2',
  'k',
  '',
  '',
  '\x18',
  ' ',
  '\x05',
  '\x1E',
  '=',
  '',
  '3',
  '',
  'H',
  '',
  '\x8F',
  '',
  'V',
  'D',
  '',
  '',
  '-',
  '\0',
  '',
  '',
  '',
  '',
  '\r',
  '^',
  '',
  '',
  'F',
  'p',
  'A',
  '',
  '',
  '',
  '',
  'J',
  '1',
  '!',
  '',
  '',
  '',
  '~',
  'J',
  '#',
  '',
  'A',
  'Y',
  '[',
  'e',
  'S',
  'g',
  '',
  '\x90',
  '\x1E',
  '',
  '0',
  '',
  '',
  '',
  '',
  'c',
  '\x12',
  '',
  '=',
  '',
  't',
  '',
  '',
  '\x8D',
  '<',
  'u',
  '\x13',
  'I',
  '',
  '',
  '',
  '{',
  '\x1A',
  '',
  '',
  '}',
  '+',
  '',
  ' ',
  '%',
  'Q',
  '\x0F',
  '',
  '',
  '\x15',
  '',
  '',
  'N',
  '\b',
  'x',
  '',
  '\x05',
  '\x81',
  '',
  'a',
  '',
  '`',
  'K',
  '\x0E',
  'H',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'j',
  'U',
  '',
  'p',
  '',
  '',
  '_',
  '',
  '',
  '$',
  '\"',
  '',
  'm',
  '',
  '\x19',
  '\n',
  'y',
  '(',
  '9',
  '',
  '',
  '\'',
  '',
  '',
  '\x06',
  '',
  '.',
  '',
  'V',
  '5',
  'L',
  'O',
  '',
  '-',
  'v',
  '',
  'T',
  '',
  '',
  'W',
  'd',
  '',
  'B',
  '',
  '^',
  '',
  '',
  '',
  ':',
  '',
  '\x1C',
  '4',
  '',
  '1',
  '',
  '',
  '',
  '',
  ')',
  ';',
  '',
  '',
  '\a',
  '',
  'Z',
  '\t',
  '',
  '\\',
  '',
  'f',
  '',
  '',
  '',
  '',
  '',
  '\r',
  '6',
  '',
  '',
  '',
  '',
  '',
  'o',
  'h',
  'P',
  '',
  'X',
  '',
  'z',
  'D',
  'w',
  '',
  '',
  'C',
  '?',
  '',
  '>',
  '',
  '\x1D',
  '',
  '',
  '',
  '\x10',
  '*',
  '',
  '\x11',
  '',
  '',
  'M',
  '\x14',
  '',
  '\v',
  '',
  '!',
  '2',
  '',
  'k',
  '',
  '',
  '\x18',
  '',
  ',',
  'b',
  '',
  'n',
  '\x7F',
  '',
  '|',
  '\x04',
  '',
  '',
  '',
  'E',
  '\xFF',
  '7',
  '',
  '',
  '',
  ']',
  '\x8F',
  '',
  '\f',
  'F',
  '',
  '8',
  's',
  'G',
  '@',
  '',
  '',
  '',
  '\x02',
  '',
  '',
  '',
  '',
  '\x01',
  '\0',
  '',
  '\x16',
  '',
  '/',
  'l',
  'r',
  '',
  '\x03',
  '3',
  '\x17',
  'R',
  '',
  '\x1B',
  '',
  '',
  '',
  'q',
  '',
  '\x1F',
  '',
  'i',
  '\x9D',
  '&',
  '',
  '',
  '',
  '8',
  '\x03',
  '',
  'u',
  '\x0E',
  '',
  '',
  '',
  'z',
  'K',
  '',
  'C',
  '\x19',
  '',
  '\x81',
  '',
  '',
  ':',
  '',
  '',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  'D',
  '',
  '~',
  '',
  'R',
  '6',
  '',
  '',
  'F',
  '\x13',
  '',
  'y',
  'w',
  '',
  '',
  '',
  'm',
  '',
  '',
  '0',
  '',
  '',
  'x',
  'l',
  '\'',
  '{',
  'W',
  '\x1E',
  '',
  '',
  'X',
  '',
  '\x04',
  '',
  'V',
  'I',
  '',
  '\x02',
  '.',
  '',
  'B',
  '',
  '',
  '\r',
  '',
  '',
  'H',
  '',
  '',
  '?',
  '',
  'O',
  ')',
  '&',
  '',
  '',
  '\"',
  '',
  '5',
  '',
  '',
  '',
  '',
  '\x90',
  '',
  '',
  '\x11',
  '|',
  'd',
  's',
  '',
  '\\',
  'a',
  '',
  'e',
  'L',
  ';',
  '\x7F',
  'i',
  '}',
  '',
  '',
  '=',
  '',
  '',
  '',
  '7',
  '',
  '',
  '\x1C',
  'g',
  '',
  '',
  '',
  '',
  'v',
  '\x15',
  'J',
  '',
  'b',
  'G',
  '#',
  'N',
  '',
  '',
  'Q',
  'r',
  '\x18',
  ']',
  '-',
  '',
  'n',
  'E',
  '',
  'U',
  '3',
  '',
  '(',
  'h',
  '',
  '*',
  '',
  '9',
  '\x0F',
  '_',
  'S',
  '',
  '',
  '',
  '',
  '\b',
  '\x14',
  '%',
  '\x05',
  '',
  '\t',
  '',
  '',
  '',
  '',
  '\x06',
  '\x1D',
  't',
  '\x9D',
  '\x8F',
  '\f',
  '',
  '',
  '\x10',
  '',
  '^',
  '',
  '',
  '+',
  '',
  '',
  '',
  '',
  '',
  '',
  'A',
  '',
  'M',
  '<',
  '',
  '',
  '$',
  'Z',
  '',
  '\x1B',
  '',
  '',
  '@',
  '\n',
  'c',
  ' ',
  '1',
  '\x8D',
  '',
  'j',
  '!',
  '',
  '',
  '',
  'P',
  '4',
  ',',
  '\x17',
  '>',
  '',
  '',
  'p',
  '2',
  '',
  '\xFF',
  'T',
  '',
  '',
  '',
  '',
  'q',
  '',
  '',
  '',
  '',
  '\x01',
  '',
  '\a',
  '',
  'Y',
  '`',
  '',
  '',
  '\x16',
  'o',
  '\x1F',
  '',
  '\v',
  '',
  '',
  '',
  '[',
  'k',
  '',
  '/',
  'f',
  '',
  '\0',
  '\x1A',
  '',
  '',
  ';',
  '',
  '\\',
  '',
  '',
  'v',
  '',
  'c',
  '',
  '\v',
  '',
  '',
  '*',
  'B',
  '\x06',
  '\x1E',
  '',
  's',
  'R',
  ')',
  '\b',
  '',
  '<',
  'P',
  't',
  '\xFF',
  '%',
  '@',
  'G',
  '',
  '',
  '',
  '',
  '',
  '\"',
  'K',
  'g',
  '\x05',
  '',
  'a',
  '\x1B',
  '8',
  '\x1C',
  'I',
  '',
  '',
  '',
  'p',
  'X',
  '',
  '\x81',
  '5',
  '',
  'Z',
  '',
  '4',
  'k',
  'e',
  '\x1F',
  '',
  '',
  '\x1D',
  'z',
  'E',
  'T',
  'N',
  '\x18',
  '\x14',
  '',
  '9',
  'H',
  'd',
  ':',
  'w',
  '\x8F',
  '#',
  '',
  'o',
  '',
  '/',
  '',
  '',
  '\x02',
  'l',
  'U',
  '',
  ']',
  '',
  '|',
  '',
  '',
  '\x17',
  'D',
  'x',
  '$',
  '',
  '',
  '',
  'A',
  '',
  '',
  '',
  '',
  '\f',
  '',
  '\x01',
  '{',
  '6',
  '',
  '',
  '',
  '',
  '\x0E',
  '',
  '',
  '',
  '',
  '',
  '+',
  '',
  '!',
  '',
  '\x10',
  '',
  '?',
  '',
  '\x0F',
  '',
  '\x7F',
  ' ',
  '\x16',
  'M',
  '',
  '(',
  '~',
  '',
  '^',
  '',
  'i',
  '',
  'u',
  '',
  '',
  'S',
  '',
  '\x03',
  '',
  '',
  '\x13',
  '7',
  'b',
  'r',
  '',
  '',
  '',
  '',
  '\0',
  '',
  '\x8D',
  '&',
  '',
  '3',
  '}',
  'f',
  'W',
  '',
  '\x04',
  '',
  'm',
  '_',
  'C',
  '\x11',
  '',
  '',
  '',
  '',
  '2',
  '\'',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'q',
  '',
  '>',
  '',
  '\t',
  '\x19',
  '',
  '',
  '\x1A',
  '',
  '',
  '',
  'F',
  'O',
  '`',
  '',
  '[',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x9D',
  '',
  '\r',
  '',
  '',
  '1',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'y',
  '\x12',
  '',
  'V',
  '-',
  '',
  '',
  '.',
  'Y',
  '',
  'L',
  'j',
  ',',
  '',
  '',
  '\x15',
  'J',
  '\a',
  '',
  '',
  '\n',
  'n',
  '',
  'h',
  '0',
  '\x90',
  'Q',
  '=',
  '',
  '',
  '',
  '2',
  ')',
  'N',
  '\x1B',
  '>',
  '',
  '',
  '8',
  'x',
  '',
  ' ',
  'T',
  '',
  '',
  '',
  '\x1A',
  '3',
  '\x8F',
  '',
  '',
  '',
  '',
  'U',
  '',
  '',
  '',
  '',
  '',
  '0',
  '',
  'J',
  '',
  '',
  '',
  'F',
  '',
  'i',
  '',
  '',
  'H',
  '\x9D',
  '\x81',
  '',
  '',
  '',
  'g',
  '\x13',
  '&',
  't',
  '',
  '',
  'y',
  '',
  '',
  '}',
  '+',
  '',
  '\x14',
  'r',
  '',
  'A',
  'I',
  'B',
  '_',
  '',
  'O',
  '',
  '\'',
  '?',
  '',
  '',
  'S',
  '',
  'G',
  '',
  'u',
  '{',
  ',',
  '',
  '',
  'Z',
  '',
  '\x15',
  '',
  '\x03',
  '~',
  '=',
  '',
  ';',
  'w',
  '',
  '5',
  '1',
  'D',
  '',
  'L',
  '\x10',
  '',
  '',
  'p',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '7',
  'k',
  '',
  '',
  '',
  '',
  '\x05',
  '',
  '\x16',
  'n',
  '',
  '\x18',
  '',
  'M',
  'E',
  '',
  '',
  '\a',
  '',
  '#',
  '',
  '|',
  '',
  '4',
  '',
  '\x1D',
  '',
  'h',
  'Q',
  '',
  '\x0E',
  '\n',
  '\v',
  'b',
  '',
  '6',
  'f',
  'c',
  '',
  '',
  '',
  '',
  'a',
  '',
  '',
  '.',
  '\x04',
  '',
  '',
  'o',
  '',
  '-',
  '',
  'm',
  '\x01',
  's',
  '',
  '',
  'X',
  '\x8D',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x11',
  '',
  '^',
  '',
  '[',
  '$',
  ':',
  '',
  '',
  '\0',
  '!',
  'P',
  'W',
  'd',
  '\x1C',
  '',
  '\\',
  '9',
  'l',
  '`',
  '',
  'C',
  '\r',
  '',
  '\"',
  '',
  '',
  '',
  '*',
  '<',
  '',
  '/',
  '',
  '',
  '',
  'q',
  'V',
  '\x19',
  '\x1F',
  '\x7F',
  '\f',
  '',
  '\x17',
  '',
  'j',
  '',
  '',
  'v',
  '\x90',
  '',
  'R',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  '\x12',
  '\x1E',
  '\t',
  '',
  '',
  'K',
  'Y',
  '%',
  'e',
  '',
  '(',
  '\x02',
  'z',
  '',
  '',
  ']',
  '',
  '\b',
  '',
  '',
  '\x06',
  '',
  '',
  '\x0F',
  '@',
  'l',
  '',
  '',
  '',
  '',
  '',
  '\x1B',
  '\x1D',
  '',
  '\x04',
  ' ',
  '\x8F',
  '',
  '&',
  '\x05',
  ']',
  '',
  '',
  '',
  'y',
  '',
  '',
  '\x19',
  'H',
  '',
  'o',
  'p',
  '',
  '',
  '',
  '3',
  'c',
  '',
  '',
  '',
  '',
  '',
  'm',
  '~',
  'R',
  '',
  'T',
  '/',
  '\'',
  '',
  '\x12',
  '\x01',
  '',
  '',
  '\x7F',
  '',
  '\f',
  '\x81',
  '',
  '`',
  '5',
  '',
  'z',
  '\x90',
  '',
  '',
  't',
  '\t',
  '',
  'P',
  '',
  '',
  '',
  '',
  '(',
  '\r',
  '',
  '',
  '',
  '',
  'h',
  '\\',
  '',
  '0',
  '2',
  '4',
  '',
  '',
  '|',
  'C',
  '>',
  '\x06',
  '\x1F',
  'W',
  'U',
  'k',
  '[',
  '',
  '',
  'w',
  'i',
  '',
  '',
  '6',
  '',
  'd',
  '',
  '',
  's',
  '\xFF',
  '',
  '',
  '7',
  'x',
  '',
  '*',
  '',
  '?',
  '',
  '',
  ';',
  '\x1C',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  '',
  '',
  'j',
  '',
  'F',
  'L',
  '',
  '\x1E',
  '',
  '',
  'I',
  '',
  '\a',
  '',
  'v',
  '',
  '%',
  '\x13',
  '',
  'A',
  '_',
  'N',
  '\x16',
  '',
  '',
  '\x0F',
  '+',
  ')',
  '',
  '',
  '',
  ',',
  'f',
  '',
  'Y',
  '!',
  '',
  '',
  '<',
  '',
  '',
  'b',
  '',
  '',
  '',
  'O',
  '',
  '',
  'q',
  '',
  'Z',
  '',
  '=',
  '',
  '',
  '',
  '',
  '\x1A',
  '',
  '',
  '\x8D',
  '',
  '',
  'e',
  '',
  '',
  '',
  '.',
  '',
  '',
  'B',
  '',
  'G',
  'D',
  'J',
  '^',
  'n',
  '',
  '',
  '\v',
  '}',
  'a',
  '\x9D',
  '',
  'K',
  '',
  '',
  '',
  '-',
  '\x14',
  '\x0E',
  '{',
  '',
  'g',
  '',
  '',
  '\x18',
  '',
  'V',
  '',
  'u',
  '',
  '\0',
  '',
  '\x11',
  '',
  '1',
  'r',
  '',
  '$',
  '\x10',
  '',
  '',
  '@',
  'E',
  'M',
  '\x03',
  '\b',
  '\x15',
  '9',
  '\"',
  '',
  '',
  '\n',
  '#',
  ':',
  '\x17',
  '8',
  'Q',
  'S',
  'X',
  '',
  '',
  'a',
  '',
  '4',
  '2',
  '6',
  '\x04',
  'g',
  '0',
  '\x12',
  'G',
  'l',
  '~',
  '>',
  '',
  '',
  '\f',
  '/',
  '',
  'r',
  '',
  '',
  '7',
  '!',
  '',
  '',
  '\x0F',
  '@',
  '',
  '.',
  '9',
  '\x10',
  '',
  'I',
  '',
  '\x1C',
  '',
  'U',
  '',
  '',
  '\b',
  '',
  '',
  'H',
  ':',
  'C',
  'b',
  '',
  '^',
  '',
  'P',
  '',
  '',
  '',
  'E',
  '[',
  ']',
  'm',
  '',
  '\x02',
  '8',
  '',
  '',
  '',
  '\x8F',
  '',
  '5',
  '*',
  '',
  '}',
  '',
  'L',
  ',',
  '',
  '',
  'X',
  '',
  'i',
  '',
  '',
  '\x14',
  't',
  '',
  '',
  '\x01',
  '',
  '\x1F',
  '',
  '',
  '',
  '\x16',
  'h',
  '\x81',
  '',
  '',
  'V',
  '$',
  '',
  '\r',
  'F',
  '&',
  '\x0E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x11',
  '',
  '',
  '\x18',
  '\x8D',
  '',
  '',
  '',
  '',
  '',
  '',
  'x',
  '\a',
  'u',
  'f',
  '',
  'j',
  '\"',
  ' ',
  '',
  '\x1E',
  '',
  'v',
  '',
  '',
  '',
  ';',
  '',
  '\0',
  '',
  'z',
  '',
  '',
  's',
  '',
  'Y',
  '',
  '\x17',
  '',
  '<',
  '',
  '',
  'q',
  '|',
  '1',
  '\x1B',
  '',
  'B',
  '',
  '\x05',
  '',
  '',
  '\x19',
  'O',
  '\'',
  '',
  '(',
  '\x7F',
  '',
  '{',
  '\v',
  '=',
  '',
  '\x15',
  '',
  '\x03',
  '',
  '',
  '\x1A',
  '\x9D',
  'W',
  'k',
  '\x13',
  'w',
  '',
  'N',
  '',
  '',
  '',
  '_',
  ')',
  '',
  '`',
  'A',
  'S',
  '\xFF',
  'd',
  '+',
  'o',
  '',
  '',
  '',
  '',
  'M',
  '',
  '',
  'K',
  '',
  '',
  'R',
  '\x90',
  '',
  '',
  '',
  '\x06',
  '#',
  '',
  '',
  '',
  'p',
  '',
  '',
  'n',
  '',
  '',
  '',
  '\t',
  '\n',
  '',
  'e',
  '\\',
  'Z',
  '',
  '',
  '\x1D',
  '',
  '?',
  '',
  'T',
  '',
  '',
  'c',
  'J',
  '',
  '',
  '',
  'Q',
  '',
  '',
  '',
  'y',
  '3',
  '%',
  '-',
  'D',
  '',
  '',
  '\x90',
  '\x1C',
  '9',
  ' ',
  'P',
  '',
  '',
  '\x1D',
  '',
  '',
  'g',
  '\x17',
  'l',
  '',
  '',
  '&',
  '',
  '',
  '4',
  ']',
  '`',
  'Z',
  '',
  '=',
  '',
  '<',
  '\x7F',
  '',
  'G',
  '\x0F',
  'z',
  'W',
  'n',
  '',
  'J',
  '',
  '',
  '\v',
  'p',
  '',
  'E',
  '\x03',
  '',
  '',
  'U',
  '\f',
  'e',
  '/',
  '',
  '\x1E',
  '',
  '',
  '',
  '',
  '',
  'Y',
  '',
  '',
  '',
  '',
  '',
  ';',
  'b',
  '',
  '\x18',
  '\x01',
  '.',
  '1',
  '',
  '',
  '\x1B',
  '',
  '~',
  '',
  '',
  '-',
  '\x1F',
  'u',
  '2',
  '\x12',
  'f',
  '',
  'o',
  ':',
  '\xFF',
  '\x06',
  'M',
  'k',
  'X',
  '',
  '',
  'v',
  '',
  'K',
  'y',
  '$',
  '',
  '',
  '',
  '',
  '',
  '',
  '%',
  '',
  '\x8D',
  '?',
  'C',
  'q',
  '',
  '|',
  '',
  '>',
  '@',
  '',
  '',
  '',
  '\b',
  '',
  ')',
  '\t',
  '',
  's',
  '',
  '',
  '',
  '',
  '',
  'Q',
  '0',
  '',
  '\\',
  '(',
  '\x14',
  '',
  'F',
  '\x0E',
  '',
  '',
  '}',
  'S',
  '',
  '',
  '',
  'm',
  '\x05',
  '*',
  '',
  '',
  '',
  '',
  '',
  'O',
  '\x9D',
  '\x19',
  '',
  '',
  '',
  'h',
  '\n',
  'T',
  '\'',
  '',
  'r',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\r',
  '\x13',
  '',
  'V',
  'I',
  '',
  '{',
  '',
  '\x1A',
  '7',
  'w',
  '\x04',
  '',
  '!',
  '\x8F',
  '',
  'i',
  '5',
  'L',
  '',
  '',
  '',
  '+',
  'B',
  '6',
  '',
  '',
  '',
  '_',
  'R',
  ',',
  '#',
  '',
  '',
  '',
  'c',
  '',
  '',
  'j',
  '',
  '8',
  'D',
  '\x11',
  't',
  '[',
  'd',
  '\0',
  'N',
  '',
  '',
  '\x10',
  '\x16',
  '^',
  '',
  '',
  '\x15',
  '\x81',
  '',
  '',
  '',
  '\"',
  'a',
  '\a',
  '',
  '',
  '',
  '',
  'H',
  'A',
  '',
  '',
  '',
  '',
  '',
  '3',
  'x',
  '\x02',
  '',
  '',
  '',
  '',
  '',
  'o',
  '',
  '\\',
  '\x11',
  '',
  '',
  '',
  '',
  '',
  '|',
  '+',
  '',
  '',
  '',
  '',
  '',
  'J',
  '\n',
  '\x19',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  '\x02',
  '',
  '',
  '5',
  '\x1F',
  '\x04',
  '',
  'Z',
  '#',
  '',
  '\x12',
  'X',
  '\t',
  '',
  '\x10',
  '',
  '\x1C',
  '\xFF',
  'k',
  ';',
  '\b',
  'W',
  '',
  '1',
  '',
  'i',
  '',
  'S',
  '-',
  '',
  '',
  '',
  '',
  'Q',
  '`',
  '}',
  '',
  '',
  '',
  '\x1D',
  'c',
  '_',
  'a',
  'L',
  '',
  '',
  '[',
  '*',
  'x',
  'A',
  'u',
  '',
  '',
  'b',
  'R',
  '',
  '\x15',
  '',
  '',
  'g',
  '\x17',
  '',
  '',
  '',
  '',
  '',
  '\x1B',
  '',
  'F',
  '',
  'D',
  '\v',
  '',
  '',
  '\0',
  'q',
  'z',
  '',
  '',
  '',
  'U',
  '0',
  '',
  'P',
  'w',
  'l',
  '',
  '{',
  '(',
  '',
  '\x81',
  '?',
  ',',
  '\x06',
  '\x8F',
  '',
  '',
  'G',
  '',
  '',
  '.',
  '\x1E',
  '',
  '\x13',
  '',
  '',
  '',
  '\x18',
  'd',
  'r',
  '',
  '',
  '',
  '\x01',
  'j',
  '',
  '@',
  '',
  '',
  '',
  '=',
  '\x9D',
  '6',
  'y',
  'v',
  'Y',
  '',
  'M',
  '',
  '',
  '\f',
  '',
  '',
  '',
  'N',
  '',
  '\x7F',
  '',
  '\x8D',
  '',
  'f',
  'V',
  '',
  '',
  '',
  '&',
  '',
  '',
  '',
  '',
  'B',
  '',
  '',
  '/',
  ']',
  '3',
  '',
  '\x90',
  '',
  ' ',
  '9',
  '',
  '',
  '$',
  '\x03',
  '',
  '\"',
  '\x1A',
  '',
  '\r',
  '',
  '',
  '',
  '',
  't',
  '^',
  '',
  '\x0F',
  ':',
  '',
  'e',
  '',
  '7',
  '',
  '\x05',
  '~',
  'C',
  '\'',
  '',
  'I',
  '',
  '',
  '8',
  '',
  '',
  'm',
  '>',
  '',
  '',
  '',
  'T',
  '',
  '',
  '!',
  '\a',
  'p',
  'n',
  '%',
  '',
  '',
  '',
  'H',
  '\x16',
  '\x14',
  '',
  'K',
  '',
  '4',
  '',
  '',
  '<',
  's',
  'O',
  '',
  'h',
  'E',
  '2',
  '',
  ')',
  '',
  '',
  'k',
  '',
  '',
  '',
  '',
  '',
  '\x01',
  '\x1C',
  '\x1E',
  '',
  '',
  '',
  'j',
  '5',
  '',
  '\0',
  '',
  '',
  '2',
  '',
  '',
  '',
  '',
  'y',
  ';',
  '\x1D',
  '$',
  '<',
  '',
  '',
  'F',
  '\x04',
  '',
  ')',
  'l',
  '',
  '',
  '',
  '',
  '',
  '',
  '~',
  '\a',
  '{',
  '',
  '\x12',
  '',
  '\n',
  '',
  '',
  't',
  '\x18',
  'a',
  '',
  'u',
  '&',
  '\"',
  'Q',
  '',
  '',
  '',
  '',
  '',
  'g',
  '\x15',
  '\r',
  '',
  'Y',
  '',
  '',
  '',
  '.',
  'i',
  '',
  '',
  '',
  '',
  '',
  'v',
  '\x8D',
  '\x9D',
  'V',
  '',
  'n',
  '-',
  '\x1A',
  '(',
  '\x02',
  'z',
  'A',
  '8',
  '',
  '\t',
  '',
  '3',
  '',
  '',
  '\x03',
  '',
  'H',
  '',
  '\x0F',
  'm',
  '>',
  '}',
  '',
  '`',
  'K',
  'W',
  '@',
  'G',
  'Z',
  '\xFF',
  '\x17',
  '',
  '\v',
  'E',
  'T',
  '\x05',
  'B',
  '\x8F',
  '',
  '\x16',
  '',
  'e',
  '',
  'r',
  '',
  '*',
  'S',
  'b',
  '\x7F',
  '#',
  'I',
  '',
  '',
  '',
  '',
  'J',
  '',
  '',
  '\x11',
  '',
  '',
  '\f',
  '\x10',
  '\x19',
  '',
  ':',
  '',
  '',
  '',
  'd',
  'o',
  '',
  '',
  '',
  '',
  '%',
  '',
  '',
  '?',
  '',
  '',
  '6',
  ']',
  '',
  'D',
  'L',
  '',
  '0',
  '^',
  '+',
  '',
  '',
  '',
  '',
  '\x1F',
  'X',
  '',
  '',
  '\x14',
  '\x1B',
  '',
  '7',
  '|',
  '',
  '',
  '',
  '\b',
  'R',
  '',
  'U',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'O',
  '',
  '',
  '\'',
  '',
  '\\',
  'P',
  '\x81',
  'c',
  '',
  '',
  'N',
  '\x90',
  '',
  '',
  '',
  'f',
  '_',
  '',
  '/',
  '9',
  '\x13',
  '',
  '=',
  'C',
  ',',
  '',
  '',
  '4',
  '1',
  '',
  '',
  '',
  '!',
  'p',
  '',
  '\x0E',
  '',
  's',
  '',
  'w',
  '',
  'h',
  '',
  'M',
  'x',
  'q',
  '',
  '[',
  ' ',
  '',
  '',
  '',
  '',
  ';',
  '',
  '^',
  '',
  '',
  '',
  '',
  '',
  '[',
  '\x10',
  'y',
  '',
  '\x11',
  '',
  'j',
  '',
  'U',
  '8',
  '',
  '',
  '',
  '\x01',
  '\0',
  '',
  '\x1B',
  '\x1F',
  '\x1A',
  '&',
  'n',
  '>',
  '\v',
  '\x90',
  'k',
  '',
  '',
  '',
  '#',
  '@',
  'S',
  '',
  '',
  '',
  '',
  'L',
  '',
  'b',
  '',
  '\x0F',
  '\x8D',
  '!',
  '<',
  '',
  '\x02',
  '',
  'l',
  '',
  '',
  'X',
  'a',
  '\x7F',
  '',
  '',
  '',
  'E',
  '3',
  '',
  '',
  'e',
  '(',
  '',
  '',
  '',
  'u',
  '',
  '\x1D',
  '',
  '',
  'Z',
  '_',
  '',
  'V',
  'x',
  '\x15',
  '',
  '',
  'Q',
  's',
  'R',
  '',
  '',
  '',
  '}',
  '',
  '',
  '',
  '',
  '\x0E',
  '',
  '',
  '',
  '',
  '',
  '\x03',
  '',
  '',
  '\n',
  '6',
  'H',
  '',
  '',
  'i',
  '',
  '',
  '',
  '\x04',
  '',
  'W',
  'c',
  't',
  '',
  '-',
  '',
  '',
  '\x14',
  '',
  '\xFF',
  'F',
  'w',
  '\x13',
  '',
  '',
  '',
  '\x16',
  '',
  '\x12',
  'D',
  '7',
  '.',
  '',
  '',
  'Y',
  '',
  '\x1E',
  'I',
  '',
  '',
  '',
  '\"',
  '~',
  'p',
  '',
  '0',
  '1',
  '',
  '',
  '\b',
  '',
  'N',
  '\x05',
  '',
  '`',
  '',
  '\a',
  '',
  '$',
  ']',
  '',
  '%',
  '',
  '+',
  '',
  '',
  '\x81',
  '',
  '*',
  '',
  'f',
  '/',
  '9',
  'P',
  '',
  '',
  '\\',
  ' ',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'A',
  'd',
  'K',
  'm',
  ')',
  '\t',
  '{',
  'C',
  '',
  'v',
  '\x1C',
  '',
  '',
  '',
  'z',
  '',
  '',
  '',
  'o',
  '\x18',
  '2',
  '',
  'B',
  'O',
  '5',
  '',
  '\x9D',
  'g',
  'G',
  'q',
  '\f',
  '\x19',
  '',
  '',
  '\x8F',
  '',
  '',
  '=',
  '\'',
  'r',
  '',
  '',
  '\r',
  '',
  '\x06',
  'h',
  '',
  '?',
  '',
  '',
  '|',
  'J',
  '',
  '\x17',
  'T',
  '',
  ',',
  '',
  ':',
  '',
  '',
  'M',
  '4',
  '',
  '',
  '*',
  '',
  'd',
  '',
  'J',
  '',
  '\x17',
  'o',
  '4',
  'I',
  '',
  '',
  '',
  'g',
  '',
  '',
  '',
  '',
  '',
  ':',
  '',
  '\x90',
  '',
  '',
  '',
  '\x10',
  '\x81',
  '',
  'L',
  '^',
  '',
  '\x1A',
  'y',
  '\x13',
  '<',
  '',
  '',
  '',
  '\a',
  ' ',
  '',
  '',
  '',
  'u',
  '',
  '\x0F',
  '',
  '\'',
  '>',
  '',
  'C',
  'R',
  ';',
  '_',
  '',
  '\x05',
  '\x02',
  '\\',
  '\xFF',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'T',
  '',
  '',
  '\x8D',
  '',
  '',
  '\f',
  'S',
  '`',
  '$',
  '=',
  'F',
  'N',
  'D',
  ',',
  '',
  '',
  '+',
  '6',
  '',
  'j',
  '',
  '@',
  '',
  '',
  '',
  '',
  '(',
  'A',
  '#',
  '-',
  '',
  '',
  'Y',
  '\0',
  'Z',
  '',
  '',
  '',
  'a',
  '}',
  '',
  '',
  'b',
  'E',
  'U',
  '\x03',
  '',
  'i',
  '!',
  'O',
  '',
  '',
  '',
  '',
  '',
  'W',
  'G',
  '1',
  's',
  '',
  'p',
  '',
  '\x15',
  'c',
  '',
  'H',
  '',
  '',
  '',
  'P',
  '&',
  '',
  '\"',
  '',
  '0',
  '',
  '',
  '2',
  '\x8F',
  'X',
  '',
  '',
  '',
  'f',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x06',
  ')',
  'x',
  '',
  '',
  '\x1D',
  '\x18',
  '{',
  '\n',
  '\t',
  'm',
  '\x1F',
  '',
  '7',
  '',
  '|',
  '',
  '\x1C',
  '',
  '',
  'n',
  '\x14',
  '',
  'k',
  '\x1B',
  '',
  'V',
  '',
  'v',
  '',
  '',
  '\x11',
  'q',
  '9',
  '',
  '',
  'e',
  '',
  '',
  'h',
  '\x04',
  '\v',
  '',
  '',
  ']',
  '?',
  '',
  '.',
  '',
  '\b',
  '',
  '',
  '',
  'r',
  'Q',
  '8',
  'M',
  '',
  '\x0E',
  '%',
  't',
  '3',
  '5',
  '\x1E',
  'z',
  '',
  '',
  '',
  '\x9D',
  '',
  'w',
  '',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  '',
  'l',
  '',
  '/',
  '~',
  '',
  '',
  '\x16',
  '\x01',
  'K',
  '\x7F',
  'B',
  '',
  '',
  '',
  '\r',
  '[',
  '',
  '',
  '',
  'W',
  '',
  'd',
  '\xFF',
  '',
  '\t',
  '',
  '',
  '\x1E',
  'P',
  '8',
  '',
  '',
  ')',
  'o',
  'i',
  '[',
  '#',
  '',
  '7',
  '',
  '',
  '',
  '',
  'r',
  '\x01',
  '',
  '',
  '',
  '\x1D',
  'u',
  '',
  '/',
  'z',
  '',
  '',
  '',
  '\x7F',
  '~',
  '\\',
  'h',
  '',
  '',
  '\x02',
  '',
  '',
  'c',
  '$',
  '',
  '',
  '',
  '',
  '\x1C',
  '*',
  'q',
  'Q',
  'J',
  '`',
  '<',
  '\x1A',
  '\x04',
  'L',
  '',
  '',
  '',
  '',
  '',
  'n',
  '',
  '',
  '',
  '',
  '',
  'H',
  '\x13',
  'm',
  'N',
  '',
  'E',
  '',
  '',
  '',
  '',
  '\x12',
  '|',
  '',
  'b',
  '',
  '',
  '!',
  '',
  '',
  '',
  '\x14',
  'U',
  ']',
  'e',
  '\x05',
  '\f',
  '',
  '',
  '',
  '\x17',
  '',
  '',
  '\0',
  '',
  '',
  '\r',
  '',
  '',
  'y',
  'A',
  'M',
  '@',
  'Z',
  '',
  '',
  '',
  '',
  '',
  '',
  '^',
  'F',
  '',
  '}',
  '',
  '0',
  '',
  '',
  '',
  'x',
  'C',
  '',
  '\x16',
  'g',
  'v',
  '?',
  'k',
  'G',
  'l',
  '',
  '\x0E',
  '',
  '\x8F',
  ':',
  '5',
  '',
  '\x10',
  'R',
  '',
  '\x81',
  '',
  '',
  '\x9D',
  '',
  '',
  'w',
  '',
  'p',
  '',
  '',
  'j',
  '\"',
  '',
  'B',
  '\x90',
  '{',
  '',
  'a',
  '&',
  '',
  '',
  '',
  '',
  's',
  'K',
  '(',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '',
  'X',
  '\x03',
  '',
  ' ',
  '\b',
  '+',
  '\x18',
  '',
  '\'',
  '9',
  '',
  '=',
  '.',
  '',
  '',
  '-',
  'D',
  '',
  '\n',
  '',
  '_',
  '%',
  '',
  '',
  '\x06',
  '\x11',
  '',
  '\x1B',
  '\x19',
  '2',
  '>',
  '',
  '1',
  '',
  '6',
  '',
  'O',
  '',
  '',
  '',
  'S',
  '',
  '',
  '\a',
  '\x15',
  '3',
  '',
  't',
  'Y',
  '',
  '',
  '',
  'T',
  '\x8D',
  '',
  '',
  '',
  'f',
  '',
  ',',
  '\x1F',
  '',
  'V',
  '',
  '',
  '',
  '4',
  '\x0F',
  '',
  ';',
  'I',
  'X',
  '',
  '\x1E',
  '',
  '*',
  '',
  '',
  '',
  '',
  '',
  '\a',
  '',
  '\x05',
  '',
  '',
  '9',
  '',
  '',
  '\0',
  '',
  '\t',
  '',
  '/',
  '',
  '-',
  '',
  'T',
  '',
  '',
  '',
  '',
  '',
  '%',
  '\x10',
  '',
  '\r',
  'e',
  '5',
  'D',
  ':',
  '',
  '+',
  '\n',
  '',
  '\x1F',
  '\x81',
  '\x13',
  '',
  't',
  'G',
  'O',
  '',
  'v',
  'U',
  ',',
  'N',
  '',
  '',
  'm',
  '',
  '',
  '',
  '\x04',
  '',
  '',
  '',
  '_',
  'P',
  'Y',
  '\x0F',
  'p',
  '',
  '',
  'Q',
  '',
  '|',
  '',
  '&',
  '\x14',
  '\x1A',
  '',
  '',
  '',
  '',
  '\f',
  '',
  '',
  '\x1C',
  '',
  'a',
  'r',
  '',
  'n',
  '',
  ']',
  'C',
  '7',
  '',
  'E',
  'Z',
  '\x02',
  '',
  '',
  '',
  '',
  '',
  '{',
  '\x16',
  'A',
  'I',
  '6',
  '',
  'i',
  '',
  '',
  '\x12',
  '#',
  '',
  '8',
  '\x1D',
  '\\',
  '\x18',
  '',
  '\"',
  'q',
  '',
  '\x8F',
  'x',
  '',
  '',
  'o',
  '',
  '<',
  '4',
  '',
  '',
  'y',
  '\x9D',
  'l',
  '',
  '$',
  '',
  '',
  '',
  '',
  '',
  '',
  '[',
  '=',
  '',
  'B',
  '\v',
  'h',
  'k',
  '',
  '\x03',
  '',
  '\x15',
  '',
  '',
  '',
  '^',
  '',
  '\x7F',
  '',
  '.',
  '',
  '',
  '\x8D',
  '',
  'w',
  ')',
  '3',
  '',
  'W',
  '',
  '',
  'F',
  '(',
  'S',
  '\x0E',
  '!',
  '0',
  '',
  '',
  '',
  '',
  '',
  '}',
  '\x06',
  '',
  'z',
  '',
  '',
  '',
  '\x01',
  '',
  '?',
  'c',
  '',
  '',
  '',
  '2',
  '',
  '~',
  '',
  'b',
  'M',
  '',
  '`',
  'K',
  'j',
  '',
  '',
  'f',
  '',
  'd',
  '\x1B',
  '\'',
  '',
  'R',
  '',
  '',
  '>',
  '',
  '',
  '',
  '1',
  '\xFF',
  '',
  ' ',
  '',
  '\x17',
  'u',
  '@',
  's',
  '',
  '\x11',
  '',
  '',
  '',
  '',
  'g',
  'J',
  '',
  '',
  'L',
  '',
  'H',
  '',
  '\x90',
  'V',
  ';',
  '',
  '\b',
  '\x19',
  'Q',
  '\x9D',
  'T',
  '\n',
  'P',
  '',
  '*',
  'B',
  '',
  'M',
  '',
  '',
  '',
  '',
  '0',
  '5',
  '',
  '\t',
  '\x03',
  '',
  ',',
  '\x1B',
  '',
  '?',
  '\x8F',
  '',
  '',
  '\x18',
  '',
  '',
  '\x13',
  '',
  '',
  '\\',
  '=',
  '\'',
  '.',
  '',
  'O',
  '',
  'e',
  '',
  '\x1D',
  '',
  '',
  '',
  '\x1F',
  '',
  '',
  '\x8D',
  '',
  '\x11',
  '',
  '&',
  '~',
  '',
  '<',
  '',
  '',
  '',
  'H',
  '',
  '',
  '9',
  '\x15',
  '',
  '',
  '[',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '-',
  '',
  '',
  '',
  '',
  '>',
  'r',
  '',
  '',
  'G',
  '',
  '',
  '',
  '',
  '\x81',
  '',
  'w',
  '!',
  '',
  'g',
  '',
  '',
  '+',
  ')',
  '',
  '\x16',
  '',
  'p',
  '^',
  '',
  '\x90',
  '',
  '\x02',
  '6',
  '{',
  '',
  'V',
  'i',
  '$',
  '\b',
  '',
  'l',
  '',
  '(',
  '',
  '',
  '',
  '',
  '|',
  '',
  '',
  'I',
  '',
  '\x17',
  '}',
  'A',
  '',
  '',
  'U',
  '\xFF',
  '',
  '_',
  '\x1A',
  '',
  'o',
  '',
  '',
  '/',
  'C',
  '',
  'b',
  '\v',
  '',
  '',
  'W',
  'E',
  'v',
  'x',
  '\a',
  '\x0E',
  'J',
  '\x1C',
  '',
  'R',
  'D',
  '',
  '',
  '\x05',
  '',
  '\x06',
  '',
  '',
  '\x04',
  '\x12',
  '',
  'Y',
  '',
  '\x01',
  'n',
  '',
  '',
  'L',
  '',
  ']',
  '4',
  '\x10',
  '8',
  '',
  '@',
  'y',
  '',
  '',
  '',
  '1',
  '',
  '',
  '',
  '',
  '\x19',
  '',
  'X',
  '\"',
  '\x1E',
  'u',
  '',
  '',
  '',
  '',
  ';',
  'd',
  '',
  '',
  't',
  '',
  '',
  '7',
  '\f',
  'f',
  '',
  'q',
  'a',
  '',
  '',
  'K',
  '',
  '`',
  '',
  '',
  '3',
  '',
  '%',
  'Z',
  '',
  'z',
  'm',
  '',
  ':',
  'k',
  '\0',
  '#',
  '',
  'h',
  '',
  '\x7F',
  'F',
  'N',
  '',
  'j',
  'S',
  ' ',
  '2',
  '',
  '\r',
  'c',
  '\x14',
  '',
  's',
  '',
  '\x0F',
  '',
  '',
  '1',
  '',
  '\x90',
  '',
  '',
  '\x1A',
  '',
  'm',
  '',
  '\xFF',
  'Y',
  '\x8D',
  '{',
  '\x14',
  '\x15',
  '\x1D',
  '',
  'N',
  'g',
  '`',
  '',
  '',
  '',
  '\x19',
  '',
  'I',
  '9',
  '',
  '',
  '+',
  '&',
  'j',
  '',
  '',
  '',
  '',
  'p',
  '\x7F',
  '',
  '',
  '#',
  '',
  '\x16',
  '\x06',
  '|',
  '\x13',
  '',
  'H',
  '',
  '',
  '\r',
  'w',
  '',
  '',
  '',
  's',
  ',',
  'G',
  '',
  '\x17',
  '',
  '?',
  '',
  ';',
  'O',
  '',
  '',
  '',
  'T',
  '',
  '',
  '\x1E',
  'D',
  '\b',
  '',
  '>',
  '',
  '',
  '\f',
  'd',
  '\x81',
  '',
  ' ',
  'e',
  '',
  '\x1B',
  '',
  '',
  '',
  '',
  '',
  'y',
  '(',
  '',
  '',
  '',
  '\x01',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  '\x1C',
  '',
  ')',
  '0',
  '}',
  'h',
  '$',
  'M',
  '',
  '[',
  'K',
  '',
  '\\',
  '',
  'n',
  '',
  '',
  '',
  '2',
  '',
  'u',
  'c',
  'q',
  '',
  'C',
  '',
  '7',
  '',
  'i',
  '',
  '=',
  '\x0E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '3',
  '@',
  'f',
  '6',
  'Z',
  '*',
  '',
  'z',
  '',
  '\x0F',
  ':',
  '',
  '\x05',
  '\x10',
  'x',
  '\n',
  '',
  '',
  '%',
  '',
  '\0',
  '',
  'k',
  '',
  '',
  'V',
  'v',
  'J',
  '.',
  '',
  '8',
  '\"',
  '\x03',
  'a',
  '',
  '',
  '',
  'U',
  'W',
  '',
  'l',
  '',
  '\x12',
  '',
  '!',
  '',
  '',
  '\x04',
  '5',
  'R',
  '',
  'r',
  '',
  '',
  'P',
  '',
  '',
  '\v',
  'F',
  '',
  '',
  '~',
  '',
  ']',
  '4',
  '',
  '',
  '/',
  '',
  '\t',
  '',
  '',
  '',
  '',
  '',
  't',
  '',
  '',
  '',
  '',
  '',
  '\x9D',
  'L',
  '',
  '\x11',
  '',
  'o',
  '',
  '',
  '',
  '',
  'Q',
  '\x18',
  'S',
  '',
  'B',
  '\x02',
  '',
  '^',
  'b',
  '\'',
  '-',
  '<',
  '\a',
  'X',
  '_',
  'E',
  '',
  '\x8F',
  '',
  '',
  'A',
  '',
  '5',
  '\x1C',
  '',
  'q',
  '',
  '\x0E',
  '',
  '',
  '(',
  '\xFF',
  'M',
  '',
  '?',
  'N',
  '\x81',
  ')',
  '',
  '!',
  '\x90',
  '',
  '<',
  ']',
  '\x9D',
  '',
  '',
  '',
  '8',
  '3',
  '\"',
  '4',
  '',
  '\x03',
  '',
  '',
  '9',
  '/',
  'E',
  '',
  '',
  '',
  'e',
  'K',
  '',
  '',
  '',
  'G',
  'o',
  '>',
  '',
  '',
  '\t',
  'i',
  '\x05',
  '',
  '',
  '',
  '&',
  '#',
  '',
  '',
  '',
  '',
  'H',
  '@',
  '',
  '_',
  '.',
  '',
  '',
  '=',
  'v',
  '',
  '\x06',
  'a',
  'W',
  'O',
  '\x04',
  'z',
  '\x10',
  '',
  '',
  '',
  'F',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'u',
  'I',
  '\b',
  '',
  '',
  '\0',
  'p',
  't',
  '\x8F',
  '',
  '',
  'x',
  '2',
  'T',
  '',
  'h',
  'D',
  'y',
  '',
  '',
  'C',
  '',
  ',',
  '',
  '*',
  '',
  '',
  'r',
  '',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  '',
  '^',
  'n',
  '',
  ';',
  '',
  'Z',
  '',
  '\x8D',
  '',
  'U',
  'P',
  'S',
  '',
  '',
  '',
  '\x14',
  '\a',
  'w',
  '',
  '\f',
  '',
  '',
  '',
  '',
  'Q',
  '',
  '',
  '1',
  '',
  '',
  '+',
  '',
  '\x01',
  '',
  'V',
  '',
  '\\',
  '|',
  '-',
  '\r',
  '\x16',
  '',
  'c',
  'L',
  'd',
  '6',
  'b',
  '',
  '\x15',
  '\x12',
  '\x02',
  '',
  '',
  '\n',
  '\x18',
  'j',
  '\'',
  '',
  '\v',
  '',
  'R',
  '',
  '',
  '',
  ':',
  '',
  'l',
  '',
  'm',
  '\x1D',
  '\x17',
  '',
  '\x1B',
  '',
  '',
  '\x19',
  '\x1E',
  'B',
  '\x7F',
  'g',
  '',
  '`',
  '7',
  '',
  '%',
  '',
  '0',
  '~',
  '$',
  's',
  '{',
  '}',
  '',
  '',
  '',
  'k',
  '',
  '',
  '',
  '',
  '\x11',
  '',
  '',
  '',
  '',
  '',
  '',
  '[',
  ' ',
  'Y',
  'A',
  '',
  '',
  'f',
  'J',
  '',
  '',
  '\x0F',
  'X',
  '',
  '',
  '\x13',
  '',
  '',
  '\x1A',
  '',
  '',
  '',
  '',
  '',
  't',
  '',
  '',
  '',
  'X',
  '',
  '\x1F',
  '}',
  '\x81',
  '',
  '=',
  '?',
  'j',
  '<',
  'S',
  '\x16',
  '',
  '',
  'G',
  'A',
  '\x04',
  '0',
  '',
  'i',
  '',
  '',
  'D',
  '',
  '',
  'H',
  '',
  '\x1B',
  '5',
  '',
  '',
  '',
  '',
  '',
  'p',
  's',
  '',
  '',
  '',
  '\x1E',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x19',
  '\n',
  ',',
  ';',
  '',
  'C',
  '',
  'w',
  '(',
  'E',
  '\x0E',
  '',
  '',
  '',
  'I',
  '4',
  'K',
  '',
  'J',
  '\"',
  'T',
  '\x14',
  '8',
  '\x8F',
  '\x01',
  ' ',
  '',
  '\x1A',
  'k',
  '',
  '',
  'u',
  '\x17',
  '',
  '',
  '7',
  '',
  'V',
  '',
  'F',
  '',
  '',
  '>',
  '',
  '',
  'l',
  'P',
  '',
  '\a',
  '',
  '',
  '',
  '',
  'a',
  '~',
  '\x0F',
  '/',
  '',
  '',
  '',
  '',
  'L',
  'h',
  'g',
  '\xFF',
  '^',
  '',
  '%',
  'c',
  '{',
  '\x06',
  '\x13',
  'o',
  'W',
  '',
  '-',
  '',
  '1',
  '',
  '\x8D',
  '',
  '',
  '',
  '\x1D',
  'r',
  '',
  '',
  'z',
  '\'',
  'd',
  '+',
  'm',
  '\v',
  '',
  '',
  'Z',
  '',
  '\x12',
  '',
  ':',
  '\x1C',
  '\x03',
  '',
  '3',
  'B',
  '',
  '',
  'e',
  '',
  '',
  '',
  '\x10',
  '',
  '\x7F',
  'x',
  '',
  '',
  '',
  '',
  '',
  '\\',
  '',
  '',
  '',
  'v',
  '\x9D',
  '\f',
  '2',
  '',
  '|',
  '\0',
  '',
  '[',
  'O',
  '',
  '',
  '.',
  '',
  '',
  '',
  '',
  '$',
  '',
  'q',
  '',
  '',
  '\t',
  '',
  '*',
  'U',
  '6',
  '_',
  '\x18',
  '',
  '',
  'n',
  '\b',
  'R',
  '',
  '',
  '',
  'M',
  '',
  '',
  '\x02',
  '\x15',
  '',
  'Y',
  '',
  'N',
  '',
  '',
  '',
  ']',
  '',
  '',
  '',
  'y',
  '',
  '',
  '',
  'Q',
  '\x90',
  '@',
  'f',
  '',
  '',
  '',
  'b',
  '',
  '&',
  '',
  '',
  '',
  '',
  '\x11',
  '\r',
  '',
  '`',
  ')',
  '#',
  '!',
  '9',
  '\x05',
  '',
  '2',
  'R',
  '',
  '/',
  '',
  '',
  '',
  '',
  'f',
  '',
  'm',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '1',
  '',
  '',
  '',
  '',
  '',
  'M',
  '',
  '9',
  '\"',
  '',
  '*',
  '',
  '#',
  'D',
  '',
  '8',
  '\x8F',
  '>',
  '',
  '\x1B',
  '\xFF',
  'Z',
  'F',
  '\v',
  '',
  '',
  '',
  '',
  '',
  'P',
  '\x16',
  '\x04',
  '',
  '',
  '@',
  '',
  '$',
  '\x12',
  '',
  '',
  ':',
  '',
  '%',
  '',
  'w',
  '?',
  'u',
  '\x81',
  'c',
  '',
  '\x18',
  '',
  '(',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\\',
  '',
  '',
  'E',
  '\x9D',
  '',
  ' ',
  '=',
  '',
  '',
  '!',
  '\x90',
  ',',
  '',
  '',
  'z',
  'Y',
  '}',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'Q',
  'h',
  '\x02',
  'o',
  '',
  'B',
  '+',
  '',
  '',
  '6',
  '_',
  '\x1D',
  '',
  '',
  '',
  '`',
  '\x1F',
  '',
  'l',
  'O',
  ';',
  'v',
  '4',
  '\x03',
  '',
  '',
  'q',
  '\x10',
  'S',
  '',
  'V',
  'G',
  'd',
  'n',
  '',
  '',
  '',
  '\x0E',
  '',
  '',
  '',
  '3',
  't',
  '',
  '\x8D',
  'i',
  '',
  '',
  'a',
  'U',
  '',
  'T',
  '-',
  '\x17',
  '\x01',
  '\f',
  '',
  '',
  'L',
  '',
  '',
  '~',
  '',
  '',
  '',
  'C',
  '\0',
  '.',
  '',
  'K',
  'x',
  '|',
  ']',
  'b',
  'W',
  '\x1E',
  '',
  '',
  '7',
  '',
  'N',
  '\x0F',
  '\x7F',
  '',
  '',
  '{',
  '',
  'H',
  '',
  '\r',
  '',
  '',
  '',
  '\x15',
  '\n',
  '',
  '&',
  '[',
  '5',
  '\x05',
  '',
  '',
  '\b',
  ')',
  '',
  'X',
  's',
  '<',
  '',
  '\x06',
  '\'',
  '',
  '\x11',
  '',
  'r',
  'j',
  '',
  '',
  'k',
  '',
  '',
  '\t',
  '\x19',
  '',
  '',
  '\x1C',
  'J',
  '',
  '',
  '',
  'I',
  'y',
  '\x13',
  'A',
  '\x14',
  'g',
  '\x1A',
  '\a',
  '',
  '',
  'e',
  '',
  '',
  '0',
  '',
  '^',
  '',
  'p',
  '',
  '',
  '',
  '',
  'E',
  '',
  '\x16',
  '',
  '\x8F',
  '\x03',
  'l',
  'x',
  '',
  '\x1F',
  'M',
  '\x1A',
  'e',
  'g',
  '\x14',
  'v',
  '',
  'C',
  '',
  '',
  '',
  'I',
  'q',
  '\x1B',
  '\\',
  '',
  '',
  '',
  '',
  '\x1D',
  '\x13',
  'a',
  '=',
  ']',
  '',
  'o',
  '',
  '',
  '',
  '',
  '',
  '\n',
  'U',
  '',
  '',
  '3',
  '',
  '',
  '',
  '',
  'u',
  '\a',
  '',
  '\t',
  '',
  '\x9D',
  '',
  '@',
  'A',
  '\xFF',
  '',
  '\"',
  '',
  '\x06',
  '',
  'W',
  '',
  '',
  't',
  '\r',
  '',
  '',
  '',
  '',
  '!',
  '',
  '[',
  '5',
  '\f',
  '&',
  '~',
  'i',
  '>',
  '',
  '',
  '',
  '',
  '',
  'T',
  'Q',
  '\x81',
  '',
  '\x8D',
  '\x7F',
  '',
  'k',
  '\b',
  '',
  'O',
  '',
  '{',
  '',
  '',
  '',
  '_',
  '}',
  '\x11',
  'K',
  'L',
  '',
  '',
  'r',
  '\x1C',
  '',
  '',
  '\x18',
  '',
  '\x10',
  '',
  '',
  'S',
  '\x1E',
  '',
  '`',
  '+',
  '',
  '',
  'G',
  'y',
  '^',
  ',',
  '',
  '',
  'D',
  '\x0F',
  'V',
  '%',
  '',
  '',
  '#',
  '7',
  '',
  '',
  '',
  '',
  '6',
  ';',
  '',
  '',
  '<',
  '',
  's',
  '',
  'Z',
  'B',
  '(',
  'P',
  'N',
  '8',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '',
  '',
  '',
  '',
  ')',
  '',
  'X',
  '',
  '',
  'd',
  '',
  '',
  'm',
  '\x02',
  '',
  '',
  '',
  '',
  'f',
  '',
  '',
  '',
  '\x15',
  '\'',
  '',
  '',
  ' ',
  '',
  '',
  'n',
  'Y',
  '?',
  '',
  '$',
  'z',
  '',
  '-',
  '\x04',
  '',
  '',
  '4',
  '',
  '',
  '',
  'J',
  'F',
  'p',
  'h',
  '\x17',
  'R',
  '\x01',
  'H',
  '\x90',
  '',
  '',
  '',
  '|',
  '',
  '9',
  '\x0E',
  '',
  '0',
  'w',
  '\x12',
  '.',
  '',
  '\x19',
  '',
  '1',
  '',
  '',
  '',
  '',
  '2',
  '',
  '',
  'j',
  ':',
  '',
  '',
  '/',
  '\0',
  '\x05',
  'c',
  '*',
  'b',
  '',
  '',
  '',
  ',',
  '\x13',
  '\t',
  'X',
  '5',
  '',
  '',
  '0',
  '',
  'q',
  '',
  '>',
  '\xFF',
  '',
  '',
  ';',
  '`',
  '*',
  '',
  '',
  '',
  '',
  '',
  '\x1F',
  '',
  '',
  '',
  ')',
  '',
  '',
  '\v',
  'O',
  '',
  '\r',
  '',
  '+',
  '',
  '}',
  '',
  'E',
  '\x1C',
  '',
  '=',
  '\x14',
  '\n',
  '',
  '',
  '',
  '\x1D',
  '',
  '',
  '',
  '',
  '',
  '[',
  '',
  '/',
  '\'',
  '',
  '',
  '',
  '',
  '',
  '#',
  'r',
  '',
  '_',
  '',
  '',
  'B',
  '',
  '',
  '',
  '\\',
  '',
  'M',
  'f',
  'd',
  '4',
  '',
  '',
  '(',
  '',
  'W',
  '',
  '\x1A',
  '\x1B',
  'j',
  'L',
  'P',
  '\x12',
  'N',
  '',
  '',
  '',
  '?',
  '',
  '\a',
  '^',
  'c',
  '9',
  '',
  '',
  '|',
  '',
  '\x90',
  '',
  'y',
  's',
  '\x03',
  '',
  '',
  '',
  '',
  '~',
  '',
  'z',
  '',
  '\x01',
  '\f',
  '\x10',
  '',
  'Y',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  '8',
  'K',
  '@',
  'o',
  'm',
  '\x02',
  '',
  '\x7F',
  ']',
  '<',
  '',
  'a',
  'g',
  '',
  'G',
  '3',
  '\0',
  '',
  '\x81',
  '7',
  '1',
  '',
  ' ',
  'b',
  '',
  '',
  'A',
  '\x16',
  '\x04',
  '',
  'R',
  '',
  '',
  'p',
  '',
  '\x05',
  '',
  '',
  'V',
  '',
  'Z',
  '\x18',
  '\x1E',
  'h',
  '',
  'J',
  'D',
  '',
  '\x0E',
  '\b',
  '',
  '\x8D',
  '',
  'i',
  '',
  '6',
  '',
  '',
  '',
  '',
  '',
  'Q',
  '\x0F',
  'x',
  '',
  '',
  '\x19',
  '\x11',
  '',
  '\x9D',
  '',
  '',
  'C',
  '\x17',
  '',
  '',
  'I',
  'T',
  '\x8F',
  '',
  'H',
  't',
  '',
  '',
  '%',
  'l',
  '',
  '',
  '',
  '&',
  'U',
  'n',
  '',
  '',
  '',
  '$',
  '',
  '',
  ':',
  '{',
  '',
  'u',
  'S',
  'w',
  '',
  'k',
  '-',
  '',
  '',
  'e',
  '',
  '',
  '',
  '',
  '.',
  '!',
  '',
  '',
  '',
  '',
  '2',
  'v',
  '',
  '\x06',
  '\"',
  'F',
  '\xFF',
  '\x04',
  ')',
  '',
  '',
  '',
  '',
  '\x1A',
  '2',
  '>',
  '',
  '\x8F',
  'i',
  '',
  'm',
  '\x90',
  '',
  '',
  'N',
  ':',
  'I',
  '+',
  '',
  '',
  '',
  '',
  '(',
  'o',
  '',
  'Z',
  '\r',
  '\n',
  '',
  '~',
  '\f',
  '',
  'a',
  '',
  '',
  '',
  '',
  '[',
  '',
  '',
  '/',
  'G',
  '\"',
  '^',
  '',
  '1',
  'J',
  '',
  '#',
  '',
  'y',
  '',
  '@',
  '\x0E',
  'f',
  '',
  '',
  '?',
  '!',
  'X',
  '',
  ']',
  '',
  '',
  '',
  '',
  '',
  '',
  '$',
  'F',
  '',
  '_',
  '',
  'V',
  'R',
  'n',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'g',
  '',
  'Q',
  '|',
  '8',
  '',
  '',
  '9',
  '',
  '',
  '\x81',
  '\x9D',
  '',
  '',
  '',
  '\\',
  'W',
  '%',
  '\x12',
  '',
  '.',
  '',
  'S',
  '\x15',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  '\x11',
  'w',
  'x',
  '',
  '',
  '\x05',
  '',
  '',
  '4',
  '\x17',
  '\x1D',
  '',
  '\t',
  '',
  '5',
  '',
  '',
  '\x19',
  '',
  '&',
  '',
  '\x01',
  '',
  '3',
  '',
  '',
  'u',
  '',
  '',
  'M',
  'h',
  '\x16',
  '\x0F',
  '',
  '',
  '',
  'z',
  'Y',
  'K',
  '',
  '0',
  '',
  '',
  '\x13',
  '',
  '6',
  '',
  '\x03',
  '\a',
  '',
  '-',
  '',
  '\'',
  '',
  'k',
  'H',
  'U',
  'P',
  '',
  '\x1B',
  '\x1E',
  '`',
  '',
  '}',
  'D',
  'r',
  'T',
  '\x02',
  'B',
  'b',
  '\0',
  '',
  '',
  '',
  'e',
  '',
  '',
  '',
  '',
  ',',
  '',
  '',
  '',
  '',
  '\x10',
  '',
  'L',
  't',
  'O',
  '',
  '',
  '',
  '',
  '',
  '',
  'C',
  '\x8D',
  '',
  '\x18',
  'd',
  '\b',
  'p',
  '',
  '\x14',
  '{',
  'A',
  '\x1C',
  'E',
  ';',
  'l',
  'c',
  '',
  '',
  's',
  '',
  '',
  'v',
  '7',
  '\x7F',
  '',
  '',
  '<',
  '=',
  '',
  '',
  '\x06',
  '',
  ' ',
  'j',
  'q',
  '',
  '\v',
  '',
  '',
  '',
  '*',
  '',
  '',
  '',
  '\x03',
  '',
  'W',
  '\x1F',
  '\x1B',
  '',
  '.',
  ']',
  '\x7F',
  'S',
  'X',
  '',
  '',
  '',
  ')',
  '&',
  '',
  '',
  '',
  '',
  '9',
  'h',
  '1',
  'M',
  'a',
  '',
  '',
  '',
  '(',
  '{',
  '',
  '',
  '\'',
  '',
  'C',
  '',
  '',
  'v',
  'w',
  '',
  '',
  '',
  '[',
  'u',
  '',
  '',
  '%',
  '',
  '<',
  'O',
  '',
  'l',
  '',
  'P',
  '',
  '',
  'i',
  '',
  '=',
  '\x1D',
  ',',
  '\x90',
  '',
  '',
  '',
  '?',
  '',
  '',
  '`',
  '_',
  '\x1E',
  '6',
  '',
  '',
  '\x05',
  'g',
  'r',
  '',
  '4',
  '',
  '',
  '',
  '',
  'D',
  '',
  't',
  '5',
  'L',
  '',
  'R',
  '',
  '',
  '',
  'p',
  '',
  '',
  '8',
  '',
  '',
  'z',
  '',
  '\x12',
  '\x06',
  '\r',
  '\0',
  's',
  '',
  '',
  '',
  'm',
  '',
  '',
  'T',
  '',
  '',
  '^',
  '\x1C',
  '\x17',
  '',
  ':',
  '*',
  '',
  '\"',
  '',
  '',
  '',
  '\x19',
  ' ',
  '\t',
  '\x8F',
  '',
  '',
  'y',
  '',
  '',
  '',
  '\f',
  '',
  '',
  'Z',
  '',
  'B',
  '/',
  '\x9D',
  '',
  '>',
  'G',
  '\x81',
  '',
  '\x01',
  '7',
  '',
  '',
  '',
  '~',
  '\n',
  'I',
  '\x0F',
  'e',
  'q',
  '\x18',
  '',
  '\x16',
  '',
  '',
  'f',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  '',
  'A',
  '2',
  '',
  '',
  '',
  '',
  '\x15',
  '',
  '@',
  '',
  '\x13',
  '',
  '\xFF',
  'U',
  '',
  'K',
  'd',
  '\a',
  '',
  'j',
  '',
  'b',
  'V',
  '',
  '',
  '',
  '+',
  '',
  '$',
  '',
  '',
  '\x8D',
  '\\',
  'k',
  '\x11',
  '!',
  '\x10',
  'E',
  '',
  'c',
  'J',
  'Q',
  '',
  '',
  '',
  'Y',
  '\x1A',
  '\b',
  '',
  '',
  '}',
  '',
  '',
  '',
  '\v',
  '0',
  ';',
  '\x04',
  'N',
  '\x14',
  '',
  'F',
  'n',
  '',
  'x',
  '-',
  '',
  '',
  '',
  'o',
  '\x0E',
  '',
  '#',
  '',
  '|',
  '',
  '',
  'H',
  '',
  '3',
  '',
  '',
  '',
  '',
  'v',
  '#',
  '\x81',
  '',
  '',
  '',
  '',
  '&',
  'x',
  '',
  'b',
  '\f',
  '',
  '',
  '',
  '\x15',
  'p',
  'h',
  '',
  '\x16',
  'i',
  '',
  '',
  '',
  'z',
  'U',
  '',
  'd',
  '%',
  '',
  'C',
  '.',
  'N',
  'D',
  '',
  'V',
  '',
  '{',
  '\x1B',
  '3',
  'n',
  '',
  '!',
  '\\',
  '',
  '',
  '',
  '',
  '',
  '4',
  '',
  '^',
  '',
  ',',
  '2',
  '',
  '\x04',
  '',
  '',
  'Y',
  '@',
  '\x06',
  '\r',
  '_',
  '',
  '\x1E',
  '',
  '',
  '\x8D',
  'q',
  '\x19',
  '',
  '',
  '|',
  '',
  'T',
  '\x12',
  '',
  'Q',
  '',
  '\"',
  '',
  '',
  '\x1C',
  '>',
  '',
  'W',
  '',
  '',
  '',
  '\x17',
  '',
  '7',
  '',
  '',
  '\x13',
  '\n',
  'S',
  '',
  '\x90',
  'r',
  '\t',
  '',
  '',
  '\x14',
  'f',
  '',
  '\x18',
  '',
  'j',
  '\x11',
  '5',
  'M',
  '\0',
  '$',
  'B',
  '',
  '',
  '\x7F',
  '',
  '',
  ']',
  '',
  'P',
  '\xFF',
  'o',
  '',
  '',
  'k',
  '',
  '',
  '',
  '',
  '\v',
  '\x05',
  '',
  '',
  '',
  'a',
  ' ',
  '~',
  'F',
  '',
  '',
  '',
  '+',
  '',
  '\x9D',
  'R',
  '*',
  '',
  '',
  '\x0E',
  'G',
  'A',
  '',
  '',
  '}',
  'm',
  'O',
  'E',
  '',
  '',
  '-',
  '',
  '',
  '',
  'y',
  'L',
  '/',
  '8',
  '9',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'l',
  'X',
  '\x1A',
  'I',
  '',
  '[',
  '',
  '',
  '0',
  'H',
  '\x1D',
  'w',
  ';',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'K',
  '',
  't',
  ':',
  '',
  'g',
  '',
  '(',
  '',
  '\x03',
  '<',
  '',
  '',
  '',
  '',
  '\'',
  'c',
  '\x10',
  'J',
  'Z',
  '\a',
  'u',
  '1',
  '6',
  ')',
  '',
  '\x1F',
  '',
  '?',
  '',
  '\x8F',
  '',
  '',
  '',
  '',
  '',
  '\x01',
  '',
  '',
  '',
  '',
  '\x0F',
  '\b',
  'e',
  '\x02',
  's',
  '',
  '',
  '',
  '',
  '',
  '=',
  '`',
  ')',
  '',
  '9',
  'u',
  '\\',
  '~',
  ' ',
  '\x81',
  '\x0E',
  '',
  'I',
  '\x1E',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  '\x17',
  ';',
  '@',
  '',
  '\xFF',
  '_',
  '',
  '',
  '\x16',
  'y',
  '',
  'b',
  '2',
  '',
  '',
  '8',
  'S',
  '',
  '',
  '',
  '',
  'B',
  '',
  '',
  '',
  ':',
  '',
  '\a',
  '',
  '',
  'N',
  '',
  '\x13',
  '',
  'D',
  '',
  '',
  'c',
  '[',
  '',
  '3',
  '',
  '#',
  'J',
  '',
  '',
  'i',
  '',
  'd',
  '+',
  '',
  '',
  '',
  'j',
  '',
  '\t',
  '.',
  '',
  '',
  '\x1A',
  '\x7F',
  '\'',
  '',
  '<',
  '',
  '',
  '',
  '',
  'w',
  '=',
  '',
  '',
  '\x8F',
  '^',
  'K',
  '',
  '\x0F',
  '\x02',
  '',
  'C',
  '',
  'E',
  '',
  ']',
  '?',
  '\0',
  'l',
  '\x11',
  '\x1F',
  'P',
  '\x9D',
  'F',
  '',
  'M',
  '\x15',
  'o',
  'H',
  '1',
  '',
  '',
  's',
  '\x10',
  '',
  'f',
  '',
  '',
  'x',
  '',
  'v',
  '',
  '\x01',
  '',
  'U',
  '{',
  '',
  '\n',
  '\"',
  '',
  'V',
  '',
  '\x12',
  '*',
  'm',
  '',
  'h',
  '',
  '',
  '',
  '',
  '',
  '}',
  '!',
  '|',
  '',
  '',
  'q',
  '\x06',
  '',
  'O',
  'n',
  '',
  '',
  '',
  '',
  '\x04',
  '',
  '',
  ',',
  '',
  '\x8D',
  '\x1C',
  '-',
  't',
  '7',
  '',
  '',
  '',
  'R',
  '&',
  '',
  '',
  'T',
  '',
  '\x1D',
  '%',
  '',
  'z',
  '',
  '',
  '>',
  'A',
  '',
  '',
  '',
  '',
  'X',
  'W',
  '(',
  '',
  '',
  'Q',
  '',
  '',
  '\v',
  '',
  'L',
  '',
  '\x1B',
  '\x05',
  '\x18',
  '',
  'G',
  '',
  'r',
  '',
  '',
  'Z',
  '',
  '5',
  '',
  '\b',
  '',
  'g',
  'Y',
  'k',
  '',
  '0',
  '',
  '6',
  '\x14',
  'p',
  '`',
  '',
  '',
  'e',
  '$',
  '',
  '',
  '',
  '',
  '\r',
  '',
  '',
  '4',
  '',
  'a',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x03',
  '',
  '',
  '/',
  '\f',
  '\x90',
  '',
  '\x06',
  ')',
  '',
  '_',
  '',
  '<',
  '',
  '',
  'V',
  '',
  '',
  '`',
  'F',
  'd',
  '',
  '',
  '',
  '\x8F',
  '\x18',
  '',
  '',
  '',
  '',
  '',
  'j',
  'r',
  '',
  'D',
  '',
  'E',
  '',
  'I',
  '',
  '$',
  '\x9D',
  '',
  '',
  '\x12',
  'C',
  'T',
  '\x15',
  'f',
  '',
  '\v',
  '',
  '',
  '',
  '\x17',
  '#',
  'q',
  ',',
  '',
  '',
  '',
  '\f',
  '7',
  '',
  '',
  '+',
  'c',
  '2',
  '',
  '',
  'n',
  '',
  '/',
  '',
  'Q',
  '',
  '\x1A',
  '\x1F',
  'G',
  ';',
  '',
  '\x10',
  '',
  '&',
  '',
  '',
  'z',
  'o',
  '\x7F',
  'O',
  '',
  '',
  '\xFF',
  '{',
  '',
  'J',
  'A',
  ':',
  '9',
  '?',
  '\x1E',
  'u',
  '',
  '',
  '',
  'a',
  '',
  '',
  '=',
  '\x1D',
  '',
  '\x01',
  '',
  '|',
  '',
  '',
  '',
  '\'',
  '',
  '',
  '',
  'x',
  '',
  '',
  'm',
  't',
  '',
  '',
  '',
  'w',
  '',
  '',
  ' ',
  '',
  '^',
  '',
  '*',
  '',
  '\x81',
  '>',
  'h',
  '',
  'H',
  'P',
  '',
  '',
  '}',
  '',
  '',
  '',
  'y',
  '',
  '',
  '6',
  '\a',
  '\b',
  '',
  '',
  'U',
  '',
  '\x13',
  '\n',
  '',
  '',
  'Z',
  '\x02',
  '',
  ']',
  'R',
  '\x19',
  'X',
  'g',
  '',
  '',
  '\\',
  '\"',
  's',
  '\x05',
  '',
  '\x11',
  '',
  '\x03',
  '',
  '',
  '',
  '',
  '.',
  '',
  '',
  '',
  '\x16',
  'K',
  '',
  'b',
  '\x14',
  '',
  '',
  'e',
  'N',
  '',
  '%',
  '',
  '',
  '\x8D',
  '\t',
  '5',
  '\x04',
  '',
  '',
  '(',
  '',
  'l',
  '',
  '\r',
  'i',
  '@',
  '',
  'M',
  '!',
  '',
  '0',
  'p',
  'L',
  '',
  '',
  '',
  '',
  '',
  'B',
  'Y',
  '',
  '',
  '\x1B',
  '1',
  '',
  'k',
  '\x90',
  '',
  '-',
  '',
  '',
  'v',
  '',
  '~',
  '3',
  '8',
  '4',
  '\x0E',
  '',
  '',
  'W',
  '\x1C',
  '\0',
  '',
  '',
  '',
  '',
  '',
  '[',
  '',
  'S',
  '\x0F',
  '*',
  '',
  'b',
  '4',
  '\x7F',
  'Y',
  '\v',
  '1',
  'n',
  '',
  '',
  '8',
  '',
  'w',
  '',
  '',
  '',
  '',
  '',
  '',
  'H',
  '',
  '',
  '',
  '',
  '\x1B',
  '\f',
  'g',
  '\x17',
  '',
  '7',
  ',',
  '',
  '\x8D',
  '',
  '',
  'y',
  '',
  '',
  'M',
  '',
  '',
  '',
  '',
  '[',
  'F',
  'B',
  'I',
  '\x15',
  '\"',
  'U',
  '',
  '',
  '',
  '',
  'A',
  '=',
  '\x06',
  '\x04',
  '',
  'e',
  'J',
  'd',
  '',
  '<',
  '',
  '\n',
  '%',
  'Z',
  '!',
  '',
  'r',
  '9',
  '',
  '',
  '',
  'j',
  '',
  '',
  '\'',
  '',
  '',
  't',
  '',
  '3',
  '',
  '',
  '',
  '',
  '-',
  'p',
  '(',
  '\x16',
  '',
  '',
  '',
  '',
  '\x9D',
  '\x1F',
  'v',
  '',
  '\x1D',
  '{',
  '',
  '',
  '\x81',
  '#',
  '',
  '|',
  ' ',
  ']',
  '',
  '',
  '',
  'R',
  '\x05',
  ':',
  '',
  '\x01',
  '\x8F',
  '\x03',
  '',
  '',
  '',
  '',
  '\x18',
  '',
  '',
  '.',
  '',
  '',
  '',
  '',
  '\x10',
  'V',
  'k',
  '',
  '',
  '',
  'z',
  '',
  'f',
  'a',
  'q',
  '\x11',
  '',
  '\x14',
  'L',
  '\x19',
  '',
  '',
  's',
  '',
  '\x1A',
  '',
  'u',
  '',
  'D',
  '^',
  'G',
  '/',
  '',
  'h',
  'C',
  'N',
  '',
  'S',
  '_',
  '\a',
  '',
  '',
  '',
  'T',
  'x',
  '',
  '\t',
  '',
  '',
  '~',
  '',
  'E',
  '5',
  'i',
  '0',
  '',
  '6',
  '\x0E',
  ';',
  '',
  '',
  '',
  '\x13',
  '@',
  '',
  '',
  '',
  '>',
  '\r',
  '\x0F',
  'm',
  '',
  '\x02',
  '',
  '',
  'W',
  '',
  '\x90',
  '`',
  '\xFF',
  'O',
  'Q',
  'l',
  '',
  '',
  '',
  '',
  'c',
  '',
  '',
  'X',
  '',
  '+',
  '',
  '',
  '',
  '\x12',
  '',
  '2',
  '',
  '',
  '',
  '$',
  '',
  '\x1E',
  '?',
  '',
  '',
  '',
  '',
  'K',
  '\x1C',
  '',
  '',
  ')',
  '',
  'P',
  'o',
  '',
  '&',
  '',
  '\b',
  '\\',
  '}',
  '',
  '\0',
  '',
  '',
  '',
  'I',
  '',
  '\n',
  '',
  'T',
  '\x0E',
  '',
  '',
  '\r',
  '{',
  '%',
  '',
  '',
  '',
  'E',
  '*',
  '',
  '',
  '',
  '',
  'o',
  's',
  '\x9D',
  '',
  '#',
  '',
  '~',
  '',
  'f',
  '',
  '',
  '',
  '\\',
  '',
  '',
  '',
  '',
  '',
  ';',
  'r',
  'C',
  '',
  '',
  '',
  '',
  'V',
  '',
  '',
  '',
  'M',
  '',
  'Q',
  '',
  'c',
  '',
  'F',
  '',
  'S',
  '\xFF',
  '\x14',
  't',
  '@',
  '&',
  'O',
  '',
  '',
  '',
  '\x1C',
  '',
  '',
  '',
  '\f',
  '',
  'a',
  '',
  '',
  '\x18',
  '',
  '',
  'k',
  '',
  '=',
  '',
  '',
  '\x7F',
  '\x06',
  '\t',
  '',
  'u',
  '',
  'j',
  '0',
  '\x04',
  '\x1E',
  'R',
  '_',
  '',
  ',',
  '\x0F',
  '',
  '\x11',
  '',
  '',
  'b',
  '',
  '',
  '2',
  '\x19',
  '',
  '\x05',
  'y',
  ')',
  'z',
  '',
  '',
  '>',
  '\x1F',
  '[',
  'N',
  '<',
  'U',
  '',
  'e',
  '',
  '',
  '',
  '\x16',
  '\x02',
  '\x12',
  '',
  '.',
  '',
  'm',
  '',
  '',
  '',
  '',
  '\x90',
  '\b',
  '',
  '',
  'l',
  '',
  '',
  'Z',
  '/',
  'q',
  '',
  '?',
  '+',
  '',
  '',
  '3',
  '4',
  '',
  'h',
  '',
  '',
  '',
  '',
  ':',
  '',
  '',
  '\'',
  '',
  '\x03',
  '\x1A',
  '',
  '\x15',
  '',
  '\x17',
  '',
  '7',
  '',
  '',
  'L',
  '\x1B',
  '',
  'n',
  '9',
  'p',
  '8',
  '',
  '\"',
  'B',
  '',
  '',
  '',
  '\x1D',
  ' ',
  '\a',
  'K',
  '',
  '',
  '',
  'i',
  '',
  '\0',
  '\x8F',
  '',
  '\x01',
  '',
  '|',
  '',
  '',
  '',
  '',
  '',
  'x',
  '',
  '',
  '',
  'g',
  '',
  ']',
  '',
  '',
  'v',
  '\v',
  '^',
  'd',
  '!',
  '$',
  'w',
  '',
  '`',
  '5',
  '',
  '',
  'D',
  '',
  '}',
  'H',
  '',
  'Y',
  '',
  '\x13',
  '',
  '(',
  '1',
  'J',
  'P',
  '\x81',
  '6',
  'W',
  '',
  'A',
  '',
  '\x10',
  'G',
  '',
  '\x8D',
  'X',
  '-',
  '\x8D',
  '\x0E',
  '',
  '>',
  '\r',
  '',
  '\x16',
  'P',
  '\x06',
  '&',
  '',
  '',
  'B',
  '%',
  '4',
  '',
  '\x1F',
  '_',
  '8',
  '',
  '\x1D',
  'h',
  '\xFF',
  '',
  '',
  '.',
  'j',
  '',
  '\x1B',
  'b',
  '',
  '',
  '',
  '\x9D',
  '6',
  '',
  'y',
  ']',
  '',
  'q',
  'i',
  '',
  '9',
  'J',
  '',
  '\x03',
  '',
  '\b',
  'L',
  '\t',
  '',
  '',
  '\f',
  '\x17',
  '\x13',
  'V',
  'G',
  '',
  '\x18',
  '',
  '\a',
  '',
  '',
  '/',
  '\x0F',
  '',
  '',
  '',
  '5',
  'f',
  '',
  'N',
  'l',
  '',
  'S',
  '',
  '',
  '',
  '\x1A',
  '',
  '+',
  'K',
  '',
  '',
  '',
  '',
  '',
  'x',
  'Z',
  '',
  '',
  '\x1C',
  '\x19',
  ':',
  '',
  '',
  '',
  '',
  '\'',
  'E',
  '',
  '',
  '',
  '\x81',
  '',
  '\x7F',
  '\v',
  'u',
  '',
  '',
  '<',
  '\x90',
  '\x10',
  'n',
  'T',
  'H',
  '',
  '*',
  '~',
  '',
  '',
  '',
  'C',
  'z',
  '3',
  '',
  'a',
  '',
  '',
  ',',
  '',
  ';',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x05',
  '\x04',
  'w',
  'W',
  '',
  'r',
  ')',
  'd',
  'M',
  '=',
  '',
  's',
  'o',
  '(',
  '',
  'v',
  '',
  '',
  '',
  '\x15',
  'O',
  '\0',
  'R',
  '',
  '',
  'A',
  '',
  '2',
  '',
  '',
  '\x11',
  'e',
  '',
  '\x8F',
  '1',
  'k',
  '@',
  '7',
  '',
  '\x01',
  'Q',
  '',
  '`',
  '\x02',
  '',
  'U',
  '',
  '{',
  'X',
  'p',
  'c',
  ' ',
  '}',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '$',
  '0',
  '',
  '',
  '',
  'g',
  '\x14',
  '',
  '',
  'D',
  '\n',
  '',
  '',
  '',
  'Y',
  't',
  '\x1E',
  '',
  '^',
  '',
  '\"',
  '',
  '',
  '',
  '-',
  '',
  '#',
  '\\',
  'm',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '[',
  '',
  'I',
  '?',
  '!',
  '',
  '',
  '',
  '',
  '',
  'F',
  '|',
  '',
  '\x12',
  '',
  '9',
  '%',
  '',
  '6',
  '',
  '',
  '',
  '',
  '',
  '\x81',
  '',
  'k',
  '5',
  '',
  'm',
  '',
  '(',
  '',
  '{',
  '/',
  '',
  '.',
  'E',
  '\x0F',
  '\x19',
  '',
  '\\',
  '\x17',
  '\v',
  '\x9D',
  '!',
  '&',
  'V',
  '',
  '',
  '\x10',
  'Z',
  '',
  ';',
  'b',
  '',
  '$',
  '0',
  '',
  'G',
  '',
  'I',
  '\x1C',
  '\x18',
  '',
  'X',
  '',
  '',
  'p',
  '|',
  '\n',
  'h',
  ']',
  '',
  '',
  'O',
  '',
  '',
  '\f',
  'g',
  '\x8D',
  '[',
  '2',
  '\x05',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1F',
  '',
  '\r',
  'f',
  'J',
  '',
  ' ',
  '',
  '\x16',
  '',
  'u',
  '',
  '',
  'i',
  '\x1E',
  'y',
  'e',
  '\x14',
  '8',
  '\x03',
  'z',
  '',
  '*',
  '',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  '\x11',
  'Y',
  '?',
  '\x1B',
  '',
  'R',
  '',
  '',
  '',
  '',
  '',
  '\x04',
  '',
  '_',
  '',
  '',
  'W',
  '',
  '~',
  '',
  '',
  '',
  '',
  '\x01',
  '',
  '',
  '',
  '\x1D',
  '',
  '',
  '\x12',
  '',
  'x',
  '',
  '',
  '#',
  '',
  '',
  't',
  '',
  'j',
  '',
  '',
  '\x8F',
  '7',
  '\x1A',
  ',',
  '',
  'B',
  'o',
  '',
  'U',
  'P',
  '>',
  '\0',
  '1',
  '',
  '\x02',
  '',
  'N',
  '',
  '',
  '',
  '',
  '\xFF',
  ')',
  '',
  '',
  '',
  '<',
  '`',
  'D',
  'F',
  'l',
  '',
  '',
  '3',
  'w',
  '',
  '',
  'T',
  '',
  '',
  '+',
  '',
  '',
  '',
  '\t',
  '',
  'H',
  '\'',
  '',
  '',
  'L',
  '\b',
  '\"',
  '\x06',
  '\a',
  'v',
  '\x13',
  'S',
  'c',
  'r',
  '@',
  ':',
  'K',
  '',
  '',
  'n',
  '\x7F',
  '',
  '',
  '',
  '',
  'Q',
  '',
  '',
  '',
  '',
  '}',
  'd',
  '',
  'M',
  '',
  '',
  '',
  '^',
  '',
  '',
  '',
  '',
  '',
  '=',
  'A',
  '-',
  '\x0E',
  '',
  '\x90',
  '',
  'C',
  's',
  'a',
  '',
  '',
  '4',
  '',
  '',
  'q',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x18',
  '',
  '',
  '',
  '',
  'G',
  'l',
  '',
  'Z',
  'F',
  '',
  '',
  'S',
  '',
  '',
  '\x11',
  '{',
  '',
  '\x0F',
  '',
  '',
  '',
  'y',
  '',
  'i',
  '',
  '',
  '',
  '7',
  '',
  '<',
  '\x13',
  '',
  '',
  '\x03',
  '%',
  '?',
  '',
  '\\',
  'N',
  '',
  '',
  'j',
  '',
  '\a',
  '',
  'X',
  'C',
  'A',
  '',
  'o',
  '',
  '',
  '',
  '',
  '\x7F',
  's',
  '\x01',
  ':',
  '.',
  '',
  '',
  '',
  '',
  ']',
  'x',
  '',
  'b',
  '$',
  '',
  'c',
  '',
  '',
  'I',
  '',
  '',
  '9',
  '',
  ')',
  '',
  'r',
  'u',
  '8',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'R',
  '5',
  'n',
  '',
  '~',
  '',
  '',
  '\v',
  '\x06',
  '_',
  '',
  '\x17',
  '',
  '',
  '',
  '>',
  'K',
  't',
  '',
  'w',
  'Y',
  'U',
  '=',
  '\x81',
  '\0',
  '',
  '',
  '}',
  '\x8D',
  'g',
  '\x16',
  'z',
  '[',
  '',
  '#',
  'H',
  '',
  '',
  '',
  '',
  '\x05',
  'v',
  '',
  '\x0E',
  '\b',
  'Q',
  '',
  '\t',
  '\x10',
  '',
  'V',
  '!',
  '\x12',
  '',
  '\x1C',
  '',
  '-',
  '\"',
  '\x1B',
  '',
  '',
  '',
  'W',
  '',
  '',
  ',',
  '^',
  '',
  '',
  'O',
  '',
  '\xFF',
  '',
  '|',
  '\'',
  '\x1A',
  '',
  '',
  '',
  '',
  '\x9D',
  '',
  '\x90',
  'J',
  '\n',
  '',
  '\x14',
  '',
  '',
  '',
  '(',
  '0',
  '`',
  '',
  '+',
  '',
  '\x1E',
  '',
  '',
  '',
  '\x8F',
  '3',
  '',
  '',
  'k',
  'h',
  '',
  'B',
  '\x19',
  '\x1F',
  '',
  'T',
  '\x02',
  '',
  'q',
  'a',
  ';',
  '',
  '',
  'E',
  '@',
  '',
  '',
  '',
  '1',
  '\f',
  '',
  '',
  'P',
  'D',
  'e',
  'f',
  '',
  ' ',
  'M',
  '\x04',
  '\x15',
  '4',
  'L',
  '&',
  '',
  '',
  '',
  'p',
  '',
  '/',
  '2',
  'd',
  '',
  '',
  '',
  '',
  '\x1D',
  '',
  '',
  '',
  '\r',
  'm',
  '6',
  '',
  '*',
  'E',
  'x',
  '!',
  'C',
  '\x10',
  '\x04',
  '',
  '',
  '',
  'h',
  '<',
  '$',
  'g',
  '=',
  '',
  '',
  '',
  'd',
  '',
  '?',
  '\f',
  '0',
  'v',
  '\x15',
  '',
  '*',
  '',
  '',
  'c',
  '',
  'R',
  '',
  '',
  '',
  '\x9D',
  'L',
  '',
  '>',
  '',
  '',
  '\x7F',
  '\x18',
  'p',
  '',
  '',
  '',
  'w',
  '',
  ',',
  ':',
  'J',
  '',
  ']',
  'z',
  ')',
  '',
  'n',
  '',
  '@',
  '\x17',
  '.',
  '',
  'r',
  '',
  '',
  '\xFF',
  '',
  '',
  '',
  'P',
  'Q',
  'm',
  '',
  '',
  '',
  '',
  '',
  '\x14',
  '8',
  '',
  '',
  '\\',
  '',
  '',
  '',
  '',
  '{',
  '',
  '',
  'q',
  '',
  '',
  '',
  'S',
  '(',
  'D',
  '3',
  'H',
  '',
  '',
  '\t',
  '\x1F',
  '',
  '\x12',
  's',
  '7',
  '',
  '\x81',
  '9',
  '',
  '\x8D',
  '}',
  '\b',
  'O',
  '',
  '',
  'y',
  '\v',
  '',
  '#',
  '|',
  'K',
  '',
  '\x06',
  'Z',
  '',
  'b',
  '-',
  'T',
  '',
  '',
  '',
  '',
  '',
  'a',
  '\x11',
  '',
  '',
  '',
  '',
  '%',
  '\x05',
  '',
  '\a',
  '',
  '',
  '',
  '',
  'B',
  '',
  'M',
  '',
  '',
  '',
  '',
  '\x1E',
  '',
  'N',
  '\x1D',
  '',
  '',
  '',
  '',
  '~',
  '',
  '\'',
  '_',
  'I',
  '',
  '\x8F',
  '\x0E',
  'e',
  'X',
  '',
  '',
  '\r',
  '',
  ' ',
  '',
  '',
  '',
  '5',
  '\x02',
  '',
  '/',
  '',
  '\x16',
  '\x1B',
  '',
  '1',
  '',
  '',
  '',
  '&',
  '',
  '',
  '\x0F',
  '',
  '',
  'f',
  '\0',
  '',
  '',
  't',
  '',
  '`',
  '',
  '[',
  '',
  '4',
  '6',
  '\x90',
  '',
  '\x1A',
  'o',
  'k',
  '',
  '',
  'G',
  'l',
  'A',
  '',
  '',
  '+',
  '',
  '',
  '\"',
  '',
  '^',
  'U',
  '',
  '\x03',
  'i',
  '',
  '',
  '',
  '',
  'Y',
  '',
  'F',
  'W',
  '',
  '\n',
  '',
  '\x1C',
  'u',
  'j',
  'V',
  '2',
  ';',
  '',
  '',
  '',
  '\x13',
  '\x19',
  '\x01',
  'L',
  '',
  '\x90',
  '2',
  '',
  't',
  '\x10',
  '',
  '',
  'n',
  '\x1D',
  '',
  ']',
  '\x0F',
  '%',
  'l',
  '',
  '',
  'j',
  '',
  '',
  ':',
  '',
  '',
  'A',
  '1',
  '}',
  '',
  'b',
  '',
  '\f',
  '',
  '',
  '\x02',
  '',
  '',
  '',
  'g',
  '',
  'E',
  '\x17',
  '',
  '^',
  '',
  '',
  '\0',
  '',
  '',
  '',
  '',
  '',
  '\"',
  '',
  '3',
  '8',
  '\x9D',
  ')',
  '',
  'f',
  '',
  '/',
  '',
  'h',
  'P',
  'd',
  '',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  'k',
  'm',
  '(',
  '*',
  '',
  'S',
  '',
  '\x19',
  '?',
  '4',
  '\x1E',
  '',
  '',
  '',
  '',
  '',
  '',
  'B',
  'c',
  '\x14',
  '6',
  '',
  '',
  '\x1F',
  'q',
  '|',
  '',
  'D',
  '',
  '9',
  'z',
  '',
  '',
  '',
  'X',
  '!',
  '\x18',
  '',
  '0',
  '\x8F',
  '',
  '',
  'p',
  'v',
  'V',
  '7',
  '',
  '\x1B',
  'U',
  '',
  '',
  '\x04',
  'e',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  'w',
  '',
  '',
  '',
  '',
  '',
  'R',
  '',
  '+',
  '\x1C',
  'N',
  '\x03',
  'C',
  '',
  '-',
  '\n',
  '',
  '',
  '',
  '',
  '',
  '<',
  'G',
  'o',
  '',
  '\b',
  '',
  '\x06',
  '\'',
  '\x1A',
  '\r',
  '\x11',
  'O',
  'Y',
  '\v',
  '>',
  '',
  '\x16',
  ';',
  '',
  '',
  'F',
  '',
  'K',
  '',
  ' ',
  '5',
  '',
  '',
  '\x13',
  'H',
  '',
  'u',
  '\\',
  '`',
  '',
  'y',
  'J',
  '',
  '',
  '',
  ',',
  '\a',
  '#',
  '',
  '',
  '',
  '',
  '',
  '$',
  '',
  '',
  '\x0E',
  'r',
  '',
  's',
  '@',
  '',
  '',
  '{',
  'W',
  '',
  '',
  'x',
  '_',
  'T',
  '',
  '',
  '',
  '',
  'I',
  '',
  '\x01',
  '\x12',
  '[',
  '',
  'Z',
  '',
  '',
  '',
  '',
  '.',
  '',
  '\x7F',
  '\t',
  '&',
  '=',
  '',
  '',
  'Q',
  'i',
  '',
  '',
  '',
  '~',
  '\x8D',
  '',
  '',
  'a',
  '',
  '\x81',
  '',
  '\x05',
  '',
  'M',
  '',
  '\t',
  '',
  '(',
  '',
  'G',
  '',
  '\x1C',
  '$',
  'z',
  ')',
  '',
  '!',
  '',
  'B',
  '',
  '',
  '',
  'M',
  '',
  'Q',
  '>',
  ' ',
  '',
  '',
  '\x0F',
  '_',
  'f',
  '',
  '',
  '',
  '',
  '\x10',
  '',
  '',
  '',
  '',
  'x',
  '',
  '',
  '',
  'W',
  '',
  '',
  '',
  'X',
  'C',
  '\x17',
  '\x8D',
  '',
  '-',
  '\x03',
  '',
  'j',
  '\x1D',
  't',
  ',',
  '',
  '.',
  '2',
  '',
  '',
  '',
  '\x01',
  '|',
  '',
  '\x1E',
  'K',
  '',
  '\x11',
  'r',
  '',
  '',
  '',
  '',
  '',
  '\b',
  '',
  '\x06',
  '',
  'S',
  '',
  '',
  '',
  'D',
  '',
  '?',
  '',
  '',
  '<',
  '',
  'q',
  '[',
  '',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  'k',
  'O',
  '1',
  'a',
  '',
  '',
  '',
  '0',
  '\x16',
  '`',
  '/',
  '',
  'V',
  '\0',
  '\\',
  '+',
  '@',
  'E',
  '',
  '',
  '',
  ';',
  '',
  'Y',
  '',
  '',
  '',
  '',
  '9',
  ':',
  '',
  'g',
  'p',
  '~',
  'F',
  '\x1B',
  '',
  '',
  '',
  'H',
  '',
  '',
  '',
  '',
  '^',
  'h',
  '',
  'e',
  '',
  '8',
  '',
  '\x12',
  '',
  '',
  'i',
  '\a',
  'n',
  '\x1F',
  '',
  '',
  '\x02',
  'l',
  '\x15',
  '',
  '',
  'u',
  '\n',
  '',
  'm',
  'c',
  'o',
  '',
  '',
  '',
  '',
  'b',
  '',
  '',
  '',
  '\x90',
  '',
  '5',
  'T',
  '%',
  '7',
  '',
  '\x8F',
  '\x04',
  '',
  'J',
  'L',
  '',
  '3',
  '',
  '',
  '\x9D',
  '',
  'w',
  '',
  '',
  '',
  '6',
  '',
  '',
  '\x1A',
  '',
  '4',
  '=',
  'R',
  'v',
  '&',
  '\r',
  '\v',
  'I',
  '',
  '\x7F',
  '\x18',
  '#',
  '',
  ']',
  'P',
  '\'',
  '\x14',
  '',
  '{',
  '',
  '',
  '',
  '',
  'y',
  'U',
  'A',
  '\x19',
  '*',
  '',
  's',
  '',
  '',
  '\x13',
  '}',
  '\x05',
  '',
  '',
  'd',
  '',
  '',
  '\x81',
  'N',
  '',
  '\f',
  '',
  '',
  'Z',
  '\x0E',
  '\"',
  '',
  '',
  '>',
  '',
  '',
  '',
  '',
  '\x1A',
  '/',
  '',
  '\t',
  '',
  '',
  '$',
  ';',
  ',',
  '',
  '',
  '',
  '',
  '',
  'F',
  '\r',
  '+',
  '',
  'x',
  '',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  '',
  '\f',
  'C',
  '',
  '',
  'H',
  '',
  '',
  '}',
  '',
  'W',
  '',
  '\x13',
  '',
  '',
  '4',
  'm',
  '\x0F',
  '(',
  '',
  '',
  '|',
  '\x1C',
  '\v',
  's',
  '',
  '\0',
  '',
  '',
  '',
  '\x04',
  '',
  '',
  '~',
  '\x90',
  '',
  'B',
  '@',
  '.',
  '',
  '\x17',
  '',
  '',
  '',
  '\b',
  'v',
  '5',
  ']',
  '',
  '',
  '',
  '',
  'z',
  'l',
  '',
  '\x0E',
  'V',
  '\x8F',
  '',
  '\\',
  '=',
  '',
  '',
  '',
  '',
  '',
  '?',
  '',
  '',
  'j',
  '',
  'S',
  'a',
  'J',
  '',
  '7',
  '\x7F',
  '',
  'g',
  '',
  '\x9D',
  '',
  '',
  ':',
  '',
  '',
  'y',
  '',
  '',
  'Q',
  '-',
  'L',
  '\x14',
  '\x18',
  'M',
  'f',
  '3',
  '',
  'X',
  '',
  '',
  '',
  '',
  '',
  '\x03',
  '\x06',
  '\n',
  '\x11',
  '',
  '',
  'P',
  '^',
  ')',
  '\x1D',
  'b',
  'E',
  '',
  'G',
  '',
  '\x81',
  '',
  '',
  '\x1E',
  '',
  '',
  '',
  '',
  '1',
  '',
  '\x1F',
  'U',
  '\x19',
  'r',
  '',
  '\x8D',
  '0',
  '{',
  'K',
  '!',
  '',
  '',
  '\x05',
  'O',
  'R',
  '',
  '',
  '',
  '',
  '',
  'Z',
  '',
  '\x16',
  '',
  '',
  '%',
  '',
  '',
  '',
  '[',
  '',
  '',
  '',
  'n',
  'A',
  '\x02',
  'h',
  '',
  '',
  '\x10',
  '',
  '',
  't',
  '\'',
  'w',
  '',
  '\xFF',
  '9',
  '6',
  '<',
  '8',
  'k',
  '',
  '',
  ' ',
  'i',
  '',
  '',
  '',
  '',
  '\a',
  '',
  'N',
  'I',
  'D',
  '',
  '',
  '',
  '#',
  '',
  '2',
  '_',
  '*',
  'q',
  'p',
  '\x01',
  '',
  'd',
  '',
  'T',
  'e',
  '\x1B',
  '\x12',
  '',
  '',
  '',
  'u',
  'o',
  '\"',
  '`',
  '',
  'Y',
  '',
  'c',
  '&',
  'k',
  '\\',
  '',
  '\n',
  'x',
  '',
  'm',
  '',
  '',
  '\x13',
  ')',
  '',
  '\x04',
  '\x03',
  '=',
  '$',
  '',
  '',
  '#',
  '',
  '\xFF',
  '\x16',
  '',
  'H',
  '/',
  'Y',
  '',
  '',
  '',
  '',
  '',
  '>',
  'b',
  '`',
  'L',
  '',
  '',
  'I',
  'X',
  '',
  '',
  '',
  '',
  '7',
  ' ',
  'N',
  '',
  '{',
  '\t',
  '2',
  '\f',
  '',
  '',
  'z',
  '',
  '\x8D',
  '\b',
  '<',
  '',
  'A',
  '\x06',
  '\x1F',
  '.',
  'o',
  '8',
  '',
  '',
  '\0',
  '',
  '\x17',
  '',
  '',
  '',
  '',
  '~',
  '\r',
  '',
  '&',
  '',
  ']',
  'W',
  '',
  '\x18',
  '',
  '*',
  'D',
  '\x7F',
  '\x10',
  '',
  'p',
  '',
  '5',
  '3',
  '',
  '\x12',
  '',
  '',
  '_',
  '',
  '',
  '',
  'E',
  'c',
  '',
  '',
  '%',
  '\x8F',
  '6',
  'Z',
  '',
  '',
  '',
  '',
  'S',
  '',
  '\x90',
  'O',
  '\x19',
  'j',
  'f',
  '',
  'v',
  '',
  '\x1A',
  '',
  '',
  ',',
  '',
  '',
  '\x81',
  '-',
  '',
  'R',
  '',
  '0',
  'T',
  '',
  '',
  '\x1E',
  '',
  '',
  '',
  '',
  '',
  'V',
  'y',
  '',
  '',
  '|',
  '\x15',
  '',
  '',
  '\x02',
  '',
  '',
  '1',
  'K',
  'r',
  '',
  '\x0E',
  '',
  '',
  '\x1B',
  '',
  'i',
  '',
  '',
  '',
  '',
  '\v',
  '\x05',
  '',
  '(',
  '',
  't',
  'q',
  '',
  '',
  'J',
  '\'',
  'G',
  '',
  'F',
  '',
  '',
  '\x14',
  '',
  '\"',
  '',
  '\x01',
  'B',
  '\x11',
  'U',
  '',
  '',
  ':',
  'l',
  '',
  'g',
  '',
  '!',
  '',
  'n',
  '',
  '',
  '',
  '',
  '\x1C',
  '',
  '\x9D',
  '',
  '',
  '',
  '',
  '',
  '',
  'e',
  '',
  '4',
  'M',
  '',
  '',
  '+',
  ';',
  '}',
  'a',
  '',
  '',
  '',
  '9',
  '',
  '@',
  '',
  '',
  'h',
  'P',
  '',
  '',
  '[',
  '',
  '',
  '',
  'Q',
  '\x1D',
  '',
  'w',
  's',
  '',
  '\x0F',
  'u',
  'd',
  'C',
  '?',
  '\a',
  '^',
  '',
  '',
  '\x15',
  'v',
  'e',
  '',
  '',
  'H',
  '',
  'Q',
  '^',
  '',
  '',
  '',
  '\r',
  '',
  'i',
  '',
  '\v',
  '',
  '\x01',
  '$',
  'X',
  '',
  '',
  '=',
  '\x9D',
  'w',
  '\x05',
  '\x16',
  '<',
  's',
  '',
  '',
  'V',
  '',
  '',
  '',
  '',
  '',
  '\x1C',
  '',
  '',
  'r',
  '',
  '',
  '',
  '\x06',
  '',
  'N',
  'z',
  'a',
  'n',
  '[',
  '%',
  '',
  '2',
  'j',
  '~',
  '\x0F',
  '',
  ')',
  '',
  '\x17',
  '',
  '\x14',
  '@',
  '\t',
  '',
  '',
  '',
  '',
  '',
  '6',
  '',
  'B',
  'q',
  '',
  'T',
  '\x81',
  '\0',
  '',
  '',
  'f',
  '',
  '',
  '',
  '\x7F',
  '',
  '8',
  '',
  '',
  '\x18',
  '(',
  '',
  '',
  '',
  'C',
  '',
  '',
  '',
  '\\',
  'c',
  '',
  '',
  'o',
  '',
  '\x12',
  '\xFF',
  '',
  '',
  '',
  ' ',
  '4',
  '',
  '',
  'S',
  '',
  'L',
  '*',
  '',
  '\x13',
  '',
  '',
  '\x1A',
  '_',
  'P',
  '',
  '',
  '\f',
  '',
  ':',
  '-',
  'y',
  '',
  'Y',
  'x',
  'm',
  '',
  '',
  '',
  '',
  '',
  'W',
  '\x1D',
  'G',
  'u',
  '',
  ';',
  'U',
  '',
  '\x11',
  '\x02',
  '!',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  '',
  'K',
  'E',
  '',
  '\a',
  ']',
  '',
  '\x1E',
  'k',
  '',
  'd',
  '\x19',
  '',
  '',
  '>',
  '',
  '',
  '',
  '#',
  '',
  '',
  'F',
  'O',
  '',
  'Z',
  '',
  'I',
  '&',
  '',
  '',
  '|',
  '{',
  '\x10',
  '\x1B',
  '9',
  'g',
  '',
  '',
  '',
  '\x8F',
  '',
  '',
  '',
  '',
  '3',
  '/',
  '\"',
  '\'',
  '',
  '7',
  'R',
  '',
  't',
  '',
  '\x03',
  'p',
  '',
  '',
  '5',
  'b',
  '',
  '',
  '\b',
  '\x90',
  '',
  '`',
  ',',
  '0',
  '?',
  '',
  '',
  'l',
  'J',
  '',
  '',
  '',
  '',
  '\x8D',
  'D',
  '\n',
  '',
  '1',
  '',
  '',
  '.',
  '',
  '\x1F',
  '',
  '',
  '\x04',
  '',
  '}',
  '+',
  '',
  'M',
  'A',
  'h',
  '\x17',
  '',
  '',
  'F',
  '\x14',
  '',
  'o',
  '',
  '',
  '',
  '',
  '',
  '',
  '@',
  '',
  '\x13',
  '\x18',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  'n',
  '',
  '',
  '',
  '',
  'I',
  '\xFF',
  '',
  '\a',
  '\x90',
  '[',
  ' ',
  '-',
  '',
  'q',
  '\\',
  '\x7F',
  '',
  'J',
  '',
  '%',
  'i',
  '0',
  '',
  '',
  'y',
  '',
  '',
  '',
  '|',
  'u',
  '6',
  '\x15',
  '\x0E',
  '',
  '',
  'B',
  'K',
  '\b',
  'l',
  '',
  '',
  '',
  '',
  ':',
  '$',
  '&',
  '',
  '!',
  '/',
  'D',
  '=',
  '(',
  '',
  '+',
  '',
  '',
  '',
  '',
  '\x01',
  '',
  'X',
  '#',
  '',
  '\n',
  'T',
  'S',
  '',
  '',
  '',
  '_',
  'V',
  'H',
  '',
  '~',
  '',
  'm',
  'r',
  '\x04',
  'G',
  '\x05',
  'x',
  'N',
  '',
  '',
  '',
  '',
  '',
  '7',
  '{',
  '',
  '',
  ';',
  '',
  '5',
  '\x1F',
  'w',
  'P',
  '\v',
  '',
  '\x8D',
  '',
  '',
  'U',
  '',
  '',
  '',
  '\'',
  '',
  '',
  '\x1B',
  '',
  'O',
  '',
  'R',
  '',
  '',
  '\x11',
  '',
  '',
  '3',
  '',
  '',
  '',
  'p',
  'a',
  '',
  'f',
  '',
  '8',
  'M',
  '\x19',
  '',
  'A',
  ']',
  '',
  'z',
  '',
  '\x81',
  '',
  '',
  '',
  '',
  '2',
  'g',
  '\x1C',
  '\x03',
  '',
  'E',
  'e',
  'Q',
  '\f',
  '\"',
  '\0',
  'd',
  '',
  '',
  '',
  'Y',
  '',
  ')',
  '',
  '\x06',
  '',
  's',
  't',
  '',
  '\x9D',
  '',
  '',
  '9',
  '}',
  '',
  '\x1A',
  '',
  '',
  '^',
  '',
  '',
  '*',
  '',
  'h',
  '',
  '',
  '',
  '\r',
  '',
  '',
  '',
  '1',
  'Z',
  '\x1D',
  ',',
  '',
  '',
  'k',
  'c',
  '\x16',
  '',
  '4',
  'C',
  '',
  '',
  '',
  '',
  '\x8F',
  '',
  '',
  'v',
  '`',
  '',
  '\x0F',
  '',
  '',
  '',
  '',
  'j',
  '',
  '>',
  'b',
  '',
  'L',
  '?',
  '',
  '.',
  '\x10',
  '<',
  '\t',
  '\x02',
  'W',
  '',
  '',
  '\x1E',
  '',
  '\x9D',
  '\x12',
  '\x7F',
  'G',
  '\t',
  'y',
  '',
  '',
  'w',
  '',
  '',
  '',
  '\x1C',
  'r',
  '',
  '',
  'l',
  '',
  '',
  '',
  '',
  '>',
  '',
  '',
  '',
  'Q',
  '',
  '\x03',
  '8',
  '+',
  '',
  '7',
  '',
  'm',
  '!',
  '9',
  '',
  '',
  'Y',
  '<',
  '',
  'S',
  '',
  '`',
  'W',
  '',
  'T',
  '',
  '',
  '\x0E',
  'Z',
  '',
  'B',
  'R',
  'V',
  '',
  ']',
  'A',
  '\x1F',
  '',
  '',
  'n',
  '',
  ' ',
  '',
  '',
  '{',
  '?',
  '',
  '',
  'f',
  '\"',
  '',
  '',
  '@',
  '',
  '\n',
  '\\',
  '',
  '',
  '5',
  '\x02',
  '',
  '',
  '[',
  'K',
  '',
  '\x90',
  '\f',
  '#',
  '\x0F',
  'z',
  '',
  '',
  '',
  'i',
  '',
  '',
  '',
  'P',
  '',
  '',
  'o',
  'L',
  '',
  '\x81',
  'J',
  'g',
  '0',
  '\'',
  '6',
  'H',
  '3',
  'b',
  '',
  '\x11',
  '\x18',
  'E',
  '\x17',
  '',
  '\x05',
  '',
  '_',
  '\x1B',
  '',
  '',
  '',
  'q',
  '',
  '',
  'v',
  '\x1A',
  '\x16',
  '',
  '',
  '',
  '',
  '',
  '',
  ';',
  '',
  '*',
  'X',
  '',
  '',
  '',
  '',
  '',
  ')',
  '\x8F',
  '',
  'U',
  '',
  '',
  '',
  'k',
  '$',
  '',
  's',
  '',
  '',
  '',
  '4',
  '',
  '\0',
  '}',
  '',
  'a',
  '~',
  '',
  'D',
  '\x1D',
  'I',
  '-',
  '\x15',
  ':',
  '\a',
  '\x13',
  '',
  '',
  '',
  'p',
  '\x8D',
  '',
  '',
  '',
  '',
  '',
  '',
  'e',
  '',
  'j',
  '',
  '',
  'O',
  '\v',
  '(',
  '',
  'u',
  '',
  'h',
  'N',
  '',
  '\x1E',
  '',
  '',
  '',
  '2',
  '',
  '.',
  '\x10',
  '',
  'M',
  '',
  '\b',
  '^',
  '',
  '',
  '',
  '',
  '|',
  '\r',
  '\xFF',
  '\x19',
  '&',
  '',
  '',
  '',
  '',
  't',
  '%',
  '',
  '',
  '',
  '=',
  '',
  'C',
  '\x01',
  '/',
  '',
  '',
  'c',
  '',
  'F',
  '',
  'd',
  'x',
  '',
  '\x04',
  '',
  ',',
  '\x14',
  '1',
  '\x06',
  '',
  '',
  'c',
  '',
  'I',
  '',
  '',
  '',
  '@',
  'B',
  '',
  ']',
  '`',
  '',
  '<',
  '[',
  '',
  '',
  'n',
  '\xFF',
  '',
  'L',
  '',
  '',
  '\t',
  '\r',
  '',
  'b',
  'l',
  'q',
  '',
  'F',
  '(',
  '',
  'R',
  'G',
  '',
  '\x1C',
  '',
  'Z',
  '',
  '',
  '',
  'h',
  '',
  '',
  '\f',
  '\x1E',
  '',
  '',
  '\n',
  'O',
  '',
  'P',
  '',
  '',
  '',
  '1',
  'e',
  '%',
  'W',
  '?',
  '',
  '\x8D',
  'm',
  '',
  '',
  '',
  '',
  '\x10',
  '',
  '',
  '.',
  'y',
  '\0',
  '&',
  '',
  '',
  '*',
  '',
  '\"',
  '',
  '',
  'M',
  '3',
  '',
  '\x14',
  'k',
  '\x1F',
  '',
  '',
  '-',
  '',
  '',
  '\x90',
  '',
  '',
  '',
  '',
  '8',
  '7',
  '',
  's',
  '',
  ':',
  '0',
  'D',
  'g',
  '',
  'H',
  '>',
  '\'',
  'i',
  'w',
  ' ',
  'p',
  '',
  '',
  '\x1D',
  'x',
  '',
  '2',
  '',
  '',
  '\x03',
  '|',
  '',
  '',
  '\x06',
  '~',
  '',
  'K',
  't',
  '6',
  '/',
  '\x13',
  '',
  '',
  '\x01',
  'U',
  '',
  '',
  '\x05',
  '',
  'S',
  '',
  '',
  '\x15',
  'j',
  '',
  '',
  '',
  '$',
  '',
  '',
  '',
  '\x8F',
  '\b',
  'o',
  '\x18',
  'E',
  '\x0E',
  'd',
  '_',
  '\x12',
  '',
  '\x19',
  '',
  '',
  '',
  '\x17',
  '',
  'V',
  '',
  '#',
  ',',
  '',
  '',
  '',
  '\v',
  '',
  '',
  ';',
  '',
  '',
  '',
  '\x02',
  'Q',
  'T',
  '',
  '\x9D',
  '',
  '',
  '',
  '',
  '',
  '}',
  '',
  '',
  '',
  '',
  '',
  '',
  'C',
  'a',
  '\x1B',
  '',
  '',
  'z',
  '',
  '',
  '^',
  '9',
  '',
  'A',
  '\x04',
  '',
  '',
  'f',
  '\x81',
  'v',
  '',
  '',
  '',
  '\x0F',
  '5',
  '\x11',
  '',
  '',
  '!',
  'Y',
  '+',
  '\\',
  '\x16',
  'r',
  '{',
  '',
  '',
  '=',
  '',
  '',
  '\a',
  '',
  '',
  '',
  'N',
  '',
  '',
  '\x7F',
  '',
  ')',
  'J',
  '\x1A',
  '',
  '4',
  'X',
  'u',
  '',
  '',
  '\x19',
  'h',
  '',
  '',
  '',
  '\xFF',
  '',
  '',
  'K',
  '\r',
  '',
  'W',
  '',
  'U',
  '',
  '\x0F',
  'C',
  'R',
  '\x10',
  '',
  '',
  '',
  '',
  '\f',
  '',
  '',
  '',
  'J',
  '\x06',
  'v',
  'i',
  'e',
  '',
  '',
  '{',
  '',
  '\x15',
  'f',
  '',
  ')',
  '',
  '\x01',
  'T',
  '',
  '',
  'B',
  '',
  '',
  '\x17',
  'X',
  '',
  '2',
  'j',
  'Y',
  '',
  '+',
  '[',
  '',
  '',
  '',
  '',
  '.',
  'L',
  '\x05',
  'u',
  '',
  ';',
  '\x1A',
  '\a',
  '',
  '*',
  '',
  '-',
  '',
  '',
  '',
  '^',
  '',
  '',
  'k',
  ' ',
  '',
  '',
  '',
  '\x11',
  '_',
  '',
  '',
  'd',
  '',
  'l',
  '',
  '',
  'q',
  '',
  'E',
  '',
  '9',
  '\x12',
  'n',
  '',
  '',
  '',
  'y',
  'z',
  '',
  'O',
  'r',
  'Q',
  '',
  '',
  'x',
  'V',
  '',
  'D',
  't',
  '',
  '',
  '',
  '',
  '\x1B',
  '\x1F',
  'o',
  '\x90',
  'P',
  '',
  '',
  'm',
  '',
  '\x03',
  '',
  '1',
  '\\',
  '',
  '',
  '',
  '}',
  '',
  ',',
  '?',
  '',
  '',
  '',
  ']',
  '0',
  '',
  '',
  'A',
  '',
  '\x1C',
  '/',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '',
  '\x8D',
  '%',
  '\x04',
  'p',
  '|',
  '\"',
  '',
  'I',
  '\x16',
  '',
  'F',
  '\x7F',
  '',
  '\x8F',
  '\x13',
  '`',
  '',
  '=',
  '\x81',
  '<',
  '',
  '',
  '',
  '5',
  '\x0E',
  ':',
  '',
  'S',
  'a',
  '',
  '',
  '',
  '\x14',
  '',
  '',
  '(',
  '',
  '\n',
  '\b',
  '!',
  '',
  '',
  'Z',
  'N',
  'c',
  '\x18',
  '\0',
  '\t',
  '~',
  '>',
  '',
  '',
  '',
  '4',
  '\x02',
  '',
  '',
  '',
  'M',
  'G',
  '',
  's',
  '',
  '',
  '\x1E',
  '',
  '\x9D',
  '#',
  '',
  '',
  '',
  '',
  'w',
  '',
  '',
  '',
  '',
  '&',
  '8',
  '\'',
  'b',
  '',
  '',
  '',
  '@',
  '6',
  '\x1D',
  '',
  '',
  '',
  '$',
  '3',
  '7',
  'H',
  '',
  'g',
  'l',
  '',
  '',
  '',
  'm',
  '\a',
  '\x0F',
  '.',
  '7',
  '',
  '',
  '',
  'e',
  '\x7F',
  '',
  '',
  'o',
  '',
  'g',
  '',
  '[',
  '',
  '4',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '/',
  '\x1A',
  '',
  'P',
  'r',
  '',
  '\x17',
  '',
  '',
  'R',
  '',
  '',
  '\x0E',
  'N',
  'V',
  '_',
  '',
  '>',
  'K',
  '0',
  '',
  '8',
  '',
  'z',
  '',
  'H',
  '',
  '\v',
  '2',
  '\x04',
  '\x1F',
  '\x01',
  'w',
  'd',
  'c',
  '',
  'J',
  '',
  '',
  '',
  '`',
  '',
  'h',
  '\x19',
  '',
  '',
  '\x13',
  'C',
  '',
  '',
  'A',
  '',
  'y',
  'v',
  '',
  '',
  '',
  '',
  '\b',
  '',
  '',
  '',
  '',
  '',
  '',
  ';',
  's',
  'G',
  '',
  '',
  'Q',
  'u',
  'k',
  '',
  '6',
  '',
  '',
  '\n',
  'q',
  '',
  '',
  'M',
  '',
  'T',
  '',
  '',
  ',',
  'W',
  '\x11',
  '\x1D',
  '',
  '\x18',
  '\x81',
  '',
  'D',
  'f',
  '',
  'j',
  '',
  'O',
  '\x1E',
  '\x9D',
  '',
  '',
  '',
  '\t',
  '',
  '',
  't',
  '',
  '+',
  '',
  '\"',
  '',
  '<',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'F',
  '\x8D',
  '&',
  '',
  '\x15',
  '',
  'U',
  'n',
  '',
  '1',
  ')',
  '5',
  '',
  '\x05',
  '',
  '$',
  '',
  '\x10',
  '',
  'b',
  '\x12',
  '',
  '',
  '',
  '',
  'i',
  '\r',
  '\x06',
  '',
  '',
  'E',
  '',
  'L',
  '',
  '',
  'p',
  '',
  '\x1B',
  '',
  '',
  '',
  'a',
  '@',
  '',
  '',
  '}',
  '\x90',
  ':',
  '^',
  '',
  'x',
  '\0',
  '',
  '~',
  '\x14',
  '9',
  '\x02',
  '-',
  '',
  '\x03',
  '(',
  '',
  '',
  '\x16',
  '\x8F',
  '',
  '*',
  '',
  '',
  '',
  '',
  '#',
  '3',
  'I',
  '\\',
  '?',
  '{',
  '',
  '%',
  'S',
  '',
  '\f',
  ' ',
  '',
  'B',
  '',
  '',
  '',
  '!',
  '\'',
  '',
  'X',
  'Y',
  '|',
  'Z',
  '',
  ']',
  '\xFF',
  '=',
  '',
  '',
  '\x1C',
  '',
  '\xFF',
  '}',
  '',
  '\x1C',
  '',
  '\x17',
  '\x90',
  '(',
  '\x1E',
  '\v',
  '+',
  '',
  '\\',
  'e',
  'X',
  '',
  '',
  'E',
  '3',
  '',
  'v',
  '',
  '8',
  '4',
  'g',
  '',
  '',
  'm',
  '\x01',
  '',
  '',
  ')',
  '\x8D',
  '',
  '',
  '',
  'R',
  '',
  '',
  'B',
  '',
  '',
  '!',
  '',
  '',
  ' ',
  '',
  '',
  '',
  '',
  '\x14',
  '',
  '',
  '',
  ']',
  '\x02',
  '\x7F',
  '',
  'z',
  '',
  '\x18',
  'u',
  '',
  '9',
  '\n',
  '|',
  '',
  '',
  '',
  '',
  '`',
  '%',
  '',
  '',
  '',
  '\x15',
  '-',
  '',
  '[',
  '',
  '',
  '\0',
  '{',
  '',
  '',
  'h',
  '\x81',
  '',
  '2',
  '.',
  'Q',
  't',
  '',
  '>',
  '',
  '',
  '',
  ':',
  '\f',
  '',
  '',
  'a',
  'q',
  'S',
  ',',
  '',
  '',
  'w',
  '',
  '\x05',
  'd',
  '',
  '',
  'p',
  'W',
  '\x06',
  '',
  'i',
  '\x12',
  '\"',
  '',
  '',
  '',
  '=',
  '\x10',
  '\x9D',
  'c',
  'l',
  '',
  '',
  '',
  '0',
  'k',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1A',
  '~',
  '',
  '*',
  '',
  '',
  'I',
  '',
  'f',
  '\x0E',
  '',
  '',
  '',
  ';',
  '',
  'C',
  'J',
  '',
  'D',
  '\'',
  '\a',
  '\x03',
  '\x19',
  '',
  '',
  '',
  '',
  'L',
  'F',
  '\x16',
  '\x04',
  '\x0F',
  '',
  '1',
  '',
  '',
  '#',
  'U',
  'V',
  '',
  'T',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '^',
  '',
  'x',
  '7',
  '?',
  'Y',
  '5',
  '',
  '\t',
  '@',
  '',
  'P',
  'o',
  '',
  '_',
  '',
  '\x1F',
  '',
  '',
  '',
  '<',
  '',
  'n',
  '\b',
  '',
  'H',
  '',
  '\x8F',
  '',
  '',
  '\x11',
  '&',
  'G',
  '',
  '$',
  '',
  'O',
  'A',
  '',
  '',
  '6',
  'Z',
  '',
  '',
  '',
  '\r',
  'j',
  '',
  'r',
  'M',
  '',
  '',
  '\x1D',
  'K',
  '\x1B',
  '\x13',
  'b',
  '',
  'y',
  '/',
  '',
  '',
  's',
  '',
  'N',
  '',
  '',
  '',
  ':',
  '',
  '',
  '',
  '',
  '\x9D',
  '',
  '_',
  '',
  '',
  '',
  'I',
  'w',
  '',
  '~',
  '?',
  '',
  '\t',
  '\x11',
  '0',
  '[',
  'U',
  '',
  ')',
  '5',
  '',
  '',
  '',
  '*',
  'M',
  '',
  '',
  'O',
  '',
  '',
  '',
  '',
  'i',
  '',
  '',
  '\f',
  '',
  '(',
  '',
  '',
  '#',
  '',
  '',
  '-',
  'm',
  '\x1C',
  '',
  '',
  '',
  'k',
  'X',
  '!',
  '\x81',
  'l',
  '',
  '',
  '',
  '',
  '',
  '\\',
  '\x16',
  '4',
  '\x06',
  't',
  '\"',
  '9',
  '',
  '',
  'd',
  '',
  '',
  '\x8F',
  '\x02',
  '',
  'q',
  '',
  'x',
  '/',
  '>',
  '\xFF',
  '',
  'a',
  'N',
  '',
  '',
  '',
  '',
  '',
  '}',
  'e',
  'u',
  '',
  '',
  '',
  '',
  '.',
  '',
  '',
  '',
  'o',
  '\x1B',
  '',
  '',
  'R',
  '',
  'y',
  '',
  '\x12',
  '\x19',
  '',
  '',
  '',
  'D',
  '',
  '',
  'P',
  '',
  'B',
  '',
  '=',
  '',
  'A',
  '\x0E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '8',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1E',
  '@',
  '',
  '\a',
  '1',
  '',
  '',
  '',
  '\x15',
  '',
  '',
  '',
  '\v',
  '',
  '',
  'H',
  '|',
  'b',
  'G',
  'L',
  '',
  '^',
  '\x01',
  '\x14',
  '\x05',
  '\x17',
  '',
  '\x13',
  'Y',
  '\x90',
  '',
  '&',
  ';',
  '\r',
  '',
  '',
  'z',
  '',
  '',
  '',
  'c',
  '\x18',
  '\x8D',
  'Z',
  '\x1D',
  '\b',
  'V',
  '\x0F',
  '',
  'C',
  '\0',
  '',
  '\x04',
  '',
  'r',
  '{',
  '\x7F',
  '6',
  '<',
  'h',
  'n',
  '',
  '`',
  '',
  '',
  '\x03',
  'p',
  '%',
  '',
  'j',
  ',',
  '',
  'f',
  '',
  'v',
  '\x1A',
  'W',
  '2',
  '',
  '3',
  '\'',
  '\n',
  'K',
  '\x10',
  '',
  '',
  ']',
  '',
  '',
  'g',
  'Q',
  's',
  '',
  'T',
  '7',
  'S',
  '$',
  '',
  '',
  '+',
  'E',
  '',
  ' ',
  '',
  'J',
  '',
  '',
  '',
  '\x1F',
  'F',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  't',
  'g',
  '',
  '',
  '',
  '',
  'w',
  'Q',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '^',
  'f',
  '.',
  ',',
  ' ',
  'R',
  '',
  'E',
  '',
  '',
  '\f',
  '\x8F',
  '',
  '',
  '\x8D',
  '',
  '|',
  '\b',
  '',
  '\x15',
  '\x01',
  '',
  '5',
  'Z',
  '',
  'V',
  '#',
  'K',
  '\x1F',
  '',
  '',
  '',
  'S',
  '`',
  '',
  '\x0F',
  '\n',
  '',
  '',
  '',
  '',
  '\x81',
  '%',
  '',
  '<',
  ';',
  '',
  '',
  'Y',
  'e',
  '',
  '',
  '\x12',
  '',
  '',
  '4',
  '',
  '',
  '\x14',
  'C',
  '',
  '6',
  '',
  'G',
  '~',
  'O',
  '8',
  '\x06',
  'H',
  '',
  '',
  'L',
  '',
  '',
  '',
  '',
  '7',
  '',
  'x',
  '',
  '\x1D',
  '3',
  '?',
  '',
  '',
  ':',
  '\t',
  '',
  '&',
  '',
  '',
  '',
  '9',
  '',
  '\v',
  'y',
  '',
  'u',
  '',
  '',
  '',
  's',
  'r',
  '\\',
  '',
  '',
  'o',
  '',
  '',
  '/',
  '',
  '}',
  '',
  '',
  '\x19',
  'I',
  '!',
  '\x1C',
  '+',
  '\x16',
  '',
  '\x9D',
  '',
  '*',
  '\xFF',
  '\0',
  'p',
  'q',
  '\'',
  '\x7F',
  'm',
  'P',
  ']',
  '-',
  'i',
  '2',
  '\x11',
  '@',
  '{',
  'U',
  '\x17',
  '0',
  '\x05',
  '>',
  '',
  'z',
  '',
  '\x18',
  '',
  'v',
  '',
  '',
  'F',
  '',
  '',
  '',
  '',
  'A',
  'B',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  'c',
  '',
  '',
  '',
  'W',
  '',
  'M',
  '',
  '',
  '',
  'l',
  '1',
  '',
  '\r',
  '',
  'T',
  ')',
  '\x10',
  '',
  '',
  '',
  'n',
  '',
  '$',
  'b',
  '',
  'X',
  '',
  '\x03',
  '',
  '',
  '',
  '',
  'a',
  '',
  '\x13',
  '',
  '',
  'J',
  '',
  '[',
  'k',
  '(',
  '',
  '',
  '',
  '\x1B',
  'N',
  '',
  '_',
  '\x04',
  'h',
  '',
  'd',
  'j',
  '',
  '',
  '',
  '=',
  '',
  '\x1E',
  'D',
  '\x90',
  '\a',
  '',
  '',
  '\"',
  '\x1A',
  '',
  '',
  '3',
  '',
  '',
  '',
  '+',
  'l',
  '',
  'b',
  'D',
  '',
  '',
  ']',
  'n',
  '',
  'a',
  '',
  '',
  '',
  '\x04',
  'S',
  '\v',
  'C',
  '',
  'J',
  '',
  '',
  '',
  '\x7F',
  '',
  '^',
  '\x15',
  '',
  'Z',
  'F',
  '',
  '',
  '\b',
  'q',
  '5',
  '',
  '',
  'j',
  '\t',
  '',
  '',
  '(',
  '',
  '\x16',
  '\x06',
  '\x1A',
  'Q',
  '\a',
  '',
  'i',
  '%',
  'O',
  '',
  '',
  '',
  'M',
  '',
  '',
  '#',
  '',
  'y',
  'K',
  '',
  'Y',
  'A',
  '',
  'h',
  '',
  '\x8F',
  '\"',
  '!',
  '2',
  '',
  '',
  '',
  '4',
  '0',
  'V',
  '',
  '',
  '',
  'e',
  '\x0F',
  'w',
  '',
  '\x05',
  'P',
  '',
  '\x14',
  '',
  't',
  '`',
  'd',
  '\x18',
  '/',
  '\\',
  '\x12',
  'g',
  '\x11',
  '}',
  '$',
  '',
  '\x1C',
  '',
  'u',
  'T',
  '',
  '',
  '\x1F',
  '',
  ' ',
  '7',
  '\0',
  '',
  '',
  '',
  '',
  '.',
  'N',
  '',
  '',
  '',
  'z',
  '',
  '_',
  'p',
  '|',
  'c',
  '\x9D',
  '',
  '',
  '',
  '',
  '',
  'X',
  '\x0E',
  'x',
  '',
  '-',
  'f',
  'E',
  '',
  '',
  'k',
  '',
  '',
  'o',
  '',
  '',
  '\x02',
  '',
  '',
  '',
  '',
  '\x90',
  '',
  '',
  '6',
  '\r',
  '\x1D',
  '',
  '',
  '\'',
  '',
  '',
  'L',
  '',
  '>',
  '~',
  '<',
  '',
  '',
  '',
  '=',
  '{',
  '',
  '',
  '\x03',
  'G',
  '?',
  '\x1E',
  '',
  '',
  '\x81',
  '',
  '\x17',
  'v',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'U',
  '\x13',
  '',
  'r',
  'I',
  '1',
  ':',
  '',
  'B',
  '',
  '',
  '',
  '\f',
  '\x19',
  '&',
  '\xFF',
  '@',
  '',
  '',
  '\n',
  '',
  '',
  '',
  '9',
  '',
  'W',
  'H',
  '',
  '',
  'm',
  '\x8D',
  '',
  '',
  '',
  's',
  '',
  ';',
  '',
  '',
  ')',
  '*',
  '\x01',
  '',
  '',
  ',',
  '',
  '\x10',
  '\x1B'
}; // idb
char g_chDecodeCode[25600] =
{
  '',
  'y',
  '',
  'u',
  '',
  'M',
  '',
  '',
  'f',
  '',
  '!',
  '\x16',
  '',
  'X',
  ']',
  'C',
  '',
  '}',
  '',
  '',
  '',
  '|',
  '*',
  '',
  '\x9D',
  '',
  '/',
  '5',
  '',
  '',
  '',
  'K',
  '',
  'i',
  'Y',
  '',
  '$',
  'x',
  '\'',
  '',
  '',
  '\0',
  'r',
  '',
  '\x01',
  'k',
  '',
  'P',
  '=',
  '',
  '',
  '',
  'a',
  't',
  '(',
  's',
  '',
  '',
  '',
  '<',
  '',
  'G',
  '',
  '\x11',
  '',
  'O',
  '',
  'N',
  '',
  '',
  'B',
  'q',
  '1',
  '\x0F',
  '\v',
  'J',
  '',
  '\x1B',
  'D',
  'o',
  '',
  '\x18',
  '',
  '\x1C',
  '\x15',
  '~',
  'l',
  '\x14',
  '>',
  'T',
  '',
  '',
  '',
  '\x8D',
  'Z',
  '',
  '\f',
  '',
  '0',
  '\x03',
  '',
  'I',
  '\x13',
  'Q',
  '\x7F',
  '',
  '+',
  '\x1D',
  '',
  '\\',
  '',
  'V',
  'n',
  '^',
  '',
  '',
  ')',
  '\"',
  '',
  '',
  '',
  '',
  '',
  'w',
  '',
  'R',
  '',
  'p',
  'm',
  '',
  '',
  '',
  '',
  '3',
  '',
  '',
  '?',
  '',
  '',
  '',
  '',
  '\x05',
  'L',
  '',
  '',
  '.',
  'H',
  '[',
  '',
  '',
  '\x1F',
  'U',
  ',',
  '\x02',
  '',
  '',
  '',
  '\x17',
  '\n',
  '\x04',
  ';',
  '',
  '',
  '\b',
  '',
  '',
  '\x1A',
  '',
  '_',
  '\x1E',
  '\t',
  '\x19',
  '',
  '',
  'b',
  '',
  '',
  '\x0E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'c',
  '',
  '\x90',
  '',
  '',
  '#',
  '9',
  'F',
  'g',
  '',
  '',
  '8',
  '',
  '',
  '',
  'E',
  '\x8F',
  '',
  '',
  '',
  '',
  '',
  '@',
  ' ',
  '',
  '7',
  '',
  'v',
  '',
  '{',
  '-',
  '\x10',
  '`',
  '\x06',
  'W',
  '6',
  '&',
  '',
  'z',
  'A',
  '',
  'e',
  '',
  '',
  'h',
  '',
  '\x81',
  '',
  ':',
  'd',
  '',
  '',
  '',
  '',
  'j',
  '',
  '',
  '4',
  '\r',
  '',
  '%',
  '',
  '\xFF',
  '\x12',
  'S',
  '',
  '2',
  '\a',
  '',
  '\x1C',
  'D',
  '',
  '3',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'A',
  'B',
  '',
  ' ',
  ',',
  'I',
  '',
  '9',
  '}',
  '',
  '',
  '',
  '\x1E',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  'Y',
  '\x16',
  '',
  '',
  '0',
  '\x90',
  '\0',
  '',
  '',
  '',
  '\n',
  '',
  '',
  '',
  '',
  '',
  '',
  '\b',
  '',
  '`',
  '6',
  '',
  '\x11',
  '',
  '',
  '',
  '',
  'k',
  '?',
  '',
  '',
  '!',
  '\x01',
  '',
  '\x1F',
  'W',
  '',
  '\x12',
  '',
  '',
  '',
  '',
  'g',
  '',
  '',
  '',
  '',
  '',
  '\x1B',
  '1',
  '',
  '#',
  '',
  '',
  '\f',
  '',
  '',
  '',
  '',
  '^',
  '\xFF',
  '',
  '',
  'Q',
  '.',
  '',
  '',
  '',
  'j',
  '=',
  '',
  '\t',
  '&',
  '',
  '',
  'K',
  '\x05',
  '',
  '\x13',
  '7',
  '',
  '\x9D',
  'd',
  ')',
  '',
  'E',
  '',
  '',
  'R',
  '',
  '\x14',
  'Z',
  '',
  '\x02',
  '\x15',
  'V',
  'L',
  '|',
  'c',
  '\x8D',
  '',
  '\x0E',
  ']',
  '',
  'M',
  'y',
  '\v',
  '\x1D',
  'S',
  '',
  '\\',
  '',
  '',
  ';',
  '',
  '+',
  '\x0F',
  '<',
  '%',
  '',
  '\x17',
  '',
  'T',
  '',
  '',
  '',
  '\r',
  'n',
  '\a',
  '',
  '4',
  '\x04',
  '8',
  'b',
  'u',
  'z',
  '',
  '',
  'G',
  't',
  '',
  '',
  '',
  'l',
  '\x10',
  '',
  '',
  '',
  '',
  'm',
  '$',
  '/',
  'r',
  '@',
  'U',
  '5',
  '',
  '\x1A',
  '',
  '',
  ':',
  '',
  'w',
  '',
  '-',
  '',
  'P',
  '',
  'F',
  'h',
  '*',
  '>',
  'p',
  '[',
  'e',
  'O',
  '',
  'a',
  '',
  '',
  '\x8F',
  '',
  'q',
  '',
  'f',
  '',
  '2',
  '',
  '',
  '',
  '',
  '',
  '\x7F',
  '',
  '',
  'J',
  '\'',
  '',
  '',
  '~',
  'C',
  '\x18',
  '',
  '',
  'X',
  '',
  '\"',
  'o',
  '',
  '',
  'v',
  '(',
  '\x19',
  '\x81',
  's',
  '',
  '\x03',
  '',
  'x',
  '{',
  'N',
  'H',
  '_',
  'i',
  '',
  '',
  '',
  '',
  '\"',
  '\x7F',
  '',
  '*',
  '',
  '\x8D',
  '>',
  '',
  'K',
  '',
  '\x06',
  '',
  '`',
  'b',
  '',
  '\x15',
  '',
  '',
  'E',
  '',
  's',
  '\x1A',
  '\t',
  '\x12',
  '',
  '',
  '',
  'x',
  'w',
  '',
  '',
  '',
  '',
  '',
  '',
  'H',
  ' ',
  '[',
  '\x14',
  '',
  '\x1B',
  '',
  '',
  'L',
  'j',
  '',
  ':',
  '',
  'r',
  '',
  '',
  '',
  '\'',
  'e',
  '',
  '+',
  '',
  '',
  'v',
  '',
  'C',
  '',
  'Z',
  '',
  '',
  't',
  '',
  '',
  '3',
  '',
  '',
  'N',
  'F',
  '',
  '',
  'W',
  '2',
  '/',
  '?',
  '',
  '\x03',
  '',
  '~',
  '\x02',
  'l',
  '',
  '',
  '<',
  '7',
  '',
  'k',
  'Y',
  '',
  'c',
  '',
  '',
  '',
  'R',
  'A',
  'q',
  '',
  '',
  'h',
  '\x01',
  '',
  '',
  '',
  '!',
  '6',
  '',
  '',
  '',
  '\x9D',
  '}',
  '',
  '',
  '0',
  '',
  ',',
  ')',
  '5',
  'X',
  '\xFF',
  'T',
  '\f',
  'a',
  '',
  '',
  '',
  ']',
  '',
  'Q',
  '',
  '%',
  '\x13',
  '',
  '',
  'm',
  '',
  '\\',
  '',
  '',
  '',
  '',
  '\x19',
  '',
  'D',
  'y',
  'B',
  '',
  '-',
  '#',
  '\x16',
  '',
  '',
  '',
  '',
  '',
  'i',
  '',
  '',
  '',
  '|',
  '',
  '\x0E',
  '',
  '\b',
  '',
  '\n',
  'n',
  '',
  'U',
  'g',
  'M',
  '(',
  '4',
  '',
  '',
  'J',
  '',
  '\x8F',
  '',
  'd',
  'O',
  '\a',
  '\x90',
  '',
  '',
  '',
  ';',
  '',
  '\x0F',
  '\x04',
  'V',
  '',
  '',
  '',
  '',
  '9',
  '',
  '=',
  '',
  '\x1E',
  '',
  'o',
  '1',
  '',
  '_',
  '^',
  '',
  '\x05',
  '',
  '\x10',
  'z',
  '',
  'f',
  'G',
  '@',
  '',
  '\r',
  '\x81',
  '{',
  '',
  '',
  '\x17',
  'u',
  '\v',
  '\x1F',
  '',
  '\x1D',
  '\0',
  '',
  '',
  '\x11',
  '',
  '',
  'P',
  '.',
  '$',
  'I',
  '',
  '8',
  '&',
  '',
  '',
  '',
  '',
  '\x1C',
  'p',
  '',
  '\x18',
  '',
  'S',
  '',
  '\x05',
  '',
  ':',
  'L',
  '\x06',
  '',
  '',
  '3',
  '',
  '\r',
  '',
  'F',
  '',
  '',
  '',
  'l',
  '<',
  'P',
  '',
  'A',
  '',
  '',
  '\x16',
  '>',
  'r',
  '\x7F',
  'Y',
  'Z',
  'X',
  'H',
  '\x15',
  '\x0E',
  '',
  '@',
  '',
  '^',
  '',
  '\x11',
  'w',
  '',
  'a',
  '\x9D',
  '&',
  '',
  '2',
  '',
  '',
  '',
  '',
  'T',
  '.',
  ';',
  '',
  '\x03',
  ']',
  '',
  'R',
  '',
  '4',
  '\n',
  'y',
  '\x04',
  'K',
  'k',
  '\x1E',
  '',
  '',
  '',
  '\0',
  '',
  'N',
  '',
  '',
  '',
  '(',
  '',
  '',
  '',
  '}',
  '',
  '6',
  '',
  '',
  '\x1B',
  ' ',
  ')',
  '',
  ',',
  '\x14',
  '',
  '',
  '\\',
  '',
  'g',
  '',
  '',
  '+',
  'S',
  '',
  '\x1C',
  '\x1D',
  '\x18',
  '',
  '\a',
  '',
  '',
  '/',
  '',
  '',
  'M',
  '`',
  '',
  '',
  'o',
  '',
  '',
  '',
  '',
  'I',
  '',
  '',
  '',
  '\'',
  '',
  '',
  'v',
  '-',
  '?',
  '',
  'G',
  '%',
  '\f',
  '',
  '',
  'p',
  '',
  '9',
  '',
  'B',
  '',
  'Q',
  '',
  '',
  '',
  'O',
  '',
  '\x10',
  '\x1F',
  '~',
  '',
  '',
  '\x1A',
  '\x81',
  '\x02',
  '',
  'f',
  '',
  '',
  '',
  '',
  '\x01',
  '$',
  '*',
  'q',
  '',
  '',
  '8',
  '',
  '{',
  '0',
  '',
  '',
  '\x0F',
  '',
  '\x8D',
  '',
  'b',
  '',
  '\x13',
  '',
  '1',
  '',
  '',
  '7',
  '\v',
  '\"',
  'u',
  '\x17',
  '',
  '',
  'V',
  'i',
  '',
  '\xFF',
  'x',
  '',
  't',
  '',
  '\x12',
  'm',
  '',
  'e',
  '',
  '\t',
  '',
  'D',
  '',
  '#',
  '',
  '',
  'd',
  '',
  '',
  'h',
  '',
  '',
  '',
  '',
  'U',
  'c',
  'n',
  '',
  '5',
  'E',
  'W',
  '\b',
  '[',
  '\x19',
  '',
  'C',
  '',
  'z',
  '',
  '',
  '',
  '',
  '|',
  'j',
  '',
  'J',
  '',
  '_',
  '',
  '',
  '',
  's',
  '\x8F',
  '',
  '',
  '',
  '!',
  '',
  '\x90',
  '',
  '=',
  '',
  '',
  '',
  'r',
  ')',
  '',
  '',
  '=',
  '',
  '',
  '',
  '',
  '#',
  '',
  '',
  'o',
  '+',
  '2',
  'W',
  'k',
  '\x16',
  '\x0E',
  '.',
  '',
  '%',
  '',
  '\x19',
  'G',
  'g',
  '}',
  '',
  'e',
  '\0',
  '\x18',
  '',
  '',
  '\x14',
  'n',
  '',
  ' ',
  'L',
  '',
  '\x8F',
  'J',
  '',
  '',
  ':',
  '',
  '',
  '',
  '',
  'B',
  '\xFF',
  'x',
  '\x1E',
  '\x7F',
  '\x12',
  '',
  '6',
  '',
  '\x04',
  'M',
  '',
  '\x01',
  '`',
  '\'',
  'P',
  '',
  '\t',
  '\x03',
  '',
  'u',
  '\n',
  ',',
  'T',
  '',
  '',
  '\f',
  '',
  '',
  '',
  'z',
  '',
  '\x11',
  '',
  'K',
  'F',
  ';',
  '',
  '',
  '\b',
  '{',
  '',
  '',
  'q',
  '@',
  '',
  '\x10',
  '7',
  '>',
  '',
  'd',
  'O',
  '&',
  '~',
  'f',
  '',
  '\x81',
  '\x8D',
  'X',
  '\v',
  '',
  '',
  '^',
  '',
  '_',
  '',
  '\x02',
  '',
  '',
  '',
  '',
  '',
  'D',
  '*',
  'U',
  '',
  '',
  '',
  '\x06',
  'Z',
  '[',
  '',
  '',
  '',
  'I',
  'l',
  '',
  '$',
  '\x0F',
  'E',
  '',
  '',
  '',
  'a',
  '',
  '',
  '',
  '',
  '\x05',
  '\\',
  '\x90',
  'N',
  '3',
  'v',
  '\x1A',
  'S',
  '\x1D',
  '\x9D',
  '',
  'p',
  '\x1F',
  '',
  '',
  '\x1C',
  '-',
  ']',
  '',
  'Y',
  '8',
  '0',
  'Q',
  '',
  '',
  '',
  '|',
  '\x15',
  '',
  '',
  '',
  '',
  'm',
  '\x17',
  '1',
  'A',
  's',
  'w',
  '4',
  '(',
  '',
  'b',
  'y',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  't',
  '',
  'h',
  '',
  '',
  '',
  '',
  'R',
  '',
  '',
  '/',
  '',
  'H',
  '?',
  '',
  '\a',
  '\x13',
  '',
  '',
  'i',
  '',
  '',
  'V',
  'C',
  '<',
  '',
  '\r',
  '',
  '',
  '',
  '',
  '!',
  '\"',
  '',
  '',
  'j',
  '',
  '',
  'c',
  '',
  '5',
  '9',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1B',
  '',
  '',
  '',
  'O',
  '8',
  '+',
  '\t',
  '',
  '',
  '',
  '',
  '\'',
  '',
  ')',
  'j',
  '',
  '3',
  '',
  '',
  'M',
  '=',
  '',
  '\v',
  '',
  '\x13',
  '*',
  '',
  ' ',
  '%',
  'L',
  '\x1A',
  '\x10',
  '',
  '\x8D',
  '',
  '',
  'd',
  '',
  '',
  'x',
  '',
  '',
  '',
  '',
  '\r',
  'Z',
  '',
  '',
  '\x14',
  '',
  '5',
  '',
  '',
  '',
  '\\',
  'T',
  '?',
  'b',
  ';',
  '\a',
  '',
  '4',
  'p',
  '',
  '\x15',
  '',
  '',
  '',
  'Y',
  '',
  '',
  '7',
  '',
  ':',
  '',
  '',
  '',
  '',
  '',
  'V',
  'J',
  '\x1B',
  '\x0E',
  '\b',
  'y',
  'n',
  'B',
  'v',
  '',
  '',
  'D',
  '&',
  '',
  '',
  '',
  '',
  '',
  's',
  '',
  '',
  '',
  'S',
  '~',
  '6',
  '\x7F',
  'U',
  'r',
  '',
  '-',
  '',
  '!',
  '',
  '_',
  '\x1C',
  '',
  'h',
  'k',
  'm',
  '\x81',
  'I',
  '\x06',
  '0',
  '',
  '1',
  '',
  'E',
  'o',
  'i',
  'X',
  'z',
  'K',
  'a',
  'u',
  '',
  ']',
  '[',
  '$',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x90',
  '',
  '|',
  '',
  '\x9D',
  '\f',
  '',
  'f',
  '',
  '\0',
  '{',
  '\x11',
  '',
  '\x04',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '9',
  '',
  '\x8F',
  '',
  '',
  '',
  '',
  '',
  '',
  '\"',
  'g',
  'H',
  'W',
  '#',
  '\n',
  '\x03',
  '',
  'c',
  '\x17',
  '',
  'G',
  '',
  '\x1D',
  '',
  '',
  'F',
  '',
  'P',
  '',
  ',',
  '\x1F',
  '',
  'w',
  't',
  '\x16',
  '@',
  '',
  '',
  'R',
  '',
  'l',
  '',
  '}',
  '',
  '',
  '`',
  '',
  '<',
  '2',
  '',
  '\x19',
  '/',
  '\x1E',
  '(',
  '',
  '',
  '',
  '\xFF',
  '',
  'Q',
  '\x05',
  '\x02',
  '',
  '>',
  'N',
  'A',
  '',
  'q',
  '',
  '',
  '',
  '',
  'C',
  '',
  '\x0F',
  '',
  '^',
  'e',
  '\x12',
  '\x18',
  '',
  '',
  '',
  '',
  '\x01',
  '',
  '',
  '',
  '.',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '7',
  '`',
  '',
  '4',
  '',
  'W',
  '',
  '',
  '',
  '>',
  '-',
  '',
  '',
  '\x14',
  '\x1E',
  '',
  '0',
  '',
  '',
  '',
  'V',
  '$',
  '',
  'z',
  '',
  '\f',
  '',
  '*',
  '',
  'R',
  '\x02',
  'Q',
  '+',
  '',
  ']',
  'Y',
  '',
  '',
  '(',
  '',
  'i',
  'b',
  '',
  '\x0E',
  '}',
  '',
  '',
  '{',
  'e',
  '',
  '',
  '',
  'Z',
  'x',
  '',
  '\x1C',
  '\x16',
  '',
  '',
  '',
  '\x04',
  'r',
  '',
  '',
  '',
  '',
  '',
  '?',
  '\x1F',
  '\x01',
  '=',
  'f',
  '',
  '3',
  'g',
  '',
  ',',
  '',
  '\b',
  'l',
  'I',
  'd',
  'o',
  '',
  '\x05',
  '',
  '\x06',
  '',
  '',
  't',
  'N',
  '<',
  ':',
  '',
  '\x13',
  'p',
  '\a',
  '\x8D',
  '\t',
  '',
  '',
  'H',
  '',
  '',
  'T',
  '',
  '',
  'K',
  '',
  '',
  '',
  '\x18',
  '\x1D',
  'j',
  '',
  '5',
  'X',
  '',
  '#',
  '',
  '\'',
  '\0',
  '',
  '\x12',
  '8',
  'S',
  '',
  'M',
  '\"',
  'O',
  'h',
  '\x81',
  'E',
  '',
  ';',
  '6',
  '\x1B',
  '',
  '',
  '\v',
  '\r',
  '|',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x10',
  '',
  '~',
  '\x19',
  'A',
  'F',
  '\x9D',
  '',
  '',
  'q',
  ' ',
  'a',
  '^',
  '',
  'D',
  '',
  'w',
  '',
  '\n',
  '_',
  '\x15',
  '',
  '\x7F',
  '',
  '',
  'C',
  '',
  '\x0F',
  '',
  'G',
  '',
  'n',
  '\\',
  '\x90',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '@',
  'c',
  '\x1A',
  '1',
  '',
  '',
  '',
  '\x03',
  '\xFF',
  '',
  '&',
  '',
  '\x11',
  '[',
  '',
  '',
  '',
  '',
  '',
  'P',
  'm',
  'v',
  '',
  's',
  'B',
  '\x17',
  'u',
  'L',
  '',
  '',
  '9',
  '',
  'U',
  '',
  '',
  '!',
  '',
  '',
  '.',
  '',
  '',
  '/',
  '',
  '',
  'y',
  ')',
  '',
  '',
  '',
  '',
  'J',
  'k',
  '',
  '2',
  '%',
  '',
  '\x8F',
  '',
  '',
  '',
  '?',
  '\x01',
  ':',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'E',
  '\x04',
  '',
  '',
  '\\',
  '\x14',
  '#',
  '\x9D',
  'z',
  '',
  '',
  '',
  '\f',
  '',
  '',
  's',
  '',
  '5',
  '',
  '',
  '',
  'R',
  '\x7F',
  '',
  '',
  'O',
  '2',
  '\x8F',
  'N',
  '',
  '',
  '',
  '',
  '@',
  '',
  '-',
  '',
  '',
  '\x8D',
  '',
  'T',
  '\x1F',
  'p',
  '\0',
  '',
  '\x11',
  'f',
  '',
  'l',
  '',
  'K',
  '',
  '',
  'B',
  '\v',
  '\x1A',
  '',
  '\"',
  '~',
  'H',
  '=',
  '{',
  '\t',
  'e',
  '',
  '',
  'M',
  '',
  '',
  '\x1E',
  '',
  '',
  '',
  '<',
  '4',
  '8',
  '',
  '',
  '',
  'a',
  '',
  '',
  '',
  '',
  'b',
  '}',
  '',
  '^',
  'd',
  '',
  't',
  '\x90',
  'h',
  '',
  '',
  '1',
  '*',
  '',
  '',
  '',
  '',
  '',
  '_',
  '',
  '\x03',
  'y',
  '&',
  '0',
  '%',
  '\b',
  '3',
  ']',
  'i',
  '\x1C',
  'g',
  '',
  '\x0E',
  '',
  'D',
  'J',
  '9',
  '',
  'G',
  '7',
  'w',
  'X',
  '',
  '\x16',
  '',
  '',
  '',
  'Y',
  ',',
  '',
  '',
  '\a',
  '.',
  'S',
  '\x17',
  '|',
  '\x18',
  '>',
  '',
  '',
  '',
  '',
  '',
  '',
  'P',
  'o',
  'U',
  '',
  'k',
  ';',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  'j',
  '',
  '',
  'x',
  '',
  '',
  '\x13',
  '',
  '`',
  '\x1D',
  '',
  '',
  'q',
  '\n',
  '',
  '',
  '',
  '\x0F',
  'm',
  '',
  '',
  '\x02',
  '',
  '',
  '\x05',
  '(',
  '\x10',
  '',
  'r',
  ')',
  '',
  '',
  '',
  '',
  'Q',
  '',
  '',
  '',
  '!',
  '\x81',
  ' ',
  '',
  '',
  'I',
  'V',
  '\r',
  '\x15',
  '6',
  '$',
  '',
  'C',
  '[',
  '\x1B',
  '',
  '',
  'L',
  'c',
  '+',
  '\'',
  'W',
  'Z',
  '',
  '',
  'A',
  '',
  '\x06',
  'F',
  '',
  '',
  '/',
  '',
  '',
  'v',
  '',
  'n',
  '\x19',
  'u',
  '',
  '',
  '',
  '',
  '\x9D',
  'j',
  'S',
  '',
  '',
  '&',
  '\x0F',
  '',
  '\x15',
  '',
  '',
  '\n',
  'h',
  '',
  'q',
  '\x7F',
  '{',
  '',
  '',
  '',
  'D',
  '',
  '',
  '\\',
  'C',
  '',
  '',
  ')',
  '+',
  '>',
  '\x10',
  ';',
  '',
  'y',
  '#',
  'L',
  '_',
  '\x1B',
  '',
  '',
  '',
  '\x14',
  '\r',
  'w',
  '',
  '',
  '',
  'P',
  '',
  '',
  '',
  '',
  '8',
  '4',
  'l',
  '',
  '*',
  'F',
  'I',
  '\x01',
  '\x17',
  '',
  '',
  '}',
  '\x1C',
  'c',
  '\x0E',
  '',
  ']',
  '@',
  '',
  '\x1D',
  'G',
  ',',
  '',
  '$',
  '',
  '',
  'B',
  '',
  '\x18',
  '',
  '\x13',
  '\x90',
  'A',
  'U',
  '',
  '',
  '1',
  '',
  '6',
  '',
  '\x03',
  'W',
  '',
  '',
  '',
  '(',
  '',
  '\b',
  'H',
  ':',
  '',
  '%',
  '',
  '',
  '',
  '9',
  'T',
  '',
  '',
  'N',
  '0',
  '',
  '',
  '\x12',
  '\x19',
  '\x8D',
  '\x06',
  'J',
  '^',
  '',
  '?',
  'k',
  'Y',
  '',
  '',
  '\x81',
  '',
  '3',
  '',
  'R',
  '=',
  'o',
  '',
  '',
  '',
  '',
  '',
  '\"',
  '\x04',
  '',
  'm',
  'K',
  '',
  '|',
  '[',
  '',
  '\'',
  ' ',
  'u',
  '',
  '/',
  '',
  'f',
  '',
  '~',
  '',
  '',
  'Q',
  '',
  '\xFF',
  '',
  '',
  '',
  '\x16',
  '\f',
  '',
  'a',
  '',
  '',
  '',
  '',
  'x',
  'M',
  '',
  '\t',
  '',
  '',
  '',
  '',
  'r',
  '\v',
  '',
  '',
  '\a',
  '',
  'v',
  '5',
  '',
  '',
  '',
  'E',
  '\x1E',
  '',
  '',
  '',
  '',
  'V',
  '',
  '',
  '',
  '',
  '',
  'e',
  '',
  's',
  'Z',
  '',
  '\0',
  '',
  '7',
  '',
  'O',
  '2',
  '\x05',
  '\x02',
  '!',
  '',
  '-',
  'n',
  '.',
  '',
  '',
  '`',
  '',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  'b',
  'd',
  '\x8F',
  '',
  '',
  '',
  't',
  '',
  '',
  'g',
  'p',
  '',
  '<',
  '',
  '',
  '',
  '',
  '',
  '',
  'i',
  '\x11',
  'X',
  'z',
  '\x1A',
  '',
  '',
  '',
  'T',
  '',
  'q',
  '',
  '|',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '`',
  '',
  '',
  '.',
  '9',
  'R',
  's',
  '',
  'v',
  '',
  '\x0F',
  '\x03',
  '',
  '',
  '',
  '',
  '\n',
  '',
  '',
  '~',
  '',
  '',
  '/',
  'C',
  '',
  '\x01',
  '',
  '7',
  'M',
  '',
  '',
  '',
  '\x1C',
  '\\',
  '\0',
  '\x10',
  '',
  '[',
  '',
  'k',
  '\a',
  '',
  '',
  'X',
  '',
  'V',
  '\x04',
  'D',
  '\xFF',
  '<',
  '>',
  '',
  ']',
  'y',
  '\"',
  'I',
  '\'',
  '=',
  '\x1E',
  '',
  '_',
  'x',
  '\x02',
  'A',
  '',
  '',
  '',
  'G',
  '\v',
  '\x16',
  '',
  '',
  '',
  '',
  'P',
  '',
  '',
  '',
  '',
  '?',
  '',
  '',
  '',
  '\x90',
  '',
  '',
  '\x8F',
  '-',
  '',
  '$',
  '',
  'l',
  '',
  '',
  't',
  '',
  'c',
  '',
  ':',
  '',
  '0',
  'K',
  '',
  'Y',
  '\b',
  '3',
  '',
  'L',
  '',
  '6',
  'U',
  '',
  '',
  ')',
  '',
  'H',
  '{',
  '\x1D',
  '',
  '',
  '%',
  '!',
  '\x81',
  '',
  '',
  '',
  '\r',
  '\x11',
  '',
  '',
  '+',
  '\x05',
  'W',
  '1',
  '',
  '\x17',
  'i',
  '',
  'N',
  'r',
  '',
  '(',
  '',
  '',
  '',
  '\x14',
  'Z',
  'n',
  '',
  'd',
  '',
  'S',
  '',
  ',',
  'f',
  'E',
  ' ',
  'h',
  '\x8D',
  '',
  'B',
  '@',
  'J',
  '',
  '',
  '',
  '\x7F',
  '',
  '#',
  '',
  'O',
  '',
  '',
  '',
  '\x06',
  'e',
  '\x1F',
  '',
  '',
  '\x1A',
  '',
  'j',
  'b',
  'o',
  '\x9D',
  '',
  '',
  'z',
  'F',
  ';',
  '',
  '',
  '2',
  '\t',
  '',
  '',
  '',
  '',
  '',
  '',
  '}',
  '',
  '^',
  '',
  '5',
  '',
  '\x12',
  '',
  '\f',
  '\x18',
  '&',
  '',
  '\x0E',
  '',
  'w',
  '',
  '',
  '\x13',
  '4',
  'u',
  'a',
  'g',
  '\x15',
  '',
  '*',
  '',
  '',
  'm',
  'p',
  '',
  '8',
  'Q',
  '\x1B',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  '',
  '',
  '.',
  'z',
  '',
  '\t',
  '\x0E',
  'V',
  '',
  '',
  '>',
  '',
  '',
  '3',
  'F',
  '',
  '',
  '',
  '',
  '-',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x16',
  '',
  '\x06',
  't',
  '\a',
  '',
  'W',
  '\n',
  '',
  '',
  '',
  '',
  '',
  '\r',
  '+',
  'E',
  '',
  'n',
  '',
  '',
  '',
  '',
  '*',
  'N',
  '',
  'O',
  '\x1E',
  'P',
  '7',
  'b',
  'k',
  '',
  '',
  '',
  's',
  '',
  '',
  'U',
  'p',
  '',
  '',
  '',
  'T',
  '',
  '',
  '\x7F',
  '',
  '\x17',
  '',
  '',
  '',
  '',
  '',
  '\x90',
  '',
  '@',
  '',
  '\'',
  '',
  ')',
  'Y',
  '',
  'X',
  '',
  '\x9D',
  '',
  '[',
  'L',
  '\x0F',
  '',
  '\x8F',
  '6',
  '',
  '',
  '\x1F',
  'd',
  '',
  '',
  '',
  'K',
  '_',
  '}',
  'Z',
  '\0',
  '%',
  '',
  '\x19',
  '\x1A',
  '',
  '',
  'g',
  '=',
  '',
  '',
  '^',
  'l',
  '\x13',
  '9',
  '',
  'S',
  '',
  '&',
  '1',
  '5',
  '4',
  '',
  'u',
  '',
  'c',
  '',
  '',
  'f',
  '',
  '',
  '',
  '',
  '',
  '/',
  '\v',
  ':',
  '',
  'G',
  'B',
  '8',
  '',
  '',
  '',
  '\f',
  'a',
  'v',
  '',
  '',
  '',
  'q',
  '',
  'M',
  '\x01',
  '\x10',
  '',
  '<',
  ';',
  'I',
  '',
  'e',
  '',
  '',
  '',
  'w',
  '',
  '2',
  '',
  '',
  '\xFF',
  '',
  'i',
  '!',
  'Q',
  '$',
  '',
  '',
  '\x1C',
  '',
  '',
  '\b',
  '\x04',
  '',
  '\"',
  '\x05',
  '',
  '#',
  '',
  '',
  'R',
  '',
  '',
  '',
  '',
  '(',
  '\x15',
  '',
  'x',
  '',
  'H',
  'o',
  '',
  '\x14',
  '\x18',
  '',
  '\x1D',
  '',
  'r',
  'C',
  '',
  'y',
  ']',
  'j',
  'J',
  '',
  '',
  '',
  '',
  '\x1B',
  '\x81',
  '0',
  '',
  '\x02',
  'A',
  '',
  '\x11',
  '',
  '',
  '',
  '`',
  '{',
  '',
  '\x12',
  ',',
  '|',
  'm',
  '',
  '\x8D',
  '',
  'D',
  '?',
  '',
  ' ',
  '\\',
  '\x03',
  '',
  '~',
  'h',
  '',
  'S',
  ':',
  '',
  '\x05',
  '',
  '',
  '{',
  '\'',
  '',
  '',
  '',
  '\x0F',
  'a',
  'd',
  '\x19',
  '\x1E',
  'o',
  '\b',
  '',
  'O',
  '',
  'Y',
  '',
  'r',
  '',
  '',
  '',
  '\"',
  '',
  '',
  'U',
  '\x81',
  '\x16',
  '',
  '',
  '_',
  '',
  'c',
  '',
  '',
  '',
  'B',
  '',
  'G',
  '',
  '\x1C',
  '\x10',
  '\a',
  '',
  '\x03',
  '',
  '\x02',
  'A',
  '\x04',
  '\x15',
  ';',
  '\x1D',
  '+',
  '',
  '',
  '',
  '\f',
  '',
  '\x1A',
  '',
  '',
  ',',
  '\xFF',
  '5',
  'b',
  '\t',
  '*',
  ' ',
  '',
  '',
  'F',
  '',
  '',
  '',
  '1',
  '',
  '',
  '',
  '',
  '$',
  '^',
  '',
  'J',
  '',
  '',
  '6',
  '',
  '7',
  '/',
  '',
  '',
  '\0',
  '-',
  '',
  '',
  '',
  '}',
  '\x06',
  'Z',
  'L',
  '\x7F',
  '',
  '\n',
  '8',
  '',
  '',
  '',
  '',
  '\x12',
  '\x90',
  'P',
  '|',
  '',
  '',
  'z',
  '',
  '\x8D',
  '',
  '',
  'D',
  '\v',
  '',
  '!',
  '[',
  '',
  'N',
  '<',
  '',
  '',
  'v',
  '',
  '#',
  'f',
  '',
  '',
  's',
  'x',
  '?',
  '',
  '=',
  '',
  '',
  '~',
  '',
  'u',
  '',
  '',
  '',
  '',
  'k',
  'q',
  '',
  '',
  '',
  '',
  'i',
  'T',
  '',
  '2',
  '',
  '\x0E',
  '\x01',
  '',
  '4',
  '\x11',
  '(',
  '\x17',
  '',
  '',
  '',
  'l',
  '\r',
  '',
  '',
  '',
  'm',
  'Q',
  'w',
  '',
  'C',
  '',
  '',
  '',
  't',
  'y',
  '.',
  ')',
  '',
  '',
  '',
  'h',
  '',
  '\x13',
  'X',
  'e',
  '@',
  'R',
  '%',
  '\\',
  '',
  'E',
  '`',
  '',
  'n',
  '',
  '',
  '9',
  '',
  '',
  '\x14',
  '',
  '',
  '',
  '',
  '\x9D',
  '\x1F',
  '',
  'K',
  '0',
  '',
  '',
  '',
  '&',
  '',
  'W',
  '',
  '',
  '>',
  'j',
  'M',
  '',
  '\x8F',
  '\x1B',
  '',
  '',
  '',
  'H',
  '',
  ']',
  '',
  'p',
  '\x18',
  '',
  '',
  '',
  'g',
  'V',
  'I',
  '3',
  '',
  '',
  'C',
  '',
  '+',
  '',
  '',
  'W',
  '',
  'v',
  'y',
  '',
  '\'',
  '/',
  '',
  '',
  '\x1F',
  '',
  '',
  'Q',
  '',
  '',
  '',
  '',
  '\r',
  'B',
  '',
  '',
  'H',
  '\x03',
  '\t',
  '3',
  'N',
  '\x05',
  '',
  '',
  '',
  'a',
  'h',
  '\x11',
  '',
  '',
  'x',
  '',
  '',
  '',
  'M',
  'D',
  '1',
  '',
  'E',
  'P',
  '',
  '\x14',
  '',
  '',
  '',
  '',
  '\x04',
  'U',
  '?',
  '\x1B',
  '\x19',
  'q',
  'k',
  'r',
  '',
  '',
  'l',
  '',
  '*',
  '',
  '\x1E',
  '',
  '',
  '$',
  '_',
  '',
  'X',
  '',
  '',
  '\x06',
  '\x81',
  '',
  '\x8D',
  '',
  '.',
  '',
  '!',
  'Z',
  '9',
  '\x17',
  '',
  '',
  '\x15',
  '',
  '',
  '\x16',
  '',
  '@',
  '',
  '',
  '0',
  'R',
  '\f',
  '',
  '',
  '',
  'Y',
  '\x0E',
  '',
  '\"',
  'T',
  '(',
  'm',
  '',
  '{',
  '',
  'O',
  ']',
  '',
  '',
  '`',
  ' ',
  '',
  'o',
  '',
  'J',
  '\x1C',
  '\x13',
  '',
  '',
  '',
  '',
  'L',
  '\x90',
  'd',
  '\x1D',
  '|',
  '',
  '2',
  '\xFF',
  'j',
  'w',
  '',
  '\x02',
  '',
  '',
  ',',
  'i',
  '%',
  '\x1A',
  '>',
  '',
  '}',
  'G',
  '[',
  'p',
  '',
  '',
  '\x18',
  '',
  '',
  '',
  '6',
  '',
  '',
  '&',
  '\\',
  '',
  'b',
  '^',
  'u',
  '',
  '\x01',
  '8',
  '',
  'K',
  '-',
  '=',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'f',
  '7',
  '',
  '',
  '\x0F',
  '',
  'A',
  '',
  '',
  ')',
  '',
  '~',
  '\x12',
  's',
  '',
  '',
  'g',
  'S',
  '',
  '\v',
  'F',
  'I',
  '',
  '',
  '',
  '<',
  '',
  '',
  '',
  '',
  '',
  '',
  '\0',
  '',
  '',
  '',
  'c',
  '',
  '',
  ';',
  '\a',
  '',
  '5',
  '\b',
  '\x8F',
  '',
  ':',
  '',
  '\x7F',
  '',
  '#',
  '',
  '',
  '',
  '',
  'n',
  '',
  '4',
  '',
  '',
  '\x9D',
  '',
  '',
  '\n',
  '\x10',
  'e',
  't',
  'z',
  '',
  'V',
  'c',
  '',
  '\x19',
  '',
  '\x1E',
  '',
  'v',
  '',
  '-',
  '%',
  '\x11',
  '`',
  '',
  '',
  '\x18',
  '',
  '\'',
  '\x03',
  '#',
  '',
  '',
  'Q',
  '',
  'U',
  '',
  '\x12',
  '',
  '[',
  ')',
  '@',
  '~',
  '\x1D',
  '',
  '',
  '',
  '!',
  '',
  '',
  '',
  '',
  'q',
  '',
  'H',
  '\n',
  'u',
  '5',
  '}',
  '',
  'j',
  '0',
  '',
  '',
  '',
  '\x1C',
  '',
  '',
  '',
  '',
  '',
  ',',
  '',
  '',
  '',
  't',
  '\x8D',
  'J',
  '',
  '',
  '_',
  '',
  ']',
  'z',
  '',
  '',
  '\x10',
  '',
  'D',
  '',
  '',
  '',
  'l',
  ':',
  'O',
  '4',
  '',
  'i',
  '',
  '.',
  '$',
  '',
  ' ',
  'G',
  '\x02',
  '',
  '',
  'B',
  ';',
  'C',
  'N',
  'A',
  '',
  '',
  '',
  'T',
  '',
  '2',
  '',
  '+',
  'n',
  '',
  '',
  '\0',
  '',
  'd',
  '',
  '',
  '',
  'K',
  '',
  'm',
  'I',
  '',
  'e',
  'p',
  '\t',
  '<',
  '',
  '',
  'x',
  's',
  'b',
  '',
  '?',
  '=',
  '1',
  '',
  '',
  '\x16',
  'o',
  '',
  '',
  '',
  '',
  'w',
  '',
  '\x17',
  'h',
  '',
  '',
  '',
  '',
  'S',
  '\x8F',
  '',
  '\\',
  '\x1A',
  '',
  '',
  '>',
  '\x9D',
  '',
  '\r',
  '\x1F',
  'Z',
  '\x06',
  'r',
  '\x15',
  '\x14',
  '',
  'R',
  '|',
  '\x7F',
  '',
  '',
  'V',
  '',
  '',
  '\x05',
  '',
  '\x13',
  '8',
  '\xFF',
  '',
  '',
  '',
  '\b',
  '',
  '',
  '\x04',
  '\x1B',
  '\x81',
  'M',
  '',
  '',
  'k',
  '',
  '',
  '7',
  '',
  '\v',
  '',
  'Y',
  '',
  '',
  '',
  '',
  '9',
  '',
  '',
  '\x0F',
  '&',
  'a',
  '3',
  '(',
  '',
  'P',
  '',
  '',
  '',
  '',
  '',
  'X',
  'f',
  '\f',
  '',
  '\x0E',
  '\a',
  '',
  '6',
  '',
  '',
  'L',
  '',
  '',
  '/',
  '',
  'F',
  '',
  '^',
  '',
  'E',
  '\x01',
  '',
  '\x90',
  '{',
  '',
  '',
  'W',
  'g',
  'y',
  '',
  '',
  '',
  '\"',
  '',
  '*',
  '\x0F',
  '\x06',
  'W',
  'a',
  '\x1F',
  'v',
  '',
  '*',
  '',
  '\\',
  '/',
  's',
  '\x90',
  'A',
  '',
  'e',
  '',
  '\x8D',
  '-',
  '',
  '',
  '@',
  'z',
  'q',
  '3',
  '',
  'U',
  '',
  '\a',
  '\x19',
  '\b',
  '',
  '',
  '',
  '8',
  '',
  '\x1A',
  '',
  '7',
  '',
  'V',
  '!',
  '',
  '',
  '',
  'T',
  'G',
  '',
  '',
  '',
  '\x12',
  '^',
  '',
  '\r',
  '',
  '',
  'Z',
  '',
  '',
  '\x18',
  '\x1B',
  '',
  'g',
  '',
  'm',
  'Y',
  'w',
  '',
  '',
  't',
  '\x1E',
  'n',
  'c',
  '',
  '',
  'k',
  '',
  '',
  '',
  '',
  '',
  '9',
  '',
  '\x81',
  'u',
  '',
  'Q',
  'l',
  '',
  'C',
  'o',
  '',
  '',
  '',
  '',
  '',
  'j',
  '4',
  '',
  '',
  '',
  '|',
  '',
  '?',
  '',
  'H',
  '\f',
  '\0',
  '\"',
  'f',
  'S',
  '',
  '',
  '',
  '~',
  '',
  '2',
  '6',
  'N',
  '',
  '',
  '\x17',
  'X',
  '+',
  '',
  'h',
  ')',
  '',
  'y',
  '',
  '',
  '\n',
  '',
  '',
  '#',
  'i',
  ';',
  'F',
  '',
  '',
  '\x04',
  'O',
  'E',
  'x',
  '',
  '',
  '(',
  '',
  '',
  '',
  'R',
  'I',
  'b',
  '',
  '',
  '5',
  '\x16',
  'P',
  '',
  '[',
  '',
  '=',
  '',
  '\x01',
  '',
  '\xFF',
  '\x11',
  '>',
  '0',
  '\x05',
  '}',
  ' ',
  '\t',
  '\x8F',
  '\x1D',
  '&',
  '',
  '',
  'J',
  '',
  'd',
  '',
  '',
  '',
  '%',
  '',
  'M',
  '',
  '',
  '\x9D',
  '\x14',
  '',
  '',
  '',
  'L',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '.',
  '',
  '',
  '',
  ':',
  '',
  'K',
  '',
  '\x10',
  '',
  '',
  '\x02',
  '\x7F',
  '',
  '',
  '\v',
  '',
  '',
  '',
  'D',
  ']',
  '\x03',
  '`',
  'r',
  '',
  '_',
  '',
  '$',
  '\x1C',
  '',
  '',
  '',
  '\'',
  'B',
  ',',
  '',
  '',
  '\x0E',
  '{',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x13',
  '<',
  '',
  '1',
  '\x15',
  '',
  '',
  '',
  'p',
  '\x16',
  '\x15',
  '4',
  'f',
  'r',
  '',
  '',
  '',
  '',
  '',
  'i',
  '\x1E',
  '',
  '',
  '`',
  '/',
  '\t',
  '\f',
  '',
  '',
  '{',
  'R',
  '',
  '',
  '',
  '',
  '\x1A',
  '\x18',
  '',
  'J',
  '',
  '\x19',
  '',
  '1',
  '',
  '$',
  '',
  '',
  '\x1B',
  '',
  'D',
  '',
  '',
  '',
  '',
  'x',
  '',
  '',
  '',
  '',
  '',
  '@',
  '',
  '',
  'j',
  '',
  '\x11',
  '',
  '',
  '\0',
  '2',
  '',
  '\x1D',
  '',
  '%',
  '',
  '',
  '',
  '',
  '?',
  '~',
  '',
  'k',
  '\x8F',
  '',
  '',
  '+',
  '',
  '\x9D',
  '',
  '',
  'U',
  'W',
  '&',
  '',
  '\x10',
  'P',
  't',
  '9',
  '',
  'M',
  '\b',
  '',
  '',
  '\x02',
  'N',
  '',
  ':',
  '-',
  'u',
  '',
  'C',
  '',
  '',
  '',
  'n',
  '\x0E',
  ' ',
  '6',
  '',
  '\x1C',
  '',
  '',
  '',
  '',
  'V',
  'v',
  'H',
  '',
  '\x7F',
  'Q',
  '\n',
  '',
  '',
  '',
  '[',
  '',
  ';',
  'K',
  '',
  '',
  '',
  '\x05',
  '',
  'y',
  'o',
  '(',
  '',
  '',
  '',
  '\"',
  '0',
  '',
  '',
  '\x1F',
  '',
  '\x04',
  '',
  '',
  '',
  '',
  'q',
  'L',
  '\x81',
  '>',
  'Y',
  '',
  '',
  'd',
  '',
  '',
  '',
  ',',
  '',
  '',
  'S',
  'O',
  '',
  '',
  '\x14',
  '',
  '\x90',
  ')',
  '',
  'e',
  '.',
  '7',
  'T',
  '',
  'A',
  'X',
  '',
  'B',
  '',
  '\xFF',
  '',
  '#',
  '',
  '',
  '\x03',
  '',
  'I',
  '\x06',
  '',
  '',
  '\x0F',
  '',
  '',
  '',
  'h',
  ']',
  '',
  's',
  'z',
  '',
  '5',
  'p',
  '',
  '',
  'm',
  'G',
  'Z',
  'c',
  'b',
  'a',
  '',
  '^',
  '!',
  '',
  '\x8D',
  '\a',
  '',
  '\x17',
  '',
  '*',
  '',
  '3',
  'w',
  '=',
  'l',
  '',
  '',
  '\'',
  '\x12',
  '_',
  '\v',
  '',
  '',
  '\x01',
  '',
  'F',
  'E',
  '\x13',
  '',
  '',
  '8',
  '\\',
  '',
  '<',
  '',
  'g',
  '',
  '|',
  '',
  '\r',
  '}',
  'd',
  '',
  '8',
  'p',
  '',
  '7',
  '',
  '&',
  '',
  '',
  '',
  '',
  'H',
  '',
  '',
  '-',
  '\x19',
  '',
  '',
  '!',
  '',
  '\x81',
  '',
  '\x06',
  '',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  '',
  '\'',
  's',
  '',
  '_',
  'K',
  '',
  '',
  '/',
  ']',
  '',
  '\0',
  'S',
  'P',
  '`',
  '',
  '',
  '\x8D',
  '|',
  '\x90',
  '',
  '\b',
  '',
  'T',
  '',
  '',
  '',
  '\x13',
  '4',
  '\"',
  'L',
  '0',
  '',
  'X',
  '^',
  '',
  '2',
  'O',
  'n',
  'M',
  '{',
  '',
  '\t',
  '\x04',
  '',
  '\x1C',
  '',
  'N',
  't',
  '',
  '',
  '3',
  'I',
  'B',
  'o',
  '',
  'z',
  '',
  'c',
  'e',
  '',
  '9',
  '',
  '\x1D',
  '5',
  'J',
  'i',
  'm',
  '',
  '\x02',
  '',
  '',
  '\r',
  '',
  'r',
  'V',
  '',
  '',
  '',
  '',
  '\a',
  '\x7F',
  '',
  '',
  '}',
  '',
  '+',
  '',
  '',
  '',
  ' ',
  '',
  '',
  '',
  'j',
  '',
  '',
  '',
  '\x1A',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x0F',
  '',
  '\x9D',
  '',
  'E',
  'D',
  '',
  '\x15',
  'C',
  '',
  '',
  '6',
  '\x17',
  'G',
  '',
  'u',
  '\x12',
  '',
  '',
  '<',
  '',
  '',
  '\x10',
  '>',
  '',
  'f',
  '\x8F',
  '',
  '\x1E',
  ')',
  '\x11',
  '',
  'A',
  '',
  'U',
  '\x18',
  '',
  '@',
  '\x03',
  'x',
  '',
  '1',
  '',
  'Q',
  '',
  '',
  '',
  '\v',
  '=',
  ',',
  '\xFF',
  '',
  '\f',
  '\x14',
  '\x0E',
  '',
  '',
  ';',
  '',
  '',
  'q',
  '.',
  '\x16',
  'b',
  'a',
  '\x05',
  '',
  '',
  '*',
  '',
  '',
  '',
  '',
  'Z',
  'h',
  '',
  '\x1B',
  '',
  '',
  '',
  '',
  'g',
  '?',
  'y',
  'F',
  '$',
  'R',
  '',
  '[',
  '',
  '#',
  '\\',
  'l',
  '\x01',
  '(',
  '%',
  '',
  '',
  '',
  '',
  '',
  '',
  'w',
  '',
  '',
  '\n',
  '',
  '',
  'Y',
  'v',
  'W',
  '',
  '',
  '',
  'k',
  '',
  '~',
  '',
  ':',
  'i',
  '\x19',
  '+',
  '',
  '<',
  'a',
  '',
  '',
  '',
  '\x05',
  '',
  '',
  'b',
  'l',
  '',
  '',
  '',
  '',
  'S',
  'J',
  ']',
  '',
  '',
  'f',
  '',
  '',
  ';',
  '',
  '4',
  '\x1D',
  '\b',
  '',
  '',
  'Y',
  '',
  '\x11',
  '/',
  '',
  '',
  '',
  '',
  '\r',
  '5',
  '',
  '',
  '',
  '',
  ' ',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x13',
  '\n',
  '',
  '',
  '',
  ':',
  '',
  '',
  '',
  'r',
  'p',
  '',
  '',
  '',
  'N',
  '{',
  '',
  'I',
  '\xFF',
  '8',
  '',
  '=',
  'q',
  'L',
  '',
  '\t',
  '7',
  '',
  '',
  '',
  '^',
  '',
  '\0',
  '',
  '',
  's',
  '\x10',
  '\'',
  '_',
  'z',
  '',
  '9',
  '',
  'V',
  '.',
  '\x02',
  '`',
  '',
  '',
  '(',
  '\x0F',
  '',
  '',
  '',
  'K',
  'C',
  '\x0E',
  '',
  '6',
  '\x18',
  '',
  '',
  '\x1E',
  '',
  '\x9D',
  '',
  'o',
  '!',
  '',
  'T',
  '}',
  '&',
  '%',
  '',
  '',
  '',
  '',
  '0',
  'd',
  'U',
  'P',
  '\a',
  '?',
  'e',
  't',
  '',
  '',
  '',
  '\x90',
  '',
  'W',
  '',
  'v',
  '',
  ',',
  '',
  '#',
  'M',
  '',
  '\v',
  '\x81',
  '',
  '',
  '\x12',
  '\"',
  'Z',
  '',
  '3',
  '',
  'k',
  '\x04',
  '\x15',
  '',
  '',
  '',
  'D',
  '',
  '\x1A',
  '',
  '[',
  '',
  '',
  '',
  'h',
  'Q',
  '',
  '\x17',
  '\\',
  '',
  '1',
  'F',
  '',
  '\f',
  '',
  '|',
  '*',
  'G',
  '',
  '',
  '\x8D',
  '\x1B',
  '',
  '',
  'w',
  '',
  '',
  '',
  '\x06',
  '',
  'j',
  '',
  'X',
  '2',
  'g',
  '',
  'H',
  ')',
  '$',
  '',
  '',
  'n',
  'y',
  '',
  '\x01',
  'E',
  '~',
  '>',
  'B',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  'O',
  '\x8F',
  '',
  'R',
  '',
  'u',
  '',
  '',
  '',
  '',
  '',
  '\x14',
  '',
  'x',
  '\x1C',
  '',
  '\x16',
  '@',
  'A',
  '',
  'm',
  '-',
  '',
  'c',
  '',
  '',
  '\x03',
  '\x12',
  '',
  'd',
  '',
  '>',
  '\f',
  '',
  '\n',
  '',
  '\x14',
  '*',
  '',
  'T',
  '#',
  '',
  'E',
  '!',
  '',
  's',
  '.',
  'N',
  '\x9D',
  'k',
  '',
  'y',
  '\xFF',
  'O',
  '',
  'W',
  'w',
  '\x02',
  ',',
  '',
  '',
  '{',
  't',
  '',
  ' ',
  'M',
  '',
  '',
  '',
  '\x04',
  ')',
  '6',
  '\x18',
  '',
  '\x16',
  '',
  '',
  '',
  '',
  '',
  '%',
  'n',
  '`',
  'v',
  '\x0F',
  '\'',
  '',
  '',
  '',
  '',
  '',
  '',
  'l',
  '',
  '_',
  '&',
  'b',
  '',
  '1',
  '',
  'm',
  '',
  '',
  '',
  '',
  '7',
  '2',
  'C',
  'I',
  '',
  '',
  '\x1A',
  '5',
  '',
  '',
  '\0',
  'D',
  'c',
  '',
  'x',
  '^',
  '',
  'B',
  '',
  'Y',
  '',
  '',
  '',
  '$',
  '',
  '',
  '',
  'p',
  '',
  '',
  '',
  ':',
  '\\',
  '',
  'F',
  '|',
  'Z',
  '',
  '0',
  '',
  '4',
  '',
  '\x7F',
  '',
  '',
  'j',
  'K',
  '',
  '',
  '',
  '',
  '-',
  '',
  '\b',
  '\x06',
  '\x11',
  '',
  'G',
  '',
  '',
  '9',
  '',
  'u',
  '',
  '',
  '~',
  '',
  '',
  '',
  'V',
  '+',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1E',
  'g',
  '',
  '',
  '',
  '=',
  '',
  '',
  'o',
  '\x03',
  'r',
  '',
  'f',
  '\r',
  '',
  '',
  '\x17',
  '\x90',
  '/',
  'h',
  '',
  '',
  '\x0E',
  '',
  '',
  'R',
  '\x19',
  '',
  '\x15',
  '\v',
  'U',
  '',
  'i',
  '',
  '\x8F',
  'z',
  '',
  '',
  '[',
  '',
  ']',
  '',
  '',
  '\a',
  '',
  '\"',
  '',
  '\x13',
  'X',
  '',
  '\x81',
  '',
  '',
  '',
  '',
  '',
  '',
  'H',
  '\x1B',
  '',
  '',
  '',
  'a',
  '',
  '\x1F',
  '\x1D',
  'P',
  '',
  '',
  '(',
  '',
  '',
  '\t',
  '\x05',
  '3',
  '',
  '@',
  '',
  'Q',
  '',
  '\x1C',
  'S',
  '?',
  '',
  'A',
  '\x8D',
  '\x10',
  'L',
  ';',
  '<',
  'e',
  '8',
  'q',
  'J',
  '\x01',
  '}',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'k',
  '\x12',
  '',
  '',
  '',
  '',
  'r',
  '\x11',
  '\x03',
  '',
  '',
  '',
  '',
  '',
  '',
  '3',
  '',
  '\x1E',
  '',
  '@',
  'd',
  '',
  '\x1B',
  '',
  '',
  '\x15',
  '',
  '*',
  '',
  '.',
  '',
  '\\',
  '',
  '',
  'q',
  '',
  '5',
  '#',
  'v',
  'b',
  '\x06',
  'a',
  '\x14',
  'K',
  '$',
  '',
  '\x0E',
  '',
  '',
  '',
  '',
  '\x0F',
  'l',
  '',
  '',
  '?',
  '',
  '',
  '8',
  '\"',
  'P',
  '\x17',
  '',
  '',
  '\a',
  '\x8F',
  '',
  '',
  '',
  'T',
  '<',
  '~',
  '',
  '',
  '',
  '\t',
  '',
  '&',
  '\x04',
  '\0',
  '',
  '',
  '\x02',
  '',
  'o',
  '',
  '',
  '',
  '',
  'C',
  '!',
  '',
  'g',
  '',
  '',
  '',
  '',
  '',
  '',
  '(',
  '',
  '^',
  '',
  'p',
  '',
  '',
  't',
  '',
  '',
  '',
  'f',
  '',
  'Q',
  '',
  '',
  '',
  '',
  '[',
  '',
  '',
  '',
  'm',
  '{',
  '\x81',
  '6',
  '',
  '4',
  'Y',
  '\x19',
  '',
  '\x1C',
  '',
  'u',
  'j',
  'E',
  '',
  '',
  'c',
  'O',
  '1',
  'n',
  '\x18',
  'i',
  'e',
  '',
  '',
  'J',
  '',
  '0',
  '-',
  '',
  '',
  '',
  '',
  '',
  '\x01',
  'I',
  '',
  ',',
  '',
  'R',
  '',
  'L',
  '=',
  '',
  '\x1F',
  'H',
  'F',
  '',
  '',
  ':',
  '',
  '\x90',
  'S',
  'y',
  '',
  '',
  '',
  '\n',
  '\x9D',
  '',
  '',
  '\v',
  '',
  '',
  '+',
  '\x8D',
  '',
  'w',
  '',
  '',
  '\b',
  'D',
  'h',
  '',
  '_',
  '\x13',
  '',
  'X',
  '',
  '\f',
  ']',
  ';',
  '/',
  '',
  '\r',
  '\x7F',
  'z',
  '',
  '\x16',
  '|',
  '7',
  's',
  '\x1A',
  '9',
  'U',
  '',
  '',
  ')',
  '\x05',
  '',
  '',
  '',
  'G',
  '',
  '',
  '',
  '',
  '\xFF',
  '2',
  'N',
  '}',
  '\x1D',
  'V',
  'M',
  '',
  '',
  '\x10',
  '\'',
  '',
  '',
  '',
  '%',
  '',
  '>',
  ' ',
  'x',
  '`',
  '',
  'W',
  'B',
  'Z',
  'A',
  '',
  '',
  '`',
  '',
  '',
  '',
  '',
  '+',
  '',
  'I',
  '',
  '',
  '',
  'N',
  '2',
  '',
  '',
  '\x9D',
  '',
  '',
  '-',
  '\r',
  '\x0E',
  '*',
  ';',
  '',
  '\x17',
  '\x05',
  'U',
  'g',
  '\x0F',
  'G',
  'b',
  'R',
  '',
  '',
  '(',
  'm',
  '',
  '\x1E',
  '',
  '\\',
  'i',
  '',
  '\x1D',
  '8',
  '',
  '',
  '',
  'j',
  '\0',
  'y',
  '\x90',
  '',
  '',
  '',
  '\x81',
  '',
  '\x1A',
  '',
  '?',
  '',
  '',
  'K',
  '=',
  '',
  '\xFF',
  '',
  '\x7F',
  'H',
  '',
  '',
  '9',
  '/',
  '\x19',
  '',
  'q',
  '',
  'n',
  '\x11',
  '@',
  '',
  '',
  '',
  '',
  'D',
  '',
  '',
  '',
  '',
  '\n',
  '',
  'p',
  's',
  '',
  '',
  '',
  '\x13',
  '',
  '',
  '|',
  'O',
  'S',
  '',
  '\x12',
  'l',
  '',
  '\x1F',
  '',
  '',
  '\a',
  'u',
  '',
  '$',
  '}',
  '',
  '7',
  '',
  '{',
  '',
  '3',
  '',
  '[',
  '',
  '\f',
  ',',
  'k',
  '',
  '%',
  '1',
  'P',
  '^',
  'w',
  '',
  ' ',
  '',
  '',
  '',
  '&',
  '\x01',
  'F',
  '',
  '\v',
  'X',
  '',
  '\x02',
  'M',
  '',
  '',
  'E',
  'A',
  '#',
  '',
  'r',
  '',
  '',
  '_',
  '',
  '',
  '',
  '6',
  '\x14',
  't',
  '',
  '\"',
  '',
  'f',
  '\x8F',
  'T',
  '\b',
  '',
  'Z',
  ':',
  '',
  '',
  '',
  '\x15',
  'c',
  '',
  '',
  '',
  'Q',
  '<',
  '',
  '',
  '',
  '!',
  'Y',
  '\x18',
  '',
  ')',
  '',
  '',
  '',
  '',
  '5',
  '',
  '',
  '',
  '',
  '\x8D',
  '',
  '0',
  '',
  '',
  'B',
  '\'',
  'x',
  '~',
  '4',
  'e',
  'W',
  '.',
  '>',
  '',
  '',
  '',
  '',
  '',
  '',
  'C',
  'z',
  'v',
  '\x1B',
  '\x1C',
  '',
  '',
  '',
  '\x16',
  '',
  'o',
  '',
  '\x03',
  'L',
  'V',
  'd',
  '',
  'h',
  '',
  '',
  '',
  '',
  '',
  'a',
  '',
  '',
  '',
  '\x04',
  '\x06',
  '',
  'J',
  '',
  ']',
  '',
  '\x10',
  '',
  '\t',
  '`',
  '',
  '',
  ' ',
  'M',
  '5',
  'I',
  '\x8F',
  ']',
  '3',
  '',
  '',
  '',
  '',
  '\x06',
  '',
  'O',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  '',
  '',
  'y',
  '',
  '\x12',
  '\x1D',
  ':',
  '',
  '',
  '9',
  '',
  '\t',
  '\x10',
  's',
  '\x9D',
  'q',
  '',
  'C',
  '$',
  '',
  '',
  'g',
  '\x1C',
  '\x1E',
  '\x01',
  '',
  '',
  '\x1B',
  '#',
  '',
  '',
  '\x15',
  'F',
  '0',
  '\r',
  '@',
  '',
  '',
  'o',
  'k',
  '%',
  'S',
  '.',
  '?',
  '\\',
  '',
  '*',
  '',
  '\v',
  '\x0E',
  'L',
  '',
  '',
  '',
  '',
  'h',
  '',
  '',
  'K',
  '',
  '',
  '',
  '',
  '',
  '\x16',
  '\x7F',
  'B',
  '',
  'J',
  '',
  '',
  '',
  ')',
  '',
  '',
  'j',
  '4',
  '',
  '',
  '',
  '',
  '',
  '/',
  'a',
  '\x04',
  'v',
  '',
  'b',
  '[',
  'G',
  '\x90',
  'f',
  'l',
  'N',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x0F',
  'w',
  '6',
  '',
  '|',
  '\x81',
  'R',
  'r',
  'x',
  '',
  '!',
  '',
  '',
  '\x11',
  'c',
  '\x13',
  '',
  '',
  'U',
  'u',
  '',
  '',
  '-',
  '\b',
  '2',
  '',
  '',
  '',
  '\x17',
  'W',
  '',
  '7',
  'i',
  '+',
  '',
  '',
  '',
  '<',
  '',
  '',
  '',
  'Q',
  'A',
  'd',
  'Y',
  'n',
  '\x19',
  '',
  '',
  'D',
  '\x14',
  '{',
  '',
  '',
  '',
  'P',
  'H',
  '\0',
  '',
  '',
  '',
  '1',
  't',
  '=',
  '}',
  '',
  '',
  '',
  '',
  '',
  '',
  'm',
  'T',
  'Z',
  '(',
  '',
  '',
  '\f',
  'e',
  '',
  '>',
  '',
  '~',
  '\x05',
  '\xFF',
  ';',
  '',
  '',
  '',
  '',
  '\x8D',
  '',
  '\"',
  ',',
  '',
  '\x1F',
  '8',
  '',
  '',
  '&',
  '',
  '',
  '\'',
  'E',
  '',
  'V',
  '',
  '',
  '',
  '\x03',
  '',
  'z',
  '',
  '^',
  '\a',
  '',
  '\x1A',
  '',
  '_',
  'p',
  '\x18',
  '',
  '',
  'X',
  '',
  '',
  '\n',
  '',
  'K',
  '',
  '',
  '\x15',
  '',
  'y',
  'c',
  '',
  '',
  '4',
  '\x8F',
  '',
  '',
  '=',
  'j',
  '',
  '',
  '',
  'z',
  'H',
  '',
  '\x10',
  'S',
  '',
  '3',
  'N',
  ' ',
  '',
  '',
  ',',
  '\a',
  'L',
  '',
  'F',
  '',
  '',
  'v',
  '',
  '',
  ';',
  '',
  '',
  '\x8D',
  '5',
  '~',
  '',
  'k',
  '\x16',
  '',
  '',
  '',
  'B',
  '!',
  '',
  'V',
  'I',
  '',
  '',
  '6',
  '\x0E',
  '\v',
  ']',
  '\f',
  '',
  '\x14',
  '',
  '8',
  '\x1B',
  '<',
  'Z',
  '\x13',
  '\x1E',
  'A',
  'E',
  'C',
  'p',
  '',
  '',
  '',
  'a',
  '',
  '',
  '\x0F',
  'G',
  '',
  'X',
  '|',
  '\x05',
  '',
  '',
  '',
  '',
  '',
  't',
  '',
  '',
  'h',
  '',
  'w',
  '',
  '',
  '',
  'r',
  'q',
  '\x18',
  '\r',
  'O',
  '`',
  '',
  '',
  '{',
  '\'',
  '',
  '',
  '(',
  '\x01',
  'R',
  '',
  ':',
  '',
  '',
  '',
  'x',
  '',
  '\b',
  'i',
  '',
  '-',
  '\t',
  '\x03',
  '',
  'd',
  '\x1C',
  '',
  '',
  '_',
  '\0',
  '\x19',
  '.',
  '',
  '',
  '',
  'J',
  '',
  '?',
  '\n',
  '1',
  '',
  '\x1D',
  '',
  '',
  '',
  '',
  '0',
  '',
  '',
  '',
  '',
  '7',
  '',
  '',
  '\x06',
  '',
  '\x90',
  '',
  'D',
  'n',
  '',
  '',
  '',
  '',
  '',
  '9',
  ')',
  '\x1F',
  '',
  '',
  '',
  '\x7F',
  '',
  '',
  '',
  '*',
  '',
  '\x02',
  '\x9D',
  '',
  '',
  '%',
  '\"',
  '',
  'o',
  '$',
  'g',
  '',
  'm',
  '',
  '^',
  '',
  'u',
  '>',
  '',
  '',
  '',
  '',
  '#',
  'Y',
  '',
  '',
  'l',
  '2',
  'T',
  '/',
  '',
  '',
  '',
  '',
  '&',
  '',
  '\x1A',
  '\x12',
  '}',
  'W',
  '',
  '',
  'M',
  '',
  '\x81',
  'e',
  '@',
  '\xFF',
  '',
  '',
  'f',
  '\x04',
  'U',
  '',
  '',
  'Q',
  'P',
  '',
  '[',
  '\x11',
  '\x17',
  '+',
  'b',
  '',
  '',
  '',
  '\\',
  '',
  '',
  '',
  '',
  's',
  '',
  '',
  'm',
  '',
  '4',
  '',
  '',
  '',
  '',
  '',
  '',
  ',',
  '',
  '',
  '\x90',
  '',
  '',
  '',
  ':',
  '',
  '',
  '',
  '3',
  '',
  'G',
  '',
  '',
  '(',
  '',
  'v',
  '',
  '{',
  'W',
  '[',
  '\x1D',
  '!',
  '9',
  '?',
  '',
  '',
  'I',
  '',
  '\x1F',
  'q',
  ']',
  '',
  '',
  '\x03',
  '',
  '\x14',
  '\0',
  '',
  '\x81',
  '',
  't',
  '',
  '$',
  '\x1C',
  '=',
  '\x7F',
  '',
  'X',
  '&',
  'B',
  '7',
  '',
  'p',
  '',
  '\"',
  'T',
  '+',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1A',
  '',
  '~',
  '2',
  'k',
  '\x01',
  '',
  '',
  '',
  '',
  '',
  '',
  'a',
  '*',
  '',
  'Q',
  '',
  '',
  'u',
  'z',
  '',
  '',
  'E',
  '',
  '',
  '\b',
  '',
  'l',
  '',
  '',
  '',
  '}',
  '\n',
  '',
  'n',
  '',
  '',
  '',
  '',
  '',
  'C',
  '',
  'A',
  '',
  '',
  '`',
  '',
  '',
  'b',
  '',
  '',
  'J',
  'D',
  '\x9D',
  '',
  '-',
  '',
  '',
  '',
  '',
  '\t',
  'd',
  's',
  'w',
  '',
  'Z',
  '%',
  '\\',
  'V',
  '#',
  '_',
  'g',
  '',
  '',
  'R',
  'P',
  '\a',
  'L',
  'r',
  '',
  'U',
  '\v',
  '',
  '',
  '|',
  '',
  'N',
  '',
  '',
  '\x06',
  '\f',
  '>',
  '',
  'O',
  '',
  '',
  '.',
  'j',
  '\x17',
  'x',
  '\x19',
  'y',
  '@',
  '',
  'h',
  '\x0E',
  '\x11',
  '\x1B',
  '\x16',
  '',
  'H',
  '',
  '',
  'i',
  '',
  '\x10',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x12',
  'Y',
  '0',
  '',
  '',
  '\x1E',
  '8',
  'c',
  '^',
  '',
  '',
  'K',
  '/',
  '\x8F',
  '',
  'S',
  '',
  '\r',
  '\x05',
  '\x04',
  '',
  '',
  '\x02',
  '5',
  '',
  '1',
  '',
  '',
  '6',
  ';',
  '',
  '',
  'M',
  'F',
  '',
  '\x18',
  ' ',
  '\x13',
  '',
  '<',
  '',
  '',
  '\x15',
  '',
  'e',
  'o',
  'f',
  '\x0F',
  '\'',
  '',
  '',
  '\xFF',
  '',
  '',
  '\x8D',
  '',
  ')',
  '',
  '',
  '',
  '\b',
  '',
  '',
  'B',
  '6',
  'c',
  '8',
  ',',
  '',
  'Q',
  'H',
  '',
  '',
  'x',
  'm',
  '',
  '!',
  '\x11',
  '',
  '\x05',
  '',
  'v',
  '',
  '\x0E',
  '\x1A',
  's',
  ' ',
  '|',
  '\f',
  '',
  'M',
  '@',
  '',
  '',
  '',
  'R',
  '',
  '',
  '',
  '',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '0',
  '',
  'P',
  '',
  '\x8F',
  '',
  '',
  '',
  '',
  '',
  '#',
  'U',
  '',
  '<',
  '=',
  '\x9D',
  '\x14',
  '',
  '\x03',
  '',
  '',
  '',
  '\x18',
  '',
  'n',
  'o',
  '\r',
  '',
  'e',
  '',
  '\\',
  '',
  '{',
  '[',
  '-',
  '',
  'D',
  '',
  '',
  '',
  'O',
  '\x1B',
  '$',
  '',
  'k',
  '~',
  '\"',
  '',
  '',
  '',
  '\x0F',
  '',
  '\x10',
  '',
  'T',
  '',
  'b',
  '\t',
  '',
  '',
  '&',
  '',
  '\x19',
  'r',
  '',
  'G',
  '5',
  '\x12',
  '',
  '\n',
  '',
  '',
  'g',
  '',
  'l',
  'S',
  '`',
  '',
  ']',
  'p',
  '',
  'I',
  '?',
  '',
  '',
  '9',
  '',
  'L',
  '',
  'V',
  '_',
  '\x8D',
  '\a',
  '',
  '*',
  'N',
  '',
  '',
  '\x1C',
  '2',
  '\x06',
  '',
  '',
  '',
  '',
  '',
  ':',
  '/',
  '',
  '',
  '.',
  '\v',
  'Y',
  '',
  '',
  '',
  't',
  'u',
  '',
  '',
  'i',
  '',
  '\x01',
  '\x15',
  '',
  '',
  '',
  'A',
  '\x17',
  '\x04',
  'f',
  '',
  '\x13',
  '',
  '\x90',
  '4',
  '',
  'y',
  '\0',
  '',
  '',
  'h',
  '\x81',
  '',
  '',
  '',
  'X',
  '7',
  'C',
  'E',
  'F',
  '',
  '+',
  'q',
  '\x1D',
  '1',
  '',
  '',
  '',
  ';',
  'j',
  '%',
  '',
  '3',
  'W',
  'z',
  '',
  '',
  '\'',
  '\x1E',
  '',
  'w',
  ')',
  '',
  '',
  'd',
  '\x1F',
  '',
  '^',
  '',
  '\x16',
  '(',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  '',
  '',
  '',
  '',
  '}',
  '',
  '',
  'J',
  '',
  '\xFF',
  'Z',
  '',
  '',
  '',
  'K',
  'a',
  '>',
  '',
  'w',
  '',
  'n',
  '',
  '',
  '',
  'b',
  '',
  '\x03',
  '-',
  '\x1F',
  'x',
  '\"',
  '',
  '',
  'y',
  '',
  '[',
  '\x02',
  ',',
  '|',
  '\x9D',
  '',
  '',
  '',
  'V',
  'W',
  ')',
  '1',
  '',
  '\x18',
  '',
  '',
  '',
  '@',
  '',
  '',
  '',
  ':',
  'R',
  '\x1C',
  '\x12',
  '$',
  '\x01',
  '',
  '',
  '9',
  '\b',
  '',
  '',
  '',
  'O',
  '\x05',
  '',
  '',
  '',
  'e',
  '',
  '\x10',
  '',
  '+',
  '\f',
  '`',
  '',
  '',
  'F',
  '',
  '',
  '(',
  '\xFF',
  '\x90',
  '',
  '',
  '',
  '',
  'Y',
  'L',
  '\\',
  ' ',
  'Z',
  '',
  '',
  '',
  '',
  '',
  '',
  'T',
  '\x04',
  '{',
  '',
  '7',
  'J',
  '',
  'c',
  'C',
  '\x11',
  '\x8D',
  '',
  'd',
  'N',
  '',
  'M',
  '',
  '',
  '',
  'X',
  '',
  '',
  '',
  '',
  '',
  '',
  '\n',
  'A',
  'm',
  '',
  '',
  '',
  '',
  '',
  'l',
  'u',
  '',
  'h',
  '&',
  's',
  '',
  '',
  '',
  '',
  '',
  '',
  'K',
  '\x0F',
  '',
  '',
  '',
  '',
  'k',
  '',
  '',
  ';',
  '',
  'j',
  '<',
  '#',
  '3',
  '\x8F',
  'I',
  '',
  '\x15',
  '',
  '',
  '',
  '*',
  '',
  '',
  '',
  '\a',
  'G',
  'z',
  'v',
  '',
  '',
  't',
  '\x1D',
  '%',
  '}',
  '\t',
  '',
  '',
  '_',
  '',
  '\x0E',
  '',
  '/',
  'P',
  '',
  ']',
  '',
  'p',
  'E',
  '\x16',
  '',
  '',
  '',
  'H',
  'g',
  'i',
  '',
  'r',
  '',
  'a',
  '',
  '',
  '',
  'q',
  '',
  '',
  '\x13',
  '',
  '',
  '',
  'S',
  '',
  '',
  '',
  '!',
  '',
  '\x7F',
  '',
  '',
  '>',
  '',
  '\x14',
  '\x1B',
  '',
  '',
  '8',
  '\x06',
  '\x19',
  '',
  '6',
  '\x1A',
  '5',
  '0',
  'U',
  '\x1E',
  '\x81',
  'o',
  '^',
  '',
  '',
  '=',
  'f',
  'Q',
  '',
  'B',
  '\'',
  '.',
  '',
  '',
  '?',
  '',
  '4',
  '',
  '\x17',
  '\v',
  '',
  '~',
  '\0',
  '2',
  'D',
  '',
  '\r',
  '',
  '',
  '',
  '',
  '\x01',
  '{',
  '',
  '',
  '',
  '',
  '\x1F',
  '',
  '\"',
  '\x1E',
  '9',
  '',
  '',
  'v',
  'j',
  '',
  '',
  'o',
  '',
  '\x7F',
  '',
  '',
  '\a',
  '',
  '',
  '',
  '',
  'q',
  '',
  '>',
  '.',
  '4',
  'H',
  'i',
  '',
  '',
  '\x1A',
  '\x02',
  '',
  '\x15',
  '',
  '',
  'l',
  ',',
  '',
  '1',
  '\b',
  '\x8D',
  '~',
  '',
  '',
  '',
  '\\',
  '_',
  '\x13',
  '',
  '',
  '',
  '\t',
  '=',
  '8',
  '',
  '',
  '',
  '',
  '',
  'I',
  '-',
  '',
  '\x14',
  '2',
  '',
  '',
  '',
  '\x12',
  '',
  '',
  'Z',
  'N',
  'n',
  '',
  '',
  'M',
  'h',
  '?',
  '',
  '\x1D',
  ')',
  'g',
  'A',
  '/',
  'K',
  '',
  '$',
  '',
  '',
  '',
  '',
  ':',
  'X',
  '',
  '\f',
  '',
  '',
  '',
  '\x0E',
  'O',
  '\x1B',
  '',
  '',
  '',
  '',
  '',
  '\x90',
  '',
  'w',
  'x',
  '6',
  '',
  '',
  '[',
  '',
  '!',
  '',
  '',
  'b',
  '',
  '',
  '',
  '\x18',
  '|',
  '\x1C',
  'P',
  '',
  '',
  '&',
  '',
  '',
  '',
  '\v',
  '\x0F',
  'B',
  '\x11',
  '',
  's',
  '',
  '',
  '\x19',
  'e',
  '\x9D',
  ';',
  '',
  'y',
  'c',
  '',
  '',
  '',
  '',
  '',
  '',
  'k',
  'G',
  '\xFF',
  '+',
  '\x03',
  '',
  '',
  '',
  'T',
  '',
  'a',
  '^',
  '*',
  '',
  '',
  '<',
  'J',
  '',
  '%',
  '',
  '\x81',
  '',
  'U',
  '\n',
  '\x06',
  '3',
  ']',
  '',
  'm',
  '`',
  '\x05',
  '',
  '',
  '',
  '',
  'C',
  '',
  'u',
  'E',
  '',
  '',
  '\'',
  '0',
  'r',
  't',
  '',
  '7',
  '\x10',
  '',
  'R',
  '',
  'Y',
  '\x04',
  'p',
  '',
  '',
  '\r',
  '',
  'z',
  'S',
  'F',
  'f',
  '',
  '(',
  '@',
  '\x16',
  '',
  '',
  '#',
  'W',
  '5',
  '}',
  '',
  'Q',
  'd',
  '',
  '',
  ' ',
  '',
  '',
  '',
  '\x8F',
  '',
  'D',
  '\x17',
  '',
  '',
  '',
  '',
  'L',
  'V',
  '\0',
  'i',
  '',
  '',
  '\x01',
  '',
  'K',
  'g',
  '',
  '',
  '\x81',
  '',
  '',
  '',
  'h',
  '',
  '',
  '',
  '',
  'f',
  '',
  '',
  '',
  '',
  'v',
  '',
  '\x7F',
  '',
  '\x05',
  'u',
  '<',
  'G',
  '\x04',
  '',
  '',
  '{',
  '',
  '',
  '/',
  '\x10',
  '!',
  '\x1D',
  '\x0F',
  'y',
  '',
  '=',
  '',
  '\a',
  '\x8F',
  '',
  '\x17',
  '',
  '',
  'O',
  'W',
  'H',
  '',
  'a',
  '\x15',
  'x',
  '',
  '1',
  ';',
  '',
  'B',
  '',
  '',
  '',
  '#',
  'T',
  '',
  '',
  '',
  '',
  '\x9D',
  '',
  '',
  'X',
  '\x18',
  '',
  '2',
  '6',
  '',
  'Z',
  '\n',
  'q',
  '',
  '',
  '\x03',
  '\v',
  '',
  '',
  '+',
  '',
  '\b',
  't',
  'F',
  'E',
  '\x19',
  '',
  '',
  '',
  '',
  '',
  'L',
  '\x16',
  '9',
  '',
  '',
  '4',
  'n',
  '',
  '',
  '^',
  '',
  'M',
  'j',
  'V',
  ',',
  '&',
  '\'',
  '',
  '',
  'd',
  '\x1E',
  '',
  '',
  '',
  '\t',
  '',
  '',
  'k',
  'I',
  '',
  '',
  'N',
  '',
  '',
  's',
  'p',
  'Y',
  '',
  '',
  'w',
  '',
  '>',
  'e',
  '0',
  ':',
  '*',
  '\x1A',
  '\x14',
  'm',
  '',
  '',
  '',
  'J',
  '\\',
  '\x90',
  '$',
  '8',
  '',
  '',
  'R',
  '',
  '.',
  '@',
  '',
  'Q',
  '',
  '',
  '\"',
  '',
  '',
  '',
  '\r',
  '',
  '',
  '',
  ' ',
  'l',
  '',
  '\x11',
  '-',
  '',
  '',
  '',
  'A',
  '',
  '\x13',
  '',
  '\x1C',
  '',
  '',
  '\f',
  '',
  '',
  ']',
  '',
  '3',
  '_',
  '',
  'S',
  'P',
  '',
  'c',
  '?',
  '',
  '7',
  '}',
  'D',
  '',
  '',
  '',
  '',
  '\x1F',
  '',
  '%',
  'C',
  '',
  '\xFF',
  'o',
  '\x0E',
  '',
  'U',
  '5',
  '[',
  '',
  ')',
  '',
  '',
  '',
  '`',
  '~',
  '',
  '\x06',
  '',
  '',
  '\x8D',
  '\x12',
  '',
  '',
  '|',
  '',
  '\x02',
  'b',
  '',
  '\x1B',
  '\0',
  '',
  '',
  '(',
  'z',
  '',
  'r',
  '',
  '',
  't',
  '',
  '',
  '',
  ';',
  '',
  '@',
  '',
  '',
  'h',
  'c',
  '',
  '\x0E',
  'A',
  '',
  '',
  '',
  'q',
  'O',
  'b',
  'k',
  '\x12',
  '\x16',
  ']',
  'n',
  'I',
  '',
  ')',
  'V',
  '',
  'D',
  '',
  '',
  '-',
  'S',
  '\x04',
  'u',
  '\x1F',
  '\n',
  '',
  '',
  '',
  '',
  '',
  '8',
  '',
  '\"',
  '',
  '',
  '',
  '9',
  '*',
  '4',
  'r',
  '',
  '_',
  '',
  '',
  '',
  '',
  '',
  '',
  'W',
  '',
  '?',
  '\x9D',
  'v',
  '!',
  '$',
  '',
  '\x90',
  '',
  '',
  '',
  '',
  '',
  '',
  's',
  '#',
  '',
  '~',
  'Q',
  '',
  'd',
  'N',
  '\x1C',
  '&',
  'Y',
  '',
  '>',
  '',
  '',
  '.',
  '|',
  '6',
  'B',
  '\xFF',
  '\x8D',
  '\r',
  '',
  '\x1E',
  '',
  'l',
  '',
  '\x14',
  '\x17',
  'p',
  '',
  '',
  '',
  '+',
  '',
  '\x13',
  'H',
  'g',
  '',
  '',
  '',
  '\x03',
  '',
  '\v',
  '',
  '\x1B',
  '(',
  'L',
  '',
  '\x8F',
  'y',
  '\x06',
  '\x05',
  '',
  '',
  '',
  '^',
  '',
  '',
  '',
  '\x02',
  '',
  '',
  'X',
  'G',
  '\x11',
  '',
  'f',
  '',
  '',
  'P',
  '/',
  '',
  '%',
  'w',
  '',
  '0',
  '',
  'R',
  '',
  '',
  '\\',
  'F',
  '',
  '\f',
  'Z',
  '\x0F',
  'U',
  '',
  'j',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '=',
  '',
  '',
  '',
  ':',
  '\a',
  '',
  '',
  '',
  '',
  '',
  '',
  '}',
  '[',
  '`',
  '{',
  '',
  '',
  ' ',
  '',
  '\x01',
  '\x10',
  '\t',
  'M',
  '',
  'e',
  ',',
  '',
  'm',
  '\x18',
  '\x1A',
  '2',
  '',
  '7',
  '\x19',
  '',
  '',
  '',
  '',
  '',
  '\b',
  '',
  'z',
  '',
  'x',
  'T',
  '',
  '',
  '',
  'o',
  '',
  '5',
  'E',
  '\0',
  '',
  '',
  '\x15',
  '',
  '',
  '\'',
  '1',
  '<',
  '',
  '',
  '',
  'i',
  'K',
  '',
  '\x1D',
  '',
  '3',
  '',
  '\x81',
  'J',
  'C',
  'a',
  '\x7F',
  'g',
  '',
  '_',
  '',
  '',
  '',
  '',
  '-',
  '',
  'I',
  '',
  '',
  '',
  '',
  '\b',
  '^',
  'w',
  'i',
  '',
  '2',
  '',
  'p',
  '\x1A',
  '\x12',
  '',
  '\x0F',
  'M',
  '',
  '',
  '',
  '\v',
  'j',
  '\x06',
  '',
  '',
  '<',
  '',
  '',
  '',
  'O',
  '',
  '\0',
  '',
  'C',
  '',
  '',
  'J',
  '',
  '',
  's',
  '\x1E',
  ':',
  '',
  '',
  '',
  '',
  '!',
  '\x02',
  '+',
  '\x13',
  'Q',
  'W',
  '',
  'f',
  '\x14',
  '',
  '\'',
  'a',
  '4',
  'c',
  'm',
  '',
  'r',
  '\n',
  '=',
  '\\',
  '',
  'o',
  '0',
  '',
  'k',
  '',
  '',
  '\"',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '8',
  '\x04',
  'e',
  '[',
  '\x17',
  '',
  '',
  '\x1D',
  '7',
  'B',
  '',
  'y',
  '',
  '',
  '@',
  'G',
  '',
  'h',
  '',
  '\x9D',
  'q',
  '',
  '',
  '',
  'v',
  '',
  '\x03',
  '~',
  'V',
  '|',
  '\x1B',
  '',
  '',
  '',
  '',
  '\x05',
  'N',
  '',
  '\a',
  '',
  '3',
  '',
  '\x1C',
  '',
  '',
  '',
  't',
  '',
  '\x19',
  'Y',
  '',
  '',
  'Z',
  '\xFF',
  '9',
  '%',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '&',
  '',
  'l',
  '',
  'H',
  '/',
  '.',
  '?',
  'n',
  'u',
  ' ',
  '',
  'K',
  '',
  '',
  '',
  '\f',
  'd',
  '5',
  '\x10',
  '\x01',
  '(',
  '',
  '',
  '\x18',
  ')',
  '1',
  '',
  '',
  '',
  '',
  '`',
  'F',
  '',
  'T',
  'S',
  '',
  'z',
  ';',
  '',
  '$',
  '',
  '',
  '',
  '\x1F',
  '\x8D',
  '',
  '',
  '',
  '\x7F',
  'x',
  'U',
  'L',
  '',
  '\x90',
  '',
  '',
  '{',
  '',
  'A',
  '',
  '',
  'E',
  '',
  '',
  '',
  '\x11',
  '',
  '6',
  'R',
  '>',
  '',
  '',
  '',
  '}',
  '',
  '\r',
  '',
  '',
  '#',
  ',',
  'D',
  '',
  'b',
  '\x81',
  '',
  ']',
  '',
  '',
  '',
  '*',
  '\x8F',
  '',
  '\x0E',
  '\t',
  'X',
  'P',
  '',
  '',
  '',
  '\x16',
  '',
  'i',
  '',
  '',
  '',
  '',
  '\x01',
  '',
  '',
  '',
  '',
  ',',
  '7',
  '',
  '',
  '\xFF',
  'K',
  '',
  '&',
  '',
  '',
  ')',
  '',
  '0',
  '\x13',
  '',
  'F',
  '',
  '',
  'g',
  '^',
  'G',
  '~',
  '',
  '',
  '1',
  '\"',
  '',
  'M',
  'o',
  '',
  '\x02',
  '',
  ';',
  '3',
  '',
  '',
  'B',
  '',
  '',
  '=',
  '',
  '',
  '',
  '',
  '8',
  '',
  '\\',
  '[',
  'I',
  '\x06',
  'f',
  '',
  ']',
  '',
  'Z',
  '',
  '\'',
  '\x1C',
  '\x1E',
  '\r',
  'H',
  '',
  ' ',
  'Y',
  '',
  '',
  '',
  '',
  'S',
  '',
  'D',
  '',
  '',
  '(',
  '',
  '\t',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x04',
  '\f',
  'c',
  '',
  '<',
  '\x0E',
  '',
  '*',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  'v',
  '@',
  'Q',
  '',
  '2',
  '\x1A',
  '',
  'w',
  '_',
  '',
  '{',
  's',
  '\x90',
  'P',
  'W',
  'k',
  '',
  '',
  'R',
  'a',
  '',
  'l',
  '',
  '\x10',
  '',
  '\x9D',
  '\x8D',
  '$',
  '!',
  'e',
  '+',
  'E',
  '',
  't',
  '\x12',
  '',
  '6',
  '',
  'u',
  '.',
  '?',
  '%',
  '',
  '',
  '\x1B',
  '\x14',
  '',
  'x',
  '#',
  '',
  'h',
  '',
  '',
  '',
  'N',
  '9',
  '\0',
  '\b',
  '',
  '',
  '}',
  '',
  '',
  'm',
  '',
  'C',
  '',
  'r',
  '\n',
  '',
  '5',
  '',
  '',
  '',
  '',
  'T',
  'y',
  'X',
  '\x18',
  '',
  '/',
  'O',
  '',
  '|',
  '\x16',
  '\x1F',
  '\x7F',
  '',
  '\x05',
  '\x1D',
  '',
  'L',
  '',
  '',
  '',
  'A',
  'd',
  '',
  '',
  'q',
  'J',
  'z',
  '\x17',
  '',
  '',
  '\v',
  '',
  '',
  '',
  '',
  '',
  '\x15',
  '',
  'b',
  '',
  'n',
  '\x81',
  '\a',
  '',
  '\x8F',
  'p',
  '\x0F',
  '',
  '',
  '\x11',
  '',
  'j',
  '',
  '-',
  '',
  ':',
  '`',
  '',
  '4',
  '',
  '',
  '',
  '',
  'U',
  '>',
  '',
  '',
  '\x03',
  '',
  '',
  '',
  'V',
  '',
  'v',
  '',
  'x',
  ':',
  's',
  '9',
  '',
  '',
  '',
  'B',
  '\x06',
  '\x1A',
  '',
  '',
  '',
  '',
  '\x90',
  '',
  '',
  '',
  '0',
  '\\',
  '\x1C',
  '}',
  '',
  '',
  '\x19',
  '',
  'e',
  '',
  'b',
  'm',
  'E',
  '1',
  'j',
  '',
  'C',
  '',
  'O',
  '[',
  '',
  '\0',
  '',
  '\x1F',
  'Y',
  '',
  '',
  '',
  '\a',
  '',
  'T',
  '\x03',
  '',
  '',
  '\x1E',
  '\v',
  'H',
  't',
  '',
  '@',
  '8',
  '',
  '',
  '',
  '7',
  '.',
  '',
  '\x9D',
  '',
  '-',
  '',
  '\x14',
  '/',
  '=',
  '',
  '',
  '\'',
  '',
  '',
  '',
  '',
  'r',
  '',
  '',
  '2',
  '',
  '',
  '',
  '\x05',
  'D',
  ',',
  '',
  'n',
  '',
  '',
  '',
  '',
  '\x02',
  '',
  '>',
  '<',
  '\x8D',
  '\x1B',
  '',
  '',
  'L',
  '',
  '',
  '',
  '\b',
  '',
  'Z',
  '\x8F',
  'G',
  '',
  'R',
  '',
  'c',
  '\r',
  '',
  '$',
  '',
  'f',
  'l',
  '',
  '',
  '\x04',
  '',
  'i',
  '|',
  '',
  '',
  '',
  '',
  '\x10',
  '%',
  '',
  '',
  'M',
  'J',
  '!',
  'U',
  'w',
  '',
  '\xFF',
  '\x0F',
  '',
  '',
  '',
  'F',
  '\x11',
  '',
  'V',
  '',
  '',
  'o',
  'a',
  'u',
  '',
  'P',
  '\x1D',
  'I',
  '',
  '`',
  '',
  '_',
  '\x0E',
  'k',
  '',
  '',
  'd',
  '4',
  '&',
  '#',
  '(',
  'q',
  '',
  'A',
  '',
  '\x01',
  'K',
  '',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '5',
  '3',
  '',
  ';',
  '',
  '',
  '',
  '',
  'W',
  '\x17',
  '',
  '',
  '',
  '',
  'S',
  '',
  ' ',
  '',
  '\x12',
  ')',
  '\x13',
  '{',
  '*',
  '\x18',
  '',
  '',
  '',
  'z',
  '6',
  '',
  '',
  '\x16',
  '',
  '',
  'N',
  '',
  '',
  '\x15',
  '',
  ']',
  'h',
  '',
  'p',
  '',
  '',
  'y',
  '',
  '^',
  '',
  '?',
  'Q',
  '\f',
  '',
  '\t',
  '',
  '',
  '',
  '~',
  '\x81',
  'g',
  '\"',
  '',
  'X',
  '+',
  '\n',
  '',
  '',
  '',
  '',
  '\x81',
  '',
  '^',
  'o',
  'W',
  '',
  '',
  'X',
  '\x04',
  '',
  'I',
  '\n',
  '\a',
  'd',
  '',
  'f',
  '',
  '',
  '=',
  '',
  '',
  '',
  'N',
  'm',
  '',
  '',
  'E',
  '',
  '_',
  'v',
  '',
  '',
  '',
  '\x1A',
  '',
  '\f',
  '@',
  '',
  '',
  'q',
  '\x11',
  '',
  'c',
  '\xFF',
  '',
  '',
  ']',
  '',
  'l',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '(',
  'y',
  'S',
  'u',
  '',
  '?',
  '',
  '',
  '*',
  '',
  '\x10',
  '9',
  '',
  '',
  '\x02',
  '',
  '',
  '',
  '3',
  'x',
  'A',
  '',
  '5',
  '`',
  ';',
  '\x06',
  'z',
  '/',
  '',
  '',
  '',
  '',
  'w',
  '\"',
  '',
  '',
  'a',
  '',
  'K',
  'i',
  '7',
  '',
  '|',
  '\x1E',
  '',
  '\x9D',
  '',
  '\\',
  'Q',
  '\x8F',
  '',
  '',
  '\x16',
  '',
  '',
  ')',
  '\x17',
  '>',
  'Z',
  '',
  '',
  '',
  'p',
  'r',
  '\v',
  '',
  '',
  '\x1C',
  'V',
  '\x12',
  '',
  '0',
  '1',
  'k',
  's',
  '',
  'Y',
  '',
  '',
  '',
  '',
  '\r',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  '',
  'H',
  '',
  '',
  '',
  '',
  '\x19',
  '4',
  'M',
  '',
  '\x18',
  '\b',
  't',
  '}',
  '',
  '\x90',
  '',
  '',
  'h',
  '6',
  '\x8D',
  'G',
  '',
  '8',
  '\x15',
  '\0',
  '',
  '&',
  '',
  '+',
  'U',
  '#',
  '',
  '\x01',
  'T',
  'P',
  '\'',
  'e',
  '',
  'B',
  '',
  'j',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x05',
  '%',
  'J',
  'g',
  '',
  '',
  '',
  '',
  '.',
  ':',
  '',
  'F',
  'R',
  'n',
  '',
  '',
  'L',
  '2',
  '',
  '',
  'O',
  '',
  '-',
  '\x7F',
  '',
  '',
  ',',
  '\x13',
  '!',
  '[',
  '',
  '',
  '',
  '',
  '\x0E',
  '',
  '',
  '',
  '\t',
  '',
  '',
  '\x14',
  '',
  '{',
  '',
  '\x03',
  'D',
  '$',
  '~',
  'b',
  '\x0F',
  'C',
  '',
  '\x1B',
  ' ',
  '\x1D',
  '<',
  '',
  '',
  '',
  '-',
  '',
  '',
  '\b',
  '<',
  '/',
  '1',
  '',
  'j',
  '4',
  '\x04',
  '\x01',
  '@',
  'p',
  '',
  '',
  '6',
  '',
  '',
  '\x06',
  '5',
  ':',
  '\\',
  'N',
  '\x1C',
  '[',
  '\x14',
  '',
  '\x10',
  '',
  '',
  '',
  '',
  '',
  '\r',
  '\t',
  'b',
  '',
  '',
  'u',
  'P',
  '\x81',
  '',
  '\x19',
  '?',
  '',
  '',
  '',
  '|',
  '\x0E',
  'D',
  '\"',
  '',
  '\x12',
  '*',
  ']',
  '',
  'n',
  '',
  '\x03',
  '',
  '',
  '',
  '\f',
  'z',
  '',
  'c',
  '',
  '8',
  's',
  '',
  '+',
  'Q',
  '0',
  '',
  'G',
  '',
  '\a',
  '',
  '',
  'J',
  'r',
  '',
  '7',
  '',
  '',
  '',
  'X',
  '',
  '',
  '%',
  '',
  '\x11',
  '',
  '~',
  '\x1D',
  '',
  '',
  '',
  'E',
  '',
  '\x15',
  '(',
  '\x1A',
  '',
  'H',
  '',
  'q',
  '',
  '',
  '\'',
  '\x90',
  '',
  '',
  'k',
  '',
  '\x8D',
  'W',
  '$',
  '{',
  '',
  '',
  '',
  'v',
  'i',
  '^',
  'g',
  '',
  '',
  'm',
  '',
  'x',
  'd',
  '',
  '.',
  ')',
  '',
  'U',
  '\0',
  '\x17',
  '',
  'o',
  'Y',
  '\x8F',
  '#',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  '\x1E',
  '',
  '!',
  '',
  'K',
  '',
  '',
  '',
  'R',
  '\x0F',
  '',
  '',
  '',
  '\n',
  ' ',
  '',
  '>',
  '`',
  '',
  'M',
  '',
  ',',
  'l',
  'f',
  '2',
  '',
  '',
  '_',
  '',
  '',
  '',
  '',
  '\x9D',
  'V',
  'I',
  '',
  '',
  '',
  '\x1B',
  'w',
  'F',
  ';',
  '',
  'T',
  '',
  '3',
  '',
  '}',
  '\x1F',
  '',
  '\x05',
  '\v',
  '',
  '\x13',
  'a',
  '',
  '',
  't',
  '',
  '\xFF',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'Z',
  '',
  'B',
  '',
  '',
  '',
  '',
  'C',
  '',
  '',
  'e',
  'A',
  '',
  '',
  '9',
  '\x18',
  '',
  'S',
  'y',
  '=',
  '',
  'L',
  '',
  '',
  'O',
  '',
  '&',
  '',
  '',
  '',
  'h',
  '',
  '',
  '\x16',
  '',
  '',
  '',
  '^',
  't',
  'D',
  '',
  '',
  '',
  '',
  '7',
  '\x1C',
  '?',
  'M',
  '',
  '\x17',
  '#',
  'i',
  '',
  '',
  '\\',
  'c',
  'S',
  '\x1B',
  '0',
  '\x18',
  '',
  'l',
  '/',
  '',
  'Y',
  'K',
  'Q',
  '\x1E',
  '',
  '',
  ')',
  '\x01',
  '\x1F',
  '',
  '\x10',
  '',
  'a',
  '',
  '',
  '',
  '\x15',
  '\x13',
  '*',
  '',
  'C',
  '',
  '',
  '\f',
  '\x03',
  '',
  ']',
  '\0',
  '',
  '&',
  '',
  '',
  '',
  'k',
  '',
  '',
  '',
  '',
  '',
  '\x16',
  '',
  ',',
  '',
  '.',
  'O',
  '',
  '',
  '',
  '',
  '<',
  '\x9D',
  '',
  'n',
  '',
  '',
  '',
  ' ',
  'y',
  '2',
  'j',
  '$',
  'B',
  '\x1A',
  '9',
  '',
  'v',
  '',
  '',
  '\'',
  '',
  '',
  '[',
  'N',
  '@',
  '8',
  'X',
  '',
  '\v',
  '',
  '\x0E',
  '',
  '',
  '5',
  '',
  '',
  '',
  '\x8F',
  'U',
  '',
  '',
  '',
  'Z',
  '_',
  '\x12',
  '6',
  '',
  '{',
  '',
  '',
  '\t',
  '',
  '',
  '',
  'R',
  'q',
  '',
  '',
  'f',
  '',
  '',
  'o',
  'A',
  '',
  '',
  '',
  '',
  '\x19',
  '',
  'x',
  '',
  '',
  '`',
  '',
  's',
  'z',
  '',
  '+',
  '\x1D',
  '',
  '\b',
  '',
  'T',
  '',
  '',
  'L',
  '!',
  '}',
  'E',
  'P',
  '',
  '',
  '',
  '',
  'p',
  '\x06',
  'w',
  '',
  '\r',
  '',
  '',
  '\a',
  '',
  '~',
  '',
  '',
  '',
  'u',
  'd',
  'W',
  'e',
  '',
  'H',
  '\x11',
  '\n',
  '',
  '',
  'I',
  '\"',
  'h',
  ':',
  '',
  '',
  '',
  '',
  '\x81',
  '(',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '=',
  '',
  '\x8D',
  '\x90',
  'V',
  'J',
  '',
  '',
  '>',
  'm',
  '',
  'F',
  '4',
  'G',
  'b',
  '',
  '\xFF',
  '|',
  '',
  '',
  '',
  '%',
  '',
  '',
  '-',
  '3',
  '',
  'g',
  '\x7F',
  '',
  'r',
  '\x0F',
  '',
  '\x02',
  '\x14',
  '',
  ';',
  '',
  '1',
  '',
  '\x04',
  '\x05',
  '',
  'w',
  '<',
  '',
  '%',
  '',
  '',
  'g',
  '/',
  '',
  '',
  '',
  'f',
  '',
  '',
  '',
  '\x15',
  '\x8F',
  '\x12',
  '',
  '\"',
  '',
  '',
  '}',
  'j',
  '\x03',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x81',
  'G',
  '&',
  '',
  '',
  '',
  'Q',
  '\xFF',
  '',
  '',
  '',
  '>',
  '',
  '',
  '',
  '',
  '',
  '',
  '`',
  '',
  '\x1F',
  'U',
  'O',
  '=',
  '',
  '!',
  'u',
  'n',
  '\'',
  '',
  '3',
  '',
  '2',
  '',
  '',
  '\f',
  '\b',
  '',
  'L',
  '',
  'o',
  '',
  '',
  '*',
  '',
  '',
  '',
  '_',
  '\x0F',
  '',
  't',
  '',
  '\x9D',
  '1',
  's',
  '\v',
  '\x7F',
  ')',
  'C',
  '',
  'h',
  '',
  '',
  'F',
  'I',
  '',
  '',
  '',
  '|',
  '',
  '\x1B',
  '-',
  '',
  '\t',
  '',
  'a',
  '5',
  '',
  '',
  'S',
  ';',
  'p',
  'T',
  '',
  'r',
  'D',
  '\x19',
  '~',
  '\x13',
  '',
  'z',
  'c',
  ':',
  'R',
  'v',
  '\x05',
  '',
  '?',
  'i',
  '$',
  '',
  ',',
  '',
  '8',
  '\x16',
  '\x14',
  '{',
  '',
  '',
  '',
  'J',
  '',
  '\x0E',
  '^',
  'V',
  '\x1C',
  '',
  '',
  '',
  '\x1A',
  '',
  '',
  '',
  '[',
  '',
  '',
  '',
  '6',
  'W',
  '',
  '',
  'B',
  '\x8D',
  '(',
  '',
  '',
  'd',
  '\r',
  '',
  'k',
  '',
  'e',
  '',
  '\x06',
  'x',
  '\0',
  'P',
  '',
  'M',
  '7',
  'E',
  '\x90',
  '',
  'Y',
  '\x18',
  '',
  '#',
  '',
  '',
  '',
  ' ',
  '',
  '+',
  '0',
  '',
  '\x1D',
  '',
  'm',
  '',
  '\x10',
  'N',
  ']',
  '',
  '',
  '\x17',
  '',
  'b',
  '',
  '',
  '\\',
  '',
  '',
  '4',
  '',
  '\n',
  '',
  'A',
  'l',
  '',
  'X',
  '9',
  'H',
  '',
  '@',
  '\x11',
  '\x02',
  '',
  '',
  'q',
  '\x01',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\a',
  'y',
  '',
  '\x04',
  'Z',
  '',
  'K',
  '\x1E',
  '',
  '.',
  '',
  '',
  '',
  '',
  '\xFF',
  '',
  '',
  '\x05',
  '\x8D',
  '{',
  '\x8F',
  'p',
  'd',
  '',
  'u',
  '\x14',
  '',
  '',
  '',
  '\x04',
  '',
  'g',
  '',
  'M',
  '\x17',
  '',
  ';',
  ')',
  '',
  '',
  '',
  '',
  '',
  '',
  'e',
  '',
  '\x02',
  '',
  'w',
  '\v',
  '',
  '',
  '',
  '^',
  '6',
  '\x19',
  '',
  '0',
  '\x7F',
  '<',
  '',
  '\x15',
  '',
  '',
  '`',
  '',
  '',
  '',
  'i',
  'N',
  'l',
  '1',
  '',
  '\n',
  '\r',
  '%',
  '\x13',
  ':',
  '',
  '',
  '\x03',
  '_',
  '\0',
  '',
  '',
  'a',
  '',
  '2',
  'y',
  '#',
  '',
  '\x9D',
  'q',
  'E',
  'F',
  '\x1E',
  ']',
  '',
  '',
  '',
  '',
  '',
  '',
  '|',
  '',
  'Q',
  '4',
  '',
  '',
  '',
  '',
  '~',
  '\x1C',
  '\x11',
  '',
  '',
  '\f',
  '\t',
  '',
  '',
  '',
  '',
  'G',
  '8',
  '',
  '*',
  'Y',
  '>',
  'h',
  '',
  '',
  '\x16',
  '.',
  '\x01',
  't',
  '5',
  'V',
  'x',
  'o',
  '',
  '(',
  '',
  'k',
  'j',
  '',
  'K',
  '',
  '',
  '',
  '!',
  'U',
  '/',
  '',
  '',
  'n',
  'z',
  '',
  '',
  '3',
  'P',
  '',
  'f',
  ' ',
  '\x1A',
  '',
  '',
  '',
  'I',
  'D',
  '?',
  '\"',
  '',
  '',
  '',
  '@',
  'W',
  '',
  '',
  '',
  '+',
  '',
  'L',
  '\x18',
  '',
  '',
  '',
  'X',
  '',
  '',
  'r',
  '',
  '',
  'T',
  '',
  '',
  '',
  '',
  'J',
  '',
  '',
  '&',
  '7',
  '',
  '',
  '\\',
  '\'',
  '\x0E',
  'm',
  '\b',
  '\x10',
  '',
  '\x1B',
  '',
  '',
  '',
  '',
  '=',
  '}',
  '',
  'O',
  '',
  '',
  '',
  '\x90',
  '\x06',
  '9',
  '[',
  'v',
  '',
  '',
  '',
  '',
  'b',
  '\x0F',
  '',
  '',
  '',
  '',
  '',
  ',',
  'Z',
  '',
  '',
  '',
  '\x1D',
  '',
  'H',
  '',
  '',
  '-',
  '\a',
  'S',
  '',
  '',
  '',
  '$',
  'B',
  '',
  'R',
  '',
  '\x12',
  'C',
  '\x81',
  '',
  '',
  'c',
  '\x1F',
  's',
  'A',
  '-',
  '',
  '!',
  '',
  '{',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1E',
  '',
  '',
  '\r',
  '\x06',
  '',
  '',
  '',
  '[',
  '}',
  '',
  '(',
  'l',
  'O',
  '',
  'w',
  '',
  '\n',
  'R',
  '_',
  '',
  'k',
  '3',
  '',
  '',
  '\x0E',
  '',
  '',
  'J',
  '8',
  'K',
  '',
  '',
  '',
  '',
  '<',
  'n',
  '\x19',
  '\x03',
  '5',
  'Q',
  '',
  '\\',
  'u',
  '6',
  'e',
  '\x15',
  '',
  '',
  '',
  '',
  'P',
  '',
  '\x18',
  'Y',
  '\x8F',
  'c',
  '\'',
  '',
  '',
  '',
  '',
  '',
  '',
  '\0',
  '\xFF',
  '\x8D',
  '',
  '?',
  '',
  '',
  'M',
  '',
  'x',
  't',
  '',
  'j',
  '',
  '',
  '',
  '',
  '\f',
  '*',
  '',
  '',
  '',
  '\x1C',
  'Z',
  '@',
  '|',
  ':',
  '%',
  '>',
  '',
  '\x12',
  'H',
  '\x0F',
  'I',
  '\t',
  '',
  'r',
  '`',
  '',
  '',
  '\x05',
  '',
  's',
  '',
  '',
  '',
  'f',
  '',
  'a',
  '\x1A',
  '',
  '',
  '',
  '',
  '\v',
  '\x9D',
  'T',
  '',
  '',
  '',
  '',
  '',
  'L',
  '',
  '\a',
  '',
  ',',
  'o',
  '\x02',
  '+',
  '\x7F',
  '',
  '',
  '/',
  '9',
  '',
  '',
  'X',
  '~',
  '4',
  '',
  '7',
  '',
  '',
  '\x04',
  'i',
  '',
  ']',
  'p',
  '\x14',
  '',
  '',
  '',
  'F',
  '',
  '',
  '\x17',
  '',
  '',
  '',
  '=',
  'q',
  '',
  'V',
  '',
  '',
  '',
  'd',
  '',
  '',
  'U',
  'b',
  ';',
  '',
  '',
  '\x1B',
  'C',
  '',
  'S',
  '',
  ')',
  '',
  '',
  '',
  '',
  'E',
  '',
  'h',
  '&',
  '0',
  'W',
  '',
  '',
  'g',
  'A',
  '1',
  '\x81',
  '',
  '',
  '#',
  '',
  'z',
  '\"',
  '',
  '\x1F',
  'v',
  '',
  '',
  '\x13',
  '',
  '',
  '',
  '',
  '\x10',
  '.',
  '',
  ' ',
  '',
  '',
  '\x11',
  '',
  '\x16',
  '2',
  'D',
  '\x1D',
  '\x01',
  '',
  '',
  '',
  'm',
  '$',
  'y',
  'B',
  '\b',
  '\x90',
  '',
  'N',
  '',
  '^',
  'G',
  'q',
  '?',
  '',
  '3',
  '',
  '',
  'N',
  '',
  'L',
  '\x01',
  '',
  '',
  '',
  '',
  '',
  '\x19',
  ' ',
  'E',
  '',
  '',
  '',
  '',
  'l',
  '/',
  '',
  '',
  '',
  '',
  '\a',
  '6',
  'B',
  '\x9D',
  '\x16',
  '\f',
  '',
  '',
  '\b',
  '',
  '',
  '',
  '\x03',
  '\n',
  '',
  's',
  '8',
  '2',
  ':',
  'n',
  'k',
  'f',
  ';',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x81',
  'y',
  'Y',
  '',
  '\x15',
  'V',
  't',
  '',
  '\x0E',
  '.',
  'T',
  'u',
  '',
  '\x05',
  '',
  '',
  '',
  'C',
  '',
  '\x12',
  '',
  'e',
  '',
  '\x14',
  '',
  'P',
  '',
  '',
  'p',
  ')',
  '-',
  '{',
  '',
  '\\',
  'r',
  '',
  '\x90',
  '\x1A',
  'm',
  'g',
  '',
  '',
  '',
  '',
  '\x1B',
  '',
  '',
  '',
  '5',
  'd',
  '',
  '',
  '',
  '',
  '',
  '[',
  'F',
  '',
  '7',
  '',
  '',
  '',
  '%',
  '',
  '\t',
  '',
  '@',
  '',
  '',
  '',
  '',
  '',
  'v',
  '\x02',
  '(',
  '',
  '}',
  '',
  '',
  'x',
  '\0',
  'D',
  '',
  '0',
  '',
  '',
  '',
  '+',
  '',
  'S',
  '',
  'O',
  ',',
  '',
  'a',
  'h',
  '',
  '',
  '',
  '',
  '',
  '\x1D',
  'Q',
  '',
  'U',
  '`',
  '',
  '~',
  '\r',
  '',
  'G',
  '',
  '',
  '9',
  '',
  '',
  '',
  '',
  '$',
  'Z',
  '1',
  '',
  '4',
  '',
  '',
  '!',
  '\x10',
  '\x04',
  ']',
  '*',
  '',
  '',
  '\x0F',
  '\x1F',
  '\xFF',
  '\x8F',
  '#',
  '\x06',
  '',
  '\v',
  'w',
  '',
  '',
  '\x8D',
  '',
  'A',
  '',
  '',
  '',
  'o',
  '\x18',
  '\x17',
  '\"',
  '',
  '',
  'M',
  '',
  '',
  'i',
  '\x13',
  '',
  '',
  'b',
  'J',
  '_',
  '|',
  '\x7F',
  'W',
  '',
  '>',
  '',
  '<',
  'I',
  '',
  'X',
  '',
  '',
  '^',
  '',
  '',
  '',
  '',
  'j',
  '\x11',
  '=',
  '',
  '',
  '\x1E',
  'K',
  '',
  'H',
  '&',
  '\'',
  '',
  'z',
  '\x1C',
  'R',
  'c',
  ':',
  '',
  '',
  '',
  '>',
  '',
  '',
  '',
  'L',
  '\t',
  '',
  '7',
  '!',
  '\x15',
  'W',
  '1',
  '',
  '',
  '',
  ',',
  '|',
  '\x1A',
  '',
  'H',
  '}',
  '',
  '\x06',
  '',
  '6',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\f',
  '',
  '\xFF',
  '',
  '2',
  '\x90',
  '',
  '\x16',
  '\x0E',
  'z',
  'F',
  '\a',
  '',
  '',
  '',
  '',
  '/',
  'N',
  '',
  'k',
  '',
  '',
  's',
  '\r',
  '',
  '\\',
  '\x01',
  'b',
  'E',
  '',
  'D',
  '\"',
  '',
  '',
  '\x14',
  '',
  '%',
  '',
  'i',
  '',
  '{',
  '~',
  '',
  '',
  '',
  'y',
  '',
  'g',
  '',
  '',
  'X',
  '*',
  '',
  '',
  '',
  '',
  '[',
  'O',
  '\x8F',
  '',
  '',
  'h',
  '',
  '',
  '',
  '',
  '\x7F',
  'n',
  '',
  '',
  'e',
  '',
  'U',
  '0',
  '',
  '',
  '',
  '',
  '',
  '8',
  '',
  '',
  'M',
  '',
  '\x18',
  'v',
  'T',
  '',
  '5',
  '(',
  'A',
  'l',
  'x',
  '',
  'Q',
  '3',
  'C',
  '^',
  'o',
  '',
  '',
  'w',
  '',
  '',
  'm',
  '',
  '',
  'Y',
  'B',
  '',
  '',
  'S',
  '\x11',
  '',
  '',
  '',
  '',
  'c',
  '\x10',
  'P',
  'V',
  'p',
  '',
  ' ',
  '',
  '',
  '',
  'J',
  '\x05',
  '\x1D',
  '\x17',
  '',
  '',
  'f',
  't',
  'R',
  '\x8D',
  '',
  '',
  '',
  '\0',
  '',
  '&',
  '',
  '`',
  ')',
  'r',
  '',
  '',
  '',
  '',
  'u',
  '+',
  '',
  '',
  '\'',
  '=',
  '',
  '\x0F',
  '\n',
  '?',
  '\x19',
  '',
  '\v',
  ';',
  'q',
  '\x1C',
  '',
  'd',
  '',
  '.',
  '\x81',
  '',
  '#',
  'j',
  '\x13',
  '\x1F',
  '',
  '<',
  '$',
  '',
  '\b',
  'I',
  '\x1B',
  '',
  '-',
  '',
  '',
  '\x12',
  '4',
  '',
  '',
  '\x03',
  '\x04',
  ']',
  '',
  'G',
  '',
  '9',
  '',
  '\x1E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '@',
  '',
  'Z',
  'a',
  'K',
  '\x9D',
  '\x02',
  '_',
  '',
  '',
  'C',
  '',
  '',
  '\r',
  '\f',
  '',
  '<',
  '',
  '8',
  '0',
  '\x03',
  '',
  '2',
  'K',
  '',
  '',
  'W',
  '',
  '^',
  '\t',
  '',
  '',
  '\x15',
  'E',
  'R',
  'u',
  '{',
  '',
  '',
  '',
  '',
  '=',
  ',',
  '',
  '',
  '\x12',
  '\x0F',
  'i',
  'M',
  '',
  '',
  '\n',
  'T',
  '',
  '~',
  '',
  '>',
  '\x18',
  '',
  '',
  '1',
  '\\',
  '',
  '[',
  'k',
  '+',
  '@',
  '',
  '',
  '',
  '9',
  '\x0E',
  '\x1F',
  '',
  '',
  ';',
  '',
  '',
  'U',
  'e',
  '',
  '',
  '\x17',
  '%',
  '',
  '',
  '\"',
  '',
  '-',
  't',
  '',
  '',
  '',
  'q',
  '',
  '',
  '\x90',
  'P',
  '&',
  '\x19',
  'l',
  '',
  '\x01',
  'O',
  '',
  'a',
  '!',
  '',
  ' ',
  'f',
  '',
  '',
  'w',
  '',
  '',
  '',
  'v',
  '\0',
  '',
  '\x06',
  '',
  '?',
  'Y',
  '',
  '\x9D',
  '',
  '',
  '',
  'y',
  '',
  '\x04',
  '',
  '5',
  '/',
  '',
  '',
  'J',
  'V',
  '',
  '\x81',
  '',
  '',
  '',
  '',
  '',
  'A',
  'z',
  'I',
  'D',
  '\x1A',
  ']',
  '7',
  'g',
  'j',
  's',
  '',
  '',
  '\x8D',
  'h',
  '',
  '',
  '\x1B',
  '',
  '',
  '',
  'N',
  '',
  '',
  'r',
  'x',
  '',
  'm',
  '',
  '\xFF',
  '',
  'H',
  '',
  'p',
  '',
  '\v',
  '',
  '',
  '',
  '3',
  '|',
  '\x05',
  '',
  '',
  '\a',
  '_',
  '\x16',
  '*',
  '\b',
  '',
  '',
  '',
  '',
  'd',
  '',
  '',
  '$',
  '',
  '\'',
  ':',
  '',
  '',
  '',
  'F',
  '',
  'S',
  '#',
  '',
  '',
  '(',
  '',
  '',
  '',
  '',
  '',
  '\x1D',
  '4',
  '',
  '',
  'L',
  '6',
  '',
  '',
  '\x10',
  '',
  '.',
  '',
  ')',
  '',
  'b',
  '\x11',
  'o',
  'n',
  '',
  'c',
  'Q',
  '',
  '',
  '',
  'Z',
  '\x8F',
  '',
  '\x7F',
  '\x1C',
  '\x02',
  '\x13',
  'B',
  '',
  '`',
  '',
  '',
  '',
  '',
  '',
  'G',
  'X',
  '',
  '}',
  '',
  '\x1E',
  '',
  '\x14',
  'O',
  '\x13',
  '',
  '',
  '',
  '\x1B',
  '.',
  '',
  '',
  'B',
  '',
  '\x11',
  '',
  '\r',
  '',
  ':',
  '',
  '',
  'j',
  'x',
  '@',
  '\x01',
  '\x1C',
  '>',
  '[',
  '',
  '{',
  '',
  '\'',
  '\x8F',
  '',
  '',
  'o',
  '',
  '',
  '',
  '\x14',
  '5',
  '',
  '',
  '\\',
  '<',
  'v',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '7',
  '',
  'p',
  '',
  'H',
  '',
  'X',
  '',
  '',
  '',
  '\x1D',
  '\x18',
  '',
  '',
  'A',
  '',
  'J',
  '`',
  '',
  '',
  '',
  '\x90',
  '\x06',
  '',
  '',
  '',
  'u',
  '',
  '0',
  '',
  '}',
  '\b',
  '',
  's',
  'M',
  '',
  '!',
  '',
  '\x15',
  '',
  '',
  '4',
  'd',
  '',
  '\t',
  '|',
  '',
  '2',
  '',
  'e',
  '',
  '\x03',
  'R',
  '',
  '\xFF',
  '\x0F',
  '8',
  '',
  '',
  '',
  '3',
  'h',
  '',
  'K',
  '*',
  '\x1E',
  '',
  '',
  '\x02',
  '\x1A',
  '',
  '',
  '1',
  '',
  '',
  '',
  '9',
  'V',
  'C',
  'N',
  '\x0E',
  'l',
  '/',
  '',
  '',
  '&',
  '\x05',
  '',
  'P',
  '6',
  '\x04',
  '',
  '',
  '',
  '',
  '',
  '',
  '=',
  '',
  'q',
  '',
  'm',
  'F',
  '\0',
  'E',
  '',
  '',
  '\x19',
  '',
  '',
  '',
  '\n',
  'W',
  '\a',
  'i',
  '',
  '',
  'w',
  '?',
  '\x10',
  '~',
  '^',
  '$',
  '',
  'U',
  '\x16',
  '',
  '',
  '#',
  '',
  '\x12',
  '',
  '',
  '',
  '',
  'g',
  '\x7F',
  '',
  'n',
  '',
  '',
  '',
  'f',
  '',
  'Y',
  'r',
  'b',
  ',',
  '\"',
  '',
  '',
  '',
  '',
  '',
  'G',
  'L',
  '(',
  '\x1F',
  '\f',
  '',
  '',
  '',
  '\x8D',
  'y',
  'c',
  '',
  '_',
  '',
  '',
  '\v',
  '-',
  '',
  '',
  'D',
  '',
  'S',
  'I',
  '',
  'T',
  'z',
  '%',
  '',
  '',
  't',
  '',
  '\x9D',
  '',
  '',
  '',
  '\x17',
  'Q',
  ';',
  'a',
  '',
  'Z',
  ')',
  ' ',
  '',
  ']',
  '\x81',
  '',
  '',
  '+',
  '',
  '',
  'k',
  '',
  'R',
  '',
  '',
  'e',
  'g',
  '',
  '\x1F',
  '=',
  '',
  'W',
  'y',
  '',
  '',
  '8',
  '',
  '',
  '',
  '\x11',
  '\x0F',
  '\x04',
  '7',
  '',
  '\0',
  '\x10',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  'v',
  '\"',
  'G',
  '',
  'U',
  'D',
  '+',
  'E',
  '',
  'K',
  '',
  '',
  'M',
  '',
  '#',
  '',
  'H',
  '-',
  '',
  '',
  '\x8F',
  '',
  'u',
  '6',
  'o',
  '',
  '',
  'C',
  's',
  '',
  'J',
  '',
  '',
  '\r',
  '',
  ';',
  '',
  'I',
  '',
  '\x03',
  'f',
  '_',
  '\x1C',
  ')',
  '<',
  '',
  '',
  'i',
  '',
  'x',
  '',
  '',
  'Y',
  'X',
  '~',
  '^',
  '',
  'T',
  '',
  '',
  '!',
  '&',
  '\x9D',
  '',
  ']',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  ',',
  '',
  '',
  '>',
  'c',
  '\x17',
  '\x06',
  '',
  '%',
  'd',
  '',
  '',
  '5',
  '',
  'w',
  'h',
  '0',
  '',
  'p',
  '4',
  '',
  'a',
  '\'',
  '',
  '',
  '\t',
  'P',
  '\x18',
  '',
  '\x15',
  'L',
  '',
  'l',
  'j',
  '',
  '',
  '{',
  '*',
  '',
  ' ',
  'm',
  'q',
  '9',
  '',
  '?',
  '',
  '\x90',
  '',
  '',
  '\x05',
  '',
  '',
  '',
  '',
  'z',
  '',
  '\x81',
  '',
  '',
  '',
  '\x1A',
  '',
  '.',
  '\x19',
  '',
  '',
  '',
  '`',
  '',
  '\x1B',
  '',
  ':',
  '',
  '',
  'V',
  'Z',
  'N',
  '',
  '',
  '\x16',
  '',
  '',
  '2',
  '/',
  '\x0E',
  '\x02',
  '',
  'Q',
  '\x12',
  '@',
  '$',
  '(',
  '',
  '',
  '',
  '\v',
  '',
  'r',
  '',
  '1',
  '',
  '\n',
  '',
  '',
  'n',
  '3',
  '\x8D',
  '',
  '\x01',
  '\b',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1E',
  '|',
  '\x7F',
  '',
  'b',
  '\f',
  'A',
  '\\',
  '',
  '\x14',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '}',
  'O',
  'k',
  '',
  'B',
  't',
  '\x13',
  '',
  'S',
  '',
  '',
  '',
  '\a',
  'F',
  '[',
  '\x1D',
  '',
  '',
  'R',
  '\x1C',
  '',
  'y',
  '',
  '',
  '',
  '\x05',
  'M',
  '',
  'Y',
  '',
  '2',
  '[',
  '',
  't',
  '\x02',
  '',
  '',
  '',
  '',
  'w',
  'u',
  '',
  '',
  '|',
  '\r',
  '',
  '',
  ';',
  '@',
  '#',
  'H',
  'Z',
  '\x9D',
  '',
  '',
  'n',
  '',
  '',
  '',
  '\x1E',
  '',
  '',
  '',
  '',
  'm',
  '',
  '',
  'q',
  '',
  'Q',
  'o',
  ' ',
  '\x1D',
  '$',
  '',
  '',
  '(',
  '',
  '\x16',
  'D',
  'K',
  ':',
  '5',
  '',
  '',
  'v',
  '',
  '\x04',
  'p',
  '',
  'k',
  'V',
  'h',
  '',
  '',
  '',
  'd',
  '\x1A',
  '6',
  '*',
  '/',
  '',
  '7',
  '-',
  '\x8F',
  '\'',
  '3',
  'U',
  'N',
  '9',
  '',
  '{',
  ',',
  '',
  'r',
  '',
  '',
  '',
  'G',
  'l',
  '',
  '`',
  '',
  '',
  '\x11',
  '\"',
  '>',
  'g',
  '',
  '',
  '\x0E',
  '',
  '',
  '',
  '',
  '\t',
  '',
  '\x06',
  '\\',
  'C',
  '',
  '',
  '',
  '\x03',
  'W',
  'j',
  '',
  '',
  'E',
  '',
  '',
  '',
  '',
  '',
  'I',
  '',
  '',
  '',
  'f',
  '',
  'X',
  '',
  '',
  '\x10',
  '\b',
  '^',
  'b',
  '',
  '\x12',
  '\xFF',
  '!',
  'F',
  'B',
  '\x01',
  '',
  '',
  '',
  '',
  '',
  '&',
  '\x14',
  '\0',
  '\x0F',
  '',
  '',
  '',
  '\x13',
  '',
  '\f',
  '\v',
  '',
  '4',
  'e',
  'L',
  '\x18',
  '',
  '\x1F',
  's',
  '',
  '',
  'O',
  '}',
  '+',
  '=',
  '',
  '%',
  ')',
  '',
  '',
  '\x81',
  '',
  '',
  '',
  '',
  '',
  'i',
  '?',
  '0',
  '\x17',
  '',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '<',
  'a',
  '',
  '',
  '',
  '',
  'S',
  'z',
  '',
  'T',
  'x',
  '',
  '',
  '',
  '',
  'J',
  '',
  '',
  '1',
  '~',
  '\n',
  '',
  'c',
  'A',
  '\x19',
  '',
  '_',
  '\a',
  '\x15',
  '\x8D',
  '8',
  '',
  ']',
  '',
  '',
  '\x1B',
  '',
  '',
  '',
  '',
  'P',
  '',
  '\x90',
  '.',
  '',
  '',
  'I',
  '',
  '',
  '{',
  '',
  '\x8D',
  '\x7F',
  '',
  '',
  '\x17',
  '1',
  '',
  '-',
  '\x18',
  '',
  '',
  'D',
  '',
  '',
  '',
  'U',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '$',
  'u',
  '.',
  'W',
  'q',
  '',
  'O',
  '',
  '',
  ':',
  'J',
  'n',
  '\x1F',
  '',
  'M',
  '',
  '',
  'Z',
  'G',
  '',
  'h',
  '8',
  'x',
  'S',
  '',
  '',
  '',
  'c',
  'b',
  '',
  'g',
  '',
  '\r',
  '',
  'm',
  '<',
  '\a',
  '',
  '\b',
  '',
  'i',
  '',
  '\x1E',
  '\"',
  'l',
  '\x03',
  '',
  '',
  '\x14',
  'R',
  '',
  '2',
  '4',
  '',
  '!',
  '\x8F',
  '',
  '',
  '',
  ';',
  '',
  '',
  '&',
  '\x0E',
  '',
  '\n',
  '',
  '',
  '\v',
  '',
  '\x1A',
  '\x01',
  '',
  '9',
  '',
  'j',
  '*',
  'o',
  '',
  'V',
  '\x1B',
  '?',
  '\x11',
  '\x9D',
  'r',
  '\x1C',
  '',
  'e',
  '',
  '\xFF',
  '',
  'p',
  'v',
  'H',
  '',
  '',
  '|',
  '',
  '',
  '',
  '',
  '',
  '3',
  '}',
  '',
  '',
  '',
  '',
  'Q',
  'B',
  '',
  'T',
  '',
  '>',
  'd',
  '',
  ']',
  '',
  '',
  '\t',
  '=',
  'w',
  '',
  '',
  '',
  '\f',
  '',
  'L',
  '7',
  '',
  '\x10',
  '',
  'y',
  '\x90',
  '',
  '',
  '',
  '#',
  '',
  '',
  't',
  '\x81',
  '',
  '',
  '',
  '',
  '\x04',
  '',
  '',
  ',',
  '',
  ')',
  'A',
  'F',
  '%',
  '',
  '_',
  '`',
  '',
  '',
  '',
  '~',
  '',
  '\x1D',
  '\x05',
  '',
  '6',
  'C',
  '',
  '',
  'a',
  '',
  '\0',
  '',
  'f',
  '',
  'k',
  '\\',
  '\x16',
  '',
  'P',
  'X',
  '^',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '/',
  '',
  '',
  'K',
  '',
  ' ',
  '\x02',
  's',
  '\x06',
  '\'',
  '',
  '',
  '',
  '',
  'z',
  '',
  '',
  'Y',
  '[',
  '',
  'E',
  '0',
  '',
  '',
  '',
  '@',
  '5',
  '(',
  '\x15',
  'N',
  '\x13',
  '\x19',
  '',
  '+',
  '\x0F',
  '\x12',
  '',
  '+',
  '',
  '',
  '',
  'A',
  '\x1E',
  'F',
  '',
  '',
  '',
  '\x9D',
  '\x19',
  '\v',
  '',
  '\x11',
  '\x14',
  'V',
  'd',
  '',
  '',
  '&',
  '',
  '2',
  '',
  '\x02',
  'E',
  'z',
  '',
  '',
  '',
  '{',
  'R',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  ')',
  'H',
  '9',
  '',
  'J',
  '?',
  '',
  '',
  '',
  '5',
  '',
  '',
  '',
  '',
  '',
  '',
  'c',
  '',
  'D',
  '',
  '',
  '',
  '\x8D',
  '',
  '',
  '/',
  '\x12',
  't',
  'a',
  '',
  '',
  '',
  '',
  '\x1D',
  '\n',
  '@',
  '',
  '',
  'l',
  '~',
  'n',
  '\x13',
  '',
  ',',
  '\x0F',
  'r',
  '\r',
  '3',
  '7',
  '',
  ':',
  '',
  '',
  'N',
  'W',
  '',
  '',
  '',
  '',
  'Z',
  '!',
  '\'',
  '\xFF',
  '\x03',
  ' ',
  '6',
  'Q',
  '\\',
  '\x81',
  'e',
  '|',
  '',
  '_',
  'm',
  '',
  'u',
  'B',
  '\x1F',
  '',
  'q',
  'i',
  'j',
  '$',
  '',
  '',
  '',
  '',
  '\"',
  '',
  'y',
  '',
  '\x0E',
  '4',
  'Y',
  '',
  '',
  '',
  '\x10',
  '',
  '-',
  '',
  '',
  '',
  '}',
  '',
  '',
  '',
  '',
  '',
  'b',
  '\x01',
  '\x7F',
  '',
  'x',
  '',
  '\t',
  '',
  '',
  'w',
  '',
  '%',
  'o',
  'I',
  '',
  '',
  '^',
  '',
  '',
  'G',
  '',
  '\x15',
  '\x16',
  '',
  '',
  'f',
  '\x06',
  '\x18',
  '',
  '\f',
  'v',
  '>',
  '',
  '\b',
  ']',
  '',
  'K',
  'g',
  '#',
  '',
  '.',
  '`',
  '',
  '',
  '',
  '=',
  'h',
  ';',
  '<',
  '\x04',
  'U',
  '*',
  '',
  '',
  '',
  '',
  '8',
  '\x05',
  '[',
  '0',
  'P',
  '',
  'M',
  'C',
  '',
  '',
  '',
  '',
  '\x1C',
  '',
  'k',
  '',
  'O',
  '\0',
  '',
  '',
  'X',
  'T',
  '',
  '',
  'p',
  '',
  '',
  'S',
  '1',
  '\x1B',
  '',
  'L',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x17',
  '\x90',
  '\x8F',
  '\x1A',
  '(',
  '',
  '',
  's',
  '',
  '',
  '',
  '\a',
  '',
  '=',
  '',
  '',
  ';',
  '',
  '',
  '\x05',
  'X',
  '',
  'k',
  '9',
  '',
  '',
  '*',
  '\x06',
  '',
  'v',
  '',
  'L',
  '',
  '',
  '',
  '$',
  'y',
  'I',
  '\x1F',
  '',
  '\xFF',
  'w',
  '',
  '<',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  't',
  '',
  '\a',
  '\x1E',
  '1',
  '',
  ':',
  '',
  '\x16',
  '',
  'h',
  '\b',
  '3',
  '',
  '',
  '_',
  '\x90',
  '',
  '/',
  '',
  '',
  'P',
  '',
  'M',
  '|',
  '',
  '',
  'a',
  '7',
  '',
  'B',
  '0',
  '',
  'o',
  '+',
  '\x81',
  '!',
  'd',
  '\'',
  '',
  'q',
  '',
  ',',
  'u',
  '',
  '',
  '',
  '\x14',
  '',
  '',
  '',
  '-',
  'F',
  '',
  '',
  '@',
  '?',
  '\f',
  '}',
  '\x12',
  'H',
  '',
  '\x7F',
  'f',
  '\0',
  '\x04',
  '',
  '\x10',
  '',
  'l',
  '\"',
  '`',
  '',
  'e',
  'S',
  '>',
  '',
  'R',
  '5',
  '',
  '',
  '',
  '',
  '\r',
  '\x02',
  'z',
  '\x0E',
  '4',
  '\x0F',
  '6',
  '',
  '2',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x9D',
  '',
  '',
  '\\',
  'D',
  '\x18',
  '',
  'W',
  'r',
  '\x13',
  'U',
  '',
  'O',
  'N',
  '.',
  '',
  '',
  'G',
  'A',
  '\x11',
  ']',
  's',
  '\x17',
  'i',
  '',
  'K',
  ' ',
  '',
  '\n',
  '',
  '',
  '',
  '',
  '\x1D',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1B',
  'Z',
  '',
  'x',
  '',
  '',
  '',
  'J',
  'E',
  '',
  'b',
  'Q',
  '',
  '',
  'T',
  '',
  '',
  '',
  '',
  '',
  '',
  '[',
  '~',
  '8',
  '(',
  '',
  '',
  '\x1A',
  '',
  '^',
  '',
  '\x8D',
  '',
  ')',
  '#',
  'C',
  '',
  '\x1C',
  '',
  '',
  '&',
  'j',
  '',
  '\x19',
  '',
  '',
  'c',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '\x01',
  'm',
  'Y',
  '',
  '%',
  '{',
  '\t',
  '',
  '',
  '\x15',
  '',
  '',
  'p',
  'V',
  '',
  'g',
  'n',
  '\x03',
  '',
  '\x8F',
  '',
  'R',
  '\x1D',
  '8',
  '',
  '',
  'n',
  't',
  '',
  '',
  '',
  'A',
  '\n',
  'c',
  '',
  '',
  '',
  '}',
  '',
  'w',
  '',
  '3',
  'L',
  '',
  '\x06',
  '=',
  '',
  '',
  '',
  '\x04',
  '',
  '\t',
  '',
  '.',
  '+',
  'x',
  '',
  '',
  'H',
  '',
  '',
  '\b',
  ' ',
  '\x8F',
  '\v',
  'i',
  'M',
  'Z',
  '',
  '',
  '',
  'Y',
  '\x13',
  '\x18',
  '',
  '',
  '',
  '\x17',
  '@',
  'b',
  '',
  '',
  '|',
  '^',
  '',
  '',
  '',
  '(',
  '',
  '',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '[',
  '%',
  'h',
  '',
  '',
  '',
  's',
  '\x0F',
  '',
  '',
  'O',
  '\r',
  '7',
  '',
  '',
  'G',
  'f',
  '',
  '\x7F',
  'o',
  '\x0E',
  '',
  '\x19',
  'V',
  'v',
  '',
  '',
  '',
  '\x1C',
  '',
  '',
  'r',
  'g',
  '',
  '',
  '\\',
  '>',
  '\x15',
  'l',
  '',
  '',
  ';',
  'S',
  'B',
  '\x02',
  '\x8D',
  '9',
  '',
  'W',
  '\"',
  '',
  'E',
  '',
  '',
  '\x81',
  'd',
  'q',
  '\x9D',
  '',
  '',
  '!',
  '',
  '',
  '\a',
  '\0',
  '',
  '\x14',
  '',
  '',
  '\f',
  'a',
  '',
  ']',
  '\x03',
  '6',
  '\x16',
  '~',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'U',
  'u',
  'D',
  '',
  '',
  '$',
  '&',
  '',
  '',
  '\x1E',
  '',
  ')',
  '',
  'Q',
  'm',
  'k',
  '<',
  '',
  'p',
  '',
  '5',
  'C',
  '\'',
  ',',
  '',
  '',
  '\x1F',
  'j',
  '#',
  '\x1A',
  '{',
  'F',
  'e',
  '',
  '\xFF',
  '',
  '',
  'X',
  '\x1B',
  '',
  '',
  '',
  'K',
  'N',
  '',
  'J',
  '',
  '2',
  '',
  '',
  '\x90',
  '',
  '-',
  'y',
  '0',
  '?',
  '*',
  '`',
  '',
  '',
  '',
  '',
  '',
  '4',
  '',
  'I',
  '',
  '',
  '',
  '_',
  '/',
  '',
  '1',
  '\x05',
  '',
  '',
  '',
  '',
  'z',
  'P',
  '',
  '',
  '',
  '',
  '\x11',
  '\x10',
  ':',
  'T',
  '',
  '\x01',
  '',
  '',
  'M',
  '',
  '',
  '',
  'C',
  '',
  '',
  '\x11',
  '',
  '',
  '(',
  '',
  '\x7F',
  '',
  '',
  '\x12',
  'p',
  '',
  '',
  '',
  'A',
  '',
  '',
  'q',
  '',
  'i',
  '2',
  '',
  '\x8F',
  '',
  '',
  '8',
  'E',
  '-',
  '',
  '',
  '',
  '',
  '*',
  '\x17',
  '\x1C',
  '',
  '',
  '0',
  'd',
  'R',
  '\x13',
  '',
  '',
  '',
  'B',
  '\x18',
  '',
  '',
  '',
  'F',
  '\0',
  '',
  '',
  '|',
  'S',
  '\x0F',
  '\x90',
  '~',
  'z',
  '',
  'u',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '',
  '',
  '\x1D',
  'W',
  ' ',
  'x',
  '',
  'l',
  '',
  '',
  '\x15',
  '',
  '',
  '7',
  '',
  '',
  '\x14',
  '@',
  '',
  '',
  '\a',
  '',
  'V',
  '',
  '',
  'I',
  '^',
  '',
  '',
  '',
  '%',
  '',
  '6',
  ':',
  '1',
  '',
  'h',
  '',
  'O',
  '',
  '',
  'D',
  '_',
  '',
  '\f',
  'Q',
  'n',
  '',
  '',
  '',
  ']',
  '\x0E',
  '',
  '\x06',
  '9',
  '',
  '\x1F',
  'f',
  '5',
  '\x1B',
  '\x01',
  '',
  '',
  '',
  '',
  'w',
  '',
  'y',
  'L',
  '',
  '',
  '',
  '.',
  '',
  '\x1E',
  '&',
  'm',
  '',
  '!',
  '',
  'a',
  '',
  '\x05',
  '\r',
  '\"',
  '',
  '\x81',
  's',
  '',
  '\n',
  '',
  '',
  '\x04',
  '',
  ';',
  '\x10',
  '',
  'r',
  'Z',
  '',
  '',
  '\'',
  'g',
  '',
  'G',
  '',
  '',
  'N',
  'o',
  '',
  '\x9D',
  '',
  'v',
  '',
  '\t',
  '<',
  'c',
  '',
  '',
  '$',
  '}',
  '',
  '',
  'b',
  '',
  '#',
  '',
  '',
  'U',
  '[',
  '+',
  '\x03',
  '',
  '?',
  '',
  'J',
  '\x02',
  '\xFF',
  '',
  '',
  ',',
  '\\',
  '\x8D',
  '\b',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  't',
  '>',
  'P',
  '\x19',
  '=',
  '',
  'K',
  '',
  ')',
  'k',
  '\x1A',
  'Y',
  '',
  '`',
  '',
  '',
  '',
  '4',
  '3',
  '',
  '{',
  'X',
  '/',
  'j',
  '',
  'H',
  'e',
  '\x16',
  'T',
  '',
  ')',
  '',
  '',
  '',
  '',
  'X',
  '',
  '&',
  'k',
  '9',
  's',
  '\x1F',
  '',
  '\x04',
  '8',
  '',
  '\x9D',
  'I',
  '',
  'O',
  '(',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'e',
  '',
  '1',
  '\x19',
  '',
  '',
  '/',
  '',
  '?',
  'm',
  '',
  '',
  '',
  '\x90',
  '',
  '\x18',
  '',
  '\x17',
  '',
  '',
  '',
  '',
  'f',
  'L',
  '+',
  'R',
  'a',
  'W',
  'q',
  'j',
  'B',
  'A',
  '',
  '',
  'g',
  '',
  '',
  '',
  'P',
  '',
  '\x1C',
  '',
  'T',
  'Y',
  '',
  '',
  '0',
  '\\',
  '',
  '',
  'V',
  '',
  '\f',
  '\x1A',
  '5',
  '',
  '',
  '.',
  '',
  '',
  'E',
  ',',
  '',
  '|',
  '',
  '\x15',
  '',
  '6',
  '',
  '',
  '',
  '',
  'F',
  '\x16',
  '\x06',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x7F',
  '',
  '',
  '{',
  'z',
  '\x05',
  'v',
  '',
  '\v',
  'c',
  't',
  '',
  '',
  '%',
  '',
  'U',
  '',
  '',
  '>',
  '`',
  '',
  'b',
  '',
  '\x14',
  '\x1D',
  '_',
  'p',
  '\t',
  '',
  '',
  '#',
  '\a',
  ' ',
  '',
  '\b',
  '\x0E',
  '',
  'u',
  '\x8F',
  'r',
  '\x12',
  'K',
  '',
  'o',
  '',
  'n',
  '',
  '',
  '\0',
  '\xFF',
  ']',
  'x',
  '',
  '',
  '\x1E',
  '}',
  '',
  '',
  'D',
  '',
  '',
  '',
  '~',
  '\x01',
  '^',
  'h',
  '',
  '\x02',
  '',
  '',
  'C',
  '\x13',
  '',
  '',
  '',
  '\x0F',
  '\n',
  '',
  'N',
  'l',
  '<',
  '\x8D',
  '!',
  '',
  '',
  '',
  '@',
  '',
  '',
  'd',
  ':',
  '',
  'w',
  '',
  '[',
  'i',
  'J',
  '\"',
  '\'',
  '',
  '',
  '\x03',
  'G',
  '\x11',
  '\x1B',
  '',
  '',
  '2',
  '',
  'Q',
  '',
  '7',
  '',
  '',
  ';',
  '',
  '',
  '4',
  '',
  'y',
  '',
  '',
  '',
  'M',
  '',
  '',
  '',
  '',
  '=',
  '',
  '*',
  '\r',
  'S',
  'Z',
  '3',
  '',
  '$',
  'H',
  '\x10',
  '',
  '',
  '\x81',
  '-',
  '',
  '',
  't',
  '',
  '',
  '',
  '\x12',
  'Y',
  '0',
  '3',
  '$',
  '*',
  '',
  '\x14',
  '',
  '',
  '',
  'V',
  '',
  'f',
  'd',
  '',
  '\\',
  '\x1E',
  '/',
  '',
  'a',
  '',
  '1',
  '',
  'j',
  '',
  '',
  'p',
  'r',
  'J',
  'I',
  '>',
  'h',
  '6',
  '',
  '',
  '-',
  '',
  '',
  '\x04',
  '',
  '',
  'y',
  'b',
  'P',
  '',
  'K',
  '\0',
  'O',
  '&',
  '',
  's',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'D',
  '',
  '\x15',
  '\b',
  '\x90',
  '!',
  '',
  '',
  '',
  '\x17',
  'A',
  '',
  ';',
  'z',
  '7',
  'Z',
  '2',
  '\xFF',
  '\x13',
  'm',
  '',
  'Q',
  '',
  '',
  'C',
  ' ',
  '',
  'c',
  '\v',
  '\x1D',
  '',
  '_',
  '\x0E',
  '\a',
  '',
  '`',
  'U',
  '\x8F',
  'e',
  'F',
  '5',
  ')',
  '',
  '\x05',
  '',
  '\f',
  '',
  '\x81',
  '%',
  '',
  '',
  '^',
  'l',
  '',
  'W',
  '',
  '@',
  '~',
  '',
  '',
  'g',
  '',
  '\x1B',
  'i',
  '',
  '',
  '\x18',
  '\x19',
  '',
  '',
  'n',
  'S',
  '\x11',
  '',
  '',
  '\x7F',
  '',
  '+',
  'H',
  '',
  '',
  '{',
  '',
  '',
  '',
  '[',
  '',
  '\x9D',
  'q',
  '',
  '',
  '\x1F',
  '',
  '',
  '|',
  ':',
  '',
  '',
  '',
  '\t',
  '',
  '',
  '\n',
  '',
  '',
  '',
  '?',
  'X',
  '',
  '\x02',
  '',
  '',
  '',
  '.',
  'B',
  '',
  '',
  '=',
  '\x8D',
  '(',
  'R',
  'o',
  '',
  'x',
  '',
  '\x06',
  '',
  '\x16',
  '',
  '',
  'E',
  '',
  '\x1C',
  '4',
  ',',
  '\x10',
  '',
  '',
  '',
  '',
  'G',
  '',
  '\x03',
  '',
  'k',
  '',
  'u',
  'N',
  '9',
  '',
  '\"',
  'T',
  '',
  '#',
  ']',
  '8',
  '',
  '}',
  '',
  '',
  '',
  '',
  'w',
  '',
  'M',
  '\r',
  '',
  'v',
  '\x0F',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\'',
  '<',
  'L',
  '\x1A',
  '',
  '',
  '',
  '\x01',
  '',
  '',
  '\x9D',
  'x',
  ',',
  '1',
  '\b',
  '',
  '\x0F',
  '',
  '',
  '',
  '',
  '7',
  '%',
  '',
  '',
  '',
  'a',
  'y',
  '\x03',
  '',
  '',
  '\\',
  '`',
  '',
  '',
  '',
  '',
  'G',
  '',
  'I',
  'w',
  '',
  '',
  '\x1E',
  '',
  'T',
  '',
  '',
  '',
  '',
  '',
  'L',
  'W',
  '',
  '\"',
  '',
  '\x14',
  'e',
  '',
  '+',
  '',
  '',
  '',
  '{',
  'K',
  '\xFF',
  '\x18',
  'o',
  '5',
  '',
  '',
  '',
  ' ',
  '',
  '',
  'J',
  '',
  '|',
  '',
  't',
  'h',
  '.',
  '',
  ';',
  '/',
  '\x1C',
  'b',
  '\x16',
  '',
  '\x11',
  '\x17',
  '',
  '@',
  'C',
  'E',
  '',
  'i',
  '',
  '\a',
  '',
  'R',
  '\x1A',
  '\x1D',
  '',
  'U',
  'g',
  '',
  '',
  '',
  '&',
  'p',
  '>',
  'u',
  '',
  '',
  '',
  'v',
  '',
  '',
  '',
  '4',
  'S',
  '!',
  '',
  '=',
  '',
  '',
  '\x06',
  '',
  '',
  '',
  '}',
  '',
  '',
  '0',
  '\x02',
  '',
  ':',
  'H',
  '',
  's',
  'F',
  'l',
  '\x7F',
  '(',
  '',
  '',
  '',
  '',
  '[',
  '',
  '',
  '\n',
  '\x1F',
  'q',
  '\x05',
  '^',
  '',
  '',
  '',
  '',
  '\x81',
  '',
  '',
  'r',
  'm',
  'Z',
  '',
  '',
  '',
  '',
  'M',
  '\t',
  '\0',
  '8',
  '<',
  '$',
  '*',
  '',
  'c',
  '',
  'V',
  '\x8D',
  '\r',
  '',
  '3',
  'd',
  '',
  'B',
  '',
  '',
  '?',
  'f',
  '',
  ')',
  '',
  '6',
  '',
  '~',
  '',
  '',
  '',
  'k',
  '',
  ']',
  '',
  '',
  'N',
  '',
  '',
  '',
  '\x13',
  '_',
  '',
  'A',
  '',
  '',
  '\v',
  'j',
  '',
  '9',
  '',
  '',
  '\x12',
  'n',
  '\x04',
  '',
  '',
  '#',
  '',
  'Y',
  '-',
  'Q',
  '',
  '',
  '2',
  '\x1B',
  '\x90',
  'P',
  'X',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  '',
  '\f',
  '\x01',
  '\x8F',
  'D',
  '\x10',
  '',
  '\x19',
  'z',
  '',
  '',
  '',
  '\'',
  '',
  '',
  '',
  '\x0E',
  '',
  '',
  'O',
  '',
  '',
  '}',
  '',
  '',
  '',
  '4',
  '',
  '',
  '\n',
  '',
  '',
  '&',
  '',
  '',
  '',
  '',
  '[',
  'R',
  '',
  'i',
  '',
  '',
  '\x18',
  '\x1D',
  '',
  '',
  '',
  '\x03',
  'G',
  '\x11',
  'P',
  'y',
  'V',
  '',
  ';',
  'A',
  '',
  'B',
  '|',
  '',
  'n',
  '6',
  '\x15',
  's',
  '',
  'E',
  '',
  '9',
  '5',
  'h',
  '',
  '',
  'v',
  '',
  '^',
  '',
  '',
  '',
  '\a',
  '1',
  '',
  '?',
  '\x16',
  '',
  '',
  'T',
  'J',
  '0',
  '\v',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '%',
  '\x81',
  'N',
  '',
  'Z',
  '\x17',
  '',
  'g',
  '',
  '',
  'C',
  'e',
  'l',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  '\x1B',
  '',
  '',
  't',
  '',
  '',
  '\r',
  '',
  '',
  '',
  'D',
  '',
  '+',
  '',
  'k',
  '',
  '',
  'O',
  '',
  '',
  '',
  ',',
  'K',
  'S',
  'd',
  '\x7F',
  '\t',
  '-',
  '',
  'Q',
  '',
  '',
  '',
  'L',
  '',
  '',
  '',
  '\'',
  '\0',
  '3',
  '',
  '',
  '\x02',
  '',
  '\x06',
  '#',
  '',
  'b',
  '',
  '',
  '\b',
  'r',
  '',
  '~',
  '\x90',
  '{',
  '',
  '\x04',
  '',
  'Y',
  'I',
  '',
  '\x1E',
  '',
  'H',
  '',
  '<',
  'a',
  '',
  '\x8F',
  'j',
  'x',
  '/',
  'q',
  'z',
  'W',
  '',
  'p',
  'F',
  '',
  '(',
  ':',
  '',
  '`',
  '',
  '',
  '',
  '$',
  '',
  'c',
  'M',
  '8',
  ' ',
  '',
  '',
  '\x9D',
  '\x19',
  '',
  '@',
  '',
  '\x01',
  '',
  '',
  '*',
  '',
  '.',
  '',
  '\x0E',
  '\x10',
  '',
  '\x1F',
  '\x14',
  ']',
  '',
  '>',
  'm',
  '7',
  '',
  '',
  '\x12',
  '',
  ')',
  '\x1A',
  '',
  '\f',
  'o',
  '',
  '=',
  '_',
  '',
  '',
  'U',
  '\x05',
  '',
  '',
  '\x0F',
  '',
  '\\',
  '',
  '',
  '',
  '',
  '!',
  '',
  '\"',
  'u',
  'f',
  '',
  '\x13',
  'w',
  '\x8D',
  '',
  '',
  '\x1C',
  'X',
  '',
  '',
  '2',
  '',
  '',
  '',
  '',
  '',
  '%',
  '',
  '',
  'J',
  '',
  '\x01',
  'A',
  'b',
  '$',
  '4',
  '',
  '\x16',
  '',
  '',
  'v',
  '',
  '\xFF',
  '\x02',
  'V',
  '',
  '-',
  '\b',
  '',
  '',
  '',
  ',',
  '',
  ' ',
  '?',
  '',
  '0',
  '',
  '',
  'z',
  '',
  'G',
  '',
  ';',
  'c',
  '',
  '<',
  '',
  '',
  '\x06',
  '',
  'U',
  '\x81',
  'W',
  '',
  '\v',
  '9',
  '',
  '\x1C',
  '\x12',
  '.',
  '',
  '',
  '*',
  '/',
  'w',
  '~',
  '',
  'q',
  '',
  '',
  '^',
  '\r',
  '`',
  '',
  '',
  '',
  'R',
  '',
  'K',
  '',
  'u',
  '',
  '',
  '',
  'r',
  '\x18',
  '\x8D',
  '',
  '',
  'L',
  'd',
  '',
  'm',
  '\a',
  '',
  'B',
  '5',
  '',
  '',
  '',
  '',
  'Z',
  ']',
  'E',
  '@',
  '}',
  '\x19',
  'e',
  'H',
  '',
  '',
  '=',
  '',
  '',
  '',
  '',
  '\f',
  'C',
  '',
  '',
  '',
  'f',
  '',
  '',
  '',
  '',
  '\x8F',
  '!',
  '',
  'F',
  'N',
  'j',
  '',
  '\x03',
  '',
  '',
  '2',
  '#',
  'T',
  '',
  '',
  '',
  't',
  '',
  'h',
  '\x1F',
  '',
  'P',
  '\x1A',
  '',
  '',
  '',
  '',
  '',
  'Y',
  'S',
  '&',
  'O',
  '\x11',
  '',
  '\x10',
  '',
  '',
  '',
  '',
  '',
  'a',
  '\x17',
  '\x13',
  '',
  '',
  'x',
  '',
  '',
  '',
  '+',
  '',
  '',
  '\x9D',
  '[',
  '',
  '7',
  '>',
  '\x04',
  '',
  '_',
  '\x1D',
  '',
  'g',
  '',
  '\"',
  'M',
  '',
  '',
  'p',
  '3',
  '',
  '',
  '',
  '',
  'I',
  '8',
  '1',
  '\x0E',
  '',
  '',
  '',
  'n',
  'k',
  '\x1B',
  '\x14',
  'X',
  '\\',
  'D',
  '\x0F',
  'l',
  '(',
  '',
  '',
  '',
  '',
  '\t',
  '{',
  '\x05',
  '',
  '',
  '\n',
  '',
  '\x1E',
  '',
  '',
  's',
  '',
  '',
  '',
  '',
  'y',
  'o',
  '\'',
  '',
  '',
  '\0',
  '',
  '\x15',
  '\x90',
  '',
  '',
  '',
  ':',
  '6',
  '|',
  '',
  '\x7F',
  ')',
  '',
  'Q',
  'i',
  'K',
  'l',
  '',
  '',
  '!',
  '',
  '\x13',
  'd',
  't',
  '\f',
  '',
  'F',
  '',
  '}',
  '',
  '\x18',
  '',
  '',
  '',
  '',
  '',
  '',
  'y',
  '',
  '',
  '',
  ';',
  '&',
  '',
  '^',
  '',
  'H',
  '9',
  '',
  '-',
  '',
  '',
  'P',
  '',
  'L',
  '',
  '\x01',
  '|',
  '',
  's',
  '',
  '\x03',
  'S',
  '',
  '',
  '',
  '\x11',
  'E',
  'g',
  '0',
  '',
  '',
  '',
  '',
  '[',
  'x',
  '\x17',
  'b',
  '\x12',
  '',
  '',
  '',
  '',
  'h',
  '\x81',
  'Z',
  'j',
  'G',
  ',',
  '',
  ']',
  'T',
  'm',
  'X',
  '',
  '',
  '6',
  '\x10',
  'v',
  '',
  '',
  '.',
  'a',
  '\x1A',
  '',
  'M',
  '',
  '?',
  'z',
  '\x1B',
  '\n',
  '\b',
  '',
  '\"',
  '',
  '',
  '',
  '\x1F',
  '\v',
  'U',
  '\x90',
  '2',
  '\x1D',
  '7',
  '',
  '',
  'p',
  '\x19',
  '',
  'D',
  '1',
  '~',
  '',
  '\x7F',
  '5',
  '\x8F',
  '',
  '',
  'u',
  '>',
  'O',
  '',
  '\x16',
  '\x8D',
  '',
  '%',
  '\x04',
  'f',
  '',
  'B',
  '',
  'r',
  '*',
  '\x0F',
  '',
  'N',
  '',
  '=',
  '',
  '',
  '',
  '$',
  '',
  '',
  '',
  'w',
  '\r',
  '',
  '',
  '',
  '8',
  '',
  'o',
  '',
  '',
  'W',
  '',
  ' ',
  '',
  '',
  'q',
  '',
  'I',
  'A',
  '\x0E',
  '',
  'i',
  'C',
  '',
  '`',
  '',
  '',
  '',
  '4',
  '',
  'J',
  '\a',
  '\'',
  '',
  '',
  'c',
  '',
  '',
  '',
  '{',
  '@',
  '\t',
  '',
  '',
  '',
  '',
  'e',
  '_',
  '',
  '\x05',
  'n',
  ')',
  '<',
  '',
  '',
  '',
  'Y',
  '',
  '',
  '',
  '',
  '',
  '',
  'k',
  '',
  '',
  '\x02',
  '/',
  'Q',
  '',
  '\x1C',
  '',
  '',
  '',
  '+',
  '',
  '',
  '',
  '',
  '\x14',
  '',
  'V',
  '',
  '\x1E',
  '',
  '\x9D',
  ':',
  '(',
  '',
  '',
  'R',
  '#',
  '\x15',
  '',
  '\0',
  '',
  '',
  '\\',
  '',
  '',
  '\xFF',
  '',
  '',
  '',
  '\x06',
  '3',
  'v',
  '',
  '',
  'H',
  '<',
  '',
  '',
  '\xFF',
  '',
  '\x02',
  '\x01',
  'i',
  '',
  'J',
  '}',
  '\x06',
  '',
  '',
  'd',
  '0',
  '',
  '\r',
  '',
  'Z',
  '5',
  '',
  '',
  '',
  'M',
  '',
  '',
  '',
  'k',
  '',
  '',
  '',
  'n',
  '',
  'c',
  '\x04',
  '',
  '\a',
  '',
  '\v',
  '~',
  '',
  '\x7F',
  '\x1D',
  '',
  '',
  '`',
  '',
  '',
  'V',
  '',
  '',
  'g',
  'a',
  '4',
  '&',
  'R',
  '',
  'S',
  'o',
  '',
  'b',
  '',
  '\"',
  '/',
  '',
  '',
  '',
  '',
  'Y',
  '\x8D',
  '',
  '\t',
  '',
  '6',
  '\b',
  '',
  '',
  '\x18',
  '\x05',
  'f',
  '2',
  '',
  '',
  'e',
  '',
  '',
  '',
  '7',
  '',
  '\x81',
  'G',
  '',
  '\n',
  'T',
  '',
  '',
  '',
  '#',
  '\x03',
  '\x1B',
  '',
  '{',
  '',
  '',
  '',
  '',
  '*',
  '\x12',
  '',
  '',
  '',
  'h',
  ']',
  '',
  '8',
  '\f',
  '',
  'Q',
  'm',
  ':',
  '-',
  '',
  'q',
  '',
  '',
  'X',
  'U',
  '',
  '\'',
  'L',
  '\x9D',
  '',
  ',',
  'W',
  '\x0F',
  ')',
  '\x10',
  '',
  '\x16',
  ' ',
  '',
  'N',
  '',
  'y',
  '\x0E',
  '\x13',
  '',
  '>',
  '',
  '',
  '',
  '',
  '[',
  'z',
  'P',
  '\x17',
  '=',
  's',
  '',
  '(',
  '',
  '',
  '',
  'I',
  '',
  '',
  'j',
  '',
  '\0',
  '',
  '',
  '',
  '',
  '',
  '?',
  'B',
  '',
  '',
  '',
  'r',
  '3',
  '',
  '',
  '',
  '\x19',
  '\x90',
  '',
  '',
  'x',
  '\\',
  'u',
  '\x1A',
  '',
  '',
  '',
  '$',
  'E',
  'O',
  '',
  '',
  '\x1E',
  '',
  '+',
  '%',
  '|',
  '^',
  '\x15',
  'K',
  't',
  '',
  '',
  '\x1F',
  '_',
  'D',
  '\x14',
  '',
  'F',
  '.',
  '',
  '\x8F',
  '\x11',
  '',
  'C',
  'p',
  '',
  '',
  '!',
  '',
  '',
  'A',
  ';',
  '',
  'w',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1C',
  '1',
  '',
  '',
  '@',
  '9',
  '',
  'l',
  '',
  'x',
  '',
  '',
  '',
  '',
  'P',
  '',
  'N',
  '',
  'Y',
  '\x1A',
  '\x0F',
  'R',
  '',
  '\x1B',
  '\0',
  '',
  '',
  'X',
  '',
  '',
  '',
  '',
  '\x10',
  '[',
  '\x04',
  'l',
  'W',
  '',
  '',
  '\x1C',
  '~',
  '',
  '<',
  '\v',
  '\x05',
  '',
  '',
  '',
  ']',
  '\n',
  '',
  '',
  '',
  '\'',
  '\x13',
  '$',
  '',
  'h',
  '4',
  '',
  '\"',
  '',
  '',
  '',
  '\x02',
  '',
  '',
  '',
  '',
  '',
  '',
  'f',
  '',
  '\x8F',
  '2',
  '',
  '',
  '\x18',
  '\x9D',
  '',
  '\\',
  '-',
  'd',
  'E',
  '3',
  '',
  '',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  '',
  'p',
  '\x14',
  '@',
  '',
  'a',
  '',
  '_',
  'I',
  'u',
  '\f',
  '',
  '',
  '',
  'H',
  '9',
  'T',
  '.',
  '\x19',
  '',
  '',
  't',
  '',
  '',
  '',
  '',
  'r',
  '0',
  '',
  '',
  '\x03',
  '\x90',
  'F',
  '',
  '1',
  '>',
  '',
  'G',
  'e',
  '',
  '',
  'y',
  '\x8D',
  '',
  '',
  'D',
  'j',
  '',
  '',
  '',
  '|',
  'L',
  '',
  '',
  '',
  '?',
  'S',
  '^',
  '',
  '\r',
  '\b',
  ';',
  'J',
  '\xFF',
  '\x16',
  'U',
  'c',
  '\t',
  'Z',
  '',
  '',
  '\x11',
  'g',
  ')',
  '\x0E',
  '',
  '',
  'V',
  '',
  '',
  '\x15',
  '}',
  'w',
  '',
  '\x1E',
  '\x01',
  '',
  '8',
  '#',
  '\x81',
  '',
  '',
  'A',
  '',
  '',
  '5',
  'C',
  '\x7F',
  ' ',
  'i',
  '',
  '',
  '*',
  '',
  '',
  '',
  '\x1D',
  '',
  'O',
  '',
  '\x1F',
  '',
  '',
  '',
  'K',
  '\x12',
  '\x17',
  '',
  'o',
  '',
  '6',
  '',
  '',
  'k',
  '(',
  '%',
  '',
  '',
  'z',
  '/',
  '',
  'm',
  '\a',
  '+',
  '',
  'n',
  '{',
  '&',
  '`',
  'b',
  'Q',
  '7',
  '',
  '!',
  '=',
  '',
  '',
  '',
  '',
  's',
  'B',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'M',
  '',
  'v',
  '',
  ':',
  '',
  '',
  ',',
  '',
  '',
  '',
  'q',
  '',
  '\b',
  '',
  'A',
  '*',
  '\x17',
  '',
  '\x10',
  '\x19',
  '(',
  '',
  '%',
  'l',
  'e',
  '\x0E',
  '',
  'M',
  '[',
  'h',
  'm',
  '',
  '',
  '',
  '\x11',
  '',
  '1',
  '',
  '\x8D',
  '',
  '',
  'z',
  '^',
  '',
  '',
  '',
  '',
  '=',
  'g',
  'Z',
  '',
  '\\',
  '',
  '@',
  '',
  '',
  '',
  'J',
  '',
  '',
  '',
  '',
  'W',
  '\0',
  '',
  '\x13',
  '',
  '',
  '\r',
  '',
  '\x7F',
  '\xFF',
  'j',
  '_',
  '',
  '',
  'K',
  '',
  'U',
  '>',
  '5',
  '',
  '',
  '',
  'r',
  'D',
  'N',
  '\x81',
  '',
  '',
  '\x05',
  '',
  't',
  '$',
  '',
  '',
  '\x15',
  '',
  '\x1A',
  '7',
  '',
  '',
  'f',
  '',
  '',
  '{',
  'i',
  ',',
  '',
  '/',
  '',
  '-',
  '',
  '',
  '',
  '',
  '',
  '\x12',
  'd',
  '',
  '',
  '',
  'y',
  '',
  '',
  'X',
  '',
  '\x04',
  '\t',
  'H',
  '\f',
  '\x02',
  '',
  ']',
  'Y',
  '',
  '',
  '',
  '',
  '\x1E',
  '',
  '~',
  '?',
  '',
  '\x01',
  '+',
  'c',
  'O',
  '',
  '\x1B',
  '',
  '',
  'o',
  'v',
  '',
  '',
  '',
  '\x90',
  'P',
  'Q',
  'I',
  '0',
  '\x06',
  'L',
  '',
  '',
  '',
  '',
  '|',
  '',
  '\x0F',
  '',
  '',
  '\a',
  '\x03',
  'V',
  '\x9D',
  '',
  '',
  'T',
  '',
  '',
  '\"',
  'a',
  '\x1F',
  '\n',
  '',
  '',
  '',
  'b',
  'E',
  '',
  'S',
  '',
  ' ',
  '',
  '',
  '',
  '',
  'x',
  'k',
  '',
  'F',
  '',
  '',
  '',
  ')',
  '\v',
  'n',
  '.',
  '#',
  '\x16',
  '',
  '',
  ';',
  '\x8F',
  '<',
  '',
  '3',
  '',
  '',
  '',
  's',
  '',
  '',
  '2',
  '\x1D',
  '4',
  'p',
  '',
  'C',
  '',
  '`',
  '',
  '',
  '',
  '',
  'R',
  '\x18',
  '!',
  '6',
  '',
  '',
  'u',
  '&',
  'q',
  '',
  '',
  '\'',
  '',
  '',
  ':',
  '}',
  'G',
  '8',
  '',
  '9',
  '',
  'w',
  '',
  '\x1C',
  '',
  'B',
  '',
  '',
  '\x14',
  '',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  'G',
  '',
  '',
  '',
  '',
  '\t',
  '\x12',
  '',
  '\x11',
  'W',
  '',
  'B',
  '~',
  '\x7F',
  '',
  'k',
  '/',
  'D',
  't',
  '=',
  'H',
  '',
  '',
  '',
  '',
  '\0',
  '',
  '',
  '',
  '',
  '>',
  '',
  '<',
  '',
  '',
  '5',
  '',
  '',
  '',
  '',
  'n',
  '}',
  '',
  '',
  '2',
  '',
  '',
  '',
  '_',
  '?',
  '',
  '8',
  'c',
  '',
  'X',
  '',
  '',
  '\x1B',
  '4',
  '\x16',
  '',
  'o',
  'A',
  ':',
  'S',
  '',
  '1',
  '\x01',
  '',
  'N',
  '*',
  'I',
  '',
  'F',
  '\"',
  '',
  '9',
  '',
  '\f',
  '\\',
  'r',
  'Q',
  '-',
  's',
  '\x13',
  '',
  '',
  '',
  '\b',
  '\v',
  '',
  '0',
  'Z',
  '',
  '\a',
  'l',
  'f',
  '#',
  '',
  '$',
  ',',
  '',
  'p',
  '`',
  'x',
  'z',
  'R',
  '\'',
  'j',
  '\x81',
  '',
  '',
  '7',
  'E',
  '',
  '',
  '\x02',
  '\x90',
  '',
  '&',
  '',
  'O',
  '@',
  '',
  'U',
  '',
  'm',
  '',
  'M',
  '+',
  'y',
  '',
  '',
  '\x1A',
  '',
  '',
  'T',
  '',
  '',
  '\x9D',
  'b',
  '',
  'h',
  '',
  '',
  '',
  'Y',
  '',
  '\x8D',
  '',
  '\x0F',
  '',
  'w',
  '!',
  '',
  '',
  '\x17',
  '.',
  '\x8F',
  'i',
  '(',
  '',
  '\x14',
  ']',
  'e',
  '',
  '',
  '^',
  '',
  '',
  'v',
  '',
  '',
  '',
  'u',
  'J',
  '',
  '\x1F',
  'q',
  '',
  '',
  '',
  '',
  ' ',
  'a',
  '|',
  '',
  'd',
  '\x1E',
  '\x15',
  '',
  '',
  'P',
  '',
  '',
  '3',
  'V',
  '\x0E',
  'L',
  '',
  '{',
  '',
  '',
  '',
  '',
  '',
  '\x03',
  '%',
  '\n',
  '',
  '',
  '\x04',
  '\x18',
  '\x1D',
  '',
  '\r',
  'C',
  '',
  '',
  '',
  '6',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x19',
  ';',
  '',
  '',
  '',
  '',
  'K',
  '',
  '\x10',
  '',
  '',
  'g',
  '[',
  '\x1C',
  '',
  ')',
  '',
  '',
  '',
  '\xFF',
  '',
  '\x05',
  '',
  'w',
  '',
  'd',
  '\x1D',
  'M',
  '\x81',
  ')',
  '\x8D',
  '\x0E',
  '',
  '',
  '',
  's',
  '`',
  '\n',
  '\x11',
  '\x10',
  'D',
  '',
  '',
  '\x17',
  'j',
  '',
  '',
  '',
  '',
  '',
  'J',
  '\x1E',
  '2',
  '#',
  '1',
  '',
  'B',
  '+',
  '',
  '',
  '',
  '',
  'e',
  ':',
  '{',
  ']',
  'G',
  'T',
  'C',
  'u',
  '\\',
  '',
  '',
  '',
  '',
  'k',
  '(',
  '\x05',
  '',
  '\x1C',
  '',
  'v',
  'r',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x19',
  '@',
  'X',
  '\x16',
  '',
  '',
  '',
  '\x1B',
  '',
  '',
  '',
  'E',
  '',
  '\x15',
  '?',
  '',
  '\x1F',
  '*',
  '',
  '7',
  '\x06',
  '',
  'Y',
  '',
  '}',
  'N',
  '',
  '',
  '',
  '\x14',
  'S',
  '',
  'p',
  '',
  't',
  '',
  '\a',
  '\x7F',
  '',
  '\0',
  '$',
  '',
  '',
  '0',
  '',
  '\x01',
  'h',
  'g',
  '',
  '',
  '\b',
  '',
  '\xFF',
  '',
  '',
  '',
  '',
  'O',
  '',
  'z',
  'a',
  '',
  '',
  '',
  '\x9D',
  '',
  'i',
  '_',
  '',
  '',
  'c',
  'F',
  '',
  '=',
  'x',
  ';',
  'o',
  '\x0F',
  '',
  '\f',
  '',
  '',
  '\x18',
  '',
  '\x8F',
  '',
  'f',
  ' ',
  '',
  '',
  'Z',
  '^',
  '',
  '',
  '',
  '',
  '',
  ',',
  '',
  '',
  'P',
  '/',
  '',
  '',
  '\x12',
  '',
  '5',
  '\t',
  '',
  '',
  '',
  '>',
  '',
  '~',
  '',
  'K',
  '[',
  '',
  '',
  'm',
  '',
  'n',
  '',
  '\x04',
  '',
  '8',
  '.',
  '',
  '',
  '&',
  'b',
  '',
  'V',
  '',
  '',
  '!',
  '-',
  '',
  '',
  '|',
  '\x90',
  'R',
  'A',
  '',
  '',
  '',
  '',
  '',
  '',
  'U',
  '',
  '',
  'y',
  '',
  '',
  '',
  '\r',
  'L',
  '',
  '9',
  'Q',
  '',
  '6',
  '3',
  '\x02',
  '4',
  '',
  '',
  'l',
  'H',
  '',
  '\'',
  '',
  '\x13',
  '<',
  'I',
  '',
  '',
  '\x1A',
  '',
  '\x03',
  'q',
  '\v',
  '',
  '',
  '\"',
  '%',
  '',
  'W',
  'K',
  'g',
  '',
  '>',
  'X',
  '',
  '{',
  '',
  '0',
  '',
  'a',
  '',
  ' ',
  '/',
  '\x7F',
  '',
  '1',
  '',
  'B',
  '[',
  'w',
  '',
  '',
  '',
  'q',
  'I',
  '\t',
  '_',
  'F',
  '',
  '',
  'f',
  '-',
  '`',
  ']',
  '\x15',
  '',
  '\'',
  'z',
  '',
  '@',
  '',
  '',
  '',
  '',
  'm',
  '',
  '',
  'Y',
  '',
  '',
  '+',
  '',
  '',
  '\x1A',
  '',
  '',
  '',
  '\"',
  '\r',
  '',
  '4',
  '',
  '',
  'x',
  '\x14',
  '',
  'r',
  '',
  '\x05',
  '3',
  '\x1D',
  '\x8D',
  '\x02',
  '',
  '~',
  'k',
  '',
  '',
  'M',
  '}',
  '\x81',
  'j',
  '',
  '',
  'L',
  'c',
  'd',
  '',
  '',
  'y',
  '\\',
  ')',
  'S',
  'U',
  '\x0E',
  '',
  '\x03',
  '#',
  '',
  '\x10',
  'b',
  '\0',
  '\x1B',
  't',
  '\xFF',
  '|',
  '\x18',
  '',
  '',
  '',
  '9',
  '',
  '',
  '\x04',
  '',
  '$',
  '',
  '',
  '',
  '',
  'n',
  '',
  '',
  '',
  '',
  '\n',
  '\b',
  'C',
  '',
  '',
  'R',
  '',
  '\x06',
  '\x17',
  'J',
  'p',
  'D',
  '',
  '!',
  '',
  ':',
  '',
  '',
  '',
  '\x13',
  '^',
  '',
  '',
  '\x1F',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1C',
  '=',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  '',
  '\a',
  'N',
  'G',
  '',
  '',
  '',
  '',
  'v',
  '\f',
  '',
  '',
  '',
  '5',
  '\x12',
  '',
  '',
  '%',
  'E',
  'H',
  '\x0F',
  '',
  'l',
  '',
  'e',
  '\x8F',
  '',
  '8',
  '',
  '',
  '',
  '',
  '',
  '',
  'V',
  '\x90',
  'i',
  '',
  '',
  '7',
  '6',
  '',
  '',
  'u',
  'T',
  '\x01',
  '',
  'o',
  '',
  '',
  '',
  '',
  '<',
  '',
  '',
  '?',
  '',
  '',
  '\x11',
  '',
  '',
  '',
  'Z',
  '',
  '\x9D',
  '',
  '.',
  'O',
  'P',
  '',
  '',
  '&',
  ',',
  '',
  '',
  '',
  'h',
  '',
  'Q',
  '\x1E',
  '*',
  'A',
  '',
  '2',
  '(',
  ';',
  '\x16',
  '',
  '\v',
  'W',
  's',
  '',
  '',
  'O',
  '\x13',
  'r',
  '\x06',
  '%',
  'd',
  '?',
  '',
  '',
  '',
  '',
  '',
  '',
  '3',
  '',
  '',
  '',
  '`',
  '^',
  '',
  '',
  '',
  '',
  '\x12',
  '\x18',
  '\x19',
  '',
  'V',
  '\v',
  '',
  '',
  '',
  '',
  '>',
  '\t',
  '7',
  '',
  '!',
  ']',
  '\x9D',
  '\a',
  '',
  'h',
  '',
  '\x0E',
  '',
  '',
  '',
  '$',
  'b',
  'J',
  '',
  '',
  'R',
  '\x8F',
  '\x16',
  '',
  'Z',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'o',
  '',
  'F',
  '&',
  '',
  '\x02',
  'A',
  'q',
  '\x04',
  '',
  '',
  '\x05',
  '-',
  'Q',
  '',
  '',
  '\x8D',
  'c',
  '',
  '',
  ')',
  '1',
  '',
  'H',
  '9',
  '',
  'm',
  '',
  '\0',
  '',
  '',
  '\x14',
  'W',
  '',
  '',
  ':',
  '2',
  '',
  'M',
  '',
  '',
  '\x1E',
  '\b',
  'k',
  'N',
  '',
  '',
  '\x1C',
  '',
  ',',
  '',
  '',
  '',
  '',
  '',
  'e',
  '\x01',
  '',
  '',
  '',
  '',
  '=',
  '5',
  '',
  '',
  'v',
  '',
  '\x0F',
  '\\',
  '',
  '',
  '\"',
  '',
  '',
  '',
  '6',
  '.',
  'n',
  '',
  '',
  '',
  '',
  'f',
  '0',
  'u',
  'w',
  '\x17',
  ' ',
  't',
  '@',
  '4',
  '|',
  '',
  '',
  '+',
  'B',
  '',
  '',
  '',
  '',
  'g',
  '\x1F',
  '_',
  'L',
  '\x1D',
  'S',
  '\x15',
  'y',
  '\x1B',
  'P',
  '*',
  'X',
  '\r',
  'I',
  '',
  '}',
  '\x7F',
  '',
  '',
  'l',
  'x',
  '',
  'j',
  '',
  'Y',
  '',
  '\x1A',
  '\x10',
  'p',
  '\xFF',
  '\x81',
  '',
  '',
  '',
  '',
  '#',
  '',
  '',
  '/',
  '8',
  'C',
  'i',
  'T',
  '',
  'G',
  '[',
  '\'',
  '',
  '',
  '\f',
  '',
  '',
  '',
  '',
  '',
  '',
  'U',
  '',
  'E',
  'K',
  '',
  'z',
  'a',
  '',
  '',
  '',
  '',
  '<',
  '\x90',
  '\x11',
  '',
  '',
  '',
  '\n',
  '~',
  ';',
  '',
  '(',
  '',
  '',
  '',
  's',
  '',
  '\x03',
  '{',
  '',
  '',
  '',
  '',
  'D',
  '~',
  '',
  '\v',
  '\"',
  'w',
  'W',
  '\f',
  '!',
  '',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  'C',
  '',
  '',
  'S',
  '',
  '',
  '',
  '',
  '\x12',
  '',
  'z',
  '',
  'x',
  'n',
  '',
  '4',
  'O',
  '>',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'R',
  '',
  '',
  '',
  '',
  '=',
  '',
  '',
  '',
  '\b',
  '',
  '6',
  'i',
  'N',
  '',
  ')',
  '[',
  '',
  'D',
  '',
  '',
  '\x18',
  'k',
  '',
  '',
  'P',
  't',
  '',
  '',
  '',
  'c',
  '',
  '',
  '',
  'f',
  '{',
  'K',
  '\x1C',
  '',
  ':',
  '',
  '8',
  '\x90',
  '\x1E',
  '%',
  'L',
  '\x0F',
  '$',
  '',
  '',
  '',
  '\x05',
  '',
  '',
  'Z',
  '',
  '',
  ' ',
  '\x8D',
  '',
  '',
  ']',
  '\x10',
  'G',
  '^',
  'p',
  '',
  '',
  '',
  '\x02',
  '',
  '\x81',
  '',
  '\\',
  'j',
  'X',
  '\a',
  '',
  '/',
  '',
  'Y',
  '',
  'h',
  'u',
  '0',
  'F',
  '`',
  '',
  '',
  'V',
  '?',
  'd',
  '',
  '',
  '\x19',
  '',
  '',
  '',
  'r',
  '_',
  '\x01',
  '|',
  '',
  '3',
  '',
  'E',
  '\n',
  'l',
  '\x17',
  '',
  '',
  'b',
  '-',
  '\x03',
  '',
  '',
  '',
  '',
  '\r',
  '+',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'I',
  '\x8F',
  '',
  'Q',
  '#',
  '\x1A',
  '',
  '',
  '',
  '\x11',
  '',
  '\x1D',
  '.',
  '',
  'q',
  'M',
  '\x14',
  '',
  ',',
  '',
  '',
  '9',
  '',
  '\x16',
  'T',
  '',
  '(',
  '',
  '\x04',
  '5',
  '<',
  'v',
  '\x7F',
  '\0',
  '\x1F',
  '',
  'U',
  '@',
  '',
  '\x0E',
  'B',
  '&',
  '*',
  '}',
  '',
  '',
  '',
  'H',
  '',
  '',
  '',
  '',
  'J',
  'e',
  '',
  '',
  '\'',
  '',
  '',
  'a',
  '',
  '',
  '',
  '1',
  '\x06',
  '7',
  ';',
  '\x1B',
  'm',
  'A',
  '\x9D',
  'y',
  '',
  '\xFF',
  '',
  '',
  '\t',
  'g',
  '',
  '',
  'o',
  '',
  '',
  '\x13',
  '',
  's',
  '',
  '2',
  '',
  '',
  'j',
  '6',
  'Z',
  'H',
  '',
  '',
  'J',
  'U',
  '#',
  'W',
  '\x8D',
  'h',
  '\x90',
  '^',
  '',
  '',
  '5',
  '',
  '\0',
  '\r',
  '%',
  '',
  '',
  '@',
  '',
  '',
  '\x05',
  '>',
  '\x1E',
  '1',
  '',
  '',
  '',
  '&',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  'l',
  '',
  '',
  '\x0E',
  'n',
  '',
  'G',
  '',
  '',
  '?',
  '',
  '',
  ';',
  '\x11',
  'O',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '~',
  '',
  '',
  '\x02',
  'B',
  'R',
  '',
  '\\',
  '',
  '',
  '',
  '',
  '+',
  'F',
  '',
  '',
  '',
  '_',
  't',
  '',
  ']',
  '|',
  '*',
  '',
  ' ',
  '\'',
  '',
  '<',
  'A',
  '-',
  '`',
  '',
  '\b',
  '',
  '',
  '\x9D',
  'L',
  'I',
  '',
  '\f',
  '',
  '3',
  '',
  '',
  '0',
  '$',
  'o',
  '4',
  '\x16',
  'i',
  '',
  '',
  'Y',
  '',
  '\x1F',
  '',
  'a',
  '/',
  'b',
  '',
  'g',
  'y',
  '',
  '',
  '',
  'm',
  '\x1B',
  '\x12',
  'X',
  'z',
  '',
  '!',
  '2',
  'T',
  'K',
  '\x0F',
  '',
  'r',
  'q',
  '',
  '9',
  '',
  '',
  '',
  '\t',
  '',
  '\x01',
  '\n',
  'p',
  '',
  'e',
  '',
  '',
  '',
  '\x14',
  '',
  '',
  '',
  '\x81',
  '',
  '\x13',
  '\x10',
  '\x8F',
  '=',
  '',
  '\x1C',
  '',
  '',
  '',
  'P',
  '{',
  '',
  '\x04',
  '',
  '}',
  'v',
  '',
  '',
  '',
  '\a',
  '\x15',
  '',
  '',
  'k',
  '8',
  'c',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '',
  '',
  'N',
  'M',
  '\"',
  '\xFF',
  '',
  'x',
  '',
  ')',
  '',
  'Q',
  '',
  'w',
  '',
  '',
  '',
  '\x18',
  '',
  '',
  'S',
  '\x19',
  '',
  'd',
  'E',
  '\x03',
  '',
  ',',
  '',
  '',
  '\x06',
  '\x17',
  '',
  '',
  '',
  '',
  'D',
  'u',
  '(',
  's',
  '.',
  '7',
  '\x1D',
  '',
  '',
  '',
  '',
  '',
  '',
  'f',
  '',
  '\x1A',
  'V',
  ':',
  '',
  '',
  '',
  '',
  '[',
  'C',
  '',
  'e',
  'S',
  'V',
  '',
  '',
  '(',
  '\x81',
  '',
  'J',
  '',
  '',
  '=',
  '\xFF',
  'w',
  '',
  '',
  '',
  '\\',
  's',
  '\a',
  '1',
  '',
  '\x1F',
  '6',
  'I',
  '',
  'R',
  '',
  'n',
  '',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  '\x18',
  '\x12',
  '',
  'N',
  'f',
  'K',
  '',
  '\t',
  'A',
  'U',
  '\x8F',
  '_',
  'Q',
  '',
  '',
  '\f',
  '',
  '',
  ')',
  'O',
  '5',
  '!',
  ']',
  '',
  '',
  'u',
  'v',
  '',
  '\x02',
  '\r',
  '',
  '',
  '\x10',
  '',
  '',
  '\v',
  '',
  '',
  '',
  '',
  '^',
  '\x7F',
  'i',
  '',
  '',
  'z',
  'P',
  '',
  '',
  '',
  '',
  '',
  '.',
  '-',
  'b',
  '',
  'x',
  '3',
  '',
  '\x0E',
  '',
  '',
  '\x8D',
  '',
  ' ',
  '',
  '\x04',
  '\x1E',
  '',
  '\x17',
  '\x11',
  '?',
  'o',
  '',
  '',
  '\x01',
  '',
  'C',
  '[',
  '\n',
  '',
  '',
  '\x1B',
  '4',
  'Z',
  ':',
  '',
  '',
  '2',
  '',
  'q',
  '\x90',
  '',
  '',
  '`',
  '<',
  'W',
  '\x14',
  'L',
  '\x15',
  '',
  '',
  'r',
  '',
  '\'',
  '',
  '8',
  'j',
  ';',
  '',
  '',
  '7',
  '',
  '',
  'y',
  '\x16',
  '',
  '\0',
  '/',
  'd',
  '',
  '',
  '',
  'E',
  'k',
  '',
  '+',
  'X',
  '',
  '0',
  '',
  'T',
  '',
  'F',
  '',
  '\x03',
  '',
  '',
  '\"',
  '',
  'B',
  '\x13',
  '',
  't',
  '',
  '',
  '\x1D',
  'p',
  '',
  '',
  '',
  '',
  'H',
  '~',
  'g',
  '',
  '',
  '*',
  '',
  'G',
  '',
  '',
  '\x06',
  '',
  '',
  '\b',
  '',
  'h',
  '',
  '$',
  '&',
  'D',
  '\x05',
  '',
  '',
  '',
  'M',
  '',
  '',
  '',
  'm',
  'l',
  '',
  '',
  'c',
  '@',
  '|',
  '',
  '',
  '#',
  '',
  '\x9D',
  '',
  '>',
  'Y',
  '',
  '',
  '',
  '',
  '\x0F',
  '',
  ',',
  '',
  '',
  '',
  '}',
  '',
  '%',
  '',
  '{',
  '',
  '\x1A',
  '',
  '\x1C',
  '',
  'a',
  '',
  '',
  '9',
  'M',
  '%',
  '',
  '',
  '4',
  '',
  '',
  '',
  '\x16',
  'o',
  '',
  '',
  '',
  '',
  'l',
  '',
  '',
  '[',
  '<',
  '\x90',
  '',
  '\r',
  '',
  '',
  'E',
  '',
  '?',
  'N',
  '',
  '\x1D',
  '\x0F',
  '',
  '',
  '',
  'b',
  '',
  '\x8D',
  'V',
  'R',
  '',
  '',
  '',
  '{',
  'u',
  '',
  'K',
  '1',
  '\x8F',
  '5',
  '/',
  '',
  'S',
  '\'',
  '',
  'z',
  '\t',
  'A',
  '\x1A',
  '~',
  ';',
  '',
  '!',
  '',
  '',
  ']',
  '&',
  '',
  '',
  '',
  'k',
  '',
  '',
  '',
  '\x15',
  '',
  '',
  '',
  '_',
  'q',
  '',
  'x',
  '',
  '',
  '\x10',
  '',
  '',
  '|',
  '\xFF',
  ',',
  '',
  '',
  '',
  'I',
  '0',
  '',
  '',
  'T',
  '+',
  '\n',
  '}',
  '',
  '',
  '',
  '',
  '\x12',
  '8',
  'w',
  '',
  '',
  '3',
  '',
  '\x0E',
  '6',
  '',
  '^',
  'J',
  '',
  '',
  '\\',
  '\x05',
  '',
  't',
  '\x13',
  '\x04',
  '',
  'B',
  '',
  '\x1B',
  '',
  '',
  '',
  '7',
  '',
  'U',
  'f',
  '',
  '',
  'C',
  'c',
  'G',
  '',
  '',
  'y',
  '.',
  's',
  '',
  '\x18',
  '\x7F',
  '\x06',
  'h',
  '',
  '',
  '(',
  '\x17',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '\f',
  '',
  '',
  '',
  '',
  '>',
  'n',
  'j',
  '',
  '\0',
  '\b',
  'e',
  '',
  '#',
  'F',
  '\x9D',
  '-',
  '',
  '*',
  '',
  '',
  '',
  '',
  '',
  '`',
  '',
  '\x81',
  '$',
  '\"',
  'g',
  'Z',
  'm',
  'L',
  '\x1F',
  '\x1C',
  '=',
  '',
  'r',
  'p',
  '',
  '\x03',
  '',
  'v',
  'H',
  '\x1E',
  ')',
  '',
  '',
  '',
  '',
  'O',
  '',
  '2',
  '',
  'W',
  'X',
  '',
  'a',
  '',
  '',
  'D',
  '',
  ':',
  '',
  '',
  '',
  'P',
  '',
  '\x11',
  'Q',
  '',
  '\a',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x01',
  '@',
  '',
  '',
  ' ',
  '',
  '\x02',
  '',
  'i',
  '\x19',
  'd',
  '9',
  '',
  '\x14',
  'Y',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'g',
  '\x1C',
  '',
  '',
  '%',
  '\x9D',
  '\r',
  'd',
  '',
  '',
  '',
  '',
  '(',
  '',
  '',
  ':',
  '\x8D',
  'p',
  'c',
  '&',
  '',
  '`',
  '{',
  'h',
  '',
  '\x1B',
  '',
  '',
  '',
  '\x0F',
  'J',
  '',
  '',
  '-',
  '',
  'U',
  '8',
  '\n',
  '\x1A',
  '',
  '',
  '',
  '',
  '\f',
  'y',
  '',
  'm',
  'O',
  '',
  '',
  '6',
  '',
  'D',
  '',
  '',
  '',
  '#',
  '',
  '\x16',
  '',
  '',
  '',
  '9',
  '\x81',
  '',
  '',
  '',
  '\"',
  'W',
  '',
  '',
  'P',
  '\v',
  '}',
  '+',
  'H',
  '',
  'F',
  '',
  '\x90',
  '',
  'r',
  '\x04',
  'M',
  '',
  '',
  ' ',
  '',
  '',
  '^',
  '',
  '',
  'A',
  '',
  'n',
  'R',
  '',
  '\x13',
  '',
  '',
  'u',
  '',
  '0',
  '',
  'w',
  '',
  'e',
  '\x12',
  '\\',
  '',
  '',
  '1',
  '',
  'L',
  '',
  'S',
  '',
  '@',
  '~',
  '',
  '',
  '',
  '!',
  '',
  ',',
  'E',
  'B',
  'o',
  '\x1E',
  '\a',
  '$',
  'V',
  '',
  '',
  '',
  's',
  '\x02',
  '',
  '',
  '',
  'Y',
  '',
  '',
  '\x14',
  'b',
  '',
  '',
  '\x11',
  '\x15',
  'i',
  '',
  'K',
  '',
  '',
  '<',
  '',
  '',
  '\x18',
  '',
  '',
  '',
  ']',
  'f',
  '',
  '',
  'a',
  '4',
  '',
  '',
  'q',
  '\x06',
  'T',
  '',
  '',
  '',
  '\b',
  '\x0E',
  '',
  '\x05',
  'N',
  '\x8F',
  '>',
  '',
  '',
  ')',
  '',
  ';',
  'l',
  '*',
  '',
  '',
  '\x17',
  '=',
  '',
  'v',
  '\x7F',
  '',
  'X',
  '',
  '',
  'Z',
  '',
  '',
  '_',
  '',
  '|',
  '2',
  'x',
  'j',
  '',
  '/',
  '\0',
  '5',
  '',
  '\x1D',
  'C',
  '',
  '\x10',
  '',
  'z',
  '\x01',
  '',
  '',
  't',
  '\xFF',
  '3',
  '\x1F',
  '',
  '[',
  '',
  '\x19',
  '\'',
  'I',
  'G',
  '',
  'Q',
  'k',
  '',
  '',
  '7',
  '',
  '\x03',
  '',
  '.',
  '',
  '\t',
  '',
  '',
  '?',
  '/',
  'F',
  '>',
  '',
  '#',
  '',
  '\x10',
  '',
  '',
  '\x90',
  '.',
  '\x19',
  'v',
  '',
  '',
  'e',
  '',
  '',
  '',
  '',
  '',
  'J',
  'l',
  'D',
  '',
  'd',
  '',
  '\0',
  '',
  '`',
  'X',
  '|',
  '',
  '',
  '\r',
  '\x06',
  '<',
  '-',
  '',
  '\x13',
  '\xFF',
  '',
  '',
  '',
  '=',
  '',
  '',
  '\a',
  '',
  '',
  '',
  'P',
  '',
  '\x17',
  '',
  '\x1E',
  '',
  '',
  '{',
  '',
  'w',
  '',
  '\"',
  'L',
  's',
  'o',
  '4',
  '',
  '',
  '',
  '\x7F',
  'E',
  'r',
  '',
  '\\',
  '\x1F',
  '',
  '',
  ',',
  'T',
  '\x1D',
  '',
  '9',
  '',
  '',
  '\f',
  '',
  '',
  '+',
  '',
  '0',
  '\x01',
  '\x0E',
  'I',
  '',
  '',
  'K',
  'u',
  '&',
  '',
  '',
  'y',
  'R',
  '',
  ']',
  '',
  'A',
  'O',
  'Q',
  '*',
  'b',
  '',
  '',
  '',
  '\x03',
  '\x05',
  '',
  '',
  '',
  '$',
  'h',
  '',
  '',
  '\b',
  't',
  '\x11',
  'Z',
  'H',
  '\x8F',
  '',
  '',
  '',
  '\x1B',
  'z',
  'M',
  'B',
  '',
  '\x12',
  'G',
  '',
  '',
  '\x1C',
  '',
  'n',
  '@',
  '',
  'p',
  '\x14',
  ';',
  '',
  '',
  '',
  '',
  '1',
  'N',
  '',
  '',
  '',
  '\'',
  '(',
  '?',
  'k',
  '',
  '\x16',
  '',
  '\x1A',
  '',
  '\x81',
  'i',
  '',
  '',
  'f',
  '',
  '',
  'a',
  '',
  '',
  '\x8D',
  '',
  '',
  '',
  '',
  '\t',
  '',
  '[',
  '2',
  '',
  'Y',
  '',
  '',
  '',
  'g',
  'U',
  '',
  '\x9D',
  '',
  '8',
  '~',
  '%',
  '\v',
  '',
  '',
  '',
  '',
  '',
  '7',
  '',
  '',
  '!',
  'C',
  '\x18',
  '',
  '',
  '',
  'q',
  '',
  '',
  '',
  '3',
  ':',
  '5',
  ' ',
  '',
  '',
  '',
  '',
  '}',
  'x',
  '',
  'm',
  '\x02',
  '',
  'W',
  '\n',
  '',
  'S',
  '',
  '',
  '',
  '',
  '',
  'V',
  '\x15',
  'c',
  '',
  '6',
  '^',
  '',
  '',
  ')',
  '\x04',
  '',
  '\x0F',
  '_',
  '',
  'j',
  '',
  '',
  'S',
  '',
  '\x12',
  'o',
  '\v',
  'K',
  '',
  ']',
  't',
  '',
  '',
  '\x03',
  '',
  'l',
  '',
  '',
  '',
  '\r',
  'P',
  '',
  '\x81',
  '',
  '',
  '',
  '',
  'b',
  'h',
  '\x18',
  '1',
  '\x1F',
  '',
  '',
  '',
  '$',
  '\x10',
  '',
  'Z',
  '',
  '',
  '',
  'Y',
  '\"',
  '\x05',
  'y',
  '',
  '',
  'g',
  '',
  ':',
  ' ',
  '',
  '',
  '',
  '',
  '',
  'J',
  'z',
  '-',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '/',
  '\x04',
  '\x8F',
  '%',
  'p',
  'X',
  '',
  '}',
  '\x19',
  '(',
  '\f',
  '5',
  '',
  '2',
  '_',
  '',
  '',
  '',
  ',',
  '',
  'V',
  '',
  'k',
  'r',
  '',
  '7',
  '',
  '',
  '\x0E',
  '\x1A',
  '',
  'L',
  '',
  '',
  '',
  '',
  '',
  '',
  '\b',
  '>',
  '\x1D',
  'u',
  '',
  '\x1B',
  '',
  '',
  'x',
  '',
  '',
  '',
  '\'',
  ')',
  '',
  '\x8D',
  'Q',
  '',
  '',
  '\x9D',
  '',
  '',
  '\x13',
  '',
  'G',
  '?',
  '',
  'U',
  '',
  '',
  '\x16',
  '{',
  '&',
  '9',
  'C',
  'I',
  '',
  '',
  '.',
  '\x15',
  '',
  '',
  '`',
  '',
  '\x1E',
  '',
  '',
  '<',
  'd',
  '',
  'q',
  'B',
  'D',
  'A',
  '\x17',
  '',
  'W',
  '\x11',
  '#',
  '',
  '',
  '',
  '',
  '',
  '+',
  'O',
  '@',
  '',
  'c',
  '',
  'H',
  '',
  '',
  '',
  '6',
  '\x0F',
  '',
  '',
  '',
  '',
  'R',
  '!',
  'v',
  ';',
  '',
  '^',
  '\t',
  '[',
  'e',
  '\0',
  '',
  '',
  '=',
  '',
  'm',
  '',
  '\x06',
  '\\',
  'N',
  'M',
  '',
  's',
  '',
  'j',
  '',
  '',
  '\x90',
  '',
  '',
  '',
  '|',
  '0',
  '',
  'a',
  '',
  '8',
  '',
  '\x7F',
  'F',
  '',
  '*',
  'i',
  '~',
  'E',
  '',
  '\a',
  '',
  '\x14',
  '',
  '',
  '',
  '4',
  '\xFF',
  '',
  'w',
  '\n',
  'n',
  '3',
  'T',
  '',
  '\x1C',
  '',
  '',
  '\x02',
  '',
  '\x01',
  'f',
  '',
  '',
  '',
  'b',
  '',
  '',
  '',
  '5',
  '#',
  '',
  '',
  '<',
  '',
  'a',
  '',
  '',
  '',
  '',
  '',
  'V',
  ',',
  'D',
  '$',
  '?',
  ')',
  'k',
  '',
  'n',
  'L',
  '4',
  '',
  '',
  '',
  '@',
  '',
  'x',
  '',
  '',
  '',
  '',
  ':',
  '',
  '}',
  'y',
  '',
  '',
  'h',
  '',
  'E',
  '\x02',
  '',
  '^',
  'i',
  '',
  '',
  '\r',
  '!',
  '',
  '',
  '',
  '',
  'c',
  '>',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  '',
  'S',
  '',
  '',
  '-',
  '',
  '',
  ']',
  '',
  '',
  '',
  '\n',
  '',
  '',
  '\"',
  '~',
  '',
  'H',
  '\x8D',
  '6',
  'd',
  'Y',
  '',
  '',
  '\x06',
  '',
  '',
  '\x7F',
  '',
  '\x1C',
  'B',
  '+',
  '',
  '',
  '\x9D',
  '',
  'X',
  '%',
  'F',
  '',
  '',
  'R',
  'q',
  'K',
  '\x1A',
  '',
  'I',
  '\x8F',
  '',
  '',
  '\'',
  '',
  '\x13',
  '',
  'm',
  '',
  's',
  '*',
  '',
  '',
  '8',
  '3',
  'M',
  'O',
  '\a',
  '',
  '',
  'C',
  '',
  '',
  '',
  '',
  'T',
  '',
  ' ',
  '',
  '0',
  '',
  '',
  '',
  '',
  '\x81',
  'N',
  '',
  '',
  '',
  '\x19',
  'Z',
  '',
  'P',
  '',
  '',
  '',
  'A',
  '7',
  '',
  '\x04',
  '',
  'u',
  '',
  '',
  '',
  'U',
  '',
  'z',
  '',
  '\x01',
  '',
  'o',
  '\0',
  '\x90',
  '',
  '\x0F',
  '\x11',
  '`',
  'g',
  '',
  '\x05',
  '',
  '\x1E',
  '',
  'W',
  'l',
  '',
  '[',
  '',
  't',
  '_',
  'G',
  '',
  '\x12',
  '',
  'r',
  '\x18',
  '\x03',
  '',
  '\x1B',
  '',
  '',
  'Q',
  '\f',
  '|',
  '',
  '',
  '/',
  'f',
  '\xFF',
  '',
  '&',
  'j',
  '\\',
  '',
  '2',
  '',
  '(',
  '',
  '\b',
  'p',
  '\x1F',
  '',
  ';',
  '',
  '',
  '',
  '',
  'v',
  '\v',
  '{',
  'e',
  '9',
  'w',
  '',
  '\x15',
  '',
  '',
  '\t',
  '\x16',
  'J',
  '.',
  '\x1D',
  '',
  '=',
  '\x17',
  '1',
  '',
  '\x10',
  '',
  '',
  '',
  '\x14',
  '',
  '/',
  '',
  '\a',
  '',
  '<',
  'h',
  ':',
  '',
  '',
  '',
  '7',
  '',
  '',
  '\x16',
  'o',
  '\x1A',
  'd',
  'P',
  '!',
  '\"',
  '5',
  'g',
  '}',
  '',
  '\n',
  'i',
  '',
  '',
  'E',
  '',
  '\x11',
  '',
  '',
  ']',
  '\x1B',
  '',
  '8',
  'B',
  '',
  '',
  '',
  '|',
  '',
  '',
  '',
  '.',
  '',
  '[',
  'T',
  '',
  '',
  '',
  '\x05',
  '\b',
  'J',
  'R',
  '',
  '',
  'S',
  'H',
  '',
  '',
  't',
  'I',
  '',
  '',
  'r',
  '',
  '',
  '\x17',
  '',
  '',
  '',
  '6',
  '',
  'k',
  '',
  '',
  '',
  '',
  '\x03',
  'N',
  '`',
  '\t',
  '9',
  '4',
  '',
  '0',
  '\x06',
  '',
  '',
  'C',
  '\x0F',
  '',
  '',
  '',
  '',
  ';',
  '{',
  '',
  '\x13',
  '',
  'w',
  '\x10',
  '',
  '+',
  'z',
  '~',
  '',
  'F',
  '-',
  '',
  'b',
  '',
  '',
  '',
  'q',
  '\v',
  '@',
  'A',
  '\x8F',
  ',',
  '',
  '',
  '',
  'y',
  '3',
  '\x1D',
  'G',
  '\'',
  '\x8D',
  '',
  '',
  '',
  '',
  '=',
  'Z',
  '#',
  '',
  '',
  '',
  'c',
  '\x9D',
  '\x81',
  '\x1F',
  '\x04',
  '\x1C',
  '',
  'Q',
  '',
  '\x1E',
  '',
  '',
  '\x15',
  'K',
  '',
  '',
  '',
  '',
  '',
  '\x90',
  'W',
  '\f',
  '',
  '',
  'l',
  'p',
  '',
  '',
  'v',
  '',
  's',
  '',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  '\r',
  '',
  '',
  '',
  '',
  'X',
  '',
  '&',
  '1',
  '',
  '',
  '',
  '',
  'j',
  '',
  '',
  '2',
  '*',
  '',
  '',
  'D',
  'Y',
  'M',
  'O',
  '',
  '%',
  'x',
  '\x19',
  '?',
  '',
  '',
  '>',
  '(',
  '',
  '',
  '\x14',
  'a',
  '',
  '',
  'L',
  'm',
  '\\',
  ' ',
  '',
  '',
  '',
  '',
  ')',
  '\x7F',
  '\x01',
  'U',
  'f',
  '',
  '\x12',
  '\x0E',
  '_',
  '$',
  '\0',
  '',
  '',
  '',
  '^',
  'e',
  '',
  'u',
  '\x18',
  '',
  '',
  '\x02',
  '',
  'V',
  '',
  'n',
  '',
  '',
  '',
  's',
  '',
  '',
  ')',
  '\x17',
  '\x9D',
  '\a',
  '\x06',
  '',
  '',
  '',
  'u',
  '\v',
  '',
  'E',
  '\f',
  '',
  'S',
  '',
  '',
  '',
  'n',
  'B',
  'K',
  '\x0E',
  '',
  '\x18',
  '',
  '',
  '*',
  '',
  'W',
  '',
  '\x01',
  'F',
  '\x7F',
  '_',
  '{',
  '',
  '',
  ' ',
  'N',
  '\x1E',
  '',
  '',
  'R',
  '>',
  '',
  '',
  '~',
  '',
  '\x15',
  '5',
  '0',
  '',
  '',
  '',
  'q',
  '}',
  '',
  '',
  'y',
  'r',
  '\x03',
  '\x8D',
  ';',
  '',
  '/',
  '\x1C',
  '',
  '',
  '',
  '',
  '',
  'P',
  '4',
  '8',
  '',
  '1',
  '\x11',
  '\x1A',
  '',
  '\x14',
  '',
  '+',
  '',
  '\x04',
  'M',
  '',
  'Z',
  'U',
  '',
  '`',
  '',
  '.',
  '^',
  '',
  '',
  '!',
  '',
  '',
  '',
  '@',
  '',
  '',
  '\x1F',
  '',
  '',
  '$',
  '7',
  ']',
  '',
  '',
  '',
  '\x8F',
  '',
  '\xFF',
  '\x1D',
  '&',
  '\x10',
  '',
  '',
  'b',
  'C',
  '',
  'v',
  '',
  '',
  '',
  '(',
  '',
  '',
  '<',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x0F',
  '=',
  'Y',
  '',
  '\x1B',
  '\x13',
  'X',
  '\x19',
  '\b',
  'g',
  'h',
  '',
  '',
  '',
  'w',
  '',
  'j',
  '|',
  '',
  'o',
  '',
  '',
  '',
  'z',
  '',
  'a',
  'O',
  '',
  '',
  'Q',
  'e',
  '',
  '',
  '',
  '',
  '',
  '',
  'T',
  'd',
  '',
  '',
  '',
  'G',
  '',
  '',
  '-',
  't',
  '',
  '',
  'k',
  '',
  'J',
  '',
  '\\',
  '',
  '',
  '',
  '2',
  '',
  'l',
  '%',
  ',',
  'c',
  '',
  '\t',
  'H',
  '?',
  'A',
  '',
  '\x81',
  '',
  '',
  '',
  '#',
  '',
  '',
  '\x90',
  '',
  '3',
  'f',
  '',
  'L',
  '',
  '\'',
  '\x16',
  'I',
  '\x12',
  '\x02',
  '[',
  '\r',
  'V',
  '',
  'x',
  '',
  '',
  '9',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  ':',
  'i',
  '\0',
  'D',
  'p',
  '',
  'm',
  '',
  '\"',
  '\n',
  '6',
  '\x05',
  '',
  '-',
  '',
  '/',
  '\v',
  '\x1F',
  '!',
  '',
  'Y',
  '',
  '',
  '\x1A',
  'h',
  '',
  '',
  '\b',
  'a',
  '',
  '',
  '',
  '\f',
  '',
  '\x0F',
  'r',
  '',
  '@',
  '',
  'b',
  'A',
  '',
  '.',
  '',
  'B',
  '=',
  '',
  '\x1B',
  '',
  '',
  '',
  'o',
  '',
  'v',
  ']',
  '',
  'H',
  'k',
  '\x10',
  '6',
  '<',
  '',
  '',
  '',
  '',
  'C',
  '>',
  '#',
  'd',
  '',
  'c',
  '5',
  '',
  '\x9D',
  '\x0E',
  'D',
  '',
  '',
  '',
  ';',
  '',
  '',
  'J',
  '',
  '',
  '\r',
  'P',
  '`',
  'E',
  '',
  '\x11',
  '',
  '',
  '',
  '\x1C',
  'N',
  '',
  'R',
  '\x1E',
  '',
  '',
  'Q',
  '',
  'j',
  '|',
  '*',
  '\x14',
  's',
  '',
  '',
  '3',
  '',
  '',
  'y',
  'u',
  '',
  '',
  '',
  '',
  '',
  'M',
  '',
  '',
  '',
  '4',
  '\x16',
  '\x03',
  'U',
  '',
  'I',
  'x',
  '',
  '',
  '',
  '',
  'n',
  '1',
  '',
  '8',
  'G',
  'g',
  '',
  '',
  '2',
  '\x8F',
  '\"',
  '',
  '~',
  '',
  't',
  '',
  '',
  '\x19',
  '',
  '\'',
  '\t',
  '',
  '\x13',
  'Z',
  '',
  '',
  '\x02',
  '+',
  '\a',
  '9',
  '',
  '',
  '',
  '',
  'V',
  'z',
  '\x15',
  '\x18',
  '',
  '',
  '\x1D',
  'i',
  '',
  '',
  '',
  '',
  '',
  '',
  'f',
  '',
  'p',
  '',
  '^',
  '\x7F',
  '\0',
  '}',
  '',
  'S',
  'w',
  '\\',
  ':',
  'K',
  '',
  'T',
  '',
  ',',
  '$',
  '',
  '',
  '',
  '',
  '\x04',
  '?',
  'L',
  'm',
  '',
  '',
  '\x17',
  '',
  '',
  '%',
  '\x01',
  '',
  ')',
  '(',
  '',
  '\xFF',
  'F',
  '',
  '\x06',
  '&',
  '',
  '',
  '',
  '',
  '',
  'l',
  '\x90',
  '',
  '0',
  '',
  '',
  '',
  '\n',
  '_',
  '',
  '',
  '',
  '',
  'q',
  ' ',
  '',
  '\x8D',
  'e',
  '',
  '',
  'X',
  '',
  '',
  '',
  'W',
  '7',
  '',
  '{',
  '',
  'O',
  '\x12',
  '\x05',
  '',
  '',
  '[',
  '',
  '\x81',
  '',
  '9',
  '',
  'W',
  '',
  '',
  '\x13',
  '\x8D',
  'B',
  '\'',
  '\x18',
  'U',
  '',
  '\x1E',
  '2',
  'Q',
  '\x14',
  '',
  '',
  '\x10',
  '',
  '#',
  '',
  '1',
  '',
  '',
  '',
  'D',
  'l',
  '',
  '',
  '',
  'o',
  '',
  'L',
  '',
  'g',
  '',
  '<',
  '',
  '',
  ',',
  '',
  '^',
  '',
  'I',
  'v',
  '\x12',
  '',
  '$',
  '\x1C',
  '',
  '',
  'a',
  'F',
  '',
  ']',
  '',
  '\n',
  '\x1D',
  '',
  '',
  '',
  '\t',
  '',
  '',
  '3',
  '',
  '4',
  '',
  'Y',
  '\v',
  '',
  ' ',
  '-',
  '',
  '',
  'y',
  '',
  '',
  '',
  '',
  '\x7F',
  '(',
  'O',
  '',
  '',
  '',
  'Z',
  '',
  '',
  '',
  'p',
  '',
  '%',
  '',
  '',
  '',
  'A',
  'h',
  '',
  '\x0E',
  '~',
  '',
  'e',
  '+',
  '\x04',
  '{',
  '',
  '',
  '\b',
  '',
  '\\',
  '',
  '`',
  'T',
  '',
  '>',
  '',
  'z',
  '\x1B',
  '',
  '',
  '\x90',
  '',
  '7',
  '\x02',
  'b',
  '',
  '}',
  '\xFF',
  '',
  '',
  '',
  '8',
  '',
  '',
  '',
  'P',
  '\x05',
  'n',
  '*',
  '=',
  '\0',
  'x',
  '\x16',
  '',
  '?',
  '',
  '/',
  '',
  'm',
  'k',
  '',
  '|',
  '6',
  '',
  '',
  '',
  '',
  '\a',
  '',
  '',
  '',
  's',
  '',
  '',
  '',
  '\x11',
  '\x1F',
  '',
  '',
  '',
  'd',
  '',
  '',
  '\x19',
  'H',
  '',
  '',
  '',
  '\x0F',
  'i',
  '',
  '\x1A',
  '',
  '',
  '',
  '',
  'u',
  '\x81',
  '',
  '',
  '',
  'M',
  '',
  '',
  '',
  '',
  'q',
  ')',
  'V',
  '',
  '5',
  '',
  '\r',
  ':',
  '',
  'N',
  '',
  '\x01',
  'G',
  '',
  '\f',
  'C',
  'R',
  'c',
  '',
  '\x15',
  'S',
  '[',
  '\x17',
  '',
  '0',
  '\x9D',
  'J',
  '',
  '&',
  '',
  '',
  'j',
  '\x06',
  '@',
  '.',
  '',
  'K',
  '',
  '_',
  '',
  '',
  '',
  '!',
  '',
  'E',
  'r',
  '\"',
  '',
  'f',
  'X',
  '\x8F',
  '\x03',
  'w',
  '',
  '',
  ';',
  't',
  '',
  ' ',
  '\0',
  '',
  ':',
  '\'',
  '',
  '',
  '\x12',
  '',
  '',
  '=',
  ';',
  '2',
  '',
  '',
  'g',
  '\t',
  'c',
  '',
  '\x15',
  '',
  'W',
  '',
  'i',
  '',
  'd',
  '',
  '',
  '',
  '\a',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'D',
  '}',
  'C',
  '',
  '{',
  '\x1A',
  '',
  'j',
  '\x05',
  '',
  '',
  '',
  '',
  'h',
  'f',
  'v',
  '\\',
  '',
  'm',
  'n',
  '',
  'T',
  '\x1B',
  '',
  '',
  '',
  '',
  '3',
  '\r',
  '\x10',
  '\x01',
  '5',
  's',
  '',
  '`',
  '',
  ',',
  '\x17',
  '',
  '',
  't',
  '',
  '\x90',
  '\x18',
  'S',
  '',
  '\x8F',
  'B',
  '',
  '\x8D',
  ']',
  '!',
  'o',
  '+',
  '',
  'y',
  '',
  '\x16',
  '>',
  '',
  '',
  '',
  'R',
  '',
  'M',
  'x',
  '&',
  '',
  'e',
  '7',
  'P',
  '',
  '\x19',
  '',
  'V',
  '-',
  '\"',
  'H',
  '\n',
  '/',
  '9',
  '\x1E',
  '\x03',
  '',
  '',
  '',
  '\x04',
  '*',
  '',
  '',
  'z',
  '',
  '\f',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'q',
  '',
  'Y',
  '',
  'Z',
  '_',
  '\x13',
  '',
  '\x11',
  'O',
  '',
  'N',
  '',
  '~',
  '',
  'p',
  'w',
  '',
  '',
  '<',
  '',
  '',
  '\x7F',
  '',
  '',
  'I',
  '',
  '|',
  'u',
  'K',
  '',
  '\b',
  '1',
  '[',
  '\x9D',
  '',
  '4',
  'L',
  'l',
  'J',
  '\x1F',
  '',
  '',
  'r',
  '',
  '6',
  '',
  '0',
  'Q',
  '',
  'F',
  '',
  '',
  'a',
  '',
  '',
  '@',
  '',
  '$',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\xFF',
  '\v',
  '',
  '',
  '\x81',
  '',
  '',
  '',
  '',
  '',
  '',
  'k',
  '\x02',
  '',
  '',
  '',
  '%',
  '',
  '\x0E',
  '',
  'U',
  'G',
  '\x14',
  '^',
  '',
  '',
  'A',
  '',
  '',
  '\x1D',
  '\x1C',
  '',
  '',
  '.',
  'X',
  '#',
  '',
  '',
  '?',
  '\x0F',
  ')',
  '',
  '\x06',
  'E',
  'b',
  '',
  '',
  '(',
  '8',
  '',
  ' ',
  'T',
  '>',
  '',
  '\x02',
  '',
  '',
  '<',
  'E',
  'k',
  '',
  '',
  'O',
  'V',
  '-',
  'e',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\0',
  '',
  '',
  'o',
  '0',
  '',
  '',
  '',
  '',
  '[',
  '',
  ':',
  '',
  'G',
  '\x1D',
  '(',
  '4',
  '',
  'P',
  '{',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  'M',
  '7',
  'w',
  '\x0E',
  'J',
  '',
  'U',
  'i',
  '',
  '\x17',
  '',
  '',
  '',
  '',
  '',
  '\x0F',
  '6',
  '\'',
  '',
  '',
  '}',
  'v',
  '',
  '\a',
  '',
  '',
  'F',
  '',
  '|',
  '',
  '\x05',
  '',
  '',
  'b',
  'L',
  'X',
  '\x12',
  '',
  '',
  '',
  '^',
  '\x8D',
  '',
  '',
  'r',
  'j',
  '?',
  '',
  '',
  '',
  'n',
  '8',
  '\x1F',
  'A',
  '',
  '/',
  '',
  '.',
  '',
  '\x13',
  '_',
  '2',
  'd',
  '',
  '\x03',
  'W',
  '',
  '',
  '\x1E',
  '',
  '\x19',
  '',
  '',
  '=',
  '',
  '',
  '',
  'u',
  '',
  '~',
  '',
  '',
  '&',
  's',
  '',
  ')',
  'x',
  '',
  '',
  '\x15',
  '',
  '\x16',
  '1',
  'z',
  '\f',
  '',
  'C',
  '\x01',
  '\x9D',
  '\t',
  'p',
  '',
  'S',
  '',
  '',
  '#',
  '\xFF',
  '*',
  '',
  '\x04',
  'Z',
  '',
  '',
  '',
  '',
  '\v',
  'Q',
  ';',
  '3',
  'm',
  '5',
  '',
  '',
  '\x90',
  '@',
  '\x11',
  '!',
  'f',
  '',
  'R',
  '',
  '',
  '\"',
  '$',
  'Y',
  'q',
  'l',
  '',
  '',
  '\x81',
  '+',
  '',
  '',
  '',
  '',
  '\x8F',
  't',
  '',
  'D',
  '',
  'N',
  '',
  '\b',
  '',
  ']',
  '',
  '',
  '',
  '\x7F',
  '',
  '9',
  '',
  '',
  '\x1A',
  'H',
  '',
  '',
  '\x18',
  'B',
  '',
  '',
  '\x14',
  'c',
  '',
  '\r',
  '',
  '',
  'a',
  '',
  '',
  ',',
  '',
  '',
  '',
  '\\',
  'h',
  'y',
  'K',
  '',
  'I',
  '\x1B',
  '%',
  '',
  '\x10',
  'g',
  '',
  '',
  '\x1C',
  '`',
  '\n',
  '',
  '',
  '',
  '&',
  '',
  '-',
  '',
  '',
  'T',
  '',
  '',
  '\x1F',
  '[',
  '\x8F',
  'f',
  '',
  '',
  '_',
  '\"',
  '4',
  '',
  '\x7F',
  '<',
  '',
  '',
  '',
  '',
  'S',
  '',
  '',
  '\x1D',
  '\x13',
  '',
  '',
  'O',
  '',
  '',
  '\x1B',
  'R',
  '',
  'I',
  '',
  '\x0F',
  '',
  'c',
  '',
  ')',
  '',
  '',
  'Q',
  '',
  '',
  'g',
  'U',
  '',
  '',
  'l',
  'C',
  '\x06',
  '',
  'J',
  '7',
  '',
  'q',
  '',
  '\\',
  'x',
  '',
  '',
  '',
  '\x81',
  '$',
  '',
  '\x11',
  'j',
  'F',
  '',
  '}',
  '',
  '\x14',
  '',
  '',
  '~',
  '',
  '',
  '',
  '',
  '',
  'a',
  '\x19',
  '^',
  '',
  'A',
  '',
  '',
  '\x05',
  '/',
  '+',
  ';',
  '',
  '',
  'r',
  '{',
  '',
  '',
  'N',
  'Y',
  '',
  'o',
  '',
  '',
  '',
  'X',
  '`',
  '',
  't',
  '',
  '',
  '5',
  '\x90',
  '',
  '',
  '',
  '',
  '',
  '\t',
  'm',
  '',
  'G',
  'h',
  '\x12',
  '',
  'V',
  'b',
  ':',
  '',
  'P',
  '\x1C',
  '',
  '',
  '\x01',
  'D',
  '|',
  '#',
  'Z',
  '',
  '\x16',
  '\x1A',
  '',
  'B',
  '',
  'n',
  '',
  ' ',
  '',
  's',
  '',
  '',
  'W',
  '',
  '9',
  '',
  '',
  '%',
  '',
  '',
  '\v',
  '',
  '',
  '\b',
  '',
  ']',
  '',
  '',
  'L',
  '\x03',
  '',
  '\x0E',
  '',
  '',
  '6',
  '1',
  '0',
  '@',
  '\x10',
  '\n',
  'w',
  '\0',
  '',
  '',
  '',
  '.',
  '',
  'i',
  '',
  'K',
  '',
  '',
  '',
  '8',
  '',
  '',
  'd',
  'k',
  '\x8D',
  ',',
  '\x1E',
  '',
  '',
  '',
  '',
  '!',
  '',
  '\r',
  '\x18',
  '',
  '\x04',
  '\'',
  '',
  '',
  '2',
  'p',
  '',
  '\f',
  'M',
  '\a',
  'z',
  '',
  '>',
  '',
  'u',
  '',
  'H',
  '\x15',
  'v',
  '',
  '',
  '(',
  '',
  '',
  '\x9D',
  '\xFF',
  '',
  '3',
  'e',
  'E',
  '\x17',
  '*',
  '',
  '\x02',
  '=',
  '',
  '',
  '',
  '?',
  '',
  'y',
  '',
  'y',
  '',
  'f',
  '',
  '\x8D',
  '',
  '',
  'p',
  '',
  '6',
  '`',
  'a',
  '',
  'j',
  '',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '',
  '\r',
  'd',
  '',
  '',
  '\x05',
  '',
  '\x0E',
  's',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  '\'',
  '2',
  '\x1B',
  '',
  '@',
  '',
  '\x90',
  '',
  '',
  'r',
  'T',
  '',
  'L',
  '',
  '7',
  '\x04',
  '\x16',
  ';',
  '',
  '',
  '',
  'J',
  '',
  'Z',
  '',
  'q',
  '',
  'O',
  'P',
  'l',
  'b',
  '\x10',
  '\n',
  '\xFF',
  '',
  '.',
  '_',
  '',
  'm',
  '',
  '',
  '',
  '0',
  '\x0F',
  '',
  'X',
  '',
  't',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x15',
  'c',
  '>',
  '',
  '!',
  '',
  'g',
  '\x11',
  '\x12',
  'B',
  'u',
  'C',
  '',
  '',
  '',
  '',
  '',
  '\"',
  '[',
  '',
  'K',
  '1',
  '',
  '',
  ':',
  '',
  '\x8F',
  '*',
  'V',
  '|',
  'x',
  '',
  'e',
  '',
  '',
  'E',
  '#',
  '\v',
  '',
  '\x9D',
  'R',
  '',
  '\x17',
  '\x13',
  'n',
  ',',
  '\x01',
  '\a',
  '',
  '\x18',
  'v',
  'H',
  '\\',
  '',
  '\x1A',
  '}',
  '',
  '',
  '{',
  '',
  '$',
  'Q',
  ')',
  'F',
  '4',
  'I',
  '-',
  '',
  ']',
  '',
  '',
  '',
  '',
  'U',
  '',
  '',
  'W',
  'S',
  '',
  '',
  '%',
  '',
  '',
  '\x03',
  '\x1F',
  '',
  '',
  'G',
  '\x1E',
  '',
  'k',
  '',
  '',
  '',
  '',
  '',
  '&',
  '',
  '',
  '3',
  'w',
  '=',
  '',
  'z',
  '\x14',
  'i',
  '8',
  'o',
  '/',
  '(',
  '',
  '\t',
  '',
  'N',
  'h',
  '5',
  '',
  '',
  '',
  '',
  '9',
  '',
  'M',
  '\f',
  '',
  '',
  '',
  '?',
  '',
  '\x81',
  '',
  '',
  '\x02',
  'Y',
  '^',
  '',
  '',
  '',
  '\x1C',
  '',
  '\x19',
  '',
  '+',
  'A',
  '',
  '\0',
  'D',
  '~',
  '',
  ' ',
  '',
  '',
  '',
  '',
  '',
  '<',
  '',
  '\b',
  '',
  '',
  '',
  '\x1D',
  '',
  'r',
  '',
  'Q',
  '\x1C',
  'e',
  '=',
  '',
  'j',
  '',
  'u',
  '',
  '',
  'w',
  '',
  '6',
  '(',
  '',
  '',
  '\x0E',
  'b',
  '',
  '>',
  '',
  '\x18',
  'z',
  '\x14',
  '7',
  'g',
  '',
  '',
  '\x10',
  '8',
  '\x90',
  '',
  '\n',
  '',
  '#',
  '',
  '',
  '',
  '\x9D',
  '',
  'U',
  '.',
  '\'',
  '&',
  '<',
  '/',
  'c',
  '',
  '',
  '',
  '',
  'q',
  ')',
  'v',
  '',
  '',
  '\x8F',
  '',
  'T',
  '\x81',
  '',
  '',
  '\x17',
  '\x7F',
  '',
  '',
  '',
  '',
  'P',
  '',
  '',
  '*',
  '',
  '\t',
  '\xFF',
  '',
  '',
  'Z',
  'x',
  '',
  '\x03',
  '',
  '',
  '',
  '',
  'p',
  'B',
  '',
  '\x1D',
  '',
  '',
  '%',
  '',
  '',
  '|',
  '',
  '',
  '',
  'E',
  '',
  '',
  'm',
  '@',
  '',
  '',
  '',
  'K',
  '',
  '',
  '',
  '',
  'N',
  ',',
  '',
  'S',
  '',
  '',
  '',
  '`',
  '',
  '',
  '!',
  '\x01',
  '',
  '',
  '9',
  'i',
  '',
  '',
  '',
  '',
  '',
  ']',
  '^',
  'C',
  '',
  '',
  '\x0F',
  '',
  'F',
  '',
  '',
  '',
  '',
  ':',
  '',
  '\x04',
  '\v',
  '',
  'G',
  '+',
  '',
  '\"',
  '\b',
  ';',
  '',
  '',
  '',
  'Y',
  '\x02',
  'M',
  'W',
  '\x1B',
  '',
  '',
  'k',
  '~',
  '4',
  'I',
  '}',
  '',
  'n',
  '_',
  '-',
  '',
  '?',
  '\r',
  '\x8D',
  '\x16',
  '',
  '',
  'J',
  '',
  'V',
  '\x05',
  '',
  '[',
  '\x15',
  '\f',
  '{',
  '\x19',
  '\x1E',
  '\x11',
  '',
  '',
  '',
  '1',
  '\0',
  '',
  '',
  '',
  '\x1F',
  '',
  'a',
  '',
  '\a',
  'L',
  'A',
  '',
  '',
  '',
  '\\',
  '',
  'h',
  '\x12',
  '',
  '5',
  '',
  '',
  ' ',
  '',
  '',
  'l',
  'D',
  '\x1A',
  'O',
  '2',
  '3',
  't',
  'R',
  'H',
  'o',
  'f',
  '',
  '',
  '',
  '',
  '',
  '',
  'y',
  '$',
  '',
  '\x13',
  '',
  '',
  '',
  's',
  'X',
  'd',
  '',
  '',
  '0',
  '\x06',
  '',
  ':',
  '(',
  '\x8D',
  '\x06',
  '\x12',
  '7',
  '',
  '',
  'w',
  '',
  '',
  '',
  '\x17',
  '',
  '\x05',
  '&',
  '',
  '[',
  '\x10',
  '%',
  '',
  '#',
  'X',
  '',
  'k',
  '',
  'g',
  'o',
  '\x1C',
  '',
  '>',
  '\x1E',
  '',
  '\"',
  'e',
  '',
  '',
  '\x15',
  '',
  '',
  '',
  'W',
  '',
  'T',
  'h',
  '\x18',
  '',
  '\x8F',
  '{',
  'y',
  '',
  'b',
  's',
  'J',
  'U',
  'r',
  '\x90',
  'C',
  '',
  '',
  '\x19',
  'j',
  '',
  '\\',
  '',
  'M',
  '\x01',
  'B',
  '',
  '',
  '\x16',
  '\0',
  '\x02',
  '@',
  '',
  '',
  '<',
  '3',
  '',
  '',
  'H',
  'O',
  '5',
  '',
  '',
  '\t',
  '~',
  '',
  '',
  '',
  'd',
  '\xFF',
  '',
  '',
  '',
  '',
  'Y',
  '\x11',
  '',
  '\x03',
  '_',
  '',
  'P',
  '',
  '+',
  '',
  '',
  '\x0F',
  'S',
  '',
  '',
  '',
  'v',
  '',
  'V',
  '\f',
  '',
  '',
  'p',
  '',
  '',
  'q',
  'A',
  '',
  '',
  'F',
  ']',
  '',
  '',
  '\x04',
  'l',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1A',
  'L',
  '',
  '',
  '',
  '',
  '',
  'x',
  'Q',
  '\'',
  '',
  '',
  'D',
  '',
  '!',
  '',
  '9',
  '',
  '',
  '',
  '6',
  'i',
  '',
  '\x13',
  '8',
  '',
  'I',
  '',
  'm',
  'c',
  '',
  '',
  '',
  'R',
  '/',
  '',
  '}',
  '\n',
  '^',
  '4',
  '',
  'K',
  'a',
  'f',
  '',
  '',
  '`',
  '',
  '\x0E',
  '',
  '',
  '',
  '0',
  '',
  '',
  '1',
  '',
  '\r',
  'u',
  'G',
  '',
  '',
  '\x1D',
  '',
  '',
  '\b',
  '\x81',
  '\v',
  'n',
  '?',
  't',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '.',
  ' ',
  'Z',
  '\x7F',
  '',
  '|',
  'z',
  '',
  '\x1F',
  '\x9D',
  'E',
  '',
  ';',
  '\x14',
  '',
  '',
  ')',
  '',
  '',
  '\x1B',
  '-',
  '=',
  '',
  '',
  '$',
  '',
  '',
  'N',
  '2',
  '',
  '*',
  ',',
  '',
  '',
  '',
  '',
  '\a',
  '',
  '',
  'G',
  'Y',
  'P',
  '',
  '-',
  'Z',
  'y',
  '',
  'l',
  '',
  '',
  '',
  '\x16',
  '',
  '',
  '',
  'N',
  '',
  'b',
  '\t',
  '\x0F',
  '\x81',
  'L',
  'u',
  '\x8D',
  '\xFF',
  '(',
  '\x1B',
  '*',
  '',
  '',
  '',
  '',
  '@',
  'B',
  '',
  '\x1F',
  '\b',
  '',
  '\x18',
  'O',
  '',
  '\x1C',
  '\x17',
  '',
  '\x04',
  'g',
  '',
  '',
  'p',
  '',
  '',
  '',
  '',
  '',
  '',
  '1',
  's',
  '',
  '',
  'c',
  'D',
  '\x10',
  '/',
  '',
  '\x15',
  '.',
  '\x06',
  '\x01',
  '',
  '',
  '',
  '',
  '',
  '2',
  'I',
  'k',
  '3',
  '\x7F',
  '\"',
  'V',
  'Q',
  '',
  'r',
  '',
  '\x9D',
  '',
  'v',
  '',
  '',
  '+',
  'm',
  '',
  '\x0E',
  '',
  '%',
  'i',
  '',
  '8',
  '',
  '^',
  '',
  '',
  '$',
  '',
  '',
  '\f',
  ']',
  '?',
  '\x05',
  '',
  'j',
  '\'',
  '',
  '',
  '',
  'o',
  '',
  'd',
  '',
  'n',
  '=',
  '\x1A',
  '',
  '#',
  '\r',
  '',
  '',
  'W',
  '\x90',
  '',
  '!',
  '',
  '',
  'e',
  'A',
  '',
  'R',
  '0',
  '\x12',
  't',
  'h',
  '',
  '',
  '',
  '',
  '\n',
  '',
  '',
  '',
  '\v',
  '',
  '',
  '\x02',
  '4',
  '',
  '',
  '',
  '',
  ',',
  'q',
  '',
  '7',
  '',
  '',
  '>',
  '',
  '',
  '',
  '',
  '',
  '\x8F',
  '',
  '',
  '_',
  '}',
  '',
  'x',
  '',
  '\x11',
  '',
  '',
  '',
  '',
  'X',
  '',
  '5',
  'M',
  '',
  '',
  '\x1E',
  'E',
  '',
  '{',
  '\x13',
  '9',
  '<',
  '',
  '',
  '',
  ';',
  '',
  '[',
  '\x14',
  '\\',
  '',
  'T',
  ' ',
  'K',
  '\x03',
  '\0',
  '',
  '\a',
  '',
  '',
  '&',
  '',
  '',
  '',
  '',
  'C',
  '~',
  '',
  '',
  'a',
  ':',
  '',
  '',
  '',
  '\x19',
  'F',
  'J',
  '|',
  '`',
  'f',
  '',
  ')',
  '',
  'H',
  '',
  '',
  'z',
  '',
  'S',
  '',
  '',
  '',
  '',
  '\x1D',
  'w',
  '',
  '',
  'U',
  '',
  '',
  '6',
  '.',
  'x',
  'v',
  '',
  '',
  '',
  '',
  '?',
  '\x1F',
  '\a',
  '(',
  '',
  'J',
  '',
  '\f',
  '\x90',
  'z',
  '',
  'h',
  'Y',
  '',
  '',
  '',
  'K',
  '\\',
  '+',
  ')',
  '',
  '',
  '',
  '',
  '5',
  '',
  '',
  '\x13',
  'e',
  '&',
  '',
  '9',
  '\x04',
  '\x03',
  '!',
  ',',
  '',
  'c',
  '%',
  '',
  '\x16',
  '=',
  '',
  '~',
  '',
  'g',
  'Q',
  '\x7F',
  '',
  '',
  '<',
  '\x18',
  '',
  'y',
  '',
  'o',
  't',
  'W',
  'G',
  '_',
  'F',
  '',
  '',
  'I',
  'T',
  '\r',
  'B',
  '1',
  '',
  'a',
  '',
  '',
  '\x1C',
  '\x14',
  '',
  '\x0E',
  '4',
  '\n',
  '',
  '',
  '',
  'm',
  '7',
  '\x1B',
  'U',
  '',
  '',
  '',
  '',
  '',
  ';',
  'Z',
  '',
  'j',
  '|',
  '',
  'S',
  '/',
  '\x1A',
  ']',
  '\x81',
  '',
  '',
  '\x12',
  'L',
  'w',
  '#',
  '',
  'X',
  'C',
  '',
  '',
  'H',
  '',
  '',
  '2',
  '',
  '*',
  '',
  '',
  'R',
  '',
  '',
  'n',
  '3',
  '\t',
  '',
  '\x10',
  '',
  '',
  '\x05',
  'b',
  'N',
  'l',
  '',
  '',
  '\x01',
  '',
  '8',
  '\0',
  '',
  '',
  '',
  ':',
  '',
  '',
  '',
  'q',
  '',
  '\x9D',
  '',
  '\x8F',
  '\x11',
  '',
  '',
  'r',
  '',
  '',
  '',
  '',
  '',
  '`',
  '[',
  '',
  '\x02',
  'p',
  '',
  '$',
  'f',
  'P',
  '',
  '',
  'u',
  '',
  'd',
  '',
  '-',
  '\x0F',
  '',
  '',
  '',
  '',
  '>',
  'M',
  '}',
  ' ',
  '',
  '',
  'k',
  's',
  '',
  '',
  '',
  'A',
  '',
  '',
  '6',
  '\'',
  '0',
  '',
  '',
  '',
  '\x17',
  '',
  '',
  '\"',
  '',
  '',
  'i',
  '\x8D',
  '',
  '\v',
  '',
  '\x1D',
  '',
  '',
  '',
  '',
  '',
  'E',
  '\xFF',
  '',
  'D',
  '',
  '',
  '{',
  '\x19',
  '',
  '',
  'V',
  '',
  '',
  '@',
  '\b',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x1E',
  '',
  'O',
  '^',
  '\x15',
  '',
  '\x06',
  '',
  '',
  '',
  '',
  ',',
  '',
  '',
  ']',
  '',
  '\x04',
  '',
  '`',
  '\t',
  'v',
  '#',
  '',
  '\x13',
  '',
  ' ',
  '',
  'w',
  '0',
  '',
  '\x05',
  '',
  '\x11',
  'g',
  '\x10',
  '\x06',
  '',
  'Y',
  '',
  'j',
  '[',
  'F',
  '',
  '',
  '',
  '=',
  '\x9D',
  '%',
  '\a',
  '\n',
  'X',
  ';',
  '\x12',
  '.',
  'N',
  '@',
  '',
  '',
  '&',
  'n',
  '\'',
  'u',
  'B',
  'G',
  '\x7F',
  'p',
  '~',
  '',
  '',
  ')',
  '',
  '',
  'Q',
  '',
  '',
  '',
  '',
  '',
  'q',
  '',
  'o',
  '*',
  '',
  '',
  'x',
  '?',
  'D',
  '',
  '\v',
  'I',
  '\x1B',
  '',
  '',
  '\x15',
  '',
  '>',
  'M',
  '',
  '+',
  '',
  '',
  '\x8F',
  '',
  '\x1D',
  'P',
  '\x90',
  '',
  '9',
  '',
  't',
  '',
  '$',
  '',
  '1',
  '\x14',
  '',
  '',
  '(',
  '',
  '',
  '\x1C',
  '\0',
  'i',
  '',
  '',
  '',
  'H',
  '\x18',
  '',
  '',
  '',
  '',
  'a',
  '',
  '',
  '',
  '\x8D',
  '',
  '',
  '',
  '\x1A',
  '',
  'Z',
  '',
  'K',
  '',
  '\x17',
  '',
  '',
  '\x16',
  '\x19',
  ':',
  '',
  '\r',
  '',
  '',
  '8',
  '',
  'O',
  '',
  '',
  'S',
  'k',
  '\x81',
  '',
  '}',
  '',
  '',
  '',
  'V',
  '',
  'c',
  '',
  '2',
  '\x1E',
  '',
  'C',
  '\x02',
  '',
  'U',
  '',
  '',
  '',
  '',
  '\x03',
  '',
  '',
  '\x0F',
  '',
  '<',
  '3',
  '\"',
  '',
  '|',
  'J',
  '_',
  '',
  'm',
  '',
  '\b',
  'T',
  '',
  '',
  '/',
  '',
  '\xFF',
  '',
  's',
  'l',
  '',
  '',
  '',
  '',
  '\x1F',
  '\\',
  'W',
  '',
  'A',
  '',
  '',
  '',
  'R',
  'r',
  '',
  '',
  '',
  '',
  '',
  '',
  '^',
  'b',
  '',
  '',
  'e',
  '',
  '',
  '!',
  'z',
  '',
  'E',
  '{',
  '',
  '',
  'y',
  '',
  '',
  '',
  '4',
  '',
  '\x01',
  '',
  '\f',
  'd',
  '5',
  '',
  '',
  '\x0E',
  '',
  'h',
  '6',
  '-',
  'f',
  '7',
  'L',
  '',
  'B',
  '',
  'k',
  's',
  '',
  '',
  '',
  '',
  '\t',
  '',
  '',
  'd',
  '7',
  '\x01',
  '+',
  '',
  '',
  '',
  ']',
  '',
  '\n',
  '',
  '',
  'b',
  '',
  'u',
  '',
  '',
  '',
  '|',
  '',
  'Y',
  'E',
  '',
  '',
  '\x7F',
  '\0',
  '',
  '',
  'W',
  '\x90',
  '',
  '\x16',
  '',
  'U',
  '',
  't',
  '',
  '',
  '',
  '^',
  '',
  'z',
  'O',
  '',
  '6',
  'g',
  '',
  ' ',
  'r',
  '',
  '',
  'p',
  '~',
  '',
  '3',
  '',
  '',
  'T',
  '#',
  '\x8F',
  'Q',
  'm',
  'e',
  '',
  '',
  '',
  '\x9D',
  '',
  '',
  '',
  '',
  '',
  '',
  'n',
  '\x1A',
  '',
  '\x19',
  '',
  'M',
  '%',
  '',
  '\r',
  'w',
  '',
  '',
  '0',
  '',
  '',
  '\f',
  '',
  '\b',
  '>',
  ':',
  '',
  '\a',
  '/',
  '',
  'X',
  'x',
  '',
  '{',
  'C',
  '1',
  '',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  '',
  '?',
  '',
  'L',
  '\x14',
  '',
  '',
  '',
  '\x1F',
  '',
  'J',
  '!',
  'Z',
  '',
  '',
  '',
  '',
  'c',
  'V',
  'y',
  'o',
  '\x1D',
  '\x15',
  '',
  '',
  '\v',
  '',
  '',
  '=',
  'S',
  '',
  '\x1E',
  'q',
  '5',
  '9',
  '',
  '',
  '',
  '\x1C',
  '&',
  '',
  '(',
  'G',
  'N',
  '\x18',
  '\"',
  '\x81',
  ';',
  '$',
  '',
  '',
  '',
  '',
  'P',
  '',
  ',',
  '',
  '',
  '',
  '',
  'j',
  '.',
  'I',
  '',
  '',
  'F',
  '',
  '\x0F',
  '\\',
  '\xFF',
  '',
  '\x13',
  'f',
  '2',
  '',
  '',
  '\x06',
  '',
  '\x0E',
  '',
  '\x05',
  '[',
  '\x10',
  '4',
  'h',
  '@',
  '_',
  '',
  '\'',
  '',
  '',
  '`',
  '\x11',
  'H',
  '-',
  '',
  '',
  '',
  '',
  '<',
  '\x17',
  '',
  '',
  'A',
  '',
  '',
  '',
  '',
  'l',
  '',
  '\x02',
  'v',
  '',
  '',
  '',
  '8',
  '',
  '\x03',
  '\x8D',
  '',
  '\x1B',
  '',
  'i',
  '',
  '*',
  ')',
  'K',
  'a',
  '',
  '\x04',
  'R',
  'D',
  '',
  '}',
  '',
  '',
  '',
  'P',
  '\x13',
  '',
  '',
  '',
  '',
  '',
  '}',
  's',
  '_',
  '',
  'k',
  '=',
  '',
  '',
  '',
  '\x04',
  '*',
  '@',
  '\x19',
  '0',
  '5',
  '',
  '\a',
  'n',
  '',
  '>',
  'u',
  '\x9D',
  '',
  '$',
  '',
  '',
  '',
  '',
  '',
  ';',
  '\x02',
  '!',
  '',
  '',
  'd',
  '(',
  '6',
  '',
  '',
  'r',
  'Q',
  '2',
  '\x01',
  'p',
  '',
  '',
  '',
  ')',
  '7',
  '',
  '\x8D',
  '\x0F',
  '{',
  '',
  'V',
  '',
  '',
  '\x1B',
  '\f',
  'E',
  '',
  '',
  '',
  '\x90',
  '',
  '\x16',
  '\x1D',
  '[',
  '',
  '',
  'm',
  'C',
  '\x15',
  '\x11',
  'v',
  '',
  '\v',
  '',
  '',
  '',
  '\x7F',
  '',
  '',
  'M',
  'w',
  '',
  '',
  '+',
  '',
  '',
  'U',
  '',
  '',
  '',
  '|',
  'O',
  '',
  'f',
  '\r',
  'S',
  'l',
  '3',
  'X',
  '',
  '\0',
  'x',
  '',
  '',
  '\x03',
  '\x81',
  '\\',
  '',
  '\n',
  '',
  '\x12',
  'J',
  '',
  '',
  '',
  '4',
  '',
  '\x06',
  '',
  ':',
  '',
  '.',
  '',
  '',
  '',
  '9',
  '',
  '',
  'h',
  '',
  '\"',
  'R',
  '',
  'z',
  '\t',
  ' ',
  '1',
  '\x1C',
  'L',
  'j',
  '',
  '~',
  '<',
  'b',
  '',
  'q',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '/',
  '',
  '',
  '',
  '\x1A',
  '',
  'y',
  '',
  '',
  'A',
  '\x1E',
  '&',
  '%',
  '',
  'K',
  'W',
  'i',
  '',
  ',',
  '',
  '\x0E',
  '',
  '\xFF',
  '',
  '\x1F',
  '',
  '',
  '\x18',
  'a',
  '',
  '',
  '',
  'G',
  'D',
  '\x8F',
  '',
  ']',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'F',
  '',
  '-',
  '',
  'N',
  '',
  '^',
  'c',
  '\x17',
  'B',
  'g',
  '\x10',
  'Z',
  '\'',
  '',
  '',
  '',
  '\x14',
  '',
  't',
  'T',
  '\x05',
  '',
  '?',
  '\b',
  'H',
  '',
  'e',
  '',
  '',
  'Y',
  '',
  '',
  '8',
  'o',
  '',
  '',
  'I',
  '#',
  '',
  '',
  '`',
  '',
  '(',
  '\x05',
  '\f',
  '\x11',
  '',
  '\x1B',
  '',
  '',
  '',
  '',
  'q',
  ')',
  '',
  '',
  '',
  '',
  '',
  '=',
  'i',
  '\x18',
  '',
  '',
  '',
  '',
  't',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  '\x8D',
  '',
  '',
  '',
  '',
  '',
  '\x02',
  'f',
  '*',
  '',
  '',
  '',
  'Y',
  '!',
  '',
  '\x1A',
  'y',
  '',
  'k',
  '',
  '',
  'j',
  '\x01',
  '\x9D',
  's',
  '',
  '\a',
  '\n',
  'L',
  '',
  '',
  '[',
  '',
  '',
  ';',
  '\xFF',
  'e',
  '\x90',
  'A',
  '',
  '\x81',
  '8',
  '',
  '+',
  '`',
  '>',
  '',
  '',
  'b',
  ' ',
  '\x1C',
  'E',
  '',
  '',
  '',
  '$',
  'B',
  '',
  '',
  '',
  '',
  '',
  '',
  '-',
  '',
  '\\',
  '7',
  '\x06',
  'M',
  ':',
  '/',
  '',
  '',
  '\x1D',
  '',
  '\v',
  'l',
  '',
  '',
  '',
  'C',
  '',
  '',
  '\x17',
  '',
  '',
  '%',
  '',
  '',
  'p',
  '',
  '\x04',
  'h',
  '3',
  '\"',
  '9',
  'T',
  '?',
  '',
  '<',
  '\x14',
  '@',
  'x',
  'a',
  '\x16',
  '',
  '6',
  '',
  '\x15',
  '0',
  '',
  '|',
  '',
  '',
  '',
  'N',
  '',
  '',
  '#',
  '',
  '',
  ']',
  '',
  '',
  '_',
  '',
  '',
  'K',
  '',
  '',
  'c',
  'g',
  '',
  '',
  '\t',
  'U',
  '',
  'd',
  '\x12',
  '',
  '\x13',
  'F',
  'Q',
  '',
  '',
  '',
  '',
  '',
  '',
  '}',
  '~',
  '',
  'I',
  '',
  'H',
  ',',
  '^',
  '',
  '',
  'z',
  '',
  '\x1F',
  '',
  'w',
  '',
  '\x03',
  '{',
  '\x10',
  'u',
  '',
  'W',
  'G',
  'v',
  '1',
  'D',
  '',
  'R',
  '\x7F',
  '',
  '\b',
  '',
  'P',
  'S',
  '',
  '',
  '2',
  '\0',
  '',
  '',
  '',
  '\x19',
  '5',
  '\x1E',
  'O',
  '\x0F',
  '',
  'o',
  '',
  'V',
  '\x8F',
  '',
  'm',
  '&',
  'X',
  '',
  '',
  '',
  '',
  'n',
  '',
  '',
  '',
  '\'',
  '4',
  '',
  '',
  'Z',
  '',
  '',
  '',
  '.',
  'J',
  'r',
  '\r',
  'R',
  '',
  '\x17',
  '\x1F',
  '\x10',
  '\x11',
  '',
  '\v',
  '',
  '_',
  '3',
  '',
  '\xFF',
  '\x18',
  '',
  '',
  '',
  '|',
  '',
  '^',
  '',
  '',
  'z',
  't',
  '',
  '',
  '=',
  '',
  '6',
  '*',
  'Y',
  '',
  '<',
  'f',
  'd',
  '',
  'l',
  'y',
  ',',
  '',
  '',
  '',
  '',
  '\x13',
  '\x06',
  '\x1D',
  '',
  '',
  'e',
  '',
  'N',
  '\x1C',
  '>',
  '',
  '',
  '@',
  'Q',
  's',
  '',
  '',
  '',
  'b',
  'a',
  '\x8F',
  '',
  '',
  '#',
  '',
  '\x1A',
  '',
  '(',
  'J',
  '2',
  '1',
  '\x14',
  '',
  '0',
  '',
  '\0',
  'h',
  '',
  '',
  '\b',
  '-',
  'E',
  '',
  '\'',
  'x',
  '',
  '',
  '\x03',
  ':',
  '!',
  '',
  '',
  '',
  '\\',
  '',
  '',
  '',
  'g',
  '',
  '4',
  '',
  '\r',
  '',
  '',
  '\"',
  '',
  '',
  '\x05',
  'q',
  '\x16',
  '\x90',
  'u',
  '',
  'B',
  '\x01',
  '\n',
  'I',
  'S',
  '',
  'A',
  '$',
  '',
  '\x81',
  'v',
  '',
  '\t',
  '',
  '',
  'M',
  '',
  ']',
  'X',
  '',
  '',
  'T',
  '',
  '',
  '',
  '',
  '/',
  'V',
  'L',
  '',
  '',
  '',
  'W',
  '',
  '?',
  '%',
  'j',
  '\x9D',
  '',
  '}',
  '',
  'm',
  'n',
  ' ',
  '',
  '\x0E',
  '&',
  '',
  'F',
  '',
  '',
  '',
  'C',
  '',
  '',
  ';',
  '',
  '\x19',
  '',
  '',
  '',
  '',
  'r',
  'P',
  '`',
  '7',
  '',
  '',
  'K',
  '\x1B',
  '',
  '',
  '{',
  '.',
  '\a',
  '',
  'D',
  '',
  '',
  '',
  '8',
  '[',
  '\x0F',
  '5',
  '\x02',
  '',
  '',
  '',
  '+',
  '\x7F',
  'O',
  '',
  '\x15',
  '',
  '',
  '',
  '',
  '',
  'w',
  '',
  'G',
  '',
  '',
  'Z',
  'p',
  '\f',
  '\x1E',
  '',
  'k',
  '',
  '',
  '',
  '',
  '9',
  '',
  'U',
  '',
  'c',
  'H',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x12',
  '',
  '',
  '',
  ')',
  'o',
  '',
  '\x04',
  '',
  '',
  'i',
  '',
  '\x8D',
  '~',
  '\x1A',
  ',',
  '',
  '',
  '',
  '',
  '',
  '(',
  'l',
  '',
  '',
  'o',
  'y',
  '7',
  '',
  '\t',
  ' ',
  '*',
  '',
  '',
  '',
  '',
  '0',
  '',
  'Q',
  '\x8F',
  '',
  '',
  '4',
  '\x14',
  '\x1F',
  '',
  '',
  'e',
  '',
  '\x10',
  '',
  '\v',
  '.',
  '>',
  '3',
  '',
  '',
  '',
  '',
  '2',
  '',
  '',
  '\0',
  'O',
  '',
  '',
  '\x15',
  '^',
  '',
  '-',
  '',
  '',
  'K',
  '',
  '',
  '',
  '',
  '5',
  '}',
  '\x1E',
  '\x81',
  'x',
  'b',
  '',
  '',
  '',
  '',
  '\\',
  '',
  'a',
  '',
  '',
  '\"',
  '\x02',
  '[',
  'V',
  '',
  '|',
  '',
  '8',
  '',
  '1',
  'W',
  '',
  '\x7F',
  '<',
  '_',
  '',
  '\x01',
  'g',
  'd',
  'f',
  '/',
  '',
  '',
  'k',
  '',
  '',
  '',
  '',
  '',
  '',
  'M',
  'Z',
  'L',
  'i',
  '\x1C',
  '',
  'm',
  '',
  '&',
  '\x11',
  'n',
  '',
  'D',
  '\x03',
  '',
  'c',
  '',
  '',
  '',
  '@',
  '\x1B',
  '',
  '%',
  '{',
  '',
  '',
  '',
  'T',
  '',
  '',
  '',
  '6',
  'P',
  '',
  '',
  '',
  '',
  '',
  'G',
  '',
  '\x16',
  'S',
  '',
  '',
  '',
  '',
  '\x18',
  '',
  '#',
  '=',
  '\x13',
  '\f',
  '',
  '',
  '$',
  '',
  '',
  'H',
  'w',
  '',
  'z',
  '',
  ']',
  'A',
  '',
  '',
  'E',
  '9',
  '',
  '\n',
  '',
  't',
  '',
  'r',
  '',
  '',
  'C',
  '',
  'N',
  '\x04',
  'X',
  '',
  '\x12',
  '\x05',
  '\x17',
  '`',
  'j',
  ':',
  '',
  '',
  '',
  '\x19',
  '',
  '',
  'R',
  '\x90',
  'h',
  'v',
  '!',
  '\x0F',
  'I',
  'U',
  '',
  '',
  '',
  '\x1D',
  '',
  '',
  '',
  '~',
  'F',
  '',
  '',
  '\b',
  '',
  '\x0E',
  '',
  '\xFF',
  '',
  '',
  '',
  '+',
  '\r',
  'J',
  'B',
  '',
  '\x9D',
  'q',
  '',
  's',
  '',
  '',
  '',
  '',
  '',
  '?',
  '\x8D',
  '',
  'u',
  '\'',
  '\x06',
  ';',
  '\a',
  ')',
  '',
  '',
  'Y',
  'p',
  '\t',
  '',
  '',
  '\x11',
  '',
  '\n',
  '',
  '',
  '\r',
  '\x0E',
  '\x0F',
  '',
  '',
  'j',
  '2',
  'R',
  '',
  '',
  '',
  'd',
  '\x15',
  '',
  'F',
  '',
  '',
  'E',
  ' ',
  '',
  'w',
  'q',
  '',
  '',
  '0',
  '',
  '<',
  '[',
  '',
  'K',
  '\x12',
  '',
  'y',
  '\x1D',
  't',
  'W',
  '',
  '',
  '',
  '\x10',
  '6',
  ',',
  '|',
  '4',
  '%',
  's',
  '',
  '',
  '',
  '',
  '\0',
  '^',
  '@',
  '\x1A',
  '',
  '',
  '3',
  'g',
  '',
  '',
  '\x90',
  '',
  '',
  '',
  'm',
  '',
  'L',
  '+',
  '',
  '*',
  '\x7F',
  'V',
  'z',
  '',
  '~',
  'p',
  'G',
  '',
  '',
  'Q',
  '\a',
  '',
  '',
  'n',
  '',
  '',
  '',
  'f',
  '',
  '',
  '',
  '\x18',
  '\x13',
  'a',
  'h',
  '',
  '\"',
  '\\',
  '',
  '',
  '\x8D',
  'N',
  '',
  '\x1F',
  '\x01',
  ')',
  'r',
  '',
  '',
  '\x14',
  '',
  '',
  '',
  '#',
  '',
  '\x05',
  '',
  '',
  '',
  '',
  '',
  '-',
  '_',
  '/',
  '>',
  '?',
  '',
  '',
  '',
  '\x17',
  '',
  '',
  '\x02',
  '',
  'b',
  'O',
  '',
  'M',
  '\x19',
  '',
  'I',
  '',
  '\x9D',
  'D',
  '7',
  '',
  '',
  '',
  '!',
  'u',
  '=',
  '',
  '',
  '',
  '',
  'J',
  '$',
  '',
  '8',
  '',
  'S',
  'c',
  'x',
  '\x8F',
  '',
  '',
  '&',
  '\x06',
  ']',
  '{',
  'T',
  '',
  '',
  '',
  '',
  '',
  'k',
  '',
  '',
  'B',
  '\x1E',
  '',
  'Y',
  'l',
  '',
  'e',
  '',
  '9',
  '',
  '',
  '',
  '',
  'H',
  '',
  '',
  '\b',
  '\x03',
  '1',
  '\x81',
  '',
  'v',
  '}',
  '',
  '.',
  '',
  'o',
  '\'',
  '',
  ':',
  '',
  '',
  'Z',
  'P',
  '\x16',
  '\v',
  '\x1C',
  '',
  '',
  '',
  '5',
  '\x1B',
  '',
  '',
  '',
  '',
  'U',
  '',
  'i',
  '',
  '',
  '\xFF',
  '',
  '',
  '',
  '',
  'A',
  '',
  '',
  '',
  'C',
  '',
  ';',
  'X',
  '\f',
  '',
  '\x04',
  '`',
  '(',
  '',
  '',
  '',
  '|',
  '?',
  '!',
  'l',
  'e',
  '',
  'o',
  '4',
  '8',
  '#',
  '',
  '\x8D',
  '\x1F',
  '',
  '',
  'S',
  '\x12',
  '',
  '\x11',
  '\x03',
  'Z',
  '\0',
  '\x7F',
  'Y',
  '',
  '\a',
  'I',
  '',
  '3',
  '',
  ')',
  '',
  '',
  '',
  '\v',
  '',
  '',
  '\b',
  '',
  '',
  '',
  '&',
  '',
  '',
  '\x18',
  'T',
  'F',
  'm',
  '7',
  '',
  '2',
  'O',
  '',
  '\f',
  '',
  '',
  '\r',
  '',
  '',
  '$',
  '\x15',
  '',
  'G',
  '\t',
  '',
  '%',
  '',
  'u',
  '',
  '',
  '',
  '1',
  'v',
  'z',
  'j',
  'Q',
  '\x1D',
  'M',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x06',
  '-',
  '',
  '@',
  '',
  'R',
  '',
  '_',
  '',
  '',
  '',
  '',
  '\x02',
  'E',
  '',
  '',
  'X',
  'J',
  '',
  '',
  '',
  'h',
  '\x16',
  '',
  '',
  '\x1A',
  'W',
  'N',
  '',
  '',
  '\n',
  '\x01',
  ',',
  'c',
  '',
  '',
  'C',
  '',
  '',
  '',
  '',
  ':',
  'B',
  'a',
  '',
  '\x0E',
  '',
  '',
  '<',
  '',
  '',
  'y',
  'n',
  '',
  '>',
  '.',
  '',
  'P',
  '\x9D',
  'L',
  '',
  '',
  '',
  '',
  '\x13',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '`',
  '~',
  '\x81',
  '\x8F',
  '+',
  '',
  '',
  'k',
  '',
  '\x10',
  'i',
  '',
  'A',
  '\x0F',
  '',
  '\x14',
  'U',
  '',
  '\x05',
  '',
  '*',
  '[',
  '',
  '(',
  '',
  '\xFF',
  '',
  '',
  '',
  '',
  '',
  '',
  's',
  'K',
  '',
  ';',
  '',
  '',
  '\"',
  'x',
  '',
  'p',
  '',
  '\x19',
  '=',
  '',
  '',
  '',
  '',
  '',
  ' ',
  '}',
  '',
  '',
  '',
  '',
  '0',
  '6',
  '\x1B',
  '\'',
  '9',
  '',
  'r',
  '\x17',
  '',
  't',
  '{',
  'd',
  '',
  '\\',
  'q',
  'g',
  'f',
  'D',
  '^',
  '',
  ']',
  '',
  '',
  '\x90',
  '',
  '/',
  'w',
  '',
  '',
  '',
  'b',
  '\x04',
  'V',
  '\x1E',
  '\x1C',
  '5',
  '',
  'H',
  '',
  '=',
  '',
  'Z',
  '',
  'K',
  '\x17',
  '',
  '\f',
  '',
  '',
  '',
  '@',
  '\x15',
  'M',
  '',
  '',
  '',
  '\x9D',
  ' ',
  '',
  '',
  '8',
  '!',
  'd',
  'R',
  'S',
  '',
  '',
  '\a',
  '',
  ',',
  'u',
  '',
  '\x81',
  '\x1C',
  'b',
  ':',
  '',
  'l',
  '1',
  'v',
  '',
  '\'',
  '',
  '',
  '.',
  '',
  'J',
  '\b',
  '',
  '',
  '',
  '',
  '',
  '',
  '-',
  '',
  'X',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x11',
  '',
  '>',
  '\x12',
  '\x90',
  '',
  '',
  'r',
  '',
  '\x1D',
  '',
  '',
  '9',
  '',
  '',
  '\x13',
  '',
  '',
  '',
  '[',
  '?',
  'H',
  '|',
  '',
  '',
  '',
  'j',
  '\x04',
  '5',
  'Y',
  '',
  '',
  '}',
  '',
  '\x19',
  '',
  '~',
  'm',
  '\x0E',
  '\x1B',
  'P',
  '',
  'U',
  ']',
  '',
  ')',
  '',
  '*',
  '\x8D',
  '',
  '',
  '',
  '\x8F',
  'a',
  '',
  'I',
  'q',
  '\x10',
  '\x1F',
  '',
  '\x1A',
  '',
  '',
  'W',
  'B',
  '',
  '',
  '#',
  '',
  '',
  '',
  '7',
  '',
  '\x02',
  '\x14',
  '\n',
  '',
  '\x0F',
  '',
  'x',
  '',
  'L',
  '',
  '',
  '\"',
  '',
  'O',
  '\x1E',
  'h',
  'k',
  '\x18',
  '\x01',
  '%',
  '',
  '',
  '',
  '',
  '\x05',
  'Q',
  'C',
  '^',
  '',
  '_',
  't',
  '\x03',
  '',
  'E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'p',
  'N',
  'o',
  'g',
  '',
  'D',
  'T',
  '',
  'w',
  '6',
  '<',
  '',
  's',
  '',
  '',
  '4',
  '/',
  '',
  '',
  '',
  '',
  '\v',
  'G',
  '',
  '',
  ';',
  '`',
  '',
  '',
  '',
  '',
  '\t',
  '',
  '',
  '',
  'e',
  '\xFF',
  '\r',
  'c',
  'i',
  '\x16',
  '',
  '',
  '$',
  '',
  'y',
  '',
  '',
  '',
  'n',
  '',
  '',
  '{',
  '(',
  'A',
  'F',
  '\x06',
  '0',
  '',
  '',
  '\0',
  '\\',
  '',
  'z',
  'V',
  '2',
  '',
  '&',
  'f',
  '',
  '3',
  '\x7F',
  '+',
  '',
  '',
  '',
  'q',
  'F',
  '\x15',
  '2',
  '',
  'b',
  '5',
  '',
  '',
  '',
  '',
  '\x12',
  '',
  '',
  '',
  '\\',
  '',
  '\a',
  '',
  '',
  'c',
  '\x9D',
  '<',
  '(',
  '',
  '',
  'v',
  '',
  '$',
  '',
  '',
  'u',
  'f',
  '6',
  'N',
  '!',
  'C',
  '8',
  '',
  '',
  '',
  'H',
  '',
  ' ',
  '',
  '',
  '',
  'G',
  'o',
  '\f',
  '\x17',
  '\"',
  'j',
  '\x8D',
  '',
  'U',
  '~',
  '',
  'E',
  'Z',
  '',
  '',
  'r',
  '?',
  '',
  '\0',
  '',
  '\x1C',
  '{',
  '',
  '',
  '',
  '',
  '',
  '\v',
  '',
  '',
  'p',
  ',',
  '',
  'e',
  '',
  '*',
  '.',
  'J',
  '',
  '\x18',
  '\x06',
  ':',
  '',
  '',
  '3',
  '&',
  '',
  '_',
  'g',
  '\x19',
  '',
  '',
  '=',
  '',
  '',
  '',
  'I',
  '',
  'M',
  '\x02',
  '',
  '\x04',
  '4',
  '',
  '',
  '',
  '',
  'V',
  '',
  '',
  '',
  '',
  ')',
  '',
  '',
  'B',
  'l',
  '#',
  'Y',
  '\x1A',
  '-',
  '',
  '',
  '',
  '>',
  '',
  'T',
  '\x1B',
  '/',
  'D',
  '\x05',
  '',
  '',
  'P',
  'O',
  'k',
  '',
  '',
  '',
  '\x10',
  '',
  'h',
  '\x7F',
  's',
  'K',
  '%',
  'n',
  'z',
  '',
  '',
  '',
  '\r',
  '`',
  '',
  '',
  ';',
  '\x03',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x90',
  '\t',
  '\x1E',
  '',
  '',
  '',
  'Q',
  '',
  'x',
  '',
  '',
  '',
  '',
  'A',
  '',
  '',
  '\x13',
  'w',
  '1',
  '\x11',
  '',
  '@',
  '\x16',
  '',
  '',
  '\x1F',
  '',
  '0',
  '7',
  '',
  '',
  '|',
  '',
  '[',
  '\x01',
  '',
  '',
  '',
  '9',
  '\x0F',
  '',
  'y',
  '',
  ']',
  '',
  '',
  '',
  '',
  '',
  '\x1D',
  'd',
  '',
  '\b',
  'i',
  'm',
  '',
  'W',
  'S',
  '}',
  't',
  '',
  '',
  'R',
  'X',
  '\x8F',
  '',
  '\x0E',
  '\n',
  '^',
  '\'',
  '',
  '\x81',
  '',
  '+',
  '',
  'a',
  '',
  '',
  'L',
  '\x14',
  '',
  '',
  '\xFF',
  '',
  'Z',
  '',
  'n',
  '',
  '',
  'e',
  '',
  'H',
  '2',
  '\x1B',
  '@',
  '',
  '\t',
  '',
  '',
  '',
  '',
  '',
  '/',
  'R',
  'h',
  '\x13',
  '',
  '\x7F',
  'v',
  '',
  '',
  ';',
  'N',
  '',
  '',
  'z',
  ':',
  '6',
  '~',
  '!',
  '5',
  '',
  '',
  ' ',
  '',
  '',
  '{',
  '}',
  's',
  '',
  'c',
  '',
  '',
  '',
  '',
  '\x12',
  '',
  'p',
  '',
  '',
  '',
  'J',
  '',
  'w',
  '\x1F',
  '\0',
  '',
  '',
  '\x17',
  'E',
  '',
  '',
  '',
  '',
  '',
  '\x11',
  'O',
  'U',
  '\x05',
  '^',
  'G',
  '?',
  '',
  '\x18',
  'd',
  '',
  '',
  '',
  '',
  '',
  '',
  '%',
  '',
  '',
  '\'',
  '',
  '\r',
  '\x1C',
  'W',
  '',
  'V',
  '',
  '',
  '',
  '',
  'F',
  '',
  'k',
  '3',
  '',
  '',
  '',
  '9',
  '`',
  'i',
  '+',
  '(',
  '',
  '',
  'A',
  '\x8D',
  ']',
  '\v',
  'S',
  'o',
  '|',
  '',
  '',
  '&',
  '\x03',
  '',
  'a',
  '',
  '',
  '',
  '',
  '',
  'y',
  '',
  '*',
  '',
  '',
  '',
  '\x15',
  '',
  'T',
  'B',
  '\x06',
  '\x1E',
  '',
  '\x19',
  '',
  'x',
  'q',
  '',
  'L',
  '',
  '',
  't',
  '\\',
  'f',
  '',
  '',
  '',
  '#',
  '',
  '',
  '\x10',
  '',
  '',
  'Y',
  'r',
  'P',
  '',
  '',
  '',
  '',
  '',
  '0',
  'u',
  'M',
  '\x1D',
  '',
  '',
  '\n',
  'Q',
  'C',
  'D',
  '',
  '\"',
  '\x14',
  '[',
  '>',
  '',
  '\x01',
  '1',
  'j',
  '\x0E',
  '',
  '',
  '\x16',
  '\f',
  '',
  'm',
  '$',
  '',
  'I',
  '4',
  '',
  '8',
  '\a',
  ')',
  '',
  '',
  '',
  '',
  'g',
  '',
  '',
  'b',
  '',
  '',
  '-',
  '\x81',
  ',',
  '',
  '',
  '',
  '',
  '',
  '',
  '.',
  '\x1A',
  'l',
  '\x04',
  '',
  '7',
  '',
  '',
  'K',
  '=',
  '',
  '',
  '\x8F',
  '',
  '',
  '\x0F',
  '',
  '\x90',
  '',
  'X',
  '<',
  '\xFF',
  '\x9D',
  '',
  '\x02',
  '',
  '\b',
  '_',
  '',
  '',
  '\x12',
  '\\',
  '',
  '.',
  '>',
  '',
  ')',
  '\xFF',
  'K',
  '\x0F',
  '',
  '\x0E',
  '\a',
  'Y',
  '',
  'U',
  '',
  '',
  'I',
  '',
  '',
  '',
  '<',
  '',
  '&',
  '\x81',
  '',
  '#',
  '',
  '!',
  '\x1A',
  '',
  '',
  '',
  '\x18',
  '',
  '\x16',
  '',
  '',
  'm',
  '\x02',
  'T',
  '',
  '2',
  ',',
  '',
  '',
  '[',
  '$',
  '',
  '`',
  '',
  '',
  'i',
  '?',
  '\x1F',
  '',
  '0',
  '\t',
  '',
  '',
  'B',
  '',
  'C',
  '',
  'O',
  '\x1C',
  '6',
  '',
  '',
  '}',
  '{',
  '',
  '',
  '\b',
  '\x19',
  '',
  ' ',
  '',
  '\x1B',
  '7',
  '',
  '\'',
  '',
  '\x9D',
  '8',
  'N',
  '\v',
  '',
  '',
  '\n',
  '',
  '',
  '*',
  'P',
  '',
  '=',
  '',
  'j',
  '',
  'o',
  'V',
  '',
  's',
  '',
  '',
  'v',
  '',
  'A',
  'd',
  'n',
  'c',
  '',
  '\x10',
  '\x15',
  ']',
  'L',
  'S',
  '',
  '',
  'k',
  '',
  '',
  '',
  'p',
  '',
  '',
  '\f',
  '',
  '',
  'f',
  'h',
  'W',
  '',
  '\x1D',
  '\x1E',
  'R',
  '\x7F',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x04',
  '',
  '\r',
  '',
  ';',
  '',
  '',
  'G',
  '',
  '',
  'q',
  '',
  '',
  '',
  '',
  '',
  '-',
  'F',
  'e',
  '',
  '@',
  '\x8D',
  '5',
  '',
  '|',
  '\x01',
  '',
  '',
  'J',
  '4',
  '\x03',
  '\x14',
  '',
  '',
  '\x17',
  'r',
  'x',
  'g',
  '\x06',
  '',
  ':',
  'E',
  '',
  '(',
  '',
  '',
  '3',
  '',
  '1',
  '+',
  '%',
  '',
  '',
  'Z',
  '',
  '~',
  '',
  '',
  '',
  '',
  '',
  'u',
  'w',
  '',
  '',
  '\x90',
  '',
  'b',
  '',
  '',
  '',
  '',
  'z',
  '',
  '',
  'y',
  '',
  '',
  '',
  '\x13',
  'M',
  '\x8F',
  't',
  '_',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '^',
  '',
  'X',
  'H',
  'a',
  '',
  '\x11',
  '\"',
  '',
  'l',
  'D',
  '9',
  '\0',
  '',
  '\x05',
  'Q',
  '',
  '/',
  '',
  '',
  ',',
  '',
  '',
  'B',
  '',
  '~',
  '',
  'u',
  '\x04',
  '',
  '<',
  '\0',
  '>',
  '',
  '2',
  '\x14',
  ']',
  '',
  '',
  '',
  '\x8F',
  '',
  '\x1C',
  '',
  '.',
  '\x16',
  'h',
  '7',
  'V',
  '',
  '',
  '\xFF',
  '\r',
  'w',
  '',
  '!',
  '',
  '',
  '}',
  '',
  'E',
  '\t',
  '\b',
  '',
  '`',
  '\x81',
  'T',
  '\x13',
  '\x10',
  '',
  '',
  '',
  'p',
  '',
  '\"',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  'n',
  '',
  'x',
  '',
  '3',
  'L',
  '',
  '',
  '\x1B',
  '',
  '',
  '4',
  '\x01',
  '*',
  '',
  'j',
  '',
  'G',
  '',
  '',
  '0',
  'g',
  '',
  '|',
  '',
  '',
  'v',
  '\x1A',
  '',
  'm',
  '',
  '',
  '',
  '',
  't',
  '5',
  '',
  'P',
  '\x0F',
  'e',
  'Y',
  '\x12',
  '',
  'I',
  'R',
  '',
  '',
  '',
  '\x15',
  '_',
  '',
  'W',
  '',
  'r',
  '',
  '',
  'U',
  'K',
  '',
  '\x11',
  '',
  'O',
  '',
  '',
  '[',
  '',
  'A',
  '',
  'c',
  '\x9D',
  '',
  'd',
  '',
  'F',
  '',
  '',
  '',
  '',
  '%',
  '',
  '',
  '',
  '',
  '\n',
  '',
  'C',
  '#',
  '\x17',
  ')',
  'y',
  '6',
  '',
  'J',
  '',
  'a',
  '',
  '',
  '\x0E',
  ':',
  '\x03',
  '\a',
  '',
  '',
  '',
  '$',
  'H',
  '\x18',
  '+',
  '(',
  'M',
  '',
  ';',
  'b',
  '',
  'q',
  '\'',
  '',
  '',
  '',
  '',
  '&',
  '',
  '',
  '=',
  '',
  '',
  '',
  '',
  '\x8D',
  '',
  '',
  '8',
  '/',
  '\\',
  '\x1F',
  'i',
  'Z',
  '',
  '',
  '@',
  '',
  '',
  '',
  '',
  'k',
  ' ',
  '',
  'z',
  '',
  '\x02',
  '\x7F',
  '-',
  '',
  '^',
  'l',
  '?',
  'S',
  's',
  '9',
  '',
  'Q',
  '',
  '',
  '\x1E',
  '',
  '',
  '\x19',
  'X',
  '\x90',
  '',
  '',
  '\x05',
  '\v',
  '',
  '',
  'o',
  '',
  '{',
  'D',
  '\x1D',
  '',
  '',
  '\x06',
  '',
  '1',
  'f',
  '',
  '',
  '',
  '',
  '\f',
  'N',
  '',
  'y',
  '',
  '',
  '',
  '\x18',
  '7',
  'D',
  '',
  '_',
  '\x1E',
  '\x9D',
  '',
  ')',
  '\x19',
  '',
  '`',
  '?',
  '',
  '',
  'Z',
  '|',
  '',
  '2',
  '/',
  ']',
  '',
  '5',
  '',
  '\x14',
  '',
  '\a',
  '',
  '',
  'W',
  '',
  ':',
  'X',
  'H',
  'L',
  '',
  'J',
  '',
  '@',
  '-',
  '',
  'P',
  '\x1B',
  'I',
  '\x81',
  '',
  'Q',
  '',
  ',',
  '8',
  '',
  '',
  '',
  'G',
  '#',
  'm',
  '',
  'w',
  '',
  '',
  'v',
  '',
  '\n',
  '',
  '',
  '\x8D',
  'T',
  '',
  '',
  'E',
  '{',
  '',
  '',
  ' ',
  '',
  '\t',
  '',
  '1',
  '',
  'R',
  '^',
  '\x17',
  'M',
  '<',
  '',
  '',
  '\"',
  '%',
  '\x90',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x8F',
  'o',
  '\x05',
  '4',
  'd',
  '',
  '',
  '',
  '~',
  'q',
  '',
  '',
  'u',
  '',
  '',
  '(',
  '9',
  '',
  '',
  '',
  '',
  '',
  '\x10',
  '\x13',
  'O',
  'f',
  '0',
  'U',
  '',
  'Y',
  '',
  '',
  '\\',
  '+',
  '',
  't',
  '',
  '',
  '',
  '',
  '\x1C',
  '',
  '',
  '',
  'j',
  'l',
  '[',
  '\x1A',
  'p',
  'N',
  'S',
  '',
  'r',
  '\x0F',
  '',
  '',
  '\x15',
  '',
  '',
  '*',
  '',
  '',
  'a',
  '3',
  'z',
  '.',
  '',
  'e',
  '',
  '',
  '',
  '6',
  '',
  '',
  'F',
  ';',
  '',
  '\x02',
  '\x01',
  '',
  '',
  '\v',
  '',
  'V',
  '',
  '',
  '$',
  'n',
  '',
  '=',
  '\f',
  '',
  '',
  '\xFF',
  '',
  '}',
  '',
  '\x04',
  '\b',
  'b',
  'B',
  'k',
  '\x16',
  '',
  '',
  'K',
  '\0',
  '\x7F',
  '',
  '',
  'c',
  '>',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  '',
  'i',
  '',
  '!',
  '',
  '',
  '',
  'C',
  '',
  '\x06',
  '',
  '',
  '\x1F',
  '',
  'h',
  '\r',
  '',
  '',
  '\x12',
  '',
  '\'',
  'x',
  '',
  'g',
  '',
  '\x03',
  '',
  '',
  '',
  '',
  '\x1D',
  '&',
  '\x11',
  's',
  '',
  'A',
  '',
  '',
  '\x12',
  '5',
  'B',
  'j',
  '',
  '|',
  '',
  'o',
  '~',
  ']',
  '\x0E',
  '',
  '9',
  'C',
  'P',
  'Y',
  '',
  '',
  '',
  '\x1E',
  '<',
  '',
  '8',
  ',',
  '\r',
  '_',
  '@',
  '/',
  'A',
  'n',
  '',
  '',
  '\x81',
  '\x13',
  '',
  '}',
  'G',
  '\f',
  '?',
  '',
  '%',
  'g',
  '',
  '',
  '+',
  '',
  '(',
  '\x11',
  '-',
  '',
  '',
  'W',
  'R',
  '',
  'p',
  '',
  '',
  'q',
  '',
  '',
  'x',
  '',
  '',
  ')',
  '',
  '',
  '',
  '',
  '\v',
  '!',
  '',
  '',
  'b',
  '',
  '\a',
  '',
  '\x01',
  '',
  '',
  '',
  '',
  '',
  '0',
  '',
  '',
  'T',
  '',
  '',
  '',
  'd',
  '',
  '',
  ':',
  '',
  '',
  '\x16',
  '',
  '&',
  '',
  '',
  '',
  '\x15',
  '\x1D',
  '\x1A',
  '',
  'H',
  '',
  '\x06',
  '',
  '',
  'K',
  '',
  '`',
  '',
  '',
  '\x1F',
  's',
  'S',
  '',
  '',
  '',
  '\x9D',
  '',
  ' ',
  'I',
  '\t',
  '',
  '',
  'O',
  '',
  'V',
  '',
  '',
  't',
  '\x1B',
  'J',
  '\'',
  'v',
  'X',
  '*',
  '',
  '',
  'w',
  '',
  '',
  'Q',
  '',
  '',
  '\x05',
  '',
  '',
  'F',
  '',
  'a',
  'f',
  '>',
  '\x03',
  'm',
  '2',
  'h',
  '',
  '',
  '',
  ';',
  '',
  'E',
  '',
  '',
  '',
  '7',
  '',
  '',
  '\x0F',
  '\x1C',
  '',
  '',
  '{',
  '^',
  '',
  '',
  '\\',
  '',
  '',
  '',
  '',
  '',
  'l',
  'i',
  '',
  '\x90',
  '',
  '.',
  '\xFF',
  '#',
  '\x02',
  '\"',
  'k',
  'y',
  '',
  '=',
  '',
  'N',
  '',
  'z',
  '[',
  '',
  '',
  '\x19',
  'r',
  '\n',
  '\x18',
  'U',
  '',
  'M',
  '',
  '',
  '1',
  'u',
  '',
  '',
  '\x7F',
  '\x14',
  '\x04',
  '',
  'D',
  '3',
  '',
  '',
  '4',
  '\b',
  '\x17',
  '\x8F',
  '',
  '\0',
  '',
  '',
  '\x10',
  '',
  '',
  '',
  'e',
  '',
  '$',
  'Z',
  '',
  '',
  '6',
  '',
  '',
  'c',
  'L',
  '',
  '',
  '',
  '\x8D',
  '',
  '#',
  '',
  '$',
  '',
  'p',
  'a',
  '',
  'k',
  '',
  'v',
  'r',
  '',
  ';',
  '>',
  '\x03',
  'F',
  '\n',
  '\x16',
  '\x1B',
  '',
  ':',
  '',
  'i',
  '\x10',
  'H',
  '\b',
  '',
  'd',
  '\\',
  '}',
  '',
  'D',
  '/',
  '',
  '',
  'C',
  'o',
  '',
  'f',
  '',
  '',
  '',
  '3',
  '',
  '',
  '',
  'g',
  '1',
  '',
  '',
  '',
  '\x0F',
  '\f',
  '',
  '',
  '',
  '',
  'J',
  '',
  '=',
  '',
  '',
  '',
  '2',
  '',
  '\x9D',
  '0',
  '',
  '',
  '',
  '',
  't',
  'S',
  '',
  '?',
  '[',
  '',
  '',
  '',
  'L',
  '',
  '',
  '',
  '\x8D',
  '\x1F',
  'V',
  '\x19',
  '-',
  '',
  'j',
  '',
  '',
  'w',
  '',
  '',
  '',
  '',
  '',
  '\x06',
  '',
  '',
  '',
  'T',
  'e',
  'E',
  '',
  '\x1A',
  ' ',
  '',
  '',
  '',
  '\x02',
  '|',
  '_',
  '',
  '^',
  'O',
  '',
  '',
  '{',
  '\x13',
  '\x8F',
  '@',
  's',
  '!',
  'n',
  '',
  'b',
  'M',
  '*',
  '',
  '',
  '',
  '',
  'W',
  '',
  '',
  '',
  '',
  'R',
  '',
  '',
  '\x1C',
  '',
  '',
  '\x12',
  '',
  '',
  'z',
  '',
  '\r',
  'y',
  '%',
  '.',
  '',
  '',
  'h',
  '',
  '\x1D',
  '',
  '',
  'A',
  '(',
  '',
  '',
  '\x17',
  '5',
  '\x81',
  '',
  '',
  '',
  '',
  '',
  '',
  '\"',
  '&',
  '\x14',
  '7',
  '\a',
  '',
  '\x1E',
  '`',
  ')',
  '4',
  '',
  ']',
  '',
  '\x15',
  '+',
  '8',
  'U',
  '\x01',
  '',
  '~',
  'x',
  '9',
  '',
  '',
  'Z',
  '',
  '',
  'I',
  'c',
  '',
  '',
  'X',
  '',
  'l',
  'Q',
  ',',
  '\t',
  '',
  '',
  '',
  'm',
  '\x18',
  'P',
  '',
  'G',
  '',
  'N',
  '',
  '',
  '',
  '\x90',
  '',
  '\x04',
  '',
  'Y',
  '\x05',
  '\v',
  'B',
  '\xFF',
  '',
  '6',
  '',
  '',
  '\x0E',
  '<',
  'K',
  '',
  'q',
  '',
  '',
  '',
  '',
  '',
  'u',
  '',
  '\0',
  '\x7F',
  '\x11',
  '',
  '',
  '',
  '\'',
  '\x0F',
  ' ',
  '',
  '',
  'P',
  '',
  '',
  'K',
  '',
  'G',
  '',
  ':',
  '',
  '',
  '',
  '',
  '',
  '+',
  '',
  '',
  's',
  '',
  '',
  '',
  'i',
  'g',
  '-',
  '',
  '',
  '',
  '*',
  'F',
  '',
  '',
  '(',
  '',
  '%',
  '',
  '\x7F',
  '',
  'H',
  'y',
  '',
  '<',
  '',
  'f',
  '\\',
  '',
  '',
  '',
  '\r',
  '',
  '',
  'J',
  '6',
  '',
  '',
  'L',
  '>',
  '0',
  'Y',
  '9',
  '',
  'O',
  '',
  'A',
  '',
  '\x14',
  '\x1F',
  '\b',
  '',
  '\x1A',
  '\f',
  'C',
  '?',
  '',
  'I',
  '$',
  'n',
  'q',
  'D',
  '',
  '',
  'u',
  '',
  '\x18',
  '',
  '\x1B',
  '',
  '',
  'r',
  '',
  '|',
  'S',
  '\x05',
  '=',
  '',
  '',
  '',
  '\x8F',
  '',
  '',
  'N',
  'E',
  '',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x04',
  '',
  '',
  '',
  '',
  '_',
  '',
  '\x1E',
  '',
  'Z',
  'w',
  ')',
  ']',
  '',
  '',
  '',
  '.',
  '',
  '',
  'V',
  '&',
  '',
  '\x01',
  '\0',
  '',
  'v',
  'h',
  '\x19',
  '',
  'a',
  '',
  '',
  '',
  '',
  '',
  '\x1D',
  '',
  'U',
  '\'',
  'Q',
  '',
  '\"',
  '}',
  '\x02',
  '',
  't',
  '\xFF',
  '',
  '3',
  '',
  'o',
  '\x13',
  '',
  '',
  '',
  'k',
  'x',
  '',
  '\v',
  '\x15',
  'e',
  '',
  '[',
  '\x8D',
  'l',
  '',
  '',
  '',
  '\x03',
  '1',
  '\x11',
  '/',
  '2',
  '',
  'z',
  '`',
  '',
  '',
  '\x1C',
  'p',
  '\x16',
  '\n',
  '',
  '',
  '',
  '',
  '',
  '~',
  'c',
  '\x06',
  '\t',
  '{',
  '',
  '\x9D',
  'X',
  '',
  '',
  '',
  '',
  '',
  '',
  '\x0E',
  'm',
  '^',
  '!',
  '',
  '7',
  '',
  '\x90',
  '',
  'B',
  '',
  ',',
  '\x10',
  '',
  '',
  'M',
  '8',
  'j',
  '',
  '',
  ';',
  '@',
  '',
  '',
  'W',
  '',
  '\x81',
  '',
  '\a',
  '',
  '',
  '4',
  '',
  '',
  '#',
  'T',
  'R',
  '',
  '\x17',
  '5',
  'b',
  'd',
  '',
  '\x12',
  '',
  '3',
  '\x1F',
  'R',
  '',
  ']',
  '\x1D',
  '\"',
  '6',
  '',
  'W',
  '',
  '\x06',
  '\r',
  'c',
  '',
  '',
  'I',
  'M',
  'O',
  '',
  '`',
  '',
  '\x03',
  '',
  '(',
  '',
  '',
  'r',
  'q',
  '',
  '',
  '\x8D',
  '',
  'C',
  '',
  'G',
  'H',
  '',
  '',
  'z',
  'Q',
  'g',
  '',
  '\0',
  '',
  '',
  '',
  '',
  '',
  'h',
  '{',
  '\x0E',
  '',
  '\x15',
  '',
  'U',
  '$',
  '\\',
  '',
  'l',
  '7',
  '',
  '',
  't',
  '',
  '',
  '[',
  '',
  '\x9D',
  '&',
  '',
  '',
  '\xFF',
  'n',
  '',
  '',
  '\x1B',
  'w',
  '',
  'S',
  '',
  '\x90',
  '>',
  '',
  '',
  '\v',
  '~',
  '\x16',
  '9',
  '',
  '',
  '',
  '',
  '',
  '\b',
  '',
  '',
  '\x12',
  '',
  '',
  '',
  '',
  '',
  '',
  '=',
  '-',
  'y',
  'v',
  '\x11',
  '@',
  '',
  '',
  's',
  '',
  '',
  'V',
  '4',
  'Z',
  '',
  '\x01',
  '',
  '',
  '',
  '',
  'x',
  '',
  'f',
  'K',
  '',
  '?',
  'e',
  '0',
  '.',
  'd',
  '\x02',
  '\x81',
  '',
  '',
  '',
  '\f',
  '',
  '',
  '\x0F',
  '',
  '\x1E',
  'u',
  '',
  '\x10',
  '',
  '',
  '',
  '*',
  '',
  ')',
  '\x7F',
  '',
  '1',
  '\x1A',
  '',
  '',
  'X',
  'F',
  '',
  'P',
  '\x18',
  '',
  '\t',
  '\n',
  '+',
  '\x17',
  '',
  '',
  '',
  '',
  '',
  '|',
  '',
  '',
  '',
  '',
  'b',
  '',
  '',
  '8',
  '',
  '\x05',
  '\a',
  '%',
  '\x13',
  '}',
  '',
  'a',
  'i',
  '',
  '',
  '',
  '',
  '<',
  'j',
  'E',
  '\x19',
  '',
  '',
  '',
  'A',
  '',
  '',
  '',
  '_',
  '',
  '',
  '/',
  'J',
  '\x1C',
  '2',
  '',
  '\x04',
  'N',
  ',',
  '',
  '^',
  '',
  'm',
  '\'',
  '',
  '',
  'L',
  'B',
  'k',
  '',
  '',
  '',
  'D',
  '#',
  '\x14',
  '',
  'T',
  'p',
  '',
  '',
  ':',
  '\x8F',
  '',
  ';',
  '',
  'Y',
  '',
  '!',
  '',
  '',
  '',
  '',
  '5',
  ' ',
  'o'
}; // idb
int dword_4CD708[256] =
{
  -966564955,
  -126059388,
  -294160487,
  -159679603,
  -855539,
  -697603139,
  -563122255,
  -1849309868,
  1613770832,
  33620227,
  -832084055,
  1445669757,
  -402719207,
  -1244145822,
  1303096294,
  -327780710,
  -1882535355,
  528646813,
  -1983264448,
  -92439161,
  -268764651,
  -1302767125,
  -1907931191,
  -68095989,
  1101901292,
  -1277897625,
  1604494077,
  1169141738,
  597466303,
  1403299063,
  -462261610,
  -1681866661,
  1974974402,
  -503448292,
  1033081774,
  1277568618,
  1815492186,
  2118074177,
  -168298750,
  -2083730353,
  1748251740,
  1369810420,
  -773462732,
  -101584632,
  -495881837,
  -1411852173,
  1647391059,
  706024767,
  134480908,
  -1782069422,
  1176707941,
  -1648114850,
  806885416,
  932615841,
  168101135,
  798661301,
  235341577,
  605164086,
  461406363,
  -538779075,
  -840176858,
  1311188841,
  2142417613,
  -361400929,
  302582043,
  495158174,
  1479289972,
  874125870,
  907746093,
  -596742478,
  -1269146898,
  1537253627,
  -1538108682,
  1983593293,
  -1210657183,
  2108928974,
  1378429307,
  -572267714,
  1580150641,
  327451799,
  -1504488459,
  -1177431704,
  0,
  -1041371860,
  1075847264,
  -469959649,
  2041688520,
  -1235526675,
  -731223362,
  -1916023994,
  1740553945,
  1916352843,
  -1807070498,
  -1739830060,
  -1336387352,
  -2049978550,
  -1143943061,
  -974131414,
  1336584933,
  -302253290,
  -2042412091,
  -1706209833,
  1714631509,
  293963156,
  -1975171633,
  -369493744,
  67240454,
  -25198719,
  -1605349136,
  2017213508,
  631218106,
  1269344483,
  -1571728909,
  1571005438,
  -2143272768,
  93294474,
  1066570413,
  563977660,
  1882732616,
  -235539196,
  1673313503,
  2008463041,
  -1344611723,
  1109467491,
  537923632,
  -436207846,
  -34344178,
  -1076702611,
  -2117218996,
  403442708,
  638784309,
  -1007883217,
  -1101045791,
  899127202,
  -2008791860,
  773265209,
  -1815821225,
  1437050866,
  -58818942,
  2050833735,
  -932944724,
  -1168286233,
  840505643,
  -428641387,
  -1067425632,
  427917720,
  -1638969391,
  -1545806721,
  1143087718,
  1412049534,
  999329963,
  193497219,
  -1941551414,
  -940642775,
  1807268051,
  672404540,
  -1478566279,
  -1134666014,
  369822493,
  -1378100362,
  -606019525,
  1681011286,
  1949973070,
  336202270,
  -1840690725,
  201721354,
  1210328172,
  -1201906460,
  -1614626211,
  -1110191250,
  1135389935,
  -1000185178,
  965841320,
  831886756,
  -739974089,
  -226920053,
  -706222286,
  -1949775805,
  1849112409,
  -630362697,
  26054028,
  -1311386268,
  -1672589614,
  1235855840,
  -663982924,
  -1403627782,
  -202050553,
  -806688219,
  -899324497,
  -193299826,
  1202630377,
  268961816,
  1874508501,
  -260540280,
  1243948399,
  1546530418,
  941366308,
  1470539505,
  1941222599,
  -1748580783,
  -873928669,
  -1579295364,
  -395021156,
  1042226977,
  -1773450275,
  1639824860,
  227249030,
  260737669,
  -529502064,
  2084453954,
  1907733956,
  -865704278,
  -1874310952,
  100860677,
  -134810111,
  470683154,
  -1033805405,
  1781871967,
  -1370007559,
  1773779408,
  394692241,
  -1715355304,
  974986535,
  664706745,
  -639508168,
  -336005101,
  731420851,
  571543859,
  -764843589,
  -1445340816,
  126783113,
  865375399,
  765172662,
  1008606754,
  361203602,
  -907417312,
  -2016489911,
  -1437248001,
  1344809080,
  -1512054918,
  59542671,
  1503764984,
  160008576,
  437062935,
  1707065306,
  -672733647,
  -2076032314,
  -798463816,
  -2109652541,
  697932208,
  1512910199,
  504303377,
  2075177163,
  -1470868228,
  1841019862,
  739644986
}; // idb
int dword_4CDB08[256] =
{
  -1513725085,
  -2064089988,
  -1712425097,
  -1913226373,
  234877682,
  -1110021269,
  -1310822545,
  1418839493,
  1348481072,
  50462977,
  -1446090905,
  2102799147,
  434634494,
  1656084439,
  -431117397,
  -1695779210,
  1167051466,
  -1658879358,
  1082771913,
  -2013627011,
  368048890,
  -340633255,
  -913422521,
  201060592,
  -331240019,
  1739838676,
  -44064094,
  -364531793,
  -1088185188,
  -145513308,
  -1763413390,
  1536934080,
  -1032472649,
  484572669,
  -1371696237,
  1783375398,
  1517041206,
  1098792767,
  49674231,
  1334037708,
  1550332980,
  -195975771,
  886171109,
  150598129,
  -1813876367,
  1940642008,
  1398944049,
  1059722517,
  201851908,
  1385547719,
  1699095331,
  1587397571,
  674240536,
  -1590192490,
  252314885,
  -1255171430,
  151914247,
  908333586,
  -1692696448,
  1038082786,
  651029483,
  1766729511,
  -847269198,
  -1612024459,
  454166793,
  -1642232957,
  1951935532,
  775166490,
  758520603,
  -1294176658,
  -290170278,
  -77881184,
  -157003182,
  1299594043,
  1639438038,
  -830622797,
  2068982057,
  1054729187,
  1901997871,
  -1760328572,
  -173649069,
  1757008337,
  0,
  750906861,
  1614815264,
  535035132,
  -931548751,
  -306816165,
  -1093375382,
  1183697867,
  -647512386,
  1265776953,
  -560706998,
  -728216500,
  -391096232,
  1250283471,
  1807470800,
  717615087,
  -447763798,
  384695291,
  -981056701,
  -677753523,
  1432761139,
  -1810791035,
  -813021883,
  283769337,
  100925954,
  -2114027649,
  -257929136,
  1148730428,
  -1171939425,
  -481580888,
  -207466159,
  -27417693,
  -1065336768,
  -1979347057,
  -1388342638,
  -1138647651,
  1215313976,
  82966005,
  -547111748,
  -1049119050,
  1974459098,
  1665278241,
  807407632,
  451280895,
  251524083,
  1841287890,
  1283575245,
  337120268,
  891687699,
  801369324,
  -507617441,
  -1573546089,
  -863484860,
  959321879,
  1469301956,
  -229267545,
  -2097381762,
  1199193405,
  -1396153244,
  -407216803,
  724703513,
  -1780059277,
  -1598005152,
  -1743158911,
  -778154161,
  2141445340,
  1715741218,
  2119445034,
  -1422159728,
  -2096396152,
  -896776634,
  700968686,
  -747915080,
  1009259540,
  2041044702,
  -490971554,
  487983883,
  1991105499,
  1004265696,
  1449407026,
  1316239930,
  504629770,
  -611169975,
  168560134,
  1816667172,
  -457679780,
  1570751170,
  1857934291,
  -280777556,
  -1497079198,
  -1472622191,
  -1540254315,
  936633572,
  -1947043463,
  852879335,
  1133234376,
  1500395319,
  -1210421907,
  -1946055283,
  1689376213,
  -761508274,
  -532043351,
  -1260884884,
  -89369002,
  133428468,
  634383082,
  -1345690267,
  -1896580486,
  -381178194,
  403703816,
  -714097990,
  -1997506440,
  1867130149,
  1918643758,
  607656988,
  -245913946,
  -948718412,
  1368901318,
  600565992,
  2090982877,
  -1662487436,
  557719327,
  -577352885,
  -597574211,
  -2045932661,
  -2062579062,
  -1864339344,
  1115438654,
  -999180875,
  -1429445018,
  -661632952,
  84280067,
  33027830,
  303828494,
  -1547542175,
  1600795957,
  -106014889,
  -798377543,
  -1860729210,
  1486471617,
  658119965,
  -1188585826,
  953803233,
  334231800,
  -1288988520,
  857870609,
  -1143838359,
  1890179545,
  -1995993458,
  -1489791852,
  -1238525029,
  574365214,
  -1844082809,
  550103529,
  1233637070,
  -5614251,
  2018519080,
  2057691103,
  -1895592820,
  -128343647,
  -2146858615,
  387583245,
  -630865985,
  836232934,
  -964410814,
  -1194301336,
  -1014873791,
  -1339450983,
  2002398509,
  287182607,
  -881086288,
  -56077228,
  -697451589,
  975967766
}; // idb
int dword_4CDF08[256] =
{
  1671808611,
  2089089148,
  2006576759,
  2072901243,
  -233963534,
  1807603307,
  1873927791,
  -984313403,
  810573872,
  16974337,
  1739181671,
  729634347,
  -31856642,
  -681396777,
  -1410970197,
  1989864566,
  -901410870,
  -2103631998,
  -918517303,
  2106063485,
  -99225606,
  1508618841,
  1204391495,
  -267650064,
  -1377025619,
  -731401260,
  -1560453214,
  -1343601233,
  -1665195108,
  -1527295068,
  1922491506,
  -1067738176,
  -1211992649,
  -48438787,
  -1817297517,
  644500518,
  911895606,
  1061256767,
  -150800905,
  -867204148,
  878471220,
  -1510714971,
  -449523227,
  -251069967,
  1905517169,
  -663508008,
  827548209,
  356461077,
  67897348,
  -950889017,
  593839651,
  -1017209405,
  405286936,
  -1767819370,
  84871685,
  -1699401830,
  118033927,
  305538066,
  -2137318528,
  -499261470,
  -349778453,
  661212711,
  -1295155278,
  1973414517,
  152769033,
  -2086789757,
  745822252,
  439235610,
  455947803,
  1857215598,
  1525593178,
  -1594139744,
  1391895634,
  994932283,
  -698239018,
  -1278313037,
  695947817,
  -482419229,
  795958831,
  -2070473852,
  1408607827,
  -781665839,
  0,
  -315833875,
  543178784,
  -65018884,
  -1312261711,
  1542305371,
  1790891114,
  -884568629,
  -1093048386,
  961245753,
  1256100938,
  1289001036,
  1491644504,
  -817199665,
  -798245936,
  -282409489,
  -1427812438,
  -82383365,
  1137018435,
  1305975373,
  861234739,
  -2053893755,
  1171229253,
  -116332039,
  33948674,
  2139225727,
  1357946960,
  1011120188,
  -1615190625,
  -1461498968,
  1374921297,
  -1543610973,
  1086357568,
  -1886780017,
  -1834139758,
  -1648615011,
  944271416,
  -184225291,
  -1126210628,
  -1228834890,
  -629821478,
  560153121,
  271589392,
  -15014401,
  -217121293,
  -764559406,
  -850624051,
  202643468,
  322250259,
  -332413972,
  1608629855,
  -1750977129,
  1154254916,
  389623319,
  -1000893500,
  -1477290585,
  2122513534,
  1028094525,
  1689045092,
  1575467613,
  422261273,
  1939203699,
  1621147744,
  -2120738431,
  1339137615,
  -595614756,
  577127458,
  712922154,
  -1867826288,
  -2004677752,
  1187679302,
  -299251730,
  -1194103880,
  339486740,
  -562452514,
  1591917662,
  186455563,
  -612979237,
  -532948000,
  844522546,
  978220090,
  169743370,
  1239126601,
  101321734,
  611076132,
  1558493276,
  -1034051646,
  -747717165,
  -1393605716,
  1655096418,
  -1851246191,
  -1784401515,
  -466103324,
  2039214713,
  -416098841,
  -935097400,
  928607799,
  1840765549,
  -1920204403,
  -714821163,
  1322425422,
  -1444918871,
  1823791212,
  1459268694,
  -200805388,
  -366620694,
  1706019429,
  2056189050,
  -1360443474,
  135794696,
  -1160417350,
  2022240376,
  628050469,
  779246638,
  472135708,
  -1494132826,
  -1261997132,
  -967731258,
  -400307224,
  -579034659,
  1956440180,
  522272287,
  1272813131,
  -1109630531,
  -1954148981,
  -1970991222,
  1888542832,
  1044544574,
  -1245417035,
  1722469478,
  1222152264,
  50660867,
  -167643146,
  236067854,
  1638122081,
  895445557,
  1475980887,
  -1177523783,
  -2037311610,
  -1051158079,
  489110045,
  -1632032866,
  -516367903,
  -132912136,
  -1733088360,
  288563729,
  1773916777,
  -646927911,
  -1903622258,
  -1800981612,
  -1682559589,
  505560094,
  -2020469369,
  -383727127,
  -834041906,
  1442818645,
  678973480,
  -545610273,
  -1936784500,
  -1577559647,
  -1988097655,
  219617805,
  -1076206145,
  -432941082,
  1120306242,
  1756942440,
  1103331905,
  -1716508263,
  762796589,
  252780047,
  -1328841808,
  1425844308,
  -1143575109,
  372911126
}; // idb
int dword_4CE308[256] =
{
  1667474886,
  2088535288,
  2004326894,
  2071694838,
  -219017729,
  1802223062,
  1869591006,
  -976923503,
  808472672,
  16843522,
  1734846926,
  724270422,
  -16901657,
  -673750347,
  -1414797747,
  1987484396,
  -892713585,
  -2105369313,
  -909557623,
  2105378810,
  -84273681,
  1499065266,
  1195886990,
  -252703749,
  -1381110719,
  -724277325,
  -1566376609,
  -1347425723,
  -1667449053,
  -1532692653,
  1920112356,
  -1061135461,
  -1212693899,
  -33743647,
  -1819038147,
  640051788,
  909531756,
  1061110142,
  -134806795,
  -859025533,
  875846760,
  -1515850671,
  -437963567,
  -235861767,
  1903268834,
  -656903253,
  825316194,
  353713962,
  67374088,
  -943238507,
  589522246,
  -1010606435,
  404236336,
  -1768513225,
  84217610,
  -1701137105,
  117901582,
  303183396,
  -2139055333,
  -488489505,
  -336910643,
  656894286,
  -1296904833,
  1970642922,
  151591698,
  -2088526307,
  741110872,
  437923380,
  454765878,
  1852748508,
  1515908788,
  -1600062629,
  1381168804,
  993742198,
  -690593353,
  -1280061827,
  690584402,
  -471646499,
  791638366,
  -2071685357,
  1398011302,
  -774805319,
  0,
  -303223615,
  538992704,
  -50585629,
  -1313748871,
  1532751286,
  1785380564,
  -875870579,
  -1094788761,
  960056178,
  1246420628,
  1280103576,
  1482221744,
  -808498555,
  -791647301,
  -269538619,
  -1431640753,
  -67430675,
  1128514950,
  1296947098,
  859002214,
  -2054843375,
  1162203018,
  -101117719,
  33687044,
  2139062782,
  1347481760,
  1010582648,
  -1616922075,
  -1465326773,
  1364325282,
  -1549533603,
  1077985408,
  -1886418427,
  -1835881153,
  -1650607071,
  943212656,
  -168491791,
  -1128472733,
  -1229536905,
  -623217233,
  555836226,
  269496352,
  -58651,
  -202174723,
  -757961281,
  -842183551,
  202118168,
  320025894,
  -320065597,
  1600119230,
  -1751670219,
  1145359496,
  387397934,
  -993765485,
  -1482165675,
  2122220284,
  1027426170,
  1684319432,
  1566435258,
  421079858,
  1936954854,
  1616945344,
  -2122213351,
  1330631070,
  -589529181,
  572679748,
  707427924,
  -1869567173,
  -2004319477,
  1179044492,
  -286381625,
  -1195846805,
  336870440,
  -555845209,
  1583276732,
  185277718,
  -606374227,
  -522175525,
  842159716,
  976899700,
  168435220,
  1229577106,
  101059084,
  606366792,
  1549591736,
  -1027449441,
  -741118275,
  -1397952701,
  1650632388,
  -1852725191,
  -1785355215,
  -454805549,
  2038008818,
  -404278571,
  -926399605,
  926374254,
  1835907034,
  -1920103423,
  -707435343,
  1313788572,
  -1448484791,
  1819063512,
  1448540844,
  -185333773,
  -353753649,
  1701162954,
  2054852340,
  -1364268729,
  134748176,
  -1162160785,
  2021165296,
  623210314,
  774795868,
  471606328,
  -1499008681,
  -1263220877,
  -960081513,
  -387439669,
  -572687199,
  1953799400,
  522133822,
  1263263126,
  -1111630751,
  -1953790451,
  -1970633457,
  1886425312,
  1044267644,
  -1246378895,
  1718004428,
  1212733584,
  50529542,
  -151649801,
  235803164,
  1633788866,
  892690282,
  1465383342,
  -1179004823,
  -2038001385,
  -1044293479,
  488449850,
  -1633765081,
  -505333543,
  -117959701,
  -1734823125,
  286339874,
  1768537042,
  -640061271,
  -1903261433,
  -1802197197,
  -1684294099,
  505291324,
  -2021158379,
  -370597687,
  -825341561,
  1431699370,
  673740880,
  -539002203,
  -1936945405,
  -1583220647,
  -1987477495,
  218961690,
  -1077945755,
  -421121577,
  1111672452,
  1751693520,
  1094828930,
  -1717981143,
  757954394,
  252645662,
  -1330590853,
  1414855848,
  -1145317779,
  370555436
}; // idb
int dword_4CE708[256] =
{
  1660944384,
  2080374784,
  1996488704,
  2063597568,
  -234881024,
  1795162112,
  1862270976,
  -989855744,
  805306368,
  16777216,
  1728053248,
  721420288,
  -33554432,
  -687865856,
  -1426063360,
  1979711488,
  -905969664,
  -2113929216,
  -922746880,
  2097152000,
  -100663296,
  1493172224,
  1191182336,
  -268435456,
  -1392508928,
  -738197504,
  -1577058304,
  -1358954496,
  -1677721600,
  -1543503872,
  1912602624,
  -1073741824,
  -1224736768,
  -50331648,
  -1828716544,
  637534208,
  905969664,
  1056964608,
  -150994944,
  -872415232,
  872415232,
  -1526726656,
  -452984832,
  -251658240,
  1895825408,
  -671088640,
  822083584,
  352321536,
  67108864,
  -956301312,
  587202560,
  -1023410176,
  402653184,
  -1778384896,
  83886080,
  -1711276032,
  117440512,
  301989888,
  2147483648,
  -503316480,
  -352321536,
  654311424,
  -1308622848,
  1962934272,
  150994944,
  -2097152000,
  738197504,
  436207616,
  452984832,
  1845493760,
  1509949440,
  -1610612736,
  1375731712,
  989855744,
  -704643072,
  -1291845632,
  687865856,
  -486539264,
  788529152,
  -2080374784,
  1392508928,
  -788529152,
  0,
  -318767104,
  536870912,
  -67108864,
  -1325400064,
  1526726656,
  1778384896,
  -889192448,
  -1107296256,
  956301312,
  1241513984,
  1275068416,
  1476395008,
  -822083584,
  -805306368,
  -285212672,
  -1442840576,
  -83886080,
  1124073472,
  1291845632,
  855638016,
  -2063597568,
  1157627904,
  -117440512,
  33554432,
  2130706432,
  1342177280,
  1006632960,
  -1627389952,
  -1476395008,
  1358954496,
  -1560281088,
  1073741824,
  -1895825408,
  -1845493760,
  -1660944384,
  939524096,
  -184549376,
  -1140850688,
  -1241513984,
  -637534208,
  553648128,
  268435456,
  -16777216,
  -218103808,
  -771751936,
  -855638016,
  201326592,
  318767104,
  -335544320,
  1593835520,
  -1761607680,
  1140850688,
  385875968,
  -1006632960,
  -1493172224,
  2113929216,
  1023410176,
  1677721600,
  1560281088,
  419430400,
  1929379840,
  1610612736,
  -2130706432,
  1325400064,
  -603979776,
  570425344,
  704643072,
  -1879048192,
  -2013265920,
  1174405120,
  -301989888,
  -1207959552,
  335544320,
  -570425344,
  1577058304,
  184549376,
  -620756992,
  -536870912,
  838860800,
  973078528,
  167772160,
  1224736768,
  100663296,
  603979776,
  1543503872,
  -1040187392,
  -754974720,
  -1409286144,
  1644167168,
  -1862270976,
  -1795162112,
  -469762048,
  2030043136,
  -419430400,
  -939524096,
  922746880,
  1828716544,
  -1929379840,
  -721420288,
  1308622848,
  -1459617792,
  1811939328,
  1442840576,
  -201326592,
  -369098752,
  1694498816,
  2046820352,
  -1375731712,
  134217728,
  -1174405120,
  2013265920,
  620756992,
  771751936,
  469762048,
  -1509949440,
  -1275068416,
  -973078528,
  -402653184,
  -587202560,
  1946157056,
  520093696,
  1258291200,
  -1124073472,
  -1962934272,
  -1979711488,
  1879048192,
  1040187392,
  -1258291200,
  1711276032,
  1207959552,
  50331648,
  -167772160,
  234881024,
  1627389952,
  889192448,
  1459617792,
  -1191182336,
  -2046820352,
  -1056964608,
  486539264,
  -1644167168,
  -520093696,
  -134217728,
  -1744830464,
  285212672,
  1761607680,
  -654311424,
  -1912602624,
  -1811939328,
  -1694498816,
  503316480,
  -2030043136,
  -385875968,
  -838860800,
  1426063360,
  671088640,
  -553648128,
  -1946157056,
  -1593835520,
  -1996488704,
  218103808,
  -1090519040,
  -436207616,
  1107296256,
  1744830464,
  1090519040,
  -1728053248,
  754974720,
  251658240,
  -1342177280,
  1409286144,
  -1157627904,
  369098752
}; // idb
int dword_4CEB08[256] =
{
  6488064,
  8126464,
  7798784,
  8060928,
  15859712,
  7012352,
  7274496,
  12910592,
  3145728,
  65536,
  6750208,
  2818048,
  16646144,
  14090240,
  11206656,
  7733248,
  13238272,
  8519680,
  13172736,
  8192000,
  16384000,
  5832704,
  4653056,
  15728640,
  11337728,
  13893632,
  10616832,
  11468800,
  10223616,
  10747904,
  7471104,
  12582912,
  11993088,
  16580608,
  9633792,
  2490368,
  3538944,
  4128768,
  16187392,
  13369344,
  3407872,
  10813440,
  15007744,
  15794176,
  7405568,
  14155776,
  3211264,
  1376256,
  262144,
  13041664,
  2293760,
  12779520,
  1572864,
  9830400,
  327680,
  10092544,
  458752,
  1179648,
  8388608,
  14811136,
  15400960,
  2555904,
  11665408,
  7667712,
  589824,
  8585216,
  2883584,
  1703936,
  1769472,
  7208960,
  5898240,
  10485760,
  5373952,
  3866624,
  14024704,
  11730944,
  2686976,
  14876672,
  3080192,
  8650752,
  5439488,
  13697024,
  0,
  15532032,
  2097152,
  16515072,
  11599872,
  5963776,
  6946816,
  13303808,
  12451840,
  3735552,
  4849664,
  4980736,
  5767168,
  13565952,
  13631488,
  15663104,
  11141120,
  16449536,
  4390912,
  5046272,
  3342336,
  8716288,
  4521984,
  16318464,
  131072,
  8323072,
  5242880,
  3932160,
  10420224,
  11010048,
  5308416,
  10682368,
  4194304,
  9371648,
  9568256,
  10289152,
  3670016,
  16056320,
  12320768,
  11927552,
  14286848,
  2162688,
  1048576,
  16711680,
  15925248,
  13762560,
  13434880,
  786432,
  1245184,
  15466496,
  6225920,
  9895936,
  4456448,
  1507328,
  12845056,
  10944512,
  8257536,
  3997696,
  6553600,
  6094848,
  1638400,
  7536640,
  6291456,
  8454144,
  5177344,
  14417920,
  2228224,
  2752512,
  9437184,
  8912896,
  4587520,
  15597568,
  12058624,
  1310720,
  14548992,
  6160384,
  720896,
  14352384,
  14680064,
  3276800,
  3801088,
  655360,
  4784128,
  393216,
  2359296,
  6029312,
  12713984,
  13828096,
  11272192,
  6422528,
  9502720,
  9764864,
  14942208,
  7929856,
  15138816,
  13107200,
  3604480,
  7143424,
  9240576,
  13959168,
  5111808,
  11075584,
  7077888,
  5636096,
  15990784,
  15335424,
  6619136,
  7995392,
  11403264,
  524288,
  12189696,
  7864320,
  2424832,
  3014656,
  1835008,
  10878976,
  11796480,
  12976128,
  15204352,
  14483456,
  7602176,
  2031616,
  4915200,
  12386304,
  9109504,
  9043968,
  7340032,
  4063232,
  11862016,
  6684672,
  4718592,
  196608,
  16121856,
  917504,
  6356992,
  3473408,
  5701632,
  12124160,
  8781824,
  12648448,
  1900544,
  10354688,
  14745600,
  16252928,
  9961472,
  1114112,
  6881280,
  14221312,
  9306112,
  9699328,
  10158080,
  1966080,
  8847360,
  15269888,
  13500416,
  5570560,
  2621440,
  14614528,
  9175040,
  10551296,
  8978432,
  851968,
  12517376,
  15073280,
  4325376,
  6815744,
  4259840,
  10027008,
  2949120,
  983040,
  11534336,
  5505024,
  12255232,
  1441792
}; // idb
int dword_4CEF08[256] =
{
  25344,
  31744,
  30464,
  31488,
  61952,
  27392,
  28416,
  50432,
  12288,
  256,
  26368,
  11008,
  65024,
  55040,
  43776,
  30208,
  51712,
  33280,
  51456,
  32000,
  64000,
  22784,
  18176,
  61440,
  44288,
  54272,
  41472,
  44800,
  39936,
  41984,
  29184,
  49152,
  46848,
  64768,
  37632,
  9728,
  13824,
  16128,
  63232,
  52224,
  13312,
  42240,
  58624,
  61696,
  28928,
  55296,
  12544,
  5376,
  1024,
  50944,
  8960,
  49920,
  6144,
  38400,
  1280,
  39424,
  1792,
  4608,
  32768,
  57856,
  60160,
  9984,
  45568,
  29952,
  2304,
  33536,
  11264,
  6656,
  6912,
  28160,
  23040,
  40960,
  20992,
  15104,
  54784,
  45824,
  10496,
  58112,
  12032,
  33792,
  21248,
  53504,
  0,
  60672,
  8192,
  64512,
  45312,
  23296,
  27136,
  51968,
  48640,
  14592,
  18944,
  19456,
  22528,
  52992,
  53248,
  61184,
  43520,
  64256,
  17152,
  19712,
  13056,
  34048,
  17664,
  63744,
  512,
  32512,
  20480,
  15360,
  40704,
  43008,
  20736,
  41728,
  16384,
  36608,
  37376,
  40192,
  14336,
  62720,
  48128,
  46592,
  55808,
  8448,
  4096,
  65280,
  62208,
  53760,
  52480,
  3072,
  4864,
  60416,
  24320,
  38656,
  17408,
  5888,
  50176,
  42752,
  32256,
  15616,
  25600,
  23808,
  6400,
  29440,
  24576,
  33024,
  20224,
  56320,
  8704,
  10752,
  36864,
  34816,
  17920,
  60928,
  47104,
  5120,
  56832,
  24064,
  2816,
  56064,
  57344,
  12800,
  14848,
  2560,
  18688,
  1536,
  9216,
  23552,
  49664,
  54016,
  44032,
  25088,
  37120,
  38144,
  58368,
  30976,
  59136,
  51200,
  14080,
  27904,
  36096,
  54528,
  19968,
  43264,
  27648,
  22016,
  62464,
  59904,
  25856,
  31232,
  44544,
  2048,
  47616,
  30720,
  9472,
  11776,
  7168,
  42496,
  46080,
  50688,
  59392,
  56576,
  29696,
  7936,
  19200,
  48384,
  35584,
  35328,
  28672,
  15872,
  46336,
  26112,
  18432,
  768,
  62976,
  3584,
  24832,
  13568,
  22272,
  47360,
  34304,
  49408,
  7424,
  40448,
  57600,
  63488,
  38912,
  4352,
  26880,
  55552,
  36352,
  37888,
  39680,
  7680,
  34560,
  59648,
  52736,
  21760,
  10240,
  57088,
  35840,
  41216,
  35072,
  3328,
  48896,
  58880,
  16896,
  26624,
  16640,
  39168,
  11520,
  3840,
  45056,
  21504,
  47872,
  5632
}; // idb
int dword_4CF308[256] =
{
  99,
  124,
  119,
  123,
  242,
  107,
  111,
  197,
  48,
  1,
  103,
  43,
  254,
  215,
  171,
  118,
  202,
  130,
  201,
  125,
  250,
  89,
  71,
  240,
  173,
  212,
  162,
  175,
  156,
  164,
  114,
  192,
  183,
  253,
  147,
  38,
  54,
  63,
  247,
  204,
  52,
  165,
  229,
  241,
  113,
  216,
  49,
  21,
  4,
  199,
  35,
  195,
  24,
  150,
  5,
  154,
  7,
  18,
  128,
  226,
  235,
  39,
  178,
  117,
  9,
  131,
  44,
  26,
  27,
  110,
  90,
  160,
  82,
  59,
  214,
  179,
  41,
  227,
  47,
  132,
  83,
  209,
  0,
  237,
  32,
  252,
  177,
  91,
  106,
  203,
  190,
  57,
  74,
  76,
  88,
  207,
  208,
  239,
  170,
  251,
  67,
  77,
  51,
  133,
  69,
  249,
  2,
  127,
  80,
  60,
  159,
  168,
  81,
  163,
  64,
  143,
  146,
  157,
  56,
  245,
  188,
  182,
  218,
  33,
  16,
  255,
  243,
  210,
  205,
  12,
  19,
  236,
  95,
  151,
  68,
  23,
  196,
  167,
  126,
  61,
  100,
  93,
  25,
  115,
  96,
  129,
  79,
  220,
  34,
  42,
  144,
  136,
  70,
  238,
  184,
  20,
  222,
  94,
  11,
  219,
  224,
  50,
  58,
  10,
  73,
  6,
  36,
  92,
  194,
  211,
  172,
  98,
  145,
  149,
  228,
  121,
  231,
  200,
  55,
  109,
  141,
  213,
  78,
  169,
  108,
  86,
  244,
  234,
  101,
  122,
  174,
  8,
  186,
  120,
  37,
  46,
  28,
  166,
  180,
  198,
  232,
  221,
  116,
  31,
  75,
  189,
  139,
  138,
  112,
  62,
  181,
  102,
  72,
  3,
  246,
  14,
  97,
  53,
  87,
  185,
  134,
  193,
  29,
  158,
  225,
  248,
  152,
  17,
  105,
  217,
  142,
  148,
  155,
  30,
  135,
  233,
  206,
  85,
  40,
  223,
  140,
  161,
  137,
  13,
  191,
  230,
  66,
  104,
  65,
  153,
  45,
  15,
  176,
  84,
  187,
  22
}; // idb
int dword_4CF708[256] =
{
  1374988112,
  2118214995,
  437757123,
  975658646,
  1001089995,
  530400753,
  -1392879445,
  1273168787,
  540080725,
  -1384747530,
  -1999866223,
  -184398811,
  1340463100,
  -987051049,
  641025152,
  -1251826801,
  -558802359,
  632953703,
  1172967064,
  1576976609,
  -1020300030,
  -2125664238,
  -1924753501,
  1809054150,
  59727847,
  361929877,
  -1083344149,
  -1789765158,
  -725712083,
  1484005843,
  1239443753,
  -1899378620,
  1975683434,
  -191989384,
  -1722270101,
  666464733,
  -1092530250,
  -259478249,
  -920605594,
  2110667444,
  1675577880,
  -451268222,
  -1756286112,
  1649639237,
  -1318815776,
  -1150570876,
  -25059300,
  -116905068,
  1883793496,
  -1891238631,
  -1797362553,
  1383856311,
  -1418472669,
  1917518562,
  -484470953,
  1716890410,
  -1293211641,
  800440835,
  -2033878118,
  -751368027,
  807962610,
  599762354,
  33778362,
  -317291940,
  -1966138325,
  -1485196142,
  -217582864,
  1315562145,
  1708848333,
  101039829,
  -785096161,
  -995688822,
  875451293,
  -1561111136,
  92987698,
  -1527321739,
  193195065,
  1080094634,
  1584504582,
  -1116860335,
  1042385657,
  -1763899843,
  -583137874,
  1306967366,
  -1856729675,
  1908694277,
  67556463,
  1615861247,
  429456164,
  -692196969,
  -1992277044,
  1742315127,
  -1326955843,
  126454664,
  -417768648,
  2043211483,
  -1585706425,
  2084704233,
  -125559095,
  0,
  159417987,
  841739592,
  504459436,
  1817866830,
  -49348613,
  260388950,
  1034867998,
  908933415,
  168810852,
  1750902305,
  -1688513327,
  607530554,
  202008497,
  -1822955761,
  -1259432238,
  463180190,
  -2134850225,
  1641816226,
  1517767529,
  470948374,
  -493635062,
  -1063245083,
  1008918595,
  303765277,
  235474187,
  -225720403,
  766945465,
  337553864,
  1475418501,
  -1351284916,
  -291906117,
  -1551933187,
  -150919521,
  1551037884,
  1147550661,
  1543208500,
  -1958532746,
  -886847780,
  -1225917336,
  -1192955549,
  -684598070,
  1113818384,
  328671808,
  -2067394272,
  -2058738563,
  -759480840,
  -1359400431,
  -953573011,
  496906059,
  -592301837,
  226906860,
  2009195472,
  733156972,
  -1452230247,
  294930682,
  1206477858,
  -1459843900,
  -1594867942,
  1451044056,
  573804783,
  -2025238841,
  -650587711,
  -1932877058,
  -1730933962,
  -1493859889,
  -1518674392,
  -625504730,
  1068351396,
  742039012,
  1350078989,
  1784663195,
  1417561698,
  -158526526,
  -1864845080,
  775550814,
  -2101104651,
  -1621262146,
  1775276924,
  1876241833,
  -819653965,
  -928212677,
  270040487,
  -392404114,
  -616842373,
  -853116919,
  1851332852,
  -325404927,
  -2091935064,
  -426414491,
  -1426069890,
  566021896,
  -283776794,
  -1159226407,
  1248802510,
  -358676012,
  699432150,
  832877231,
  708780849,
  -962227152,
  899835584,
  1951317047,
  -58537306,
  -527380304,
  866637845,
  -251357110,
  1106041591,
  2144161806,
  395441711,
  1984812685,
  1139781709,
  -861254316,
  -459930401,
  -1630423581,
  1282050075,
  -1054072904,
  1181045119,
  -1654724092,
  25965917,
  -91786125,
  -83148498,
  -1285087910,
  -1831087534,
  -384805325,
  1842759443,
  -1697160820,
  933301370,
  1509430414,
  -351060855,
  -827774994,
  -1218328267,
  -518199827,
  2051518780,
  -1663901863,
  1441952575,
  404016761,
  1942435775,
  1408749034,
  1610459739,
  -549621996,
  2017778566,
  -894438527,
  -1184316354,
  941896748,
  -1029488545,
  371049330,
  -1126030068,
  675039627,
  -15887039,
  967311729,
  135050206,
  -659233636,
  1683407248,
  2076935265,
  -718096784,
  1215061108,
  -793225406
}; // idb
int dword_4CFB08[256] =
{
  1347548327,
  1400783205,
  -1021700188,
  -1774573730,
  -885281941,
  -249586363,
  -1414727080,
  -1823743229,
  1428173050,
  -156404115,
  -1853305738,
  636813900,
  -61872681,
  -674944309,
  -2144979644,
  -1883938141,
  1239331162,
  1730525723,
  -1740248562,
  -513933632,
  46346101,
  310463728,
  -1551022441,
  -966011911,
  -419197089,
  -1793748324,
  -339776134,
  -627748263,
  768917123,
  -749177823,
  692707433,
  1150208456,
  1786102409,
  2029293177,
  1805211710,
  -584599183,
  -1229004465,
  401639597,
  1724457132,
  -1266823622,
  409198410,
  -2098914767,
  1620529459,
  1164071807,
  -525245321,
  -2068091986,
  486441376,
  -1795618773,
  1483753576,
  428819965,
  -2020286868,
  -1219331080,
  598438867,
  -495826174,
  1474502543,
  711349675,
  129166120,
  53458370,
  -1702443653,
  -1512884472,
  -231724921,
  -1306280027,
  -1174273174,
  1559041666,
  730517276,
  -1834518092,
  -252508174,
  -1588696606,
  -848962828,
  -721025602,
  533804130,
  -1966823682,
  -1657524653,
  -1599933611,
  839224033,
  1973745387,
  957055980,
  -1438621457,
  106852767,
  1371368976,
  -113368694,
  1033297158,
  -1361232379,
  1179510461,
  -1248766835,
  91341917,
  1862534868,
  -10465259,
  605657339,
  -1747534359,
  -863420349,
  2003294622,
  -1112479678,
  -2012771957,
  954669403,
  -612775698,
  1201765386,
  -377732593,
  -906460130,
  0,
  -2096529274,
  1211247597,
  -1407315600,
  1315723890,
  -67301633,
  1443857720,
  507358933,
  657861945,
  1678381017,
  560487590,
  -778347692,
  975451694,
  -1324610969,
  261314535,
  -759894378,
  -1642357871,
  1333838021,
  -1570644960,
  1767536459,
  370938394,
  182621114,
  -440360918,
  1128014560,
  487725847,
  185469197,
  -1376613433,
  -1188186456,
  -938205527,
  -2057834215,
  1286567175,
  -1141990947,
  -39616672,
  -1611202266,
  -1134791947,
  -985373125,
  878443390,
  1988838185,
  -590666810,
  1756818940,
  1673061617,
  -891866660,
  272786309,
  1075025698,
  545572369,
  2105887268,
  -120407235,
  296679730,
  1841768865,
  1260232239,
  -203640272,
  -334657966,
  -797457949,
  1814803222,
  -1716948807,
  -99511224,
  575138148,
  -995558260,
  446754879,
  -665420500,
  -282971248,
  -947435186,
  -1042728751,
  -24327518,
  915985419,
  -811141759,
  681933534,
  651868046,
  -1539330625,
  -466863459,
  223377554,
  -1687527476,
  1649704518,
  -1024029421,
  -393160520,
  1580087799,
  -175979601,
  -1096852096,
  2087309459,
  -1452288723,
  -1278270190,
  1003007129,
  -1492117379,
  1860738147,
  2077965243,
  164439672,
  -194094824,
  32283319,
  -1467789414,
  1709610350,
  2125135846,
  136428751,
  -420538904,
  -642062437,
  -833982666,
  -722821367,
  -701910916,
  -1355701070,
  824852259,
  818324884,
  -1070226842,
  930369212,
  -1493400886,
  -1327460144,
  355706840,
  1257309336,
  -146674470,
  243256656,
  790073846,
  -1921626666,
  1296297904,
  1422699085,
  -538667516,
  -476130891,
  457992840,
  -1195299809,
  2135319889,
  77422314,
  1560382517,
  1945798516,
  788204353,
  1521706781,
  1385356242,
  870912086,
  325965383,
  -1936009375,
  2050466060,
  -1906706412,
  -1981082820,
  -288446169,
  901210569,
  -304014107,
  1014646705,
  1503449823,
  1062597235,
  2031621326,
  -1082931401,
  -363595827,
  1533017514,
  350174575,
  -2038938405,
  -2117423117,
  1052338372,
  741876788,
  1606591296,
  1914052035,
  213705253,
  -1960297399,
  1107234197,
  1899603969,
  -569897805,
  -1663519516,
  -1872472383,
  1635502980,
  1893020342,
  1950903388,
  1120974935
}; // idb
int dword_4CFF08[256] =
{
  -1487908364,
  1699970625,
  -1530717673,
  1586903591,
  1808481195,
  1173430173,
  1487645946,
  59984867,
  -95084496,
  1844882806,
  1989249228,
  1277555970,
  -671330331,
  -875051734,
  1149249077,
  -1550863006,
  1514790577,
  459744698,
  244860394,
  -1058972162,
  1963115311,
  -267222708,
  -1750889146,
  -104436781,
  1608975247,
  -1667951214,
  2062270317,
  1507497298,
  -2094148418,
  567498868,
  1764313568,
  -935031095,
  -1989511742,
  2037970062,
  1047239000,
  1910319033,
  1337376481,
  -1390940024,
  -1402549984,
  984907214,
  1243112415,
  830661914,
  861968209,
  2135253587,
  2011214180,
  -1367032981,
  -1608712575,
  731183368,
  1750626376,
  -48656571,
  1820824798,
  -122203525,
  -752637069,
  48394827,
  -1890065633,
  -1423284651,
  671593195,
  -1039978571,
  2073724613,
  145085239,
  -2014171096,
  -1515052097,
  1790575107,
  -2107839210,
  472615631,
  -1265457287,
  -219090169,
  -492745111,
  -187865638,
  -1093335547,
  1646252340,
  -24460122,
  1402811438,
  1436590835,
  -516815478,
  -344611594,
  -331805821,
  -274055072,
  -1626972559,
  273792366,
  -1963377119,
  104699613,
  95345982,
  -1119466010,
  -1917480620,
  1560637892,
  -730921978,
  369057872,
  -81520232,
  -375925059,
  1137477952,
  -1636341799,
  1119727848,
  -1954019447,
  1530455833,
  -287606328,
  172466556,
  266959938,
  516552836,
  0,
  -2038232704,
  -314035669,
  1890328081,
  1917742170,
  -262898,
  945164165,
  -719438418,
  958871085,
  -647755249,
  -1507760036,
  1423022939,
  775562294,
  1739656202,
  -418409641,
  -1764576018,
  -1851909221,
  -984645440,
  547512796,
  1265195639,
  437656594,
  -1173691757,
  719700128,
  -532464606,
  387781147,
  218828297,
  -944901493,
  -1464259146,
  -1446505442,
  428169201,
  122466165,
  -574886247,
  1627235199,
  648017665,
  -172204942,
  1002783846,
  2117360635,
  695634755,
  -958608605,
  -60246291,
  -245122844,
  -590686415,
  -2062531997,
  574624663,
  287343814,
  612205898,
  1039717051,
  840019705,
  -1586641111,
  793451934,
  821288114,
  1391201670,
  -472877119,
  376187827,
  -1181111952,
  1224348052,
  1679968233,
  -1933268740,
  1058709744,
  752375421,
  -1863376333,
  1321699145,
  -775825096,
  -1560376118,
  188127444,
  -2117097739,
  -567761542,
  -1910056265,
  -1079754835,
  -1645990854,
  -1844621192,
  -862229921,
  1180849278,
  331544205,
  -1192718120,
  -144822727,
  -1342864701,
  -2134991011,
  -1820562992,
  766078933,
  313773861,
  -1724135252,
  2108100632,
  1668212892,
  -1149510853,
  2013908262,
  418672217,
  -1224610662,
  -1700232369,
  1852171925,
  -427906305,
  -821550660,
  -387518699,
  -1680229657,
  919489135,
  164948639,
  2094410160,
  -1297141340,
  590424639,
  -1808742747,
  1723872674,
  -1137216434,
  -895026046,
  -793714544,
  -669699161,
  -1739919100,
  -621329940,
  1343127501,
  -164685935,
  -695372211,
  -1337113617,
  1297403050,
  81781910,
  -1243373871,
  -2011476886,
  532201772,
  1367295589,
  -368796322,
  895287692,
  1953757831,
  1093597963,
  492483431,
  -766340389,
  1446242576,
  1192455638,
  1636604631,
  209336225,
  344873464,
  1015671571,
  669961897,
  -919226527,
  -437395172,
  -1321436601,
  -547775278,
  1933530610,
  -830924780,
  935293895,
  -840281097,
  -1436852227,
  1863638845,
  -611944380,
  -209597777,
  -1002522264,
  875313188,
  1080017571,
  -1015933411,
  621591778,
  1233856572,
  -1790836979,
  24197544,
  -1277294580,
  -459482956,
  -1047501738,
  -2073986101,
  -1234119374,
  1551124588,
  1463996600
}; // idb
int dword_4D0308[256] =
{
  -190361519,
  1097159550,
  396673818,
  660510266,
  -1418998981,
  -1656360673,
  -94852180,
  -486304949,
  821712160,
  1986918061,
  -864644728,
  38544885,
  -438830001,
  718002117,
  893681702,
  1654886325,
  -1319482914,
  -1172609243,
  -368142267,
  -20913827,
  796197571,
  1290801793,
  1184342925,
  -738605461,
  -1889540349,
  -1835231979,
  1836772287,
  1381620373,
  -1098699308,
  1948373848,
  -529979063,
  -909622130,
  -1031181707,
  -1904641804,
  1480485785,
  -1183720153,
  -514869570,
  -2001922064,
  548169417,
  -835013507,
  -548792221,
  439452389,
  1362321559,
  1400849762,
  1685577905,
  1806599355,
  -2120213250,
  137073913,
  1214797936,
  1174215055,
  -563312748,
  2079897426,
  1943217067,
  1258480242,
  529487843,
  1437280870,
  -349698126,
  -1245576401,
  -981755258,
  923313619,
  679998000,
  -1079659997,
  57326082,
  377642221,
  -820237430,
  2041877159,
  133361907,
  1776460110,
  -621490843,
  96392454,
  878845905,
  -1493267772,
  777231668,
  -212492126,
  -1964953083,
  -152341084,
  -2081670901,
  1626319424,
  1906247262,
  1846563261,
  562755902,
  -586793578,
  1040559837,
  -423803315,
  1418573201,
  -1000536719,
  114585348,
  1343618912,
  -1728371687,
  -1108764714,
  1078185097,
  -643926169,
  -398279248,
  -1987344377,
  425408743,
  -923870343,
  2081048481,
  1108339068,
  -2078357000,
  0,
  -2138668279,
  736970802,
  292596766,
  1517440620,
  251657213,
  -2059905521,
  -1361764803,
  758720310,
  265905162,
  1554391400,
  1532285339,
  908999204,
  174567692,
  1474760595,
  -292105548,
  -1684955621,
  -1060810880,
  -601841055,
  2001430874,
  303699484,
  -1816524062,
  -1607801408,
  585122620,
  454499602,
  151849742,
  -1949848078,
  -1230456531,
  514443284,
  -249985705,
  1963412655,
  -1713521682,
  2137062819,
  19308535,
  1928707164,
  1715193156,
  -75615141,
  1126790795,
  600235211,
  -302225226,
  -453942344,
  836553431,
  1669664834,
  -1759363053,
  -971956092,
  1243905413,
  -1153566510,
  -114159186,
  698445255,
  -1641067747,
  -1305414692,
  -2041385971,
  -1042034569,
  -1290376149,
  1891211689,
  -1807156719,
  -379313593,
  -57883480,
  -264299872,
  2100090966,
  865136418,
  1229899655,
  953270745,
  -895287668,
  -737462632,
  -176042074,
  2061379749,
  -1215420710,
  -1379949505,
  983426092,
  2022837584,
  1607244650,
  2118541908,
  -1928084746,
  -658970480,
  972512814,
  -1011878526,
  1568718495,
  -795640727,
  -718427793,
  621982671,
  -1399243832,
  410887952,
  -1671205144,
  1002142683,
  645401037,
  1494807662,
  -1699282452,
  1335535747,
  -1787927066,
  -1671510,
  -1127282655,
  367585007,
  -409216582,
  1865862730,
  -1626745622,
  -1333995991,
  -1531793615,
  1059270954,
  -1517014842,
  -1570324427,
  1320957812,
  -2100648196,
  -1865371424,
  -1479011021,
  77089521,
  -321194175,
  -850391425,
  -1846137065,
  1305906550,
  -273658557,
  -1437772596,
  -1778065436,
  -776608866,
  1787304780,
  740276417,
  1699839814,
  1592394909,
  -1942659839,
  -2022411270,
  188821243,
  1729977011,
  -606973294,
  274084841,
  -699985043,
  -681472870,
  -1593017801,
  -132870567,
  322734571,
  -1457000754,
  1640576439,
  484830689,
  1202797690,
  -757114468,
  -227328171,
  349075736,
  -952647821,
  -137500077,
  -39167137,
  1030690015,
  1155237496,
  -1342996022,
  1757691577,
  607398968,
  -1556062270,
  499347990,
  -500888388,
  1011452712,
  227885567,
  -1476300487,
  213114376,
  -1260086056,
  1455525988,
  -880516741,
  850817237,
  1817998408,
  -1202240816
}; // idb
int dword_4D0708[256] =
{
  1375731712,
  150994944,
  1778384896,
  -721420288,
  805306368,
  905969664,
  -1526726656,
  939524096,
  -1090519040,
  1073741824,
  -1560281088,
  -1644167168,
  -2130706432,
  -218103808,
  -687865856,
  -83886080,
  2080374784,
  -486539264,
  956301312,
  -2113929216,
  -1694498816,
  788529152,
  -16777216,
  -2030043136,
  872415232,
  -1912602624,
  1124073472,
  1140850688,
  -1006632960,
  -570425344,
  -385875968,
  -889192448,
  1409286144,
  2063597568,
  -1811939328,
  838860800,
  -1509949440,
  -1040187392,
  587202560,
  1023410176,
  -301989888,
  1275068416,
  -1795162112,
  184549376,
  1107296256,
  -100663296,
  -1023410176,
  1308622848,
  134217728,
  771751936,
  -1593835520,
  1711276032,
  671088640,
  -654311424,
  603979776,
  -1308622848,
  1979711488,
  1526726656,
  -1577058304,
  1224736768,
  1828716544,
  -1962934272,
  -788529152,
  620756992,
  1912602624,
  -134217728,
  -167772160,
  1677721600,
  -2046820352,
  1744830464,
  -1744830464,
  369098752,
  -738197504,
  -1543503872,
  1543503872,
  -872415232,
  1560281088,
  1694498816,
  -1241513984,
  -1845493760,
  1811939328,
  1879048192,
  1207959552,
  1342177280,
  -50331648,
  -318767104,
  -1191182336,
  -637534208,
  1577058304,
  352321536,
  1174405120,
  1459617792,
  -1493172224,
  -1929379840,
  -1660944384,
  -2080374784,
  -1879048192,
  -671088640,
  -1426063360,
  0,
  -1946157056,
  -1140850688,
  -754974720,
  167772160,
  -150994944,
  -469762048,
  1476395008,
  83886080,
  -1207959552,
  -1291845632,
  1157627904,
  100663296,
  -805306368,
  738197504,
  503316480,
  -1895825408,
  -905969664,
  1056964608,
  251658240,
  33554432,
  -1056964608,
  -1358954496,
  -1124073472,
  50331648,
  16777216,
  318767104,
  -1979711488,
  1795162112,
  973078528,
  -1862270976,
  285212672,
  1090519040,
  1325400064,
  1728053248,
  -603979776,
  -369098752,
  -1761607680,
  -234881024,
  -822083584,
  -838860800,
  -268435456,
  -1275068416,
  -436207616,
  1929379840,
  -1778384896,
  -1409286144,
  1946157056,
  570425344,
  -419430400,
  -1392508928,
  889192448,
  -2063597568,
  -503316480,
  -117440512,
  922746880,
  -402653184,
  469762048,
  1962934272,
  -553648128,
  1845493760,
  1191182336,
  -251658240,
  436207616,
  1895825408,
  486539264,
  687865856,
  -989855744,
  -1996488704,
  1862270976,
  -1224736768,
  1644167168,
  234881024,
  -1442840576,
  402653184,
  -1107296256,
  452984832,
  -67108864,
  1442840576,
  1040187392,
  1258291200,
  -973078528,
  -771751936,
  2030043136,
  536870912,
  -1711276032,
  -620756992,
  -1073741824,
  -33554432,
  2013265920,
  -855638016,
  1509949440,
  -201326592,
  520093696,
  -587202560,
  -1476395008,
  855638016,
  -2013265920,
  117440512,
  -956301312,
  822083584,
  -1325400064,
  301989888,
  268435456,
  1493172224,
  654311424,
  2147483648,
  -335544320,
  1593835520,
  1610612736,
  1358954496,
  2130706432,
  -1459617792,
  419430400,
  -1258291200,
  1241513984,
  218103808,
  754974720,
  -452984832,
  2046820352,
  -1627389952,
  -1828716544,
  -922746880,
  -1677721600,
  -285212672,
  -1610612736,
  -536870912,
  989855744,
  1291845632,
  -1375731712,
  704643072,
  -184549376,
  -1342177280,
  -939524096,
  -352321536,
  -1157627904,
  1006632960,
  -2097152000,
  1392508928,
  -1728053248,
  1627389952,
  385875968,
  721420288,
  67108864,
  2113929216,
  -1174405120,
  1996488704,
  -704643072,
  637534208,
  -520093696,
  1761607680,
  335544320,
  1660944384,
  1426063360,
  553648128,
  201326592,
  2097152000
}; // idb
int dword_4D0B08[256] =
{
  5373952,
  589824,
  6946816,
  13959168,
  3145728,
  3538944,
  10813440,
  3670016,
  12517376,
  4194304,
  10682368,
  10354688,
  8454144,
  15925248,
  14090240,
  16449536,
  8126464,
  14876672,
  3735552,
  8519680,
  10158080,
  3080192,
  16711680,
  8847360,
  3407872,
  9306112,
  4390912,
  4456448,
  12845056,
  14548992,
  15269888,
  13303808,
  5505024,
  8060928,
  9699328,
  3276800,
  10878976,
  12713984,
  2293760,
  3997696,
  15597568,
  4980736,
  9764864,
  720896,
  4325376,
  16384000,
  12779520,
  5111808,
  524288,
  3014656,
  10551296,
  6684672,
  2621440,
  14221312,
  2359296,
  11665408,
  7733248,
  5963776,
  10616832,
  4784128,
  7143424,
  9109504,
  13697024,
  2424832,
  7471104,
  16252928,
  16121856,
  6553600,
  8781824,
  6815744,
  9961472,
  1441792,
  13893632,
  10747904,
  6029312,
  13369344,
  6094848,
  6619136,
  11927552,
  9568256,
  7077888,
  7340032,
  4718592,
  5242880,
  16580608,
  15532032,
  12124160,
  14286848,
  6160384,
  1376256,
  4587520,
  5701632,
  10944512,
  9240576,
  10289152,
  8650752,
  9437184,
  14155776,
  11206656,
  0,
  9175040,
  12320768,
  13828096,
  655360,
  16187392,
  14942208,
  5767168,
  327680,
  12058624,
  11730944,
  4521984,
  393216,
  13631488,
  2883584,
  1966080,
  9371648,
  13238272,
  4128768,
  983040,
  131072,
  12648448,
  11468800,
  12386304,
  196608,
  65536,
  1245184,
  9043968,
  7012352,
  3801088,
  9502720,
  1114112,
  4259840,
  5177344,
  6750208,
  14417920,
  15335424,
  9895936,
  15859712,
  13565952,
  13500416,
  15728640,
  11796480,
  15073280,
  7536640,
  9830400,
  11272192,
  7602176,
  2228224,
  15138816,
  11337728,
  3473408,
  8716288,
  14811136,
  16318464,
  3604480,
  15204352,
  1835008,
  7667712,
  14614528,
  7208960,
  4653056,
  15794176,
  1703936,
  7405568,
  1900544,
  2686976,
  12910592,
  8978432,
  7274496,
  11993088,
  6422528,
  917504,
  11141120,
  1572864,
  12451840,
  1769472,
  16515072,
  5636096,
  4063232,
  4915200,
  12976128,
  13762560,
  7929856,
  2097152,
  10092544,
  14352384,
  12582912,
  16646144,
  7864320,
  13434880,
  5898240,
  15990784,
  2031616,
  14483456,
  11010048,
  3342336,
  8912896,
  458752,
  13041664,
  3211264,
  11599872,
  1179648,
  1048576,
  5832704,
  2555904,
  8388608,
  15466496,
  6225920,
  6291456,
  5308416,
  8323072,
  11075584,
  1638400,
  11862016,
  4849664,
  851968,
  2949120,
  15007744,
  7995392,
  10420224,
  9633792,
  13172736,
  10223616,
  15663104,
  10485760,
  14680064,
  3866624,
  5046272,
  11403264,
  2752512,
  16056320,
  11534336,
  13107200,
  15400960,
  12255232,
  3932160,
  8585216,
  5439488,
  10027008,
  6356992,
  1507328,
  2818048,
  262144,
  8257536,
  12189696,
  7798784,
  14024704,
  2490368,
  14745600,
  6881280,
  1310720,
  6488064,
  5570560,
  2162688,
  786432,
  8192000
}; // idb
int dword_4D0F08[256] =
{
  20992,
  2304,
  27136,
  54528,
  12288,
  13824,
  42240,
  14336,
  48896,
  16384,
  41728,
  40448,
  33024,
  62208,
  55040,
  64256,
  31744,
  58112,
  14592,
  33280,
  39680,
  12032,
  65280,
  34560,
  13312,
  36352,
  17152,
  17408,
  50176,
  56832,
  59648,
  51968,
  21504,
  31488,
  37888,
  12800,
  42496,
  49664,
  8960,
  15616,
  60928,
  19456,
  38144,
  2816,
  16896,
  64000,
  49920,
  19968,
  2048,
  11776,
  41216,
  26112,
  10240,
  55552,
  9216,
  45568,
  30208,
  23296,
  41472,
  18688,
  27904,
  35584,
  53504,
  9472,
  29184,
  63488,
  62976,
  25600,
  34304,
  26624,
  38912,
  5632,
  54272,
  41984,
  23552,
  52224,
  23808,
  25856,
  46592,
  37376,
  27648,
  28672,
  18432,
  20480,
  64768,
  60672,
  47360,
  55808,
  24064,
  5376,
  17920,
  22272,
  42752,
  36096,
  40192,
  33792,
  36864,
  55296,
  43776,
  0,
  35840,
  48128,
  54016,
  2560,
  63232,
  58368,
  22528,
  1280,
  47104,
  45824,
  17664,
  1536,
  53248,
  11264,
  7680,
  36608,
  51712,
  16128,
  3840,
  512,
  49408,
  44800,
  48384,
  768,
  256,
  4864,
  35328,
  27392,
  14848,
  37120,
  4352,
  16640,
  20224,
  26368,
  56320,
  59904,
  38656,
  61952,
  52992,
  52736,
  61440,
  46080,
  58880,
  29440,
  38400,
  44032,
  29696,
  8704,
  59136,
  44288,
  13568,
  34048,
  57856,
  63744,
  14080,
  59392,
  7168,
  29952,
  57088,
  28160,
  18176,
  61696,
  6656,
  28928,
  7424,
  10496,
  50432,
  35072,
  28416,
  46848,
  25088,
  3584,
  43520,
  6144,
  48640,
  6912,
  64512,
  22016,
  15872,
  19200,
  50688,
  53760,
  30976,
  8192,
  39424,
  56064,
  49152,
  65024,
  30720,
  52480,
  23040,
  62464,
  7936,
  56576,
  43008,
  13056,
  34816,
  1792,
  50944,
  12544,
  45312,
  4608,
  4096,
  22784,
  9984,
  32768,
  60416,
  24320,
  24576,
  20736,
  32512,
  43264,
  6400,
  46336,
  18944,
  3328,
  11520,
  58624,
  31232,
  40704,
  37632,
  51456,
  39936,
  61184,
  40960,
  57344,
  15104,
  19712,
  44544,
  10752,
  62720,
  45056,
  51200,
  60160,
  47872,
  15360,
  33536,
  21248,
  39168,
  24832,
  5888,
  11008,
  1024,
  32256,
  47616,
  30464,
  54784,
  9728,
  57600,
  26880,
  5120,
  25344,
  21760,
  8448,
  3072,
  32000
}; // idb
int dword_4D1308[256] =
{
  82,
  9,
  106,
  213,
  48,
  54,
  165,
  56,
  191,
  64,
  163,
  158,
  129,
  243,
  215,
  251,
  124,
  227,
  57,
  130,
  155,
  47,
  255,
  135,
  52,
  142,
  67,
  68,
  196,
  222,
  233,
  203,
  84,
  123,
  148,
  50,
  166,
  194,
  35,
  61,
  238,
  76,
  149,
  11,
  66,
  250,
  195,
  78,
  8,
  46,
  161,
  102,
  40,
  217,
  36,
  178,
  118,
  91,
  162,
  73,
  109,
  139,
  209,
  37,
  114,
  248,
  246,
  100,
  134,
  104,
  152,
  22,
  212,
  164,
  92,
  204,
  93,
  101,
  182,
  146,
  108,
  112,
  72,
  80,
  253,
  237,
  185,
  218,
  94,
  21,
  70,
  87,
  167,
  141,
  157,
  132,
  144,
  216,
  171,
  0,
  140,
  188,
  211,
  10,
  247,
  228,
  88,
  5,
  184,
  179,
  69,
  6,
  208,
  44,
  30,
  143,
  202,
  63,
  15,
  2,
  193,
  175,
  189,
  3,
  1,
  19,
  138,
  107,
  58,
  145,
  17,
  65,
  79,
  103,
  220,
  234,
  151,
  242,
  207,
  206,
  240,
  180,
  230,
  115,
  150,
  172,
  116,
  34,
  231,
  173,
  53,
  133,
  226,
  249,
  55,
  232,
  28,
  117,
  223,
  110,
  71,
  241,
  26,
  113,
  29,
  41,
  197,
  137,
  111,
  183,
  98,
  14,
  170,
  24,
  190,
  27,
  252,
  86,
  62,
  75,
  198,
  210,
  121,
  32,
  154,
  219,
  192,
  254,
  120,
  205,
  90,
  244,
  31,
  221,
  168,
  51,
  136,
  7,
  199,
  49,
  177,
  18,
  16,
  89,
  39,
  128,
  236,
  95,
  96,
  81,
  127,
  169,
  25,
  181,
  74,
  13,
  45,
  229,
  122,
  159,
  147,
  201,
  156,
  239,
  160,
  224,
  59,
  77,
  174,
  42,
  245,
  176,
  200,
  235,
  187,
  60,
  131,
  83,
  153,
  97,
  23,
  43,
  4,
  126,
  186,
  119,
  214,
  38,
  225,
  105,
  20,
  99,
  85,
  33,
  12,
  125
}; // idb
int dword_4D1708[256] =
{
  0,
  235474187,
  470948374,
  303765277,
  941896748,
  908933415,
  607530554,
  708780849,
  1883793496,
  2118214995,
  1817866830,
  1649639237,
  1215061108,
  1181045119,
  1417561698,
  1517767529,
  -527380304,
  -291906117,
  -58537306,
  -225720403,
  -659233636,
  -692196969,
  -995688822,
  -894438527,
  -1864845080,
  -1630423581,
  -1932877058,
  -2101104651,
  -1459843900,
  -1493859889,
  -1259432238,
  -1159226407,
  -616842373,
  -718096784,
  -953573011,
  -920605594,
  -484470953,
  -317291940,
  -15887039,
  -251357110,
  -1418472669,
  -1518674392,
  -1218328267,
  -1184316354,
  -1822955761,
  -1654724092,
  -1891238631,
  -2125664238,
  1001089995,
  899835584,
  666464733,
  699432150,
  59727847,
  226906860,
  530400753,
  294930682,
  1273168787,
  1172967064,
  1475418501,
  1509430414,
  1942435775,
  2110667444,
  1876241833,
  1641816226,
  -1384747530,
  -1551933187,
  -1318815776,
  -1083344149,
  -1789765158,
  -1688513327,
  -1992277044,
  -2025238841,
  -583137874,
  -751368027,
  -1054072904,
  -819653965,
  -451268222,
  -351060855,
  -116905068,
  -150919521,
  1306967366,
  1139781709,
  1374988112,
  1610459739,
  1975683434,
  2076935265,
  1775276924,
  1742315127,
  1034867998,
  866637845,
  566021896,
  800440835,
  92987698,
  193195065,
  429456164,
  395441711,
  1984812685,
  2017778566,
  1784663195,
  1683407248,
  1315562145,
  1080094634,
  1383856311,
  1551037884,
  101039829,
  135050206,
  437757123,
  337553864,
  1042385657,
  807962610,
  573804783,
  742039012,
  -1763899843,
  -1730933962,
  -1966138325,
  -2067394272,
  -1359400431,
  -1594867942,
  -1293211641,
  -1126030068,
  -426414491,
  -392404114,
  -91786125,
  -191989384,
  -558802359,
  -793225406,
  -1029488545,
  -861254316,
  1106041591,
  1340463100,
  1576976609,
  1408749034,
  2043211483,
  2009195472,
  1708848333,
  1809054150,
  832877231,
  1068351396,
  766945465,
  599762354,
  159417987,
  126454664,
  361929877,
  463180190,
  -1585706425,
  -1351284916,
  -1116860335,
  -1285087910,
  -1722270101,
  -1756286112,
  -2058738563,
  -1958532746,
  -785096161,
  -549621996,
  -853116919,
  -1020300030,
  -384805325,
  -417768648,
  -184398811,
  -83148498,
  -1697160820,
  -1797362553,
  -2033878118,
  -1999866223,
  -1561111136,
  -1392879445,
  -1092530250,
  -1326955843,
  -358676012,
  -459930401,
  -158526526,
  -125559095,
  -759480840,
  -592301837,
  -827774994,
  -1063245083,
  2051518780,
  1951317047,
  1716890410,
  1750902305,
  1113818384,
  1282050075,
  1584504582,
  1350078989,
  168810852,
  67556463,
  371049330,
  404016761,
  841739592,
  1008918595,
  775550814,
  540080725,
  -325404927,
  -493635062,
  -259478249,
  -25059300,
  -725712083,
  -625504730,
  -928212677,
  -962227152,
  -1663901863,
  -1831087534,
  -2134850225,
  -1899378620,
  -1527321739,
  -1426069890,
  -1192955549,
  -1225917336,
  202008497,
  33778362,
  270040487,
  504459436,
  875451293,
  975658646,
  675039627,
  641025152,
  2084704233,
  1917518562,
  1615861247,
  1851332852,
  1147550661,
  1248802510,
  1484005843,
  1451044056,
  933301370,
  967311729,
  733156972,
  632953703,
  260388950,
  25965917,
  328671808,
  496906059,
  1206477858,
  1239443753,
  1543208500,
  1441952575,
  2144161806,
  1908694277,
  1675577880,
  1842759443,
  -684598070,
  -650587711,
  -886847780,
  -987051049,
  -283776794,
  -518199827,
  -217582864,
  -49348613,
  -1485196142,
  -1452230247,
  -1150570876,
  -1251826801,
  -1621262146,
  -1856729675,
  -2091935064,
  -1924753501
}; // idb
int dword_4D1B08[256] =
{
  0,
  185469197,
  370938394,
  487725847,
  741876788,
  657861945,
  975451694,
  824852259,
  1483753576,
  1400783205,
  1315723890,
  1164071807,
  1950903388,
  2135319889,
  1649704518,
  1767536459,
  -1327460144,
  -1141990947,
  -1493400886,
  -1376613433,
  -1663519516,
  -1747534359,
  -1966823682,
  -2117423117,
  -393160520,
  -476130891,
  -24327518,
  -175979601,
  -995558260,
  -811141759,
  -759894378,
  -642062437,
  2077965243,
  1893020342,
  1841768865,
  1724457132,
  1474502543,
  1559041666,
  1107234197,
  1257309336,
  598438867,
  681933534,
  901210569,
  1052338372,
  261314535,
  77422314,
  428819965,
  310463728,
  -885281941,
  -1070226842,
  -584599183,
  -701910916,
  -419197089,
  -334657966,
  -249586363,
  -99511224,
  -1823743229,
  -1740248562,
  -2057834215,
  -1906706412,
  -1082931401,
  -1266823622,
  -1452288723,
  -1570644960,
  -156404115,
  -39616672,
  -525245321,
  -339776134,
  -627748263,
  -778347692,
  -863420349,
  -947435186,
  -1361232379,
  -1512884472,
  -1195299809,
  -1278270190,
  -2098914767,
  -1981082820,
  -1795618773,
  -1611202266,
  1179510461,
  1296297904,
  1347548327,
  1533017514,
  1786102409,
  1635502980,
  2087309459,
  2003294622,
  507358933,
  355706840,
  136428751,
  53458370,
  839224033,
  957055980,
  605657339,
  790073846,
  -1921626666,
  -2038938405,
  -1687527476,
  -1872472383,
  -1588696606,
  -1438621457,
  -1219331080,
  -1134791947,
  -721025602,
  -569897805,
  -1021700188,
  -938205527,
  -113368694,
  -231724921,
  -282971248,
  -466863459,
  1033297158,
  915985419,
  730517276,
  545572369,
  296679730,
  446754879,
  129166120,
  213705253,
  1709610350,
  1860738147,
  1945798516,
  2029293177,
  1239331162,
  1120974935,
  1606591296,
  1422699085,
  -146674470,
  -61872681,
  -513933632,
  -363595827,
  -612775698,
  -797457949,
  -848962828,
  -966011911,
  -1355701070,
  -1539330625,
  -1188186456,
  -1306280027,
  -2096529274,
  -2012771957,
  -1793748324,
  -1642357871,
  1201765386,
  1286567175,
  1371368976,
  1521706781,
  1805211710,
  1620529459,
  2105887268,
  1988838185,
  533804130,
  350174575,
  164439672,
  46346101,
  870912086,
  954669403,
  636813900,
  788204353,
  -1936009375,
  -2020286868,
  -1702443653,
  -1853305738,
  -1599933611,
  -1414727080,
  -1229004465,
  -1112479678,
  -722821367,
  -538667516,
  -1024029421,
  -906460130,
  -120407235,
  -203640272,
  -288446169,
  -440360918,
  1014646705,
  930369212,
  711349675,
  560487590,
  272786309,
  457992840,
  106852767,
  223377554,
  1678381017,
  1862534868,
  1914052035,
  2031621326,
  1211247597,
  1128014560,
  1580087799,
  1428173050,
  32283319,
  182621114,
  401639597,
  486441376,
  768917123,
  651868046,
  1003007129,
  818324884,
  1503449823,
  1385356242,
  1333838021,
  1150208456,
  1973745387,
  2125135846,
  1673061617,
  1756818940,
  -1324610969,
  -1174273174,
  -1492117379,
  -1407315600,
  -1657524653,
  -1774573730,
  -1960297399,
  -2144979644,
  -377732593,
  -495826174,
  -10465259,
  -194094824,
  -985373125,
  -833982666,
  -749177823,
  -665420500,
  2050466060,
  1899603969,
  1814803222,
  1730525723,
  1443857720,
  1560382517,
  1075025698,
  1260232239,
  575138148,
  692707433,
  878443390,
  1062597235,
  243256656,
  91341917,
  409198410,
  325965383,
  -891866660,
  -1042728751,
  -590666810,
  -674944309,
  -420538904,
  -304014107,
  -252508174,
  -67301633,
  -1834518092,
  -1716948807,
  -2068091986,
  -1883938141,
  -1096852096,
  -1248766835,
  -1467789414,
  -1551022441
}; // idb
int dword_4D1F08[256] =
{
  0,
  218828297,
  437656594,
  387781147,
  875313188,
  958871085,
  775562294,
  590424639,
  1750626376,
  1699970625,
  1917742170,
  2135253587,
  1551124588,
  1367295589,
  1180849278,
  1265195639,
  -793714544,
  -574886247,
  -895026046,
  -944901493,
  -459482956,
  -375925059,
  -24460122,
  -209597777,
  -1192718120,
  -1243373871,
  -1560376118,
  -1342864701,
  -1933268740,
  -2117097739,
  -1764576018,
  -1680229657,
  -1149510853,
  -1234119374,
  -1586641111,
  -1402549984,
  -1890065633,
  -2107839210,
  -1790836979,
  -1739919100,
  -752637069,
  -567761542,
  -919226527,
  -1002522264,
  -418409641,
  -368796322,
  -48656571,
  -267222708,
  1808481195,
  1723872674,
  1910319033,
  2094410160,
  1608975247,
  1391201670,
  1173430173,
  1224348052,
  59984867,
  244860394,
  428169201,
  344873464,
  935293895,
  984907214,
  766078933,
  547512796,
  1844882806,
  1627235199,
  2011214180,
  2062270317,
  1507497298,
  1423022939,
  1137477952,
  1321699145,
  95345982,
  145085239,
  532201772,
  313773861,
  830661914,
  1015671571,
  731183368,
  648017665,
  -1119466010,
  -1337113617,
  -1487908364,
  -1436852227,
  -1989511742,
  -2073986101,
  -1820562992,
  -1636341799,
  -719438418,
  -669699161,
  -821550660,
  -1039978571,
  -516815478,
  -331805821,
  -81520232,
  -164685935,
  -695372211,
  -611944380,
  -862229921,
  -1047501738,
  -492745111,
  -274055072,
  -122203525,
  -172204942,
  -1093335547,
  -1277294580,
  -1530717673,
  -1446505442,
  -1963377119,
  -2014171096,
  -1863376333,
  -1645990854,
  104699613,
  188127444,
  472615631,
  287343814,
  840019705,
  1058709744,
  671593195,
  621591778,
  1852171925,
  1668212892,
  1953757831,
  2037970062,
  1514790577,
  1463996600,
  1080017571,
  1297403050,
  -621329940,
  -671330331,
  -1058972162,
  -840281097,
  -287606328,
  -472877119,
  -187865638,
  -104436781,
  -1297141340,
  -1079754835,
  -1464259146,
  -1515052097,
  -2038232704,
  -1954019447,
  -1667951214,
  -1851909221,
  172466556,
  122466165,
  273792366,
  492483431,
  1047239000,
  861968209,
  612205898,
  695634755,
  1646252340,
  1863638845,
  2013908262,
  1963115311,
  1446242576,
  1530455833,
  1277555970,
  1093597963,
  1636604631,
  1820824798,
  2073724613,
  1989249228,
  1436590835,
  1487645946,
  1337376481,
  1119727848,
  164948639,
  81781910,
  331544205,
  516552836,
  1039717051,
  821288114,
  669961897,
  719700128,
  -1321436601,
  -1137216434,
  -1423284651,
  -1507760036,
  -2062531997,
  -2011476886,
  -1626972559,
  -1844621192,
  -647755249,
  -730921978,
  -1015933411,
  -830924780,
  -314035669,
  -532464606,
  -144822727,
  -95084496,
  -1224610662,
  -1173691757,
  -1390940024,
  -1608712575,
  -2094148418,
  -1910056265,
  -1724135252,
  -1808742747,
  -547775278,
  -766340389,
  -984645440,
  -935031095,
  -344611594,
  -427906305,
  -245122844,
  -60246291,
  1739656202,
  1790575107,
  2108100632,
  1890328081,
  1402811438,
  1586903591,
  1233856572,
  1149249077,
  266959938,
  48394827,
  369057872,
  418672217,
  1002783846,
  919489135,
  567498868,
  752375421,
  209336225,
  24197544,
  376187827,
  459744698,
  945164165,
  895287692,
  574624663,
  793451934,
  1679968233,
  1764313568,
  2117360635,
  1933530610,
  1343127501,
  1560637892,
  1243112415,
  1192455638,
  -590686415,
  -775825096,
  -958608605,
  -875051734,
  -387518699,
  -437395172,
  -219090169,
  -262898,
  -1265457287,
  -1181111952,
  -1367032981,
  -1550863006,
  -2134991011,
  -1917480620,
  -1700232369,
  -1750889146
}; // idb
int dword_4D2308[257] =
{
  0,
  151849742,
  303699484,
  454499602,
  607398968,
  758720310,
  908999204,
  1059270954,
  1214797936,
  1097159550,
  1517440620,
  1400849762,
  1817998408,
  1699839814,
  2118541908,
  2001430874,
  -1865371424,
  -1713521682,
  -2100648196,
  -1949848078,
  -1260086056,
  -1108764714,
  -1493267772,
  -1342996022,
  -658970480,
  -776608866,
  -895287668,
  -1011878526,
  -57883480,
  -176042074,
  -292105548,
  -409216582,
  1002142683,
  850817237,
  698445255,
  548169417,
  529487843,
  377642221,
  227885567,
  77089521,
  1943217067,
  2061379749,
  1640576439,
  1757691577,
  1474760595,
  1592394909,
  1174215055,
  1290801793,
  -1418998981,
  -1570324427,
  -1183720153,
  -1333995991,
  -1889540349,
  -2041385971,
  -1656360673,
  -1807156719,
  -486304949,
  -368142267,
  -249985705,
  -132870567,
  -952647821,
  -835013507,
  -718427793,
  -601841055,
  1986918061,
  2137062819,
  1685577905,
  1836772287,
  1381620373,
  1532285339,
  1078185097,
  1229899655,
  1040559837,
  923313619,
  740276417,
  621982671,
  439452389,
  322734571,
  137073913,
  19308535,
  -423803315,
  -273658557,
  -190361519,
  -39167137,
  -1031181707,
  -880516741,
  -795640727,
  -643926169,
  -1361764803,
  -1479011021,
  -1127282655,
  -1245576401,
  -1964953083,
  -2081670901,
  -1728371687,
  -1846137065,
  1305906550,
  1155237496,
  1607244650,
  1455525988,
  1776460110,
  1626319424,
  2079897426,
  1928707164,
  96392454,
  213114376,
  396673818,
  514443284,
  562755902,
  679998000,
  865136418,
  983426092,
  -586793578,
  -737462632,
  -820237430,
  -971956092,
  -114159186,
  -264299872,
  -349698126,
  -500888388,
  -1787927066,
  -1671205144,
  -2022411270,
  -1904641804,
  -1319482914,
  -1202240816,
  -1556062270,
  -1437772596,
  -321194175,
  -438830001,
  -20913827,
  -137500077,
  -923870343,
  -1042034569,
  -621490843,
  -738605461,
  -1531793615,
  -1379949505,
  -1230456531,
  -1079659997,
  -2138668279,
  -1987344377,
  -1835231979,
  -1684955621,
  2081048481,
  1963412655,
  1846563261,
  1729977011,
  1480485785,
  1362321559,
  1243905413,
  1126790795,
  878845905,
  1030690015,
  645401037,
  796197571,
  274084841,
  425408743,
  38544885,
  188821243,
  -681472870,
  -563312748,
  -981755258,
  -864644728,
  -212492126,
  -94852180,
  -514869570,
  -398279248,
  -1626745622,
  -1778065436,
  -1928084746,
  -2078357000,
  -1153566510,
  -1305414692,
  -1457000754,
  -1607801408,
  1202797690,
  1320957812,
  1437280870,
  1554391400,
  1669664834,
  1787304780,
  1906247262,
  2022837584,
  265905162,
  114585348,
  499347990,
  349075736,
  736970802,
  585122620,
  972512814,
  821712160,
  -1699282452,
  -1816524062,
  -2001922064,
  -2120213250,
  -1098699308,
  -1215420710,
  -1399243832,
  -1517014842,
  -757114468,
  -606973294,
  -1060810880,
  -909622130,
  -152341084,
  -1671510,
  -453942344,
  -302225226,
  174567692,
  57326082,
  410887952,
  292596766,
  777231668,
  660510266,
  1011452712,
  893681702,
  1108339068,
  1258480242,
  1343618912,
  1494807662,
  1715193156,
  1865862730,
  1948373848,
  2100090966,
  -1593017801,
  -1476300487,
  -1290376149,
  -1172609243,
  -2059905521,
  -1942659839,
  -1759363053,
  -1641067747,
  -379313593,
  -529979063,
  -75615141,
  -227328171,
  -850391425,
  -1000536719,
  -548792221,
  -699985043,
  836553431,
  953270745,
  600235211,
  718002117,
  367585007,
  484830689,
  133361907,
  251657213,
  2041877159,
  1891211689,
  1806599355,
  1654886325,
  1568718495,
  1418573201,
  1335535747,
  1184342925,
  5061488
}; // idb
int (__stdcall *off_4D270C)(int) = &sub_40F680; // weak
int (__stdcall *std::length_error::`vftable')(int) = &sub_40F700; // weak
int (__stdcall *std::out_of_range::`vftable')(int) = &sub_4111F0; // weak
int (__stdcall *exception::`vftable')(char) = &sub_4A24AC; // weak
void (*dword_4D3C90[2])(void) = { NULL, NULL }; // idb
void (*dword_4D3C98)(void) = NULL; // idb
int dword_4D52FC[223] =
{
  0,
  31,
  28,
  31,
  30,
  31,
  30,
  31,
  31,
  30,
  31,
  30,
  31,
  573190714,
  34214426,
  606876732,
  67900444,
  640562750,
  101586462,
  674248768,
  135272480,
  556347705,
  17371417,
  590033723,
  51057435,
  623719741,
  84743453,
  657405759,
  118429471,
  271583272,
  541071416,
  254740263,
  524228407,
  237897254,
  507385398,
  221054245,
  490542389,
  204211236,
  473699380,
  187368227,
  456856371,
  170525218,
  440013362,
  153682209,
  423170353,
  556347705,
  17371417,
  573190714,
  34214426,
  590033723,
  51057435,
  606876732,
  657405759,
  118429471,
  640562750,
  101586462,
  623719741,
  84743453,
  67900444,
  100925953,
  235670024,
  353571087,
  471537943,
  403378446,
  469959937,
  169149967,
  67900183,
  118491162,
  34411547,
  622801961,
  673068847,
  807480627,
  942092588,
  707671330,
  538780722,
  17630222,
  134942466,
  201722371,
  117442821,
  67571456,
  17629710,
  185337354,
  134415625,
  135135492,
  184681997,
  118033423,
  330243,
  34081807,
  117508356,
  235080453,
  218497034,
  235405583,
  67308294,
  218236681,
  168099852,
  117705987,
  235405839,
  167837708,
  84609286,
  185011712,
  17630218,
  101451781,
  251790089,
  17434637,
  33820419,
  201786891,
  151913728,
  235470858,
  84869894,
  118230273,
  134349835,
  150996749,
  168166403,
  235210754,
  17763084,
  151258637,
  200456,
  201457931,
  118360581,
  854529,
  117967110,
  51252996,
  201458955,
  51252487,
  168363520,
  84410881,
  251923467,
  84609037,
  50335494,
  201459460,
  151915009,
  591370,
  218565388,
  235077903,
  67633669,
  100667139,
  135069962,
  184878089,
  235013900,
  17042434,
  101386759,
  251856136,
  151912461,
  201460494,
  17630980,
  168755205,
  101189891,
  184615428,
  134679818,
  84674831,
  234881798,
  118229003,
  218238465,
  150998790,
  50660362,
  252313868,
  134611465,
  67308800,
  184878862,
  33820426,
  84478983,
  235733254,
  134417152,
  84872713,
  51120130,
  168034311,
  101387521,
  201458436,
  168756489,
  117509643,
  218628102,
  235014916,
  218628111,
  118033411,
  17172997,
  118161421,
  167840004,
  201655054,
  101191426,
  218825729,
  235340556,
  134614794,
  34145536,
  135072518,
  118096897,
  251659529,
  201523726,
  67633677,
  17501958,
  235079946,
  118226949,
  135073537,
  67568394,
  184943884,
  34147840,
  17042183,
  34475017,
  218760704,
  134546191,
  118358274,
  218630660,
  592911,
  184943875,
  353634064,
  287050781,
  437718785,
  169808389,
  236455938,
  151198496,
  102632723,
  419695382,
  128,
  64,
  32,
  16,
  8,
  4,
  2,
  1,
  8,
  4,
  2,
  1
}; // idb
int dword_4D5678[] = { 0 }; // weak
int dword_4D567C[199] =
{
  0,
  5,
  0,
  24,
  0,
  60,
  0,
  160,
  0,
  328,
  0,
  542,
  0,
  814,
  0,
  1157,
  0,
  1588,
  0,
  2250,
  0,
  3086,
  0,
  4135,
  0,
  5444,
  0,
  7068,
  0,
  9126,
  0,
  11660,
  0,
  14769,
  0,
  18572,
  0,
  23214,
  0,
  29155,
  0,
  36409,
  0,
  45245,
  0,
  55988,
  0,
  69026,
  0,
  85569,
  0,
  105656,
  0,
  130009,
  0,
  159494,
  0,
  195150,
  0,
  238225,
  0,
  290216,
  0,
  352918,
  0,
  428488,
  0,
  519513,
  0,
  629149,
  0,
  761081,
  0,
  919784,
  0,
  1110624,
  0,
  1340045,
  0,
  1615778,
  0,
  1947099,
  0,
  2345141,
  0,
  2823265,
  0,
  3397501,
  0,
  4087087,
  0,
  4915108,
  0,
  5909267,
  0,
  7102808,
  0,
  8535623,
  0,
  10255633,
  0,
  12320243,
  0,
  14798389,
  0,
  17772795,
  0,
  21342730,
  0,
  25627317,
  0,
  30769501,
  0,
  36940820,
  0,
  44347118,
  0,
  53235407,
  0,
  63902104,
  0,
  76702906,
  0,
  92064653,
  0,
  110499551,
  0,
  132622249,
  0,
  159170373,
  0,
  191028978,
  0,
  229260177,
  0,
  275138508,
  0,
  330193415,
  0,
  396260232,
  0,
  1188853398,
  0,
  1426699190,
  0,
  1712116603,
  0,
  2054620005,
  0,
  -1829340653,
  0,
  -1336130088,
  0,
  -744274761,
  0,
  -34045671,
  0,
  818231987,
  1,
  1840968092,
  1,
  -1226713032,
  1,
  246033263,
  2,
  2013331761,
  2,
  -160874348,
  2,
  -1910925179,
  3,
  1142977669,
  4,
  512696930,
  5,
  615356692,
  6,
  1597545108,
  7,
  -659799336,
  8,
  -1650622408,
  10,
  -1121619783,
  12,
  1231173733,
  15,
  1477549070,
  18,
  55216106,
  22,
  1784393987,
  26,
  -1294549657,
  31,
  164682435,
  38,
  -1520209136,
  45
}; // idb
_DWORD dword_4D5998[8] = { 1, 100, 0, 249185, 259478, 1, -1, 0 }; // idb
int dword_4D59B8[36] =
{
  1,
  101,
  0,
  249575,
  257781,
  1,
  -1,
  1,
  101,
  0,
  250333,
  258664,
  1,
  0,
  1,
  101,
  0,
  248538,
  261538,
  0,
  1,
  1,
  101,
  0,
  248775,
  263384,
  2,
  1,
  1,
  101,
  0,
  252583,
  262508,
  2,
  1,
  0
}; // idb
_DWORD dword_4D5A48[70] =
{
  1,
  217,
  0,
  252436,
  262389,
  0,
  0,
  1,
  218,
  0,
  252631,
  262541,
  0,
  0,
  1,
  223,
  0,
  248643,
  263282,
  0,
  0,
  1,
  224,
  0,
  248797,
  263420,
  0,
  0,
  1,
  225,
  0,
  249578,
  257960,
  0,
  0,
  1,
  226,
  0,
  249578,
  257724,
  0,
  0,
  1,
  227,
  0,
  250135,
  258657,
  0,
  0,
  1,
  228,
  0,
  250372,
  258672,
  0,
  0,
  1,
  229,
  0,
  248544,
  261024,
  0,
  0,
  1,
  230,
  0,
  248532,
  261576,
  0,
  0
}; // idb
int dword_4D5B60[] = { 1 }; // weak
int dword_4D5B64[] = { 0 }; // weak
int dword_4D5B68[] = { 245760 }; // weak
int dword_4D5B6C[] = { 266592 }; // weak
int dword_4D5B70[] = { 254560 }; // weak
int dword_4D5B74[] = { 254144 }; // weak
int dword_4D5B78[] = { 0 }; // weak
volatile LONG g_nEnable = 1; // idb
volatile LONG g_bRaise = 1; // idb
volatile LONG dword_4D5B84 = -1; // idb
int dword_4D5B88[24] =
{
  10000000,
  10000000,
  10000000,
  10000000,
  9200000,
  8200000,
  7000000,
  5600000,
  4000000,
  3200000,
  1200000,
  600000,
  400000,
  100000,
  50000,
  10000,
  1000,
  100,
  10,
  10,
  10,
  10,
  10,
  10
}; // idb
int dword_4D5BE8[24] =
{
  10000000,
  8900000,
  5300000,
  3700000,
  1900000,
  1400000,
  800000,
  300000,
  50000,
  10000,
  1000,
  100,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10
}; // idb
int dword_4D5C48[24] =
{
  10000000,
  6700000,
  3800000,
  1500000,
  900000,
  50000,
  10000,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10
}; // idb
int dword_4D5CA8[102] =
{
  0,
  7680,
  9120,
  11520,
  14880,
  19200,
  24480,
  30720,
  37920,
  46080,
  55200,
  65280,
  76320,
  88320,
  101280,
  115200,
  130080,
  145920,
  162720,
  180480,
  199200,
  218880,
  239520,
  261120,
  283680,
  307200,
  331680,
  357120,
  383520,
  410880,
  439200,
  468480,
  498720,
  529920,
  562080,
  595200,
  629280,
  664320,
  700320,
  737280,
  775200,
  814080,
  853920,
  894720,
  936480,
  979200,
  1022880,
  1067520,
  1113120,
  1159680,
  1207200,
  1255680,
  1305120,
  1355520,
  1406880,
  1459200,
  1512480,
  1566720,
  1621920,
  1678080,
  1735200,
  1793280,
  1852320,
  1912320,
  1973280,
  2035200,
  2098080,
  2161920,
  2226720,
  2292480,
  2359200,
  2426880,
  2495520,
  2565120,
  2635680,
  2707200,
  2779680,
  2853120,
  2927520,
  3002880,
  3079200,
  3156480,
  3234720,
  3313920,
  3394080,
  3475200,
  3557280,
  3640320,
  3724320,
  3809280,
  3895200,
  3982080,
  4069920,
  4158720,
  4248480,
  4339200,
  4430880,
  4523520,
  4617120,
  4711680,
  4807200,
  0
}; // idb
int dword_4D5E40[20] = { 50, 46, 42, 38, 34, 30, 26, 22, 18, 14, 10, 8, 6, 4, 2, 1, 1, 1, 1, 1 }; // idb
int dword_4D5E90[22] = { 50, 40, 30, 20, 15, 10, 8, 6, 4, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 }; // idb
int dword_4D5EE8[20] = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 3, 3, 4, 5, 6 }; // idb
int dword_4D5F38[22] =
{
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  10,
  11,
  13,
  15,
  18,
  21,
  24,
  24,
  24,
  24,
  24,
  24,
  24,
  0
}; // idb
int dword_4D5F90[22] =
{
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  4,
  5,
  6,
  10,
  18,
  29,
  74,
  100,
  100,
  100,
  100,
  100,
  100,
  0
}; // idb
int dword_4D5FE8[21] = { 0, 0, 0, 0, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4 }; // idb
int dword_4D603C[11] = { 0, 0, 0, 1, 3, 5, 8, 14, 29, 50, 100 }; // idb
int dword_4D6068[10] = { 10, 20, 20, 20, 20, 20, 20, 20, 20, 20 }; // idb
int dword_4D6090[] = { 2 }; // weak
int dword_4D60A4[] = { 30 }; // weak
int dword_4D60A8[] = { 4 }; // weak
int dword_4D60AC[] = { 1 }; // weak
int dword_4D60B0[] = { 36 }; // weak
int dword_4D60B4[] = { 45 }; // weak
int dword_4D60B8[122] =
{
  60,
  3,
  3,
  0,
  0,
  4,
  40,
  4,
  1,
  45,
  45,
  60,
  4,
  2,
  0,
  0,
  6,
  20,
  3,
  1,
  45,
  54,
  80,
  4,
  3,
  0,
  0,
  3,
  30,
  3,
  1,
  54,
  54,
  80,
  4,
  6,
  0,
  0,
  2,
  40,
  4,
  1,
  18,
  36,
  100,
  3,
  4,
  0,
  0,
  3,
  50,
  4,
  1,
  27,
  45,
  100,
  0,
  6,
  2,
  0,
  4,
  20,
  1,
  4,
  27,
  18,
  80,
  0,
  4,
  3,
  0,
  3,
  30,
  1,
  4,
  36,
  27,
  80,
  0,
  4,
  2,
  6,
  0,
  30,
  1,
  3,
  27,
  18,
  100,
  0,
  0,
  3,
  4,
  3,
  40,
  1,
  3,
  36,
  27,
  120,
  4,
  4,
  0,
  6,
  4,
  40,
  4,
  1,
  45,
  45,
  80,
  0,
  4,
  4,
  6,
  4,
  40,
  1,
  4,
  36,
  36,
  100
}; // idb
CLink *pLink = (CLink *)0xFF0000; // idb
char *off_4D62AC = &DefaultNullString; // weak
int dword_4D62B0[] = { 55364 }; // weak
int dword_4D62B4[9] = { 8354, 55370, 9801, 56642, 11073, 59369, 9802, 59369, 8352 }; // idb
int dword_4D62D8[6] = { 1, 2, 10, 50, 300, 0 }; // idb
int nIndex[8] = { 761, 762, 763, 764, 765, 766, 767, 768 }; // idb
int dword_4D6310[8] = { 880, 881, 882, 0, 0, 0, 0, 0 }; // idb
int dword_4D6330[40] =
{
  883,
  884,
  885,
  886,
  0,
  0,
  0,
  0,
  239,
  10,
  266,
  5,
  239,
  10,
  267,
  2,
  239,
  10,
  268,
  1,
  240,
  100,
  269,
  1,
  240,
  200,
  270,
  1,
  241,
  1000,
  271,
  1,
  241,
  1000,
  272,
  1,
  446,
  500,
  447,
  1
}; // idb
int dword_4D63D0[] = { 1 }; // weak
int dword_4D63D4[] = { 1 }; // weak
int dword_4D63D8[177] =
{
  200001,
  2,
  1,
  200002,
  3,
  1,
  200003,
  4,
  6,
  200004,
  5,
  8,
  200005,
  6,
  10,
  200006,
  7,
  11,
  200007,
  8,
  12,
  200008,
  9,
  13,
  200009,
  10,
  14,
  200010,
  11,
  15,
  200011,
  37,
  15,
  200066,
  12,
  16,
  200012,
  13,
  17,
  200013,
  14,
  18,
  200014,
  15,
  19,
  200015,
  16,
  20,
  200016,
  17,
  21,
  200017,
  18,
  23,
  200018,
  19,
  25,
  200019,
  20,
  26,
  200020,
  21,
  27,
  200021,
  22,
  28,
  200022,
  23,
  29,
  200023,
  27,
  30,
  200026,
  28,
  31,
  200027,
  29,
  32,
  200028,
  24,
  33,
  200024,
  30,
  34,
  200029,
  31,
  35,
  200030,
  25,
  36,
  200025,
  32,
  37,
  200031,
  33,
  38,
  200032,
  34,
  39,
  200033,
  35,
  40,
  200034,
  36,
  41,
  200047,
  39,
  41,
  200048,
  38,
  42,
  200049,
  40,
  42,
  200050,
  45,
  43,
  200051,
  41,
  43,
  200052,
  46,
  44,
  200053,
  42,
  44,
  200054,
  44,
  45,
  200055,
  43,
  45,
  200056,
  47,
  46,
  200057,
  48,
  47,
  200058,
  49,
  48,
  200059,
  50,
  49,
  200060,
  51,
  50,
  200061,
  52,
  51,
  200062,
  53,
  52,
  200063,
  58,
  53,
  200064,
  59,
  54,
  200065,
  60,
  55,
  200065,
  61,
  56,
  200065,
  62,
  57,
  200065,
  63,
  58,
  200065,
  64,
  59,
  200065,
  65,
  60
}; // idb
int dword_4D669C[4] = { 200065, 34280, 137140, 308571 }; // idb
int dword_4D66AC[4] = { 617142, 357, 761, 857 }; // idb
int dword_4D66BC[] = { 11 }; // weak
int dword_4D66C0[] = { 50 }; // weak
int dword_4D66C4[11] = { 5, 9, 36, 10, 7, 22, 15, 5, 8, 20, 0 }; // idb
int dword_4D66F0[] = { 0 }; // weak
int dword_4D66F4[149] =
{
  0,
  5,
  0,
  24,
  0,
  60,
  0,
  160,
  0,
  328,
  0,
  542,
  0,
  814,
  0,
  1157,
  0,
  1588,
  0,
  2250,
  0,
  3086,
  0,
  4135,
  0,
  5444,
  0,
  7068,
  0,
  9126,
  0,
  11660,
  0,
  14769,
  0,
  18572,
  0,
  23214,
  0,
  29155,
  0,
  36409,
  0,
  45245,
  0,
  55988,
  0,
  69026,
  0,
  85569,
  0,
  105656,
  0,
  130009,
  0,
  159494,
  0,
  195150,
  0,
  238225,
  0,
  290216,
  0,
  352918,
  0,
  428488,
  0,
  519513,
  0,
  629149,
  0,
  761081,
  0,
  919784,
  0,
  1110624,
  0,
  1340045,
  0,
  1615778,
  0,
  1947099,
  0,
  2345141,
  0,
  2823265,
  0,
  3397501,
  0,
  4087087,
  0,
  4915108,
  0,
  5909267,
  0,
  7102808,
  0,
  8535623,
  0,
  10255633,
  0,
  12320243,
  0,
  14798389,
  0,
  17772795,
  0,
  21342730,
  0,
  25627317,
  0,
  30769501,
  0,
  36940820,
  0,
  44347118,
  0,
  53235407,
  0,
  63902104,
  0,
  76702906,
  0,
  92064653,
  0,
  110499551,
  0,
  132622249,
  0,
  159170373,
  0,
  191028978,
  0,
  229260177,
  0,
  275138508,
  0,
  330193415,
  0,
  396260232,
  0,
  1188853398,
  0,
  1426699190,
  0,
  1712116603,
  0,
  2054620005,
  0
}; // idb
__int64 qword_4D6948 = 2465626643i64; // weak
int dword_4D6A10[3] = { 10, 14, 13 }; // idb
int dword_4D6A1C[3] = { 13, 10, 12 }; // idb
int dword_4D6A7C[3] = { 654, 655, 656 }; // idb
int dword_4D6A88[12] = { 500, 500, 3000, 10000, 0, 50, 5, 65, 0, 30, 5, 50 }; // idb
int dword_4D6AB8[3] = { 10, 14, 13 }; // idb
int dword_4D6AC4[231] =
{
  1,
  90,
  22,
  0,
  0,
  5,
  0,
  24,
  0,
  60,
  0,
  160,
  0,
  328,
  0,
  542,
  0,
  814,
  0,
  1157,
  0,
  1588,
  0,
  2250,
  0,
  3086,
  0,
  4135,
  0,
  5444,
  0,
  7068,
  0,
  9126,
  0,
  11660,
  0,
  14769,
  0,
  18572,
  0,
  23214,
  0,
  29155,
  0,
  36409,
  0,
  45245,
  0,
  55988,
  0,
  69026,
  0,
  85569,
  0,
  105656,
  0,
  130009,
  0,
  159494,
  0,
  195150,
  0,
  238225,
  0,
  290216,
  0,
  352918,
  0,
  428488,
  0,
  519513,
  0,
  629149,
  0,
  761081,
  0,
  919784,
  0,
  1110624,
  0,
  1340045,
  0,
  1615778,
  0,
  1947099,
  0,
  2345141,
  0,
  2823265,
  0,
  3397501,
  0,
  4087087,
  0,
  4915108,
  0,
  5909267,
  0,
  7102808,
  0,
  8535623,
  0,
  10255633,
  0,
  12320243,
  0,
  14798389,
  0,
  17772795,
  0,
  21342730,
  0,
  25627317,
  0,
  30769501,
  0,
  36940820,
  0,
  44347118,
  0,
  53235407,
  0,
  63902104,
  0,
  76702906,
  0,
  92064653,
  0,
  110499551,
  0,
  132622249,
  0,
  159170373,
  0,
  191028978,
  0,
  229260177,
  0,
  275138508,
  0,
  330193415,
  0,
  396260232,
  0,
  1188853398,
  0,
  1426699190,
  0,
  1712116603,
  0,
  2054620005,
  0,
  -1829340653,
  0,
  -1336130088,
  0,
  -744274761,
  0,
  -34045671,
  0,
  818231987,
  1,
  1840968092,
  1,
  -1226713032,
  1,
  246033263,
  2,
  2013331761,
  2,
  -160874348,
  2,
  -1910925179,
  3,
  1142977669,
  4,
  512696930,
  5,
  615356692,
  6,
  1597545108,
  7,
  -659799336,
  8,
  -1650622408,
  10,
  -1121619783,
  12,
  1231173733,
  15,
  1477549070,
  18,
  55216106,
  22,
  1784393987,
  26,
  -1294549657,
  31,
  164682435,
  38,
  -1520209136,
  45,
  10,
  14,
  13,
  13,
  10,
  12,
  18,
  16,
  8,
  8,
  10,
  180,
  120,
  8,
  10,
  18,
  16,
  8,
  170,
  140,
  14,
  10,
  8,
  10,
  18,
  160,
  160,
  0
}; // idb
int dword_4D6E60[] = { 32 }; // weak
int dword_4D6E64[601] =
{
  0,
  31,
  1,
  31,
  1,
  31,
  2,
  31,
  3,
  31,
  4,
  31,
  5,
  31,
  6,
  31,
  7,
  30,
  8,
  30,
  9,
  30,
  10,
  29,
  11,
  29,
  12,
  29,
  12,
  28,
  13,
  28,
  14,
  28,
  15,
  27,
  15,
  27,
  16,
  27,
  16,
  26,
  17,
  26,
  18,
  25,
  18,
  25,
  19,
  25,
  19,
  24,
  20,
  24,
  20,
  24,
  21,
  23,
  21,
  23,
  21,
  22,
  22,
  22,
  22,
  0,
  0,
  1,
  0,
  2,
  0,
  3,
  0,
  4,
  0,
  5,
  0,
  6,
  0,
  7,
  0,
  8,
  0,
  9,
  0,
  10,
  0,
  10,
  0,
  11,
  0,
  12,
  0,
  13,
  0,
  13,
  0,
  14,
  0,
  14,
  0,
  15,
  0,
  15,
  0,
  16,
  0,
  16,
  0,
  17,
  0,
  17,
  0,
  18,
  0,
  18,
  0,
  19,
  0,
  19,
  0,
  20,
  0,
  20,
  0,
  21,
  0,
  21,
  0,
  22,
  0,
  22,
  0,
  23,
  0,
  23,
  0,
  24,
  0,
  24,
  0,
  25,
  0,
  25,
  0,
  26,
  0,
  26,
  0,
  27,
  0,
  27,
  0,
  28,
  0,
  28,
  0,
  29,
  0,
  29,
  0,
  30,
  0,
  30,
  0,
  31,
  0,
  31,
  0,
  32,
  0,
  32,
  0,
  33,
  0,
  33,
  0,
  34,
  1,
  34,
  2,
  35,
  3,
  35,
  4,
  36,
  5,
  36,
  6,
  37,
  7,
  37,
  8,
  38,
  9,
  38,
  10,
  39,
  11,
  39,
  12,
  40,
  13,
  40,
  14,
  41,
  15,
  41,
  16,
  42,
  17,
  42,
  18,
  43,
  19,
  43,
  20,
  44,
  21,
  44,
  22,
  45,
  23,
  45,
  24,
  46,
  25,
  46,
  26,
  47,
  27,
  47,
  28,
  48,
  29,
  48,
  30,
  49,
  31,
  49,
  32,
  50,
  33,
  50,
  34,
  51,
  35,
  51,
  36,
  52,
  37,
  52,
  38,
  53,
  39,
  53,
  40,
  54,
  41,
  54,
  42,
  55,
  43,
  55,
  44,
  56,
  45,
  56,
  46,
  57,
  47,
  57,
  48,
  58,
  49,
  58,
  50,
  59,
  41,
  59,
  52,
  60,
  53,
  60,
  54,
  61,
  55,
  61,
  56,
  62,
  57,
  62,
  58,
  63,
  59,
  63,
  60,
  64,
  61,
  64,
  62,
  65,
  63,
  65,
  64,
  66,
  65,
  66,
  66,
  67,
  67,
  67,
  68,
  68,
  69,
  68,
  70,
  69,
  71,
  69,
  72,
  70,
  73,
  70,
  74,
  71,
  75,
  71,
  76,
  72,
  77,
  72,
  78,
  73,
  79,
  73,
  80,
  74,
  81,
  74,
  82,
  75,
  83,
  75,
  84,
  76,
  85,
  76,
  86,
  77,
  87,
  77,
  88,
  78,
  89,
  78,
  90,
  79,
  91,
  79,
  92,
  80,
  93,
  80,
  94,
  81,
  95,
  81,
  96,
  82,
  97,
  82,
  98,
  83,
  99,
  83,
  100,
  84,
  101,
  84,
  102,
  85,
  103,
  85,
  104,
  86,
  105,
  86,
  106,
  87,
  107,
  87,
  108,
  88,
  109,
  88,
  110,
  89,
  111,
  89,
  112,
  90,
  113,
  90,
  114,
  91,
  115,
  91,
  116,
  92,
  117,
  92,
  118,
  93,
  119,
  93,
  120,
  94,
  121,
  94,
  122,
  95,
  123,
  95,
  124,
  96,
  125,
  96,
  126,
  97,
  127,
  97,
  128,
  98,
  129,
  98,
  130,
  99,
  131,
  99,
  132,
  100,
  133,
  100,
  134,
  101,
  135,
  101,
  136,
  102,
  137,
  102,
  138,
  103,
  139,
  103,
  140,
  104,
  141,
  104,
  142,
  105,
  143,
  105,
  144,
  106,
  145,
  106,
  146,
  107,
  147,
  107,
  148,
  108,
  149,
  108,
  150,
  109,
  151,
  109,
  152,
  110,
  153,
  110,
  154,
  111,
  155,
  111,
  156,
  112,
  157,
  112,
  158,
  113,
  159,
  113,
  160,
  114,
  161,
  114,
  162,
  115,
  163,
  115,
  164,
  116,
  165,
  116,
  166,
  117,
  167,
  117,
  168,
  118,
  169,
  118,
  170,
  119,
  171,
  119,
  172,
  120,
  173,
  120,
  174,
  121,
  175,
  121,
  176,
  122,
  177,
  122,
  178,
  123,
  179,
  123,
  180,
  124,
  181,
  124,
  182,
  125,
  183,
  125,
  184,
  126,
  185,
  126,
  186,
  127,
  187,
  127,
  188,
  128,
  189,
  128,
  190,
  129,
  191,
  129,
  192,
  130,
  193,
  130,
  194,
  131,
  195,
  700,
  1000,
  800,
  0,
  0,
  258043,
  259381,
  16049,
  0,
  0,
  265022,
  262538,
  16190,
  0,
  0,
  266040,
  284976,
  22650,
  0,
  0,
  255825,
  288802,
  27050,
  0,
  0,
  267618,
  242946,
  19630,
  0,
  0,
  232954,
  294672,
  45300,
  0
}; // idb
int dword_4D7900[] = { 0 }; // weak
char byte_4D7904[92] =
{
  '',
  '',
  '\x03',
  '\0',
  '5',
  '',
  '\x03',
  '\0',
  '',
  '>',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '>',
  '\v',
  '\x04',
  '\0',
  '',
  '\x01',
  '\x04',
  '\0',
  '>',
  '?',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '8',
  '\x0F',
  '\x04',
  '\0',
  '0',
  'Y',
  '\x04',
  '\0',
  'z',
  'X',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'Q',
  '',
  '\x03',
  '\0',
  '\"',
  'h',
  '\x04',
  '\0',
  '',
  'i',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'b',
  '\x15',
  '\x04',
  '\0',
  '\x02',
  '',
  '\x03',
  '\0',
  '',
  'L',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '',
  '\x8D',
  '\x03',
  '\0',
  '\x10',
  '\x7F',
  '\x04',
  '\0',
  '',
  '',
  '\0',
  '\0'
}; // weak
int dword_4D7960[250] =
{
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8
}; // idb
int dword_4D7D48[250] =
{
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8
}; // idb
int dword_4D8130[102] =
{
  0,
  0,
  0,
  0,
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  12,
  13,
  14,
  15,
  16,
  17,
  18,
  19,
  20,
  22,
  24,
  26,
  28,
  30,
  32,
  34,
  36,
  38,
  40,
  43,
  46,
  49,
  52,
  55,
  58,
  61,
  64,
  67,
  70,
  74,
  78,
  82,
  86,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  0
}; // idb
int dword_4D82C8[52] =
{
  50,
  52,
  52,
  54,
  54,
  56,
  56,
  58,
  58,
  60,
  60,
  62,
  62,
  64,
  64,
  66,
  66,
  68,
  68,
  70,
  70,
  72,
  72,
  74,
  74,
  76,
  76,
  78,
  78,
  80,
  80,
  82,
  82,
  84,
  84,
  86,
  86,
  88,
  88,
  90,
  90,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  0
}; // idb
int dword_4D8398[100] =
{
  0,
  0,
  0,
  1,
  1,
  3,
  3,
  6,
  6,
  9,
  9,
  12,
  12,
  15,
  15,
  18,
  18,
  21,
  21,
  24,
  24,
  27,
  27,
  30,
  30,
  33,
  33,
  36,
  36,
  39,
  39,
  42,
  42,
  45,
  45,
  48,
  48,
  51,
  51,
  54,
  54,
  57,
  57,
  60,
  60,
  63,
  63,
  66,
  66,
  69,
  69,
  72,
  72,
  75,
  75,
  78,
  78,
  81,
  81,
  84,
  84,
  87,
  87,
  90,
  90,
  93,
  93,
  96,
  96,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99
}; // idb
int dword_4D8528[210] =
{
  0,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100
}; // idb
int dword_4D8870[210] =
{
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100
}; // idb
int dword_4D8BB8[61] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  10,
  10,
  20,
  20,
  30,
  30,
  40,
  40,
  50,
  50,
  60,
  60,
  70,
  70,
  80,
  80,
  90,
  90,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100
}; // idb
int dword_4D8CAC[14] = { 89, 83, 74, 65, 56, 48, 32, 19, 5, 3, 0, 91, 93, 95 }; // idb
int dword_4D8CE4[7] = { 0, 25, 50, 75, 90, 95, 0 }; // idb
int dword_4D8D00[] = { 0 }; // weak
int dword_4D9180[6] = { 4, 4, 5, 1, 5, 3 }; // idb
int dword_4D9198[3] = { 4, 1, 2 }; // idb
int dword_4D91A4[11] = { 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20 }; // idb
int dword_4D91D0[16] = { 6, 7, 8, 9, 10, 70, 71, 72, 73, 74, 32, 33, 34, 35, 36, 0 }; // idb
int dword_4D9210[14] = { 30, 21, 15, 12, 9, 5, 1, 30, 21, 15, 12, 9, 5, 1 }; // idb
int dword_4D9248[8] = { 42, 26, 17, 14, 11, 6, 2, 0 }; // idb
int dword_4D9268[21] =
{
  0,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
  14,
  14,
  15,
  15,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20
}; // idb
int dword_4D92BC[8] = { 100, 115, 130, 145, 160, 175, 190, 200 }; // idb
int dword_4D92DC[8] = { 100, 85, 70, 55, 40, 25, 10, 0 }; // idb
int dword_4D92FC[9] = { 100, 115, 130, 145, 160, 175, 190, 200, 0 }; // idb
int dword_4D9320[288] =
{
  100,
  100,
  100,
  100,
  100,
  100,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  70,
  70,
  70,
  70,
  70,
  55,
  55,
  55,
  40,
  40,
  40,
  25,
  25,
  25,
  10,
  0,
  0,
  1996959894,
  -301047508,
  -1727442502,
  124634137,
  1886057615,
  -379345611,
  -1637575261,
  249268274,
  2044508324,
  -522852066,
  -1747789432,
  162941995,
  2125561021,
  -407360249,
  -1866523247,
  498536548,
  1789927666,
  -205950648,
  -2067906082,
  450548861,
  1843258603,
  -187386543,
  -2083289657,
  325883990,
  1684777152,
  -43845254,
  -1973040660,
  335633487,
  1661365465,
  -99664541,
  -1928851979,
  997073096,
  1281953886,
  -715111964,
  -1570279054,
  1006888145,
  1258607687,
  -770865667,
  -1526024853,
  901097722,
  1119000684,
  -608450090,
  -1396901568,
  853044451,
  1172266101,
  -589951537,
  -1412350631,
  651767980,
  1373503546,
  -925412992,
  -1076862698,
  565507253,
  1454621731,
  -809855591,
  -1195530993,
  671266974,
  1594198024,
  -972236366,
  -1324619484,
  795835527,
  1483230225,
  -1050600021,
  -1234817731,
  1994146192,
  31158534,
  -1731059524,
  -271249366,
  1907459465,
  112637215,
  -1614814043,
  -390540237,
  2013776290,
  251722036,
  -1777751922,
  -519137256,
  2137656763,
  141376813,
  -1855689577,
  -429695999,
  1802195444,
  476864866,
  -2056965928,
  -228458418,
  1812370925,
  453092731,
  -2113342271,
  -183516073,
  1706088902,
  314042704,
  -1950435094,
  -54949764,
  1658658271,
  366619977,
  -1932296973,
  -69972891,
  1303535960,
  984961486,
  -1547960204,
  -725929758,
  1256170817,
  1037604311,
  -1529756563,
  -740887301,
  1131014506,
  879679996,
  -1385723834,
  -631195440,
  1141124467,
  855842277,
  -1442165665,
  -586318647,
  1342533948,
  654459306,
  -1106571248,
  -921952122,
  1466479909,
  544179635,
  -1184443383,
  -832445281,
  1591671054,
  702138776,
  -1328506846,
  -942167884,
  1504918807,
  783551873,
  -1212326853,
  -1061524307,
  -306674912,
  -1698712650,
  62317068,
  1957810842,
  -355121351,
  -1647151185,
  81470997,
  1943803523,
  -480048366,
  -1805370492,
  225274430,
  2053790376,
  -468791541,
  -1828061283,
  167816743,
  2097651377,
  -267414716,
  -2029476910,
  503444072,
  1762050814,
  -144550051,
  -2140837941,
  426522225,
  1852507879,
  -19653770,
  -1982649376,
  282753626,
  1742555852,
  -105259153,
  -1900089351,
  397917763,
  1622183637,
  -690576408,
  -1580100738,
  953729732,
  1340076626,
  -776247311,
  -1497606297,
  1068828381,
  1219638859,
  -670225446,
  -1358292148,
  906185462,
  1090812512,
  -547295293,
  -1469587627,
  829329135,
  1181335161,
  -882789492,
  -1134132454,
  628085408,
  1382605366,
  -871598187,
  -1156888829,
  570562233,
  1426400815,
  -977650754,
  -1296233688,
  733239954,
  1555261956,
  -1026031705,
  -1244606671,
  752459403,
  1541320221,
  -1687895376,
  -328994266,
  1969922972,
  40735498,
  -1677130071,
  -351390145,
  1913087877,
  83908371,
  -1782625662,
  -491226604,
  2075208622,
  213261112,
  -1831694693,
  -438977011,
  2094854071,
  198958881,
  -2032938284,
  -237706686,
  1759359992,
  534414190,
  -2118248755,
  -155638181,
  1873836001,
  414664567,
  -2012718362,
  -15766928,
  1711684554,
  285281116,
  -1889165569,
  -127750551,
  1634467795,
  376229701,
  -1609899400,
  -686959890,
  1308918612,
  956543938,
  -1486412191,
  -799009033,
  1231636301,
  1047427035,
  -1362007478,
  -640263460,
  1088359270,
  936918000,
  -1447252397,
  -558129467,
  1202900863,
  817233897,
  -1111625188,
  -893730166,
  1404277552,
  615818150,
  -1160759803,
  -841546093,
  1423857449,
  601450431,
  -1285129682,
  -1000256840,
  1567103746,
  711928724,
  -1274298825,
  -1022587231,
  1510334235,
  755167117
}; // idb
int dword_4D9830 = -1153374642; // weak
int (*off_4DA1C8)(void) = &terminate; // weak
HANDLE hEvent = NULL; // idb
int dword_4DA6E4 = 0; // weak
int dword_4DA6E8 = 0; // weak
int dword_4DA6F0[4] = { 0, 0, 0, 0 }; // weak
volatile LONG Target = 0; // idb
CMemoryPool<CFindPath::NODE>::CPool stru_4DA75C = { NULL, { 0 } }; // idb
_UNKNOWN stru_4DA764; // weak
volatile LONG Addend = 0; // idb
_UNKNOWN stru_4DA770; // weak
int dword_4DA778 = 0; // weak
int dword_4DA77C = 0; // weak
int dword_4DA780 = 0; // weak
int dword_4DA784 = 0; // weak
int dword_4DA788 = 0; // weak
int dword_4DA78C = 0; // weak
int dword_4DA790 = 0; // weak
int dword_4DA794 = 0; // weak
CIOObject unk_4DA798 = { NULL, 0, 0, 0 }; // idb
HANDLE hObject = NULL; // idb
int dword_4DA7AC = 0; // weak
_UNKNOWN unk_4DA7B0; // weak
int dword_4DA7B8[4] = { 0, 0, 0, 0 }; // weak
int dword_4DA7C8 = 0; // weak
CDBPacket stru_4DA824 = { { NULL, 0, 0, 0 }, { NULL } }; // idb
_UNKNOWN stru_4E0900; // weak
CFindPath::NODE stru_4E0908; // idb
int dword_4E094C[3]; // weak
int dword_4E0958[3]; // weak
int dword_4E0964; // weak
int dword_4E0968[3]; // weak
int dword_4E0974[3]; // weak
CRWLock unk_4E0980; // idb
HANDLE hHandle; // idb
int dword_4E099C; // weak
int dword_4E09A0; // weak
int dword_4E09A4[3]; // weak
CRWLock unk_4E09B0; // idb
int dword_4E09C8[3]; // weak
CRWLock unk_4E09D4; // idb
_DWORD dword_4E09F0[4]; // idb
int dword_4E0B70; // weak
char begin[]; // idb
LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter; // idb
char byte_4E0B80[]; // idb
char ExistingFileName[]; // idb
time_t dword_4E0D8C; // idb
struct _RTL_CRITICAL_SECTION CriticalSection; // idb
char *host; // idb
char *from; // idb
char *to; // idb
CIOException::CInit unk_4E0DB4; // idb
int dword_4E0DB8; // weak
int nThread; // idb
void *nThreadId; // idb
void **hThread; // idb
DWORD nCount; // idb
int dword_4E0DD0[64]; // idb
HANDLE Handles[64]; // idb
int dword_4E0FD0; // weak
HANDLE handle; // idb
volatile LONG dword_4E0FD8; // idb
volatile LONG dword_4E0FDC; // idb
HANDLE ExistingCompletionPort; // idb
volatile LONG dword_4E0FE4; // idb
CIOCriticalSection unk_4E0FE8; // idb
std::priority_queue<CIOSocket::CIOTimer> unk_4E100C; // idb
CIOSocket::CIOTimerInstance unk_4E1020; // idb
LONG pRef[2]; // idb
_DWORD _t[32]; // idb
volatile LONG dword_4E10B0; // idb
int dword_4E10B4[3]; // weak
int dword_4E10C0[3]; // weak
int dword_4E10CC[3]; // weak
CRWLock unk_4E10D8; // idb
int dword_4E10F0[3]; // weak
int dword_4E10FC[3]; // weak
lisp::var v; // idb
int dword_4E1110[3]; // idb
FILE *stream; // idb
CLink unk_4E1128; // idb
CLog::CInit unk_4E115C; // idb
char dword_4E1160[]; // idb
int dword_4E1164; // weak
u_short hostshort; // idb
u_short dword_4E116C; // idb
u_short nPort; // idb
char dword_4E1174[]; // idb
int dword_4E1178; // weak
int dword_4E117C; // weak
int dword_4E1180; // weak
int dword_4E1184; // weak
int dword_4E1188; // weak
int dword_4E118C; // weak
char dword_4E1190[]; // idb
std::string stru_4E1194; // idb
std::string stru_4E11B0; // idb
std::string stru_4E11CC; // idb
std::string stru_4E11E8; // idb
std::string stru_4E1204; // idb
std::string stru_4E1220; // idb
std::string stru_4E123C; // idb
int dword_4E1258[3]; // weak
std::string stru_4E1264; // idb
HANDLE dword_4E1280; // idb
char ClassName[]; // idb
char WindowName[]; // idb
HINSTANCE hInstance; // idb
UINT uValue; // idb
int dword_4E17B8; // weak
volatile LONG dword_4E17C0; // idb
int dword_4E17C8[16]; // idb
volatile LONG dword_4E1810; // idb
int dword_4E1814; // weak
int dword_4E181C; // weak
int dword_4E1820[3]; // weak
CIOCriticalSection unk_4E182C; // idb
int dword_4E184C[3]; // weak
CRWLock unk_4E1858; // idb
int dword_4E1870[3]; // weak
CRWLock unk_4E187C; // idb
CIOObject unk_4E1898; // idb
CIOObject unk_4E1930; // idb
CIOObject unk_4E1998; // idb
CIOObject unk_4E1A00; // idb
int dword_4E1A64; // weak
int dword_4E1A68; // weak
int dword_4E1A70[8]; // idb
int dword_4E1A90; // weak
int dword_4E1A94; // weak
volatile LONG dword_4E1A98; // idb
int dword_4E1A9C[3]; // weak
int dword_4E1AA8[3]; // weak
int dword_4E1AB4[3]; // weak
CRWLock unk_4E1AC0; // idb
CIOObject unk_4E1AD8; // idb
CIOCriticalSection unk_4E1B38; // idb
CIOCriticalSection unk_4E1B58; // idb
CIOCriticalSection unk_4E1B78; // idb
volatile LONG dword_4E1B98; // idb
_DWORD dword_4E1B9C[3]; // idb
int dword_4E1F38[4]; // weak
volatile LONG dword_4E1FB8; // idb
int dword_4E1FC0; // weak
_DWORD dword_4E1FC4[3]; // idb
CIOCriticalSection unk_4E1FD0; // idb
int dword_4E1FF0; // weak
int dword_4E1FF4; // weak
int nBuff; // idb
volatile LONG dword_4E1FFC; // idb
volatile LONG dword_4E2000; // idb
CLink pTo; // idb
CLink unk_4E200C; // idb
volatile LONG dword_4E2014; // idb
int dword_4E201C; // weak
_DWORD dword_4E2020[3]; // idb
CRWLock unk_4E202C; // idb
_DWORD dword_4E2044[3]; // idb
CRWLock unk_4E2050; // idb
_DWORD dword_4E2068[4]; // idb
struct _RTL_CRITICAL_SECTION stru_4E2078; // idb
struct _RTL_CRITICAL_SECTION stru_4E2098; // idb
CRWLock unk_4E20B8; // idb
int dword_4E20D0[3]; // weak
CRWLock unk_4E20DC; // idb
CIOObject unk_4E20F4; // idb
int dword_4E2104; // weak
int dword_4E2108; // weak
int dword_4E210C[3]; // weak
CRWLock unk_4E2118; // idb
CScreen *dword_4E2130; // idb
HWND hWnd; // idb
int dword_4E2138; // weak
int dword_4E213C; // weak
CLink dword_4E2140; // idb
time_t dword_4E2148; // idb
_DWORD dword_4E214C[3]; // idb
CIOServer unk_4E2158; // idb
int dword_4E2168; // weak
CRWLock unk_4E2170; // idb
int dword_4E2188; // weak
int dword_4E218C[3]; // weak
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > stru_4E2198; // idb
_UNKNOWN dword_4E21A8; // weak
_UNKNOWN dword_4E2568; // weak
CSkill *dword_4E2668; // idb
int dword_4E266C; // weak
int dword_4E2670; // weak
int dword_4E2674; // weak
int dword_4E2678; // weak
int dword_4E267C; // weak
int dword_4E2680; // weak
int dword_4E2684; // weak
int dword_4E2688; // weak
CSkill *dword_4E2690; // idb
int dword_4E2694; // weak
int dword_4E2698; // weak
int dword_4E269C; // weak
int dword_4E26A0; // weak
int dword_4E26A4; // weak
int dword_4E26A8; // weak
int dword_4E26AC; // weak
int dword_4E26B0; // weak
int dword_4E26B4; // weak
int dword_4E26B8; // weak
int dword_4E26BC; // weak
int dword_4E26C0; // weak
int dword_4E26C4; // weak
int dword_4E26C8; // weak
int dword_4E26CC; // weak
int dword_4E26D0; // weak
int dword_4E26D4; // weak
int dword_4E26D8; // weak
int dword_4E26DC; // weak
int dword_4E26E0; // weak
int dword_4E26E4; // weak
int dword_4E26E8; // weak
int dword_4E26EC; // weak
int dword_4E26F0; // weak
int dword_4E26F4; // weak
int dword_4E26F8; // weak
int dword_4E26FC; // weak
int dword_4E2700; // weak
int dword_4E2704; // weak
int dword_4E2708; // weak
int dword_4E270C; // weak
int dword_4E2710; // weak
int dword_4E2714; // weak
int dword_4E2718; // weak
int dword_4E271C; // weak
int dword_4E2720; // weak
int dword_4E2724; // weak
int dword_4E2728; // weak
int dword_4E272C; // weak
int dword_4E2730; // weak
int dword_4E2738; // weak
int dword_4E2740; // weak
int dword_4E2744; // weak
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > stru_4E2748; // idb
int dword_4E2754; // weak
CMapObject *dword_4E2758[480];
volatile LONG dword_4E2ED8; // idb
int dword_4E2EDC[13]; // weak
int (__cdecl *dword_4E2F10)(_DWORD); // weak
int dword_4E2F18[210]; // idb
int dword_4E3260[210]; // idb
int dword_4E35A8; // weak
int dword_4E35AC; // weak
int dword_4E35B0; // weak
CIOObject stru_4E35B4; // idb
volatile LONG dword_4E36C0; // idb
int dword_4E36C4[]; // weak
int dword_4E36C8[32]; // idb
int dword_4E3748; // weak
InitCodePage unk_4E374C; // idb
int dword_4E3750; // weak


//----- (00401000) --------------------------------------------------------
CMemory **__cdecl operator new(size_t a1)
{
  return CMemory::_malloc(a1);
}

//----- (00401020) --------------------------------------------------------
void __cdecl operator delete(void *a1)
{
  CMemory::_free(a1);
}

//----- (00401040) --------------------------------------------------------
void __thiscall CAuthPacket::OnIOCallback(CAuthPacket *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  CAuthSocket::Process((AUTHPACKET *)dwTransferred);
  CIOBuffer::Release(this->m_pBuf);
  CMemoryPool<CAuthPacket>::Free(this);
}

//----- (00401070) --------------------------------------------------------
void __thiscall CIOBuffer::Release(CIOBuffer *this)
{
  if ( !InterlockedDecrement(&this->m_nRef) )
    CIOBuffer::Free(this);
}

//----- (004010A0) --------------------------------------------------------
_DWORD *__thiscall CAuthSocket::CAuthSocket(_DWORD *this)
{
  CIOSocket::CIOSocket(this, 0);
  *this = &off_4B433C;
  CIOObject::AddRef((int)this);
  return this;
}
// 4B433C: using guessed type void *(__thiscall *off_4B433C)(DeathMatch_Wait *__hidden this, unsigned int);

//----- (004010D0) --------------------------------------------------------
LONG __thiscall CIOObject::AddRef(int this)
{
  return CIOObject::AddRef((CIOObject *)this, (volatile int *)(this + 12));
}

//----- (004010F0) --------------------------------------------------------
CIOObject *__thiscall CIOObject::OnFree(CIOObject *this)
{
  CIOObject *result; // eax

  result = this;
  if ( this )
    result = (CIOObject *)((int (__thiscall *)(CIOObject *, int))this->~CIOObject)(this, 1);
  return result;
}

//----- (00401140) --------------------------------------------------------
MRegion *__thiscall CAuthSocket::`scalar deleting destructor'(MRegion *this, unsigned int a2)
{
  CAuthSocket::~CAuthSocket(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00401170) --------------------------------------------------------
void __thiscall CAuthSocket::~CAuthSocket(_DWORD *this)
{
  *this = &off_4B433C;
  CIOSocket::_CIOSocket((CIOBuffer **)this);
}
// 4B433C: using guessed type void *(__thiscall *off_4B433C)(DeathMatch_Wait *__hidden this, unsigned int);

//----- (00401190) --------------------------------------------------------
int __cdecl CAuthSocket::Start()
{
  const char *v0; // eax
  const char *v1; // eax
  struct hostent *v3; // [esp+0h] [ebp-1Ch]
  struct sockaddr name; // [esp+4h] [ebp-18h] BYREF
  int v5; // [esp+14h] [ebp-8h]
  SOCKET Value; // [esp+18h] [ebp-4h]

  v5 = dword_4D9830;
  Value = socket(2, 1, 0);
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_WORD *)name.sa_data = 0;
  bind(Value, &name, 16);
  name.sa_family = 2;
  v0 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E11CC);
  *(_DWORD *)&name.sa_data[2] = inet_addr(v0);
  if ( *(_DWORD *)&name.sa_data[2] == -1 )
  {
    v1 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E11CC);
    v3 = gethostbyname(v1);
    if ( !v3 )
    {
LABEL_11:
      closesocket(Value);
      return 0;
    }
    memcpy(&name.sa_data[2], *(const void **)v3->h_addr_list, v3->h_length);
  }
  *(_WORD *)name.sa_data = htons(hostshort);
  if ( connect(Value, &name, 16) == -1 )
  {
    LOG_ERR("Can't connect to Auth Server");
    goto LABEL_11;
  }
  if ( !dword_4DA6E8 )
    hEvent = CreateEventA(0, 1, 0, 0);
  CAuthSocket::Initialize((CIOSocket *)dword_4DA6F0, Value);
  if ( !dword_4DA6E8 )
    WaitForSingleObject(hEvent, 0xFFFFFFFF);
  return dword_4DA6E8;
}
// 4D9830: using guessed type int dword_4D9830;
// 4DA6E8: using guessed type int dword_4DA6E8;
// 4DA6F0: using guessed type int dword_4DA6F0[4];

//----- (004012D0) --------------------------------------------------------
_DWORD *__thiscall std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(void *this)
{
  return std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this);
}

//----- (00401320) --------------------------------------------------------
BOOL __cdecl CAuthSocket::Stop()
{
  BOOL result; // eax

  dword_4DA6E4 = 1;
  result = ResetEvent(hEvent);
  if ( Target != -1 )
  {
    CAuthSocket::Write(S2A_CLOSE, &DefaultNullString);
    WaitForSingleObject(hEvent, 0xFFFFFFFF);
    result = CloseHandle(hEvent);
    hEvent = 0;
  }
  return result;
}
// 4DA6E4: using guessed type int dword_4DA6E4;

//----- (00401380) --------------------------------------------------------
void __thiscall CAuthSocket::Initialize(CIOSocket *a1, LONG Value)
{
  CIOBuffer *v3; // [esp+4h] [ebp-8h]

  CIOCriticalSection::Enter(&a1->m_lock.m_critical_section);
  if ( InterlockedExchange(&Target, Value) == -1 )
    CIOObject::AddRef((int)dword_4DA6F0);
  memset(&a1->m_overlappedRead, 0, sizeof(a1->m_overlappedRead));
  memset(&a1->m_overlappedWrite, 0, sizeof(a1->m_overlappedWrite));
  a1->m_pReadBuf->m_dwSize = 0;
  a1->m_nPendingWrite = 0;
  while ( a1->m_pFirstBuf )
  {
    v3 = a1->m_pFirstBuf;
    a1->m_pFirstBuf = v3->m_pNext;
    CIOBuffer::Free(v3);
  }
  a1->m_pLastBuf = 0;
  a1->m_pFirstBuf = 0;
  CIOCriticalSection::Leave((int)&a1->m_lock);
  CIOSocket::Initialize(a1);
}
// 4DA6F0: using guessed type int dword_4DA6F0[4];

//----- (00401460) --------------------------------------------------------
void __thiscall CAuthSocket::OnTimer(CAuthSocket *this, int nId)
{
  if ( !dword_4DA6E4 && !CAuthSocket::Start() )
    CIOObject::AddTimer(this, 10000u, 0);
}
// 4DA6E4: using guessed type int dword_4DA6E4;

//----- (00401490) --------------------------------------------------------
void __thiscall CAuthSocket::OnClose(int nAuthSocket)
{
  if ( !dword_4DA6E8 || dword_4DA6E4 )
  {
    SetEvent(hEvent);
  }
  else
  {
    LOG_ERR("Connection closed from Auth Server");
    CIOObject::AddTimer((CIOObject *)nAuthSocket, 0x2710u, 0);
  }
}
// 4DA6E4: using guessed type int dword_4DA6E4;
// 4DA6E8: using guessed type int dword_4DA6E8;

//----- (004014E0) --------------------------------------------------------
void __thiscall CAuthSocket::OnRead(CIOSocket *this)
{
  int dwNumberOfBytesTransferred; // [esp+4h] [ebp-14h]
  CIOObject *v3; // [esp+8h] [ebp-10h]
  size_t v4; // [esp+Ch] [ebp-Ch]
  CIOBuffer *v5; // [esp+10h] [ebp-8h]
  size_t dwLeft; // [esp+14h] [ebp-4h]

  dwLeft = this->m_pReadBuf->m_dwSize;
  v5 = this->m_pReadBuf;
  while ( 1 )
  {
    dwNumberOfBytesTransferred = (int)v5;
    if ( dwLeft < 2 )
      break;
    v4 = *(unsigned __int16 *)v5->m_buffer;
    if ( dwLeft < v4 )
      break;
    dwLeft -= v4;
    v5 = (CIOBuffer *)((char *)v5 + v4);
    v3 = (CIOObject *)CMemoryPool<CAuthPacket>::Alloc();
    v3[1].__vftable = (CIOObject_vtbl *)this->m_pReadBuf;
    CIOBuffer::AddRef(this->m_pReadBuf);
    CIOObject::PostObject(v3, dwNumberOfBytesTransferred);
  }
  CIOSocket::Read(this, dwLeft);
}

//----- (00401570) --------------------------------------------------------
LONG __thiscall CIOBuffer::AddRef(CIOBuffer *this)
{
  return InterlockedIncrement(&this->m_nRef);
}

//----- (00401590) --------------------------------------------------------
BOOL __thiscall CIOObject::PostObject(CIOObject *this, int nId)
{
  return PostQueuedCompletionStatus(ExistingCompletionPort, nId, (ULONG_PTR)this, 0);
}

//----- (004015C0) --------------------------------------------------------
void __cdecl CAuthSocket::Process(AUTHPACKET *authpacket)
{
  DWORD v1; // [esp+4h] [ebp-E0h] BYREF
  CIOObject *v2; // [esp+8h] [ebp-DCh]
  int v3; // [esp+Ch] [ebp-D8h] BYREF
  int v4; // [esp+10h] [ebp-D4h] BYREF
  CIOObject *v5; // [esp+14h] [ebp-D0h]
  int a3; // [esp+18h] [ebp-CCh] BYREF
  int a2; // [esp+1Ch] [ebp-C8h] BYREF
  int v8; // [esp+20h] [ebp-C4h] BYREF
  char v9[4]; // [esp+24h] [ebp-C0h] BYREF
  char v10[4]; // [esp+28h] [ebp-BCh] BYREF
  char v11[4]; // [esp+2Ch] [ebp-B8h] BYREF
  char v12[4]; // [esp+30h] [ebp-B4h] BYREF
  unsigned __int16 v13; // [esp+34h] [ebp-B0h] BYREF
  int v14; // [esp+38h] [ebp-ACh] BYREF
  DWORD v15; // [esp+3Ch] [ebp-A8h] BYREF
  CSocket *v16; // [esp+40h] [ebp-A4h]
  int v17; // [esp+44h] [ebp-A0h] BYREF
  int v18; // [esp+48h] [ebp-9Ch] BYREF
  DWORD v19; // [esp+4Ch] [ebp-98h] BYREF
  CIOObject *v20; // [esp+50h] [ebp-94h]
  unsigned __int8 v21; // [esp+57h] [ebp-8Dh] BYREF
  int v22; // [esp+58h] [ebp-8Ch] BYREF
  unsigned __int8 v23; // [esp+5Fh] [ebp-85h] BYREF
  CIOObject *v24; // [esp+60h] [ebp-84h]
  DWORD v25; // [esp+64h] [ebp-80h] BYREF
  CIOObject *v26; // [esp+68h] [ebp-7Ch]
  unsigned __int8 v27; // [esp+6Fh] [ebp-75h] BYREF
  int v28; // [esp+70h] [ebp-74h] BYREF
  const char *v29; // [esp+74h] [ebp-70h] BYREF
  DWORD v30; // [esp+78h] [ebp-6Ch] BYREF
  CIOObject *v31; // [esp+7Ch] [ebp-68h]
  unsigned __int8 v32; // [esp+83h] [ebp-61h] BYREF
  int v33; // [esp+84h] [ebp-60h] BYREF
  const char *v34; // [esp+88h] [ebp-5Ch] BYREF
  DWORD v35; // [esp+8Ch] [ebp-58h] BYREF
  CIOCriticalSection *v36; // [esp+90h] [ebp-54h]
  DWORD v37; // [esp+94h] [ebp-50h] BYREF
  CIOObject *v38; // [esp+98h] [ebp-4Ch]
  unsigned __int16 v39; // [esp+9Ch] [ebp-48h] BYREF
  int nAllAccount; // [esp+A0h] [ebp-44h] BYREF
  unsigned __int16 v41; // [esp+A4h] [ebp-40h] BYREF
  DWORD v42; // [esp+A8h] [ebp-3Ch] BYREF
  CIOObject *v43; // [esp+ACh] [ebp-38h]
  unsigned __int8 v44; // [esp+B3h] [ebp-31h] BYREF
  unsigned __int16 v45; // [esp+B4h] [ebp-30h] BYREF
  unsigned __int16 v46; // [esp+B8h] [ebp-2Ch] BYREF
  DWORD a1; // [esp+BCh] [ebp-28h] BYREF
  void *a7; // [esp+C0h] [ebp-24h] BYREF
  CIOObject *v49; // [esp+C4h] [ebp-20h]
  unsigned __int8 v50; // [esp+CAh] [ebp-1Ah] BYREF
  unsigned __int8 v51; // [esp+CBh] [ebp-19h] BYREF
  int a6; // [esp+CCh] [ebp-18h] BYREF
  int nUID; // [esp+D0h] [ebp-14h] BYREF
  int a5; // [esp+D4h] [ebp-10h] BYREF
  unsigned __int8 v55; // [esp+DAh] [ebp-Ah] BYREF
  unsigned __int8 v56; // [esp+DBh] [ebp-9h] BYREF
  char *packet; // [esp+DCh] [ebp-8h]
  A2S_PROTOCOL nType; // [esp+E0h] [ebp-4h]

  packet = authpacket->data;
  nType = authpacket->byType;
  switch ( nType )
  {
    case A2S_VERSION:
      ReadPacket(packet, "bdb", &v56, &unk_4DA6EC, &v55);
      if ( v56 <= 2u )
      {
        if ( v55 == stru_4E35B4.m_nRef )
        {
          dword_4DA6E8 = 1;
          SetEvent(hEvent);
          CAuthSocket::Write(S2A_SVRINFO, "wb", dword_4E1188, dword_4E1184);
          LOG_NORMAL("Auth server version (Version:%d)", v56);
          CServer::Relogin();
        }
        else
        {
          LOG_ERR("Country Code is different (AuthSvr:%d, MainSvr:%d)", v55, stru_4E35B4.m_nRef);
          CIOSocket::WriteCallback((CIOSocket *)dword_4DA6F0);
        }
      }
      else
      {
        LOG_ERR("Auth version is different (AuthSvr:%d, MainSvr:%d)", v56, 2);
        CIOSocket::WriteCallback((CIOSocket *)dword_4DA6F0);
      }
      break;
    case A2S_LOGIN:
      ReadPacket(packet, "ddbbdds", &a1, &nUID, &v50, &v51, &a5, &a6, &a7);
      v49 = CServer::FindSocket(a1);
      if ( v49 )
      {
        CSocket::OnLogin((CSocket *)v49, v50, nUID, v51, a5, a6, (const char *)a7);
        CIOObject::Release(v49);
      }
      else if ( v50 == 1 )
      {
        CAuthSocket::Write(S2A_LOGOUT, "dddwbdddb", a1, nUID, 0, 0, v51, a6, 0, 0, 7);
      }
      break;
    case A2S_USER:
      ReadPacket(packet, "dbww", &v42, &v44, &v45, &v46);
      v43 = CServer::FindSocket(v42);
      if ( v43 )
      {
        CSocket::OnUserCount((CSocket *)v43, v44, v45, v46);
        CIOObject::Release(v43);
      }
      break;
    case A2S_USERALL:
      ReadPacket(packet, "dwwd", &v37, &v39, &v41, &nAllAccount);
      v38 = CServer::FindSocket(v37);
      if ( v38 )
      {
        CSocket::OnUserAllCount((CSocket *)v38, v39, v41, nAllAccount);
        CIOObject::Release(v38);
      }
      break;
    case A2S_KICKOUT:
      ReadPacket(packet, "d", &v35);
      v36 = (CIOCriticalSection *)CServer::FindSocket(v35);
      if ( v36 )
      {
        CSocket::OnKickOut(v36);
        CIOObject::Release((CIOObject *)v36);
      }
      break;
    case A2S_BLOCK:
      ReadPacket(packet, "dbds", &v30, &v32, &v33, &v34);
      v31 = CServer::FindSocket(v30);
      if ( v31 )
      {
        CSocket::OnBlockAccount(v31, v32, v33, v34);
        CIOObject::Release(v31);
      }
      break;
    case A2S_FREE:
      ReadPacket(packet, "dbds", &v25, &v27, &v28, &v29);
      v26 = CServer::FindSocket(v25);
      if ( v26 )
      {
        CSocket::OnFreeAccount(v26, v27, v28, v29);
        CIOObject::Release(v26);
      }
      break;
    case A2S_EVENT:
      packet = (char *)ReadPacket(packet, "db", &v22, &v23);
      v24 = CPlayer::FindPlayer(v22);
      if ( v24 )
      {
        CPlayer::OnProcessEvent(v24, v23, packet);
        CIOObject::Release(v24, (volatile int *)&v24[22]);
      }
      break;
    case A2S_REQUESTCOPY:
      CDBSocket::Write(S2D_REQUESTCOPY, "m", packet, (char *)authpacket + authpacket->wSize - packet);
      break;
    case A2S_ANS_REQUESTCOPY:
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        packet = (char *)ReadPacket(packet, "db", &v19, &v21);
        v20 = CServer::FindSocket(v19);
        if ( v20 )
        {
          CSocket::OnRequestCopy((int)v20, v21, packet, (int)authpacket + authpacket->wSize);
          CIOObject::Release(v20);
        }
      }
      break;
    case A2S_BILLINGALERT:
      ReadPacket(packet, "ddd", &v15, &v18, &v17);
      v16 = CServer::FindSocket(v15);
      if ( v16 )
      {
        CSocket::Write(v16, S2C_BILLINGALERT, "dd", v18, v17);
        CIOObject::Release(v16);
      }
      break;
    case A2S_SPECIALITEM:
      packet = (char *)ReadPacket(packet, "dw", &v14, &v13);
      CGoods::ForcedStorageIn(v14, v13, packet);
      break;
    case A2S_NOTICE:
      packet = (char *)ReadPacket(packet, "ds", v12, v11);
      if ( *(int *)v12 >= 0 )
      {
        if ( *(_DWORD *)v12 )
        {
          if ( dword_4E17B8 )
          {
            LOG_INFO("[Shutdown] Shutdown's already started. (%d min. remains)", dword_4E17B8 / 60000);
          }
          else
          {
            if ( **(_BYTE **)v11 )
            {
              CPlayer::WriteAll(S2C_NOTICE, "s", *(_DWORD *)v11);
              if ( stru_4E35B4.m_nRef == 1 )
                LOG_NORMAL("[GM Command] Notice from Auth : %s", *(const char **)v11);
            }
            dword_4E17B8 = 60000 * *(_DWORD *)v12;
            SetTimer(hWnd, 2u, 0x2710u, 0);
            LOG_NORMAL("Shutdown's started. (%d min. remains)", *(_DWORD *)v12);
          }
        }
        else if ( dword_4E17B8 )
        {
          KillTimer(hWnd, 2u);
          dword_4E17B8 = 0;
          LOG_NORMAL("Shutdown's canceled.");
        }
      }
      else if ( **(_BYTE **)v11 )
      {
        CPlayer::WriteAll(S2C_NOTICE, "s", *(_DWORD *)v11);
        if ( stru_4E35B4.m_nRef == 1 )
          LOG_NORMAL("[GM Command] Notice from Auth : %s", *(const char **)v11);
      }
      break;
    case A2S_IS_EVENT:
      ReadPacket(packet, "dd", v9, v10);
      break;
    case A2S_EVENT_GET_FLAG:
      v4 = 0;
      v8 = 0;
      a3 = 0;
      a2 = 0;
      ReadPacket(packet, "dddd", &v4, &v8, &a2, &a3);
      v5 = CPlayer::ScanPlayer(v4);
      if ( v5 )
      {
        CPlayer::EventProcessNPC(v5, a2, a3, 3);
        CIOObject::Release(v5, (volatile int *)&v5[22]);
      }
      break;
    case A2S_RESTORELONGRESTUSERITEM:
      ReadPacket(packet, "dd", &v3, &v1);
      CDBSocket::Write(S2D_RESTORELONGRESTUSERITEM, "d", v3);
      v2 = CServer::FindSocket(v1);
      if ( v2 )
      {
        BitSet(&v2[6].m_nGeneralRef, 7u);
        CIOObject::Release(v2);
      }
      break;
    default:
      LOG_ERR("invalid packet type at CAuthSocket::Process Type(%d)", nType);
      break;
  }
}
// 4DA6E8: using guessed type int dword_4DA6E8;
// 4DA6F0: using guessed type int dword_4DA6F0[4];
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;
// 4E17B8: using guessed type int dword_4E17B8;

//----- (00401DE0) --------------------------------------------------------
void __thiscall CIOObject::Release(CIOObject *this)
{
  CIOObject::Release(this, &this->m_nGeneralRef);
}

//----- (00401E00) --------------------------------------------------------
void CAuthSocket::Write(enum S2A_PROTOCOL nType, ...)
{
  CIOBuffer *v1; // [esp+4h] [ebp-Ch]
  va_list va; // [esp+1Ch] [ebp+Ch] BYREF

  va_start(va, nType);
  if ( Target != -1 )
  {
    v1 = CIOBuffer::Alloc();
    v1->m_buffer[2] = nType;
    *(_WORD *)v1->m_buffer = (unsigned __int16)WritePacket(&v1->m_buffer[3], va) - (_WORD)v1;
    v1->m_dwSize = *(unsigned __int16 *)v1->m_buffer;
    CIOSocket::Write((CIOSocket *)dword_4DA6F0, v1);
  }
}
// 4DA6F0: using guessed type int dword_4DA6F0[4];

//----- (00401E80) --------------------------------------------------------
int __cdecl CMemoryPool<CAuthPacket>::Alloc()
{
  int result; // eax
  CIOObject *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA768]);
  v3 = stru_4DA764;
  if ( stru_4DA764 )
  {
    stru_4DA764 = *(_DWORD *)(stru_4DA764 + 16);
    CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA768]);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA768]);
    v2 = operator new(0x14u);
    if ( v2 )
      v1 = CAuthPacket::CAuthPacket((CIOObject *)v2);
    else
      v1 = 0;
    result = (int)v1;
  }
  return result;
}
// 4DA764: using guessed type int dword_4DA764;

//----- (00401F00) --------------------------------------------------------
LONG __thiscall CIOSpinLock::Enter(CIOSpinLock *this)
{
  LONG result; // eax

  result = InterlockedCompareExchange(&this->lock, 1, 0);
  if ( result )
    result = CIOSocket::AddIOThread(&this->lock);
  return result;
}

//----- (00401F30) --------------------------------------------------------
LONG __thiscall CIOSpinLock::Leave(CIOSpinLock *this)
{
  return InterlockedExchange(&this->lock, 0);
}

//----- (00401F50) --------------------------------------------------------
LONG __cdecl CMemoryPool<CAuthPacket>::Free(CAuthPacket *pT)
{
  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA768]);
  pT->m_pBuf = (CIOBuffer *)stru_4DA764;
  stru_4DA764 = (int)pT;
  return CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA768]);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (00401F80) --------------------------------------------------------
CIOObject *__thiscall CAuthPacket::CAuthPacket(CIOObject *this)
{
  CIOObject::CIOObject(this);
  this->__vftable = (CIOObject_vtbl *)&off_4B4564;
  return this;
}
// 4B4564: using guessed type int (__stdcall *off_4B4564)(int);

//----- (00401FA0) --------------------------------------------------------
CIOObject *__thiscall CIOObject::CIOObject(CIOObject *this)
{
  this->__vftable = (CIOObject_vtbl *)&off_4B457C;
  this->m_nRef = 1;
  this->m_nTimerRef = 0;
  this->m_nGeneralRef = 1;
  return this;
}
// 4B457C: using guessed type int (__stdcall *off_4B457C)(int);

//----- (00401FE0) --------------------------------------------------------
std::locale::facet *__thiscall CIOObject::`scalar deleting destructor'(std::locale::facet *this, char a2)
{
  std::locale::facet::~facet(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (00402010) --------------------------------------------------------
void __thiscall CIOObject::~CIOObject(CIOObject *this)
{
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (00402030) --------------------------------------------------------
LONG __thiscall CMemoryPool<CAuthPacket>::CPool::~CPool(void *this)
{
  return CMemoryPool<CAuthPacket>::FreeAll();
}

//----- (00402040) --------------------------------------------------------
LONG CMemoryPool<CAuthPacket>::FreeAll()
{
  void (__thiscall ***v1)(_DWORD, int); // [esp+Ch] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA768]);
  while ( 1 )
  {
    v1 = (void (__thiscall ***)(_DWORD, int))stru_4DA764;
    if ( !stru_4DA764 )
      break;
    stru_4DA764 = *(_DWORD *)(stru_4DA764 + 16);
    if ( v1 )
      (**v1)(v1, 1);
  }
  return CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA768]);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004020B0) --------------------------------------------------------
void CMemoryPool<CSkill>::CPool::~CPool()
{
  CMemoryPool<CSkill>::FreeAll();
}

//----- (004020C0) --------------------------------------------------------
void __cdecl CMemoryPool<CSkill>::FreeAll()
{
  void *v0; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA760]);
  while ( 1 )
  {
    v0 = (void *)stru_4DA75C;
    if ( !stru_4DA75C )
      break;
    stru_4DA75C = *(_DWORD *)(stru_4DA75C + 4);
    operator delete(v0);
  }
  CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA760]);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (00402110) --------------------------------------------------------
void __cdecl CBase::CBase()
{
  CIOObject *v0; // ecx
  CIOObject *v1; // [esp+0h] [ebp-4h]

  v1 = v0;
  CIOObject::CIOObject(v0);
  v1->__vftable = (CIOObject_vtbl *)&off_4B4598;
  v1[1].__vftable = (CIOObject_vtbl *)-6;
  v1[1].m_nGeneralRef = InterlockedIncrement(&Addend);
  v1[1].m_nTimerRef = 0;
  v1[1].m_nRef = 0;
  InterlockedIncrement(&v1->m_nTimerRef);
  InterlockedDecrement(&v1->m_nGeneralRef);
}
// 402114: variable 'v0' is possibly undefined
// 4B4598: using guessed type int (__stdcall *off_4B4598)(int);

//----- (00402180) --------------------------------------------------------
void __thiscall sub_402180(int this)
{
  CIOObject::Release((CIOObject *)this, (volatile int *)(this + 8));
}

//----- (004021B0) --------------------------------------------------------
void __stdcall sub_4021B0(int a1, int a2)
{
  ;
}

//----- (004021C0) --------------------------------------------------------
void *__thiscall CBase::`scalar deleting destructor'(void *this, char a2)
{
  CBase::~CBase((CBase *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004021F0) --------------------------------------------------------
void __thiscall CBase::~CBase(CBase *this)
{
  this->__vftable = (CBase_vtbl *)&off_4B4598;
  if ( this->m_pNext != (CBase *)-6 )
    EBREAK();
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);
// 4B4598: using guessed type int (__stdcall *off_4B4598)(int);

//----- (00402220) --------------------------------------------------------
int __thiscall CBase::OnFree(CBase *this)
{
  int result; // eax

  result = (int)this;
  if ( this->m_pNext != (CBase *)-6 )
    EBREAK();
  if ( this )
    result = ((int (__thiscall *)(CBase *, int))this->~CIOObject)(this, 1);
  return result;
}

//----- (00402270) --------------------------------------------------------
int __thiscall CBase::Set(CBase *this, Symbol symbol, lisp::var value)
{
  int result; // eax
  lisp::var *v4; // eax
  lisp::_object *v5; // ecx
  lisp::var *v6; // eax
  const char *v7; // eax
  lisp::var v8; // [esp-4h] [ebp-1Ch] BYREF
  CBase *v9; // [esp+0h] [ebp-18h]
  lisp::var v10[2]; // [esp+4h] [ebp-14h] BYREF
  lisp::var v11; // [esp+Ch] [ebp-Ch] BYREF
  char *szSymbol; // [esp+10h] [ebp-8h]
  lisp::var v13; // [esp+14h] [ebp-4h] BYREF
  enum Symbol a2a; // [esp+20h] [ebp+8h]

  v9 = this;
  if ( symbol )
  {
    v6 = lisp::var::pop(&value, v10);
    v7 = (const char *)lisp::var::operator char const *(v6);
    LOG_ERR("invalid symbol(%d) value(%s) at CBase::Set", symbol, v7);
    result = 0;
  }
  else
  {
    do
    {
      if ( (unsigned __int8)lisp::var::null(&value) )
        return 1;
      lisp::var::pop(&value, &v13);
      v4 = lisp::var::pop(&v13, &v11);
      szSymbol = (char *)lisp::var::operator char const *(v4);
      a2a = CObjectDB::FindSymbol(szSymbol);
      if ( a2a == S_NULL )
      {
        LOG_ERR("invalid symbol(%s) at CBase::Set", szSymbol);
        return 0;
      }
      v8.m_pObject = v5;
      lisp::var::var(&v8, &v13);
    }
    while ( ((int (__thiscall *)(CBase *, enum Symbol, lisp::_object *))v9->Set)(v9, a2a, v8.m_pObject) );
    result = 0;
  }
  return result;
}
// 4022E8: variable 'v5' is possibly undefined

//----- (00402340) --------------------------------------------------------
lisp::var *__thiscall lisp::var::var(lisp::var *this, lisp::var *v)
{
  this->m_pObject = v->m_pObject;
  return this;
}

//----- (00402360) --------------------------------------------------------
int __thiscall lisp::var::operator char const *(lisp::var *this)
{
  return ((int (__thiscall *)(lisp::_object *, lisp::var *))this->m_pObject->GetString)(this->m_pObject, this);
}

//----- (00402380) --------------------------------------------------------
int __thiscall lisp::var::null(lisp::var *this)
{
  return ((int (__thiscall *)(lisp::_object *, lisp::var *))this->m_pObject->null)(this->m_pObject, this);
}

//----- (004023A0) --------------------------------------------------------
lisp::var *__thiscall lisp::var::pop(lisp::var *this, lisp::var *result)
{
  lisp::var *v2; // eax
  lisp::_object *v4; // [esp+4h] [ebp-4h]

  v4 = this->m_pObject;
  this->m_pObject = this->m_pObject->cdr(this)->m_pObject;
  v2 = v4->car(v4);
  lisp::var::var(result, v2);
  return result;
}

//----- (004023F0) --------------------------------------------------------
CBaseList **__thiscall CBaseList::Push(CBaseList *this, CBase *a2)
{
  CBaseList **v4; // [esp+4h] [ebp-4h]

  v4 = (CBaseList **)CMemoryPool<CBaseList>::Alloc();
  CIOObject::AddRef((int)a2);
  *v4 = (CBaseList *)a2;
  v4[1] = this;
  return v4;
}

//----- (00402430) --------------------------------------------------------
CBaseList *__thiscall CBaseList::Pop(CBaseList *this)
{
  CBaseList *v3; // [esp+4h] [ebp-4h]

  v3 = this->m_pNext;
  CIOObject::Release(this->m_pBase);
  CMemoryPool<CBaseList>::Free(this);
  return v3;
}

//----- (00402460) --------------------------------------------------------
CBaseList *__cdecl CMemoryPool<CBaseList>::Alloc()
{
  CBaseList *result; // eax
  CBaseList *v1; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA774]);
  v1 = (CBaseList *)stru_4DA770;
  if ( stru_4DA770 )
  {
    stru_4DA770 = *(_DWORD *)(stru_4DA770 + 4);
    CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA774]);
    result = v1;
  }
  else
  {
    CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA774]);
    result = (CBaseList *)operator new(8u);
  }
  return result;
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004024C0) --------------------------------------------------------
void __cdecl CMemoryPool<CBaseList>::Free(CBaseList *pT)
{
  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA774]);
  pT->m_pNext = (CBaseList *)stru_4DA770;
  stru_4DA770 = (int)pT;
  CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA774]);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004024F0) --------------------------------------------------------
void __thiscall sub_4024F0(void *this)
{
  sub_402500();
}

//----- (00402500) --------------------------------------------------------
void __cdecl sub_402500()
{
  void *v0; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4DA774]);
  while ( 1 )
  {
    v0 = (void *)stru_4DA770;
    if ( !stru_4DA770 )
      break;
    stru_4DA770 = *(_DWORD *)(stru_4DA770 + 4);
    operator delete(v0);
  }
  CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4DA774]);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (00402550) --------------------------------------------------------
CBuff *__thiscall CBuff::Copy(CBuff *this)
{
  this->__vftable = (CBuff_vtbl *)CBuff_vtbl;
  this->m_pNext = 0;
  return this;
}

//----- (00402580) --------------------------------------------------------
int __stdcall CBuff::UpdateBuff(CBuff *a1, CChar *pChar)
{
  if ( a1 )
    CBuff::`scalar deleting destructor'(a1, 1);
  return 0;
}

//----- (004025F0) --------------------------------------------------------
_DWORD *__thiscall CBuff::~CBuff(CBuff *this)
{
  _DWORD *result; // eax

  result = &this->__vftable;
  this->__vftable = (CBuff_vtbl *)CBuff_vtbl;
  return result;
}

//----- (00402610) --------------------------------------------------------
CBuffMoveSpeed *CBuff::CreateBuff(int nBuff, ...)
{
  CBuffMoveSpeed *v1; // eax
  CBuffMoveSpeed *v2; // eax
  CBuffMoveSpeed *v3; // eax
  CBuffMoveSpeed *v4; // eax
  CBuffPrtyEx *v6; // [esp+0h] [ebp-540h]
  CBuffPrtyEx *v7; // [esp+4h] [ebp-53Ch]
  CBuffMixDamage *v8; // [esp+8h] [ebp-538h]
  CBuffRemain *v9; // [esp+Ch] [ebp-534h]
  CBuffExpireEvent *v10; // [esp+10h] [ebp-530h]
  CBuffExpireEvent *v11; // [esp+14h] [ebp-52Ch]
  CBuffExpireEvent *v12; // [esp+18h] [ebp-528h]
  CBuffRemain *v13; // [esp+1Ch] [ebp-524h]
  CBuffRemainPrty *v14; // [esp+20h] [ebp-520h]
  CBuffRemainPrty *v15; // [esp+24h] [ebp-51Ch]
  CBuffRemainPrty *v16; // [esp+28h] [ebp-518h]
  CBuffRemainPrty *v17; // [esp+2Ch] [ebp-514h]
  CBuffRemainPrty *v18; // [esp+30h] [ebp-510h]
  CBuffHydrochloricAcid *v19; // [esp+34h] [ebp-50Ch]
  CBuffRemainEx *v20; // [esp+38h] [ebp-508h]
  CBuffRemainPet *v21; // [esp+3Ch] [ebp-504h]
  CBuffRemainLuckyStone1 *v22; // [esp+40h] [ebp-500h]
  CBuffRemainDeadEx *v23; // [esp+44h] [ebp-4FCh]
  CBuffRemainDeadEx *v24; // [esp+48h] [ebp-4F8h]
  CBuffRemainDeadEx *v25; // [esp+4Ch] [ebp-4F4h]
  CBuffRemainDead *v26; // [esp+50h] [ebp-4F0h]
  CBuffRemainPrty *v27; // [esp+54h] [ebp-4ECh]
  CBuffRemainPrty *v28; // [esp+58h] [ebp-4E8h]
  CBuffRemainPrty *v29; // [esp+5Ch] [ebp-4E4h]
  CBuffRemainPrty *v30; // [esp+60h] [ebp-4E0h]
  CBuffRemainPrty *v31; // [esp+64h] [ebp-4DCh]
  CBuffMoveSpeed *v32; // [esp+68h] [ebp-4D8h]
  CBuffMoveSpeed *v33; // [esp+6Ch] [ebp-4D4h]
  CBuffRemain *v34; // [esp+70h] [ebp-4D0h]
  CBuffRemain *v35; // [esp+74h] [ebp-4CCh]
  CBuffRemain *v36; // [esp+78h] [ebp-4C8h]
  CBuffRemainXBlow *v37; // [esp+7Ch] [ebp-4C4h]
  CBuffRemainXBlow *v38; // [esp+80h] [ebp-4C0h]
  CBuffRemain *v39; // [esp+84h] [ebp-4BCh]
  CBuffRemain *v40; // [esp+88h] [ebp-4B8h]
  CBuffRemain *v41; // [esp+8Ch] [ebp-4B4h]
  CBuffMoveSpeed *v42; // [esp+90h] [ebp-4B0h]
  CBuffExpire *v43; // [esp+94h] [ebp-4ACh]
  CBuffExpireEvent *v44; // [esp+98h] [ebp-4A8h]
  CBuffExpireEvent *v45; // [esp+9Ch] [ebp-4A4h]
  CBuffExpireEvent *v46; // [esp+A0h] [ebp-4A0h]
  CBuffExpireLuckyStone2 *v47; // [esp+A4h] [ebp-49Ch]
  CBuffExpire *v48; // [esp+A8h] [ebp-498h]
  CBuffExpire *v49; // [esp+ACh] [ebp-494h]
  CBuffExpire *v50; // [esp+B0h] [ebp-490h]
  CBuffExpire *v51; // [esp+B4h] [ebp-48Ch]
  CBuffExpire *v52; // [esp+B8h] [ebp-488h]
  CBuffExpire *v53; // [esp+BCh] [ebp-484h]
  CBuffPrty *v54; // [esp+C0h] [ebp-480h]
  CBuffPrty *v55; // [esp+C4h] [ebp-47Ch]
  CBuffPrty *v56; // [esp+C8h] [ebp-478h]
  CBuffPrtyEx *v57; // [esp+CCh] [ebp-474h]
  CBuffPoisonCloud *v58; // [esp+D0h] [ebp-470h]
  CBuffPrtyEx *v59; // [esp+D4h] [ebp-46Ch]
  CBuffPrtyEx *v60; // [esp+D8h] [ebp-468h]
  CBuffPrtyEx *v61; // [esp+DCh] [ebp-464h]
  CBuffPrtyEx *v62; // [esp+E0h] [ebp-460h]
  CBuffPrtyEx *v63; // [esp+E4h] [ebp-45Ch]
  CBuffPrtyEx *v64; // [esp+E8h] [ebp-458h]
  CBuffPrtyEx *v65; // [esp+ECh] [ebp-454h]
  CBuffManaBurn *v66; // [esp+F0h] [ebp-450h]
  CBuffPrtyEx *v67; // [esp+F4h] [ebp-44Ch]
  CBuffPrtyEx *v68; // [esp+F8h] [ebp-448h]
  CBuffSilenceShot *v69; // [esp+FCh] [ebp-444h]
  CBuffPrtyEx *v70; // [esp+100h] [ebp-440h]
  CBuffPrtyEx *v71; // [esp+104h] [ebp-43Ch]
  CBuffPrtyEx *v72; // [esp+108h] [ebp-438h]
  CBuffPrtyEx *v73; // [esp+10Ch] [ebp-434h]
  CBuffPrtyEx *v74; // [esp+110h] [ebp-430h]
  CBuffPrtyEx *v75; // [esp+114h] [ebp-42Ch]
  CBuffPrtyEx *v76; // [esp+118h] [ebp-428h]
  CBuffPrtyEx *v77; // [esp+11Ch] [ebp-424h]
  CBuffPrtyEx *v78; // [esp+120h] [ebp-420h]
  CBuffPrtyEx *v79; // [esp+124h] [ebp-41Ch]
  CBuffBerserk *v80; // [esp+128h] [ebp-418h]
  CBuffFlagHP *v81; // [esp+12Ch] [ebp-414h]
  CBuffFlagPrty *v82; // [esp+130h] [ebp-410h]
  CBuffFlagPrty *v83; // [esp+134h] [ebp-40Ch]
  CBuffFlagPrty *v84; // [esp+138h] [ebp-408h]
  CBuffFlagPrty *v85; // [esp+13Ch] [ebp-404h]
  CBuffFlagPrty *v86; // [esp+140h] [ebp-400h]
  CBuffSpiritDmg *v87; // [esp+144h] [ebp-3FCh]
  CBuffPrty *v88; // [esp+148h] [ebp-3F8h]
  CBuffInchantWeapon *v89; // [esp+14Ch] [ebp-3F4h]
  CBuffSuffering *v90; // [esp+150h] [ebp-3F0h]
  CBuffCTPrtyPtEx *v91; // [esp+154h] [ebp-3ECh]
  CBuffPrtyEx *v92; // [esp+158h] [ebp-3E8h]
  CBuffCTPrtyPtEx *v93; // [esp+15Ch] [ebp-3E4h]
  CBuffCTPrtyPtEx *v94; // [esp+160h] [ebp-3E0h]
  CBuffCTPrtyPtEx *v95; // [esp+164h] [ebp-3DCh]
  CBuffCTPrtyPtEx *v96; // [esp+168h] [ebp-3D8h]
  CBuffCTHealing *v97; // [esp+16Ch] [ebp-3D4h]
  CBuffCTDefensePer *v98; // [esp+170h] [ebp-3D0h]
  CBuffPrty *v99; // [esp+174h] [ebp-3CCh]
  CBuffSleep *v100; // [esp+178h] [ebp-3C8h]
  CBuffPrty *v101; // [esp+17Ch] [ebp-3C4h]
  CBuffPrty *v102; // [esp+180h] [ebp-3C0h]
  CBuffPrty *v103; // [esp+184h] [ebp-3BCh]
  CBuffPrty *v104; // [esp+188h] [ebp-3B8h]
  CBuffPrty *v105; // [esp+18Ch] [ebp-3B4h]
  CBuffPrty *v106; // [esp+190h] [ebp-3B0h]
  CBuffMP *v107; // [esp+194h] [ebp-3ACh]
  CBuffHP *v108; // [esp+198h] [ebp-3A8h]
  CBuffPrty *v109; // [esp+19Ch] [ebp-3A4h]
  CBuffPrty *v110; // [esp+1A0h] [ebp-3A0h]
  CBuffPrty *v111; // [esp+1A4h] [ebp-39Ch]
  CBuffMoveSpeed *v112; // [esp+1A8h] [ebp-398h]
  CBuffMoveSpeed *v113; // [esp+1ACh] [ebp-394h]
  CBuffPrty *v114; // [esp+1B0h] [ebp-390h]
  CBuffPrty *v115; // [esp+1B4h] [ebp-38Ch]
  CBuffMoveStop *v116; // [esp+1B8h] [ebp-388h]
  CBuffStun *v117; // [esp+1BCh] [ebp-384h]
  CBuffPrty *v118; // [esp+1C0h] [ebp-380h]
  CBuffMoveSpeed *v119; // [esp+1C4h] [ebp-37Ch]
  CBuffRevivalSequela *v120; // [esp+1C8h] [ebp-378h]
  CBuffFatalChance *v121; // [esp+1CCh] [ebp-374h]
  CBuffMeditation *v122; // [esp+1D0h] [ebp-370h]
  CBuffStone *v123; // [esp+1D4h] [ebp-36Ch]
  CBuffMoveSpeed *v124; // [esp+1D8h] [ebp-368h]
  CBuffPrtyEx *v125; // [esp+1E0h] [ebp-360h]
  CBuffPrtyEx *v126; // [esp+1E4h] [ebp-35Ch]
  CBuffMixDamage *v127; // [esp+1E8h] [ebp-358h]
  CBuffRemainEx *v128; // [esp+1ECh] [ebp-354h]
  CBuffExpireEvent *v129; // [esp+1F0h] [ebp-350h]
  CBuffExpireEvent *v130; // [esp+1F4h] [ebp-34Ch]
  CBuffExpireEvent *v131; // [esp+1F8h] [ebp-348h]
  CBuffRemainEx *v132; // [esp+1FCh] [ebp-344h]
  CBuffRemainPrty *v133; // [esp+200h] [ebp-340h]
  CBuffRemainPrty *v134; // [esp+204h] [ebp-33Ch]
  CBuffRemainPrty *v135; // [esp+208h] [ebp-338h]
  CBuffRemainPrty *v136; // [esp+20Ch] [ebp-334h]
  CBuffRemainPrty *v137; // [esp+210h] [ebp-330h]
  CBuffHydrochloricAcid *v138; // [esp+214h] [ebp-32Ch]
  CBuffRemainEx *v139; // [esp+218h] [ebp-328h]
  CBuffRemainPet *v140; // [esp+21Ch] [ebp-324h]
  CBuffRemainLuckyStone1 *v141; // [esp+220h] [ebp-320h]
  CBuffRemainDeadEx *v142; // [esp+224h] [ebp-31Ch]
  CBuffRemainDeadEx *v143; // [esp+228h] [ebp-318h]
  CBuffRemainDeadEx *v144; // [esp+22Ch] [ebp-314h]
  CBuffRemainDead *v145; // [esp+230h] [ebp-310h]
  CBuffRemainPrty *v146; // [esp+234h] [ebp-30Ch]
  CBuffRemainPrty *v147; // [esp+238h] [ebp-308h]
  CBuffRemainPrty *v148; // [esp+23Ch] [ebp-304h]
  CBuffRemainPrty *v149; // [esp+240h] [ebp-300h]
  CBuffRemainPrty *v150; // [esp+244h] [ebp-2FCh]
  CBuffRemainCount *v151; // [esp+248h] [ebp-2F8h]
  CBuffRemainCount *v152; // [esp+24Ch] [ebp-2F4h]
  CBuffRemainEx *v153; // [esp+250h] [ebp-2F0h]
  CBuffRemainEx *v154; // [esp+254h] [ebp-2ECh]
  CBuffRemainEx *v155; // [esp+258h] [ebp-2E8h]
  CBuffRemainXBlow *v156; // [esp+25Ch] [ebp-2E4h]
  CBuffRemainXBlow *v157; // [esp+260h] [ebp-2E0h]
  CBuffRemainEx *v158; // [esp+264h] [ebp-2DCh]
  CBuffRemainEx *v159; // [esp+268h] [ebp-2D8h]
  CBuffRemainEx *v160; // [esp+26Ch] [ebp-2D4h]
  CBuffRemainEx *v161; // [esp+270h] [ebp-2D0h]
  CBuffExpire *v162; // [esp+274h] [ebp-2CCh]
  CBuffExpireEvent *v163; // [esp+278h] [ebp-2C8h]
  CBuffExpireEvent *v164; // [esp+27Ch] [ebp-2C4h]
  CBuffExpireEvent *v165; // [esp+280h] [ebp-2C0h]
  CBuffExpireLuckyStone2 *v166; // [esp+284h] [ebp-2BCh]
  CBuffExpire *v167; // [esp+288h] [ebp-2B8h]
  CBuffExpire *v168; // [esp+28Ch] [ebp-2B4h]
  CBuffExpire *v169; // [esp+290h] [ebp-2B0h]
  CBuffExpire *v170; // [esp+294h] [ebp-2ACh]
  CBuffExpire *v171; // [esp+298h] [ebp-2A8h]
  CBuffExpire *v172; // [esp+29Ch] [ebp-2A4h]
  CBuffPrty *v173; // [esp+2A0h] [ebp-2A0h]
  CBuffPrty *v174; // [esp+2A4h] [ebp-29Ch]
  CBuffPrty *v175; // [esp+2A8h] [ebp-298h]
  CBuffPrtyEx *v176; // [esp+2ACh] [ebp-294h]
  CBuffPoisonCloud *v177; // [esp+2B0h] [ebp-290h]
  CBuffPrtyEx *v178; // [esp+2B4h] [ebp-28Ch]
  CBuffPrtyEx *v179; // [esp+2B8h] [ebp-288h]
  CBuffPrtyEx *v180; // [esp+2BCh] [ebp-284h]
  CBuffPrtyEx *v181; // [esp+2C0h] [ebp-280h]
  CBuffPrtyEx *v182; // [esp+2C4h] [ebp-27Ch]
  CBuffPrtyEx *v183; // [esp+2C8h] [ebp-278h]
  CBuffPrtyEx *v184; // [esp+2CCh] [ebp-274h]
  CBuffManaBurn *v185; // [esp+2D0h] [ebp-270h]
  CBuffPrtyEx *v186; // [esp+2D4h] [ebp-26Ch]
  CBuffPrtyEx *v187; // [esp+2D8h] [ebp-268h]
  CBuffSilenceShot *v188; // [esp+2DCh] [ebp-264h]
  CBuffPrtyEx *v189; // [esp+2E0h] [ebp-260h]
  CBuffPrtyEx *v190; // [esp+2E4h] [ebp-25Ch]
  CBuffPrtyEx *v191; // [esp+2E8h] [ebp-258h]
  CBuffPrtyEx *v192; // [esp+2ECh] [ebp-254h]
  CBuffPrtyEx *v193; // [esp+2F0h] [ebp-250h]
  CBuffPrtyEx *v194; // [esp+2F4h] [ebp-24Ch]
  CBuffPrtyEx *v195; // [esp+2F8h] [ebp-248h]
  CBuffPrtyEx *v196; // [esp+2FCh] [ebp-244h]
  CBuffPrtyEx *v197; // [esp+300h] [ebp-240h]
  CBuffPrtyEx *v198; // [esp+304h] [ebp-23Ch]
  CBuffBerserk *v199; // [esp+308h] [ebp-238h]
  CBuffFlagHP *v200; // [esp+30Ch] [ebp-234h]
  CBuffFlagPrty *v201; // [esp+310h] [ebp-230h]
  CBuffFlagPrty *v202; // [esp+314h] [ebp-22Ch]
  CBuffFlagPrty *v203; // [esp+318h] [ebp-228h]
  CBuffFlagPrty *v204; // [esp+31Ch] [ebp-224h]
  CBuffFlagPrty *v205; // [esp+320h] [ebp-220h]
  CBuffSpiritDmg *v206; // [esp+324h] [ebp-21Ch]
  CBuffPrty *v207; // [esp+328h] [ebp-218h]
  CBuffInchantWeapon *v208; // [esp+32Ch] [ebp-214h]
  CBuffSuffering *v209; // [esp+330h] [ebp-210h]
  CBuffCTPrtyPtEx *v210; // [esp+334h] [ebp-20Ch]
  CBuffPrtyEx *v211; // [esp+338h] [ebp-208h]
  CBuffCTPrtyPtEx *v212; // [esp+33Ch] [ebp-204h]
  CBuffCTPrtyPtEx *v213; // [esp+340h] [ebp-200h]
  CBuffCTPrtyPtEx *v214; // [esp+344h] [ebp-1FCh]
  CBuffCTPrtyPtEx *v215; // [esp+348h] [ebp-1F8h]
  CBuffCTHealing *v216; // [esp+34Ch] [ebp-1F4h]
  CMemory **nBuff_1; // [esp+350h] [ebp-1F0h]
  CBuffPrty *v218; // [esp+354h] [ebp-1ECh]
  CBuffSleep *v219; // [esp+358h] [ebp-1E8h]
  CBuffPrty *v220; // [esp+35Ch] [ebp-1E4h]
  CBuffPrty *v221; // [esp+360h] [ebp-1E0h]
  CBuffPrty *v222; // [esp+364h] [ebp-1DCh]
  CBuffPrty *v223; // [esp+368h] [ebp-1D8h]
  CBuffPrty *v224; // [esp+36Ch] [ebp-1D4h]
  CBuffPrty *v225; // [esp+370h] [ebp-1D0h]
  CBuffMP *v226; // [esp+374h] [ebp-1CCh]
  CBuffHP *v227; // [esp+378h] [ebp-1C8h]
  CBuffPrty *v228; // [esp+37Ch] [ebp-1C4h]
  CBuffPrty *v229; // [esp+380h] [ebp-1C0h]
  CBuffPrty *v230; // [esp+384h] [ebp-1BCh]
  CBuffHaste *v231; // [esp+388h] [ebp-1B8h]
  CBuffPoison *v232; // [esp+38Ch] [ebp-1B4h]
  CBuffPrty *v233; // [esp+390h] [ebp-1B0h]
  CBuffPrty *v234; // [esp+394h] [ebp-1ACh]
  CBuffMoveStop *v235; // [esp+398h] [ebp-1A8h]
  CBuffStun *v236; // [esp+39Ch] [ebp-1A4h]
  CBuffPrty *v237; // [esp+3A0h] [ebp-1A0h]
  CBuffPrty *v238; // [esp+3A4h] [ebp-19Ch]
  CBuffRevivalSequela *v239; // [esp+3A8h] [ebp-198h]
  CBuffFatalChance *v240; // [esp+3ACh] [ebp-194h]
  CBuffMeditation *v241; // [esp+3B0h] [ebp-190h]
  CBuffStone *v242; // [esp+3B4h] [ebp-18Ch]
  CBuffMoveSpeed *v243; // [esp+3B8h] [ebp-188h]
  unsigned int v244; // [esp+534h] [ebp-Ch]
  CBuffMoveSpeed *v245; // [esp+53Ch] [ebp-4h]
  unsigned int dwTime; // [esp+54Ch] [ebp+Ch]
  int nValue; // [esp+550h] [ebp+10h]
  int nValue2; // [esp+554h] [ebp+14h]
  va_list va; // [esp+558h] [ebp+18h] BYREF

  va_start(va, nBuff);
  dwTime = va_arg(va, _DWORD);
  nValue = va_arg(va, _DWORD);
  nValue2 = va_arg(va, _DWORD);
  v245 = 0;
  v244 = dwTime;
  switch ( nBuff )
  {
    case 0:
      v243 = (CBuffMoveSpeed *)operator new(0x1Cu);
      if ( v243 )
        v124 = CBuffMoveSpeed::CBuffMoveSpeed(v243, nBuff, 1000 * dwTime, nValue);
      else
        v124 = 0;
      v245 = v124;
      break;
    case 1:
      v242 = (CBuffStone *)operator new(0x1Cu);
      if ( v242 )
        v123 = CBuffStone::CBuffStone(v242, nBuff, 1000 * dwTime, nValue, nValue2);
      else
        v123 = 0;
      v245 = (CBuffMoveSpeed *)v123;
      break;
    case 2:
      v241 = (CBuffMeditation *)operator new(0x1Cu);
      if ( v241 )
        v122 = CBuffMeditation::CBuffMeditation(v241, nBuff, 1000 * dwTime, nValue);
      else
        v122 = 0;
      v245 = (CBuffMoveSpeed *)v122;
      break;
    case 3:
      v240 = (CBuffFatalChance *)operator new(0x1Cu);
      if ( v240 )
        v121 = CBuffFatalChance::CBuffFatalChance(v240, nBuff, 1000 * dwTime, nValue, nValue2);
      else
        v121 = 0;
      v245 = (CBuffMoveSpeed *)v121;
      break;
    case 4:
      v239 = (CBuffRevivalSequela *)operator new(0x18u);
      if ( v239 )
        v120 = CBuffRevivalSequela::CBuffRevivalSequela(v239, nBuff, 1000 * dwTime, nValue);
      else
        v120 = 0;
      v245 = (CBuffMoveSpeed *)v120;
      break;
    case 5:
      v238 = (CBuffPrty *)operator new(0x30u);
      if ( v238 )
      {
        CBuffPrty::CBuffPrty(v238, nBuff, 1000 * dwTime, 1, 64i64, 27, nValue, 2, nValue);
        v119 = v1;
      }
      else
      {
        v119 = 0;
      }
      v245 = v119;
      break;
    case 6:
      v237 = (CBuffPrty *)operator new(0x30u);
      if ( v237 )
        v118 = CBuffPrty::CBuffPrty(v237, nBuff, 1000 * dwTime, 1, 128i64, 28, nValue, 2, nValue);
      else
        v118 = 0;
      v245 = (CBuffMoveSpeed *)v118;
      break;
    case 7:
      v236 = (CBuffStun *)operator new(0x1Cu);
      if ( v236 )
        v117 = CBuffStun::CBuffStun(v236, nBuff, 1000 * dwTime, 0);
      else
        v117 = 0;
      v245 = (CBuffMoveSpeed *)v117;
      break;
    case 8:
      v235 = (CBuffMoveStop *)operator new(0x1Cu);
      if ( v235 )
        v116 = CBuffMoveStop::CBuffMoveStop(v235, nBuff, 1000 * dwTime, 0);
      else
        v116 = 0;
      v245 = (CBuffMoveSpeed *)v116;
      break;
    case 9:
      v234 = (CBuffPrty *)operator new(0x30u);
      if ( v234 )
        v115 = CBuffPrty::CBuffPrty(v234, nBuff, 1000 * dwTime, 2, 0x400i64, 9, nValue, 1, 0);
      else
        v115 = 0;
      v245 = (CBuffMoveSpeed *)v115;
      break;
    case 10:
      v233 = (CBuffPrty *)operator new(0x30u);
      if ( v233 )
        v114 = CBuffPrty::CBuffPrty(v233, nBuff, 1000 * dwTime, 2, 0x800i64, 11, nValue, 1, 0);
      else
        v114 = 0;
      v245 = (CBuffMoveSpeed *)v114;
      break;
    case 11:
      v232 = (CBuffPoison *)operator new(0x20u);
      if ( v232 )
      {
        CBuffPoison::CBuffPoison(v232, nBuff, 1000 * dwTime, nValue);
        v113 = v2;
      }
      else
      {
        v113 = 0;
      }
      v245 = v113;
      break;
    case 12:
      v231 = (CBuffHaste *)operator new(0x18u);
      if ( v231 )
      {
        CBuffHaste::CBuffHaste(v231, nBuff, 1000 * dwTime, nValue);
        v112 = v3;
      }
      else
      {
        v112 = 0;
      }
      v245 = v112;
      break;
    case 13:
      v230 = (CBuffPrty *)operator new(0x30u);
      if ( v230 )
        v111 = CBuffPrty::CBuffPrty(v230, nBuff, 1000 * dwTime, 2, 0x4000i64, 37, nValue, 2, 0);
      else
        v111 = 0;
      v245 = (CBuffMoveSpeed *)v111;
      break;
    case 14:
      v229 = (CBuffPrty *)operator new(0x30u);
      if ( v229 )
        v110 = CBuffPrty::CBuffPrty(v229, nBuff, 1000 * dwTime, 2, 0x8000i64, 0, 0, 0, 0);
      else
        v110 = 0;
      v245 = (CBuffMoveSpeed *)v110;
      break;
    case 15:
      v228 = (CBuffPrty *)operator new(0x30u);
      if ( v228 )
        v109 = CBuffPrty::CBuffPrty(v228, nBuff, 1000 * dwTime, 4, 0x10000i64, 0, 0, 0, 0);
      else
        v109 = 0;
      v245 = (CBuffMoveSpeed *)v109;
      break;
    case 16:
      v161 = (CBuffRemainEx *)operator new(0x20u);
      if ( v161 )
      {
        CBuffRemain::CBuffRemain(v161, nBuff, dwTime, 0, 0x80i64, 64);
        v42 = v4;
      }
      else
      {
        v42 = 0;
      }
      v245 = v42;
      break;
    case 17:
      v160 = (CBuffRemainEx *)operator new(0x20u);
      if ( v160 )
        v41 = CBuffRemain::CBuffRemain(v160, nBuff, dwTime, 0, 0x100i64, 64);
      else
        v41 = 0;
      v245 = (CBuffMoveSpeed *)v41;
      break;
    case 18:
      v227 = (CBuffHP *)operator new(0x18u);
      if ( v227 )
        v108 = CBuffHP::CBuffHP(v227, nBuff, 1000 * dwTime, nValue);
      else
        v108 = 0;
      v245 = (CBuffMoveSpeed *)v108;
      break;
    case 19:
      v226 = (CBuffMP *)operator new(0x18u);
      if ( v226 )
        v107 = CBuffMP::CBuffMP(v226, nBuff, 1000 * dwTime, nValue);
      else
        v107 = 0;
      v245 = (CBuffMoveSpeed *)v107;
      break;
    case 20:
      v225 = (CBuffPrty *)operator new(0x30u);
      if ( v225 )
        v106 = CBuffPrty::CBuffPrty(v225, nBuff, 1000 * dwTime, 4, 0x400000i64, 17, nValue, 2, 0);
      else
        v106 = 0;
      v245 = (CBuffMoveSpeed *)v106;
      break;
    case 21:
      v224 = (CBuffPrty *)operator new(0x30u);
      if ( v224 )
        v105 = CBuffPrty::CBuffPrty(v224, nBuff, 1000 * dwTime, 4, 0x800000i64, 9, nValue, 2, 0);
      else
        v105 = 0;
      v245 = (CBuffMoveSpeed *)v105;
      break;
    case 22:
      v223 = (CBuffPrty *)operator new(0x30u);
      if ( v223 )
        v104 = CBuffPrty::CBuffPrty(v223, nBuff, 1000 * dwTime, 4, 0x1000000i64, 0, 0, 0, 0);
      else
        v104 = 0;
      v245 = (CBuffMoveSpeed *)v104;
      break;
    case 23:
      v222 = (CBuffPrty *)operator new(0x30u);
      if ( v222 )
        v103 = CBuffPrty::CBuffPrty(v222, nBuff, 1000 * dwTime, 2, 0x2000000i64, 0, 0, 0, 0);
      else
        v103 = 0;
      v245 = (CBuffMoveSpeed *)v103;
      break;
    case 24:
      v221 = (CBuffPrty *)operator new(0x30u);
      if ( v221 )
        v102 = CBuffPrty::CBuffPrty(v221, nBuff, 1000 * dwTime, 2, 0x4000000i64, 0, 0, 0, 0);
      else
        v102 = 0;
      v245 = (CBuffMoveSpeed *)v102;
      break;
    case 25:
      v220 = (CBuffPrty *)operator new(0x30u);
      if ( v220 )
        v101 = CBuffPrty::CBuffPrty(v220, nBuff, 1000 * dwTime, 2, 0x8000000i64, 0, 0, 0, 0);
      else
        v101 = 0;
      v245 = (CBuffMoveSpeed *)v101;
      break;
    case 26:
      v219 = (CBuffSleep *)operator new(0x1Cu);
      if ( v219 )
        v100 = CBuffSleep::CBuffSleep(v219, nBuff, 1000 * dwTime, nValue);
      else
        v100 = 0;
      v245 = (CBuffMoveSpeed *)v100;
      break;
    case 27:
      v218 = (CBuffPrty *)operator new(0x30u);
      if ( v218 )
        v99 = CBuffPrty::CBuffPrty(v218, nBuff, 1000 * dwTime, 2, 0x20000000i64, 15, nValue, 2, nValue2);
      else
        v99 = 0;
      v245 = (CBuffMoveSpeed *)v99;
      break;
    case 28:
      nBuff_1 = operator new(0x1Cu);
      if ( nBuff_1 )
        v98 = CBuffCTDefensePer::CBuffCTDefensePer((CBuffCTDefensePer *)nBuff_1, nBuff, 1000 * dwTime, nValue, nValue2);
      else
        v98 = 0;
      v245 = (CBuffMoveSpeed *)v98;
      break;
    case 29:
      v209 = (CBuffSuffering *)operator new(0x1Cu);
      if ( v209 )
        v90 = CBuffSuffering::CBuffSuffering(v209, nBuff, 1000 * dwTime, nValue);
      else
        v90 = 0;
      v245 = (CBuffMoveSpeed *)v90;
      break;
    case 30:
      if ( !nValue )
        v244 = dwTime + time(0);
      v172 = (CBuffExpire *)operator new(0x20u);
      if ( v172 )
        v53 = CBuffExpire::CBuffExpire(v172, nBuff, v244, 0, 2i64, 32);
      else
        v53 = 0;
      v245 = (CBuffMoveSpeed *)v53;
      break;
    case 31:
      if ( !nValue )
        v244 = dwTime + time(0);
      v171 = (CBuffExpire *)operator new(0x20u);
      if ( v171 )
        v52 = CBuffExpire::CBuffExpire(v171, nBuff, v244, 0, 4i64, 32);
      else
        v52 = 0;
      v245 = (CBuffMoveSpeed *)v52;
      break;
    case 32:
      if ( !nValue )
        v244 = dwTime + time(0);
      v170 = (CBuffExpire *)operator new(0x20u);
      if ( v170 )
        v51 = CBuffExpire::CBuffExpire(v170, nBuff, v244, 0, 8i64, 32);
      else
        v51 = 0;
      v245 = (CBuffMoveSpeed *)v51;
      break;
    case 33:
      if ( !nValue )
        v244 = dwTime + time(0);
      v165 = (CBuffExpireEvent *)operator new(0x20u);
      if ( v165 )
        v46 = CBuffExpireEvent::CBuffExpireEvent(v165, nBuff, v244, 0, 16i64);
      else
        v46 = 0;
      v245 = (CBuffMoveSpeed *)v46;
      break;
    case 34:
      if ( !nValue )
        v244 = dwTime + time(0);
      v164 = (CBuffExpireEvent *)operator new(0x20u);
      if ( v164 )
        v45 = CBuffExpireEvent::CBuffExpireEvent(v164, nBuff, v244, 0, 32i64);
      else
        v45 = 0;
      v245 = (CBuffMoveSpeed *)v45;
      break;
    case 35:
      if ( !nValue )
        v244 = dwTime + time(0);
      v163 = (CBuffExpireEvent *)operator new(0x20u);
      if ( v163 )
        v44 = CBuffExpireEvent::CBuffExpireEvent(v163, nBuff, v244, 0, 64i64);
      else
        v44 = 0;
      v245 = (CBuffMoveSpeed *)v44;
      break;
    case 36:
      v208 = (CBuffInchantWeapon *)operator new(0x18u);
      if ( v208 )
        v89 = CBuffInchantWeapon::CBuffInchantWeapon(v208, nBuff, 1000 * dwTime, nValue);
      else
        v89 = 0;
      v245 = (CBuffMoveSpeed *)v89;
      break;
    case 37:
      v207 = (CBuffPrty *)operator new(0x30u);
      if ( v207 )
        v88 = CBuffPrty::CBuffPrty(v207, nBuff, 1000 * dwTime, 2, 0x200000000i64, 15, nValue, 1, nValue2);
      else
        v88 = 0;
      v245 = (CBuffMoveSpeed *)v88;
      break;
    case 38:
      v216 = (CBuffCTHealing *)operator new(0x1Cu);
      if ( v216 )
        v97 = CBuffCTHealing::CBuffCTHealing(v216, nBuff, 1000 * dwTime, nValue);
      else
        v97 = 0;
      v245 = (CBuffMoveSpeed *)v97;
      break;
    case 39:
      v206 = (CBuffSpiritDmg *)operator new(0x1Cu);
      if ( v206 )
        v87 = CBuffSpiritDmg::CBuffSpiritDmg(v206, nBuff, 1000 * dwTime, nValue);
      else
        v87 = 0;
      v245 = (CBuffMoveSpeed *)v87;
      break;
    case 40:
      v205 = (CBuffFlagPrty *)operator new(0x30u);
      if ( v205 )
        v86 = CBuffFlagPrty::CBuffFlagPrty(v205, nBuff, 1000 * dwTime, 1, 0x1000000000i64, 32, nValue, 2, 0);
      else
        v86 = 0;
      v245 = (CBuffMoveSpeed *)v86;
      break;
    case 41:
      v204 = (CBuffFlagPrty *)operator new(0x30u);
      if ( v204 )
        v85 = CBuffFlagPrty::CBuffFlagPrty(v204, nBuff, 1000 * dwTime, 1, 0x2000000000i64, 27, nValue, 2, nValue);
      else
        v85 = 0;
      v245 = (CBuffMoveSpeed *)v85;
      break;
    case 42:
      v203 = (CBuffFlagPrty *)operator new(0x30u);
      if ( v203 )
        v84 = CBuffFlagPrty::CBuffFlagPrty(v203, nBuff, 1000 * dwTime, 1, 0x4000000000i64, 28, nValue, 2, nValue);
      else
        v84 = 0;
      v245 = (CBuffMoveSpeed *)v84;
      break;
    case 43:
      v202 = (CBuffFlagPrty *)operator new(0x30u);
      if ( v202 )
        v83 = CBuffFlagPrty::CBuffFlagPrty(v202, nBuff, 1000 * dwTime, 1, 0x8000000000i64, 16, nValue, 1, 0);
      else
        v83 = 0;
      v245 = (CBuffMoveSpeed *)v83;
      break;
    case 44:
      v201 = (CBuffFlagPrty *)operator new(0x30u);
      if ( v201 )
        v82 = CBuffFlagPrty::CBuffFlagPrty(v201, nBuff, 1000 * dwTime, 1, 0x10000000000i64, 29, nValue, 1, 0);
      else
        v82 = 0;
      v245 = (CBuffMoveSpeed *)v82;
      break;
    case 45:
      v200 = (CBuffFlagHP *)operator new(0x18u);
      if ( v200 )
        v81 = CBuffFlagHP::CBuffFlagHP(v200, nBuff, 1000 * dwTime, nValue);
      else
        v81 = 0;
      v245 = (CBuffMoveSpeed *)v81;
      break;
    case 46:
      v198 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v198 )
        v79 = CBuffPrtyEx::CBuffPrtyEx(v198, nBuff, 1000 * dwTime, 2, 1i64, 0, nValue, 1, 0);
      else
        v79 = 0;
      v245 = (CBuffMoveSpeed *)v79;
      break;
    case 47:
      v197 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v197 )
        v78 = CBuffPrtyEx::CBuffPrtyEx(v197, nBuff, 1000 * dwTime, 2, 2i64, 1, nValue, 1, 0);
      else
        v78 = 0;
      v245 = (CBuffMoveSpeed *)v78;
      break;
    case 48:
      v196 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v196 )
        v77 = CBuffPrtyEx::CBuffPrtyEx(v196, nBuff, 1000 * dwTime, 2, 4i64, 4, nValue, 1, 0);
      else
        v77 = 0;
      v245 = (CBuffMoveSpeed *)v77;
      break;
    case 49:
      v195 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v195 )
        v76 = CBuffPrtyEx::CBuffPrtyEx(v195, nBuff, 1000 * dwTime, 2, 8i64, 2, nValue, 1, 0);
      else
        v76 = 0;
      v245 = (CBuffMoveSpeed *)v76;
      break;
    case 50:
      v194 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v194 )
        v75 = CBuffPrtyEx::CBuffPrtyEx(v194, nBuff, 1000 * dwTime, 2, 16i64, 31, nValue, 2, 0);
      else
        v75 = 0;
      v245 = (CBuffMoveSpeed *)v75;
      break;
    case 51:
      v159 = (CBuffRemainEx *)operator new(0x20u);
      if ( v159 )
        v40 = CBuffRemain::CBuffRemain(v159, nBuff, dwTime, 0, 512i64, 32);
      else
        v40 = 0;
      v245 = (CBuffMoveSpeed *)v40;
      break;
    case 52:
      v158 = (CBuffRemainEx *)operator new(0x20u);
      if ( v158 )
        v39 = CBuffRemain::CBuffRemain(v158, nBuff, dwTime, 0, 1024i64, 32);
      else
        v39 = 0;
      v245 = (CBuffMoveSpeed *)v39;
      break;
    case 53:
      v157 = (CBuffRemainXBlow *)operator new(0x20u);
      if ( v157 )
        v38 = CBuffRemainXBlow::CBuffRemainXBlow(v157, nBuff, dwTime, 0, 2048i64);
      else
        v38 = 0;
      v245 = (CBuffMoveSpeed *)v38;
      break;
    case 54:
      v156 = (CBuffRemainXBlow *)operator new(0x20u);
      if ( v156 )
        v37 = CBuffRemainXBlow::CBuffRemainXBlow(v156, nBuff, dwTime, 0, 4096i64);
      else
        v37 = 0;
      v245 = (CBuffMoveSpeed *)v37;
      break;
    case 55:
      v155 = (CBuffRemainEx *)operator new(0x20u);
      if ( v155 )
        v36 = CBuffRemain::CBuffRemain(v155, nBuff, dwTime, 0, 0x2000i64, 32);
      else
        v36 = 0;
      v245 = (CBuffMoveSpeed *)v36;
      break;
    case 56:
      v154 = (CBuffRemainEx *)operator new(0x20u);
      if ( v154 )
        v35 = CBuffRemain::CBuffRemain(v154, nBuff, dwTime, 0, 0x4000i64, 32);
      else
        v35 = 0;
      v245 = (CBuffMoveSpeed *)v35;
      break;
    case 57:
      v153 = (CBuffRemainEx *)operator new(0x20u);
      if ( v153 )
        v34 = CBuffRemain::CBuffRemain(v153, nBuff, dwTime, 0, 0x8000i64, 32);
      else
        v34 = 0;
      v245 = (CBuffMoveSpeed *)v34;
      break;
    case 58:
      v152 = (CBuffRemainCount *)operator new(0x20u);
      if ( v152 )
        v33 = (CBuffMoveSpeed *)CBuffRemainCount::CBuffRemainCount(v152, nBuff, dwTime, 0, 0x10000i64);
      else
        v33 = 0;
      v245 = v33;
      break;
    case 59:
      v151 = (CBuffRemainCount *)operator new(0x20u);
      if ( v151 )
        v32 = (CBuffMoveSpeed *)CBuffRemainCount::CBuffRemainCount(v151, nBuff, dwTime, 0, 0x20000i64);
      else
        v32 = 0;
      v245 = v32;
      break;
    case 60:
      v150 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v150 )
        v31 = CBuffRemainPrty::CBuffRemainPrty(v150, nBuff, dwTime, 5, 0, 0x40000i64);
      else
        v31 = 0;
      v245 = (CBuffMoveSpeed *)v31;
      break;
    case 61:
      v149 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v149 )
        v30 = CBuffRemainPrty::CBuffRemainPrty(v149, nBuff, dwTime, 10, 1, 0x80000i64);
      else
        v30 = 0;
      v245 = (CBuffMoveSpeed *)v30;
      break;
    case 62:
      v148 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v148 )
        v29 = CBuffRemainPrty::CBuffRemainPrty(v148, nBuff, dwTime, 5, 2, 0x100000i64);
      else
        v29 = 0;
      v245 = (CBuffMoveSpeed *)v29;
      break;
    case 63:
      v147 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v147 )
        v28 = CBuffRemainPrty::CBuffRemainPrty(v147, nBuff, dwTime, 10, 3, 0x200000i64);
      else
        v28 = 0;
      v245 = (CBuffMoveSpeed *)v28;
      break;
    case 64:
      v146 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v146 )
        v27 = CBuffRemainPrty::CBuffRemainPrty(v146, nBuff, dwTime, 5, 4, 0x400000i64);
      else
        v27 = 0;
      v245 = (CBuffMoveSpeed *)v27;
      break;
    case 65:
      v145 = (CBuffRemainDead *)operator new(0x20u);
      if ( v145 )
        v26 = CBuffRemainDead::CBuffRemainDead(v145, nBuff, dwTime, 0, 0, 256);
      else
        v26 = 0;
      v245 = (CBuffMoveSpeed *)v26;
      break;
    case 66:
      v144 = (CBuffRemainDeadEx *)operator new(0x20u);
      if ( v144 )
        v25 = CBuffRemainDeadEx::CBuffRemainDeadEx(v144, nBuff, dwTime, 0, 32);
      else
        v25 = 0;
      v245 = (CBuffMoveSpeed *)v25;
      break;
    case 67:
      v143 = (CBuffRemainDeadEx *)operator new(0x20u);
      if ( v143 )
        v24 = CBuffRemainDeadEx::CBuffRemainDeadEx(v143, nBuff, dwTime, 0, 64);
      else
        v24 = 0;
      v245 = (CBuffMoveSpeed *)v24;
      break;
    case 68:
      v142 = (CBuffRemainDeadEx *)operator new(0x20u);
      if ( v142 )
        v23 = CBuffRemainDeadEx::CBuffRemainDeadEx(v142, nBuff, dwTime, 0, 128);
      else
        v23 = 0;
      v245 = (CBuffMoveSpeed *)v23;
      break;
    case 69:
      v199 = (CBuffBerserk *)operator new(0x1Cu);
      if ( v199 )
        v80 = CBuffBerserk::CBuffBerserk(v199, nBuff, 1000 * dwTime, nValue, nValue2);
      else
        v80 = 0;
      v245 = (CBuffMoveSpeed *)v80;
      break;
    case 70:
      v215 = (CBuffCTPrtyPtEx *)operator new(0x24u);
      if ( v215 )
        v96 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v215, nBuff, 1000 * dwTime, nValue, 16, 20, 64, 0);
      else
        v96 = 0;
      v245 = (CBuffMoveSpeed *)v96;
      break;
    case 71:
      v214 = (CBuffCTPrtyPtEx *)operator new(0x24u);
      if ( v214 )
        v95 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v214, nBuff, 1000 * dwTime, nValue, 16, 19, 128, 0);
      else
        v95 = 0;
      v245 = (CBuffMoveSpeed *)v95;
      break;
    case 72:
      v213 = (CBuffCTPrtyPtEx *)operator new(0x24u);
      if ( v213 )
        v94 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v213, nBuff, 1000 * dwTime, nValue, 16, 18, 256, 0);
      else
        v94 = 0;
      v245 = (CBuffMoveSpeed *)v94;
      break;
    case 73:
      v212 = (CBuffCTPrtyPtEx *)operator new(0x24u);
      if ( v212 )
        v93 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v212, nBuff, 1000 * dwTime, nValue, 16, 9, 512, 0);
      else
        v93 = 0;
      v245 = (CBuffMoveSpeed *)v93;
      break;
    case 74:
      v210 = (CBuffCTPrtyPtEx *)operator new(0x24u);
      if ( v210 )
        v91 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v210, nBuff, 1000 * dwTime, nValue, 16, 12, 1024, 0);
      else
        v91 = 0;
      v245 = (CBuffMoveSpeed *)v91;
      break;
    case 75:
      v211 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v211 )
        v92 = CBuffPrtyEx::CBuffPrtyEx(v211, nBuff, 1000 * dwTime, 2, 2048i64, 15, nValue, 1, nValue2);
      else
        v92 = 0;
      v245 = (CBuffMoveSpeed *)v92;
      break;
    case 76:
      v193 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v193 )
        v74 = CBuffPrtyEx::CBuffPrtyEx(v193, nBuff, 1000 * dwTime, 2, 4096i64, 20, nValue, 1, 0);
      else
        v74 = 0;
      v245 = (CBuffMoveSpeed *)v74;
      break;
    case 77:
      v192 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v192 )
        v73 = CBuffPrtyEx::CBuffPrtyEx(v192, nBuff, 1000 * dwTime, 2, 0x2000i64, 19, nValue, 1, 0);
      else
        v73 = 0;
      v245 = (CBuffMoveSpeed *)v73;
      break;
    case 78:
      v191 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v191 )
        v72 = CBuffPrtyEx::CBuffPrtyEx(v191, nBuff, 1000 * dwTime, 2, 0x4000i64, 18, nValue, 1, 0);
      else
        v72 = 0;
      v245 = (CBuffMoveSpeed *)v72;
      break;
    case 79:
      v190 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v190 )
        v71 = CBuffPrtyEx::CBuffPrtyEx(v190, nBuff, 1000 * dwTime, 2, 0x8000i64, 21, nValue, 1, 0);
      else
        v71 = 0;
      v245 = (CBuffMoveSpeed *)v71;
      break;
    case 80:
      v189 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v189 )
        v70 = CBuffPrtyEx::CBuffPrtyEx(v189, nBuff, 1000 * dwTime, 2, 0x10000i64, 22, nValue, 1, 0);
      else
        v70 = 0;
      v245 = (CBuffMoveSpeed *)v70;
      break;
    case 81:
      v188 = (CBuffSilenceShot *)operator new(0x1Cu);
      if ( v188 )
        v69 = CBuffSilenceShot::CBuffSilenceShot(v188, nBuff, 1000 * dwTime, nValue);
      else
        v69 = 0;
      v245 = (CBuffMoveSpeed *)v69;
      break;
    case 82:
      v187 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v187 )
        v68 = CBuffPrtyEx::CBuffPrtyEx(v187, nBuff, 1000 * dwTime, 1, 0x20000i64, 32, nValue, 2, 0);
      else
        v68 = 0;
      v245 = (CBuffMoveSpeed *)v68;
      break;
    case 83:
      v186 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v186 )
        v67 = CBuffPrtyEx::CBuffPrtyEx(v186, nBuff, 1000 * dwTime, 4, 0x40000i64, 38, nValue, 3, 0);
      else
        v67 = 0;
      v245 = (CBuffMoveSpeed *)v67;
      break;
    case 84:
      v185 = (CBuffManaBurn *)operator new(0x1Cu);
      if ( v185 )
        v66 = CBuffManaBurn::CBuffManaBurn(v185, nBuff, 1000 * dwTime, nValue);
      else
        v66 = 0;
      v245 = (CBuffMoveSpeed *)v66;
      break;
    case 85:
      v184 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v184 )
        v65 = CBuffPrtyEx::CBuffPrtyEx(v184, nBuff, 1000 * dwTime, 4, 0x80000i64, 31, nValue, 2, 0);
      else
        v65 = 0;
      v245 = (CBuffMoveSpeed *)v65;
      break;
    case 86:
      v183 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v183 )
        v64 = CBuffPrtyEx::CBuffPrtyEx(v183, nBuff, 1000 * dwTime, 4, 0x100000i64, 0, nValue, 2, 0);
      else
        v64 = 0;
      v245 = (CBuffMoveSpeed *)v64;
      break;
    case 87:
      v182 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v182 )
        v63 = CBuffPrtyEx::CBuffPrtyEx(v182, nBuff, 1000 * dwTime, 4, 0x200000i64, 1, nValue, 2, 0);
      else
        v63 = 0;
      v245 = (CBuffMoveSpeed *)v63;
      break;
    case 88:
      v181 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v181 )
        v62 = CBuffPrtyEx::CBuffPrtyEx(v181, nBuff, 1000 * dwTime, 4, 0x400000i64, 4, nValue, 2, 0);
      else
        v62 = 0;
      v245 = (CBuffMoveSpeed *)v62;
      break;
    case 89:
      v180 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v180 )
        v61 = CBuffPrtyEx::CBuffPrtyEx(v180, nBuff, 1000 * dwTime, 4, 0x800000i64, 2, nValue, 2, 0);
      else
        v61 = 0;
      v245 = (CBuffMoveSpeed *)v61;
      break;
    case 90:
      v179 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v179 )
        v60 = CBuffPrtyEx::CBuffPrtyEx(v179, nBuff, 1000 * dwTime, 4, 0x1000000i64, 3, nValue, 2, 0);
      else
        v60 = 0;
      v245 = (CBuffMoveSpeed *)v60;
      break;
    case 91:
      v178 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v178 )
        v59 = CBuffPrtyEx::CBuffPrtyEx(v178, nBuff, 1000 * dwTime, 4, 0x2000000i64, 15, nValue, 2, nValue2);
      else
        v59 = 0;
      v245 = (CBuffMoveSpeed *)v59;
      break;
    case 92:
      v177 = (CBuffPoisonCloud *)operator new(0x20u);
      if ( v177 )
        v58 = CBuffPoisonCloud::CBuffPoisonCloud(v177, nBuff, 1000 * dwTime, nValue);
      else
        v58 = 0;
      v245 = (CBuffMoveSpeed *)v58;
      break;
    case 93:
      v176 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v176 )
        v57 = CBuffPrtyEx::CBuffPrtyEx(v176, nBuff, 1000 * dwTime, 4, 0x4000000i64, 9, nValue, 2, 0);
      else
        v57 = 0;
      v245 = (CBuffMoveSpeed *)v57;
      break;
    case 94:
      v175 = (CBuffPrty *)operator new(0x30u);
      if ( v175 )
        v56 = CBuffPrty::CBuffPrty(v175, nBuff, 1000 * dwTime, 4, 0x200000000000i64, 0, 0, 0, 0);
      else
        v56 = 0;
      v245 = (CBuffMoveSpeed *)v56;
      break;
    case 95:
      v174 = (CBuffPrty *)operator new(0x30u);
      if ( v174 )
        v55 = CBuffPrty::CBuffPrty(v174, nBuff, 1000 * dwTime, 2, 0x400000000000i64, 16, nValue, 1, 0);
      else
        v55 = 0;
      v245 = (CBuffMoveSpeed *)v55;
      break;
    case 96:
      v173 = (CBuffPrty *)operator new(0x30u);
      if ( v173 )
        v54 = CBuffPrty::CBuffPrty(v173, nBuff, 1000 * dwTime, 2, 0x800000000000i64, 29, nValue, 1, 0);
      else
        v54 = 0;
      v245 = (CBuffMoveSpeed *)v54;
      break;
    case 97:
      if ( !nValue )
        v244 = dwTime + time(0);
      v169 = (CBuffExpire *)operator new(0x20u);
      if ( v169 )
        v50 = CBuffExpire::CBuffExpire(v169, nBuff, v244, 0, 0x800000i64, 32);
      else
        v50 = 0;
      v245 = (CBuffMoveSpeed *)v50;
      break;
    case 98:
      if ( !nValue )
        v244 = dwTime + time(0);
      v168 = (CBuffExpire *)operator new(0x20u);
      if ( v168 )
        v49 = CBuffExpire::CBuffExpire(v168, nBuff, v244, 0, 0x1000000i64, 32);
      else
        v49 = 0;
      v245 = (CBuffMoveSpeed *)v49;
      break;
    case 99:
      if ( !nValue )
        v244 = dwTime + time(0);
      v167 = (CBuffExpire *)operator new(0x20u);
      if ( v167 )
        v48 = CBuffExpire::CBuffExpire(v167, nBuff, v244, 0, 0x2000000i64, 32);
      else
        v48 = 0;
      v245 = (CBuffMoveSpeed *)v48;
      break;
    case 100:
      v141 = (CBuffRemainLuckyStone1 *)operator new(0x20u);
      if ( v141 )
        v22 = CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(v141, nBuff, dwTime, 0, 0x4000000i64);
      else
        v22 = 0;
      v245 = (CBuffMoveSpeed *)v22;
      break;
    case 101:
      if ( !nValue )
        v244 = dwTime + time(0);
      v166 = (CBuffExpireLuckyStone2 *)operator new(0x20u);
      if ( v166 )
        v47 = CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(v166, nBuff, v244, 0, 0x8000000i64);
      else
        v47 = 0;
      v245 = (CBuffMoveSpeed *)v47;
      break;
    case 102:
      if ( !nValue )
        v244 = dwTime + time(0);
      v162 = (CBuffExpire *)operator new(0x20u);
      if ( v162 )
        v43 = CBuffExpire::CBuffExpire(v162, nBuff, v244, 0, 0x10000000i64, 128);
      else
        v43 = 0;
      v245 = (CBuffMoveSpeed *)v43;
      break;
    case 103:
      v140 = (CBuffRemainPet *)operator new(0x28u);
      if ( v140 )
        v21 = CBuffRemainPet::CBuffRemainPet(v140, nBuff, 1);
      else
        v21 = 0;
      v245 = (CBuffMoveSpeed *)v21;
      break;
    case 104:
      v139 = (CBuffRemainEx *)operator new(0x20u);
      if ( v139 )
        v20 = CBuffRemainEx::CBuffRemainEx(v139, nBuff, dwTime, 0, 256, 1);
      else
        v20 = 0;
      v245 = (CBuffMoveSpeed *)v20;
      break;
    case 105:
      v138 = (CBuffHydrochloricAcid *)operator new(0x20u);
      if ( v138 )
        v19 = CBuffHydrochloricAcid::CBuffHydrochloricAcid(v138, nBuff, 0xFA0u, 800);
      else
        v19 = 0;
      v245 = (CBuffMoveSpeed *)v19;
      break;
    case 106:
      v137 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v137 )
        v18 = CBuffRemainPrty::CBuffRemainPrty(v137, nBuff, dwTime, nValue, 0, 0x200000000i64);
      else
        v18 = 0;
      v245 = (CBuffMoveSpeed *)v18;
      break;
    case 107:
      v136 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v136 )
        v17 = CBuffRemainPrty::CBuffRemainPrty(v136, nBuff, dwTime, nValue, 1, 0x400000000i64);
      else
        v17 = 0;
      v245 = (CBuffMoveSpeed *)v17;
      break;
    case 108:
      v135 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v135 )
        v16 = CBuffRemainPrty::CBuffRemainPrty(v135, nBuff, dwTime, nValue, 2, 0x800000000i64);
      else
        v16 = 0;
      v245 = (CBuffMoveSpeed *)v16;
      break;
    case 109:
      v134 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v134 )
        v15 = CBuffRemainPrty::CBuffRemainPrty(v134, nBuff, dwTime, nValue, 3, 0x1000000000i64);
      else
        v15 = 0;
      v245 = (CBuffMoveSpeed *)v15;
      break;
    case 110:
      v133 = (CBuffRemainPrty *)operator new(0x28u);
      if ( v133 )
        v14 = CBuffRemainPrty::CBuffRemainPrty(v133, nBuff, dwTime, nValue, 4, 0x2000000000i64);
      else
        v14 = 0;
      v245 = (CBuffMoveSpeed *)v14;
      break;
    case 111:
      v132 = (CBuffRemainEx *)operator new(0x20u);
      if ( v132 )
        v13 = CBuffRemain::CBuffRemain(v132, nBuff, dwTime, 0, 0x4000000000i64, 32);
      else
        v13 = 0;
      v245 = (CBuffMoveSpeed *)v13;
      break;
    case 112:
      if ( !nValue )
        v244 = dwTime + time(0);
      v131 = (CBuffExpireEvent *)operator new(0x20u);
      if ( v131 )
        v12 = CBuffExpireEvent::CBuffExpireEvent(v131, nBuff, v244, 0, 0x8000000000i64);
      else
        v12 = 0;
      v245 = (CBuffMoveSpeed *)v12;
      break;
    case 113:
      if ( !nValue )
        v244 = dwTime + time(0);
      v130 = (CBuffExpireEvent *)operator new(0x20u);
      if ( v130 )
        v11 = CBuffExpireEvent::CBuffExpireEvent(v130, nBuff, v244, 0, 0x10000000000i64);
      else
        v11 = 0;
      v245 = (CBuffMoveSpeed *)v11;
      break;
    case 114:
      if ( !nValue )
        v244 = dwTime + time(0);
      v129 = (CBuffExpireEvent *)operator new(0x20u);
      if ( v129 )
        v10 = CBuffExpireEvent::CBuffExpireEvent(v129, nBuff, v244, 0, 0x20000000000i64);
      else
        v10 = 0;
      v245 = (CBuffMoveSpeed *)v10;
      break;
    case 115:
      v128 = (CBuffRemainEx *)operator new(0x20u);
      if ( v128 )
        v9 = CBuffRemain::CBuffRemain(v128, nBuff, dwTime, 0, 0x40000000000i64, 32);
      else
        v9 = 0;
      v245 = (CBuffMoveSpeed *)v9;
      break;
    case 116:
      v127 = (CBuffMixDamage *)operator new(0x28u);
      if ( v127 )
        v8 = CBuffMixDamage::CBuffMixDamage(v127, nBuff, 1000 * dwTime, nValue, nValue2);
      else
        v8 = 0;
      v245 = (CBuffMoveSpeed *)v8;
      break;
    case 117:
      v126 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v126 )
        v7 = CBuffPrtyEx::CBuffPrtyEx(v126, nBuff, 1000 * dwTime, 1, 0x2000000000000i64, 15, nValue, 1, nValue2);
      else
        v7 = 0;
      v245 = (CBuffMoveSpeed *)v7;
      break;
    case 118:
      v125 = (CBuffPrtyEx *)operator new(0x2Cu);
      if ( v125 )
        v6 = CBuffPrtyEx::CBuffPrtyEx(v125, nBuff, 1000 * dwTime, 1, 0x4000000000000i64, 32, nValue, 2, 0);
      else
        v6 = 0;
      v245 = (CBuffMoveSpeed *)v6;
      break;
    default:
      LOG_ERR("CBuff::CreateBuff() Invalid Buff Type.(Buff:%d)", nBuff);
      break;
  }
  return v245;
}
// 4028E5: variable 'v1' is possibly undefined
// 402B5C: variable 'v2' is possibly undefined
// 402BC4: variable 'v3' is possibly undefined
// 404CAC: variable 'v4' is possibly undefined

//----- (00405C60) --------------------------------------------------------
CBuffMoveSpeed *__thiscall CBuffMoveSpeed::CBuffMoveSpeed(CBuffMoveSpeed *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffMoveSpeed_vtbl *)off_4B467C;
  this->m_nCount = 0;
  return this;
}
// 4B467C: using guessed type int (__stdcall *off_4B467C[3])(int);

//----- (00405CA0) --------------------------------------------------------
CBuff *__thiscall CBuff::CBuff(CBuff *this, int nType, unsigned int dwTime, int nValue, int nPrty)
{
  this->__vftable = (CBuff_vtbl *)CBuff_vtbl;
  this->m_nType = nType;
  this->m_dwRelease = dwTime + GetTickCount();
  this->m_nValue = nValue;
  this->m_nPrty = nPrty;
  this->m_pNext = 0;
  return this;
}

//----- (00405CF0) --------------------------------------------------------
CBuffStone *__thiscall CBuffStone::CBuffStone(CBuffStone *this, int nType, unsigned int dwTime, int nValue, int nValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 2);
  this->__vftable = (CBuffStone_vtbl *)off_4B4698;
  this->m_nValue2 = nValue2;
  return this;
}
// 4B4698: using guessed type int (__stdcall *off_4B4698[3])(int);

//----- (00405D30) --------------------------------------------------------
CBuffMeditation *__thiscall CBuffMeditation::CBuffMeditation(CBuffMeditation *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 2); // Could be __stdcall (originally it was __stdcall, I made it __thiscall to make it look nicer) -HighGamer
  this->__vftable = (CBuffMeditation_vtbl *)off_4B46B4;
  this->m_dwTickNext = GetTickCount() + 4000;
  return this;
}
// 4B46B4: using guessed type int (__stdcall *off_4B46B4[3])(int);

//----- (00405D70) --------------------------------------------------------
CBuffFatalChance *__thiscall CBuffFatalChance::CBuffFatalChance(CBuffFatalChance *this, int nType, unsigned int dwTime, int nValue, int nValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 2);
  this->__vftable = (CBuffFatalChance_vtbl *)off_4B46D0;
  this->m_nValue2 = nValue2;
  return this;
}
// 4B46D0: using guessed type int (__stdcall *off_4B46D0[3])(int);

//----- (00405DB0) --------------------------------------------------------
CBuffRevivalSequela *__thiscall CBuffRevivalSequela::CBuffRevivalSequela(CBuffRevivalSequela *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 1);
  this->__vftable = (CBuffRevivalSequela_vtbl *)off_4B46EC;
  return this;
}
// 4B46EC: using guessed type int (__stdcall *off_4B46EC[3])(int);

//----- (00405DE0) --------------------------------------------------------
CBuffStun *__thiscall CBuffStun::CBuffStun(CBuffStun *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffStun_vtbl *)off_4B4708;
  this->m_nCount = 0;
  return this;
}
// 4B4708: using guessed type int (__stdcall *off_4B4708[3])(int);

//----- (00405E20) --------------------------------------------------------
CBuffMoveStop *__thiscall CBuffMoveStop::CBuffMoveStop(CBuffMoveStop *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffMoveStop_vtbl *)off_4B4724;
  this->m_nCount = 0;
  return this;
}
// 4B4724: using guessed type int (__stdcall *off_4B4724[3])(int);

//----- (00405E60) --------------------------------------------------------
CBuffPoison *__thiscall CBuffPoison::CBuffPoison(CBuffPoison *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffPoison_vtbl *)off_4B4740;
  this->m_nCount = 0;
  this->m_dwTickNext = GetTickCount() + 2000;
  return this;
}
// 4B4740: using guessed type int (__stdcall *off_4B4740[3])(int);

//----- (00405EB0) --------------------------------------------------------
CBuffPoisonCloud *__thiscall CBuffPoisonCloud::CBuffPoisonCloud(CBuffPoisonCloud *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffPoisonCloud_vtbl *)off_4B475C;
  this->m_nCount = 0;
  this->m_dwTickNext = GetTickCount() + 2000;
  return this;
}
// 4B475C: using guessed type int (__stdcall *off_4B475C[3])(int);

//----- (00405F00) --------------------------------------------------------
CBuffHaste *__thiscall CBuffHaste::CBuffHaste(CBuffHaste *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 2);
  this->__vftable = (CBuffHaste_vtbl *)off_4B4778;
  return this;
}
// 4B4778: using guessed type int (__stdcall *off_4B4778[3])(int);

//----- (00405F30) --------------------------------------------------------
CBuffHP *__thiscall CBuffHP::CBuffHP(CBuffHP *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 1);
  this->__vftable = (CBuffHP_vtbl *)off_4B4794;
  return this;
}
// 4B4794: using guessed type int (__stdcall *off_4B4794[3])(int);

//----- (00405F60) --------------------------------------------------------
CBuffMP *__thiscall CBuffMP::CBuffMP(CBuffMP *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 1);
  this->__vftable = (CBuffMP_vtbl *)off_4B47B0;
  return this;
}
// 4B47B0: using guessed type int (__stdcall *off_4B47B0[3])(int);

//----- (00405F90) --------------------------------------------------------
CBuffSleep *__thiscall CBuffSleep::CBuffSleep(CBuffSleep *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffSleep_vtbl *)off_4B47CC;
  this->m_nCount = 0;
  return this;
}
// 4B47CC: using guessed type int (__stdcall *off_4B47CC[3])(int);

//----- (00405FD0) --------------------------------------------------------
// call of defense
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(CBuffCTDefensePer *this, int nType, unsigned int dwTime, int nValue, int mValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 16);
  this->__vftable = (CBuffCTDefensePer_vtbl *)off_4B47E8;
  this->m_nValue2 = mValue2;
  return this;
}
// 4B47E8: using guessed type int (__stdcall *off_4B47E8[3])(int);

//----- (00406010) --------------------------------------------------------
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::Copy(CBuffCTDefensePer *this)
{
  CBuffCTDefensePer *v2; // [esp+0h] [ebp-Ch]
  CBuffCTDefensePer *v4; // [esp+8h] [ebp-4h]

  v4 = (CBuffCTDefensePer *)operator new(0x1Cu);
  if ( v4 )
    v2 = CBuffCTDefensePer::CBuffCTDefensePer(v4, this);
  else
    v2 = 0;
  return v2;
}

//----- (00406050) --------------------------------------------------------
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(CBuffCTDefensePer *this, CBuff *pBuff)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffCTDefensePer_vtbl *)off_4B47E8;
  memcpy(this, pBuff, sizeof(CBuffCTDefensePer));
  return this;
}
// 4B47E8: using guessed type int (__stdcall *off_4B47E8[3])(int);

//----- (00406090) --------------------------------------------------------
// call of recovery
CBuffCTHealing *__thiscall CBuffCTHealing::CBuffCTHealing(CBuffCTHealing *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 16);
  this->__vftable = (CBuffCTHealing_vtbl *)off_4B4804;
  this->m_dwTickNext = GetTickCount() + 3000;
  return this;
}
// 4B4804: using guessed type int (__stdcall *off_4B4804[3])(int);

//----- (004060D0) --------------------------------------------------------
CBuffCTHealing *__thiscall CBuffCTHealing::Copy(CBuffCTHealing *this)
{
  CBuffCTHealing *v2; // [esp+0h] [ebp-Ch]
  CBuffCTHealing *v4; // [esp+8h] [ebp-4h]

  v4 = (CBuffCTHealing *)operator new(0x1Cu);
  if ( v4 )
    v2 = CBuffCTHealing::CBuffCTHealing(v4, this);
  else
    v2 = 0;
  return v2;
}

//----- (00406110) --------------------------------------------------------
CBuffCTHealing *__thiscall CBuffCTHealing::CBuffCTHealing(CBuffCTHealing *this, CBuff *pBuff)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffCTHealing_vtbl *)off_4B4804;
  memcpy(this, pBuff, sizeof(CBuffCTHealing));
  return this;
}
// 4B4804: using guessed type int (__stdcall *off_4B4804[3])(int);

//----- (00406150) --------------------------------------------------------
// call of lightning defense etc...
CBuffCTPrtyPtEx *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(CBuffCTPrtyPtEx *this, int nType, unsigned int dwTime, int nValue, int nPrty, int nCharPrty, int nMStateEx, int nValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, nPrty);
  this->__vftable = (CBuffCTPrtyPtEx_vtbl *)off_4B4820;
  this->m_nCharPrty = nCharPrty;
  this->m_nMStateEx = nMStateEx;
  this->m_nValue2 = nValue2;
  return this;
}
// 4B4820: using guessed type int (__stdcall *off_4B4820[3])(int);

//----- (004061A0) --------------------------------------------------------
CBuffCTPrtyPtEx *__thiscall CBuffCTPrtyPtEx::Copy(CBuffCTPrtyPtEx *this)
{
  CBuffCTPrtyPtEx *v2; // [esp+0h] [ebp-Ch]
  CBuffCTPrtyPtEx *v4; // [esp+8h] [ebp-4h]

  v4 = (CBuffCTPrtyPtEx *)operator new(0x24u);
  if ( v4 )
    v2 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v4, this);
  else
    v2 = 0;
  return v2;
}

//----- (004061E0) --------------------------------------------------------
CBuffCTPrtyPtEx *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(CBuffCTPrtyPtEx *this, CBuff *Src)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffCTPrtyPtEx_vtbl *)off_4B4820;
  memcpy(this, Src, sizeof(CBuffCTPrtyPtEx));
  return this;
}
// 4B4820: using guessed type int (__stdcall *off_4B4820[3])(int);

//----- (00406220) --------------------------------------------------------
CBuffSuffering *__thiscall CBuffSuffering::CBuffSuffering(CBuffSuffering *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffSuffering_vtbl *)off_4B483C;
  this->m_nCount = 0;
  return this;
}
// 4B483C: using guessed type int (__stdcall *off_4B483C[3])(int);

//----- (00406260) --------------------------------------------------------
CBuffInchantWeapon *__thiscall CBuffInchantWeapon::CBuffInchantWeapon(CBuffInchantWeapon *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 2);
  this->__vftable = (CBuffInchantWeapon_vtbl *)off_4B4858;
  return this;
}
// 4B4858: using guessed type int (__stdcall *off_4B4858[3])(int);

//----- (00406290) --------------------------------------------------------
CBuffSpiritDmg *__thiscall CBuffSpiritDmg::CBuffSpiritDmg(CBuffSpiritDmg *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffSpiritDmg_vtbl *)off_4B4874;
  this->m_nCount = 0;
  return this;
}
// 4B4874: using guessed type int (__stdcall *off_4B4874[3])(int);

//----- (004062D0) --------------------------------------------------------
CBuffFlagPrty *__thiscall CBuffFlagPrty::CBuffFlagPrty(CBuffFlagPrty *this, int nType, unsigned int dwTime, int nPrty, __int64 nMState, int nCharPrty, int nValue, int nUpType, int nValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, nPrty);
  this->__vftable = (CBuffFlagPrty_vtbl *)off_4B4890;
  this->m_nUpType = nUpType;
  this->m_nCharPrty = nCharPrty;
  this->m_nMState = nMState;
  this->m_nValue2 = nValue2;
  return this;
}
// 4B4890: using guessed type int (__stdcall *off_4B4890[3])(int);

//----- (00406330) --------------------------------------------------------
CBuffFlagHP *__thiscall CBuffFlagHP::CBuffFlagHP(CBuffFlagHP *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 1);
  this->__vftable = (CBuffFlagHP_vtbl *)off_4B48AC;
  return this;
}
// 4B48AC: using guessed type int (__stdcall *off_4B48AC[3])(int);

//----- (00406360) --------------------------------------------------------
CBuffBerserk *__thiscall CBuffBerserk::CBuffBerserk(CBuffBerserk *this, int nType, unsigned int dwTime, int nValue, int mValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 2);
  this->__vftable = (CBuffBerserk_vtbl *)off_4B48C8;
  this->m_nValue2 = mValue2;
  return this;
}
// 4B48C8: using guessed type int (__stdcall *off_4B48C8[3])(int);

//----- (004063A0) --------------------------------------------------------
CBuffSilenceShot *__thiscall CBuffSilenceShot::CBuffSilenceShot(CBuffSilenceShot *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffSilenceShot_vtbl *)off_4B48E4;
  this->m_nCount = 0;
  return this;
}
// 4B48E4: using guessed type int (__stdcall *off_4B48E4[3])(int);

//----- (004063E0) --------------------------------------------------------
CBuffManaBurn *__thiscall CBuffManaBurn::CBuffManaBurn(CBuffManaBurn *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffManaBurn_vtbl *)off_4B4900;
  this->m_nCount = 0;
  return this;
}
// 4B4900: using guessed type int (__stdcall *off_4B4900[3])(int);

//----- (00406420) --------------------------------------------------------
CBuffPrty *__thiscall CBuffPrty::CBuffPrty(CBuffPrty *this, int nType, unsigned int dwTime, int nPrty, __int64 nMState, int nCharPrty, int nValue, int nUpType, int nValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, nPrty);
  this->__vftable = (CBuffPrty_vtbl *)off_4B491C;
  this->m_nCount = 0;
  this->m_nUpType = nUpType;
  this->m_nCharPrty = nCharPrty;
  this->m_nMState = nMState;
  this->m_nValue2 = nValue2;
  return this;
}
// 4B491C: using guessed type int (__stdcall *off_4B491C[3])(int);

//----- (00406490) --------------------------------------------------------
CBuffPrtyEx *__thiscall CBuffPrtyEx::CBuffPrtyEx(CBuffPrtyEx *this, int nType, unsigned int dwTime, int nPrty, __int64 nMState, int nCharPrty, int nValue, int nUpType, int nValue2)
{
  CBuff::CBuff(this, nType, dwTime, nValue, nPrty);
  this->__vftable = (CBuffPrtyEx_vtbl *)off_4B4938;
  this->m_nCount = 0;
  this->m_nUpType = nUpType;
  this->m_nCharPrty = nCharPrty;
  this->m_nMStateEx = nMState;
  this->m_nValue2 = nValue2;
  return this;
}
// 4B4938: using guessed type int (__stdcall *off_4B4938[3])(int);

//----- (004064F0) --------------------------------------------------------
CBuffExpire *__thiscall CBuffExpire::CBuffExpire(CBuffExpire *this, int nType, unsigned int dwTime, int nValue, __int64 nBState, int nPrty)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffExpire_vtbl *)off_4B4954;
  this->m_nType = nType;
  this->m_dwRelease = dwTime;
  this->m_nValue = nValue;
  this->m_nBState = nBState;
  this->m_nPrty = nPrty;
  return this;
}
// 4B4954: using guessed type int (__stdcall *off_4B4954[3])(int);

//----- (00406550) --------------------------------------------------------
CBuffExpireEvent *__thiscall CBuffExpireEvent::CBuffExpireEvent(CBuffExpireEvent *this, int nType, unsigned int dwTime, int nValue, __int64 nBState)
{
  CBuffExpire::CBuffExpire(this, nType, dwTime, nValue, nBState, 128);
  this->__vftable = (CBuffExpireEvent_vtbl *)off_4B4970;
  return this;
}
// 4B4970: using guessed type int (__stdcall *off_4B4970[3])(int);

//----- (00406590) --------------------------------------------------------
CBuffExpireLuckyStone2 *__thiscall CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(CBuffExpireLuckyStone2 *this, int nType, unsigned int dwTime, int nValue, __int64 nBState)
{
  CBuffExpire::CBuffExpire(this, nType, dwTime, nValue, nBState, 32);
  this->__vftable = (CBuffExpireLuckyStone2_vtbl *)off_4B498C;
  return this;
}
// 4B498C: using guessed type int (__stdcall *off_4B498C[3])(int);

//----- (004065D0) --------------------------------------------------------
CBuffRemain *__thiscall CBuffRemain::CBuffRemain(CBuffRemain *this, int nType, unsigned int dwTime, int nValue, __int64 nBState, int nPrty)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffRemain_vtbl *)off_4B49A8;
  this->m_nType = nType;
  this->m_dwRelease = dwTime;
  this->m_nValue = nValue;
  this->m_nBState = nBState;
  this->m_nPrty = nPrty;
  return this;
}
// 4B49A8: using guessed type int (__stdcall *off_4B49A8[3])(int);

//----- (00406630) --------------------------------------------------------
CBuffRemainEx *__thiscall CBuffRemainEx::CBuffRemainEx(CBuffRemainEx *this, int nType, unsigned int dwTime, int nValue, int nGState, int nPrty)
{
  CBuffRemain::CBuffRemain(this);
  this->__vftable = (CBuffRemainEx_vtbl *)off_4B49C4;
  this->m_nType = nType;
  this->m_dwRelease = dwTime;
  this->m_nValue = nValue;
  this->m_nEState = nGState;
  this->m_nPrty = nPrty;
  return this;
}
// 4B49C4: using guessed type int (__stdcall *off_4B49C4[3])(int);

//----- (00406680) --------------------------------------------------------
CBuffRemain *__thiscall CBuffRemain::CBuffRemain(CBuffRemain *this)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffRemain_vtbl *)off_4B49A8;
  return this;
}
// 4B49A8: using guessed type int (__stdcall *off_4B49A8[3])(int);

//----- (004066A0) --------------------------------------------------------
CBuffRemainDead *__thiscall CBuffRemainDead::CBuffRemainDead(CBuffRemainDead *this, int nType, unsigned int dwTime, int nValue, int nEState, int nPrty)
{
  CBuffRemain::CBuffRemain(this);
  this->__vftable = (CBuffRemainDead_vtbl *)off_4B49E0;
  this->m_nType = nType;
  this->m_dwRelease = dwTime;
  this->m_nValue = nValue;
  this->m_nEState = nEState;
  this->m_nPrty = nPrty;
  return this;
}
// 4B49E0: using guessed type int (__stdcall *off_4B49E0[3])(int);

//----- (004066F0) --------------------------------------------------------
CBuffRemainDeadEx *__thiscall CBuffRemainDeadEx::CBuffRemainDeadEx(CBuffRemainDeadEx *this, int nType, unsigned int dwTime, int nValue, int nEState)
{
  CBuffRemainDead::CBuffRemainDead(this, nType, dwTime, nValue, nEState, 256);
  this->__vftable = (CBuffRemainDeadEx_vtbl *)off_4B49FC;
  return this;
}
// 4B49FC: using guessed type int (__stdcall *off_4B49FC[3])(int);

//----- (00406730) --------------------------------------------------------
CBuffRemainXBlow *__thiscall CBuffRemainXBlow::CBuffRemainXBlow(CBuffRemainXBlow *this, int nType, unsigned int dwTime, int nValue, __int64 nBState)
{
  CBuffRemain::CBuffRemain(this, nType, dwTime, nValue, nBState, 32);
  this->__vftable = (CBuffRemainXBlow_vtbl *)off_4B4A18;
  return this;
}
// 4B4A18: using guessed type int (__stdcall *off_4B4A18[3])(int);

//----- (00406770) --------------------------------------------------------
CBuffRemainPrty *__thiscall CBuffRemainPrty::CBuffRemainPrty(CBuffRemainPrty *this, int nType, unsigned int dwTime, int nValue, int nCharPrty, __int64 nBState)
{
  CBuffRemain::CBuffRemain(this, nType, dwTime, nValue, nBState, 32);
  this->__vftable = (CBuffRemainPrty_vtbl *)off_4B4A34;
  this->m_nCharPrty = nCharPrty;
  return this;
}
// 4B4A34: using guessed type int (__stdcall *off_4B4A34[3])(int);

//----- (004067B0) --------------------------------------------------------
_DWORD *__thiscall CBuffRemainCount::CBuffRemainCount(CBuffRemainCount *this, int nType, unsigned int dwTime, int nValue, __int64 nBState)
{
  CBuffRemain::CBuffRemain(this, nType, dwTime, nValue, nBState, 32);
  this->__vftable = (CBuffRemainCount_vtbl *)off_4B4A50;
  return &this->__vftable;
}
// 4B4A50: using guessed type int (__stdcall *off_4B4A50[3])(int);

//----- (004067F0) --------------------------------------------------------
CBuffRemainLuckyStone1 *__thiscall CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(CBuffRemainLuckyStone1 *this, int nType, unsigned int dwTime, int nValue, __int64 nBState)
{
  CBuffRemain::CBuffRemain(this, nType, dwTime, nValue, nBState, 1);
  this->__vftable = (CBuffRemainLuckyStone1_vtbl *)off_4B4A6C;
  return this;
}
// 4B4A6C: using guessed type int (__stdcall *off_4B4A6C[3])(int);

//----- (00406830) --------------------------------------------------------
CBuffRemainPet *__thiscall CBuffRemainPet::CBuffRemainPet(CBuffRemainPet *this, int nType, int nPrty)
{
  CBuffRemain::CBuffRemain(this);
  this->__vftable = (CBuffRemainPet_vtbl *)off_4B4A88;
  this->m_nType = nType;
  this->m_nPrty = nPrty;
  this->m_dwRelease = 7200;
  this->m_nValue = 0;
  this->m_nPetType = 0;
  return this;
}
// 4B4A88: using guessed type int (__stdcall *off_4B4A88[3])(int);

//----- (00406890) --------------------------------------------------------
int __stdcall sub_406890(int a1)
{
  return 1;
}

//----- (004068B0) --------------------------------------------------------
CBuffHydrochloricAcid *__thiscall CBuffHydrochloricAcid::CBuffHydrochloricAcid(CBuffHydrochloricAcid *this, int nType, unsigned int dwTime, int nValue)
{
  CBuff::CBuff(this, nType, dwTime, nValue, 4);
  this->__vftable = (CBuffHydrochloricAcid_vtbl *)off_4B4AA4;
  this->m_nCount = 0;
  this->m_dwNext = 0;
  return this;
}
// 4B4AA4: using guessed type int (__stdcall *off_4B4AA4[3])(int);

//----- (00406900) --------------------------------------------------------
CBuffMixDamage *__thiscall CBuffMixDamage::CBuffMixDamage(CBuffMixDamage *this, int nType, unsigned int dwTime, int nCount, int nValue)
{
  CBuff::Copy(this);
  this->__vftable = (CBuffMixDamage_vtbl *)off_4B4AC0;
  this->m_nType = nType;
  this->m_dwRelease = dwTime + GetTickCount();
  this->m_nValue = nValue;
  this->m_nCount = nCount;
  this->m_dwTerm = dwTime;
  this->m_nPrty = 1;
  this->m_pNext = 0;
  return this;
}
// 4B4AC0: using guessed type int (__stdcall *off_4B4AC0[3])(int);

//----- (00406970) --------------------------------------------------------
int __stdcall sub_406970(int a1, int a2)
{
  return 1;
}

//----- (00406990) --------------------------------------------------------
BOOL __thiscall CBuff::IsExpired(CBuff *this, CChar *pChar)
{
  return (int)(this->m_dwRelease - GetTickCount()) <= 0;
}

//----- (004069C0) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::ApplyBuff(CBuffMoveSpeed *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 2, 0);
  pChar->UpdatePrtyPer(pChar, 32, 1, this->m_nValue);
  return 1;
}

//----- (00406A00) --------------------------------------------------------
void __thiscall CBuffMoveSpeed::FreeBuff(CBuffMoveSpeed *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 32, 0, this->m_nValue);
  this->m_nValue = 0;
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 2, 0);
}

//----- (00406A40) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::UpdateBuff(CBuffMoveSpeed *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 2i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 2, 0);
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  pChar->m_prtyPer.nMSpeed -= this->m_nValue;
  this->m_nValue = pBuff->m_nValue;
  pChar->UpdatePrtyPer(pChar, 32, 1, this->m_nValue);
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00406BA0) --------------------------------------------------------
__int64 __thiscall CChar::IsMState(CChar *this, __int64 nMState)
{
  return nMState & this->m_nMState;
}

//----- (00406BD0) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::IsExpired(CBuffMoveSpeed *this, CChar *pChar)
{
  if ( !CChar::IsMState(pChar, 2i64) )
    return 0;
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00406C20) --------------------------------------------------------
int __thiscall CBuffStone::ApplyBuff(CBuffStone *this, CChar *pChar)
{
  pChar->UpdatePrtyPt(pChar, 16, 1, this->m_nValue);
  pChar->UpdatePrtyPt(pChar, 15, 1, this->m_nValue2, this->m_nValue2);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 4, 0);
  return 1;
}

//----- (00406C80) --------------------------------------------------------
void __thiscall CBuffStone::FreeBuff(CBuffStone *this, CChar *pChar)
{
  pChar->UpdatePrtyPt(pChar, 16, 0, this->m_nValue);
  pChar->UpdatePrtyPt(pChar, 15, 0, this->m_nValue2, this->m_nValue2);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 4, 0);
}

//----- (00406CE0) --------------------------------------------------------
int __stdcall CBuffMeditation::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 8, 0);
  return 1;
}

//----- (00406D10) --------------------------------------------------------
void __stdcall CBuffMeditation::FreeBuff(CChar *this)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))this->SubMState)(this, 8, 0);
}

//----- (00406D30) --------------------------------------------------------
BOOL __thiscall CBuffMeditation::IsExpired(CBuffMeditation *this, CChar *pChar)
{
  int v2; // esi
  int v4; // [esp+4h] [ebp-10h]
  int v6; // [esp+Ch] [ebp-8h]
  unsigned int v7; // [esp+10h] [ebp-4h]

  v7 = GetTickCount();
  if ( v7 >= this->m_dwTickNext )
  {
    if ( CChar::IsNormal(pChar) && pChar->m_nCurMP < CChar::GetMaxMP((CPlayer *)pChar) )
    {
      v2 = this->m_nValue * CChar::GetWis(pChar) / 15;
      v6 = Random(0, this->m_nValue + 1) + v2;
      if ( v6 >= 5 * this->m_nValue + 5 )
        v4 = 5 * this->m_nValue + 5;
      else
        v4 = v6;
      pChar->UpdateProperty(pChar, 8, 1, v4);
    }
    this->m_dwTickNext = v7 + 4000;
  }
  return CBuff::IsExpired(this, pChar);
}

//----- (00406E10) --------------------------------------------------------
int __cdecl Random(int nMin, int nMax)
{
  int result; // eax

  if ( nMin >= nMax )
    result = nMin;
  else
    result = nMin + _Random() % (unsigned int)(nMax - nMin + 1);
  return result;
}

//----- (00406E40) --------------------------------------------------------
int __thiscall CBuffFatalChance::ApplyBuff(CBuffFatalChance *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 31, 1, this->m_nValue);
  pChar->UpdatePrtyPt(pChar, 9, 1, this->m_nValue2);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 16, 0);
  return 1;
}

//----- (00406EA0) --------------------------------------------------------
void __thiscall CBuffFatalChance::FreeBuff(CBuffFatalChance *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 31, 0, this->m_nValue);
  pChar->UpdatePrtyPt(pChar, 9, 0, this->m_nValue2);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 16, 0);
}

//----- (00406EF0) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::ApplyBuff(CBuffRevivalSequela *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 27, 1, this->m_nValue, this->m_nValue);
  pChar->UpdatePrtyPer(pChar, 28, 1, this->m_nValue, this->m_nValue);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 32, 0);
  return 1;
}

//----- (00406F60) --------------------------------------------------------
void __thiscall CBuffRevivalSequela::FreeBuff(CBuffRevivalSequela *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 27, 0, this->m_nValue, this->m_nValue);
  pChar->UpdatePrtyPer(pChar, 28, 0, this->m_nValue, this->m_nValue);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 32, 0);
}

//----- (00406FC0) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::UpdateBuff(CBuffRevivalSequela *this, CBuff *pBuff, CChar *pChar)
{
  this->m_dwRelease = pBuff->m_dwRelease;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00407010) --------------------------------------------------------
int __thiscall CBuffStun::ApplyBuff(CBuffStun *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 256, 0);
  if ( pChar->IsMonster(pChar) )                // CMonster *pMonster  (as argument CChar *pChar) //required too -HighGamer
  {
    pChar[1].m_nId = this->m_dwRelease;
    ((void (__thiscall *)(CChar *, unsigned int, int))pChar->__vftable[1].SendPacket)(pChar, this->m_dwRelease, 1);
  }
  return 1;
}

//----- (00407080) --------------------------------------------------------
void __stdcall CBuffStun::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 256, 0);
}

//----- (004070A0) --------------------------------------------------------
int __thiscall CBuffStun::UpdateBuff(CBuffStun *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+2Ch] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 256i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 256, 0);
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pChar->IsMonster(pChar) )
  {
    pChar[1].m_nId = this->m_dwRelease;
    ((void (__thiscall *)(CChar *, unsigned int, int))pChar->__vftable[1].SendPacket)(pChar, this->m_dwRelease, 1);
  }
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00407200) --------------------------------------------------------
int __thiscall CBuffStun::IsExpired(CBuffStun *this, CChar *pChar)
{
  if ( !CChar::IsMState(pChar, 0x100i64) )
    return 0;
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00407260) --------------------------------------------------------
int __thiscall CBuffMoveStop::ApplyBuff(CBuffMoveStop *this, CChar *pChar)
{
  if ( pChar->IsMonster(pChar) )
    ((void (__thiscall *)(CChar *, unsigned int, int))pChar->__vftable[1].SendPacket)(pChar, this->m_dwRelease, 1);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 512, 0);
  return 1;
}

//----- (004072B0) --------------------------------------------------------
void __thiscall CBuffMoveStop::FreeBuff(CBuffMoveStop *this, CChar *pChar)
{
  DWORD dwTick; // [esp-8h] [ebp-Ch]

  if ( ((int (__thiscall *)(CChar *, CBuffMoveStop *))pChar->IsMonster)(pChar, this) )
  {
    dwTick = GetTickCount();
    ((void (__thiscall *)(CChar *, DWORD, int))pChar->__vftable[1].SendPacket)(pChar, dwTick, 1);
  }
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 512, 0);
}

//----- (00407300) --------------------------------------------------------
int __thiscall CBuffMoveStop::UpdateBuff(CBuffMoveStop *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 512i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 512, 0);
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pChar->IsMonster(pChar) )
    ((void (__thiscall *)(CChar *, unsigned int, int))pChar->__vftable[1].SendPacket)(pChar, this->m_dwRelease, 1);
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00407440) --------------------------------------------------------
int __thiscall CBuffMoveStop::IsExpired(CBuffMoveStop *this, CChar *pChar)
{
  if ( !CChar::IsMState(pChar, 512i64) )
    return 0;
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (004074A0) --------------------------------------------------------
int __stdcall CBuffPoison::ApplyBuff(CChar *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))this->AddMState)(this, 0x1000, 0);
  return 1;
}

//----- (004074D0) --------------------------------------------------------
void __stdcall CBuffPoison::FreeBuff(CChar *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))this->SubMState)(this, 0x1000, 0);
}

//----- (004074F0) --------------------------------------------------------
int __thiscall CBuffPoison::UpdateBuff(CBuffPoison *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 4096i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 4096, 0);
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00407620) --------------------------------------------------------
int __thiscall CBuffPoison::IsExpired(CBuffPoison *this, CChar *pChar)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-24h]
  int v5; // [esp+0h] [ebp-18h]
  unsigned int dwTick; // [esp+14h] [ebp-4h]

  if ( !CChar::IsMState(pChar, 4096i64) )
    return 0;
  dwTick = GetTickCount();
  if ( dwTick >= this->m_dwTickNext )
  {
    if ( pChar->m_nCurHP > 1 )
    {
      if ( pChar->m_nCurHP <= this->m_nValue )
        v5 = pChar->m_nCurHP - 1;
      else
        v5 = this->m_nValue;
      pChar->UpdateProperty(pChar, 7, 0, v5);
      if ( pChar->IsPlayer(pChar) )
      {
        v4 = CBase::Id(pChar);
        v3 = CBase::Id(pChar);
        CPlayer::Write((CPlayer *)pChar, S2C_SKILLADDVALUE, "bbddww", 3, 13, v3, v4, v5, 0);
      }
      else if ( pChar->IsMonster(pChar) )
      {
        *(_DWORD *)pChar[1].m_szName = GetTickCount() + 20000;
      }
    }
    this->m_dwTickNext = dwTick + 2000;
  }
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00407780) --------------------------------------------------------
int __stdcall CBuffPoisonCloud::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 0x1000);
  return 1;
}

//----- (004077B0) --------------------------------------------------------
void __stdcall CBuffPoisonCloud::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 0x1000);
}

//----- (004077D0) --------------------------------------------------------
int __thiscall CBuffPoisonCloud::UpdateBuff(CBuffPoisonCloud *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 0x100000000000i64) )
    ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 4096);
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00407900) --------------------------------------------------------
int __thiscall CBuffPoisonCloud::IsExpired(CBuffPoisonCloud *this, CChar *pChar)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-24h]
  int v5; // [esp+0h] [ebp-18h]
  unsigned int dwTick; // [esp+14h] [ebp-4h]

  if ( !CChar::IsMState(pChar, 0x100000000000i64) )
    return 0;
  dwTick = GetTickCount();
  if ( dwTick >= this->m_dwTickNext )
  {
    if ( pChar->m_nCurHP > 1 )
    {
      if ( pChar->m_nCurHP <= this->m_nValue )
        v5 = pChar->m_nCurHP - 1;
      else
        v5 = this->m_nValue;
      pChar->UpdateProperty(pChar, 7, 0, v5);
      if ( pChar->IsPlayer(pChar) )
      {
        v4 = CBase::Id(pChar);
        v3 = CBase::Id(pChar);
        CPlayer::Write((int)pChar, 10, "bbddww", 12, 42, v3, v4, v5, 0);
      }
      else if ( pChar->IsMonster(pChar) )
      {
        *(_DWORD *)pChar[1].m_szName = GetTickCount() + 20000;
      }
    }
    this->m_dwTickNext = dwTick + 1000;
  }
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00407A40) --------------------------------------------------------
int __thiscall CBuffHaste::ApplyBuff(CBuffHaste *this, CChar *pChar)
{
  if ( CPlayer::IsWearBuffStandard(pChar) )
    return 0;
  if ( CChar::IsMState(pChar, 1i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 1, 0);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 0x2000, 0);
  pChar->UpdatePrtyPer(pChar, 32, 1, this->m_nValue);
  return 1;
}

//----- (00407AC0) --------------------------------------------------------
void __thiscall CBuffHaste::FreeBuff(CBuffHaste *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 0x2000, 0);
  pChar->UpdatePrtyPer(pChar, 32, 0, this->m_nValue);
}

//----- (00407B00) --------------------------------------------------------
int __stdcall CBuffHP::ApplyBuff(CChar *pChar)
{
  if ( CChar::IsMState(pChar, 1i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 1, 0);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 0x100000, 0);
  CPlayer::Rest(pChar, 1);
  return 1;
}

//----- (00407B60) --------------------------------------------------------
void __stdcall CBuffHP::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 0x100000, 0);
}

//----- (00407B80) --------------------------------------------------------
int __stdcall CBuffMP::ApplyBuff(CChar *pChar)
{
  if ( CChar::IsMState(pChar, 1i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 1, 0);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 0x200000, 0);
  CPlayer::Rest(pChar, 1);
  return 1;
}

//----- (00407BE0) --------------------------------------------------------
void __stdcall CBuffMP::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 0x200000, 0);
}

//----- (00407C00) --------------------------------------------------------
BOOL __thiscall CBuffMP::IsExpired(CBuffMP *this, CChar *pChar)
{
  pChar->UpdateProperty(pChar, 8, 1, this->m_nValue);
  return CBuff::IsExpired(this, pChar);
}

//----- (00407C40) --------------------------------------------------------
int __thiscall CBuffSleep::ApplyBuff(CBuffSleep *this, CChar *pChar)
{
  if ( pChar->IsMonster(pChar) )
    ((void (__thiscall *)(CChar *, unsigned int, int))pChar->__vftable[1].SendPacket)(pChar, this->m_dwRelease, 1);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 0x10000000, 0);
  return 1;
}

//----- (00407C90) --------------------------------------------------------
int __thiscall CBuffSleep::FreeBuff(CBuffSleep *this, CChar *pChar)
{
  DWORD dwTick; // [esp-8h] [ebp-Ch]

  if ( ((int (__thiscall *)(CChar *, CBuffSleep *))pChar->IsMonster)(pChar, this) )
  {
    dwTick = GetTickCount();
    ((void (__thiscall *)(CChar *, DWORD, int))pChar->__vftable[1].SendPacket)(pChar, dwTick, 1);
  }
  return ((int (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 0x10000000, 0);
}

//----- (00407CE0) --------------------------------------------------------
int __thiscall CBuffSleep::UpdateBuff(CBuffSleep *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 0x10000000i64) )
    ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 0x10000000, 0);
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pChar->IsMonster(pChar) )
    ((void (__thiscall *)(CChar *, unsigned int, int))pChar->__vftable[1].SendPacket)(pChar, this->m_dwRelease, 1);
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00407E20) --------------------------------------------------------
int __thiscall CBuffSleep::IsExpired(CBuffSleep *this, CChar *pChar)
{
  if ( !CChar::IsMState(pChar, 0x10000000i64) )
    return 0;
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00407E80) --------------------------------------------------------
int __thiscall CBuffCTDefensePer::ApplyBuff(CBuffCTDefensePer *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 15, 1, this->m_nValue, this->m_nValue2);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->AddMState)(pChar, 0x40000000, 0);
  return 1;
}

//----- (00407ED0) --------------------------------------------------------
void __thiscall CBuffCTDefensePer::FreeBuff(CBuffCTDefensePer *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 15, 0, this->m_nValue, this->m_nValue2);
  ((void (__thiscall *)(CChar *, int, _DWORD))pChar->SubMState)(pChar, 0x40000000, 0);
}

//----- (00407F10) --------------------------------------------------------
int __stdcall CBuffCTHealing::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 4);
  return 1;
}

//----- (00407F40) --------------------------------------------------------
void __stdcall CBuffCTHealing::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 4);
}

//----- (00407F60) --------------------------------------------------------
int __thiscall CBuffCTHealing::IsExpired(CBuffCTHealing *this, CChar *pChar)
{
  int v2; // eax
  unsigned int dwTick; // [esp+4h] [ebp-4h]

  dwTick = GetTickCount();
  if ( dwTick >= this->m_dwTickNext )
  {
    if ( CChar::IsNormal(pChar) && pChar->m_nCurHP < CChar::GetMaxHP((CPlayer *)pChar) )
    {
      v2 = Random(0, 6);
      pChar->UpdateProperty(pChar, 7, 1, this->m_nValue + v2);
    }
    this->m_dwTickNext = dwTick + 3000;
  }
  return 0;
}

//----- (00407FE0) --------------------------------------------------------
int __thiscall CBuffCTPrtyPtEx::ApplyBuff(CBuffCTPrtyPtEx *this, CChar *pChar)
{
  pChar->UpdatePrtyPt(pChar, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
  pChar->AddMStateEx(pChar, this->m_nMStateEx);
  return 1;
}

//----- (00408030) --------------------------------------------------------
void __thiscall CBuffCTPrtyPtEx::FreeBuff(CBuffCTPrtyPtEx *this, CChar *pChar)
{
  pChar->UpdatePrtyPt(pChar, this->m_nCharPrty, 0, this->m_nValue, this->m_nValue2);
  pChar->SubMStateEx(pChar, this->m_nMStateEx);
}

//----- (00408080) --------------------------------------------------------
int __stdcall CBuffSuffering::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, unsigned int, _DWORD))pChar->AddMState)(pChar, 0x80000000, 0);
  return 1;
}

//----- (004080B0) --------------------------------------------------------
int __stdcall CBuffSuffering::FreeBuff(CChar *pChar)
{
  return ((int (__thiscall *)(CChar *, unsigned int, _DWORD))pChar->SubMState)(pChar, 0x80000000, 0);
}

//----- (004080D0) --------------------------------------------------------
int __thiscall CBuffSuffering::UpdateBuff(CBuffSuffering *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 0x80000000i64) )
    ((void (__thiscall *)(CChar *, unsigned int, _DWORD))pChar->AddMState)(pChar, 0x80000000, 0);
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00408200) --------------------------------------------------------
int __thiscall CBuffSuffering::IsExpired(CBuffSuffering *this, CChar *pChar)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-20h]
  int v5; // [esp+0h] [ebp-14h]

  if ( !CChar::IsMState(pChar, 0x80000000i64) )
    return 0;
  if ( pChar->m_nCurHP > 1 )
  {
    if ( pChar->m_nCurHP <= this->m_nValue )
      v5 = pChar->m_nCurHP - 1;
    else
      v5 = this->m_nValue;
    pChar->UpdateProperty(pChar, 7, 0, v5);
    if ( pChar->IsPlayer(pChar) )
    {
      v4 = CBase::Id(pChar);
      v3 = CBase::Id(pChar);
      CPlayer::Write((int)pChar, 10, "bbddww", 5, 13, v3, v4, v5, 0);
    }
    else if ( pChar->IsMonster(pChar) )
    {
      *(_DWORD *)pChar[1].m_szName = GetTickCount() + 20000;
    }
  }
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00408310) --------------------------------------------------------
int __thiscall CBuffInchantWeapon::ApplyBuff(CBuffInchantWeapon *this, CChar *pChar)
{
  pChar->UpdatePrtyPt(pChar, 27, 1, this->m_nValue, this->m_nValue);
  pChar->UpdatePrtyPt(pChar, 28, 1, this->m_nValue, this->m_nValue);
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 1);
  return 1;
}

//----- (00408380) --------------------------------------------------------
int __thiscall CBuffInchantWeapon::FreeBuff(CBuffInchantWeapon *this, CChar *pChar)
{
  pChar->UpdatePrtyPt(pChar, 27, 0, this->m_nValue, this->m_nValue);
  pChar->UpdatePrtyPt(pChar, 28, 0, this->m_nValue, this->m_nValue);
  return ((int (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 1);
}

//----- (004083E0) --------------------------------------------------------
int __stdcall CBuffSpiritDmg::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 8);
  return 1;
}

//----- (00408410) --------------------------------------------------------
void __stdcall CBuffSpiritDmg::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 8);
}

//----- (00408430) --------------------------------------------------------
int __thiscall CBuffSpiritDmg::UpdateBuff(CBuffSpiritDmg *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 0x800000000i64) )
    ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 8);
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00408550) --------------------------------------------------------
int __thiscall CBuffSpiritDmg::IsExpired(CBuffSpiritDmg *this, CChar *pChar)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-20h]
  int v5; // [esp+0h] [ebp-14h]

  if ( !CChar::IsMState(pChar, 0x800000000i64) )
    return 0;
  if ( pChar->m_nCurHP > 1 )
  {
    if ( pChar->m_nCurHP <= this->m_nValue )
      v5 = pChar->m_nCurHP - 1;
    else
      v5 = this->m_nValue;
    pChar->UpdateProperty(pChar, 7, 0, v5);
    if ( pChar->IsPlayer(pChar) )
    {
      v4 = CBase::Id(pChar);
      v3 = CBase::Id(pChar);
      CPlayer::Write((int)pChar, 10, "bbddww", 6, 13, v3, v4, v5, 0);
    }
    else if ( pChar->IsMonster(pChar) )
    {
      *(_DWORD *)pChar[1].m_szName = GetTickCount() + 20000;
    }
  }
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00408660) --------------------------------------------------------
int __thiscall CBuffFlagPrty::ApplyBuff(CBuffFlagPrty *this, CChar *a2)
{
  ((void (__thiscall *)(CChar *, _DWORD, _DWORD))a2->AddMState)(a2, this->m_nMState, HIDWORD(this->m_nMState));
  if ( this->m_nUpType )
  {
    switch ( this->m_nUpType )
    {
      case 1:
        a2->UpdatePrtyPt(a2, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
      case 2:
        a2->UpdatePrtyPer(a2, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
      case 3:
        a2->UpdateProperty(a2, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
    }
  }
  return 1;
}

//----- (00408730) --------------------------------------------------------
_DWORD *__thiscall CBuffFlagPrty::FreeBuff(CBuffFlagPrty *this, CChar *pChar)
{
  _DWORD *result; // eax

  ((void (__thiscall *)(CChar *, _DWORD, _DWORD))pChar->SubMState)(pChar, this->m_nMState, HIDWORD(this->m_nMState));
  result = &this->__vftable;
  if ( this->m_nUpType )
  {
    if ( this->m_nUpType == 1 )
    {
      result = (_DWORD *)((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdatePrtyPt)(
                           pChar,
                           this->m_nCharPrty,
                           0,
                           this->m_nValue,
                           this->m_nValue2);
    }
    else if ( this->m_nUpType == 2 )
    {
      result = (_DWORD *)((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdatePrtyPer)(
                           pChar,
                           this->m_nCharPrty,
                           0,
                           this->m_nValue,
                           this->m_nValue2);
    }
    else
    {
      result = &this->__vftable;
      if ( this->m_nUpType == 3 )
        result = (_DWORD *)((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdateProperty)(
                             pChar,
                             this->m_nCharPrty,
                             0,
                             this->m_nValue,
                             this->m_nValue2);
    }
  }
  return result;
}

//----- (00408800) --------------------------------------------------------
int __stdcall CBuffFlagHP::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 0x200);
  return 1;
}

//----- (00408830) --------------------------------------------------------
void __stdcall CBuffFlagHP::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 0x200);
}

//----- (00408850) --------------------------------------------------------
int __thiscall CBuffFlagHP::UpdateBuff(CBuffFlagHP *this, CBuff *pBuff, CChar *pChar)
{
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (004088B0) --------------------------------------------------------
BOOL __thiscall CBuffHP::IsExpired(CBuffHP *this, CChar *pChar)
{
  pChar->UpdateProperty(pChar, 7, 1, this->m_nValue);
  return CBuff::IsExpired(this, pChar);
}

//----- (004088F0) --------------------------------------------------------
int __thiscall CBuffBerserk::ApplyBuff(CBuffBerserk *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 27, 1, this->m_nValue, this->m_nValue);
  pChar->UpdatePrtyPer(pChar, 15, 1, this->m_nValue2, this->m_nValue2);
  pChar->AddMStateEx(pChar, 32);
  return 1;
}

//----- (00408960) --------------------------------------------------------
int __thiscall CBuffBerserk::FreeBuff(CBuffBerserk *this, CChar *pChar)
{
  pChar->UpdatePrtyPer(pChar, 27, 0, this->m_nValue, this->m_nValue);
  pChar->UpdatePrtyPer(pChar, 15, 0, this->m_nValue2, this->m_nValue2);
  return ((int (__thiscall *)(CChar *, int))pChar->SubMStateEx)(pChar, 32);
}

//----- (004089C0) --------------------------------------------------------
int __stdcall CBuffSilenceShot::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 0x400);
  return 1;
}

//----- (004089F0) --------------------------------------------------------
void __stdcall CBuffSilenceShot::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 0x400);
}

//----- (00408A10) --------------------------------------------------------
int __thiscall CBuffSilenceShot::UpdateBuff(CBuffSilenceShot *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 0x40000000000i64) )
    ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 0x400);
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 100;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00408B40) --------------------------------------------------------
int __thiscall CBuffSilenceShot::IsExpired(CBuffSilenceShot *this, CChar *pChar)
{
  if ( !CChar::IsMState(pChar, 0x40000000000i64) )
    return 0;
  pChar->UpdateProperty(pChar, 8, 0, this->m_nValue);
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00408BB0) --------------------------------------------------------
int __stdcall CBuffManaBurn::ApplyBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 0x800);
  return 1;
}

//----- (00408BE0) --------------------------------------------------------
void __stdcall CBuffManaBurn::FreeBuff(CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, int))pChar->SubMState)(pChar, 0, 0x800);
}

//----- (00408C00) --------------------------------------------------------
int __thiscall CBuffManaBurn::UpdateBuff(CBuffManaBurn *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, 0x80000000000i64) )
    ((void (__thiscall *)(CChar *, _DWORD, int))pChar->AddMState)(pChar, 0, 0x800);
  this->m_nValue = pBuff->m_nValue;
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 100;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00408D30) --------------------------------------------------------
int __thiscall CBuffManaBurn::IsExpired(CBuffManaBurn *this, CChar *pChar)
{
  if ( !CChar::IsMState(pChar, 0x80000000000i64) )
    return 0;
  pChar->UpdateProperty(pChar, 8, 0, this->m_nValue);
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00408DA0) --------------------------------------------------------
int __thiscall CBuffPrty::ApplyBuff(CBuffPrty *this, CChar *a2)
{
  ((void (__thiscall *)(CChar *, _DWORD, _DWORD))a2->AddMState)(a2, this->m_nMState, HIDWORD(this->m_nMState));
  if ( this->m_nUpType )
  {
    switch ( this->m_nUpType )
    {
      case 1:
        a2->UpdatePrtyPt(a2, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
      case 2:
        a2->UpdatePrtyPer(a2, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
      case 3:
        a2->UpdateProperty(a2, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
    }
  }
  return 1;
}

//----- (00408E70) --------------------------------------------------------
int __thiscall CBuffPrty::FreeBuff(int this, _QWORD *a2)
{
  int result; // eax
  __int64 v3; // [esp+0h] [ebp-Ch]

  v3 = CChar::IsMState(a2, *(_QWORD *)(this + 40));
  result = HIDWORD(v3) | v3;
  if ( v3 )
  {
    (*(void (__thiscall **)(_QWORD *, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(
      a2,
      *(_DWORD *)(this + 40),
      *(_DWORD *)(this + 44));
    result = this;
    if ( *(_DWORD *)(this + 28) )
    {
      if ( *(_DWORD *)(this + 28) == 1 )
      {
        result = (*(int (__cdecl **)(_QWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                   a2,
                   *(_DWORD *)(this + 36),
                   0,
                   *(_DWORD *)(this + 12),
                   *(_DWORD *)(this + 32));
      }
      else if ( *(_DWORD *)(this + 28) == 2 )
      {
        result = (*(int (__cdecl **)(_QWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                   a2,
                   *(_DWORD *)(this + 36),
                   0,
                   *(_DWORD *)(this + 12),
                   *(_DWORD *)(this + 32));
      }
      else
      {
        result = this;
        if ( *(_DWORD *)(this + 28) == 3 )
          result = (*(int (__cdecl **)(_QWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                     a2,
                     *(_DWORD *)(this + 36),
                     0,
                     *(_DWORD *)(this + 12),
                     *(_DWORD *)(this + 32));
      }
    }
  }
  return result;
}

//----- (00408F60) --------------------------------------------------------
int __thiscall CBuffPrty::UpdateBuff(CBuffPrty *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+28h] [ebp-4h]

  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::UpdateBuff(pBuff, pChar);
  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMState(pChar, this->m_nMState) )
  {
    this->m_nValue = pBuff->m_nValue;
    this->m_nValue2 = pBuff[1].m_dwRelease;
    this->ApplyBuff(this, pChar);
  }
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (004090C0) --------------------------------------------------------
int __thiscall CBuff::IsPrty(CBuff *this, int nPrty)
{
  return nPrty & this->m_nPrty;
}

//----- (004090E0) --------------------------------------------------------
BOOL __thiscall CBuffPrty::IsExpired(CBuffPrty *this, CChar *pChar)
{
  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::IsExpired(this, pChar);
  if ( !CChar::IsMState(pChar, this->m_nMState) )
    return 0;
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (00409160) --------------------------------------------------------
int __thiscall CBuffPrtyEx::ApplyBuff(CBuffPrty *this, CChar *pChar)
{
  pChar->AddMStateEx(pChar, this->m_nMState);
  if ( this->m_nUpType )
  {
    switch ( this->m_nUpType )
    {
      case 1:
        pChar->UpdatePrtyPt(pChar, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
      case 2:
        pChar->UpdatePrtyPer(pChar, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
      case 3:
        pChar->UpdateProperty(pChar, this->m_nCharPrty, 1, this->m_nValue, this->m_nValue2);
        break;
    }
  }
  return 1;
}

//----- (00409230) --------------------------------------------------------
int __thiscall CBuffPrtyEx::FreeBuff(CBuffPrty *this, CChar *pChar)
{
  int result; // eax

  result = CChar::IsMStateEx(pChar, this->m_nMState);
  if ( result )
  {
    pChar->SubMStateEx(pChar, this->m_nMState);
    result = (int)this;
    if ( this->m_nUpType )
    {
      if ( this->m_nUpType == 1 )
      {
        result = ((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdatePrtyPt)(
                   pChar,
                   this->m_nCharPrty,
                   0,
                   this->m_nValue,
                   this->m_nValue2);
      }
      else if ( this->m_nUpType == 2 )
      {
        result = ((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdatePrtyPer)(
                   pChar,
                   this->m_nCharPrty,
                   0,
                   this->m_nValue,
                   this->m_nValue2);
      }
      else
      {
        result = (int)this;
        if ( this->m_nUpType == 3 )
          result = ((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdateProperty)(
                     pChar,
                     this->m_nCharPrty,
                     0,
                     this->m_nValue,
                     this->m_nValue2);
      }
    }
  }
  return result;
}

//----- (00409310) --------------------------------------------------------
int __thiscall CChar::IsMStateEx(CChar *this, int nMStateEx)
{
  return nMStateEx & this->m_nMStateEx;
}

//----- (00409330) --------------------------------------------------------
int __thiscall CBuffPrtyEx::UpdateBuff(CBuffPrtyEx *this, CBuff *pBuff, CChar *pChar)
{
  DWORD dwTick; // [esp+20h] [ebp-4h]

  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::UpdateBuff(pBuff, pChar);
  dwTick = GetTickCount();
  if ( this->m_nCount < 5 )
  {
    ++this->m_nCount;
  }
  else
  {
    if ( this->m_dwRelease + 600000 > dwTick )
    {
      if ( pBuff )
        CBuff::`scalar deleting destructor'(pBuff, 1);
      return 0;
    }
    this->m_nCount = 0;
  }
  if ( !CChar::IsMStateEx(pChar, this->m_nMStateEx) )
  {
    this->m_nValue = pBuff->m_nValue;
    this->m_nValue2 = pBuff[1].m_dwRelease;
    this->ApplyBuff(this, pChar);
  }
  this->m_dwRelease = pBuff->m_dwRelease;
  this->m_dwRelease -= dword_4D8CE4[this->m_nCount] * (this->m_dwRelease - dwTick) / 0x64;
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 1;
}

//----- (00409480) --------------------------------------------------------
BOOL __thiscall CBuffPrtyEx::IsExpired(CBuffPrtyEx *this, CChar *pChar)
{
  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::IsExpired(this, pChar);
  if ( !CChar::IsMStateEx(pChar, this->m_nMStateEx) )
    return 0;
  if ( CBuff::IsExpired(this, pChar) )
    this->FreeBuff(this, pChar);
  return 0;
}

//----- (004094F0) --------------------------------------------------------
int __thiscall CBuffExpire::SetBuff(CBuffExpire *this, CChar *pChar)
{
  int result; // eax
  time_t v3; // eax

  if ( time(0) <= this->m_dwRelease )
  {
    v3 = time(0);
    ((void (__thiscall *)(CChar *, _DWORD, _DWORD, unsigned int))pChar->AddBState)(
      pChar,
      this->m_nBState,
      HIDWORD(this->m_nBState),
      this->m_dwRelease - v3);
    result = 1;
  }
  else
  {
    CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 1);
    result = 0;
  }
  return result;
}

//----- (00409570) --------------------------------------------------------
int __thiscall CBuffExpire::ApplyBuff(CBuffExpire *this, CChar *pChar)
{
  unsigned int v3; // [esp-4h] [ebp-8h]

  v3 = this->m_dwRelease - time(0);
  ((void (__thiscall *)(CChar *, _DWORD, _DWORD, unsigned int))pChar->AddBState)(
    pChar,
    this->m_nBState,
    HIDWORD(this->m_nBState),
    v3);
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 0);
  return 1;
}

//----- (004095E0) --------------------------------------------------------
BOOL __thiscall CBuffExpire::IsExpired(CBuffExpire *this, CChar *pChar)
{
  return this->m_dwRelease < time(0);
}

//----- (00409610) --------------------------------------------------------
int __thiscall CBuffExpireEvent::ApplyBuff(CBuffExpireEvent *this, CChar *pChar)
{
  unsigned int v3; // [esp-4h] [ebp-8h]

  v3 = this->m_dwRelease - time(0);
  ((void (__thiscall *)(CChar *, _DWORD, _DWORD, unsigned int))pChar->AddBState)(
    pChar,
    this->m_nBState,
    HIDWORD(this->m_nBState),
    v3);
  pChar->UpdatePrtyPer(pChar, 27, 1, 10, 10);
  pChar->UpdatePrtyPer(pChar, 28, 1, 10, 10);
  return 1;
}

//----- (00409680) --------------------------------------------------------
int __thiscall CBuffExpireEvent::FreeBuff(CBuffExpireEvent *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, _DWORD))pChar->SubBState)(pChar, this->m_nBState, HIDWORD(this->m_nBState));
  pChar->UpdatePrtyPer(pChar, 27, 0, 10, 10);
  return ((int (__cdecl *)(CChar *, int, _DWORD, int, int))pChar->UpdatePrtyPer)(pChar, 28, 0, 10, 10);
}

//----- (004096E0) --------------------------------------------------------
int __thiscall CBuffExpireLuckyStone2::ApplyBuff(CBuffExpireLuckyStone2 *this, CChar *pChar)
{
  int result; // eax

  if ( CChar::IsBState(pChar, 0x4000000i64) )
    result = 0;
  else
    result = CBuffExpire::ApplyBuff(this, pChar);
  return result;
}

//----- (00409720) --------------------------------------------------------
__int64 __thiscall CChar::IsBState(CChar *this, __int64 nBState)
{
  return nBState & this->m_nBState;
}

//----- (00409750) --------------------------------------------------------
int __thiscall CBuffRemain::SetBuff(CBuffRemain *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD, unsigned int))pChar->AddBState)(
    pChar,
    this->m_nEState,
    HIDWORD(this->m_nBState),
    this->m_dwRelease);
  return 1;
}

//----- (00409780) --------------------------------------------------------
int __thiscall CBuffRemain::ApplyBuff(CBuffRemain *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, int, _DWORD, unsigned int))pChar->AddBState)(
    pChar,
    this->m_nEState,
    HIDWORD(this->m_nBState),
    this->m_dwRelease);
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 0);
  return 1;
}

//----- (004097E0) --------------------------------------------------------
void __thiscall CBuffExpire::FreeBuff(CBuffExpire *this, CChar *pChar)
{
  ((void (__thiscall *)(CChar *, _DWORD, _DWORD))pChar->SubBState)(pChar, this->m_nBState, HIDWORD(this->m_nBState));
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 1);
}

//----- (00409830) --------------------------------------------------------
int __thiscall CBuffRemain::IsExpired(CBuffRemain *this, CChar *pChar)
{
  if ( !--this->m_dwRelease )
    return 1;
  if ( !(this->m_dwRelease % 60) )
    CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 2);
  return 0;
}

//----- (004098A0) --------------------------------------------------------
void __thiscall CBuffRemain::SaveRemain(CBuffRemain *this, CChar *pChar)
{
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 2);
}

//----- (004098E0) --------------------------------------------------------
int __thiscall CBuffRemainEx::SetBuff(CBuffRemainEx *this, CChar *pChar)
{
  CChar::AddGState(pChar, this->m_nEState);
  return 1;
}

//----- (00409910) --------------------------------------------------------
LONG __thiscall CChar::AddGState(CChar *this, int nGState)
{
  return InterlockedExchange(&this->m_nGState, nGState | this->m_nGState);
}

//----- (00409940) --------------------------------------------------------
int __thiscall CBuffRemainEx::ApplyBuff(CBuffRemainEx *this, CChar *pChar)
{
  pChar->AddGState(pChar, this->m_nEState);
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 0);
  return 1;
}

//----- (00409990) --------------------------------------------------------
void __thiscall CBuffRemainEx::FreeBuff(CBuffRemainEx *this, CChar *pChar)
{
  pChar->SubGState(pChar, this->m_nEState);
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 1);
}

//----- (004099E0) --------------------------------------------------------
int __thiscall CBuffRemainDead::SetBuff(CBuffRemainDead *this, CChar *pChar)
{
  CChar::AddGState(pChar, 2);
  pChar[3].m_prtyPt.nMinAttack = 1000 * this->m_dwRelease + GetTickCount();
  pChar[3].m_prtyPt.nMaxAttack = 1000 * this->m_dwRelease + GetTickCount();
  return 1;
}

//----- (00409A40) --------------------------------------------------------
int __thiscall CBuffRemainDead::ApplyBuff(CBuffRemainDead *this, CChar *pChar)
{
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 0);
  return 1;
}

//----- (00409A80) --------------------------------------------------------
void __thiscall CBuffRemainDead::FreeBuff(CBuffRemainDead *this, CChar *pChar)
{
  CDBSocket::Write(25, "dbdb", pChar[1].m_nGeneralRef, this->m_nType, this->m_dwRelease, 1);
}

//----- (00409AC0) --------------------------------------------------------
int __thiscall CBuffRemainDeadEx::SetBuff(CBuffRemainDeadEx *this, CChar *pChar)
{
  CPlayer::AddEState((CPlayer *)pChar, this->m_nEState);
  return 1;
}

//----- (00409AF0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::AddEState(CPlayer *this, int dwEState)
{
  _DWORD *result; // eax

  result = &this->__vftable;
  this->m_dwEState |= dwEState;
  return result;
}

//----- (00409B20) --------------------------------------------------------
int __thiscall CBuffRemainXBlow::ApplyBuff(CBuffRemainXBlow *this, CChar *pChar, CPlayer *pPlayer)
{
  int result; // eax

  if ( CChar::IsBState(pChar, 0x1000i64) && this->m_nType == 53
    || CChar::IsBState(pChar, 0x800i64) && this->m_nType == 54 )
  {
    result = 0;
  }
  else
  {
    result = CBuffRemain::ApplyBuff(this, pChar);
  }
  return result;
}

//----- (00409BA0) --------------------------------------------------------
int __thiscall CBuffRemainPrty::SetBuff(CBuffRemainPrty *this, CChar *pChar)
{
  if ( !CBuffRemain::SetBuff(this, pChar) )
    return 0;
  pChar->UpdatePrtyPt(pChar, this->m_nCharPrty, 1, this->m_nValue);
  return 1;
}

//----- (00409BF0) --------------------------------------------------------
int __thiscall CBuffRemainPrty::ApplyBuff(CBuffRemainPrty *this, CChar *pChar)
{
  if ( !CBuffRemain::ApplyBuff(this, pChar) )
    return 0;
  pChar->UpdatePrtyPt(pChar, this->m_nCharPrty, 1, this->m_nValue);
  return 1;
}

//----- (00409C40) --------------------------------------------------------
int __thiscall CBuffRemainPrty::FreeBuff(CBuffRemainPrty *this, CChar *pChar)
{
  CBuffExpire::FreeBuff((CBuffExpire *)this, pChar);
  return ((int (__cdecl *)(CChar *, int, _DWORD, int))pChar->UpdatePrtyPt)(pChar, this->m_nCharPrty, 0, this->m_nValue);
}

//----- (00409C80) --------------------------------------------------------
int __thiscall CBuffRemainCount::UpdateBuff(CBuffRemainCount *this, CBuff *pBuff, CChar *pChar)
{
  if ( this == pBuff )
  {
    if ( !--this->m_dwRelease )
    {
      this->FreeBuff(this, pChar);
      return 0;
    }
    goto LABEL_11;
  }
  if ( pBuff->m_dwRelease + this->m_dwRelease <= 0x2710 )
  {
    this->m_dwRelease += pBuff->m_dwRelease;
    if ( pBuff )
      CBuff::`scalar deleting destructor'(pBuff, 1);
LABEL_11:
    CPlayer::Write((int)pChar, 68, "bId", 74, this->m_nEState, HIDWORD(this->m_nBState), this->m_dwRelease);
    this->SaveRemain(this, pChar);
    return 1;
  }
  if ( pBuff )
    CBuff::`scalar deleting destructor'(pBuff, 1);
  return 0;
}

//----- (00409D80) --------------------------------------------------------
int __thiscall CBuffRemainLuckyStone1::ApplyBuff(CBuffRemainLuckyStone1 *this, CChar *pChar)
{
  int result; // eax

  if ( CChar::IsBState(pChar, 0x8000000i64) )
    result = 0;
  else
    result = CBuffRemain::ApplyBuff(this, pChar);
  return result;
}

//----- (00409DC0) --------------------------------------------------------
int __thiscall CBuffRemainPet::ApplyBuff(CBuffRemainPet *this, CChar *pChar)
{
  int v3; // [esp+0h] [ebp-Ch]
  int i; // [esp+8h] [ebp-4h]

  for ( i = 0; i <= 4; ++i )
    pChar->UpdatePrtyPt(pChar, i, 1, 5);
  this->m_nPetType = Random(0, 2);
  v3 = this->m_nPetType;
  if ( v3 )
  {
    if ( v3 == 1 )
    {
      pChar->AddGState(pChar, 0x80000);
    }
    else if ( v3 == 2 )
    {
      pChar->AddGState(pChar, 0x100000);
    }
  }
  else
  {
    pChar->AddGState(pChar, 0x40000);
  }
  CPlayer::Write((int)pChar, 47, "bb", 0, this->m_nPetType);
  return 1;
}

//----- (00409E90) --------------------------------------------------------
void __thiscall CBuffRemainPet::FreeBuff(CBuffRemainPet *this, CChar *pChar)
{
  int v2; // [esp+4h] [ebp-Ch]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i <= 4; ++i )
    pChar->UpdatePrtyPt(pChar, i, 0, 5);
  v2 = this->m_nPetType;
  switch ( v2 )
  {
    case 0:
      pChar->SubGState(pChar, 0x40000);
      goto LABEL_9;
    case 1:
LABEL_9:
      pChar->SubGState(pChar, 0x80000);
      goto LABEL_10;
    case 2:
LABEL_10:
      pChar->SubGState(pChar, 0x100000);
      break;
  }
  switch ( this->m_nValue )
  {
    case 1:
      pChar->UpdatePrtyPer(pChar, 5, 0, 25);
      pChar->SubMStateEx(pChar, 0x8000000);
      break;
    case 2:
      pChar->UpdatePrtyPer(pChar, 6, 0, 25);
      pChar->SubMStateEx(pChar, 0x10000000);
      break;
    case 3:
      pChar->UpdatePrtyPer(pChar, 27, 0, 25, 25);
      pChar->UpdatePrtyPer(pChar, 28, 0, 25, 25);
      pChar->SubMStateEx(pChar, 0x20000000);
      break;
    case 4:
      pChar->UpdatePrtyPer(pChar, 15, 0, 25, 25);
      pChar->SubMStateEx(pChar, 0x40000000);
      break;
    default:
      break;
  }
  this->m_nValue = 0;
  CPlayer::Write((CPlayer *)pChar, S2C_PET, "bb", 1, this->m_nPetType);
}

//----- (0040A040) --------------------------------------------------------
int __thiscall CBuffRemainPet::IsExpired(CBuffRemainPet *this, CChar *pChar)
{
  int v3; // [esp-8h] [ebp-14h]
  int v4; // [esp-8h] [ebp-14h]
  int v5; // [esp-8h] [ebp-14h]
  int v6; // [esp-8h] [ebp-14h]

  if ( !--this->m_dwRelease )
    return 1;
  if ( this->m_nValue )
  {
    if ( this->m_dwRelease % 900 < 300 )
    {
      switch ( this->m_nValue )
      {
        case 1:
          pChar->UpdatePrtyPer(pChar, 5, 0, 25);
          pChar->SubMStateEx(pChar, 0x8000000);
          break;
        case 2:
          pChar->UpdatePrtyPer(pChar, 6, 0, 25);
          pChar->SubMStateEx(pChar, 0x10000000);
          break;
        case 3:
          pChar->UpdatePrtyPer(pChar, 27, 0, 25, 25);
          pChar->UpdatePrtyPer(pChar, 28, 0, 25, 25);
          pChar->SubMStateEx(pChar, 0x20000000);
          break;
        case 4:
          pChar->UpdatePrtyPer(pChar, 15, 0, 25, 25);
          pChar->SubMStateEx(pChar, 0x40000000);
          break;
        default:
          break;
      }
      this->m_nValue = 0;
    }
  }
  else if ( this->m_dwRelease % 900 > 300 )
  {
    this->m_nValue = Random(1, 4);
    switch ( this->m_nValue )
    {
      case 1:
        pChar->UpdatePrtyPer(pChar, 5, 1, 25);
        pChar->AddMStateEx(pChar, 0x8000000);
        v3 = CBase::Id(pChar);
        CChar::WriteInSight(pChar, 73, "db", v3, 24);
        break;
      case 2:
        pChar->UpdatePrtyPer(pChar, 6, 1, 25);
        pChar->AddMStateEx(pChar, 0x10000000);
        v4 = CBase::Id(pChar);
        CChar::WriteInSight(pChar, 73, "db", v4, 25);
        break;
      case 3:
        pChar->UpdatePrtyPer(pChar, 27, 1, 25, 25);
        pChar->UpdatePrtyPer(pChar, 28, 1, 25, 25);
        pChar->AddMStateEx(pChar, 0x20000000);
        v5 = CBase::Id(pChar);
        CChar::WriteInSight(pChar, 73, "db", v5, 26);
        break;
      case 4:
        pChar->UpdatePrtyPer(pChar, 15, 1, 25, 25);
        pChar->AddMStateEx(pChar, 0x40000000);
        v6 = CBase::Id(pChar);
        CChar::WriteInSight(pChar, 73, "db", v6, 27);
        break;
      default:
        return 0;
    }
  }
  return 0;
}

//----- (0040A330) --------------------------------------------------------
int __thiscall CBuffHydrochloricAcid::ApplyBuff(CBuffHydrochloricAcid *this, CChar *pChar)
{
  pChar->AddMStateEx(pChar, 0x80000000);
  this->m_dwRelease = GetTickCount() + 20000;
  return 1;
}

//----- (0040A370) --------------------------------------------------------
void __stdcall CBuffHydrochloricAcid::FreeBuff(CChar *pChar)
{
  pChar->SubMStateEx(pChar, 0x80000000);
}

//----- (0040A390) --------------------------------------------------------
int __thiscall CBuffHydrochloricAcid::IsExpired(CBuffHydrochloricAcid *this, CChar *pChar)
{
  int v3; // [esp+0h] [ebp-10h]
  unsigned int dwTick; // [esp+Ch] [ebp-4h]

  dwTick = GetTickCount();
  if ( pChar->m_nCurHP > 1 && this->m_dwNext < dwTick )
  {
    if ( pChar->m_nCurHP <= this->m_nValue )
      v3 = pChar->m_nCurHP - 1;
    else
      v3 = this->m_nValue;
    pChar->UpdateProperty(pChar, 7, 0, v3);
    if ( pChar->IsPlayer(pChar) )
    {
      CPlayer::Write((int)pChar, 69, "bw", 7, pChar->m_nCurHP);
      CPlayer::UpdatePartyMember((CPlayer *)pChar, 7);
    }
    ++this->m_nCount;
    this->m_dwNext = dwTick + 2500;
  }
  if ( !CBuff::IsExpired(this, pChar) && this->m_nCount <= 10 )
    return 0;
  this->FreeBuff(this, pChar);
  return 1;
}

//----- (0040A4A0) --------------------------------------------------------
int __thiscall CBuffMixDamage::ApplyBuff(CBuffMixDamage *this, CChar *pChar)
{
  this->m_dwNext = this->m_dwTerm + GetTickCount();
  this->m_dwRelease = GetTickCount() + this->m_nCount * this->m_dwTerm + 1000;
  return 1;
}

//----- (0040A4F0) --------------------------------------------------------
int __thiscall CBuffMixDamage::IsExpired(CBuffMixDamage *this, CChar *pChar)
{
  int v3; // [esp+0h] [ebp-10h]
  DWORD dwTick; // [esp+Ch] [ebp-4h]

  dwTick = GetTickCount();
  if ( pChar->m_nCurHP > 1 && this->m_dwNext < dwTick )
  {
    if ( pChar->m_nCurHP <= this->m_nValue )
      v3 = pChar->m_nCurHP - 1;
    else
      v3 = this->m_nValue;
    pChar->UpdateProperty(pChar, 7, 0, v3);
    if ( pChar->IsPlayer(pChar) )
    {
      CPlayer::Write((int)pChar, 69, "bw", 7, pChar->m_nCurHP);
      CPlayer::UpdatePartyMember((CPlayer *)pChar, 7);
    }
    else if ( pChar->IsMonster(pChar) )
    {
      *(_DWORD *)pChar[1].m_szName = GetTickCount() + 20000;
    }
    --this->m_nCount;
    this->m_dwNext = this->m_dwTerm + dwTick;
  }
  if ( !CBuff::IsExpired(this, pChar) && this->m_nCount >= 1 )
    return 0;
  this->FreeBuff(this, pChar);
  return 1;
}

//----- (0040A620) --------------------------------------------------------
CCalendar *__thiscall CCalendar::CCalendar(CCalendar *this)
{
  CIOObject::CIOObject(this);
  this->__vftable = (CCalendar_vtbl *)&off_4B4AF8;
  return this;
}
// 4B4AF8: using guessed type int (__stdcall *off_4B4AF8)(int);

//----- (0040A640) --------------------------------------------------------
void *__thiscall CCalendar::`scalar deleting destructor'(void *this, char a2)
{
  CCalendar::~CCalendar((CCalendar *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040A670) --------------------------------------------------------
void __thiscall CCalendar::~CCalendar(CCalendar *this)
{
  this->__vftable = (CCalendar_vtbl *)&off_4B4AF8;
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);
// 4B4AF8: using guessed type int (__stdcall *off_4B4AF8)(int);

//----- (0040A690) --------------------------------------------------------
void __cdecl CCalendar::Start()
{
  time_t v0; // [esp+0h] [ebp-8h] BYREF
  struct tm *v1; // [esp+4h] [ebp-4h]

  v0 = time(0);
  v1 = localtime(&v0);
  dword_4DA77C = v1->tm_year + 1900;
  dword_4DA780 = v1->tm_mon + 1;
  dword_4DA784 = v1->tm_mday;
  dword_4DA788 = v1->tm_hour;
  dword_4DA78C = v1->tm_min;
  dword_4DA790 = v1->tm_sec;
  dword_4DA794 = GetTickCount();
  CIOObject::AddTimer(&unk_4DA798, 0x3E8u, 0);
}
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;
// 4DA784: using guessed type int dword_4DA784;
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;
// 4DA790: using guessed type int dword_4DA790;
// 4DA794: using guessed type int dword_4DA794;

//----- (0040A730) --------------------------------------------------------
unsigned __int16 __cdecl CCalendar::GetTime()
{
  return dword_4DA78C + ((_WORD)dword_4DA788 << 8);
}
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;

//----- (0040A750) --------------------------------------------------------
void __thiscall CCalendar::OnTimer(CCalendar *this)
{
  CCalendar::ElapseTime(this);
}

//----- (0040A770) --------------------------------------------------------
void __thiscall CCalendar::ElapseTime(CCalendar *this)
{
  int nMax; // [esp+0h] [ebp-10h]
  DWORD dwTick; // [esp+Ch] [ebp-4h]

  if ( !dword_4DA778 )
  {
    dwTick = GetTickCount();
    while ( dwTick >= dword_4DA794 )
    {
      dword_4DA794 += 1000;
      ++dword_4DA790;
      if ( ((dword_4E1174[0] & 2) == 0 || (*(_WORD *)dword_4E1174 & 0x2000) != 0) && !(dword_4DA790 % 30) )
        CServer::SendAlive();
      CGuild::SecondProcess();
      if ( dword_4DA790 >= 60 )
      {
        dword_4DA790 = 0;
        ++dword_4DA78C;
        CGuild::MinuteProcess(dwTick);
        CPlayer::ScanONPKPlayer();
        if ( (dword_4E1174[0] & 2) != 0 && (dword_4E1178 & 0x40) != 0 && !(dword_4DA78C % 10) )
          CPlayer::EventBuff(0);
        if ( dword_4DA78C >= 60 )
        {
          dword_4DA78C = 0;
          ++dword_4DA788;
          CPlayer::LogPlayerStatistic();
          if ( (dword_4E1174[0] & 2) == 0
            && (dword_4E1178 & 0x40) != 0
            && (dword_4DA788 == 1 || dword_4DA788 == 12 || dword_4DA788 == 20) )
          {
            CPlayer::EventBuff(0);
          }
          if ( dword_4DA788 >= 24 )
          {
            dword_4DA788 = 0;
            ++dword_4DA784;
            nMax = CCalendar::IsIntercalary(this) ? 29 : dword_4D52FC[dword_4DA780];
            if ( dword_4DA784 > nMax )
            {
              dword_4DA784 = 1;
              if ( ++dword_4DA780 > 12 )
              {
                dword_4DA780 = 1;
                ++dword_4DA77C;
              }
            }
          }
        }
      }
    }
    CIOObject::AddTimer(this, dword_4DA794 - dwTick, 0);
  }
}
// 4DA778: using guessed type int dword_4DA778;
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;
// 4DA784: using guessed type int dword_4DA784;
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;
// 4DA790: using guessed type int dword_4DA790;
// 4DA794: using guessed type int dword_4DA794;
// 4E1178: using guessed type int dword_4E1178;

//----- (0040A990) --------------------------------------------------------
int __thiscall CCalendar::IsIntercalary(CCalendar *this)
{
  int bReturn; // [esp+4h] [ebp-4h]

  bReturn = 0;
  if ( dword_4DA780 == 2 )
  {
    if ( dword_4DA77C % 400 )
    {
      bReturn = 1;
    }
    else if ( dword_4DA77C % 100 )
    {
      bReturn = 0;
    }
    else if ( dword_4DA77C % 4 )
    {
      bReturn = 1;
    }
  }
  return bReturn;
}
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;

//----- (0040AA10) --------------------------------------------------------
CChar *__thiscall CChar::CChar(CChar *this)
{
  CBase::CBase();
  this->__vftable = (CChar_vtbl *)&off_4B4B10;
  CIOCriticalSection::CIOCriticalSection(&this->m_lockBuff);
  CIOCriticalSection::CIOCriticalSection(&this->m_lock);
  this->m_nFindRef = 0;
  this->m_nTargetRef = 0;
  memset(this->m_szName, 0, sizeof(this->m_szName));
  this->m_nLevel = 0;
  memset(&this->m_prtyBase, 0, sizeof(this->m_prtyBase));
  memset(&this->m_prtyPt, 0, sizeof(this->m_prtyPt));
  memset(&this->m_prtyPer, 0, sizeof(this->m_prtyPer));
  this->m_nCurHP = 0;
  this->m_nCurMP = 0;
  this->m_nGState = 0;
  this->m_nMState = 0i64;
  this->m_nMStateEx = 0;
  this->m_nBState = 0i64;
  this->m_nRange = 0;
  this->m_nMap = 0;
  this->m_pMap = 0;
  this->m_ptTile.y = -1;
  this->m_ptTile.x = -1;
  this->m_ptPixel.y = -1;
  this->m_ptPixel.x = -1;
  this->m_nZ = -1;
  this->m_nQIndex = 0;
  this->m_nDir = 1;
  this->m_pTopBuff = 0;
  return this;
}
// 4B4B10: using guessed type int (__stdcall *off_4B4B10)(int);

//----- (0040ABB0) --------------------------------------------------------
BOOL __thiscall CChar::Index(CChar *this, int nQIndex)
{
  return nQIndex == this->m_nQIndex;
}

//----- (0040ABD0) --------------------------------------------------------
int __stdcall CChar::Damage(CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill)
{
  return 0;
}

//----- (0040ABE0) --------------------------------------------------------
_DWORD *__thiscall CChar::AddMState(CChar *this, __int64 nMState)
{
  int v2; // edx
  _DWORD *result; // eax

  v2 = HIDWORD(nMState) | HIDWORD(this->m_nMState);
  result = &this->__vftable;
  LODWORD(this->m_nMState) |= nMState;
  HIDWORD(this->m_nMState) = v2;
  return result;
}

//----- (0040AC20) --------------------------------------------------------
LONG __thiscall CChar::SubGState(CChar *this, int nGState)
{
  return InterlockedExchange(&this->m_nGState, this->m_nGState & ~nGState);
}

//----- (0040AC50) --------------------------------------------------------
LONG __thiscall CChar::AddMStateEx(CChar *this, int nMStateEx)
{
  return InterlockedExchange(&this->m_nMStateEx, nMStateEx | this->m_nMStateEx);
}

//----- (0040AC80) --------------------------------------------------------
LONG __thiscall CChar::SubMStateEx(CChar *this, int nMStateEx)
{
  return InterlockedExchange(&this->m_nMStateEx, this->m_nMStateEx & ~nMStateEx);
}

//----- (0040ACB0) --------------------------------------------------------
int __thiscall CChar::SubMState(CChar *this, __int64 nMState)
{
  int result; // eax
  int v3; // ecx

  result = this->m_nMState & ~(_DWORD)nMState;
  v3 = HIDWORD(this->m_nMState) & ~HIDWORD(nMState);
  LODWORD(this->m_nMState) = result;
  HIDWORD(this->m_nMState) = v3;
  return result;
}

//----- (0040ACF0) --------------------------------------------------------
int __thiscall CChar::GetFinalDefense(CChar *this, CChar *a1)
{
  int v2; // eax

  v2 = a1->GetAttackType(a1);
  return CChar::GetDefense(this, v2);
}

//----- (0040AD20) --------------------------------------------------------
int __thiscall CChar::GetFinalAbsorb(CChar *this, CChar *a1)
{
  return CChar::GetAbsorb(this);
}

//----- (0040AD40) --------------------------------------------------------
int __thiscall CChar::GetFinalResist(CChar *this, CChar *a1, int a2)
{
  return CChar::GetResist(this, a2) / 10;
}

//----- (0040AD70) --------------------------------------------------------
int __stdcall sub_40AD70(int a1)
{
  return 1600;
}

//----- (0040AD90) --------------------------------------------------------
void __thiscall sub_40AD90(void *this, int a2)
{
  CIOObject::Release((CIOObject *)this);
}

//----- (0040ADB0) --------------------------------------------------------
void *__thiscall CChar::`scalar deleting destructor'(void *this, char a2)
{
  CChar::~CChar((CChar *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040ADE0) --------------------------------------------------------
void __thiscall CChar::~CChar(CChar *this)
{
  this->__vftable = (CChar_vtbl *)&off_4B4B10;
  CChar::DeleteAllBuff(this);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lock);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockBuff);
  CBase::~CBase(this);
}
// 4B4B10: using guessed type int (__stdcall *off_4B4B10)(int);

//----- (0040AE20) --------------------------------------------------------
void __thiscall CChar::ReviseProperty(CChar *this)
{
  int nInt; // [esp+8h] [ebp-10h]
  int nStr; // [esp+Ch] [ebp-Ch]
  int nDex; // [esp+10h] [ebp-8h]
  int nWis; // [esp+14h] [ebp-4h]

  this->m_prtyBase.nBase[5] += 52 * this->m_nLevel / 3;
  this->m_prtyBase.nBase[6] += 8 * this->m_nLevel + 140;
  nStr = CChar::GetStr(this);
  nInt = CChar::GetInt(this);
  nWis = CChar::GetWis(this);
  nDex = CChar::GetDex(this);
  this->m_prtyPt.nHit += nDex / 8 + 15 * nStr / 54;
  this->m_prtyPt.nDodge += nDex / 3;
  this->m_prtyPt.nMinAttack += (nDex - 5) / 11 + (11 * nStr - 80) / 30 + 7 * this->m_nLevel / 10 + 1;
  this->m_prtyPt.nMaxAttack += 18 * nDex / 77 + (8 * nStr - 25) / 15 + this->m_nLevel;
  this->m_prtyPt.nMinMagic = nWis / 7 + (7 * nInt - 20) / 12 + this->m_prtyPt.nMinMagic - 3;
  this->m_prtyPt.nMaxMagic = 14 * nWis / 45 + 7 * nInt / 12 + this->m_prtyPt.nMaxMagic - 3;
  this->m_prtyPt.nResist[0] += nInt / 9;
  this->m_prtyPt.nResist[1] += nInt / 9;
  this->m_prtyPt.nResist[2] += nInt / 9;
  this->m_prtyPt.nResist[3] += nWis / 9;
  this->m_prtyPt.nResist[4] += CChar::GetHth(this) / 9;
}

//----- (0040B060) --------------------------------------------------------
tagRECT *__thiscall CChar::GetDropPt(CChar *this, tagPOINT *ptP)
{
  tagRECT *result; // eax
  int nMinX; // [esp+4h] [ebp-10h]
  int nMaxY; // [esp+8h] [ebp-Ch]
  int nMaxX; // [esp+Ch] [ebp-8h]
  int nMinY; // [esp+10h] [ebp-4h]

  nMinX = this->m_ptPixel.x - 16;
  nMaxY = this->m_ptPixel.y + 16;
  nMaxX = this->m_ptPixel.x + 16;
  nMinY = this->m_ptPixel.y - 16;
  do
  {
    do
    {
      ptP->x = Random(nMinX, nMaxX);
      ptP->y = Random(nMinY, nMaxY);
    }
    while ( abs(ptP->x - this->m_ptPixel.x) < 8 );
    result = (tagRECT *)abs(ptP->y - this->m_ptPixel.y);
  }
  while ( (int)result < 8 );
  return result;
}

//----- (0040B110) --------------------------------------------------------
void __thiscall CChar::SetXY(CChar *this, const tagPOINT *ptP)
{
  int v2; // edx

  v2 = ptP->y;
  this->m_ptPixel.x = ptP->x;
  this->m_ptPixel.y = v2;
  this->m_ptTile.x = ptP->x >> 5;
  this->m_ptTile.y = ptP->y >> 5;
  this->m_nQIndex = ((ptP->x >> 3) & 3) + 4 * ((ptP->y >> 3) & 3);
}

//----- (0040B180) --------------------------------------------------------
void __thiscall CChar::SetDirection(CChar *this, int dx, int dy)
{
  int absx; // [esp+4h] [ebp-8h]
  int absy; // [esp+8h] [ebp-4h]

  if ( dx || dy )
  {
    absx = abs(dx);
    absy = abs(dy);
    if ( absx < absy || absx <= 127 )
    {
      if ( absx < absy && absy > 127 )
      {
        dx = 127 * dx / absy;
        LOBYTE(dy) = dy <= 0 ? -127 : 127;
      }
    }
    else
    {
      dy = 127 * dy / absx;
      LOWORD(dx) = dx <= 0 ? -127 : 127;
    }
    this->m_nDir = (unsigned __int8)dy + (unsigned __int16)((_WORD)dx << 8);
  }
}

//----- (0040B240) --------------------------------------------------------
void __thiscall CChar::SetReverseDirection(CChar *this, int nDir)
{
  this->m_nDir = (unsigned __int8)-(char)nDir + ((0xFF - (_WORD)nDir) & 0xFF00);
}

//----- (0040B280) --------------------------------------------------------
BOOL __thiscall CChar::IsNormal(CChar *this)
{
  return this->m_nCurHP > 0
      && !CBase::IsDeleted(this)
      && !CChar::IsGState(this, 35)
      && !CChar::IsMState(this, 0x80000i64);
}

//----- (0040B2F0) --------------------------------------------------------
unsigned int __thiscall CBase::IsDeleted(CBase *this)
{
  return this->m_bit & 1;
}

//----- (0040B310) --------------------------------------------------------
int __thiscall CChar::IsGState(CChar *this, int nGState)
{
  return nGState & this->m_nGState;
}

//----- (0040B330) --------------------------------------------------------
void __thiscall CChar::SetBuff(CChar *this, int nType, int nRemain)
{
  CBuffMoveSpeed *v4; // [esp+10h] [ebp-4h]

  v4 = CBuff::CreateBuff(nType, nRemain, 1);
  if ( v4 )
  {
    if ( v4->SetBuff(v4, this) )
    {
      CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
      v4->m_pNext = this->m_pTopBuff;
      this->m_pTopBuff = v4;
      CIOCriticalSection::Leave((int)&this->m_lockBuff);
    }
    else
    {
      CBuff::`scalar deleting destructor'(v4, 1);
    }
  }
}
// 40B378: conditional instruction was optimized away because of '%var_4.4!=0'

//----- (0040B3D0) --------------------------------------------------------
int __thiscall CChar::AddBuff(CChar *this, CBuff *pNewBuff)
{
  int bRet; // [esp+10h] [ebp-8h]
  CBuff *pOldBuff; // [esp+14h] [ebp-4h]

  if ( !pNewBuff )
    return 0;
  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  pOldBuff = CChar::_FindBuff((CBuff *)this, pNewBuff->m_nType);
  if ( pOldBuff )
  {
    bRet = pOldBuff->UpdateBuff(pOldBuff, pNewBuff, this);
  }
  else
  {
    bRet = pNewBuff->ApplyBuff(pNewBuff, this);
    if ( bRet )
    {
      pNewBuff->m_pNext = this->m_pTopBuff;
      this->m_pTopBuff = pNewBuff;
    }
    else
    {
      CBuff::`scalar deleting destructor'(pNewBuff, 1);
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
  return bRet;
}
// 40B470: conditional instruction was optimized away because of '%a2.4!=0'

//----- (0040B4A0) --------------------------------------------------------
CBuff *__thiscall CChar::_FindBuff(CBuff *this, int nBuff)
{
  CBuff *pBuff; // [esp+4h] [ebp-4h]

  for ( pBuff = (CBuff *)this[15].__vftable; pBuff && pBuff->m_nType != nBuff; pBuff = pBuff->m_pNext )
    ;
  return pBuff;
}

//----- (0040B4E0) --------------------------------------------------------
unsigned int __thiscall CChar::GetBuffRemain(CChar *this, int nBuff)
{
  CBuff *pBuff; // [esp+4h] [ebp-8h]
  unsigned int dwRet; // [esp+8h] [ebp-4h]

  dwRet = 0;
  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  pBuff = CChar::_FindBuff((CBuff *)this, nBuff);
  if ( pBuff )
    dwRet = pBuff->m_dwRelease;
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
  return dwRet;
}

//----- (0040B540) --------------------------------------------------------
void __thiscall CChar::UpdateBuff(CChar *this, int nBuff)
{
  CBuff *pBuff; // [esp+10h] [ebp-8h]
  CBuff **ppBuff; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  ppBuff = &this->m_pTopBuff;
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = pBuff->m_pNext )
  {
    if ( pBuff->m_nType == nBuff )
    {
      if ( !pBuff->UpdateBuff(pBuff, pBuff, this) )
      {
        *ppBuff = pBuff->m_pNext;
        CBuff::`scalar deleting destructor'(pBuff, 1);
      }
      break;
    }
    ppBuff = &pBuff->m_pNext;
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}
// 40B5B7: conditional instruction was optimized away because of '%pBuff.4!=0'

//----- (0040B5F0) --------------------------------------------------------
void __thiscall CChar::RefreshBuff(CChar *this)
{
  CBuff *pBuff; // [esp+10h] [ebp-8h]
  CBuff **ppBuff; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  ppBuff = &this->m_pTopBuff;
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = *ppBuff )
  {
    if ( pBuff->IsExpired(pBuff, this) )
    {
      pBuff->FreeBuff(pBuff, this);
      *ppBuff = pBuff->m_pNext;
      CBuff::`scalar deleting destructor'(pBuff, 1);
    }
    else
    {
      ppBuff = &pBuff->m_pNext;
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}
// 40B667: conditional instruction was optimized away because of '%pBuff.4!=0'

//----- (0040B6A0) --------------------------------------------------------
void __thiscall CChar::CancelBuff(CChar *this, int nBuff)
{
  CBuff *pBuff; // [esp+10h] [ebp-8h]
  CBuff **ppBuff; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  ppBuff = &this->m_pTopBuff;
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = pBuff->m_pNext )
  {
    if ( pBuff->m_nType == nBuff )
    {
      pBuff->FreeBuff(pBuff, this);
      *ppBuff = pBuff->m_pNext;
      CBuff::`scalar deleting destructor'(pBuff, 1);
      break;
    }
    ppBuff = &pBuff->m_pNext;
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}
// 40B70F: conditional instruction was optimized away because of '%pBuff.4!=0'

//----- (0040B750) --------------------------------------------------------
void __thiscall CChar::CancelAllBuff(CChar *this)
{
  CBuff *pBuff; // [esp+10h] [ebp-8h]
  CBuff **ppBuff; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  ppBuff = &this->m_pTopBuff;
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = *ppBuff )
  {
    pBuff->FreeBuff(pBuff, this);
    *ppBuff = pBuff->m_pNext;
    CBuff::`scalar deleting destructor'(pBuff, 1);
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}
// 40B7B4: conditional instruction was optimized away because of '%pBuff.4!=0'

//----- (0040B7E0) --------------------------------------------------------
void __thiscall CChar::DeleteAllBuff(CChar *this)
{
  CBuff *pBuff; // [esp+10h] [ebp-8h]
  CBuff **ppBuff; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  ppBuff = &this->m_pTopBuff;
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = *ppBuff )
  {
    *ppBuff = pBuff->m_pNext;
    CBuff::`scalar deleting destructor'(pBuff, 1);
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}
// 40B835: conditional instruction was optimized away because of '%pBuff.4!=0'

//----- (0040B870) --------------------------------------------------------
void __thiscall CChar::CancelBuffPrty(CChar *this, int nBuffPrty)
{
  CBuff *pBuff; // [esp+10h] [ebp-8h]
  CBuff **ppBuff; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  ppBuff = &this->m_pTopBuff;
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = *ppBuff )
  {
    if ( (nBuffPrty & pBuff->m_nPrty) != 0 )
    {
      pBuff->FreeBuff(pBuff, this);
      *ppBuff = pBuff->m_pNext;
      CBuff::`scalar deleting destructor'(pBuff, 1);
    }
    else
    {
      ppBuff = &pBuff->m_pNext;
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}
// 40B8DF: conditional instruction was optimized away because of '%pBuff.4!=0'

//----- (0040B920) --------------------------------------------------------
void __thiscall CChar::ResetAllBuff(CChar *this)
{
  CBuff *pBuff; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = pBuff->m_pNext )
    pBuff->SetBuff(pBuff, this);
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}

//----- (0040B980) --------------------------------------------------------
void __thiscall CChar::SaveAllBuff(CChar *this)
{
  CBuff *pBuff; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockBuff.m_critical_section);
  for ( pBuff = this->m_pTopBuff; pBuff; pBuff = pBuff->m_pNext )
    pBuff->SaveRemain(pBuff, this);
  CIOCriticalSection::Leave((int)&this->m_lockBuff);
}

//----- (0040B9E0) --------------------------------------------------------
void CChar::WriteInSight(CChar *this, enum S2C_PROTOCOL nType, char *format, ...)
{
  CIOBuffer *pBuffer; // [esp+0h] [ebp-10h]

  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&format) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  CSMap::SendPacketInRect(this->m_pMap, &this->m_ptTile, pBuffer, 25);
  CIOBuffer::Release(pBuffer);
}

//----- (0040BA70) --------------------------------------------------------
void CChar::WriteInRect(CChar *this, enum S2C_PROTOCOL nType, int nRadius, char *format, ...)
{
  CIOBuffer *pBuffer; // [esp+0h] [ebp-10h]

  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&format) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  CSMap::SendPacketInRect(this->m_pMap, &this->m_ptTile, pBuffer, nRadius);
  CIOBuffer::Release(pBuffer);
}

//----- (0040BB00) --------------------------------------------------------
void __thiscall CConfig::CConfig(CConfig *this)
{
  lisp::var::var((std::ios_base *)&this->m_root);
  this->m_fp = 0;
}

//----- (0040BB50) --------------------------------------------------------
void __thiscall CConfig::~CConfig(CConfig *this)
{
  CConfig::Close(this);
}

//----- (0040BB70) --------------------------------------------------------
void __thiscall CConfig::Close(CConfig *this)
{
  lisp::_object *v1; // ecx
  lisp::var v2; // [esp-4h] [ebp-10h] BYREF
  CConfig *v3; // [esp+0h] [ebp-Ch]

  v3 = this;
  if ( this->m_fp )
  {
    fclose(v3->m_fp);
    v3->m_fp = 0;
  }
  v2.m_pObject = (lisp::_object *)&v3->m_root;
  lisp::var::var(&v2, &v3->m_root);
  free_var(v2.m_pObject);
  v2.m_pObject = v1;
  lisp::var::var(&v2, &v);
  lisp::var::operator=(&v3->m_root.m_pObject, (int)v2.m_pObject);
}
// 40BBC0: variable 'v1' is possibly undefined

//----- (0040BBE0) --------------------------------------------------------
void __cdecl free_var(int (__thiscall ***a1)(_DWORD))
{
  lisp::var *v1; // eax
  lisp::_object *v2; // ecx
  lisp::var *v3; // eax
  lisp::_object *v4; // ecx
  void *v5; // eax
  lisp::var v6[6]; // [esp-4h] [ebp-1Ch] BYREF
  lisp::_object *v7; // [esp+14h] [ebp-4h]

  if ( lisp::var::consp((const lisp::var *)&a1) )
  {
    v1 = lisp::var::car((const lisp::var *)&a1);
    v6[0].m_pObject = v2;
    lisp::var::var(v6, v1);
    free_var(v6[0].m_pObject);
    v3 = lisp::var::cdr((lisp::var *)&a1);
    v6[0].m_pObject = v4;
    lisp::var::var(v6, v3);
    free_var(v6[0].m_pObject);
    v6[3].m_pObject = (lisp::_object *)a1;
    operator delete(a1);
  }
  else if ( lisp::var::stringp((const lisp::var *)&a1) )
  {
    v7 = (lisp::_object *)a1;
    v5 = (void *)(**a1)(a1);
    CMemory::_free(v5);
    v6[2].m_pObject = v7;
    operator delete(v7);
  }
  else if ( lisp::var::integerp((const lisp::var *)&a1) )
  {
    operator delete(a1);
  }
}
// 40BBFD: variable 'v2' is possibly undefined
// 40BC16: variable 'v4' is possibly undefined

//----- (0040BCA0) --------------------------------------------------------
struct lisp::var *__thiscall lisp::var::car(const lisp::var *this)
{
  return (struct lisp::var *)((int (__thiscall *)(lisp::_object *, const lisp::var *))this->m_pObject->car)(
                               this->m_pObject,
                               this);
}

//----- (0040BCC0) --------------------------------------------------------
struct lisp::var *__thiscall lisp::var::cdr(lisp::var *this)
{
  return (struct lisp::var *)((int (__thiscall *)(lisp::_object *, lisp::var *))this->m_pObject->cdr)(
                               this->m_pObject,
                               this);
}

//----- (0040BCE0) --------------------------------------------------------
bool __thiscall lisp::var::consp(const lisp::var *this)
{
  return ((int (__thiscall *)(lisp::_object *, const lisp::var *))this->m_pObject->consp)(this->m_pObject, this);
}

//----- (0040BD00) --------------------------------------------------------
bool __thiscall lisp::var::stringp(const lisp::var *this)
{
  return ((int (__thiscall *)(lisp::_object *, const lisp::var *))this->m_pObject->stringp)(this->m_pObject, this);
}

//----- (0040BD20) --------------------------------------------------------
bool __thiscall lisp::var::integerp(const lisp::var *this)
{
  return ((int (__thiscall *)(lisp::_object *, const lisp::var *))this->m_pObject->integerp)(this->m_pObject, this);
}

//----- (0040BD40) --------------------------------------------------------
int __thiscall CConfig::GetToken(CConfig *this)
{
  int result; // eax
  int v2; // [esp+10h] [ebp-14h]
  int v4; // [esp+1Ch] [ebp-8h]
  int v5; // [esp+1Ch] [ebp-8h]
  int v6; // [esp+1Ch] [ebp-8h]
  int v7; // [esp+1Ch] [ebp-8h]
  int v8; // [esp+1Ch] [ebp-8h]
  CConfig *v9; // [esp+20h] [ebp-4h]
  char *i; // [esp+20h] [ebp-4h]

  while ( 2 )
  {
    v4 = fgetc(this->m_fp);
    switch ( v4 )
    {
      case '\xFF\xFF\xFF\xFF':
        return 0;
      case '\t':
      case '\r':
      case ' ':
        continue;
      case '\n':
        ++this->m_nLine;
        return 3;
      case '"':
        v9 = this;
        while ( 2 )
        {
          v5 = fgetc(this->m_fp);
          switch ( v5 )
          {
            case -1:
              return 0;
            case 10:
              ++this->m_nLine;
              return 3;
            case 13:
              continue;
            case 34:
              v6 = fgetc(this->m_fp);
              if ( v6 == -1 )
              {
                v9->m_szSymbol[0] = 0;
                return 2;
              }
              if ( v6 == 34 )
              {
                v9->m_szSymbol[0] = 34;
                v9 = (CConfig *)((char *)v9 + 1);
                continue;
              }
              break;
            default:
              v9->m_szSymbol[0] = v5;
              v9 = (CConfig *)((char *)v9 + 1);
              continue;
          }
          break;
        }
        goto LABEL_19;
      case '\'':
        v9 = this;
        while ( 2 )
        {
          v7 = fgetc(this->m_fp);
          switch ( v7 )
          {
            case -1:
              return 0;
            case 10:
              ++this->m_nLine;
              return 3;
            case 13:
              continue;
            case 39:
              v6 = fgetc(this->m_fp);
              if ( v6 == -1 )
              {
                v9->m_szSymbol[0] = 0;
                result = 2;
              }
              else
              {
                if ( v6 == 39 )
                {
                  v9->m_szSymbol[0] = 39;
                  v9 = (CConfig *)((char *)v9 + 1);
                  continue;
                }
LABEL_19:
                ungetc_0(v6, this->m_fp);
                v9->m_szSymbol[0] = 0;
                result = 2;
              }
              break;
            default:
              v9->m_szSymbol[0] = v7;
              v9 = (CConfig *)((char *)v9 + 1);
              continue;
          }
          break;
        }
        return result;
      case '(':
        return 7;
      case ')':
        return 8;
      case ',':
        return 5;
      case ':':
        return 6;
      case ';':
        do
        {
          v2 = fgetc(this->m_fp);
          if ( v2 == -1 )
            return 0;
        }
        while ( v2 != 10 );
        ++this->m_nLine;
        return 3;
      case '=':
        return 4;
      default:
        if ( isalnum(v4) || v4 == 45 )
        {
          this->m_szSymbol[0] = v4;
          for ( i = &this->m_szSymbol[1]; ; ++i )
          {
            v8 = fgetc(this->m_fp);
            if ( v8 == -1 )
              goto LABEL_41;
            if ( !isalnum(v8) )
              break;
            *i = v8;
          }
          ungetc_0(v8, this->m_fp);
LABEL_41:
          *i = 0;
          return 1;
        }
        return 9;
    }
  }
}

//----- (0040C1B0) --------------------------------------------------------
lisp::var *__thiscall CConfig::Find(CConfig *this, lisp::var *result, const char *key)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  const char *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v8; // eax
  lisp::_object *v9; // ecx
  lisp::var v10[3]; // [esp-4h] [ebp-10h] BYREF
  lisp::var v11; // [esp+8h] [ebp-4h] BYREF

  v10[1].m_pObject = (lisp::_object *)this;
  lisp::var::var(&v11, &this->m_root);
  while ( !(unsigned __int8)lisp::var::null(&v11) )
  {
    v10[0].m_pObject = (lisp::_object *)key;
    v3 = (lisp::var *)lisp::var::car(&v11);
    v4 = (lisp::var *)lisp::var::car(v3);
    v5 = (const char *)lisp::var::operator char const *(v4);
    if ( !_stricmp(v5, (const char *)v10[0].m_pObject) )
    {
      v6 = (lisp::var *)lisp::var::car(&v11);
      lisp::var::var(result, v6);
      return result;
    }
    v8 = (lisp::var *)lisp::var::cdr(&v11);
    v10[0].m_pObject = v9;
    lisp::var::var(v10, v8);
    lisp::var::operator=(&v11, (int)v10[0].m_pObject);
  }
  lisp::var::var(result, &v);
  return result;
}
// 40C21E: variable 'v9' is possibly undefined

//----- (0040C250) --------------------------------------------------------
_DWORD *__thiscall CConfig::GetValue(CConfig *this, Token *Token)
{
  char *v2; // eax
  _DWORD *result; // eax
  lisp::_string *v4; // [esp+0h] [ebp-10h]
  lisp::_string *v6; // [esp+8h] [ebp-8h]
  int v7; // [esp+Ch] [ebp-4h]

  do
    v7 = CConfig::GetToken(this);
  while ( v7 == 3 );
  if ( v7 == 1 || v7 == 2 )
  {
    v6 = (lisp::_string *)operator new(8u);
    if ( v6 )
    {
      v2 = Strdup(this->m_szSymbol);
      v4 = lisp::_string::_string(v6, v2);
    }
    else
    {
      v4 = 0;
    }
    sub_446FD0(v4);
    result = Token;
  }
  else
  {
    if ( v7 == 7 )
    {
      CConfig::GetList(this);
    }
    else
    {
      this->m_token = v7;
      lisp::var::var((lisp::var *)Token, &v);
    }
    result = Token;
  }
  return result;
}
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0040C300) --------------------------------------------------------
lisp::_string *__thiscall lisp::_string::_string(lisp::_string *this, const char *str)
{
  std::ios_base::ios_base((std::ios_base *)this);
  this->__vftable = (lisp::_string_vtbl *)off_4B4BCC;
  this->m_pString = str;
  return this;
}
// 4B4BCC: using guessed type int (*off_4B4BCC[7])();

//----- (0040C330) --------------------------------------------------------
lisp::var *sub_40C330()
{
  return &v;
}

//----- (0040C360) --------------------------------------------------------
char *sub_40C360()
{
  return &DefaultNullString;
}

//----- (0040C380) --------------------------------------------------------
char *__cdecl Strdup(const char *str)
{
  CMemory **v1; // eax
  unsigned int v3; // [esp-4h] [ebp-8h]

  v3 = strlen(str) + 1;
  v1 = CMemory::_malloc(v3);
  return (char *)memcpy(v1, str, v3);
}

//----- (0040C3C0) --------------------------------------------------------
_DWORD *__thiscall CConfig::GetList(CConfig *this)
{
  _DWORD *result; // eax
  bool v2; // al
  lisp::_object *v3; // ecx
  lisp::_object *v4; // ecx
  lisp::var v5; // [esp-Ch] [ebp-34h] BYREF
  lisp::var v6[2]; // [esp-8h] [ebp-30h] BYREF
  std::ios_base *v7; // [esp+0h] [ebp-28h]
  lisp::_integer *v8; // [esp+4h] [ebp-24h]
  CConfig *v9; // [esp+8h] [ebp-20h]
  std::ios_base *v10; // [esp+14h] [ebp-14h]
  lisp::_integer *v; // [esp+1Ch] [ebp-Ch]
  lisp::var v12; // [esp+20h] [ebp-8h] BYREF
  Token Token; // [esp+24h] [ebp-4h] BYREF
  lisp::var *a2; // [esp+30h] [ebp+8h]

  v9 = this;
  CConfig::GetValue(this, &Token);
  if ( (unsigned __int8)lisp::var::null((lisp::var *)&Token) )
  {
    if ( v9->m_token == T_CLOSE )
    {
      lisp::var::var(a2, &::v);
      result = &a2->m_pObject;
    }
    else
    {
      v = (lisp::_integer *)operator new(8u);
      if ( v )
        v8 = lisp::_integer::_integer(v, v9->m_token);
      else
        v8 = 0;
      sub_446FD0(v8);
      result = &a2->m_pObject;
    }
  }
  else
  {
    v6[1].m_pObject = (lisp::_object *)&v12;
    CConfig::GetList(v9);
    v2 = lisp::var::integerp(&v12);
    if ( v2 )
    {
      v6[0].m_pObject = (lisp::_object *)v2;
      lisp::var::var(v6, (lisp::var *)&Token);
      free_var(v6[0].m_pObject);
      lisp::var::var(a2, &v12);
      result = &a2->m_pObject;
    }
    else
    {
      v10 = (std::ios_base *)operator new(0xCu);
      if ( v10 )
      {
        v6[0].m_pObject = v3;
        lisp::var::var(v6, &v12);
        v5.m_pObject = v4;
        lisp::var::var(&v5, (lisp::var *)&Token);
        v7 = lisp::_cons::_cons(v10, (int)v5.m_pObject, (int)v6[0].m_pObject);
      }
      else
      {
        v7 = 0;
      }
      sub_446FD0(v7);
      result = &a2->m_pObject;
    }
  }
  return result;
}
// 40C49D: variable 'v3' is possibly undefined
// 40C4A9: variable 'v4' is possibly undefined
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0040C4E0) --------------------------------------------------------
lisp::_integer *__thiscall lisp::_integer::_integer(lisp::_integer *this, int n)
{
  std::ios_base::ios_base((std::ios_base *)this);
  this->__vftable = (lisp::_integer_vtbl *)off_4B4C1C;
  this->m_nValue = n;
  return this;
}
// 4B4C1C: using guessed type int (*off_4B4C1C[8])();

//----- (0040C510) --------------------------------------------------------
std::ios_base *__thiscall lisp::_cons::_cons(std::ios_base *this, int a2, int a3)
{
  std::ios_base::ios_base(this);
  this->__vftable = (std::ios_base_vtbl *)off_4B4C44;
  lisp::var::var((lisp::var *)&this->_Stdstr, (lisp::var *)&a2);
  lisp::var::var((lisp::var *)&this->_Mystate, (lisp::var *)&a3);
  return this;
}
// 4B4C44: using guessed type int (*off_4B4C44[4])();

//----- (0040C550) --------------------------------------------------------
char *__thiscall sub_40C550(char *this)
{
  return this + 4;
}

//----- (0040C590) --------------------------------------------------------
int __thiscall CConfig::Open(CConfig *this, const char *FileName)
{
  lisp::_object *v3; // ecx
  lisp::_object *v4; // ecx
  char *v5; // eax
  lisp::_object *v6; // ecx
  lisp::var *v7; // eax
  lisp::_object *v8; // ecx
  lisp::_object *v9; // ecx
  lisp::_object *v10; // ecx
  lisp::_object *v11; // ecx
  lisp::_object *v12; // ecx
  lisp::var v13; // [esp-8h] [ebp-6Ch] BYREF
  lisp::var v14; // [esp-4h] [ebp-68h] BYREF
  std::ios_base *v15; // [esp+0h] [ebp-64h]
  std::ios_base *v16; // [esp+4h] [ebp-60h]
  lisp::_string *v17; // [esp+8h] [ebp-5Ch]
  lisp::_string *v18; // [esp+Ch] [ebp-58h]
  int v19; // [esp+10h] [ebp-54h]
  char *str; // [esp+14h] [ebp-50h]
  lisp::_string *v21; // [esp+1Ch] [ebp-48h]
  std::ios_base *v22; // [esp+28h] [ebp-3Ch]
  std::ios_base *v23; // [esp+34h] [ebp-30h]
  lisp::var v24[3]; // [esp+3Ch] [ebp-28h] BYREF
  lisp::_string *v25; // [esp+48h] [ebp-1Ch]
  lisp::var v; // [esp+50h] [ebp-14h] BYREF
  lisp::var *v27; // [esp+54h] [ebp-10h]
  char *key; // [esp+58h] [ebp-Ch]
  int v29; // [esp+5Ch] [ebp-8h]
  char v30[4]; // [esp+60h] [ebp-4h] BYREF

  str = (char *)this;
  this->m_fp = fopen(FileName, "rb");
  if ( !*((_DWORD *)str + 128) )
  {
    LOG_ERR("'%s' File open failed at CConfig::Open", FileName);
    return 0;
  }
  lisp::var::var((std::ios_base *)v30);
  v27 = (lisp::var *)(str + 520);
  *((_DWORD *)str + 129) = 1;
  while ( 1 )
  {
    v29 = CConfig::GetToken((CConfig *)str);
    v19 = v29;
    if ( !v29 )
      break;
    if ( v19 == 1 )
    {
      key = Strdup(str);
      v29 = CConfig::GetToken((CConfig *)str);
      if ( v29 != 4 )
        goto LABEL_33;
      v29 = CConfig::GetToken((CConfig *)str);
      lisp::var::var((std::ios_base *)&v);
      if ( v29 == 1 || v29 == 2 )
      {
        v25 = (lisp::_string *)operator new(8u);
        if ( v25 )
        {
          v5 = Strdup(str);
          v18 = lisp::_string::_string(v25, v5);
        }
        else
        {
          v18 = 0;
        }
        v14.m_pObject = v4;
        sub_446FD0(v18);
        lisp::var::operator=(&v, (int)v14.m_pObject);
      }
      else
      {
        if ( v29 != 7 )
          goto LABEL_33;
        v14.m_pObject = v3;
        v13.m_pObject = (lisp::_object *)&v14;
        CConfig::GetList((CConfig *)str);
        lisp::var::operator=(&v, (int)v13.m_pObject);
        if ( lisp::var::integerp(&v) )
        {
          v29 = lisp::var::operator int(&v);
          v13.m_pObject = v6;
          lisp::var::var(&v13, &v);
          free_var(v13.m_pObject);
LABEL_33:
          LOG_ERR("Invalid format %s(%d) at CConfig::Open", FileName, *((_DWORD *)str + 129));
          CMemory::_free(key);
          goto LABEL_34;
        }
      }
      v7 = CConfig::Find((CConfig *)str, v24, key);
      if ( (unsigned __int8)lisp::var::null(v7) )
      {
        v23 = (std::ios_base *)operator new(0xCu);
        if ( v23 )
        {
          v22 = (std::ios_base *)operator new(0xCu);
          if ( v22 )
          {
            v21 = (lisp::_string *)operator new(8u);
            if ( v21 )
              v17 = lisp::_string::_string(v21, key);
            else
              v17 = 0;
            v14.m_pObject = v10;
            lisp::var::var(&v14, &v);
            v13.m_pObject = v11;
            sub_446FD0(v17);
            v16 = lisp::_cons::_cons(v22, (int)v13.m_pObject, (int)v14.m_pObject);
          }
          else
          {
            v16 = 0;
          }
          v14.m_pObject = v9;
          lisp::var::var(&v14, &::v);
          v13.m_pObject = v12;
          sub_446FD0(v16);
          v15 = lisp::_cons::_cons(v23, (int)v13.m_pObject, (int)v14.m_pObject);
        }
        else
        {
          v15 = 0;
        }
        v14.m_pObject = v8;
        sub_446FD0(v15);
        lisp::var::operator=(v27, (int)v14.m_pObject);
        v27 = lisp::var::cdr(v27);
      }
      else
      {
        LOG_ERR("Duplicate key %s(%d) at CConfig::Open", FileName, *((_DWORD *)str + 129));
        CMemory::_free(key);
        lisp::var::var(&v14, &v);
        free_var(v14.m_pObject);
      }
LABEL_34:
      while ( v29 != 3 && v29 )
        v29 = CConfig::GetToken((CConfig *)str);
    }
    else if ( v19 != 3 )
    {
      LOG_ERR("Invalid format %s(%d) at CConfig::Open", FileName, *((_DWORD *)str + 129));
    }
  }
  fclose(*((FILE **)str + 128));
  *((_DWORD *)str + 128) = 0;
  return 1;
}
// 40C6A0: variable 'v4' is possibly undefined
// 40C6BC: variable 'v3' is possibly undefined
// 40C6E8: variable 'v6' is possibly undefined
// 40C77F: variable 'v10' is possibly undefined
// 40C78B: variable 'v11' is possibly undefined
// 40C7AB: variable 'v9' is possibly undefined
// 40C7B8: variable 'v12' is possibly undefined
// 40C7D8: variable 'v8' is possibly undefined
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0040C8D0) --------------------------------------------------------
int __thiscall lisp::var::operator int(lisp::var *this)
{
  return ((int (__thiscall *)(lisp::_object *, lisp::var *))this->m_pObject->GetInteger)(this->m_pObject, this);
}

//----- (0040C8F0) --------------------------------------------------------
const char *__thiscall CConfig::Get(CConfig *this, const char *key)
{
  lisp::var *v2; // eax
  lisp::var *v3; // eax
  lisp::var result; // [esp+4h] [ebp-4h] BYREF

  v2 = CConfig::Find(this, &result, key);
  v3 = lisp::var::cdr(v2);
  return (const char *)lisp::var::operator char const *(v3);
}

//----- (0040C920) --------------------------------------------------------
const char *__thiscall CConfig::Get(CConfig *this, const char *key, const char *defaultValue)
{
  lisp::var *v4; // eax
  lisp::var result; // [esp+4h] [ebp-4h] BYREF

  CConfig::Find(this, &result, key);
  if ( (unsigned __int8)lisp::var::null(&result) )
    return defaultValue;
  v4 = lisp::var::cdr(&result);
  return (const char *)lisp::var::operator char const *(v4);
}

//----- (0040C970) --------------------------------------------------------
int __thiscall CConfig::GetInt(CConfig *this, char *key)
{
  lisp::var *v2; // eax
  lisp::var *v3; // eax
  lisp::var result; // [esp+4h] [ebp-4h] BYREF

  v2 = CConfig::Find(this, &result, key);
  v3 = lisp::var::cdr(v2);
  return lisp::var::operator int(v3);
}

//----- (0040C9A0) --------------------------------------------------------
int __thiscall CConfig::GetInt(CConfig *this, char *key, int defaultValue)
{
  lisp::var *v4; // eax
  lisp::var result; // [esp+4h] [ebp-4h] BYREF

  CConfig::Find(this, &result, key);
  if ( (unsigned __int8)lisp::var::null(&result) )
    return defaultValue;
  v4 = lisp::var::cdr(&result);
  return lisp::var::operator int(v4);
}

//----- (0040C9F0) --------------------------------------------------------
unsigned int __cdecl CConfig::GetTimeStamp()
{
  unsigned int result; // eax
  HINSTANCE__ *hModule; // [esp+4h] [ebp-8h]
  _IMAGE_NT_HEADERS *v2; // [esp+8h] [ebp-4h]

  hModule = GetModuleHandleA(0);
  if ( !hModule )
    return 0;
  if ( *(_WORD *)hModule != 23117 )
    return 0;
  v2 = (_IMAGE_NT_HEADERS *)((char *)hModule + *((_DWORD *)hModule + 15));
  if ( v2->Signature == 'EP' )
    result = v2->FileHeader.TimeDateStamp;
  else
    result = 0;
  return result;
}

//----- (0040CA50) --------------------------------------------------------
void __thiscall CDBPacket::OnIOCallback(CDBPacket *this, int bSuccess, ulong dwTransferred, _OVERLAPPED *lpOverlapped)
{
  CDBSocket::Process((DBPACKET *)dwTransferred);
  CIOBuffer::Release(this->m_pBuf);
  CMemoryPool<CDBPacket>::Free(this);
}

//----- (0040CA80) --------------------------------------------------------
volatile int *__thiscall CDBSocket::CDBSocket(CDBSocket *this)
{
  CIOSocket::CIOSocket(this, 0);
  this->__vftable = (CDBSocket_vtbl *)&off_4B4CEC;
  CIOObject::AddRef((int)this);
  return (volatile int *)this;
}
// 4B4CEC: using guessed type int (__stdcall *off_4B4CEC)(int);

//----- (0040CAB0) --------------------------------------------------------
void *__thiscall CDBSocket::`scalar deleting destructor'(CDBSocket *this, unsigned int a2)
{
  CDBSocket::~CDBSocket(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040CAE0) --------------------------------------------------------
void __thiscall CDBSocket::~CDBSocket(CDBSocket *this)
{
  this->__vftable = (CDBSocket_vtbl *)&off_4B4CEC;
  CIOSocket::_CIOSocket((CIOBuffer **)this);
}
// 4B4CEC: using guessed type int (__stdcall *off_4B4CEC)(int);

//----- (0040CB00) --------------------------------------------------------
int __cdecl CDBSocket::Start()
{
  const char *v0; // eax
  const char *v1; // eax
  struct hostent *v3; // [esp+0h] [ebp-1Ch]
  struct sockaddr name; // [esp+4h] [ebp-18h] BYREF
  int v5; // [esp+14h] [ebp-8h]
  SOCKET s; // [esp+18h] [ebp-4h]

  v5 = dword_4D9830;
  s = socket(2, 1, 0);
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_WORD *)name.sa_data = 0;
  bind(s, &name, 16);
  name.sa_family = 2;
  v0 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E11B0);
  *(_DWORD *)&name.sa_data[2] = inet_addr(v0);
  if ( *(_DWORD *)&name.sa_data[2] == -1 )
  {
    v1 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E11B0);
    v3 = gethostbyname(v1);
    if ( !v3 )
      goto LABEL_7;
    memcpy(&name.sa_data[2], *(const void **)v3->h_addr_list, v3->h_length);
  }
  *(_WORD *)name.sa_data = htons(dword_4E116C);
  if ( connect(s, &name, 16) != -1 )
  {
    dword_4DA7C8 = s;
    hObject = CreateEventA(0, 1, 0, 0);
    CIOSocket::Initialize((CIOSocket *)dword_4DA7B8);
    WaitForSingleObject(hObject, 0xFFFFFFFF);
    hObject = 0;
    CloseHandle(0);
    return dword_4DA7AC;
  }
  LOG_ERR("Can't connect to DB Server");
LABEL_7:
  closesocket(s);
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4DA7AC: using guessed type int dword_4DA7AC;
// 4DA7B8: using guessed type int dword_4DA7B8[4];
// 4DA7C8: using guessed type int dword_4DA7C8;

//----- (0040CC40) --------------------------------------------------------
void __cdecl CDBSocket::Stop()
{
  if ( dword_4DA7AC )
  {
    dword_4DA7AC = 0;
    hObject = CreateEventA(0, 1, 0, 0);
    CDBSocket::Write(S2D_CLOSE, &DefaultNullString);
    WaitForSingleObject(hObject, 0xFFFFFFFF);
    CloseHandle(hObject);
    hObject = 0;
  }
}
// 4DA7AC: using guessed type int dword_4DA7AC;

//----- (0040CCA0) --------------------------------------------------------
void __thiscall CDBSocket::OnClose(CDBSocket *this)
{
  if ( dword_4DA7AC )
  {
    dword_4DA7AC = 0;
    LOG_ERR("Connection closed from DB Server");
    PostMessageA(hWnd, 0x111u, 0x8009u, 0);
  }
  else
  {
    SetEvent(hObject);
  }
}
// 4DA7AC: using guessed type int dword_4DA7AC;

//----- (0040CD00) --------------------------------------------------------
void __thiscall CDBSocket::OnRead(CDBSocket *this)
{
  int dwNumberOfBytesTransferred; // [esp+4h] [ebp-14h]
  CDBPacket *v3; // [esp+8h] [ebp-10h]
  size_t v4; // [esp+Ch] [ebp-Ch]
  CIOBuffer *v5; // [esp+10h] [ebp-8h]
  size_t dwLeft; // [esp+14h] [ebp-4h]

  dwLeft = this->m_pReadBuf->m_dwSize;
  v5 = this->m_pReadBuf;
  while ( 1 )
  {
    dwNumberOfBytesTransferred = (int)v5;
    if ( dwLeft < 2 )
      break;
    v4 = *(unsigned __int16 *)v5->m_buffer;
    if ( dwLeft < v4 )
      break;
    dwLeft -= v4;
    v5 = (CIOBuffer *)((char *)v5 + v4);
    v3 = CMemoryPool<CDBPacket>::Alloc();
    v3->m_pBuf = this->m_pReadBuf;
    CIOBuffer::AddRef(this->m_pReadBuf);
    CIOObject::PostObject(v3, dwNumberOfBytesTransferred);
  }
  CIOSocket::Read(this, dwLeft);
}

//----- (0040CD90) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __cdecl CDBSocket::Process(DBPACKET *dbpacket)
{
  DWORD nId_________________; // [esp+8h] [ebp-17Ch] BYREF
  CSocket *pSocket_______; // [esp+Ch] [ebp-178h]
  unsigned __int8 byRestoreResult; // [esp+13h] [ebp-171h] BYREF
  DWORD nId________________; // [esp+14h] [ebp-170h] BYREF
  CSocket *pSocket______; // [esp+18h] [ebp-16Ch]
  unsigned __int16 wSize_; // [esp+1Ch] [ebp-168h] BYREF
  unsigned __int8 byCount___; // [esp+23h] [ebp-161h] BYREF
  int nPID_____; // [esp+24h] [ebp-160h] BYREF
  CPlayer *pPlayer____________; // [esp+28h] [ebp-15Ch]
  int nNPC; // [esp+2Ch] [ebp-158h] BYREF
  int dwEvent; // [esp+30h] [ebp-154h] BYREF
  int nId_______________; // [esp+34h] [ebp-150h] BYREF
  char *szNewName__; // [esp+38h] [ebp-14Ch] BYREF
  unsigned __int8 byAns______; // [esp+3Fh] [ebp-145h] BYREF
  CPlayer *pPlayer___________; // [esp+40h] [ebp-144h]
  int nId______________; // [esp+44h] [ebp-140h] BYREF
  char *szNewName_; // [esp+48h] [ebp-13Ch] BYREF
  unsigned __int8 byAns_____; // [esp+4Fh] [ebp-135h] BYREF
  CPlayer *pPlayer__________; // [esp+50h] [ebp-134h]
  int nMID_; // [esp+54h] [ebp-130h] BYREF
  int nIID; // [esp+58h] [ebp-12Ch] OVERLAPPED BYREF
  char bySRType; // [esp+5Fh] [ebp-125h] BYREF
  int nMID; // [esp+60h] [ebp-124h] BYREF
  char byMType; // [esp+67h] [ebp-11Dh] BYREF
  int nPID____; // [esp+68h] [ebp-11Ch] BYREF
  unsigned __int8 byType_; // [esp+6Fh] [ebp-115h] BYREF
  CPlayer *pPlayer_________; // [esp+70h] [ebp-114h]
  int nPID___; // [esp+74h] [ebp-110h] BYREF
  unsigned __int8 byType; // [esp+7Bh] [ebp-109h] BYREF
  CPlayer *pPlayer________; // [esp+7Ch] [ebp-108h]
  unsigned __int8 byFlag___; // [esp+83h] [ebp-101h] BYREF
  int nPID__; // [esp+84h] [ebp-100h] BYREF
  CPlayer *pPlayer_______; // [esp+88h] [ebp-FCh]
  int nId_____________; // [esp+8Ch] [ebp-F8h] BYREF
  CPlayer *pPlayer______; // [esp+90h] [ebp-F4h]
  unsigned __int8 byCount__; // [esp+97h] [ebp-EDh] BYREF
  int nId____________; // [esp+98h] [ebp-ECh] BYREF
  char byFlag__; // [esp+9Fh] [ebp-E5h] BYREF
  CPlayer *pPlayer_____; // [esp+A0h] [ebp-E4h]
  unsigned __int8 byCount_; // [esp+A6h] [ebp-DEh] BYREF
  unsigned __int8 byFlag_; // [esp+A7h] [ebp-DDh] BYREF
  DWORD nId___________; // [esp+A8h] [ebp-DCh] BYREF
  CSocket *pSocket_____; // [esp+ACh] [ebp-D8h]
  unsigned __int8 byAns____; // [esp+B3h] [ebp-D1h] BYREF
  DWORD nId__________; // [esp+B4h] [ebp-D0h] BYREF
  CSocket *pSocket____; // [esp+B8h] [ebp-CCh]
  unsigned __int8 bySvrId; // [esp+BFh] [ebp-C5h] BYREF
  char *szNewName; // [esp+C0h] [ebp-C4h] BYREF
  unsigned __int8 byAns___; // [esp+C7h] [ebp-BDh] BYREF
  int szName; // [esp+C8h] [ebp-BCh] BYREF
  int nId; // [esp+CCh] [ebp-B8h] BYREF
  int nGID__; // [esp+D0h] [ebp-B4h] BYREF
  CGuild *pGuild__; // [esp+D4h] [ebp-B0h]
  unsigned __int8 byAns__; // [esp+DBh] [ebp-A9h] BYREF
  int nStandard; // [esp+DCh] [ebp-A8h] BYREF
  int nId_________; // [esp+E0h] [ebp-A4h] BYREF
  CPlayer *pPlayer____; // [esp+E4h] [ebp-A0h]
  int nGID; // [esp+E8h] [ebp-9Ch] BYREF
  int nPID; // [esp+ECh] [ebp-98h] BYREF
  int nAnswer__; // [esp+F0h] [ebp-94h]
  CGuild *pGuild_; // [esp+F4h] [ebp-90h]
  int nId________; // [esp+F8h] [ebp-8Ch] BYREF
  CPlayer *pPlayer___; // [esp+FCh] [ebp-88h]
  char *szGuildName; // [esp+100h] [ebp-84h] BYREF
  unsigned __int8 byAnswer; // [esp+107h] [ebp-7Dh] BYREF
  int nAnswer_; // [esp+108h] [ebp-7Ch]
  int nId_______; // [esp+10Ch] [ebp-78h] BYREF
  int nGID_; // [esp+110h] [ebp-74h] BYREF
  int nDate; // [esp+114h] [ebp-70h] BYREF
  CPlayer *pPlayer__; // [esp+118h] [ebp-6Ch]
  int nAnswer; // [esp+11Ch] [ebp-68h]
  CGuild *pGuild; // [esp+120h] [ebp-64h]
  int nId______; // [esp+124h] [ebp-60h] BYREF
  int nPID_; // [esp+128h] [ebp-5Ch] BYREF
  int nDate_; // [esp+12Ch] [ebp-58h] BYREF
  CPlayer *pPlayer_; // [esp+130h] [ebp-54h]
  int nId_____; // [esp+134h] [ebp-50h] BYREF
  unsigned __int8 byEventCode; // [esp+13Bh] [ebp-49h] BYREF
  CPlayer *pPlayer; // [esp+13Ch] [ebp-48h]
  DWORD nId____; // [esp+140h] [ebp-44h] BYREF
  CSocket *pSocket___; // [esp+144h] [ebp-40h]
  unsigned __int8 byFlag; // [esp+14Bh] [ebp-39h] BYREF
  DWORD nId___; // [esp+14Ch] [ebp-38h] BYREF
  CSocket *pSocket__; // [esp+150h] [ebp-34h]
  unsigned __int8 byAns_; // [esp+157h] [ebp-2Dh] BYREF
  DWORD nId__; // [esp+158h] [ebp-2Ch] BYREF
  CSocket *pSocket_; // [esp+15Ch] [ebp-28h]
  unsigned __int8 byAns; // [esp+163h] [ebp-21h] BYREF
  DWORD nId_; // [esp+164h] [ebp-20h] BYREF
  CSocket *pSocket; // [esp+168h] [ebp-1Ch]
  unsigned __int16 wSize; // [esp+16Ch] [ebp-18h] BYREF
  unsigned __int8 byCount; // [esp+171h] [ebp-13h] BYREF
  unsigned __int8 byCountry; // [esp+172h] [ebp-12h] BYREF
  unsigned __int8 byVersion; // [esp+173h] [ebp-11h] BYREF
  int nEvent; // [esp+174h] [ebp-10h] BYREF
  int nSystem; // [esp+178h] [ebp-Ch] BYREF
  char *packet; // [esp+17Ch] [ebp-8h]
  enum D2S_PROTOCOL nType; // [esp+180h] [ebp-4h]

  packet = dbpacket->data;
  nType = dbpacket->byType;
  switch ( nType )
  {
    case D2S_LOGIN:
      packet = (char *)ReadPacket(packet, "dbw", &nId_, &byCount, &wSize);
      pSocket = CServer::FindSocket(nId_);
      if ( pSocket )
      {
        CSocket::OnLogin(pSocket, packet, byCount, wSize);
        if ( CSocket::IsSBit(pSocket, 7) )
          CSocket::Write(pSocket, S2C_MESSAGE, "b", 136);
        CIOObject::Release(pSocket);
      }
      break;
    case D2S_VERSION:
      ReadPacket(packet, "bddddb", &byVersion, &unk_4DA7B0, &dword_4E10B0, &nSystem, &nEvent, &byCountry);
      if ( byVersion == 6 )
      {
        if ( byCountry == stru_4E35B4.m_nRef )
        {
          if ( dword_4E10B0 )
          {
            if ( nSystem == *(_DWORD *)dword_4E1174 && nEvent == dword_4E1178 )
            {
              dword_4DA7AC = 1;
              SetEvent(hObject);
              LOG_NORMAL("DB server version (Version:%d, IID:0x%x)", byVersion, dword_4E10B0);
              if ( (dword_4E1174[0] & 1) != 0 )
                CDBSocket::Write(S2D_PK_BULLETIN_REQUEST, &DefaultNullString);
            }
            else
            {
              LOG_ERR(
                "System or Event is diffrent with DBSvr. Sys(M:%d, D:%d), Ev(M:%d, D:%d)",
                *(_DWORD *)dword_4E1174,
                nSystem,
                dword_4E1178,
                nEvent);
              CIOSocket::WriteCallback((CIOSocket *)dword_4DA7B8);
            }
          }
          else
          {
            LOG_ERR("can't get Item ID");
            CIOSocket::WriteCallback((CIOSocket *)dword_4DA7B8);
          }
        }
        else
        {
          LOG_ERR("Country Code is different (DBSvr:%d, MainSvr:%d)", byCountry, stru_4E35B4.m_nRef);
          CIOSocket::WriteCallback((CIOSocket *)dword_4DA7B8);
        }
      }
      else
      {
        LOG_ERR("DB version is different (DBSvr:%d, MainSvr:%d)", byVersion, 6);
        CIOSocket::WriteCallback((CIOSocket *)dword_4DA7B8);
      }
      break;
    case D2S_ANS_NEWPLAYER:
      packet = (char *)ReadPacket(packet, "db", &nId__, &byAns);
      pSocket_ = CServer::FindSocket(nId__);
      if ( pSocket_ )
      {
        CSocket::OnNewPlayer(pSocket_, byAns, packet);
        CIOObject::Release(pSocket_);
      }
      break;
    case D2S_ANS_DELPLAYER:
      ReadPacket(packet, "db", &nId___, &byAns_);
      pSocket__ = CServer::FindSocket(nId___);
      if ( pSocket__ )
      {
        CSocket::OnDelPlayer(pSocket__, byAns_);
        CIOObject::Release(pSocket__);
      }
      break;
    case D2S_LOADPLAYER:
      packet = (char *)ReadPacket(packet, "db", &nId____, &byFlag);
      pSocket___ = CServer::FindSocket(nId____);
      if ( pSocket___ )
      {
        CSocket::OnLoadPlayer(pSocket___, byFlag, (int)packet);
        CIOObject::Release(pSocket___);
      }
      break;
    case D2S_EVENT:
      packet = (char *)ReadPacket(packet, "db", &nId_____, &byEventCode);
      pPlayer = (CPlayer *)CPlayer::FindPlayer(nId_____);
      if ( pPlayer )
      {
        CPlayer::OnProcessEvent(pPlayer, byEventCode, packet);
        CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
      }
      break;
    case D2S_GUILD_CREATE_SECEDECHECK:
      ReadPacket(packet, "ddd", &nId______, &nPID_, &nDate_);
      pPlayer_ = (CPlayer *)CPlayer::FindPlayer(nId______);
      if ( pPlayer_ )
      {
        nAnswer = 0;
        pGuild = (CGuild *)CPlayer::GetGuild(pPlayer_);
        if ( pGuild )
        {
          nAnswer = CGuild::CreateTrialSecedeAnswer(pGuild, pPlayer_, nPID_, nDate_);
          CIOObject::Release(pGuild, &pGuild->m_nTempRef);
        }
        if ( nAnswer )
          CPlayer::Write(pPlayer_, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer);
        CIOObject::Release(pPlayer_, &pPlayer_->m_nFindRef);
      }
      break;
    case D2S_GUILD_SECEDECHECK:
      ReadPacket(packet, "ddd", &nId_______, &nGID_, &nDate);
      pPlayer__ = (CPlayer *)CPlayer::FindPlayer(nId_______);
      if ( pPlayer__ )
      {
        nAnswer_ = CGuild::ConfluxSecedeAnswer(pPlayer__, nGID_, nDate);
        if ( nAnswer_ )
          CPlayer::Write(pPlayer__, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer_);
        CIOObject::Release(pPlayer__, &pPlayer__->m_nFindRef);
      }
      break;
    case D2S_GUILD_SAMENAMECHECK:
      ReadPacket(packet, "dbs", &nId________, &byAnswer, &szGuildName);
      pPlayer___ = (CPlayer *)CPlayer::FindPlayer(nId________);
      if ( pPlayer___ )
      {
        pGuild_ = (CGuild *)CPlayer::GetGuild(pPlayer___);
        if ( pGuild_ )
        {
          nAnswer__ = CGuild::CreateGuildNameAnswer(pGuild_, pPlayer___, byAnswer, szGuildName);
          CIOObject::Release(pGuild_, &pGuild_->m_nTempRef);
          if ( nAnswer__ )
            CPlayer::Write(pPlayer___, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer__);
        }
        else
        {
          LOG_ERR("D2S_GUILD_SAMENAMECHECK guild point error (pid:%d)", pPlayer___->m_nPID);
        }
        CIOObject::Release(pPlayer___, &pPlayer___->m_nFindRef);
      }
      break;
    case D2S_GUILD_DELPLAYER:
      ReadPacket(packet, "dd", &nPID, &nGID);
      CGuild::DelPlayer(nPID, nGID);
      break;
    case D2S_ANS_CHECKCOPY:
      ReadPacket(packet, "dbbss", &nId__________, &byAns___, &bySvrId, &szName, &szNewName);
      pSocket____ = CServer::FindSocket(nId__________);
      if ( pSocket____ )
      {
        CSocket::OnCheckCopy((CIOCriticalSection *)pSocket____, byAns___, bySvrId, szName, (int)szNewName);
        CIOObject::Release(pSocket____);
      }
      break;
    case D2S_ANS_REQUESTCOPY:
      CAuthSocket::Write(S2A_ANS_REQUESTCOPY, "m", packet, (char *)dbpacket + dbpacket->wSize - packet);
      break;
    case D2S_ANS_COPYPLAYER:
      ReadPacket(packet, "db", &nId___________, &byAns____);
      pSocket_____ = CServer::FindSocket(nId___________);
      if ( pSocket_____ )
      {
        CSocket::OnCopyPlayer((CIOCriticalSection *)pSocket_____, byAns____);
        CIOObject::Release(pSocket_____);
      }
      break;
    case D2S_PK_BULLETIN_LOAD:
      CPlayer::PKBulletinLoad(packet);
      break;
    case D2S_CASTLE_INIT:
      packet = (char *)ReadPacket(packet, "b", &byFlag_);
      CCastle::Load(byFlag_, (int)packet);
      break;
    case D2S_WAR_INIT:
      packet = (char *)ReadPacket(packet, "b", &byCount_);
      CWar::Load(byCount_, packet);
      break;
    case D2S_SHORTCUT:
      packet = (char *)ReadPacket(packet, "db", &nId____________, &byFlag__);
      pPlayer_____ = (CPlayer *)CPlayer::FindPlayer(nId____________);
      if ( pPlayer_____ )
      {
        if ( byFlag__ )
          CPlayer::Write(pPlayer_____, S2C_SHORTCUT, "bm", 1, packet, 40);
        else
          CPlayer::Write(pPlayer_____, S2C_SHORTCUT, "b", 0);
        CIOObject::Release(pPlayer_____, &pPlayer_____->m_nFindRef);
      }
      break;
    case D2S_GUILD_CHECKSTANDARD:
      packet = (char *)ReadPacket(packet, "d", &nId_________);
      pPlayer____ = (CPlayer *)CPlayer::FindPlayer(nId_________);
      if ( pPlayer____ )
      {
        CPlayer::Write(pPlayer____, S2C_GUILD, "bm", 28, packet, (char *)dbpacket + dbpacket->wSize - packet);
        CIOObject::Release(pPlayer____, &pPlayer____->m_nFindRef);
      }
      break;
    case D2S_GUILD_SETSTANDARD:
      ReadPacket(packet, "dbdd", &nId, &byAns__, &nGID__, &nStandard);
      pGuild__ = CGuild::FindGuild(nGID__);
      if ( pGuild__ )
      {
        CGuild::OnSetStandard(pGuild__, nId, byAns__, nGID__, nStandard);
        CIOObject::Release(pGuild__, &pGuild__->m_nTempRef);
      }
      break;
    case D2S_GETMYTELPT:
      packet = (char *)ReadPacket(packet, "db", &nId_____________, &byCount__);
      pPlayer______ = (CPlayer *)CPlayer::FindPlayer(nId_____________);
      if ( pPlayer______ )
      {
        if ( byCount__ )
          CPlayer::OnGetMyTelPt(pPlayer______, byCount__, (int)packet);
        CIOObject::Release(pPlayer______, &pPlayer______->m_nFindRef);
      }
      break;
    case D2S_SETMYTELPT:
      packet = (char *)ReadPacket(packet, "db", &nPID__, &byFlag___);
      pPlayer_______ = CPlayer::ScanPlayer(nPID__);
      if ( pPlayer_______ )
      {
        CPlayer::OnSetMyTelPt(pPlayer_______, byFlag___, packet);
        CIOObject::Release(pPlayer_______, &pPlayer_______->m_nFindRef);
      }
      break;
    case D2S_FRD:
      packet = (char *)ReadPacket(packet, "db", &nPID___, &byType);
      if ( (dword_4E1174[0] & 0x40) != 0 )
      {
        pPlayer________ = CPlayer::ScanPlayer(nPID___);
        if ( pPlayer________ )
        {
          CPlayer::FRDProcess(pPlayer________, byType, packet, (int)packet);
          CIOObject::Release(pPlayer________, &pPlayer________->m_nFindRef);
        }
      }
      break;
    case D2S_MAIL:
      packet = (char *)ReadPacket(packet, "db", &nPID____, &byType_);
      if ( (*(_WORD *)dword_4E1174 & 0x400) != 0 )
      {
        pPlayer_________ = CPlayer::ScanPlayer(nPID____);
        if ( pPlayer_________ )
        {
          CPlayer::MAILProcess(pPlayer_________, byType_, packet, (int)packet);
          CIOObject::Release(pPlayer_________, &pPlayer_________->m_nFindRef);
        }
        else if ( byType_ == 1 )
        {
          packet = (char *)ReadPacket(packet, "dbb", &nMID, &byMType, &bySRType);
          if ( !bySRType && byMType != 3 )
            CDBSocket::Write(S2D_MAIL, "dbddb", nMID, 1, nPID____, nMID, 6);
        }
        else if ( byType_ == 11 )
        {
          packet = (char *)ReadPacket(packet, "dd", &nMID_, &nIID);
          CDBSocket::Write(S2D_MAIL, "dbddbbddwbd", nMID_, 8, nPID____, nMID_, 1, 0, 0, 0, 0, 0, 0);
        }
      }
      break;
    case D2S_CHANGEPLAYERNAME:
      ReadPacket(packet, "dbs", &nId______________, &byAns_____, &szNewName_);
      pPlayer__________ = (CPlayer *)CPlayer::FindPlayer(nId______________);
      if ( pPlayer__________ )
      {
        CPlayer::OnChangePlayerName(pPlayer__________, byAns_____, szNewName_);
        CIOObject::Release(pPlayer__________, &pPlayer__________->m_nFindRef);
      }
      break;
    case D2S_CHANGEGUILDNAME:
      ReadPacket(packet, "dbs", &nId_______________, &byAns______, &szNewName__);
      pPlayer___________ = (CPlayer *)CPlayer::FindPlayer(nId_______________);
      if ( pPlayer___________ )
      {
        CPlayer::OnChangeGuildName(pPlayer___________, byAns______, szNewName__);
        CIOObject::Release(pPlayer___________, &pPlayer___________->m_nFindRef);
      }
      break;
    case D2S_EVENT_GET_FLAG:
      nPID_____ = 0;
      nNPC = 0;
      dwEvent = 0;
      ReadPacket(packet, "ddd", &nPID_____, &dwEvent, &nNPC);
      pPlayer____________ = CPlayer::ScanPlayer(nPID_____);
      if ( pPlayer____________ )
        CIOObject::Release(pPlayer____________, &pPlayer____________->m_nFindRef);
      break;
    case D2S_DELPLAYERINFO:
      packet = (char *)ReadPacket(packet, "dbw", &nId________________, &byCount___, &wSize_);
      pSocket______ = CServer::FindSocket(nId________________);
      if ( pSocket______ )
      {
        CSocket::Write(pSocket______, S2C_DELPLAYERINFO, "bm", byCount___, packet, wSize_);
        CIOObject::Release(pSocket______);
      }
      break;
    case D2S_RESTOREPLAYER:
      packet = (char *)ReadPacket(packet, "db", &nId_________________, &byRestoreResult);
      pSocket_______ = CServer::FindSocket(nId_________________);
      if ( pSocket_______ )
      {
        CSocket::Write(pSocket_______, S2C_RESTOREPLAYER, "b", byRestoreResult);
        if ( !byRestoreResult )
          CSocket::Write(pSocket_______, S2C_CLOSE, "b", 9);
        CIOObject::Release(pSocket_______);
      }
      break;
    default:
      LOG_ERR("invalid packet type at CDBSocket::Process Type(%d)", nType);
      break;
  }
}
// 40CD90: variables would overlap: lvar "nIID" ^8C.4(user-defined) and stkvar "nIID" ^8C.7(has user info)
// 4DA7AC: using guessed type int dword_4DA7AC;
// 4DA7B8: using guessed type int dword_4DA7B8[4];
// 4E1178: using guessed type int dword_4E1178;

//----- (0040DC60) --------------------------------------------------------
unsigned int __thiscall CSocket::IsSBit(CSocket *this, char bit)
{
  return this->m_bit & (1 << bit);
}

//----- (0040DC80) --------------------------------------------------------
void CDBSocket::Write(enum S2D_PROTOCOL nType, char *format, ...)
{
  CIOBuffer *v2; // [esp+8h] [ebp-8h]

  v2 = CIOBuffer::Alloc();
  v2->m_buffer[2] = nType;
  *(_WORD *)v2->m_buffer = (unsigned __int16)WritePacket(&v2->m_buffer[3], (char *)&format) - (_WORD)v2;
  v2->m_dwSize = *(unsigned __int16 *)v2->m_buffer;
  CIOSocket::Write((CIOSocket *)dword_4DA7B8, v2);
}
// 4DA7B8: using guessed type int dword_4DA7B8[4];

//----- (0040DCF0) --------------------------------------------------------
CDBPacket *__cdecl CMemoryPool<CDBPacket>::Alloc()
{
  CDBPacket *result; // eax
  CDBPacket *v1; // [esp+0h] [ebp-Ch]
  CDBPacket *v2; // [esp+4h] [ebp-8h]
  CDBPacket *v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&stru_4DA824.m_nRef);
  v3 = (CDBPacket *)stru_4DA824.__vftable;
  if ( stru_4DA824.__vftable )
  {
    stru_4DA824.__vftable = (CDBPacket_vtbl *)stru_4DA824.OnWaitCallback;
    CIOSpinLock::Leave((CIOSpinLock *)&stru_4DA824.m_nRef);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((CIOSpinLock *)&stru_4DA824.m_nRef);
    v2 = (CDBPacket *)operator new(0x14u);
    if ( v2 )
      v1 = CDBPacket::CDBPacket(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}

//----- (0040DD70) --------------------------------------------------------
void __cdecl CMemoryPool<CDBPacket>::Free(CDBPacket *packet)
{
  CIOSpinLock::Enter((CIOSpinLock *)&stru_4DA824.m_nRef);
  packet->m_pBuf = (CIOBuffer *)stru_4DA824.__vftable;
  stru_4DA824.__vftable = (CDBPacket_vtbl *)packet;
  CIOSpinLock::Leave((CIOSpinLock *)&stru_4DA824.m_nRef);
}

//----- (0040DDA0) --------------------------------------------------------
CDBPacket *__thiscall CDBPacket::CDBPacket(CDBPacket *this)
{
  CIOObject::CIOObject(this);
  this->__vftable = (CDBPacket_vtbl *)&off_4B4EE8;
  return this;
}
// 4B4EE8: using guessed type int (__stdcall *off_4B4EE8)(int);

//----- (0040DDC0) --------------------------------------------------------
CDBPacket *__thiscall CDBPacket::`scalar deleting destructor'(CDBPacket *this, char a2)
{
  CIOObject::~CIOObject(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040DDF0) --------------------------------------------------------
LONG __thiscall CDBPacket::~CDBPacket(CDBPacket *this)
{
  return sub_40DE00();
}

//----- (0040DE00) --------------------------------------------------------
LONG sub_40DE00()
{
  CDBPacket_vtbl *v1; // [esp+Ch] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&stru_4DA824.m_nRef);
  while ( 1 )
  {
    v1 = stru_4DA824.__vftable;
    if ( !stru_4DA824.__vftable )
      break;
    stru_4DA824.__vftable = (CDBPacket_vtbl *)stru_4DA824.OnWaitCallback;
    if ( v1 )
      (*(void (__thiscall **)(CDBPacket_vtbl *, int))v1->~CIOObject)(v1, 1);
  }
  return CIOSpinLock::Leave((CIOSpinLock *)&stru_4DA824.m_nRef);
}

//----- (0040DE70) --------------------------------------------------------
void __thiscall CFindPath::CFindPath(CFindPath *this)
{
  this->m_pOwner = 0;
  this->m_pMap = 0;
  this->m_pTopBestH = 0;
  this->m_pTopBestF = 0;
  this->m_pCurrent = &stru_4E0908;
  this->m_ptSPixel.y = -1;
  this->m_ptSPixel.x = -1;
  this->m_ptEPixel.y = -1;
  this->m_ptEPixel.x = -1;
  this->m_nPowRange = 0;
}

//----- (0040DEF0) --------------------------------------------------------
void __thiscall CFindPath::~CFindPath(CFindPath *this)
{
  CFindPath::FreeNode(this);
}

//----- (0040DF10) --------------------------------------------------------
int __thiscall CFindPath::FindPath(CFindPath *this, tagPOINT *ptSPixel, tagPOINT *ptEPixel)
{
  int v4; // ecx
  int v5; // edx
  int v6; // edx
  CFindPath::NODE *v7; // eax
  int v8; // ecx
  __int64 v9; // [esp-4h] [ebp-24h]
  __int64 v10; // [esp+0h] [ebp-20h]
  CFindPath *v11; // [esp+0h] [ebp-20h]
  CFindPath *v12; // [esp+0h] [ebp-20h]
  CFindPath *v13; // [esp+0h] [ebp-20h]
  int nNode; // [esp+4h] [ebp-1Ch]
  tagPOINT ptP; // [esp+8h] [ebp-18h] BYREF
  int nPowDist; // [esp+10h] [ebp-10h]
  CFindPath::NODE *pNode; // [esp+14h] [ebp-Ch]
  CFindPath::NODE *pBest; // [esp+18h] [ebp-8h]
  int v19; // [esp+1Ch] [ebp-4h]
  void *retaddr; // [esp+24h] [ebp+4h] BYREF

  HIDWORD(v9) = this;
  if ( ptSPixel->x == ptEPixel->x && ptSPixel->y == ptEPixel->y )
    return 0;
  LODWORD(v9) = 0x20000;
  if ( !CSMap::IsValidTile(this->m_pMap, ptEPixel, v9) )
    return 0;
  CFindPath::FreeNode(v11);
  v4 = ptSPixel->y;
  v11->m_ptSPixel.x = ptSPixel->x;
  v11->m_ptSPixel.y = v4;
  v5 = ptEPixel->y;
  v11->m_ptEPixel.x = ptEPixel->x;
  v11->m_ptEPixel.y = v5;
  pBest = CMemoryPool<CFindPath::NODE>::Alloc();
  pBest->pParent = 0;
  pBest->g = 0;
  pBest->h = CFindPath::CalcH((CFindPath *)&v11->m_ptSPixel, &v11->m_ptSPixel);
  pBest->f = pBest->h;
  pBest->nChild = 0;
  v6 = v12->m_ptSPixel.y;
  v7 = pBest;
  pBest->ptPixel.x = v12->m_ptSPixel.x;
  v7->ptPixel.y = v6;
  pBest->pNextBestH = 0;
  pBest->pNextBestF = (CFindPath::NODE *)-1;
  v12->m_pTopBestH = pBest;
  v12->m_pTopBestF = 0;
  pNode = pBest;
  v19 = 0;
  while ( 1 )
  {
    ++v19;
    v8 = pBest->ptPixel.y;
    ptP.x = pBest->ptPixel.x;
    ptP.y = v8;
    nPowDist = PowDistance((const tagPOINT *)&retaddr, &ptP);
    if ( nPowDist <= v13->m_nPowRange || nPowDist <= 2304 )
    {
      LODWORD(v10) = 0x20000;
      if ( CSMap::IsMoveTile(
             MEMORY[0x20004],
             MEMORY[0x20000],
             &ptP,
             MEMORY[0x2001C] - ptP.x,
             MEMORY[0x20020] - ptP.y,
             v10) )
      {
        break;
      }
    }
    if ( pBest->h <= pNode->h )
      pNode = pBest;
    if ( v19 > 50 )
      goto LABEL_16;
    CFindPath::LinkChild(v13, pBest);
    pBest = CFindPath::GetBestNode(v13);
    if ( !pBest )
      goto LABEL_14;
  }
  pNode = pBest;
LABEL_16:
  if ( !pNode )
    EBREAK();
  pBest = 0;
  while ( 1 )
  {
    nNode = (int)pNode->pParent;
    if ( !pNode->pParent )
      break;
    pNode->pParent = pBest;
    pBest = pNode;
    pNode = (CFindPath::NODE *)nNode;
  }
  if ( !pBest )
  {
LABEL_14:
    CFindPath::FreeNode(v13);
    return 0;
  }
  v13->m_pCurrent = pBest;
  return 1;
}
// 40DF55: variable 'v11' is possibly undefined
// 40DFC8: variable 'v12' is possibly undefined
// 40E03C: variable 'v13' is possibly undefined
// 40E073: variable 'v10' is possibly undefined

//----- (0040E130) --------------------------------------------------------
int __cdecl PowDistance(const tagPOINT *ptP1, const tagPOINT *ptP2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = ptP1->y - ptP2->y;
  return v3 * v3 + (ptP1->x - ptP2->x) * (ptP1->x - ptP2->x);
}

//----- (0040E170) --------------------------------------------------------
int __thiscall CFindPath::CalcH(CFindPath *this, tagPOINT *ptP)
{
  unsigned int v3; // [esp+0h] [ebp-10h]
  unsigned int dx_; // [esp+8h] [ebp-8h]
  unsigned int dy_; // [esp+Ch] [ebp-4h]

  dx_ = abs(this->m_ptEPixel.x - ptP->x);
  dy_ = abs(this->m_ptEPixel.y - ptP->y);
  if ( dx_ < dy_ )
    v3 = dy_ << 16;
  else
    v3 = dx_ << 16;
  return dy_ * dy_ + v3 + dx_ * dx_;
}

//----- (0040E1E0) --------------------------------------------------------
CFindPath::NODE *__thiscall CFindPath::GetBestNode(CFindPath *this)
{
  CFindPath::NODE *pNode; // [esp+4h] [ebp-4h]

  pNode = this->m_pTopBestF;
  if ( !pNode )
    return 0;
  this->m_pTopBestF = this->m_pTopBestF->pNextBestF;
  pNode->pNextBestF = (CFindPath::NODE *)-1;
  return pNode;
}

//----- (0040E220) --------------------------------------------------------
void __thiscall CFindPath::FreeNode(CFindPath *this)
{
  CFindPath::NODE *a1; // [esp+4h] [ebp-4h]

  while ( 1 )
  {
    a1 = this->m_pTopBestH;
    if ( !a1 )
      break;
    this->m_pTopBestH = this->m_pTopBestH->pNextBestH;
    CMemoryPool<CFindPath::NODE>::Free(a1);
  }
  this->m_pCurrent = &stru_4E0908;
}

//----- (0040E270) --------------------------------------------------------
void __thiscall CFindPath::LinkChild(CFindPath *this, CFindPath::NODE *pBest)
{
  CFindPath::LinkChild(this, pBest, 32, 0);
  CFindPath::LinkChild(this, pBest, 32, 32);
  CFindPath::LinkChild(this, pBest, 0, 32);
  CFindPath::LinkChild(this, pBest, -32, 32);
  CFindPath::LinkChild(this, pBest, -32, 0);
  CFindPath::LinkChild(this, pBest, -32, -32);
  CFindPath::LinkChild(this, pBest, 0, -32);
  CFindPath::LinkChild(this, pBest, 32, -32);
}

//----- (0040E300) --------------------------------------------------------
void __thiscall CFindPath::LinkChild(CFindPath *this, CFindPath::NODE *pBest, int dx, int dy)
{
  __int64 v4; // [esp-4h] [ebp-20h]
  CFindPath *v5; // [esp+4h] [ebp-18h]
  tagPOINT ptP; // [esp+8h] [ebp-14h] BYREF
  CFindPath::NODE *g; // [esp+10h] [ebp-Ch]
  unsigned int h; // [esp+14h] [ebp-8h]
  CFindPath *pOld; // [esp+18h] [ebp-4h]

  HIDWORD(v4) = this;
  ptP.x = dx + pBest->ptPixel.x;
  ptP.y = dy + pBest->ptPixel.y;
  h = CFindPath::CalcH(this, &ptP);
  if ( !h
    || (LODWORD(v4) = 0x20000,
        CSMap::IsMoveTile(*(CSMap **)(HIDWORD(v4) + 4), *(void **)HIDWORD(v4), &pBest->ptPixel, dx, dy, v4)) )
  {
    g = (CFindPath::NODE *)(pBest->g + 0x10000);
    pOld = (CFindPath *)CFindPath::CheckList((CFindPath *)h, &ptP, h);
    if ( pOld )
    {
      if ( pBest->nChild >= 8 )
        EBREAK();
      pBest->pChild[pBest->nChild++] = (CFindPath::NODE *)pOld;
      if ( g < pOld->m_pTopBestH )
      {
        pOld->m_pOwner = (CMonster *)pBest;
        pOld->m_pTopBestH = g;
        pOld->m_pMap = (CSMap *)((char *)g + h);
        if ( pOld[1].m_ptSPixel.y == -1 )
          CFindPath::Propagation((CFindPath::NODE *)pOld);
      }
    }
    else
    {
      v5 = (CFindPath *)CMemoryPool<CFindPath::NODE>::Alloc();
      v5->m_pCurrent = 0;
      v5->m_pOwner = (CMonster *)pBest;
      v5->m_pTopBestH = g;
      v5->m_pTopBestF = (CFindPath::NODE *)h;
      v5->m_pMap = (CSMap *)((char *)g + h);
      v5->m_ptSPixel = ptP;
      CFindPath::Insert(v5, (CFindPath::NODE *)v5);
      if ( pBest->nChild >= 8 )
        EBREAK();
      pBest->pChild[pBest->nChild++] = (CFindPath::NODE *)v5;
    }
  }
}

//----- (0040E480) --------------------------------------------------------
CFindPath::NODE *__thiscall CFindPath::CheckList(CFindPath *this, tagPOINT *ptP, unsigned int h)
{
  CFindPath::NODE *pNode; // [esp+4h] [ebp-4h]

  for ( pNode = this->m_pTopBestH; pNode && pNode->h <= h; pNode = pNode->pNextBestH )
  {
    if ( pNode->ptPixel.x == ptP->x && pNode->ptPixel.y == ptP->y )
      return pNode;
  }
  return 0;
}

//----- (0040E4E0) --------------------------------------------------------
void __thiscall CFindPath::Propagation(CFindPath::NODE *this)
{
  int i; // [esp+4h] [ebp-10h]
  unsigned int v2; // [esp+8h] [ebp-Ch]
  CFindPath::NODE *pStack; // [esp+Ch] [ebp-8h]
  CFindPath::NODE *pChild; // [esp+10h] [ebp-4h]
  CFindPath::NODE *thisa; // [esp+1Ch] [ebp+8h]

  pStack = 0;
  while ( 1 )
  {
    v2 = thisa->g + 0x10000;
    for ( i = 0; i < thisa->nChild; ++i )
    {
      pChild = thisa->pChild[i];
      if ( v2 < pChild->g )
      {
        pChild->g = v2;
        pChild->f = pChild->h + v2;
        pChild->pParent = thisa;
        if ( pChild->pNextBestF == (CFindPath::NODE *)-1 )
        {
          pChild->pNextBestF = pStack;
          pStack = pChild;
        }
      }
    }
    if ( !pStack )
      break;
    thisa = pStack;
    pStack = pStack->pNextBestF;
    thisa->pNextBestF = (CFindPath::NODE *)-1;
  }
}

//----- (0040E5A0) --------------------------------------------------------
void __thiscall CFindPath::Insert(CFindPath *this, CFindPath::NODE *pNew)
{
  CFindPath::NODE **ppNode; // [esp+4h] [ebp-10h]
  CFindPath::NODE **pNode; // [esp+4h] [ebp-10h]
  CFindPath::NODE *h; // [esp+8h] [ebp-Ch]
  CFindPath::NODE *f; // [esp+8h] [ebp-Ch]

  for ( ppNode = &this->m_pTopBestH; ; ppNode = &h->pNextBestH )
  {
    h = *ppNode;
    if ( !*ppNode || h->h >= pNew->h )
      break;
  }
  *ppNode = pNew;
  pNew->pNextBestH = h;
  for ( pNode = &this->m_pTopBestF; ; pNode = &f->pNextBestF )
  {
    f = *pNode;
    if ( !*pNode || f->f >= pNew->f )
      break;
  }
  *pNode = pNew;
  pNew->pNextBestF = f;
}

//----- (0040E650) --------------------------------------------------------
CFindPath::NODE *__cdecl CMemoryPool<CFindPath::NODE>::Alloc()
{
  CFindPath::NODE *result; // eax
  CFindPath::NODE *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+4h] [ebp-8h]
  CFindPath::NODE *v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4E0904]);
  v3 = (CFindPath::NODE *)stru_4E0900;
  if ( stru_4E0900 )
  {
    stru_4E0900 = *(_DWORD *)stru_4E0900;
    CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4E0904]);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4E0904]);
    v2 = operator new(0x44u);
    if ( v2 )
      v1 = (CFindPath::NODE *)_LocaleUpdate::GetLocaleT((_LocaleUpdate *)v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E6C0) --------------------------------------------------------
void __cdecl CMemoryPool<CFindPath::NODE>::Free(CFindPath::NODE *a1)
{
  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4E0904]);
  a1->pParent = (CFindPath::NODE *)stru_4E0900;
  stru_4E0900 = (int)a1;
  CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4E0904]);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E6F0) --------------------------------------------------------
CFindPath::NODE *__thiscall CFindPath::NODE::NODE(CFindPath::NODE *this, int x, int y)
{
  this->ptPixel.x = x;
  this->ptPixel.y = y;
  this->pParent = 0;
  this->h = 0;
  this->g = 0;
  this->f = 0;
  this->nChild = 0;
  return this;
}

//----- (0040E750) --------------------------------------------------------
CMemoryPool<CFindPath::NODE>::CPool *__thiscall CMemoryPool<CFindPath::NODE>::CPool::CPool(CMemoryPool<CFindPath::NODE>::CPool *this)
{
  std::_Container_base::_Container_base((std::_Container_base *)&this->m_lock);
  return this;
}

//----- (0040E770) --------------------------------------------------------
void __thiscall CMemoryPool<CFindPath::NODE>::CPool::~CPool(CMemoryPool<CFindPath::NODE>::CPool *this)
{
  CMemoryPool<CFindPath::NODE>::FreeAll();
}

//----- (0040E780) --------------------------------------------------------
void __cdecl CMemoryPool<CFindPath::NODE>::FreeAll()
{
  void *v0; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&MEMORY[0x4E0904]);
  while ( 1 )
  {
    v0 = (void *)stru_4E0900;
    if ( !stru_4E0900 )
      break;
    stru_4E0900 = *(_DWORD *)stru_4E0900;
    operator delete(v0);
  }
  CIOSpinLock::Leave((CIOSpinLock *)&MEMORY[0x4E0904]);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E7D0) --------------------------------------------------------
CGoto *__thiscall CGoto::CGoto(CGoto *this)
{
  CBase::CBase();
  this->__vftable = (CGoto_vtbl *)&off_4B4F00;
  this->m_szName = 0;
  memset(&this->m_goto, 0, sizeof(this->m_goto));
  return this;
}
// 4B4F00: using guessed type int (__stdcall *off_4B4F00)(int);

//----- (0040E810) --------------------------------------------------------
void *__thiscall CGoto::`scalar deleting destructor'(void *this, char a2)
{
  CGoto::~CGoto((CGoto *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040E840) --------------------------------------------------------
void __thiscall CGoto::~CGoto(CGoto *this)
{
  this->__vftable = (CGoto_vtbl *)&off_4B4F00;
  CBase::~CBase(this);
}
// 4B4F00: using guessed type int (__stdcall *off_4B4F00)(int);

//----- (0040E860) --------------------------------------------------------
int __cdecl CGoto::FindGoto(char *szName, GOTO *_goto)
{
  int v2; // eax
  GOTO *v4; // eax
  char v5[4]; // [esp+0h] [ebp-8h] BYREF
  std::_Tree<std::_Tmap_traits<char const *,GOTO,StrCmp,std::allocator<std::pair<char const * const,GOTO> >,0> >::iterator *v6; // [esp+4h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,GOTO *,StrCmp,std::allocator<std::pair<char const * const,GOTO *>>,0>>::find(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E094C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6,
    (const char *const *)&szName);
  v2 = sub_430C20(dword_4E094C, (int)v5);
  if ( (unsigned __int8)unknown_libname_8(v2) )
    return 0;
  v4 = (GOTO *)(sub_420250(&v6) + 4);
  *_goto = *v4;
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E094C: using guessed type int dword_4E094C[3];

//----- (0040E8D0) --------------------------------------------------------
int __thiscall CGoto::Set(CGoto *this, Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  int v4; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var v11; // [esp+4h] [ebp-14h] BYREF
  lisp::var v12; // [esp+8h] [ebp-10h] BYREF
  lisp::var v13; // [esp+Ch] [ebp-Ch] BYREF
  lisp::var v14; // [esp+10h] [ebp-8h] BYREF
  lisp::var result; // [esp+14h] [ebp-4h] BYREF

  if ( symbol == S_NULL )
  {
    v3 = lisp::var::pop(&value, &result);
    v4 = lisp::var::operator int(v3);
    this->m_szName = GetStr(v4);
    if ( !this->m_szName )
      return 1;
    v6 = lisp::var::pop(&value, &v14);
    this->m_goto.nMap = lisp::var::operator int(v6);
    v7 = lisp::var::pop(&value, &v13);
    this->m_goto.pt.x = lisp::var::operator int(v7);
    v8 = lisp::var::pop(&value, &v12);
    this->m_goto.pt.y = lisp::var::operator int(v8);
    v9 = lisp::var::pop(&value, &v11);
    this->m_goto.nZ = lisp::var::operator int(v9);
  }
  return 1;
}

//----- (0040E990) --------------------------------------------------------
int __thiscall CGoto::OnLoad(CGoto *this)
{
  std::pair<int,CPng::Region> *v2; // eax
  char v4[8]; // [esp+4h] [ebp-1Ch] BYREF
  char v5[20]; // [esp+Ch] [ebp-14h] BYREF

  if ( this->m_szName )
  {
    v2 = std::pair<int,CPng::Region>::pair<int,CPng::Region>(
           (std::pair<int,CPng::Region> *)v5,
           (const int *)&this->m_szName,
           (const CPng::Region *)&this->m_goto);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::insert(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E094C,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
      v2);
    this->m_szName = 0;
    memset(&this->m_goto, 0, sizeof(this->m_goto));
  }
  return 1;
}
// 4E094C: using guessed type int dword_4E094C[3];

//----- (0040EA00) --------------------------------------------------------
CPortal *__thiscall CPortal::CPortal(CPortal *this)
{
  CBase::CBase();
  this->__vftable = (CPortal_vtbl *)&off_4B4F48;
  memset(&this->m_portal, 0, sizeof(this->m_portal));
  this->m_dwCountry = 0;
  return this;
}
// 4B4F48: using guessed type int (__stdcall *off_4B4F48)(int);

//----- (0040EA40) --------------------------------------------------------
void *__thiscall CPortal::`scalar deleting destructor'(void *this, char a2)
{
  CPortal::~CPortal((CPortal *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040EA70) --------------------------------------------------------
void __thiscall CPortal::~CPortal(CPortal *this)
{
  this->__vftable = (CPortal_vtbl *)&off_4B4F48;
  CBase::~CBase(this);
}
// 4B4F48: using guessed type int (__stdcall *off_4B4F48)(int);

//----- (0040EA90) --------------------------------------------------------
int __thiscall CPortal::Set(CPortal *this, Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var v14; // [esp-4h] [ebp-38h] BYREF
  Symbol v15; // [esp+0h] [ebp-34h]
  CPortal *v16; // [esp+4h] [ebp-30h]
  lisp::var v17; // [esp+Ch] [ebp-28h] BYREF
  lisp::var v18; // [esp+10h] [ebp-24h] BYREF
  lisp::var v19; // [esp+14h] [ebp-20h] BYREF
  lisp::var v20; // [esp+18h] [ebp-1Ch] BYREF
  lisp::var v21; // [esp+1Ch] [ebp-18h] BYREF
  lisp::var v22; // [esp+20h] [ebp-14h] BYREF
  lisp::var v23; // [esp+24h] [ebp-10h] BYREF
  lisp::var v24; // [esp+28h] [ebp-Ch] BYREF
  lisp::var v25; // [esp+2Ch] [ebp-8h] BYREF
  lisp::var v26; // [esp+30h] [ebp-4h] BYREF

  v16 = this;
  v15 = symbol;
  if ( symbol == S_FROM )
  {
    v4 = lisp::var::pop(&value, &v25);
    v16->m_portal.nFromMap = lisp::var::operator int(v4);
    v5 = lisp::var::pop(&value, &v24);
    v16->m_portal.rtFrom.left = lisp::var::operator int(v5);
    v6 = lisp::var::pop(&value, &v23);
    v16->m_portal.rtFrom.top = lisp::var::operator int(v6);
    v7 = lisp::var::pop(&value, &v22);
    v16->m_portal.rtFrom.right = lisp::var::operator int(v7);
    v8 = lisp::var::pop(&value, &v21);
    v16->m_portal.rtFrom.bottom = lisp::var::operator int(v8);
  }
  else if ( v15 == S_TO )
  {
    v9 = lisp::var::pop(&value, &v20);
    v16->m_portal.nToMap = lisp::var::operator int(v9);
    v10 = lisp::var::pop(&value, &v19);
    v16->m_portal.ptPTo.x = lisp::var::operator int(v10);
    v11 = lisp::var::pop(&value, &v18);
    v16->m_portal.ptPTo.y = lisp::var::operator int(v11);
    v12 = lisp::var::pop(&value, &v17);
    v16->m_portal.nToZ = lisp::var::operator int(v12);
  }
  else
  {
    if ( v15 != S_COUNTRY )
    {
      v14.m_pObject = (lisp::_object *)this;
      lisp::var::var(&v14, &value);
      return CBase::Set(v16, symbol, v14);
    }
    while ( !(unsigned __int8)lisp::var::null(&value) )
    {
      v3 = lisp::var::pop(&value, &v26);
      v16->m_dwCountry |= 1 << lisp::var::operator int(v3);
    }
  }
  return 1;
}

//----- (0040EC10) --------------------------------------------------------
int __thiscall CPortal::OnLoad(CPortal *this)
{
  if ( (this->m_dwCountry & (1 << SLOBYTE(stru_4E35B4.m_nRef))) != 0 )
  {
    std::list<tagSUBPARTICLES *>::push_back(
      (std::list<tagPARTICLES *> *)dword_4E0958,
      (tagPARTICLES *const *)&this->m_portal);
    memset(&this->m_portal, 0, sizeof(this->m_portal));
    this->m_dwCountry = 0;
  }
  return 1;
}
// 4E0958: using guessed type int dword_4E0958[3];

//----- (0040EC70) --------------------------------------------------------
int __cdecl CPortal::OpenPortal(CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int v5; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)dword_4E0958,
    (std::list<tagPARTICLES *>::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0958, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    v5 = sub_40F040(&v6);
    if ( PtInRect((const RECT *)(v5 + 4), pPlayer->m_ptTile) )
    {
      CChar::AddGState(pPlayer, 4096);
      CPlayer::Teleport(pPlayer, *(_DWORD *)(v5 + 20), (const tagPOINT *)(v5 + 24), *(_DWORD *)(v5 + 32), 0);
      return 1;
    }
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v6, v4, 0);
  }
  return 0;
}
// 4E0958: using guessed type int dword_4E0958[3];

//----- (0040ED20) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::insert(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *result, const std::pair<char const * const,CItem *> *_Val)
{
  const char **v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  const char **v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  const char *v10; // [esp-4h] [ebp-3Ch]
  const char *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Wherenode; // [esp+30h] [ebp-8h]
  bool v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_478AB0((int *)this);
  _Wherenode = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *)*((_DWORD *)this + 1);
  v23 = 1;
  while ( !*(_BYTE *)sub_40F060((int)v21) )
  {
    _Wherenode = v21;
    v10 = *(const char **)sub_473500((int)v21);
    v3 = (const char **)sub_474590((int)_Val);
    v23 = StrCmp::operator()((StrCmp *)this, *v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)_Wherenode);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Insert(
             this,
             (std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::iterator *)v17,
             1,
             _Wherenode,
             _Val);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        result,
        v5,
        &v18);
      return result;
    }
    sub_40FCF0(v20);
  }
  v11 = *(const char **)sub_474590((int)_Val);
  v7 = unknown_libname_7(v20);
  v8 = (const char **)sub_473500(v7);
  if ( StrCmp::operator()((StrCmp *)this, *v8, v11) )
  {
    v16 = 1;
    v9 = std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Insert(
           this,
           (std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::iterator *)v15,
           v23,
           _Wherenode,
           _Val);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      result,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      result,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0040EEE0) --------------------------------------------------------
bool __thiscall StrCmp::operator()(StrCmp *this, const char *a, const char *b)
{
  return strcmp(a, b) < 0;
}

//----- (0040EF10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::find(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval)
{
  int v3; // eax
  int v4; // eax
  const char **v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::lower_bound(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12,
    _Keyval);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (const char **)sub_473500(v4),
                                     StrCmp::operator()((iless *)this, *_Keyval, *v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *(_DWORD *)result = *(_DWORD *)v7;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0040EFA0) --------------------------------------------------------
std::list<tagPARTICLES *>::iterator *__thiscall std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(std::list<tagPARTICLES *> *this, std::list<tagPARTICLES *>::iterator *result)
{
  int *v2; // eax

  v2 = (int *)sub_474590(*((_DWORD *)this + 1));
  sub_446700(result, *v2);
  return result;
}

//----- (0040EFD0) --------------------------------------------------------
CMemory ***__thiscall std::list<tagSUBPARTICLES *>::push_back(std::list<tagPARTICLES *> *this, tagPARTICLES *const *_Val)
{
  int *v2; // eax
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = (int *)sub_430C20(this, (int)v5);
  return std::list<tagSUBPARTICLES *>::_Insert(this, *v2, (int)_Val);
}

//----- (0040F000) --------------------------------------------------------
std::pair<int,CPng::Region> *__thiscall std::pair<int,CPng::Region>::pair<int,CPng::Region>(std::pair<int,CPng::Region> *this, const int *_Val1, const CPng::Region *_Val2)
{
  _DWORD *v3; // ecx

  *(_DWORD *)this = *_Val1;
  v3 = (_DWORD *)((char *)this + 4);
  *v3 = *(_DWORD *)_Val2;
  v3[1] = *((_DWORD *)_Val2 + 1);
  v3[2] = *((_DWORD *)_Val2 + 2);
  v3[3] = *((_DWORD *)_Val2 + 3);
  return this;
}

//----- (0040F040) --------------------------------------------------------
int __thiscall sub_40F040(void *this)
{
  return sub_475960((int *)this);
}

//----- (0040F060) --------------------------------------------------------
int __cdecl sub_40F060(int a1)
{
  return a1 + 33;
}

//----- (0040F070) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result)
{
  int *v2; // eax

  v2 = (int *)sub_418790(this);
  sub_446700(result, *v2);
  return result;
}

//----- (0040F0A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::lower_bound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval)
{
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v3; // eax

  v3 = std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::_Lbound(
         this,
         _Keyval);
  sub_446700(result, (int)v3);
  return result;
}

//----- (0040F0D0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Insert(std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> > *this, std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::iterator *result, bool _Addleft, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Wherenode, const std::pair<unsigned long const ,std::string > *_Val)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Parg; // [esp+60h] [ebp+10h]

  if ( sub_40FE70((int)this) - 1 <= *((_DWORD *)this + 2) )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = std::_Tree<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const,KMacro::CStore>>,0>>::_Buynode(
          this,
          *((std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node **)this
          + 1),
          _Wherenode,
          *((std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node **)this
          + 1),
          _Val,
          0);
  ++*((_DWORD *)this + 2);
  if ( _Wherenode == *((std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)this
                     + 1) )
  {
    v6 = (CMemory ***)sub_478AB0((int *)this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40((int *)this);
    *v8 = v44;
  }
  else if ( _Addleft )
  {
    v9 = (CMemory ***)sub_474590((int)_Wherenode);
    *v9 = v44;
    if ( _Wherenode == *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90((int)_Wherenode);
    *v11 = v44;
    if ( _Wherenode == *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_47EB40((int *)this) )
    {
      v12 = (CMemory ***)sub_47EB40((int *)this);
      *v12 = v44;
    }
  }
  v43 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *)v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)_tolower(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node **)sub_430F90(*v18);
      if ( !*(_BYTE *)_tolower((int)_Parg) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_446FF0((int)v43);
        std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(
          (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
          v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)_tolower(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)_tolower(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_410050(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node **)sub_474590(*v31);
      if ( *(_BYTE *)_tolower((int)_Parg) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_446FF0((int)v43);
          sub_410050(this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)_tolower(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)_tolower(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_446FF0(*v37);
        std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(
          (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
          *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)_tolower(*v19) = 1;
        *(_BYTE *)_tolower((int)_Parg) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)_tolower(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0((int *)this);
  *(_BYTE *)_tolower(*v39) = 1;
  sub_446700(result, (int)v44);
  return result;
}
// 40F108: variable 'v5' is possibly undefined

//----- (0040F510) --------------------------------------------------------
int __thiscall std::exception::_Raise(void *this)
{
  if ( dword_4E2F10 )
    dword_4E2F10(this);
  (*(void (__thiscall **)(void *))(*(_DWORD *)this + 8))(this);
  return _initp_misc_winxfltr();
}
// 4E2F10: using guessed type int (__cdecl *dword_4E2F10)(_DWORD);

//----- (0040F550) --------------------------------------------------------
void __thiscall std::length_error::length_error(std::length_error *this, const std::length_error *that)
{
  std::logic_error::logic_error(this, (const std::string *)that);
  this->__vftable = (std::length_error_vtbl *)&std::length_error::`vftable';
}
// 4D2718: using guessed type int (__stdcall *std::length_error::`vftable')(int);

//----- (0040F580) --------------------------------------------------------
std::logic_error *__thiscall std::logic_error::logic_error(std::logic_error *this, const std::string *_Message)
{
  std::locale::facet::facet((std::locale::facet *)this, (unsigned int)"unknown");
  this->__vftable = (std::logic_error_vtbl *)&off_4D270C;
  std::string::string((std::string *)&this->_m_doFree, _Message);
  return this;
}
// 40F5C0: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4D270C: using guessed type int (__stdcall *off_4D270C)(int);

//----- (0040F610) --------------------------------------------------------
std::locale::facet *__thiscall sub_40F610(std::locale::facet *this, char a2)
{
  std::locale::facet::~facet(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040F640) --------------------------------------------------------
int __thiscall std::locale::facet::~facet(_DWORD *this)
{
  int result; // eax

  result = (int)this;
  *this = &off_4B4FAC;
  return result;
}
// 4B4FAC: using guessed type int (__stdcall *off_4B4FAC)(int);

//----- (0040F660) --------------------------------------------------------
int __thiscall sub_40F660(int this)
{
  return std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_((void *)(this + 8));
}

//----- (0040F680) --------------------------------------------------------
std::logic_error *__thiscall sub_40F680(std::logic_error *this, char a2)
{
  std::logic_error::~logic_error(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040F6B0) --------------------------------------------------------
void __thiscall std::logic_error::~logic_error(std::logic_error *this)
{
  this->__vftable = (std::logic_error_vtbl *)&off_4D270C;
  sub_40F780(&this->_m_doFree);
  std::locale::facet::~facet(this);
}
// 4D270C: using guessed type int (__stdcall *off_4D270C)(int);

//----- (0040F6E0) --------------------------------------------------------
void __thiscall sub_40F6E0(std::logic_error *this)
{
  *(_DWORD *)this = &std::length_error::`vftable';
  std::logic_error::~logic_error(this);
}
// 4D2718: using guessed type int (__stdcall *std::length_error::`vftable')(int);

//----- (0040F700) --------------------------------------------------------
std::logic_error *__thiscall sub_40F700(std::logic_error *this, char a2)
{
  sub_40F6E0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040F730) --------------------------------------------------------
std::string *__thiscall std::string::string(std::string *this, const std::string *_Right)
{
  char v3; // [esp-4h] [ebp-Ch]

  v3 = (char)this;
  std::_Init_locks::operator=(_Right);
  sub_44F7C0(this, v3);
  std::string::_Tidy((int)this, 0, 0);
  std::string::assign(this, _Right, 0, 0xFFFFFFFF);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (0040F780) --------------------------------------------------------
void __thiscall sub_40F780(void *this)
{
  std::string::_Tidy((int)this, 1, 0);
}

//----- (0040F7A0) --------------------------------------------------------
std::string *__thiscall std::string::assign(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count)
{
  int v4; // eax
  void *v5; // eax
  void *v7; // [esp-8h] [ebp-10h]
  size_t v8; // [esp-4h] [ebp-Ch]
  size_t _Newsize; // [esp+4h] [ebp-4h]

  if ( unknown_libname_4(_Right) < _Roff )
    std::_String_base::_Xran(this);
  _Newsize = unknown_libname_4(_Right) - _Roff;
  if ( _Count < _Newsize )
    _Newsize = _Count;
  if ( this == _Right )
  {
    std::string::erase(this, _Newsize + _Roff, Count);
    std::string::erase(this, 0, _Roff);
  }
  else if ( std::string::_Grow(this, _Newsize, 0) )
  {
    v4 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(_Right, _Newsize);
    v5 = (void *)std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this, _Roff + v4);
    std::char_traits<char>::copy(v5, v7, v8);
    std::string::_Eos(this, _Newsize);
  }
  return this;
}
// 40F835: variable 'v7' is possibly undefined
// 40F835: variable 'v8' is possibly undefined
// 4012F0: using guessed type int __thiscall unknown_libname_1(_DWORD, _DWORD);
// 40F880: using guessed type int __thiscall unknown_libname_4(_DWORD);

//----- (0040F8A0) --------------------------------------------------------
void __thiscall std::string::_Tidy(int this, char a2, size_t Size)
{
  void *v4; // [esp+4h] [ebp-4h]

  if ( a2 && *(_DWORD *)(this + 24) >= 0x10u )
  {
    v4 = *(void **)(this + 4);
    if ( Size )
      std::char_traits<char>::copy((void *)(this + 4), v4, Size);
    sub_4338F0(v4, *(_DWORD *)(this + 24) + 1);
  }
  *(_DWORD *)(this + 24) = 15;
  std::string::_Eos((std::string *)this, Size);
}

//----- (0040F920) --------------------------------------------------------
std::string *__thiscall std::string::erase(std::string *this, unsigned int _Off, unsigned int _Count)
{
  int v3; // eax
  int v4; // eax
  void *v6; // [esp-8h] [ebp-10h]
  size_t v7; // [esp-4h] [ebp-Ch]

  if ( *((_DWORD *)this + 5) < _Off )
    std::_String_base::_Xran(this);
  if ( *((_DWORD *)this + 5) - _Off < _Count )
    _Count = *((_DWORD *)this + 5) - _Off;
  if ( _Count )
  {
    v3 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(
           this,
           *((_DWORD *)this + 5) - _Off - _Count);
    v4 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this, _Count + _Off + v3);
    sub_40F9B0((void *)(_Off + v4), v6, v7);
    std::string::_Eos(this, *((_DWORD *)this + 5) - _Count);
  }
  return this;
}
// 40F984: variable 'v6' is possibly undefined
// 40F984: variable 'v7' is possibly undefined
// 4012F0: using guessed type int __thiscall unknown_libname_1(_DWORD, _DWORD);

//----- (0040F9B0) --------------------------------------------------------
void *__cdecl sub_40F9B0(void *a1, void *a2, size_t a3)
{
  return memcpy_0(a1, a2, a3);
}

//----- (0040F9D0) --------------------------------------------------------
int __thiscall std::string::_Eos(std::string *this, unsigned int _Newsize)
{
  _DWORD *v2; // eax
  char v4; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  this->_Mysize = _Newsize;
  v2 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this);
  return std::char_traits<char>::assign((char *)v2 + _Newsize, &v4);
}
// 40FA10: using guessed type _DWORD __cdecl std::char_traits<char>::assign(_DWORD, _DWORD);

//----- (0040FA20) --------------------------------------------------------
BOOL __thiscall std::string::_Grow(std::string *this, unsigned int _Newsize, bool _Trim)
{
  unsigned int Size; // [esp+0h] [ebp-8h]

  if ( unknown_libname_25(this) < _Newsize )
    sub_49F289();
  if ( this->_Myres >= _Newsize )
  {
    if ( _Trim && _Newsize < 0x10 )
    {
      if ( _Newsize >= this->_Mysize )
        Size = this->_Mysize;
      else
        Size = _Newsize;
      std::string::_Tidy((int)this, 1, Size);
    }
    else if ( !_Newsize )
    {
      std::string::_Eos(this, 0);
    }
  }
  else
  {
    std::string::_Copy(this, _Newsize, this->_Mysize);
  }
  return _Newsize != 0;
}
// 40FAC0: using guessed type int __thiscall unknown_libname_25(_DWORD);

//----- (0040FB00) --------------------------------------------------------
int __thiscall std::string::_Copy(std::string *this, unsigned int _Newsize, unsigned int _Oldlen)
{
  void *v3; // eax
  size_t v5; // [esp-4h] [ebp-10h]
  unsigned int v7; // [esp+4h] [ebp-8h]
  CMemory **v8; // [esp+8h] [ebp-4h]

  v7 = _Newsize | 0xF;
  if ( unknown_libname_25(this) >= (_Newsize | 0xF) )
  {
    if ( v7 / 3 < this->_Myres >> 1 && this->_Myres <= unknown_libname_25(this) - (this->_Myres >> 1) )
      v7 = this->_Myres + (this->_Myres >> 1);
  }
  else
  {
    v7 = _Newsize;
  }
  v8 = sub_40FC00(v7 + 1);
  if ( _Oldlen )
  {
    v3 = (void *)std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this, _Oldlen);
    std::char_traits<char>::copy(v8, v3, v5);
  }
  std::string::_Tidy((int)this, 1, 0);
  this->_Bx._Ptr = (char *)v8;
  this->_Myres = v7;
  return std::string::_Eos(this, _Oldlen);
}
// 40FBBF: variable 'v5' is possibly undefined
// 4012F0: using guessed type int __thiscall unknown_libname_1(_DWORD, _DWORD);
// 40FAC0: using guessed type int __thiscall unknown_libname_25(_DWORD);

//----- (0040FC00) --------------------------------------------------------
CMemory **__stdcall sub_40FC00(size_t a1)
{
  return sub_40FC50(a1);
}

//----- (0040FC50) --------------------------------------------------------
CMemory **__cdecl sub_40FC50(size_t a1)
{
  return operator new(a1);
}

//----- (0040FC70) --------------------------------------------------------
CMemory ***__thiscall std::list<tagSUBPARTICLES *>::_Insert(std::list<tagPARTICLES *> *this, int a2, int a3)
{
  int *v3; // eax
  int *v4; // eax
  CMemory ***result; // eax
  int v6; // [esp-4h] [ebp-10h]
  int v8; // [esp+4h] [ebp-8h]
  CMemory **v9; // [esp+8h] [ebp-4h]

  v8 = unknown_libname_7(&a2);
  v6 = a3;
  v3 = (int *)sub_446FF0(v8);
  v9 = sub_410210(v8, *v3, v6);
  std::list<tagSUBPARTICLES *>::_Incsize(this, 1u);
  *(_DWORD *)sub_446FF0(v8) = v9;
  v4 = (int *)sub_446FF0((int)v9);
  result = (CMemory ***)sub_474590(*v4);
  *result = v9;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0040FCF0) --------------------------------------------------------
void *__thiscall sub_40FCF0(void *this)
{
  sub_410310((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *)this);
  return this;
}

//----- (0040FD10) --------------------------------------------------------
std::vector<IPAddrMask> *__thiscall std::string::string(std::vector<IPAddrMask> *this, char *Str)
{
  std::vector<IPAddrMask> *v3; // [esp-4h] [ebp-Ch] BYREF
  std::vector<IPAddrMask> *v4; // [esp+0h] [ebp-8h]

  v4 = this;
  v3 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v3);
  sub_44F7C0(v4, (char)v3);
  std::string::_Tidy((int)v4, 0, 0);
  std::vector<IPAddrMask>::capacity(v4, Str);
  return v4;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0040FD50) --------------------------------------------------------
std::string *__thiscall std::vector<IPAddrMask>::capacity(std::vector<IPAddrMask> *this, char *a2)
{
  size_t v2; // eax

  v2 = std::char_traits<char>::length(a2);
  return std::string::assign((std::string *)this, a2, v2);
}

//----- (0040FDA0) --------------------------------------------------------
std::string *__thiscall std::string::assign(std::string *this, void *Src, size_t Size)
{
  int v3; // eax
  std::string *result; // eax
  void *v5; // eax
  void *v6; // [esp-8h] [ebp-Ch]
  unsigned int v7; // [esp-4h] [ebp-8h]

  if ( std::string::_Inside(this, (const char *)Src) )
  {
    v3 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this, Size);
    result = std::string::assign(this, this, (unsigned int)Src - v3, v7);
  }
  else
  {
    if ( std::string::_Grow(this, Size, 0) )
    {
      v5 = (void *)std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this, Src);
      std::char_traits<char>::copy(v5, v6, Size);
      std::string::_Eos(this, Size);
    }
    result = this;
  }
  return result;
}
// 40FDD3: variable 'v7' is possibly undefined
// 40FE00: variable 'v6' is possibly undefined
// 4012F0: using guessed type int __thiscall unknown_libname_1(_DWORD, _DWORD);

//----- (0040FE20) --------------------------------------------------------
bool __thiscall std::string::_Inside(std::string *this, const char *_Ptr)
{
  int v2; // eax
  bool result; // al
  int v4; // [esp+0h] [ebp-4h]
  int v5; // [esp+0h] [ebp-4h]

  result = 0;
  if ( (unsigned int)_Ptr >= std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this, this) )
  {
    v2 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(v4, v4);
    if ( *(_DWORD *)(v5 + 20) + v2 > (unsigned int)_Ptr )
      result = 1;
  }
  return result;
}
// 40FE37: variable 'v4' is possibly undefined
// 40FE3F: variable 'v5' is possibly undefined
// 4012F0: using guessed type int __thiscall unknown_libname_1(_DWORD, _DWORD);

//----- (0040FE70) --------------------------------------------------------
unsigned int __thiscall sub_40FE70(int this)
{
  return std::allocator<KMiniMapSystem::CMinimapTile>::max_size((std::allocator<OVERLAY_CONTAINER> *)(this + 3));
}

//----- (0040FE90) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const char *const *_Keyval)
{
  const char **v2; // eax
  const char *v4; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v6 = *(_DWORD *)sub_478AB0((int *)this);
  v7 = *((_DWORD *)this + 1);
  while ( !*(_BYTE *)sub_40F060(v6) )
  {
    v4 = *_Keyval;
    v2 = (const char **)sub_473500(v6);
    if ( StrCmp::operator()((iless *)this, *v2, v4) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)sub_474590(v6);
    }
  }
  return (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)v7;
}

//----- (0040FF20) --------------------------------------------------------
int *__thiscall std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *_Wherenode)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90((int)_Wherenode);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90((int)_Wherenode) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_40F060(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = _Wherenode;
  }
  v5 = (_DWORD *)sub_446FF0((int)_Wherenode);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( _Wherenode == *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0((int)_Wherenode);
    if ( _Wherenode == *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0((int)_Wherenode);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0((int)_Wherenode);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = _Wherenode;
  result = (int *)sub_446FF0((int)_Wherenode);
  *result = v11;
  return result;
}

//----- (00410050) --------------------------------------------------------
int *__thiscall sub_410050(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_40F060(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00410180) --------------------------------------------------------
CMemory **__thiscall std::_Tree<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const,KMacro::CStore>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CStore,std::less<int>,std::allocator<std::pair<int const ,KMacro::CStore> >,0> >::_Node *_Rarg, const std::pair<int const ,KMacro::CStore> *_Val, char _Carg)
{
  std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *v7; // [esp+8h] [ebp-8h]
  CMemory **v8; // [esp+Ch] [ebp-4h]

  v8 = sub_410360(1);
  v7 = (std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *)operator new(0x24u, v8);
  if ( v7 )
    std::_Tree_nod<std::_Tmap_traits<int,KMacro::CodeInfo,std::less<int>,std::allocator<std::pair<int const,KMacro::CodeInfo>>,0>>::_Node::_Node(
      v7,
      _Larg,
      _Parg,
      _Rarg,
      _Val,
      _Carg);
  return v8;
}

//----- (00410210) --------------------------------------------------------
CMemory **__stdcall sub_410210(int a1, int a2, int a3)
{
  std::allocator<PORTAL> *v4; // [esp+8h] [ebp-8h]
  CMemory **v5; // [esp+Ch] [ebp-4h]

  v5 = sub_4102F0(1);
  v4 = (std::allocator<PORTAL> *)operator new(0x2Cu, v5);
  if ( v4 )
    std::allocator<std::pair<int const,STALLITEMINFO>>::max_size(v4, a1, a2, (const void *)a3);
  return v5;
}

//----- (00410280) --------------------------------------------------------
std::list<tagPARTICLES *> *__thiscall std::list<tagSUBPARTICLES *>::_Incsize(std::list<tagPARTICLES *> *this, unsigned int _Count)
{
  void *v2; // eax
  std::list<tagPARTICLES *> *result; // eax
  std::length_error that; // [esp+4h] [ebp-40h] BYREF

  if ( sub_410380((int)this) - *((_DWORD *)this + 2) < _Count )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "list<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v2);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  result = this;
  *((_DWORD *)this + 2) += _Count;
  return result;
}
// 4102B7: variable 'v2' is possibly undefined

//----- (004102F0) --------------------------------------------------------
CMemory **__stdcall sub_4102F0(int a1)
{
  return sub_410560(a1);
}

//----- (00410310) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_410310(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::const_iterator::_Dec(this);
  return this;
}

//----- (00410330) --------------------------------------------------------
unsigned int __thiscall std::allocator<KMiniMapSystem::CMinimapTile>::max_size(std::allocator<OVERLAY_CONTAINER> *this)
{
  return 214748364;
}

//----- (00410360) --------------------------------------------------------
CMemory **__stdcall sub_410360(int a1)
{
  return sub_410580(a1);
}

//----- (00410380) --------------------------------------------------------
unsigned int __thiscall sub_410380(int this)
{
  return std::allocator<LayerInfo>::max_size((std::allocator<KGuildSystem::CGuildMember> *)(this + 2));
}

//----- (004103A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::const_iterator::_Dec(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_40F060(*(_DWORD *)this) )
  {
    result = *(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator **)sub_430F90(*(_DWORD *)this);
    *(_DWORD *)this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*(_DWORD *)this);
    if ( *(_BYTE *)sub_40F060(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*(_DWORD *)this);
        if ( *(_BYTE *)sub_40F060(v5) || *(_DWORD *)this != *(_DWORD *)sub_474590(v5) )
          break;
        *(_DWORD *)this = v5;
      }
      result = (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *)*(char *)sub_40F060(v5);
      if ( !result )
        *(_DWORD *)this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*(_DWORD *)this);
      result = std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(*v3);
      *(_DWORD *)this = result;
    }
  }
  return result;
}

//----- (00410480) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<int,KMacro::CodeInfo,std::less<int>,std::allocator<std::pair<int const,KMacro::CodeInfo>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CPng::Region,std::less<int>,std::allocator<std::pair<int const ,CPng::Region> >,0> >::_Node *_Rarg, const std::pair<int const ,CPng::Region> *_Val, char _Carg)
{
  _DWORD *v6; // ecx

  *(_DWORD *)this = _Larg;
  *((_DWORD *)this + 1) = _Parg;
  *((_DWORD *)this + 2) = _Rarg;
  v6 = (_DWORD *)((char *)this + 12);
  *v6 = *(_DWORD *)_Val;
  v6[1] = *((_DWORD *)_Val + 1);
  v6[2] = *((_DWORD *)_Val + 2);
  v6[3] = *((_DWORD *)_Val + 3);
  v6[4] = *((_DWORD *)_Val + 4);
  *((_BYTE *)this + 32) = _Carg;
  *((_BYTE *)this + 33) = 0;
  return this;
}

//----- (004104E0) --------------------------------------------------------
std::allocator<PORTAL> *__thiscall std::allocator<std::pair<int const,STALLITEMINFO>>::max_size(std::allocator<PORTAL> *this, int a2, int a3, const void *a4)
{
  *(_DWORD *)this = a2;
  *((_DWORD *)this + 1) = a3;
  qmemcpy((char *)this + 8, a4, 0x24u);
  return this;
}

//----- (00410520) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *__cdecl std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_40F060(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::iterator *)a1;
}

//----- (00410560) --------------------------------------------------------
CMemory **__cdecl sub_410560(int a1)
{
  return operator new(44 * a1);
}

//----- (00410580) --------------------------------------------------------
CMemory **__cdecl sub_410580(int a1)
{
  return operator new(36 * a1);
}

//----- (004105A0) --------------------------------------------------------
std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *__thiscall std::map<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>>::map<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>>(std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *this)
{
  const std::allocator<std::pair<char const * const,CItem *> > *v1; // eax
  iless v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>(
    this,
    &v4,
    v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004105D0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const iless *_Parg, const std::allocator<std::pair<char const * const,CItem *> > *_Al)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(_Al);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)_Parg,
    v4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Init(this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (00410610) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Init(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *result; // eax

  *((_DWORD *)this + 1) = std::_Tree<std::_Tmap_traits<std::string,KMacro::CSkill *,std::less<std::string>,std::allocator<std::pair<std::string const,KMacro::CSkill *>>,0>>::_Buynode(this);
  *(_BYTE *)sub_40F060(*((_DWORD *)this + 1)) = 1;
  *(_DWORD *)sub_478AB0((int *)this) = *((_DWORD *)this + 1);
  *(_DWORD *)sub_418790(this) = *((_DWORD *)this + 1);
  *(_DWORD *)sub_47EB40((int *)this) = *((_DWORD *)this + 1);
  result = this;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00410680) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<std::string,KMacro::CSkill *,std::less<std::string>,std::allocator<std::pair<std::string const,KMacro::CSkill *>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> > *this)
{
  void *v1; // eax
  void *v2; // eax
  void *v3; // eax
  int v5; // [esp+4h] [ebp-14h] BYREF
  int v6; // [esp+8h] [ebp-10h] BYREF
  int v7; // [esp+Ch] [ebp-Ch] BYREF
  int v8; // [esp+10h] [ebp-8h]
  int v9; // [esp+14h] [ebp-4h]

  v8 = (int)sub_410360(1);
  v9 = 0;
  v7 = 0;
  v1 = (void *)sub_474590(v8);
  sub_42F9B0(v1, (int)&v7);
  ++v9;
  v6 = 0;
  v2 = (void *)sub_446FF0(v8);
  sub_42F9B0(v2, (int)&v6);
  ++v9;
  v5 = 0;
  v3 = (void *)sub_430F90(v8);
  sub_42F9B0(v3, (int)&v5);
  *(_BYTE *)_tolower(v8) = 1;
  *(_BYTE *)sub_40F060(v8) = 0;
  return (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *)v8;
}

//----- (004107A0) --------------------------------------------------------
std::list<tagPARTICLES *> *__thiscall std::list<tagSUBPARTICLES *>::list<tagSUBPARTICLES *>(std::list<tagPARTICLES *> *this)
{
  std::_List_nod<tagPARTICLES *>::_Node *v1; // eax
  std::list<tagPARTICLES *> *v3; // [esp-4h] [ebp-Ch] BYREF
  std::list<tagPARTICLES *> *v4; // [esp+0h] [ebp-8h]

  v4 = this;
  v3 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v3);
  std::_List_val<std::pair<int const,IDirect3DTexture9 *>>::_List_val<std::pair<int const,IDirect3DTexture9 *>>(
    v4,
    (char)v3);
  v1 = std::list<tagPARTICLES *>::_Buynode(v4);
  *((_DWORD *)v4 + 1) = v1;
  *((_DWORD *)v4 + 2) = 0;
  return v4;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004107E0) --------------------------------------------------------
std::_List_nod<tagPARTICLES *>::_Node *__thiscall std::list<tagPARTICLES *>::_Buynode(std::list<tagPARTICLES *> *this)
{
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-8h] BYREF
  int v5; // [esp+8h] [ebp-4h]

  v4 = (int)sub_4102F0(1);
  v5 = 0;
  v1 = (void *)sub_474590(v4);
  sub_42F9B0(v1, (int)&v4);
  ++v5;
  v2 = (void *)sub_446FF0(v4);
  sub_42F9B0(v2, (int)&v4);
  return (std::_List_nod<tagPARTICLES *>::_Node *)v4;
}

//----- (00410880) --------------------------------------------------------
int __thiscall sub_410880(void *this)
{
  return sub_4108A0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (004108A0) --------------------------------------------------------
int __thiscall sub_4108A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  return std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tidy(this);
}

//----- (004108C0) --------------------------------------------------------
int __thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tidy(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6._Myptr = *(CIOSocket::CIOTimer **)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::erase(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00410970) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::erase(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, std::vector<CIOSocket::CIOTimer>::const_iterator a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::clear(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              &a4) )
    {
      v7 = (int *)std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(
                    (std::vector<std::string>::iterator *)&a3,
                    (std::vector<std::string>::iterator *)v10,
                    0);
      std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::erase(
        this,
        v9,
        *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00410A10) --------------------------------------------------------
_DWORD *__thiscall std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::erase(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  unsigned int *v7; // eax
  _DWORD *v8; // eax
  int *v9; // eax
  _DWORD *v10; // eax
  int *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  int *v14; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v15; // eax
  _DWORD *v16; // esi
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v17; // eax
  unsigned int *v18; // eax
  int *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v22; // eax
  _DWORD *v23; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v24; // eax
  int *v25; // eax
  _DWORD *v26; // eax
  int *v27; // eax
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  unsigned int v48; // [esp+4h] [ebp-5Ch]
  unsigned int v49; // [esp+8h] [ebp-58h]
  std::string v51; // [esp+10h] [ebp-50h] BYREF
  std::logic_error v52; // [esp+2Ch] [ebp-34h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *v53; // [esp+54h] [ebp-Ch]
  int v54; // [esp+58h] [ebp-8h]
  int v55; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_40F060(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)&v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v52, &v51);
    std::exception::_Raise(v4);
    sub_4111D0(&v52);
    sub_40F780(&v51);
  }
  v55 = unknown_libname_7(&a3);
  sub_411370(&a3);
  v53 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *)v55;
  v5 = (int *)sub_474590(v55);
  if ( *(_BYTE *)sub_40F060(*v5) )
  {
    v54 = *(_DWORD *)sub_430F90((int)v53);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v53);
    if ( *(_BYTE *)sub_40F060(*v6) )
    {
      v54 = *(_DWORD *)sub_474590((int)v53);
    }
    else
    {
      v53 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *)unknown_libname_7(&a3);
      v54 = *(_DWORD *)sub_430F90((int)v53);
    }
  }
  if ( v53 == (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *)v55 )
  {
    v52._Str._Myres = *(_DWORD *)sub_446FF0(v55);
    if ( !*(_BYTE *)sub_40F060(v54) )
    {
      v7 = (unsigned int *)sub_446FF0(v54);
      *v7 = v52._Str._Myres;
    }
    v8 = (_DWORD *)sub_478AB0(this);
    if ( *v8 == v55 )
    {
      v9 = (int *)sub_478AB0(this);
      *v9 = v54;
    }
    else
    {
      v10 = (_DWORD *)sub_474590(v52._Str._Myres);
      if ( *v10 == v55 )
        v11 = (int *)sub_474590(v52._Str._Myres);
      else
        v11 = (int *)sub_430F90(v52._Str._Myres);
      *v11 = v54;
    }
    v12 = (_DWORD *)sub_418790(this);
    if ( *v12 == v55 )
    {
      if ( *(_BYTE *)sub_40F060(v54) )
        v49 = v52._Str._Myres;
      else
        v49 = sub_411330(v54);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (_DWORD *)sub_47EB40(this);
    if ( *v13 == v55 )
    {
      if ( *(_BYTE *)sub_40F060(v54) )
        v48 = v52._Str._Myres;
      else
        v48 = (unsigned int)std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(v54);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590(v55);
    v15 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_446FF0(*v14);
    *v15 = v53;
    v16 = (_DWORD *)sub_474590(v55);
    *(_DWORD *)sub_474590((int)v53) = *v16;
    v17 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_430F90(v55);
    if ( v53 == *v17 )
    {
      v52._Str._Myres = (unsigned int)v53;
    }
    else
    {
      v52._Str._Myres = *(_DWORD *)sub_446FF0((int)v53);
      if ( !*(_BYTE *)sub_40F060(v54) )
      {
        v18 = (unsigned int *)sub_446FF0(v54);
        *v18 = v52._Str._Myres;
      }
      v19 = (int *)sub_474590(v52._Str._Myres);
      *v19 = v54;
      v20 = (_DWORD *)sub_430F90(v55);
      *(_DWORD *)sub_430F90((int)v53) = *v20;
      v21 = (int *)sub_430F90(v55);
      v22 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_446FF0(*v21);
      *v22 = v53;
    }
    v23 = (_DWORD *)sub_478AB0(this);
    if ( *v23 == v55 )
    {
      v24 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_478AB0(this);
      *v24 = v53;
    }
    else
    {
      v25 = (int *)sub_446FF0(v55);
      v26 = (_DWORD *)sub_474590(*v25);
      if ( *v26 == v55 )
      {
        v27 = (int *)sub_446FF0(v55);
        v28 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0(v55);
        v28 = (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_430F90(*v29);
      }
      *v28 = v53;
    }
    v30 = (_DWORD *)sub_446FF0(v55);
    *(_DWORD *)sub_446FF0((int)v53) = *v30;
    v47 = (char *)_tolower(v55);
    v31 = (char *)_tolower((int)v53);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)_tolower(v55) == 1 )
  {
    while ( 1 )
    {
      v32 = (_DWORD *)sub_478AB0(this);
      if ( v54 == *v32 || *(_BYTE *)_tolower(v54) != 1 )
      {
LABEL_65:
        *(_BYTE *)_tolower(v54) = 1;
        goto LABEL_66;
      }
      v33 = (_DWORD *)sub_474590(v52._Str._Myres);
      if ( v54 == *v33 )
        break;
      v53 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_474590(v52._Str._Myres);
      if ( !*(_BYTE *)_tolower((int)v53) )
      {
        *(_BYTE *)_tolower((int)v53) = 1;
        *(_BYTE *)_tolower(v52._Str._Myres) = 0;
        sub_410050(this, v52._Str._Myres);
        v53 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_474590(v52._Str._Myres);
      }
      if ( !*(_BYTE *)sub_40F060((int)v53) )
      {
        v40 = (int *)sub_430F90((int)v53);
        if ( *(_BYTE *)_tolower(*v40) != 1 || (v41 = (int *)sub_474590((int)v53), *(_BYTE *)_tolower(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v53);
          if ( *(_BYTE *)_tolower(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v53);
            *(_BYTE *)_tolower(*v43) = 1;
            *(_BYTE *)_tolower((int)v53) = 0;
            std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(
              (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
              v53);
            v53 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_474590(v52._Str._Myres);
          }
          v44 = (_BYTE *)_tolower(v52._Str._Myres);
          *(_BYTE *)_tolower((int)v53) = *v44;
          *(_BYTE *)_tolower(v52._Str._Myres) = 1;
          v45 = (int *)sub_474590((int)v53);
          *(_BYTE *)_tolower(*v45) = 1;
          sub_410050(this, v52._Str._Myres);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)_tolower((int)v53) = 0;
        v54 = v52._Str._Myres;
        goto LABEL_42;
      }
      v54 = v52._Str._Myres;
LABEL_42:
      v52._Str._Myres = *(_DWORD *)sub_446FF0(v54);
    }
    v53 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_430F90(v52._Str._Myres);
    if ( !*(_BYTE *)_tolower((int)v53) )
    {
      *(_BYTE *)_tolower((int)v53) = 1;
      *(_BYTE *)_tolower(v52._Str._Myres) = 0;
      std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(
        (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
        (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *)v52._Str._Myres);
      v53 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_430F90(v52._Str._Myres);
    }
    if ( *(_BYTE *)sub_40F060((int)v53) )
    {
      v54 = v52._Str._Myres;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v53);
    if ( *(_BYTE *)_tolower(*v34) != 1 || (v35 = (int *)sub_430F90((int)v53), *(_BYTE *)_tolower(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v53);
      if ( *(_BYTE *)_tolower(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v53);
        *(_BYTE *)_tolower(*v37) = 1;
        *(_BYTE *)_tolower((int)v53) = 0;
        sub_410050(this, (int)v53);
        v53 = *(std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node **)sub_430F90(v52._Str._Myres);
      }
      v38 = (_BYTE *)_tolower(v52._Str._Myres);
      *(_BYTE *)_tolower((int)v53) = *v38;
      *(_BYTE *)_tolower(v52._Str._Myres) = 1;
      v39 = (int *)sub_430F90((int)v53);
      *(_BYTE *)_tolower(*v39) = 1;
      std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Rrotate(
        (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
        (std::_Tree_nod<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >::_Node *)v52._Str._Myres);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70(v55);
  sub_4338F0((void *)v55, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (004111A0) --------------------------------------------------------
std::logic_error *__thiscall sub_4111A0(std::logic_error *this, const std::string *a2)
{
  std::logic_error::logic_error(this, a2);
  this->__vftable = (std::logic_error_vtbl *)&std::out_of_range::`vftable';
  return this;
}
// 4D2724: using guessed type int (__stdcall *std::out_of_range::`vftable')(int);

//----- (004111D0) --------------------------------------------------------
void __thiscall sub_4111D0(std::logic_error *this)
{
  this->__vftable = (std::logic_error_vtbl *)&std::out_of_range::`vftable';
  std::logic_error::~logic_error(this);
}
// 4D2724: using guessed type int (__stdcall *std::out_of_range::`vftable')(int);

//----- (004111F0) --------------------------------------------------------
std::logic_error *__thiscall sub_4111F0(std::logic_error *this, char a2)
{
  sub_4111D0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00411220) --------------------------------------------------------
_DWORD *__thiscall std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::clear(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0((int *)this);
  std::vector<IPAddrMask>::max_size(this, *v1);
  *(_DWORD *)sub_478AB0((int *)this) = *((_DWORD *)this + 1);
  *((_DWORD *)this + 2) = 0;
  *(_DWORD *)sub_418790(this) = *((_DWORD *)this + 1);
  result = (_DWORD *)sub_47EB40((int *)this);
  *result = *((_DWORD *)this + 1);
  return result;
}

//----- (00411280) --------------------------------------------------------
std::vector<std::string>::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::iterator::operator++(std::vector<std::string>::iterator *this, std::vector<std::string>::iterator *result, int __formal)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *(_DWORD *)this;
  sub_411370(this);
  *(_DWORD *)result = v4;
  return result;
}

//----- (004112B0) --------------------------------------------------------
unsigned int __thiscall std::vector<IPAddrMask>::max_size(std::vector<IPAddrMask> *this, int a2)
{
  unsigned int result; // eax
  int *v3; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a2; ; a2 = i )
  {
    result = *(char *)sub_40F060(i);
    if ( result )
      break;
    v3 = (int *)sub_430F90(i);
    std::vector<IPAddrMask>::max_size(this, *v3);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a2);
    sub_4338F0((void *)a2, 1);
  }
  return result;
}

//----- (00411330) --------------------------------------------------------
int __cdecl sub_411330(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_40F060(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00411370) --------------------------------------------------------
void *__thiscall sub_411370(void *this)
{
  sub_411390((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *)this);
  return this;
}

//----- (00411390) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_411390(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::const_iterator::_Inc(this);
  return this;
}

//----- (004113B0) --------------------------------------------------------
int __thiscall std::_Tree<std::_Tmap_traits<char const *,CLogin *,StrCmp,std::allocator<std::pair<char const * const,CLogin *>>,0>>::const_iterator::_Inc(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_40F060(*(_DWORD *)this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*(_DWORD *)this);
    if ( *(_BYTE *)sub_40F060(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*(_DWORD *)this);
        result = *(char *)sub_40F060(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *(_DWORD *)this != *(_DWORD *)result )
          break;
        *(_DWORD *)this = v5;
      }
      *(_DWORD *)this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*(_DWORD *)this);
      result = sub_411330(*v3);
      *(_DWORD *)this = result;
    }
  }
  return result;
}

//----- (00411470) --------------------------------------------------------
char __cdecl std::swap<unsigned char>(char *_Left, char *_Right)
{
  char result; // al
  char v3; // [esp+3h] [ebp-1h]

  v3 = *_Left;
  *_Left = *_Right;
  result = v3;
  *_Right = v3;
  return result;
}

//----- (004114A0) --------------------------------------------------------
CGuild *__thiscall CGuild::CGuild(CGuild *this)
{
  char *v1; // eax
  char *v2; // eax
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax

  CBase::CBase();
  this->__vftable = (CGuild_vtbl *)&off_4B4FF0;
  std::map<int,CSocket *>::map<int,CSocket *>((std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *)&this->m_cGuildMemberMap);
  this->m_nPlayerRef = 0;
  this->m_nMemberRef = 0;
  this->m_nTempRef = 0;
  memset(this->m_szName, 0, sizeof(this->m_szName));
  this->m_nPoint = 0;
  this->m_nExp = 0;
  this->m_nPenaltyLevel = 1;
  this->m_nStandard = 0;
  this->m_nTotalTax = 0;
  v1 = GetStr(912);
  strcpy(this->m_szLeader, v1);
  v2 = GetStr(913);
  strcpy(this->m_szSubLeader, v2);
  v3 = GetStr(914);
  strcpy(this->m_szCenturion, v3);
  v4 = GetStr(915);
  strcpy(this->m_szTen, v4);
  v5 = GetStr(916);
  strcpy(this->m_szRegular, v5);
  v6 = GetStr(917);
  strcpy(this->m_szTemp, v6);
  memset(this->m_szTodayMessage, 0, sizeof(this->m_szTodayMessage));
  this->m_dwDeleteTick = 0;
  this->m_nSubLeaderAble = 3;
  this->m_nCenturionAble = 1;
  this->m_nTenAble = 1;
  this->m_nRegularAble = 0;
  this->m_nTempAble = 0;
  this->m_nAID = 0;
  this->m_pAlliance = 0;
  memset(this->m_bSiegeGun, 0, sizeof(this->m_bSiegeGun));
  return this;
}
// 4B4FF0: using guessed type int (__stdcall *off_4B4FF0)(int);

//----- (00411680) --------------------------------------------------------
CGuild *__thiscall CGuild::`scalar deleting destructor'(CGuild *this, char a2)
{
  CGuild::~CGuild(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004116B0) --------------------------------------------------------
void __thiscall CGuild::~CGuild(CGuild *this)
{
  this->__vftable = (CGuild_vtbl *)&off_4B4FF0;
  sub_4116E0(&this->m_cGuildMemberMap);
  CBase::~CBase(this);
}
// 4B4FF0: using guessed type int (__stdcall *off_4B4FF0)(int);

//----- (004116E0) --------------------------------------------------------
int __thiscall sub_4116E0(void *this)
{
  return sub_418510(this);
}

//----- (00411700) --------------------------------------------------------
void __cdecl CGuild::Stop()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v4; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v4,
            v0) )
      break;
    v1 = sub_420250(&v4);
    CBase::Delete(*(CBase **)(v1 + 4));
    sub_446090((int *)&v4, v3, 0);
  }
  sub_418480(dword_4E0968);
  CRWLock::WriteUnlock(&unk_4E0980);
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00411780) --------------------------------------------------------
void __thiscall CBase::Delete(CBase *item)
{
  if ( !BitSet((volatile signed __int32 *)&item->m_bit, 0) )
    item->OnDelete(item);
}

//----- (004117B0) --------------------------------------------------------
void __cdecl CGuild::SecondProcess()
{
  CRWLock::ReadLock(&unk_4E0980);
  if ( sub_417450() )
    CCastle::SecondProcess();
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (004117E0) --------------------------------------------------------
void __cdecl CGuild::MinuteProcess(unsigned int dwTick)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v2[4]; // [esp+0h] [ebp-28h] BYREF
  char v3[4]; // [esp+4h] [ebp-24h] BYREF
  char v4[4]; // [esp+8h] [ebp-20h] BYREF
  char v5[4]; // [esp+Ch] [ebp-1Ch] BYREF
  int nWarEnd; // [esp+10h] [ebp-18h]
  CGuild *pGuild; // [esp+14h] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+18h] [ebp-10h] BYREF
  int nPeriod; // [esp+1Ch] [ebp-Ch]
  time_t t; // [esp+20h] [ebp-8h] BYREF
  struct tm *tm; // [esp+24h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v8);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v1) )
      break;
    pGuild = *(CGuild **)(sub_420250(&v8) + 4);
    if ( pGuild->m_dwDeleteTick && pGuild->m_dwDeleteTick < dwTick )
    {
      if ( pGuild->m_nPlayerRef )
      {
        pGuild->m_dwDeleteTick = 0;
        sub_446090((int *)&v8, v4, 0);
      }
      else
      {
        CBase::Delete(pGuild);
        v8._Myptr = (CIOSocket::CIOTimer *)*sub_44AF50(dword_4E0968, v3, (int)v8._Myptr);
      }
    }
    else
    {
      sub_446090((int *)&v8, v2, 0);
    }
  }
  t = time(0);
  tm = localtime(&t);
  nPeriod = 0;
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    if ( (dword_4E1174[0] & 2) != 0 )
    {
      if ( tm->tm_min >= 5 )
      {
        if ( tm->tm_min >= 15 )
        {
          if ( tm->tm_min >= 16 )
          {
            if ( tm->tm_min < 50 )
              nPeriod = 4;
          }
          else
          {
            nPeriod = 2;
          }
        }
        else
        {
          nPeriod = 1;
        }
      }
      else
      {
        nPeriod = 0;
      }
    }
    else if ( tm->tm_hour >= 17 )
    {
      if ( tm->tm_hour >= 18 )
      {
        if ( tm->tm_hour < 19 )
          nPeriod = 4;
      }
      else if ( tm->tm_min >= 30 )
      {
        nPeriod = 2;
      }
      else
      {
        nPeriod = 1;
      }
    }
    else
    {
      nPeriod = 0;
    }
  }
  else
  {
    switch ( tm->tm_wday )
    {
      case 4:
        if ( tm->tm_hour >= 21 )
          nPeriod = 1;
        break;
      case 5:
        if ( tm->tm_hour >= 21 )
          nPeriod = 2;
        else
          nPeriod = 1;
        break;
      case 6:
        if ( tm->tm_hour >= 21 )
        {
          if ( tm->tm_hour < 23 )
            nPeriod = 4;
        }
        else
        {
          nPeriod = 2;
        }
        break;
    }
  }
  if ( dword_4E0964 != nPeriod )
  {
    if ( nPeriod == 4 )
    {
      nWarEnd = t;
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        if ( (dword_4E1174[0] & 2) != 0 )
          nWarEnd += 60 * (30 - tm->tm_min);
        else
          nWarEnd += 3600;
      }
      else if ( tm->tm_hour == 21 )
      {
        nWarEnd += 7200;
      }
      else
      {
        nWarEnd += 3600;
      }
      CCastle::WarBegin(nWarEnd);
    }
    if ( dword_4E0964 != 4 || !CCastle::IsWarDeclared() )
      dword_4E0964 = nPeriod;
  }
  if ( dword_4E0964 )
    CAlliance::PostponeExpire();
  else
    CAlliance::Expire(t);
  CRWLock::WriteUnlock(&unk_4E0980);
  CCastle::TaxSave();
}
// 4E0964: using guessed type int dword_4E0964;
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00411AB0) --------------------------------------------------------
void __thiscall CGuild::OnDelete(CGuild *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  char v5[4]; // [esp+Ch] [ebp-Ch] BYREF
  CPlayer **pGuildMember; // [esp+10h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v1) )
      break;
    pGuildMember = *(CPlayer ***)(*(_DWORD *)(sub_420250(&v7) + 4) + 32);
    if ( pGuildMember )
    {
      CPlayer::SetGID((CPlayer *)pGuildMember, 0);
      CPlayer::SetGuild(pGuildMember, 0);
      CPlayer::SetGuildLevel((CPlayer *)pGuildMember, 0);
      CPlayer::SetGuildName((CPlayer *)pGuildMember, &DefaultNullString);
      CPlayer::SetGuildStandard((CPlayer *)pGuildMember, 0);
      CPlayer::SetGuildClass((CPlayer *)pGuildMember, 0, &DefaultNullString);
      CIOObject::Release((CIOObject *)pGuildMember);
      *(_DWORD *)(*(_DWORD *)(sub_420250(&v7) + 4) + 32) = 0;
      --this->m_nPlayerRef;
    }
    v2 = sub_420250(&v7);
    operator delete(*(void **)(v2 + 4));
    sub_446090((int *)&v7, v5, 0);
  }
  sub_418530(&this->m_cGuildMemberMap);
  if ( this->m_pAlliance )
    CAlliance::DeleteSetGuild(this->m_pAlliance, (int)this);
  sub_402180((int)this);
}

//----- (00411BE0) --------------------------------------------------------
int __cdecl CGuild::IsLoad(int nGID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  DWORD v2; // esi
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v5; // [esp+8h] [ebp-8h] BYREF
  int bReturn; // [esp+Ch] [ebp-4h]

  bReturn = 0;
  CRWLock::ReadLock(&unk_4E0980);
  sub_44AE20(dword_4E0968, &v5, &nGID);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v5,
         v1) )
  {
    bReturn = 1;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v5) + 4) + 356) )
    {
      v2 = GetTickCount() + 600000;
      *(_DWORD *)(*(_DWORD *)(sub_420250(&v5) + 4) + 356) = v2;
    }
  }
  CRWLock::ReadUnlock(&unk_4E0980);
  return bReturn;
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00411C80) --------------------------------------------------------
void __cdecl CGuild::Load(int nGID, char *end, CCastle *pCastle)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  CAtlTraceSettings *v4; // eax
  CAtlTraceSettings *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp+0h] [ebp-6Ch]
  int v9; // [esp+4h] [ebp-68h]
  int v10; // [esp+8h] [ebp-64h]
  CGuild *pGuild; // [esp+Ch] [ebp-60h]
  char v12[8]; // [esp+14h] [ebp-58h] BYREF
  char v13[8]; // [esp+1Ch] [ebp-50h] BYREF
  CMemory **v14; // [esp+24h] [ebp-48h]
  char v15[8]; // [esp+28h] [ebp-44h] BYREF
  char v16[8]; // [esp+30h] [ebp-3Ch] BYREF
  CMemory **v17; // [esp+38h] [ebp-34h]
  char v18[4]; // [esp+3Ch] [ebp-30h] BYREF
  char v19[8]; // [esp+40h] [ebp-2Ch] BYREF
  int nLoop; // [esp+48h] [ebp-24h]
  std::_Tree<std::_Tmap_traits<int,CGuild *,std::less<int>,std::allocator<std::pair<int const ,CGuild *> >,0> >::iterator *pos; // [esp+4Ch] [ebp-20h] BYREF
  int bAlliance; // [esp+50h] [ebp-1Ch] BYREF
  CGuild *pGuild_; // [esp+54h] [ebp-18h]
  stMember *pMember; // [esp+58h] [ebp-14h]
  int nPID; // [esp+5Ch] [ebp-10h] BYREF
  int nCount; // [esp+60h] [ebp-Ch] BYREF
  std::pair<std::_Tree<std::_Tmap_traits<int,CGuild *,std::less<int>,std::allocator<std::pair<int const ,CGuild *> >,0> >::iterator,bool> *rc; // [esp+64h] [ebp-8h] BYREF
  char v28; // [esp+68h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(dword_4E0968, &pos, &nGID);
  v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v18);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)&pos,
         v3) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
  }
  else
  {
    v17 = operator new(0x198u);
    if ( v17 )
      pGuild = CGuild::CGuild((CGuild *)v17);
    else
      pGuild = 0;
    pGuild_ = pGuild;
    end = GetString(end, pGuild->m_szName);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nStandard);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nExp);
    end = GetString(end, pGuild_->m_szTodayMessage);
    end = GetString(end, pGuild_->m_szLeader);
    end = GetString(end, pGuild_->m_szSubLeader);
    end = GetString(end, pGuild_->m_szCenturion);
    end = GetString(end, pGuild_->m_szTen);
    end = GetString(end, pGuild_->m_szRegular);
    end = GetString(end, pGuild_->m_szTemp);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nSubLeaderAble);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nCenturionAble);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nTenAble);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nRegularAble);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nTempAble);
    end = (char *)GetNumeric<int>(end, &pGuild_->m_nAID);
    v4 = sub_418940((CAtlTraceSettings *)v15);
    std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(
      (std::pair<int const ,IDirect3DTexture9 *> *)v16,
      v4);
    sub_445DF0(
      (int)dword_4E0968,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)&rc,
      (const std::pair<int const ,CGame_Character::TargetInfo> *)v16);
    if ( v28 )
    {
      pGuild_->m_nPoint = 0;
      nCount = 0;
      end = GetNumeric<unsigned char>(end, &nCount);
      for ( nLoop = 0; nLoop < nCount; ++nLoop )
      {
        v14 = operator new(0x28u);
        pMember = (stMember *)v14;
        end = (char *)GetNumeric<int>(end, &nPID);
        end = GetString(end, pMember->szName);
        pMember->nPoint = 0;
        end = (char *)GetNumeric<short>(end, &pMember->nPoint);
        pMember->nClass = 0;
        end = GetNumeric<unsigned char>(end, &pMember->nClass);
        pMember->bConnectTell = 0;
        end = GetNumeric<unsigned char>(end, &pMember->bConnectTell);
        end = (char *)GetNumeric<int>(end, &pMember->nDate);
        pMember->pPlayer = 0;
        v5 = sub_418940((CAtlTraceSettings *)v12);
        std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(
          (std::pair<int const ,IDirect3DTexture9 *> *)v13,
          v5);
        sub_445DF0(
          (int)&pGuild_->m_cGuildMemberMap,
          (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v19,
          (const std::pair<int const ,CGame_Character::TargetInfo> *)v13);
        if ( v19[4] )
        {
          if ( pMember->nClass < 6 )
          {
            if ( 10000 * pMember->nPoint >= 0 )
              v10 = 10000 * pMember->nPoint;
            else
              v10 = 0;
            if ( v10 + pGuild_->m_nPoint <= 2000000000 )
            {
              if ( 10000 * pMember->nPoint >= 0 )
                v8 = 10000 * pMember->nPoint;
              else
                v8 = 0;
              v9 = v8 + pGuild_->m_nPoint;
            }
            else
            {
              v9 = 2000000000;
            }
            pGuild_->m_nPoint = v9;
          }
        }
        else
        {
          LOG_ERR("CGuild::Load() member insert error (gid:%d, pid:%d,count:%d)", nGID, nPID, nCount);
          operator delete(pMember);
        }
      }
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        if ( pGuild_->m_nExp < 3 )
        {
          if ( pGuild_->m_nExp < 2 )
          {
            if ( pGuild_->m_nExp < 1 )
              pGuild_->m_nPenaltyLevel = 1;
            else
              pGuild_->m_nPenaltyLevel = 2;
          }
          else
          {
            pGuild_->m_nPenaltyLevel = 3;
          }
        }
        else
        {
          pGuild_->m_nPenaltyLevel = 4;
        }
        v7 = CGuild::CalPenaltyTLevel((int *)pGuild_);
        pGuild_->m_nPenaltyLevel = v7;
      }
      else
      {
        if ( pGuild_->m_nExp < 16000000 )
        {
          if ( pGuild_->m_nExp < 7800000 )
          {
            if ( pGuild_->m_nExp < 2400000 )
              pGuild_->m_nPenaltyLevel = 1;
            else
              pGuild_->m_nPenaltyLevel = 2;
          }
          else
          {
            pGuild_->m_nPenaltyLevel = 3;
          }
        }
        else
        {
          pGuild_->m_nPenaltyLevel = 4;
        }
        v6 = CGuild::CalPenaltyLevel((int *)pGuild_);
        pGuild_->m_nPenaltyLevel = v6;
      }
      bAlliance = 0;
      end = GetNumeric<unsigned char>(end, &bAlliance);
      if ( bAlliance )
        CAlliance::Load(end);
      if ( pGuild_->m_nAID )
        CAlliance::LoadSetGuild(pGuild_->m_nAID, nGID, (int)pGuild_);
      if ( pCastle )
      {
        CCastle::SetGuild((volatile int **)pCastle, (volatile int *)pGuild_);
        ++pGuild_->m_nPlayerRef;
      }
      CCastle::SetWarGuild((volatile int *)nGID, (volatile int *)pGuild_);
      CRWLock::WriteUnlock(&unk_4E0980);
    }
    else
    {
      CBase::Delete(pGuild_);
      CRWLock::WriteUnlock(&unk_4E0980);
      LOG_ERR("CGuildAdmin::Load() guild insert error ( gid:%d )", nGID);
    }
  }
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00412210) --------------------------------------------------------
void __cdecl CGuild::Login(CPlayer *pPlayer)
{
  int v1; // eax
  int m_nGID; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int m_nGID_; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  CIOBuffer *v17; // [esp-8h] [ebp-24h]
  int m_nPID; // [esp-4h] [ebp-20h]
  int m_nPID_; // [esp-4h] [ebp-20h]
  int v20; // [esp-4h] [ebp-20h]
  char *v21; // [esp-4h] [ebp-20h]
  int v22; // [esp-4h] [ebp-20h]
  _DWORD *v23; // [esp+0h] [ebp-1Ch]
  char v24[4]; // [esp+4h] [ebp-18h] BYREF
  char v25[4]; // [esp+8h] [ebp-14h] BYREF
  int v26; // [esp+Ch] [ebp-10h] BYREF
  CIOBuffer *pBuffer; // [esp+10h] [ebp-Ch]
  char v28[4]; // [esp+14h] [ebp-8h] BYREF
  char v29[4]; // [esp+18h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E0980);
  v26 = CPlayer::GetGID(pPlayer);
  sub_44AE20(dword_4E0968, v28, &v26);
  v1 = sub_430C20(dword_4E0968, (int)v25);
  if ( (unsigned __int8)unknown_libname_8(v1) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    m_nPID = pPlayer->m_nPID;
    m_nGID = CPlayer::GetGID(pPlayer);
    LOG_ERR("CGuild::Login() guild key error (gid:%d,pid:%d)", m_nGID, m_nPID);
    CPlayer::SetGID(pPlayer, 0);
  }
  else
  {
    v3 = sub_420250(v28);
    sub_44AE20((_DWORD *)(*(_DWORD *)(v3 + 4) + 380), v29, &pPlayer->m_nPID);
    v4 = sub_420250(v28);
    v5 = sub_430C20((_DWORD *)(*(_DWORD *)(v4 + 4) + 380), (int)v24);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      m_nPID_ = pPlayer->m_nPID;
      m_nGID_ = CPlayer::GetGID(pPlayer);
      LOG_ERR("CGuild::Login() guild member error (gid:%d,pid:%d)", m_nGID_, m_nPID_);
      CPlayer::SetGID(pPlayer, 0);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250(v29) + 4) + 32) = pPlayer;
      CIOObject::AddRef((int)pPlayer);
      v23 = (_DWORD *)(*(_DWORD *)(sub_420250(v28) + 4) + 32);
      ++*v23;
      *(_DWORD *)(*(_DWORD *)(sub_420250(v28) + 4) + 356) = 0;
      v7 = sub_420250(v28);
      CPlayer::SetGuild((CIOObject **)pPlayer, *(_DWORD *)(v7 + 4));
      v8 = sub_420250(v28);
      CPlayer::SetGuildLevel(pPlayer, *(_DWORD *)(*(_DWORD *)(v8 + 4) + 72));
      v9 = sub_420250(v28);
      CPlayer::SetGuildName(pPlayer, (char *)(*(_DWORD *)(v9 + 4) + 44));
      v10 = sub_420250(v28);
      CPlayer::SetGuildStandard(pPlayer, *(_DWORD *)(*(_DWORD *)(v10 + 4) + 76));
      v20 = *(_DWORD *)(*(_DWORD *)(sub_420250(v29) + 4) + 24);
      v11 = sub_420250(v28);
      v21 = CGuild::GetClass2Title(*(CGuild **)(v11 + 4), v20);
      v12 = sub_420250(v29);
      CPlayer::SetGuildClass(pPlayer, *(_DWORD *)(*(_DWORD *)(v12 + 4) + 24), v21);
      v22 = *(_DWORD *)sub_420250(v28);
      v13 = sub_420250(v28);
      CGuild::SendMemberInfo(*(CGuild **)(v13 + 4), pPlayer, v22);
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v28) + 4) + 396) )
      {
        v14 = sub_420250(v28);
        CAlliance::AllianceInfo(*(const char **)(*(_DWORD *)(v14 + 4) + 396), (int)pPlayer);
      }
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v29) + 4) + 28) )
      {
        pBuffer = (CIOBuffer *)MakePacket(S2C_GUILD, "bbsb", 0, 2, pPlayer->m_szName, LOBYTE(pPlayer->m_nLevel));
        v17 = pBuffer;
        v15 = sub_420250(v28);
        CGuild::Broadcast(*(_DWORD *)(v15 + 4), v17, (int)pPlayer);
        CIOBuffer::Release(pBuffer);
      }
      if ( *(_BYTE *)(*(_DWORD *)(sub_420250(v28) + 4) + 174) )
      {
        v16 = sub_420250(v28);
        CPlayer::Write(pPlayer, S2C_GUILD, "bbs", 0, 5, *(_DWORD *)(v16 + 4) + 174);
      }
      CRWLock::WriteUnlock(&unk_4E0980);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0968: using guessed type int dword_4E0968[3];

//----- (004124F0) --------------------------------------------------------
void __cdecl CGuild::LoginCastle(CPlayer *pPlayer, int nGID)
{
  CRWLock::ReadLock(&unk_4E0980);
  CCastle::Login(pPlayer, nGID);
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (00412520) --------------------------------------------------------
void __thiscall CGuild::Logout(CGuild *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // eax
  int m_nGID; // eax
  CIOBuffer *v6; // [esp-8h] [ebp-2Ch]
  int m_nPID; // [esp-4h] [ebp-28h]
  char v9[4]; // [esp+4h] [ebp-20h] BYREF
  char v10[4]; // [esp+8h] [ebp-1Ch] BYREF
  char pos[4]; // [esp+Ch] [ebp-18h] BYREF
  int posMember; // [esp+10h] [ebp-14h] BYREF
  CIOBuffer *pBuffer_; // [esp+14h] [ebp-10h]
  CIOBuffer *pBuffer; // [esp+18h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v15; // [esp+1Ch] [ebp-8h] BYREF
  char v16[4]; // [esp+20h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E0980);
  posMember = CPlayer::GetGID(pPlayer);
  sub_44AE20(dword_4E0974, &v15, &posMember);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0974, (int)pos);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v15,
         v2) )
  {
    pBuffer = (CIOBuffer *)MakePacket(S2C_GUILD, "bbs", 0, 3, pPlayer->m_szName);
    v6 = pBuffer;
    v3 = sub_420250(&v15);
    CGuild::Broadcast(*(_DWORD *)(v3 + 4), v6, (int)pPlayer);
    CIOBuffer::Release(pBuffer);
    sub_44AF50(dword_4E0974, v10, (int)v15._Myptr);
    CBase::Delete(this);
    CRWLock::WriteUnlock(&unk_4E0980);
  }
  else
  {
    sub_44AE20(&this->m_cGuildMemberMap, v16, &pPlayer->m_nPID);
    v4 = sub_430C20(&this->m_cGuildMemberMap, (int)v9);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      m_nPID = pPlayer->m_nPID;
      m_nGID = CPlayer::GetGID(pPlayer);
      LOG_ERR("CGuild::Logout() member not find (gid:%d,pid:%d)", m_nGID, m_nPID);
      CRWLock::WriteUnlock(&unk_4E0980);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250(v16) + 4) + 32) = 0;
      CIOObject::Release(pPlayer);
      CPlayer::SetGuild((CIOObject **)pPlayer, 0);
      CPlayer::SetGuildLevel(pPlayer, 0);
      CPlayer::SetGuildName(pPlayer, &DefaultNullString);
      CPlayer::SetGuildStandard(pPlayer, 0);
      CPlayer::SetGuildClass(pPlayer, 0, &DefaultNullString);
      if ( --this->m_nPlayerRef )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v16) + 4) + 28) )
        {
          pBuffer_ = (CIOBuffer *)MakePacket(S2C_GUILD, "bbs", 0, 3, pPlayer->m_szName);
          CGuild::Broadcast((int)this, pBuffer_, (int)pPlayer);
          CIOBuffer::Release(pBuffer_);
        }
      }
      else
      {
        this->m_dwDeleteTick = GetTickCount() + 600000;
      }
      CRWLock::WriteUnlock(&unk_4E0980);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0974: using guessed type int dword_4E0974[3];

//----- (00412720) --------------------------------------------------------
void __cdecl CGuild::DelPlayer(int nPID, int nGID)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  DWORD v9; // esi
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  CIOBuffer *v16; // [esp-8h] [ebp-3Ch]
  int v17; // [esp-4h] [ebp-38h]
  _DWORD *v18; // [esp+4h] [ebp-30h]
  char v19[4]; // [esp+8h] [ebp-2Ch] BYREF
  void *v20; // [esp+Ch] [ebp-28h]
  char v21[4]; // [esp+10h] [ebp-24h] BYREF
  char pos[4]; // [esp+14h] [ebp-20h] BYREF
  char posMember[4]; // [esp+18h] [ebp-1Ch] BYREF
  int pPlayer; // [esp+1Ch] [ebp-18h] BYREF
  CIOBuffer *pBuffer; // [esp+20h] [ebp-14h]
  void *a2; // [esp+24h] [ebp-10h]
  int pPlayer_; // [esp+28h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v28; // [esp+2Ch] [ebp-8h] BYREF
  char v29[4]; // [esp+30h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(dword_4E0968, v29, &nGID);
  v2 = sub_430C20(dword_4E0968, (int)posMember);
  if ( (unsigned __int8)unknown_libname_8(v2) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return;
  }
  if ( nGID == nPID )
  {
    v3 = sub_420250(v29);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(*(_DWORD *)(v3 + 4) + 380),
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v28);
    while ( 1 )
    {
      v4 = sub_420250(v29);
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(
                                                                       (_DWORD *)(*(_DWORD *)(v4 + 4) + 380),
                                                                       (int)v21);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v28,
              v5) )
        break;
      pPlayer_ = *(_DWORD *)(*(_DWORD *)(sub_420250(&v28) + 4) + 32);
      if ( pPlayer_ )
      {
        CPlayer::SetGID((CPlayer *)pPlayer_, 0);
        CPlayer::SetGuild((CIOObject **)pPlayer_, 0);
        CPlayer::SetGuildLevel((CPlayer *)pPlayer_, 0);
        CPlayer::SetGuildName((CPlayer *)pPlayer_, &DefaultNullString);
        CPlayer::SetGuildStandard((CPlayer *)pPlayer_, 0);
        CPlayer::SetGuildClass((CPlayer *)pPlayer_, 0, &DefaultNullString);
        CPlayer::Write((CPlayer *)pPlayer_, S2C_GUILD, "bb", 0, 43);
        v6 = CBase::Id((CBase *)pPlayer_);
        a2 = MakePacket(S2C_GUILD, "bdssbd", 9, v6, &DefaultNullString, &DefaultNullString, 0, 0);
        CGuild::SendPlayerSight(pPlayer_, a2, 0);
        CIOObject::Release((CIOObject *)pPlayer_);
        *(_DWORD *)(*(_DWORD *)(sub_420250(&v28) + 4) + 32) = 0;
        v18 = (_DWORD *)(*(_DWORD *)(sub_420250(v29) + 4) + 32);
        --*v18;
      }
      v20 = *(void **)(sub_420250(&v28) + 4);
      operator delete(v20);
      sub_446090((int *)&v28, pos, 0);
    }
    v7 = sub_420250(v29);
    sub_418530((_DWORD *)(*(_DWORD *)(v7 + 4) + 380));
    if ( *(int *)(*(_DWORD *)(sub_420250(v29) + 4) + 32) > 0 )
    {
      v8 = sub_420250(v29);
      LOG_ERR("CGuild::DelPlayer() plaer reference error (ref:%d)", *(_DWORD *)(*(_DWORD *)(v8 + 4) + 32));
    }
    v9 = GetTickCount() + 600000;
    *(_DWORD *)(*(_DWORD *)(sub_420250(v29) + 4) + 356) = v9;
  }
  else
  {
    v10 = sub_420250(v29);
    sub_44AE20((_DWORD *)(*(_DWORD *)(v10 + 4) + 380), &pPlayer, &nPID);
    v11 = sub_420250(v29);
    v12 = sub_430C20((_DWORD *)(*(_DWORD *)(v11 + 4) + 380), (int)v19);
    if ( (unsigned __int8)unknown_libname_8(v12) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      LOG_ERR("CGuild::DelPlayer() not find member (gid:%d,pid:%d)", nGID, nPID);
      return;
    }
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&pPlayer) + 4) + 32) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      LOG_ERR("CGuild::DelPlayer error (gid:%d,pid:%d)", nGID, nPID);
      return;
    }
    v13 = sub_420250(&pPlayer);
    pBuffer = (CIOBuffer *)MakePacket(S2C_GUILD, "bbs", 0, 32, *(_DWORD *)(v13 + 4));
    v16 = pBuffer;
    v14 = sub_420250(v29);
    CGuild::Broadcast(*(_DWORD *)(v14 + 4), v16, 0);
    CIOBuffer::Release(pBuffer);
    v17 = pPlayer;
    v15 = sub_420250(v29);
    CGuild::MemberDEL(*(CGuild **)(v15 + 4), v17);
  }
  CRWLock::WriteUnlock(&unk_4E0980);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00412A50) --------------------------------------------------------
int __cdecl CGuild::CreateTrial(CPlayer *pPlayer)
{
  int result; // eax
  CPlayer *v2; // eax
  CPlayer *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-B4h]
  int v7; // [esp-4h] [ebp-ACh]
  int v8; // [esp+4h] [ebp-A4h]
  int v9; // [esp+8h] [ebp-A0h]
  CBaseList *v10; // [esp+Ch] [ebp-9Ch]
  CBaseList *pBaseList; // [esp+Ch] [ebp-9Ch]
  CGuild *pGuild; // [esp+10h] [ebp-98h]
  char *end; // [esp+14h] [ebp-94h]
  char szBuff[124]; // [esp+18h] [ebp-90h] BYREF
  __int16 v15; // [esp+95h] [ebp-13h]
  char v16; // [esp+97h] [ebp-11h]
  int v17; // [esp+98h] [ebp-10h]
  int bBreak; // [esp+9Ch] [ebp-Ch]
  int nCount; // [esp+A0h] [ebp-8h]
  CParty *pParty; // [esp+A4h] [ebp-4h]

  v17 = dword_4D9830;
  if ( CPlayer::GetGID(pPlayer) )
    return 13;
  if ( pPlayer->m_nLevel < 30 )
    return 7;
  CChar::Lock(pPlayer);
  if ( !pPlayer->m_nParty || (pParty = (CParty *)sub_44D4E0(pPlayer->m_nParty)) == 0 )
  {
    CChar::Unlock(pPlayer);
    return 12;
  }
  CChar::Unlock(pPlayer);
  if ( !CParty::IsHead((CIOCriticalSection *)pParty, (int)pPlayer) )
  {
    CIOObject::Release(pParty);
    return 11;
  }
  if ( CParty::GetSize(pParty) < 6 )
  {
    CIOObject::Release(pParty);
    return 12;
  }
  CIOCriticalSection::Enter(&pPlayer->m_lockItem.m_critical_section);
  if ( !pPlayer->m_pMoney || ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) > pPlayer->m_pMoney->m_nNum )
  {
    CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
    CIOObject::Release(pParty);
    return 8;
  }
  CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
  v10 = (CBaseList *)CParty::GetPlayerList((CIOCriticalSection *)pParty);
  v8 = 0;
  bBreak = 0;
  while ( v10 )
  {
    if ( !bBreak )
    {
      v2 = (CPlayer *)unknown_libname_7(v10);
      if ( CPlayer::GetGID(v2) )
        bBreak = 1;
      else
        v8 += *(_DWORD *)(unknown_libname_7(v10) + 468);
    }
    v10 = CBaseList::Pop(v10);
  }
  if ( bBreak )
  {
    CIOObject::Release(pParty);
    return 13;
  }
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    if ( v8 < 1 )
      goto LABEL_26;
  }
  else if ( v8 < 60 )
  {
LABEL_26:
    CIOObject::Release(pParty);
    return 9;
  }
  pGuild = CGuild::Create(pPlayer->m_nPID);
  if ( pGuild )
  {
    szBuff[0] = 0;
    memset(&szBuff[1], 0, 124u);
    v15 = 0;
    v16 = 0;
    end = szBuff;
    pBaseList = (CBaseList *)CParty::GetPlayerList((CIOCriticalSection *)pParty);
    v9 = 0;
    nCount = 0;
    CRWLock::WriteLock(&unk_4E0980);
    while ( pBaseList )
    {
      if ( !v9 )
      {
        v7 = pPlayer->m_nPID != *(_DWORD *)(unknown_libname_7(pBaseList) + 452) ? 8 : 1;
        v3 = (CPlayer *)unknown_libname_7(pBaseList);
        if ( CGuild::MemberADD(pGuild, pPlayer->m_nPID, v3, v7) )
        {
          v4 = unknown_libname_7(pBaseList);
          end = PutNumeric<int>(end, *(_DWORD *)(v4 + 452));
          ++nCount;
        }
        else
        {
          v9 = *(_DWORD *)(unknown_libname_7(pBaseList) + 452);
        }
      }
      pBaseList = CBaseList::Pop(pBaseList);
    }
    if ( v9 )
    {
      LOG_ERR("CGuild::CreateTrial() member add error (leader:%d,pid:%d)", pPlayer->m_nPID, v9);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
        &pPlayer->m_nPID);
      CBase::Delete(pGuild);
      CRWLock::WriteUnlock(&unk_4E0980);
      CIOObject::Release(pParty);
      result = 1;
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      CIOObject::Release(pParty);
      v6 = (unsigned __int8)nCount;
      v5 = CBase::Id(pPlayer);
      CDBSocket::Write(S2D_GUILD_CREATE_SECEDECHECK, "dbm", v5, v6, szBuff, end - szBuff);
      result = 0;
    }
  }
  else
  {
    CIOObject::Release(pParty);
    LOG_ERR("CGuild::CreateTrial() temp guild create error (pid:%d)", pPlayer->m_nPID);
    result = 1;
  }
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E0974: using guessed type int dword_4E0974[3];

//----- (00412E90) --------------------------------------------------------
void __thiscall CChar::Lock(CChar *this)
{
  CIOCriticalSection::Enter(&this->m_lock.m_critical_section);
}

//----- (00412EB0) --------------------------------------------------------
void __thiscall CChar::Unlock(CChar *this)
{
  CIOCriticalSection::Leave((int)&this->m_lock);
}

//----- (00412ED0) --------------------------------------------------------
int __thiscall CParty::GetSize(CParty *this)
{
  return std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)&this->m_vecParty);
}

//----- (00412EF0) --------------------------------------------------------
int __thiscall CGuild::CreateTrialSecedeAnswer(CGuild *this, CPlayer *pPlayer, int nPID, int nDate)
{
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // [esp-4h] [ebp-1Ch]
  int v9; // [esp+4h] [ebp-14h] BYREF
  int _Keyval; // [esp+8h] [ebp-10h] BYREF
  char v11[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v12[4]; // [esp+10h] [ebp-8h] BYREF
  CIOBuffer *pBuffer; // [esp+14h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  if ( nPID )
  {
    sub_44AE20(&this->m_cGuildMemberMap, v12, &nPID);
    v4 = sub_430C20(&this->m_cGuildMemberMap, (int)v11);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      _Keyval = CPlayer::GetGID(pPlayer);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
        &_Keyval);
      CBase::Delete(this);
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 1;
    }
    else
    {
      v7 = nDate;
      v6 = sub_420250(v12);
      CPlayer::Write(pPlayer, S2C_GUILD, "bbsd", 0, 6, *(_DWORD *)(v6 + 4), v7);
      v9 = CPlayer::GetGID(pPlayer);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
        &v9);
      CBase::Delete(this);
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 0;
    }
  }
  else
  {
    pBuffer = (CIOBuffer *)MakePacket(S2C_GUILD, "b", 2);
    CGuild::Broadcast((int)this, pBuffer, (int)pPlayer);
    CIOBuffer::Release(pBuffer);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 14;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0974: using guessed type int dword_4E0974[3];

//----- (00413020) --------------------------------------------------------
int __thiscall CGuild::CreateConsent(CGuild *this, CPlayer *pPlayer, int bConsent)
{
  int v3; // eax
  int result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-4h] [ebp-30h]
  int v10; // [esp-4h] [ebp-30h]
  int v12; // [esp+4h] [ebp-28h] BYREF
  int v13; // [esp+8h] [ebp-24h] BYREF
  char v14[4]; // [esp+Ch] [ebp-20h] BYREF
  char v15[4]; // [esp+10h] [ebp-1Ch] BYREF
  int v16; // [esp+14h] [ebp-18h] BYREF
  int _Keyval; // [esp+18h] [ebp-14h] BYREF
  char v18[4]; // [esp+1Ch] [ebp-10h] BYREF
  int pos; // [esp+20h] [ebp-Ch] BYREF
  CPlayer *pGuildMember; // [esp+24h] [ebp-8h]
  CIOBuffer *pBuffer; // [esp+28h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, &pos, &pPlayer->m_nPID);
  v3 = sub_430C20(&this->m_cGuildMemberMap, (int)v18);
  if ( (unsigned __int8)unknown_libname_8(v3) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 15;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 24) == 1
         || *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 24) == 8 )
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 24) != 1 )
      *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 24) = 7;
    v5 = sub_420250(&pos);
    pBuffer = (CIOBuffer *)MakePacket(S2C_GUILD, "bbsb", 0, 17, *(_DWORD *)(v5 + 4), (unsigned __int8)bConsent);
    CGuild::Broadcast((int)this, pBuffer, 0);
    CIOBuffer::Release(pBuffer);
    if ( bConsent )
    {
      if ( CGuild::IsAllConsent(this) )
      {
        v16 = CPlayer::GetGID(pPlayer);
        pos = *sub_44AE20(&this->m_cGuildMemberMap, v15, &v16);
        v6 = sub_430C20(&this->m_cGuildMemberMap, (int)v14);
        if ( (unsigned __int8)unknown_libname_8(v6) )
        {
          v13 = CPlayer::GetGID(pPlayer);
          std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
            &v13);
          CBase::Delete(this);
          CRWLock::WriteUnlock(&unk_4E0980);
          v9 = pPlayer->m_nPID;
          v7 = CPlayer::GetGID(pPlayer);
          LOG_ERR("CGuild::CreateConsent() leader not find (leader:%d,pid:%d)", v7, v9);
          result = 1;
        }
        else
        {
          pGuildMember = *(CPlayer **)(*(_DWORD *)(sub_420250(&pos) + 4) + 32);
          if ( pGuildMember )
          {
            CPlayer::Write(pGuildMember, S2C_GUILD, "b", 4);
            CRWLock::WriteUnlock(&unk_4E0980);
            result = 0;
          }
          else
          {
            v12 = CPlayer::GetGID(pPlayer);
            std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
              (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
              &v12);
            CBase::Delete(this);
            CRWLock::WriteUnlock(&unk_4E0980);
            v10 = pPlayer->m_nPID;
            v8 = CPlayer::GetGID(pPlayer);
            LOG_ERR("CGuild::CreateConsent() leader logout error (leader:%d,pid:%d)", v8, v10);
            result = 1;
          }
        }
      }
      else
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 0;
      }
    }
    else
    {
      _Keyval = CPlayer::GetGID(pPlayer);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
        &_Keyval);
      CBase::Delete(this);
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 0;
    }
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 16;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0974: using guessed type int dword_4E0974[3];

//----- (004132A0) --------------------------------------------------------
int __thiscall CGuild::IsAllConsent(CGuild *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 24) == 8 )
      return 0;
    sub_446090((int *)&v6, v5, 0);
  }
  return 1;
}

//----- (00413310) --------------------------------------------------------
int __stdcall CGuild::CreateGuildName(CGuild *this, CPlayer *Str1)
{
  int v3; // eax

  if ( CPlayer::GetGID((CIOCriticalSection *)this) != *(_DWORD *)this[1].m_szName )
    return 22;
  if ( !IsValidName((const char *)Str1) )
    return 18;
  if ( CGuild::IsSameName((char *)Str1) )
    return 19;
  v3 = CBase::Id(this);
  CDBSocket::Write(S2D_GUILD_SAMENAMECHECK, "ds", v3, Str1);
  return 0;
}

//----- (00413380) --------------------------------------------------------
int __thiscall CGuild::CreateGuildNameAnswer(CGuild *this, CPlayer *pPlayer, int nAnswer, char *szGuildName)
{
  int result; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  CAtlTraceSettings *v6; // eax
  int v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  int v9; // eax
  int v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  int v12; // eax
  int v13; // [esp-4h] [ebp-60h]
  int v14; // [esp+0h] [ebp-5Ch]
  int v15; // [esp+4h] [ebp-58h]
  int v16; // [esp+8h] [ebp-54h]
  CGuild *item; // [esp+Ch] [ebp-50h]
  char v18[4]; // [esp+10h] [ebp-4Ch] BYREF
  char v20[4]; // [esp+18h] [ebp-44h] BYREF
  char v21[4]; // [esp+1Ch] [ebp-40h] BYREF
  char v22[4]; // [esp+20h] [ebp-3Ch] BYREF
  char v23[4]; // [esp+24h] [ebp-38h] BYREF
  int v24; // [esp+28h] [ebp-34h] BYREF
  int _Keyval; // [esp+2Ch] [ebp-30h] BYREF
  char v26[8]; // [esp+30h] [ebp-2Ch] BYREF
  char v27[8]; // [esp+38h] [ebp-24h] BYREF
  char v28[4]; // [esp+40h] [ebp-1Ch] BYREF
  char v29[4]; // [esp+44h] [ebp-18h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v30; // [esp+48h] [ebp-14h] BYREF
  CPlayer *player; // [esp+4Ch] [ebp-10h]
  int a1; // [esp+50h] [ebp-Ch]
  char v33[4]; // [esp+54h] [ebp-8h] BYREF
  char v34; // [esp+58h] [ebp-4h]

  item = this;
  if ( nAnswer == 2 )
    return 1;
  if ( nAnswer )
    return 19;
  CRWLock::WriteLock(&unk_4E0980);
  if ( CGuild::IsAllConsent(item) )
  {
    CIOCriticalSection::Enter(&pPlayer->m_lockItem.m_critical_section);
    if ( pPlayer->m_pMoney && ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) <= pPlayer->m_pMoney->m_nNum )
    {
      player = (CPlayer *)pPlayer->m_pMoney;
      if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(
              player,
              pPlayer,
              31,
              -((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000)) )
        CPlayer::_OutofInven(pPlayer, (CItem *)player);
      CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
      strcpy(item->m_szName, szGuildName);
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&item->m_cGuildMemberMap,
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v30);
      while ( 1 )
      {
        v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&item->m_cGuildMemberMap, (int)v28);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                &v30,
                v5) )
          break;
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v30) + 4) + 24) != 1 )
          *(_DWORD *)(*(_DWORD *)(sub_420250(&v30) + 4) + 24) = 6;
        a1 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v30) + 4) + 32);
        if ( a1 )
          CPlayer::SetGuildName((char *)a1, item->m_szName);
        sub_446090((int *)&v30, v29, 0);
      }
      CPlayer::GetGID((CIOCriticalSection *)pPlayer);
      v6 = sub_418940((CAtlTraceSettings *)v26);
      std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(
        (std::pair<int const ,IDirect3DTexture9 *> *)v27,
        v6);
      sub_445DF0(
        (int)dword_4E0968,
        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v33,
        (const std::pair<int const ,CGame_Character::TargetInfo> *)v27);
      if ( v34 )
      {
        v24 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
        std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
          (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
          &v24);
        if ( 10000 * pPlayer->m_nContribute >= 0 )
          v16 = 10000 * pPlayer->m_nContribute;
        else
          v16 = 0;
        if ( v16 <= 2000000000 )
        {
          if ( 10000 * pPlayer->m_nContribute >= 0 )
            v14 = 10000 * pPlayer->m_nContribute;
          else
            v14 = 0;
          v15 = v14;
        }
        else
        {
          v15 = 2000000000;
        }
        item->m_nPoint = v15;
        for ( v30._Myptr = *(CIOSocket::CIOTimer **)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&item->m_cGuildMemberMap,
                                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v23);
              ;
              sub_446090((int *)&v30, v22, 0) )
        {
          v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&item->m_cGuildMemberMap, (int)v21);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v30,
                  v8) )
            break;
          a1 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v30) + 4) + 32);
          if ( a1 )
          {
            CPlayer::Write((CPlayer *)a1, S2C_GUILD, "bbs", 0, 21, item->m_szName);
            v9 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
            CGuild::SendMemberInfo(item, (CPlayer *)a1, v9);
          }
        }
        v10 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
        CDBSocket::Write(S2D_GUILD_CREATE, "ds", v10, szGuildName);
        for ( v30._Myptr = *(CIOSocket::CIOTimer **)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&item->m_cGuildMemberMap,
                                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20);
              ;
              sub_446090((int *)&v30, &this, 0) )
        {
          v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&item->m_cGuildMemberMap, (int)v18);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v30,
                  v11) )
            break;
          if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v30) + 4) + 24) != 1 )
          {
            v13 = *(_DWORD *)sub_420250(&v30);
            v12 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
            CDBSocket::Write(S2D_GUILD_CONFLUX, "dd", v12, v13);
          }
        }
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 0;
      }
      else
      {
        v7 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
        LOG_ERR("CGuild::CreateGuildName() guild insert error (gid:%d)", v7);
        _Keyval = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
        std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
          (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E0974,
          &_Keyval);
        CBase::Delete(item);
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 1;
      }
    }
    else
    {
      CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 8;
    }
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 20;
  }
  return result;
}
// 4E0968: using guessed type int dword_4E0968[3];
// 4E0974: using guessed type int dword_4E0974[3];

//----- (00413790) --------------------------------------------------------
int __thiscall CGuild::IsSkillAble(CGuild *this, int nClass, int nType)
{
  int result; // eax

  switch ( nClass )
  {
    case 1:
      result = 1;
      break;
    case 2:
      result = this->m_nSubLeaderAble & (1 << nType);
      break;
    case 3:
      result = this->m_nCenturionAble & (1 << nType);
      break;
    case 4:
      result = this->m_nTenAble & (1 << nType);
      break;
    case 5:
      result = this->m_nRegularAble & (1 << nType);
      break;
    case 6:
      result = this->m_nTempAble & (1 << nType);
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (00413850) --------------------------------------------------------
int __thiscall CGuild::Conflux(CGuild *this, CPlayer *pPlayer, char *szName)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-8h] [ebp-18h]
  int v9; // [esp-4h] [ebp-14h]
  char v11[4]; // [esp+4h] [ebp-Ch] BYREF
  CIOObject *v12; // [esp+8h] [ebp-8h]
  char v13[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, v13, &pPlayer->m_nPID);
  v3 = sub_430C20(&this->m_cGuildMemberMap, (int)v11);
  if ( (unsigned __int8)unknown_libname_8(v3) )
  {
    v9 = pPlayer->m_nPID;
    v4 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::Conflux() member find error (gid:%d,pid:%d)", v4, v9);
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 1;
  }
  else
  {
    v6 = sub_420250(v13);
    if ( CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 24), 0) )
    {
      if ( CGuild::IsTempMemberFUll(this) )
      {
        CRWLock::ReadUnlock(&unk_4E0980);
        result = 23;
      }
      else if ( CCastle::IsAllCastleWarRelation((int)this) && (sub_417430() || sub_417450()) )
      {
        CRWLock::ReadUnlock(&unk_4E0980);
        result = 94;
      }
      else
      {
        CRWLock::ReadUnlock(&unk_4E0980);
        v12 = CPlayer::FindPlayer(szName);
        if ( v12 )
        {
          if ( CChar::IsGState((CChar *)v12, 256) )
          {
            CPlayer::Write((int)pPlayer, 95, "b", 11);
            CIOObject::Release(v12, (volatile int *)&v12[22]);
            result = 0;
          }
          else if ( CPlayer::GetGID((CIOCriticalSection *)v12) )
          {
            CIOObject::Release(v12, (volatile int *)&v12[22]);
            result = 25;
          }
          else
          {
            CPlayer::Write((int)pPlayer, 94, "bbs", 0, 27, szName);
            v8 = pPlayer->m_nPID;
            v7 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
            CPlayer::Write((int)v12, 94, "bdds", 14, v7, v8, this->m_szName);
            CIOObject::Release(v12, (volatile int *)&v12[22]);
            result = 0;
          }
        }
        else
        {
          result = 24;
        }
      }
    }
    else
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00413A50) --------------------------------------------------------
int __cdecl CGuild::ConfluxAnswer(CPlayer *pPlayer, int nGID, int nPID, int bAnswer)
{
  int result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-8h] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-18h]
  char v14[4]; // [esp+0h] [ebp-14h] BYREF
  char v15[4]; // [esp+4h] [ebp-10h] BYREF
  char v16[4]; // [esp+8h] [ebp-Ch] BYREF
  int a1a; // [esp+Ch] [ebp-8h]
  char v18[4]; // [esp+10h] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E0980);
  if ( CPlayer::GetGID((CIOCriticalSection *)pPlayer) )
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 29;
  }
  else
  {
    sub_44AE20(dword_4E0968, v16, &nGID);
    v5 = sub_430C20(dword_4E0968, (int)v15);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      result = 1;
    }
    else
    {
      v6 = sub_420250(v16);
      sub_44AE20((_DWORD *)(*(_DWORD *)(v6 + 4) + 380), v18, &nPID);
      v7 = sub_420250(v16);
      v8 = sub_430C20((_DWORD *)(*(_DWORD *)(v7 + 4) + 380), (int)v14);
      if ( (unsigned __int8)unknown_libname_8(v8) )
      {
        CRWLock::ReadUnlock(&unk_4E0980);
        result = 1;
      }
      else
      {
        a1a = *(_DWORD *)(*(_DWORD *)(sub_420250(v18) + 4) + 32);
        if ( a1a )
        {
          v9 = sub_420250(v16);
          if ( CCastle::IsAllCastleWarRelation(*(_DWORD *)(v9 + 4)) && (sub_417430() || sub_417450()) )
          {
            CRWLock::ReadUnlock(&unk_4E0980);
            result = 94;
          }
          else if ( bAnswer )
          {
            v10 = sub_420250(v16);
            if ( CGuild::IsTempMemberFUll(*(CGuild **)(v10 + 4)) )
            {
              CRWLock::ReadUnlock(&unk_4E0980);
              result = 23;
            }
            else
            {
              CRWLock::ReadUnlock(&unk_4E0980);
              v13 = nGID;
              v12 = pPlayer->m_nPID;
              v11 = CBase::Id(pPlayer);
              CDBSocket::Write(40, "ddd", v11, v12, v13);
              result = 0;
            }
          }
          else
          {
            CPlayer::Write(a1a, 94, "bbs", 0, 28, pPlayer->m_szName);
            CRWLock::ReadUnlock(&unk_4E0980);
            result = 0;
          }
        }
        else
        {
          CRWLock::ReadUnlock(&unk_4E0980);
          result = 24;
        }
      }
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00413C20) --------------------------------------------------------
int __cdecl CGuild::ConfluxSecedeAnswer(CPlayer *pPlayer, int nGID, int nDate)
{
  int result; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-18h]
  CIOBuffer *v10; // [esp-8h] [ebp-14h]
  int v11; // [esp-4h] [ebp-10h]
  char v12[4]; // [esp+0h] [ebp-Ch] BYREF
  char v13[4]; // [esp+4h] [ebp-8h] BYREF
  CIOBuffer *v14; // [esp+8h] [ebp-4h]

  if ( nDate )
  {
    CPlayer::Write((int)pPlayer, 94, "bbsd", 0, 6, pPlayer->m_szName, nDate);
    result = 0;
  }
  else
  {
    CRWLock::WriteLock(&unk_4E0980);
    sub_44AE20(dword_4E0968, v13, &nGID);
    v4 = sub_430C20(dword_4E0968, (int)v12);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 1;
    }
    else
    {
      v9 = nGID;
      v5 = sub_420250(v13);
      if ( CGuild::MemberADD(*(_DWORD *)(v5 + 4), v9, (int)pPlayer, 6) )
      {
        CDBSocket::Write(43, "dd", nGID, pPlayer->m_nPID);
        v11 = nGID;
        v6 = sub_420250(v13);
        CGuild::SendMemberInfo(*(CGuild **)(v6 + 4), pPlayer, v11);
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v13) + 4) + 396) )
        {
          v7 = sub_420250(v13);
          CAlliance::AllianceInfo(*(const char **)(*(_DWORD *)(v7 + 4) + 396), (int)pPlayer);
        }
        v14 = (CIOBuffer *)MakePacket(0x5Eu, "bbsb", 0, 30, pPlayer->m_szName, LOBYTE(pPlayer->m_nLevel));
        v10 = v14;
        v8 = sub_420250(v13);
        CGuild::Broadcast(*(_DWORD *)(v8 + 4), v10, 0);
        CIOBuffer::Release(v14);
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 0;
      }
      else
      {
        LOG_ERR("CGuild::ConfluxSecedeAnswer() member add error (gid:%d,pid:%d)", nGID, pPlayer->m_nPID);
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 1;
      }
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00413DB0) --------------------------------------------------------
BOOL __thiscall CGuild::IsTempMemberFUll(CGuild *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-8h] BYREF
  int v7; // [esp+10h] [ebp-4h]

  v7 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 24) == 6 )
      ++v7;
    sub_446090((int *)&v6, v5, 0);
  }
  return v7 >= 10;
}

//----- (00413E30) --------------------------------------------------------
int __thiscall CGuild::Secession(CGuild *this, CPlayer *pPlayer)
{
  int v2; // eax
  int v3; // eax
  int result; // eax
  int v5; // eax
  int v6; // [esp-4h] [ebp-1Ch]
  char v8[4]; // [esp+4h] [ebp-14h] BYREF
  CIOBuffer *v9; // [esp+8h] [ebp-10h]
  int v10; // [esp+Ch] [ebp-Ch]
  int a2; // [esp+10h] [ebp-8h] BYREF
  void *v12; // [esp+14h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, &a2, &pPlayer->m_nPID);
  v2 = sub_430C20(&this->m_cGuildMemberMap, (int)v8);
  if ( (unsigned __int8)unknown_libname_8(v2) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    v6 = pPlayer->m_nPID;
    v3 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::Secession() member delete error (gid:%d,pid:%d)", v3, v6);
    result = 1;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a2) + 4) + 24) == 1 )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 31;
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(sub_420250(&a2) + 4) + 32) = 0;
    CIOObject::Release(pPlayer);
    CPlayer::SetGID((CIOCriticalSection *)pPlayer, 0);
    CPlayer::SetGuild((CIOObject **)pPlayer, 0);
    CPlayer::SetGuildLevel((CIOCriticalSection *)pPlayer, 0);
    CPlayer::SetGuildName((char *)pPlayer, &DefaultNullString);
    CPlayer::SetGuildStandard((CIOCriticalSection *)pPlayer, 0);
    CPlayer::SetGuildClass((int)pPlayer, 0, &DefaultNullString);
    CPlayer::BreakStandard((CIOCriticalSection *)pPlayer);
    CGuild::MemberDEL(this, a2);
    v10 = time(0) + 259200;
    CDBSocket::Write(45, "dd", pPlayer->m_nPID, v10);
    v5 = CBase::Id(pPlayer);
    v12 = MakePacket(0x5Eu, "bdssbd", 9, v5, &DefaultNullString, &DefaultNullString, 0, 0);
    CGuild::SendPlayerSight((int)pPlayer, v12, 0);
    if ( --this->m_nPlayerRef )
    {
      v9 = (CIOBuffer *)MakePacket(0x5Eu, "bbs", 0, 32, pPlayer->m_szName);
      CGuild::Broadcast((int)this, v9, 0);
      CIOBuffer::Release(v9);
    }
    else
    {
      this->m_dwDeleteTick = GetTickCount() + 600000;
    }
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 33;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414030) --------------------------------------------------------
int __thiscall CGuild::Banish(CGuild *this, CPlayer *pPlayer, char *szName)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  _DWORD *v9; // eax
  int v10; // [esp-4h] [ebp-28h]
  int v11; // [esp-4h] [ebp-28h]
  char v13[4]; // [esp+4h] [ebp-20h] BYREF
  char v14[4]; // [esp+8h] [ebp-1Ch] BYREF
  void *v15; // [esp+Ch] [ebp-18h]
  int v16; // [esp+10h] [ebp-14h]
  int a2; // [esp+14h] [ebp-10h] BYREF
  CIOObject **a1; // [esp+18h] [ebp-Ch]
  char v19[4]; // [esp+1Ch] [ebp-8h] BYREF
  CIOBuffer *v20; // [esp+20h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, v19, &pPlayer->m_nPID);
  v3 = sub_430C20(&this->m_cGuildMemberMap, (int)v14);
  if ( (unsigned __int8)unknown_libname_8(v3) )
  {
    v10 = pPlayer->m_nPID;
    v4 = CPlayer::GetGID(pPlayer);
    LOG_ERR("CGuild::Banish() member find error (gid:%d,pid:%d)", v4, v10);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 1;
  }
  else
  {
    v6 = sub_420250(v19);
    if ( CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 24), 1) )
    {
      CGuild::FindMember(this, (int)&a2, szName);
      v7 = sub_430C20(&this->m_cGuildMemberMap, (int)v13);
      if ( (unsigned __int8)unknown_libname_8(v7) )
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 4;
      }
      else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a2) + 4) + 24) == 1 )
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 34;
      }
      else
      {
        v20 = (CIOBuffer *)MakePacket(S2C_GUILD, "bbs", 0, 35, szName);
        CGuild::Broadcast((int)this, v20, 0);
        CIOBuffer::Release(v20);
        a1 = *(CIOObject ***)(*(_DWORD *)(sub_420250(&a2) + 4) + 32);
        if ( a1 )
        {
          if ( CPlayer::GetGID((CPlayer *)a1) )
          {
            CPlayer::SetGID((CPlayer *)a1, 0);
            CPlayer::SetGuild(a1, 0);
            CPlayer::SetGuildLevel((CPlayer *)a1, 0);
            CPlayer::SetGuildName((CPlayer *)a1, &DefaultNullString);
            CPlayer::SetGuildStandard((CPlayer *)a1, 0);
            CPlayer::SetGuildClass((CPlayer *)a1, 0, &DefaultNullString);
            CPlayer::BreakStandard((CIOCriticalSection *)a1);
            v8 = CBase::Id((CBase *)a1);
            v15 = MakePacket(S2C_GUILD, "bdssbd", 9, v8, &DefaultNullString, &DefaultNullString, 0, 0);
            CGuild::SendPlayerSight((int)a1, v15, 0);
            if ( !--this->m_nPlayerRef )
              LOG_ERR("CGuild::Banish() player reference error");
          }
          CIOObject::Release((CIOObject *)a1);
          *(_DWORD *)(*(_DWORD *)(sub_420250(&a2) + 4) + 32) = 0;
        }
        v16 = time(0) + 259200;
        v11 = v16;
        v9 = (_DWORD *)sub_420250(&a2);
        CDBSocket::Write(S2D_GUILD_SECEDER, "dd", *v9, v11);
        CGuild::MemberDEL(this, a2);
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 36;
      }
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004142D0) --------------------------------------------------------
int __thiscall CGuild::Appointment(CGuild *this, CPlayer *pPlayer, char *szName, char *szTitle)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // esi
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // eax
  _DWORD *v21; // eax
  int v22; // eax
  int *v23; // [esp-10h] [ebp-58h]
  int *v24; // [esp-Ch] [ebp-54h]
  int v25; // [esp-8h] [ebp-50h]
  void *v26; // [esp-8h] [ebp-50h]
  int v27; // [esp-8h] [ebp-50h]
  int v28; // [esp-4h] [ebp-4Ch]
  char *v29; // [esp-4h] [ebp-4Ch]
  int v30; // [esp-4h] [ebp-4Ch]
  int v31; // [esp-4h] [ebp-4Ch]
  int v32; // [esp-4h] [ebp-4Ch]
  int v33; // [esp+4h] [ebp-44h]
  int v34; // [esp+8h] [ebp-40h]
  int v35; // [esp+Ch] [ebp-3Ch]
  int v36; // [esp+10h] [ebp-38h]
  int v37; // [esp+14h] [ebp-34h]
  int v38; // [esp+18h] [ebp-30h]
  int v39; // [esp+1Ch] [ebp-2Ch]
  int v40; // [esp+20h] [ebp-28h]
  char v42[4]; // [esp+28h] [ebp-20h] BYREF
  char v43[4]; // [esp+2Ch] [ebp-1Ch] BYREF
  void *v44; // [esp+30h] [ebp-18h]
  int nClass; // [esp+34h] [ebp-14h]
  time_t v46; // [esp+38h] [ebp-10h]
  int a2a; // [esp+3Ch] [ebp-Ch] BYREF
  char v48[4]; // [esp+40h] [ebp-8h] BYREF
  CIOBuffer *v49; // [esp+44h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, v48, &pPlayer->m_nPID);
  v4 = sub_430C20(&this->m_cGuildMemberMap, (int)v43);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    v28 = pPlayer->m_nPID;
    v5 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::Appointment() member find error (gid:%d,pid:%d)", v5, v28);
    CRWLock::WriteUnlock(&unk_4E0980);
    return 1;
  }
  v7 = sub_420250(v48);
  if ( !CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v7 + 4) + 24), 3) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 22;
  }
  CGuild::FindMember((int)this, (int)&a2a, szName);
  v8 = sub_430C20(&this->m_cGuildMemberMap, (int)v42);
  if ( (unsigned __int8)unknown_libname_8(v8) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 4;
  }
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 24) == 1 )
    goto LABEL_8;
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 24) == 2
    && (v9 = *(_DWORD *)(sub_420250(&a2a) + 4), *(_DWORD *)(v9 + 36) > time(0)) )
  {
    v10 = sub_420250(&a2a);
    CPlayer::Write((int)pPlayer, 94, "bbd", 0, 39, *(_DWORD *)(*(_DWORD *)(v10 + 4) + 36));
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 0;
  }
  else
  {
    nClass = CGuild::GetTitle2Class(this, szTitle);
    if ( nClass )
    {
      if ( nClass == 1 )
      {
LABEL_8:
        CRWLock::WriteUnlock(&unk_4E0980);
        return 37;
      }
      v11 = sub_420250(&a2a);
      if ( *(_DWORD *)(*(_DWORD *)(v11 + 4) + 24) == nClass )
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 41;
      }
      else if ( nClass < 6 && CGuild::IsMemberFull(this) )
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 40;
      }
      else if ( CGuild::IsAppointmentFull(this, nClass) )
      {
        v46 = CGuild::GetAppointmentLimitTime(this, nClass);
        if ( v46 && v46 > time(0) )
        {
          CRWLock::WriteUnlock(&unk_4E0980);
          CPlayer::Write((int)pPlayer, 94, "bbd", 0, 39, v46);
          result = 0;
        }
        else
        {
          if ( nClass == 6 )
          {
            if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20) >= 0 )
              v40 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20);
            else
              v40 = 0;
            if ( this->m_nPoint - v40 >= 0 )
            {
              if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20) >= 0 )
                v38 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20);
              else
                v38 = 0;
              v39 = this->m_nPoint - v38;
            }
            else
            {
              v39 = 0;
            }
            this->m_nPoint = v39;
          }
          else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 24) == 6 )
          {
            if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20) >= 0 )
              v37 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20);
            else
              v37 = 0;
            if ( v37 + this->m_nPoint <= 2000000000 )
            {
              if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20) >= 0 )
                v35 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 20);
              else
                v35 = 0;
              v36 = v35 + this->m_nPoint;
            }
            else
            {
              v36 = 2000000000;
            }
            this->m_nPoint = v36;
          }
          if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
            v34 = CGuild::CalPenaltyTLevel((int *)this);
          else
            v34 = CGuild::CalPenaltyLevel((int *)this);
          CGuild::SetLevel((int)this, v34);
          if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 32)
            && (CGuild::GetGuildSkill(this->m_nPenaltyLevel) & 1) != 0 )
          {
            v12 = sub_420250(&a2a);
            *(_DWORD *)(*(_DWORD *)(v12 + 4) + 24) = nClass;
            v29 = CGuild::GetClass2Title(this, nClass);
            v25 = nClass;
            v13 = sub_420250(&a2a);
            CPlayer::SetGuildClass(*(_DWORD *)(*(_DWORD *)(v13 + 4) + 32), v25, v29);
            v14 = sub_420250(&a2a);
            v30 = CPlayer::GetGuildStandard(*(int **)(*(_DWORD *)(v14 + 4) + 32));
            v15 = sub_420250(&a2a);
            v24 = CPlayer::GetGuildName(*(int **)(*(_DWORD *)(v15 + 4) + 32));
            v16 = sub_420250(&a2a);
            v23 = CPlayer::GetGuildClassTitle(*(int **)(*(_DWORD *)(v16 + 4) + 32));
            v17 = sub_420250(&a2a);
            v18 = CBase::Id(*(CBase **)(*(_DWORD *)(v17 + 4) + 32));
            v44 = MakePacket(0x5Eu, "bdssbd", 9, v18, v23, v24, 1, v30);
            v26 = v44;
            v19 = sub_420250(&a2a);
            CGuild::SendPlayerSight(*(_DWORD *)(*(_DWORD *)(v19 + 4) + 32), v26, 0);
          }
          else
          {
            v20 = sub_420250(&a2a);
            *(_DWORD *)(*(_DWORD *)(v20 + 4) + 24) = nClass;
          }
          if ( nClass == 2 )
            v33 = time(0) + 604800;
          else
            v33 = 0;
          *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 36) = v33;
          v31 = *(_DWORD *)(*(_DWORD *)(sub_420250(&a2a) + 4) + 36);
          v27 = (unsigned __int8)nClass;
          v21 = (_DWORD *)sub_420250(&a2a);
          CDBSocket::Write(46, "dbd", *v21, v27, v31);
          v32 = (unsigned __int8)nClass;
          v22 = sub_420250(&a2a);
          v49 = (CIOBuffer *)MakePacket(0x5Eu, "bbsb", 0, 42, *(_DWORD *)(v22 + 4), v32);
          CGuild::Broadcast((int)this, v49, 0);
          CIOBuffer::Release(v49);
          CRWLock::WriteUnlock(&unk_4E0980);
          result = 0;
        }
      }
      else
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 38;
      }
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 55;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414890) --------------------------------------------------------
int __thiscall CGuild::Dissolution(CGuild *this, CPlayer *pPlayer)
{
  int v2; // eax
  int v3; // eax
  int result; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v6; // eax
  int v7; // [esp-4h] [ebp-2Ch]
  void *v9; // [esp+4h] [ebp-24h]
  char v10[4]; // [esp+8h] [ebp-20h] BYREF
  char v11[4]; // [esp+Ch] [ebp-1Ch] BYREF
  char v12[4]; // [esp+10h] [ebp-18h] BYREF
  int a1; // [esp+14h] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v14; // [esp+18h] [ebp-10h] BYREF
  int v15; // [esp+1Ch] [ebp-Ch]
  char v16[4]; // [esp+20h] [ebp-8h] BYREF
  void *a2; // [esp+24h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, v16, &pPlayer->m_nPID);
  v2 = sub_430C20(&this->m_cGuildMemberMap, (int)v12);
  if ( (unsigned __int8)unknown_libname_8(v2) )
  {
    v7 = pPlayer->m_nPID;
    v3 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::Dissolution() member find error (gid:%d,pid:%d)", v3, v7);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 1;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v16) + 4) + 24) == 1 )
  {
    if ( CCastle::IsAllCastleWarRelation((int)this) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 107;
    }
    else
    {
      v15 = time(0) + 259200;
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v14);
      while ( 1 )
      {
        v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v10);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                &v14,
                v5) )
          break;
        a1 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v14) + 4) + 32);
        if ( a1 )
        {
          CPlayer::SetGID((CIOCriticalSection *)a1, 0);
          CPlayer::SetGuild((CIOObject **)a1, 0);
          CPlayer::SetGuildLevel((CIOCriticalSection *)a1, 0);
          CPlayer::SetGuildName((char *)a1, &DefaultNullString);
          CPlayer::SetGuildStandard((CIOCriticalSection *)a1, 0);
          CPlayer::SetGuildClass(a1, 0, &DefaultNullString);
          CPlayer::BreakStandard((CIOCriticalSection *)a1);
          CPlayer::Write(a1, 94, "bb", 0, 43);
          v6 = CBase::Id((CBase *)a1);
          a2 = MakePacket(0x5Eu, "bdssbd", 9, v6, &DefaultNullString, &DefaultNullString, 0, 0);
          CGuild::SendPlayerSight(a1, a2, 0);
          CIOObject::Release((CIOObject *)a1);
          *(_DWORD *)(*(_DWORD *)(sub_420250(&v14) + 4) + 32) = 0;
          --this->m_nPlayerRef;
        }
        v9 = *(void **)(sub_420250(&v14) + 4);
        operator delete(v9);
        sub_446090((int *)&v14, v11, 0);
      }
      sub_418530(&this->m_cGuildMemberMap);
      if ( this->m_nPlayerRef > 0 )
        LOG_ERR("CGuild::Dissolution() plaer reference error (ref:%d)", this->m_nPlayerRef);
      this->m_dwDeleteTick = GetTickCount() + 600000;
      CDBSocket::Write(47, "dd", pPlayer->m_nPID, v15);
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 44;
    }
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 22;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414B30) --------------------------------------------------------
int __thiscall CGuild::TitleChange(CGuild *this, CPlayer *pPlayer, char *szTitle, char *szNewTitle)
{
  int result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int *v12; // [esp-10h] [ebp-34h]
  int *v13; // [esp-Ch] [ebp-30h]
  int v14; // [esp-8h] [ebp-2Ch]
  int v15; // [esp-4h] [ebp-28h]
  int v16; // [esp-4h] [ebp-28h]
  char v18[4]; // [esp+4h] [ebp-20h] BYREF
  char v19[4]; // [esp+8h] [ebp-1Ch] BYREF
  char v20[4]; // [esp+Ch] [ebp-18h] BYREF
  char v21[4]; // [esp+10h] [ebp-14h] BYREF
  int a1; // [esp+14h] [ebp-10h]
  int nClass; // [esp+18h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v24; // [esp+1Ch] [ebp-8h] BYREF
  CIOBuffer *v25; // [esp+20h] [ebp-4h]

  if ( !IsValidName(szNewTitle) )
    return 45;
  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, &v24, &pPlayer->m_nPID);
  v5 = sub_430C20(&this->m_cGuildMemberMap, (int)v21);
  if ( (unsigned __int8)unknown_libname_8(v5) )
  {
    v15 = pPlayer->m_nPID;
    v6 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::TitelChange() member find error (gid:%d,pid:%d)", v6, v15);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 1;
  }
  else
  {
    v7 = sub_420250(&v24);
    if ( CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v7 + 4) + 24), 4) )
    {
      nClass = CGuild::GetTitle2Class(this, szTitle);
      if ( nClass )
      {
        CGuild::SetClassTitle(this, nClass, szNewTitle);
        v25 = (CIOBuffer *)MakePacket(0x5Eu, "bbbs", 0, 46, (unsigned __int8)nClass, szNewTitle);
        CGuild::Broadcast((int)this, v25, 0);
        CIOBuffer::Release(v25);
        for ( v24._Myptr = *(CIOSocket::CIOTimer **)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
                                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20);
              ;
              sub_446090((int *)&v24, v19, 0) )
        {
          v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v18);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v24,
                  v8) )
            break;
          a1 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v24) + 4) + 32);
          if ( a1 )
          {
            v9 = sub_420250(&v24);
            if ( *(_DWORD *)(*(_DWORD *)(v9 + 4) + 24) == nClass )
            {
              CPlayer::SetGuildClass(a1, nClass, szNewTitle);
              if ( (CGuild::GetGuildSkill(this->m_nPenaltyLevel) & 1) != 0 )
              {
                v16 = CPlayer::GetGuildStandard((int *)a1);
                v13 = CPlayer::GetGuildName((int *)a1);
                v12 = CPlayer::GetGuildClassTitle((int *)a1);
                v10 = CBase::Id((CBase *)a1);
                v25 = (CIOBuffer *)MakePacket(0x5Eu, "bdssbd", 9, v10, v12, v13, 1, v16);
                CGuild::SendPlayerSight(a1, v25, 0);
              }
            }
          }
        }
        v14 = (unsigned __int8)nClass;
        v11 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
        CDBSocket::Write(48, "dbs", v11, v14, szNewTitle);
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 0;
      }
      else
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 55;
      }
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414D90) --------------------------------------------------------
int __thiscall CGuild::SetTodayMessage(CGuild *this, CPlayer *pPlayer, char *szMessage)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-4h] [ebp-14h]
  char v10[4]; // [esp+4h] [ebp-Ch] BYREF
  char v11[4]; // [esp+8h] [ebp-8h] BYREF
  CIOBuffer *v12; // [esp+Ch] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, v11, &pPlayer->m_nPID);
  v3 = sub_430C20(&this->m_cGuildMemberMap, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3) )
  {
    v8 = pPlayer->m_nPID;
    v4 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::TitelChange() member find error (gid:%d,pid:%d)", v4, v8);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 1;
  }
  else
  {
    v6 = sub_420250(v11);
    if ( CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 24), 2) )
    {
      if ( IsValidString(szMessage) )
      {
        strcpy(this->m_szTodayMessage, szMessage);
        v12 = (CIOBuffer *)MakePacket(0x5Eu, "bbs", 0, 5, this->m_szTodayMessage);
        CGuild::Broadcast((int)this, v12, 0);
        CIOBuffer::Release(v12);
        v7 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
        CDBSocket::Write(49, "ds", v7, this->m_szTodayMessage);
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 0;
      }
      else
      {
        CRWLock::WriteUnlock(&unk_4E0980);
        result = 56;
      }
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414EF0) --------------------------------------------------------
void __thiscall CGuild::GetTodayMessage(CGuild *this, CPlayer *pPlayer)
{
  CRWLock::ReadLock(&unk_4E0980);
  CPlayer::Write((int)pPlayer, 94, "bbs", 0, 5, this->m_szTodayMessage);
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (00414F40) --------------------------------------------------------
void __thiscall CGuild::SendMemberInfo(CGuild *this, CPlayer *pPlayer, int nGID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  unsigned __int8 v6; // al
  char v7; // [esp+7h] [ebp-1019h]
  char v9[4]; // [esp+Ch] [ebp-1014h] BYREF
  char v10[4]; // [esp+10h] [ebp-1010h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v11; // [esp+14h] [ebp-100Ch] BYREF
  char v12; // [esp+18h] [ebp-1008h] BYREF
  char v13[4092]; // [esp+19h] [ebp-1007h] BYREF
  __int16 v14; // [esp+1015h] [ebp-Bh]
  char v15; // [esp+1017h] [ebp-9h]
  int v16; // [esp+1018h] [ebp-8h]
  char *v17; // [esp+101Ch] [ebp-4h]

  v16 = dword_4D9830;
  v12 = 0;
  memset(v13, 0, sizeof(v13));
  v14 = 0;
  v15 = 0;
  v17 = &v12;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v11);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v9);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v11,
            v3) )
      break;
    v4 = sub_420250(&v11);
    v17 = PutString(v17, *(const char **)(v4 + 4));
    v5 = sub_420250(&v11);
    v17 = PutNumeric<unsigned char>(v17, *(_BYTE *)(*(_DWORD *)(v5 + 4) + 24));
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v11) + 4) + 28) && *(_DWORD *)(*(_DWORD *)(sub_420250(&v11) + 4) + 32) )
      v7 = *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v11) + 4) + 32) + 60);
    else
      v7 = 0;
    v17 = PutNumeric<unsigned char>(v17, v7);
    sub_446090((int *)&v11, v10, 0);
  }
  v6 = unknown_libname_10(&this->m_cGuildMemberMap, &v12);
  CPlayer::Write(
    (int)pPlayer,
    94,
    "bdsssssssbm",
    6,
    nGID,
    this->m_szName,
    this->m_szLeader,
    this->m_szSubLeader,
    this->m_szCenturion,
    this->m_szTen,
    this->m_szRegular,
    this->m_szTemp,
    v6);
  CPlayer::Write(
    (int)pPlayer,
    94,
    "bbdddd",
    8,
    this->m_nPenaltyLevel,
    this->m_nPoint,
    this->m_nExp,
    this->m_nTotalTax,
    this->m_nStandard);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00415170) --------------------------------------------------------
int __thiscall CGuild::AdminInfo(CGuild *this, CPlayer *pPlayer)
{
  int result; // eax

  CRWLock::ReadLock(&unk_4E0980);
  if ( pPlayer->m_nPID == CPlayer::GetGID((CIOCriticalSection *)pPlayer) )
  {
    CPlayer::Write(
      (int)pPlayer,
      94,
      "bddddd",
      7,
      this->m_nSubLeaderAble,
      this->m_nCenturionAble,
      this->m_nTenAble,
      this->m_nRegularAble,
      this->m_nTempAble);
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 0;
  }
  else
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 22;
  }
  return result;
}

//----- (00415200) --------------------------------------------------------
int __thiscall CGuild::BasicInfo(CGuild *this, CPlayer *pPlayer)
{
  CRWLock::ReadLock(&unk_4E0980);
  CPlayer::Write(
    (int)pPlayer,
    94,
    "bbdddd",
    8,
    this->m_nPenaltyLevel,
    this->m_nPoint,
    this->m_nExp,
    this->m_nTotalTax,
    this->m_nStandard);
  CRWLock::ReadUnlock(&unk_4E0980);
  return 0;
}

//----- (00415260) --------------------------------------------------------
int __thiscall CGuild::SetSkillAble(CGuild *this, CPlayer *pPlayer, int nSubLeaderAble, int nCenturionAble, int nTenAble, int nRegularAble, int nTempAble)
{
  int result; // eax

  CRWLock::WriteLock(&unk_4E0980);
  if ( pPlayer->m_nPID == CPlayer::GetGID((CIOCriticalSection *)pPlayer) )
  {
    this->m_nSubLeaderAble = nSubLeaderAble;
    this->m_nCenturionAble = nCenturionAble;
    this->m_nTenAble = nTenAble;
    this->m_nRegularAble = nRegularAble;
    this->m_nTempAble = nTempAble;
    CDBSocket::Write(
      51,
      "dddddd",
      pPlayer->m_nPID,
      this->m_nSubLeaderAble,
      this->m_nCenturionAble,
      this->m_nTenAble,
      this->m_nRegularAble,
      this->m_nTempAble);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 47;
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 22;
  }
  return result;
}

//----- (00415340) --------------------------------------------------------
int __thiscall CGuild::CheckStandard(CGuild *this, CPlayer *pPlayer, int nStandard)
{
  int result; // eax
  int v4; // eax
  int nGID; // [esp+4h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  nGID = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
  if ( pPlayer->m_nPID == nGID )
  {
    if ( this->m_nPenaltyLevel >= 2 )
    {
      if ( !(unsigned __int16)this->m_nStandard )
      {
        v4 = CBase::Id(pPlayer);
        CDBSocket::Write(68, "ddd", v4, nGID, nStandard);
      }
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 0;
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 103;
    }
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 22;
  }
  return result;
}

//----- (004153F0) --------------------------------------------------------
int __thiscall CGuild::SetStandard(CGuild *this, CPlayer *pPlayer, int nStandard)
{
  int result; // eax
  int v4; // eax
  int nGID; // [esp+4h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E0980);
  nGID = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
  if ( pPlayer->m_nPID == nGID )
  {
    if ( this->m_nPenaltyLevel >= 2 )
    {
      v4 = CBase::Id(pPlayer);
      CDBSocket::Write(69, "ddd", v4, nGID, nStandard);
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 0;
    }
    else
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      result = 103;
    }
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 22;
  }
  return result;
}

//----- (00415480) --------------------------------------------------------
int __thiscall CGuild::OnSetStandard(CGuild *this, int nId, int nAns, int nGID, int nStandard)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v7; // [esp+0h] [ebp-20h]
  char v9[4]; // [esp+8h] [ebp-18h] BYREF
  char v10[4]; // [esp+Ch] [ebp-14h] BYREF
  CPlayer *player; // [esp+10h] [ebp-10h]
  int a1; // [esp+14h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v13; // [esp+18h] [ebp-8h] BYREF
  CIOObject *Item; // [esp+1Ch] [ebp-4h]

  if ( nAns )
  {
    CRWLock::WriteLock(&unk_4E0980);
    this->m_nStandard = nStandard;
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v13);
    while ( 1 )
    {
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v9);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v13,
              v5) )
        break;
      a1 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v13) + 4) + 32);
      if ( a1 )
      {
        CPlayer::SetGuildStandard((CIOCriticalSection *)a1, nStandard);
        CPlayer::Write((CPlayer *)a1, S2C_GUILD, "bbd", 0, 48, nStandard);
      }
      sub_446090((int *)&v13, v10, 0);
    }
    CRWLock::WriteUnlock(&unk_4E0980);
  }
  Item = CPlayer::FindPlayer(nId);
  if ( Item )
  {
    if ( nAns )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&Item[63].m_nGeneralRef);
      player = (CPlayer *)Item[68].m_nTimerRef;
      if ( player )
      {
        v7 = *(int *)&player->m_szName[20] <= 500000 ? *(_DWORD *)&player->m_szName[20] : 500000;
        if ( !((int (__thiscall *)(CPlayer *, CIOObject *, int, int))player->SubMStateEx)(player, Item, 31, -v7) )
          CPlayer::_OutofInven((CPlayer *)Item, (CItem *)player);
      }
      CIOCriticalSection::Leave((int)&Item[63].m_nGeneralRef);
    }
    else
    {
      CPlayer::Write((CPlayer *)Item, S2C_GUILD, "bb", 0, 102);
    }
    CIOObject::Release(Item, (volatile int *)&Item[22]);
  }
  return 0;
}

//----- (00415600) --------------------------------------------------------
int __thiscall CGuild::SetExpADD(CGuild *this, CPlayer *pPlayer, int nExp)
{
  int v4; // ecx
  int v5; // ecx
  int v6; // eax
  int v7; // eax
  int v8; // eax
  __int64 v9; // [esp-10h] [ebp-3Ch]
  __int64 v10; // [esp-10h] [ebp-3Ch]
  int v11; // [esp-8h] [ebp-34h]
  int v12; // [esp+0h] [ebp-2Ch]
  __int64 v13; // [esp+8h] [ebp-24h]
  int v15; // [esp+28h] [ebp-4h]

  if ( !pPlayer->m_nExp )
    return 51;
  if ( nExp == 10 )
  {
    if ( dword_4D567C[2 * pPlayer->m_nLevel] | dword_4D5678[2 * pPlayer->m_nLevel] )
    {
      v4 = pPlayer->m_nLevel;
      LODWORD(v9) = dword_4D5678[2 * v4];
      HIDWORD(v9) = dword_4D567C[2 * v4];
      if ( v9 / 10 >= pPlayer->m_nExp )
      {
        LODWORD(v13) = pPlayer->m_nExp;
      }
      else
      {
        v5 = pPlayer->m_nLevel;
        HIDWORD(v10) = dword_4D567C[2 * v5];
        LODWORD(v10) = dword_4D5678[2 * v5];
        v13 = v10 / 10;
      }
      v12 = v13;
    }
    else
    {
      v12 = 0;
    }
    v15 = v12;
  }
  else
  {
    v15 = pPlayer->m_nExp;
  }
  if ( v15 <= 0 )
  {
    LOG_ERR(
      "CGuild::SetExpADD() exp cal error (exppercent:%d,nextlevelexp:%d,exp:%d)",
      nExp,
      dword_4D5678[2 * pPlayer->m_nLevel],
      dword_4D567C[2 * pPlayer->m_nLevel]);
    return 1;
  }
  CRWLock::WriteLock(&unk_4E0980);
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    if ( this->m_nExp >= 3 )
      goto LABEL_16;
    this->m_nExp += v15;
    if ( this->m_nExp > 3 )
    {
      v15 -= this->m_nExp - 3;
      this->m_nExp = 3;
    }
    v7 = CGuild::CalPenaltyTLevel((int *)this);
    CGuild::SetLevel((int)this, v7);
  }
  else
  {
    if ( this->m_nExp >= 16000000 )
    {
LABEL_16:
      CRWLock::WriteUnlock(&unk_4E0980);
      return 53;
    }
    this->m_nExp += v15;
    if ( this->m_nExp > 16000000 )
    {
      v15 -= this->m_nExp - 16000000;
      this->m_nExp = 16000000;
    }
    v6 = CGuild::CalPenaltyLevel((int *)this);
    CGuild::SetLevel((int)this, v6);
  }
  v11 = pPlayer->m_nPID;
  v8 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
  CDBSocket::Write(50, "ddd", v8, v11, v15);
  CRWLock::WriteUnlock(&unk_4E0980);
  pPlayer->UpdateProperty(pPlayer, 25, 0, v15, v15 >> 31);
  CPlayer::Write((int)pPlayer, 94, "bbd", 0, 52, v15);
  return 0;
}
// 4D5678: using guessed type int dword_4D5678[];

//----- (004158B0) --------------------------------------------------------
int __cdecl CGuild::SetExp(char *szName, int nExp)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  _DWORD *v7; // eax
  const char *v8; // [esp-4h] [ebp-18h]
  int v9; // [esp-4h] [ebp-18h]
  int a2; // [esp+0h] [ebp-14h]
  char v11[4]; // [esp+4h] [ebp-10h] BYREF
  char v12[4]; // [esp+8h] [ebp-Ch] BYREF
  int v13; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v14; // [esp+10h] [ebp-4h] BYREF

  if ( nExp < 0 || nExp > 16000000 )
    return 0;
  if ( strlen(szName) > 0xE )
    return 0;
  CRWLock::WriteLock(&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v14);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v11);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v14,
            v3) )
    {
      CDBSocket::Write(59, "sd", szName, nExp);
      CRWLock::WriteUnlock(&unk_4E0980);
      return 1;
    }
    v8 = (const char *)(*(_DWORD *)(sub_420250(&v14) + 4) + 44);
    if ( !strcmp(szName, v8) )
      break;
    sub_446090((int *)&v14, v12, 0);
  }
  v13 = nExp - *(_DWORD *)(*(_DWORD *)(sub_420250(&v14) + 4) + 68);
  *(_DWORD *)(*(_DWORD *)(sub_420250(&v14) + 4) + 68) = nExp;
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    v5 = sub_420250(&v14);
    a2 = CGuild::CalPenaltyTLevel(*(int **)(v5 + 4));
  }
  else
  {
    v4 = sub_420250(&v14);
    a2 = CGuild::CalPenaltyLevel(*(int **)(v4 + 4));
  }
  v6 = sub_420250(&v14);
  CGuild::SetLevel(*(_DWORD *)(v6 + 4), a2);
  v9 = v13;
  v7 = (_DWORD *)sub_420250(&v14);
  CDBSocket::Write(50, "ddd", *v7, 0, v9);
  CRWLock::WriteUnlock(&unk_4E0980);
  return 1;
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00415A20) --------------------------------------------------------
_DWORD __stdcall CGuild::SetConnectTell(CPlayer *pPlayer, int bTell)
{
  int v2; // ecx
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  int v7; // [esp+0h] [ebp-10h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  CIOBuffer *v10; // [esp+Ch] [ebp-4h]

  v7 = v2;
  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20((_DWORD *)(v7 + 380), v9, &pPlayer->m_nPID);
  v3 = sub_430C20((_DWORD *)(v7 + 380), (int)v8);
  if ( (unsigned __int8)unknown_libname_8(v3) )
  {
    v6 = pPlayer->m_nPID;
    v4 = CPlayer::GetGID((CIOCriticalSection *)pPlayer);
    LOG_ERR("CGuild::SetConnectTell() member find error (gid:%d,pid:%d)", v4, v6);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 1;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 28) == bTell )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 49;
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 28) = bTell;
    if ( bTell )
      v10 = (CIOBuffer *)MakePacket(0x5Eu, "bbsb", 0, 2, pPlayer->m_szName, pPlayer->m_nLevel);
    else
      v10 = (CIOBuffer *)MakePacket(0x5Eu, "bbs", 0, 3, pPlayer->m_szName);
    CGuild::Broadcast(v7, v10, (int)pPlayer);
    CIOBuffer::Release(v10);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 50;
  }
  return result;
}
// 415A26: variable 'v2' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00415B60) --------------------------------------------------------
void __stdcall CGuild::SetMemberLelvelUp(CGuild *this, char *szName)
{
  int v2; // ecx
  int v3; // [esp+0h] [ebp-8h]
  CIOBuffer *v4; // [esp+4h] [ebp-4h]

  v3 = v2;
  CRWLock::ReadLock(&unk_4E0980);
  v4 = (CIOBuffer *)MakePacket(0x5Eu, "bbbs", 0, 54, (unsigned __int8)szName, this);
  CGuild::Broadcast(v3, v4, 0);
  CIOBuffer::Release(v4);
  CRWLock::ReadUnlock(&unk_4E0980);
}
// 415B66: variable 'v2' is possibly undefined

//----- (00415BC0) --------------------------------------------------------
int __thiscall CGuild::GetTitle2Class(CGuild *this, char *szTitle)
{
  char *v2; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax

  if ( !strcmp(szTitle, "1") )
    return 1;
  v2 = GetStr(912);
  if ( !strcmp(szTitle, v2) || !strcmp(szTitle, this->m_szLeader) )
    return 1;
  if ( !strcmp(szTitle, "2") )
    return 2;
  v4 = GetStr(913);
  if ( !strcmp(szTitle, v4) || !strcmp(szTitle, this->m_szSubLeader) )
    return 2;
  if ( !strcmp(szTitle, "3") )
    return 3;
  v5 = GetStr(914);
  if ( !strcmp(szTitle, v5) || !strcmp(szTitle, this->m_szCenturion) )
    return 3;
  if ( !strcmp(szTitle, "4") )
    return 4;
  v6 = GetStr(915);
  if ( !strcmp(szTitle, v6) || !strcmp(szTitle, this->m_szTen) )
    return 4;
  if ( !strcmp(szTitle, "5") )
    return 5;
  v7 = GetStr(916);
  if ( !strcmp(szTitle, v7) || !strcmp(szTitle, this->m_szRegular) )
    return 5;
  if ( !strcmp(szTitle, "6") )
    return 6;
  v8 = GetStr(917);
  if ( !strcmp(szTitle, v8) || !strcmp(szTitle, this->m_szTemp) )
    return 6;
  return 0;
}

//----- (00415DD0) --------------------------------------------------------
char *__thiscall CGuild::GetClass2Title(CGuild *this, int nClass)
{
  char *result; // eax

  switch ( nClass )
  {
    case 1:
      result = this->m_szLeader;
      break;
    case 2:
      result = this->m_szSubLeader;
      break;
    case 3:
      result = this->m_szCenturion;
      break;
    case 4:
      result = this->m_szTen;
      break;
    case 5:
      result = this->m_szRegular;
      break;
    default:
      result = this->m_szTemp;
      break;
  }
  return result;
}

//----- (00415E50) --------------------------------------------------------
char *__thiscall CGuild::SetClassTitle(CGuild *this, int nClass, char *szNewTitle)
{
  char *result; // eax

  result = (char *)nClass;
  switch ( nClass )
  {
    case 1:
      result = strcpy(this->m_szLeader, szNewTitle);
      break;
    case 2:
      result = strcpy(this->m_szSubLeader, szNewTitle);
      break;
    case 3:
      result = strcpy(this->m_szCenturion, szNewTitle);
      break;
    case 4:
      result = strcpy(this->m_szTen, szNewTitle);
      break;
    case 5:
      result = strcpy(this->m_szRegular, szNewTitle);
      break;
    case 6:
      result = strcpy(this->m_szTemp, szNewTitle);
      break;
    default:
      return result;
  }
  return result;
}

//----- (00415F20) --------------------------------------------------------
BOOL __thiscall CGuild::IsMemberFull(CGuild *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  BOOL result; // eax
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  char v5[4]; // [esp+Ch] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+10h] [ebp-8h] BYREF
  int v7; // [esp+14h] [ebp-4h]

  v7 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 24) != 6 )
      ++v7;
    sub_446090((int *)&v6, v5, 0);
  }
  switch ( this->m_nPenaltyLevel )
  {
    case 1:
      result = v7 >= 12;
      break;
    case 2:
      result = v7 >= 26;
      break;
    case 3:
      result = v7 >= 40;
      break;
    case 4:
      result = v7 >= 54;
      break;
    default:
      result = 1;
      break;
  }
  return result;
}

//----- (00416000) --------------------------------------------------------
int __thiscall CGuild::IsAppointmentFull(CGuild *this, int nClass)
{
  int result; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  char v7[4]; // [esp+8h] [ebp-10h] BYREF
  char v8[4]; // [esp+Ch] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v9; // [esp+10h] [ebp-8h] BYREF
  unsigned int v10; // [esp+14h] [ebp-4h]

  if ( nClass == 5 || nClass == 6 )
    return 1;
  v10 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v7);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v9,
            v3) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v9) + 4) + 24) == nClass )
      ++v10;
    sub_446090((int *)&v9, v8, 0);
  }
  switch ( nClass )
  {
    case 2:
      return (int)v10 <= 0;
    case 3:
      v4 = unknown_libname_10(&this->m_cGuildMemberMap, 3);
      result = v10 < v4 / 0x64;
      break;
    case 4:
      v5 = unknown_libname_10(&this->m_cGuildMemberMap, 4);
      result = v10 < v5 / 0xA;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (00416100) --------------------------------------------------------
int __thiscall CGuild::GetAppointmentLimitTime(CGuild *this, int nClass)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  char v6[4]; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+Ch] [ebp-8h] BYREF
  int v8; // [esp+10h] [ebp-4h]

  v8 = 0;
  if ( nClass != 2 )
    return v8;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v3) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v7) + 4) + 24) == 2 )
      return *(_DWORD *)(*(_DWORD *)(sub_420250(&v7) + 4) + 36);
    sub_446090((int *)&v7, v6, 0);
  }
  return v8;
}

//----- (00416190) --------------------------------------------------------
int __stdcall CGuild::IsSameName(char *szName)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    v2 = sub_420250(&v6);
    if ( !strcmp(szName, (const char *)(*(_DWORD *)(v2 + 4) + 44)) )
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      return 1;
    }
    sub_446090((int *)&v6, v5, 0);
  }
  CRWLock::ReadUnlock(&unk_4E0980);
  return 0;
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00416230) --------------------------------------------------------
CGuild *__cdecl CGuild::FindGuild(int nGID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v4; // [esp+4h] [ebp-8h] BYREF
  CGuild *pGuild; // [esp+8h] [ebp-4h]

  pGuild = 0;
  CRWLock::ReadLock(&unk_4E0980);
  sub_44AE20(dword_4E0968, &v4, &nGID);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v4,
         v1) )
  {
    pGuild = *(CGuild **)(sub_420250(&v4) + 4);
    CIOObject::AddRef(pGuild, &pGuild->m_nTempRef);
  }
  CRWLock::ReadUnlock(&unk_4E0980);
  return pGuild;
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (004162B0) --------------------------------------------------------
CGuild *__cdecl CGuild::FindGuild(char *szName)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator pos; // [esp+8h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&pos);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E0968, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &pos,
            v1) )
      break;
    v2 = sub_420250(&pos);
    if ( !strcmp(szName, (const char *)(*(_DWORD *)(v2 + 4) + 44)) )
      return *(CGuild **)(sub_420250(&pos) + 4);
    sub_446090((int *)&pos, v5, 0);
  }
  return 0;
}
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00416330) --------------------------------------------------------
CPlayer *__thiscall CGuild::FindLeaderPlayer(CGuild *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 24) == 1 )
      return *(CPlayer **)(*(_DWORD *)(sub_420250(&v6) + 4) + 32);
    sub_446090((int *)&v6, v5, 0);
  }
  return 0;
}

//----- (004163B0) --------------------------------------------------------
char *__thiscall CGuild::GetLeaderName(CGuild *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 24) == 1 )
      return *(char **)(sub_420250(&v6) + 4);
    sub_446090((int *)&v6, v5, 0);
  }
  return &DefaultNullString;
}

//----- (00416430) --------------------------------------------------------
int __thiscall CGuild::FindMember(CGuild *this, int a2, char *Str1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v7[4]; // [esp+4h] [ebp-Ch] BYREF
  char v8[4]; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v9; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v7);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v9,
            v3) )
      break;
    v4 = sub_420250(&v9);
    if ( !strcmp(Str1, *(const char **)(v4 + 4)) )
      break;
    sub_446090((int *)&v9, v8, 0);
  }
  *(std::vector<CIOSocket::CIOTimer>::const_iterator *)a2 = v9;
  return a2;
}

//----- (004164B0) --------------------------------------------------------
CGuild *__cdecl CGuild::Create(char nLeaderPID)
{
  CAtlTraceSettings *v1; // eax
  CGuild *result; // eax
  CGuild *v3; // [esp+4h] [ebp-2Ch]
  char v4[8]; // [esp+10h] [ebp-20h] BYREF
  char v5[8]; // [esp+18h] [ebp-18h] BYREF
  CMemory **v6; // [esp+20h] [ebp-10h]
  CGuild *pGuild; // [esp+24h] [ebp-Ch]
  char rc[8]; // [esp+28h] [ebp-8h] BYREF

  CRWLock::WriteLock(&unk_4E0980);
  v6 = operator new(0x198u);
  if ( v6 )
    v3 = CGuild::CGuild((CGuild *)v6);
  else
    v3 = 0;
  pGuild = v3;
  v1 = sub_418940((CAtlTraceSettings *)v4);
  std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>((std::pair<int const ,IDirect3DTexture9 *> *)v5, v1);
  sub_445DF0(
    (int)dword_4E0974,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)rc,
    (const std::pair<int const ,CGame_Character::TargetInfo> *)v5);
  if ( rc[4] )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = pGuild;
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    if ( pGuild )
      ((void (__thiscall *)(CGuild *, int))pGuild->~CIOObject)(pGuild, 1);
    result = 0;
  }
  return result;
}
// 4E0974: using guessed type int dword_4E0974[3];

//----- (00416570) --------------------------------------------------------
int __thiscall CGuild::MemberADD(CGuild *this, int nGID, CPlayer *pPlayer, int nClass)
{
  CAtlTraceSettings *v4; // eax
  int result; // eax
  char *v6; // [esp-4h] [ebp-2Ch]
  char v8[8]; // [esp+8h] [ebp-20h] BYREF
  char v9[8]; // [esp+10h] [ebp-18h] BYREF
  CMemory **v10; // [esp+18h] [ebp-10h]
  stMember *pMember; // [esp+1Ch] [ebp-Ch]
  char rc[8]; // [esp+20h] [ebp-8h] BYREF

  v10 = operator new(0x28u);
  pMember = (stMember *)v10;
  v4 = sub_418940((CAtlTraceSettings *)v8);
  std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>((std::pair<int const ,IDirect3DTexture9 *> *)v9, v4);
  sub_445DF0(
    (int)&this->m_cGuildMemberMap,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)rc,
    (const std::pair<int const ,CGame_Character::TargetInfo> *)v9);
  if ( rc[4] )
  {
    CPlayer::SetGID(pPlayer, nGID);
    CPlayer::SetGuild((CIOObject **)pPlayer, (int)this);
    CPlayer::SetGuildLevel(pPlayer, this->m_nPenaltyLevel);
    CPlayer::SetGuildName(pPlayer, this->m_szName);
    CPlayer::SetGuildStandard(pPlayer, this->m_nStandard);
    v6 = CGuild::GetClass2Title(this, nClass);
    CPlayer::SetGuildClass(pPlayer, nClass, v6);
    strcpy(pMember->szName, pPlayer->m_szName);
    pMember->nClass = nClass;
    pMember->bConnectTell = 1;
    pMember->nDate = 0;
    pMember->pPlayer = pPlayer;
    CIOObject::AddRef((int)pPlayer);
    ++this->m_nPlayerRef;
    this->m_dwDeleteTick = 0;
    pMember->nPoint = pPlayer->m_nContribute;
    result = 1;
  }
  else
  {
    operator delete(pMember);
    result = 0;
  }
  return result;
}

//----- (004166C0) --------------------------------------------------------
int __thiscall CGuild::MemberDEL(CGuild *this, int pos)
{
  int a2; // [esp+0h] [ebp-1Ch]
  int v4; // [esp+4h] [ebp-18h]
  int v5; // [esp+8h] [ebp-14h]
  int v6; // [esp+Ch] [ebp-10h]
  char v8[4]; // [esp+14h] [ebp-8h] BYREF
  void *v9; // [esp+18h] [ebp-4h]

  if ( *(int *)(*(_DWORD *)(sub_420250(&pos) + 4) + 24) < 6 )
  {
    if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 20) >= 0 )
      v6 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 20);
    else
      v6 = 0;
    if ( this->m_nPoint - v6 >= 0 )
    {
      if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 20) >= 0 )
        v4 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&pos) + 4) + 20);
      else
        v4 = 0;
      v5 = this->m_nPoint - v4;
    }
    else
    {
      v5 = 0;
    }
    this->m_nPoint = v5;
    if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      a2 = CGuild::CalPenaltyTLevel((int *)this);
    else
      a2 = CGuild::CalPenaltyLevel((int *)this);
    CGuild::SetLevel(this, a2);
  }
  v9 = *(void **)(sub_420250(&pos) + 4);
  operator delete(v9);
  return (int)sub_44AF50(&this->m_cGuildMemberMap, v8, pos);
}

//----- (004167E0) --------------------------------------------------------
void __thiscall CGuild::SetLevel(CGuild *this, int nLevel)
{
  int v2; // esi
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  char *v6; // [esp-10h] [ebp-3Ch]
  char *v7; // [esp-Ch] [ebp-38h]
  int v8; // [esp-4h] [ebp-30h]
  char v10[4]; // [esp+8h] [ebp-24h] BYREF
  char v11[4]; // [esp+Ch] [ebp-20h] BYREF
  char v12[4]; // [esp+10h] [ebp-1Ch] BYREF
  char v13[4]; // [esp+14h] [ebp-18h] BYREF
  CPlayer *pGuildMember_; // [esp+18h] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v15; // [esp+1Ch] [ebp-10h] BYREF
  CIOBuffer *pBuffer; // [esp+20h] [ebp-Ch]
  CPlayer *pGuildMember; // [esp+24h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v18; // [esp+28h] [ebp-4h] BYREF

  if ( this->m_nPenaltyLevel != nLevel )
  {
    v2 = CGuild::GetGuildSkill(this->m_nPenaltyLevel) & 3;
    if ( v2 == (CGuild::GetGuildSkill(nLevel) & 3) )
    {
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v15);
      while ( 1 )
      {
        v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v10);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                &v15,
                v5) )
          break;
        pGuildMember_ = *(CPlayer **)(*(_DWORD *)(sub_420250(&v15) + 4) + 32);
        if ( pGuildMember_ )
          CPlayer::SetGuildLevel(pGuildMember_, nLevel);
        sub_446090((int *)&v15, v11, 0);
      }
    }
    else
    {
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_cGuildMemberMap,
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v18);
      while ( 1 )
      {
        v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_cGuildMemberMap, (int)v12);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                &v18,
                v3) )
          break;
        pGuildMember = *(CPlayer **)(*(_DWORD *)(sub_420250(&v18) + 4) + 32);
        if ( pGuildMember )
        {
          CPlayer::SetGuildLevel(pGuildMember, nLevel);
          if ( *(int *)(*(_DWORD *)(sub_420250(&v18) + 4) + 24) < 6 )
          {
            v8 = CPlayer::GetGuildStandard(pGuildMember);
            v7 = CPlayer::GetGuildName(pGuildMember);
            v6 = CPlayer::GetGuildClassTitle(pGuildMember);
            v4 = CBase::Id(pGuildMember);
            pBuffer = (CIOBuffer *)MakePacket(S2C_GUILD, "bdssbd", 9, v4, v6, v7, 1, v8);
            CGuild::SendPlayerSight((int)pGuildMember, pBuffer, 0);
          }
        }
        sub_446090((int *)&v18, v13, 0);
      }
    }
    this->m_nPenaltyLevel = nLevel;
  }
}

//----- (00416970) --------------------------------------------------------
int __cdecl CGuild::GetGuildSkill(int nLevel)
{
  int result; // eax

  switch ( nLevel )
  {
    case 1:
      result = 0;
      break;
    case 2:
      result = 1;
      break;
    case 3:
      result = 3;
      break;
    case 4:
      result = 15;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004169D0) --------------------------------------------------------
void __thiscall CGuild::SetPointADD(CGuild *this, CPlayer *pPlayer, int nPoint, int bAdd)
{
  int v4; // eax
  int m_nGID; // eax
  int m_nPID; // [esp-4h] [ebp-1Ch]
  int nLevel; // [esp+0h] [ebp-18h]
  int v8; // [esp+4h] [ebp-14h]
  int v9; // [esp+8h] [ebp-10h]
  char v11[4]; // [esp+10h] [ebp-8h] BYREF
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E0980);
  sub_44AE20(&this->m_cGuildMemberMap, v12, &pPlayer->m_nPID);
  v4 = sub_430C20(&this->m_cGuildMemberMap, (int)v11);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    m_nPID = pPlayer->m_nPID;
    m_nGID = CPlayer::GetGID(pPlayer);
    LOG_ERR("CGuild::SetPointADD() member find error (gid:%d,pid:%d)", m_nGID, m_nPID);
  }
  else
  {
    if ( nPoint + *(_DWORD *)(*(_DWORD *)(sub_420250(v12) + 4) + 20) >= 0 )
      v9 = nPoint + *(_DWORD *)(*(_DWORD *)(sub_420250(v12) + 4) + 20);
    else
      v9 = 0;
    *(_DWORD *)(*(_DWORD *)(sub_420250(v12) + 4) + 20) = v9;
    if ( *(int *)(*(_DWORD *)(sub_420250(v12) + 4) + 24) < 6 )
    {
      if ( this->m_nPoint + 10000 * nPoint >= 0 )
        v8 = this->m_nPoint + 10000 * nPoint;
      else
        v8 = 0;
      this->m_nPoint = v8;
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
        nLevel = CGuild::CalPenaltyTLevel((int *)this);
      else
        nLevel = CGuild::CalPenaltyLevel((int *)this);
      CGuild::SetLevel(this, nLevel);
    }
    CRWLock::WriteUnlock(&unk_4E0980);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00416B20) --------------------------------------------------------
int __thiscall CGuild::CalPenaltyLevel(int *this)
{
  int result; // eax
  int v2; // [esp+0h] [ebp-14h]
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h]

  if ( this[17] < 16000000 )
  {
    if ( this[17] < 7800000 )
    {
      if ( this[17] < 2400000 )
        v4 = 1;
      else
        v4 = 2;
    }
    else
    {
      v4 = 3;
    }
  }
  else
  {
    v4 = 4;
  }
  if ( this[16] < 4000000 )
  {
    if ( this[16] < 2600000 )
    {
      if ( this[16] < 1200000 )
        v3 = 1;
      else
        v3 = 2;
    }
    else
    {
      v3 = 3;
    }
  }
  else
  {
    v3 = 4;
  }
  if ( v4 >= v3 )
    v2 = v3;
  else
    v2 = v4;
  if ( this[18] > v2 )
    result = v3;
  else
    result = v2;
  return result;
}

//----- (00416BF0) --------------------------------------------------------
int __thiscall CGuild::CalPenaltyTLevel(int *this)
{
  int result; // eax
  int v2; // [esp+0h] [ebp-14h]
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h]

  if ( this[17] < 3 )
  {
    if ( this[17] < 2 )
    {
      if ( this[17] < 1 )
        v4 = 1;
      else
        v4 = 2;
    }
    else
    {
      v4 = 3;
    }
  }
  else
  {
    v4 = 4;
  }
  if ( this[16] < 30000 )
  {
    if ( this[16] < 20000 )
    {
      if ( this[16] < 10000 )
        v3 = 1;
      else
        v3 = 2;
    }
    else
    {
      v3 = 3;
    }
  }
  else
  {
    v3 = 4;
  }
  if ( v4 >= v3 )
    v2 = v3;
  else
    v2 = v4;
  if ( this[18] > v2 )
    result = v3;
  else
    result = v2;
  return result;
}

//----- (00416CB0) --------------------------------------------------------
void __stdcall CGuild::BroadcastLock(void *a1, int a2)
{
  int v2; // ecx
  int v3; // [esp+0h] [ebp-4h]

  v3 = v2;
  CRWLock::ReadLock(&unk_4E0980);
  CGuild::Broadcast(v3, a1, a2);
  CRWLock::ReadUnlock(&unk_4E0980);
}
// 416CB4: variable 'v2' is possibly undefined

//----- (00416CF0) --------------------------------------------------------
void __thiscall CGuild::Broadcast(int this, void *a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  char v6[4]; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v8);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((_DWORD *)(this + 380), (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v3) )
      break;
    v7 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v8) + 4) + 32);
    if ( v7 )
    {
      if ( v7 != a3 )
        CPlayer::Send(a2);
    }
    sub_446090((int *)&v8, v6, 0);
  }
}

//----- (00416D70) --------------------------------------------------------
void __cdecl CGuild::SendPlayerSight(int a1, void *a2, int a3)
{
  CPlayer *v3; // eax
  CBaseList *i; // [esp+0h] [ebp-4h]

  for ( i = CSMap::GetPlayerListInRect(*(CSMap **)(a1 + 320), (const tagPOINT *)(a1 + 324), 25); i; i = CBaseList::Pop(i) )
  {
    if ( !a3 || a1 != unknown_libname_7(i) )
    {
      v3 = (CPlayer *)unknown_libname_7(i);
      CPlayer::Send(v3, (CIOBuffer *)a2);
    }
  }
  CIOBuffer::Release((CIOBuffer *)a2);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00416DE0) --------------------------------------------------------
int __thiscall CGuild::AllianceOffer(int *this, int a2, char *Str1, int a4)
{
  int result; // eax
  int a1; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]
  int a4a; // [esp+1Ch] [ebp+10h]

  if ( CPlayer::GetGID((CIOCriticalSection *)a2) != *(_DWORD *)(a2 + 452) )
    return 22;
  CRWLock::ReadLock(&unk_4E0980);
  if ( (CGuild::GetGuildSkill(this[18]) & 8) == 0 )
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    return 57;
  }
  if ( this[99] && this[98] == CPlayer::GetGID((CIOCriticalSection *)a2) )
  {
    if ( CAlliance::GetSize((void *)this[99]) >= 8 )
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      return 64;
    }
    a4a = *(_DWORD *)(this[99] + 76);
  }
  else
  {
    if ( this[98] )
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      return 58;
    }
    if ( a4 <= 0 || a4 > 15 )
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      return 59;
    }
    a4a = a4 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 3600 : 86400) + time(0);
  }
  if ( !sub_4173F0() )
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    return 68;
  }
  v7 = CGuild::FindGuild(Str1);
  if ( !v7 )
    goto LABEL_19;
  if ( *(_DWORD *)(v7 + 392) )
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 61;
  }
  else
  {
    a1 = CGuild::FindLeaderPlayer(v7);
    if ( !a1 )
    {
LABEL_19:
      CRWLock::ReadUnlock(&unk_4E0980);
      return 60;
    }
    CPlayer::Write(a1, 94, "bbdsd", 0, 62, *(_DWORD *)(a2 + 452), this + 11, a4a);
    CPlayer::Write(a2, 94, "bbs", 0, 63, v7 + 44);
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 0;
  }
  return result;
}

//----- (00416FE0) --------------------------------------------------------
int __thiscall CGuild::AllianceOfferAnswer(int this, int a2, int a3, int a4, int a5)
{
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  int v14; // [esp-10h] [ebp-34h]
  int v15; // [esp-10h] [ebp-34h]
  int v16; // [esp-4h] [ebp-28h]
  int v17; // [esp-4h] [ebp-28h]
  char v19[4]; // [esp+4h] [ebp-20h] BYREF
  char v20[4]; // [esp+8h] [ebp-1Ch] BYREF
  char v21[4]; // [esp+Ch] [ebp-18h] BYREF
  int v22; // [esp+10h] [ebp-14h]
  char v23[4]; // [esp+14h] [ebp-10h] BYREF
  CIOBuffer *v24; // [esp+18h] [ebp-Ch]
  char v25[4]; // [esp+1Ch] [ebp-8h] BYREF
  int a1; // [esp+20h] [ebp-4h]

  if ( CPlayer::GetGID((CIOCriticalSection *)a2) != *(_DWORD *)(a2 + 452) )
    return 22;
  CRWLock::WriteLock(&unk_4E0980);
  if ( *(_DWORD *)(this + 392) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 61;
  }
  sub_44AE20(dword_4E0968, v25, &a3);
  v6 = sub_430C20(dword_4E0968, (int)v21);
  if ( (unsigned __int8)unknown_libname_8(v6)
    || (v7 = sub_420250(v25), (a1 = CGuild::FindLeaderPlayer(*(_DWORD *)(v7 + 4))) == 0) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 60;
  }
  v8 = sub_420250(v25);
  if ( (CGuild::GetGuildSkill(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 72)) & 8) == 0 )
    goto LABEL_9;
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v25) + 4) + 396)
    && (v9 = sub_420250(v25), *(_DWORD *)(*(_DWORD *)(v9 + 4) + 392) == a3) )
  {
    v10 = sub_420250(v25);
    if ( CAlliance::GetSize(*(void **)(*(_DWORD *)(v10 + 4) + 396)) >= 8 )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      return 64;
    }
    a4 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v25) + 4) + 396) + 76);
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v25) + 4) + 392) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      return 58;
    }
    if ( a4 <= time(0) || a4 > ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 54060 : 1296060) + time(0) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      return 59;
    }
  }
  if ( sub_4173F0() )
  {
    if ( a5 )
    {
      v16 = a4;
      v14 = *(_DWORD *)(a2 + 452);
      v11 = sub_420250(v25);
      if ( !CAlliance::Join(a3, (char *)(a1 + 32), *(_DWORD *)(v11 + 4), v14, (char *)(a2 + 32), this, v16) )
      {
LABEL_9:
        CRWLock::WriteUnlock(&unk_4E0980);
        return 1;
      }
      if ( *(_DWORD *)(this + 396) )
      {
        std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v23);
        while ( 1 )
        {
          v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((_DWORD *)(this + 380), (int)v19);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)v23,
                  v12) )
            break;
          v22 = *(_DWORD *)(*(_DWORD *)(sub_420250(v23) + 4) + 32);
          if ( v22 )
            CAlliance::AllianceInfo(*(const char **)(this + 396), v22);
          sub_446090((int *)v23, v20, 0);
        }
        v17 = a4;
        v15 = *(_DWORD *)(a2 + 452);
        v13 = sub_420250(v25);
        v24 = MakePacket(94, "bbsdssd", 0, 65, *(_DWORD *)(v13 + 4) + 44, v15, this + 44, a2 + 32, v17);
        CAlliance::BroadcastLock(*(_DWORD **)(this + 396), v24);
        CIOBuffer::Release(v24);
      }
    }
    else
    {
      CPlayer::Write(a1, 94, "bbs", 0, 66, this + 44);
      CPlayer::Write(a2, 94, "bbs", 0, 66, this + 44);
    }
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 0;
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 68;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00417360) --------------------------------------------------------
volatile int *__thiscall CGuild::SetAlliance(int this, int a2, volatile int *a3)
{
  volatile int *result; // eax

  if ( *(_DWORD *)(this + 396) )
    CIOObject::Release(*(int **)(this + 396));
  if ( a3 )
    CIOObject::AddRef((int)a3);
  result = a3;
  *(_DWORD *)(this + 396) = a3;
  *(_DWORD *)(this + 392) = a2;
  return result;
}

//----- (004173B0) --------------------------------------------------------
void __thiscall CGuild::AllianceBroadcast(void *this, int a2)
{
  CRWLock::ReadLock(&unk_4E0980);
  if ( *((_DWORD *)this + 99) )
    CAlliance::BroadcastLock(*((_DWORD **)this + 99), (void *)a2);
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (004173F0) --------------------------------------------------------
BOOL sub_4173F0()
{
  return dword_4E0964 == 0;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417410) --------------------------------------------------------
BOOL sub_417410()
{
  return dword_4E0964 == 1;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417430) --------------------------------------------------------
BOOL sub_417430()
{
  return dword_4E0964 == 2;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417450) --------------------------------------------------------
BOOL sub_417450()
{
  return dword_4E0964 == 4;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417470) --------------------------------------------------------
time_t __cdecl CGuild::GetWarEndTime()
{
  time_t v1; // [esp+0h] [ebp-8h] BYREF
  struct tm *v2; // [esp+4h] [ebp-4h]

  v1 = time(0);
  v2 = localtime(&v1);
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    v2->tm_hour = 22;
  }
  else
  {
    v1 += 86400 * (7 - v2->tm_wday);
    v2 = localtime(&v1);
    v2->tm_hour = 7;
  }
  v2->tm_sec = 0;
  v2->tm_min = 0;
  return mktime(v2);
}

//----- (00417500) --------------------------------------------------------
int __thiscall CGuild::WarDeclare(int this, int a2, int a3)
{
  int result; // eax
  int a5; // [esp+4h] [ebp-10h]
  int v6; // [esp+8h] [ebp-Ch]
  XBaseModel *v7; // [esp+Ch] [ebp-8h]
  CItem *player; // [esp+10h] [ebp-4h]

  if ( *(_DWORD *)(a2 + 452) != CPlayer::GetGID((CIOCriticalSection *)a2) )
    return 22;
  CRWLock::WriteLock(&unk_4E0980);
  if ( (*(_WORD *)dword_4E1174 & 0x100) == 0 && (CGuild::GetGuildSkill(*(_DWORD *)(this + 72)) & 4) == 0 )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 57;
  }
  if ( !sub_417410() )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 70;
  }
  if ( *(_DWORD *)(this + 392) && *(_DWORD *)(this + 392) != *(_DWORD *)(a2 + 452) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 71;
  }
  v7 = CCastle::GetCastle(a3);
  if ( !v7 )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 1;
  }
  if ( CCastle::IsLord(v7, *(_DWORD *)(a2 + 452)) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 72;
  }
  if ( CCastle::IsAlreadyDeclare(v7, *(_DWORD *)(a2 + 452)) )
  {
    CRWLock::WriteUnlock(&unk_4E0980);
    return 75;
  }
  if ( stru_4E35B4.m_nRef == 2 )
  {
    if ( CCastle::GetWarSize(v7) >= 24 )
    {
LABEL_19:
      CRWLock::WriteUnlock(&unk_4E0980);
      return 77;
    }
  }
  else if ( CCastle::GetWarSize(v7) >= 100 )
  {
    goto LABEL_19;
  }
  v6 = 1;
  if ( *(_DWORD *)(this + 392) )
  {
    if ( CCastle::IsAlliance(v7, *(_DWORD *)(this + 392)) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
      return 73;
    }
    v6 = CAlliance::GetSize(*(void **)(this + 396));
  }
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a2 + 1020));
  if ( *(_DWORD *)(a2 + 1096)
    && v6 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) <= *(_DWORD *)(*(_DWORD *)(a2 + 1096) + 52) )
  {
    player = *(CItem **)(a2 + 1096);
    if ( !player->UpdateNum(player, (CPlayer *)a2, 31, -(v6 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000))) )
      CPlayer::_OutofInven((CPlayer *)a2, player);
    CIOCriticalSection::Leave(a2 + 1020);
    if ( *((_DWORD *)v7 + 13) == -4 )
    {
      a5 = *((_DWORD *)v7 + 12);
      if ( a5 )
      {
        if ( *(_DWORD *)(a5 + 392) )
          CCastle::WarAllianceADD(v7, a3, *(_DWORD *)(a5 + 392), a5 + 44, *(char **)(a5 + 396));
        else
          CCastle::WarADD(v7, a3, *((_DWORD *)v7 + 8), (char *)(a5 + 44), a5);
      }
      else
      {
        LOG_ERR("CGuild::WarDeclare( CPlayer* , nCID )  PID:%d , UID:%d", *(_DWORD *)(a2 + 452), *(_DWORD *)(a2 + 448));
      }
    }
    if ( *(_DWORD *)(this + 392) )
      CCastle::WarAllianceADD(v7, a3, *(_DWORD *)(this + 392), this + 44, *(char **)(this + 396));
    else
      CCastle::WarADD(v7, a3, *(_DWORD *)(a2 + 452), (char *)(a2 + 32), this);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 0;
  }
  else
  {
    CIOCriticalSection::Leave(a2 + 1020);
    CRWLock::WriteUnlock(&unk_4E0980);
    result = 74;
  }
  return result;
}

//----- (00417890) --------------------------------------------------------
void __cdecl CGuild::WarDelcareList(int a1, char a2)
{
  XBaseModel *v2; // [esp+0h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E0980);
  v2 = CCastle::GetCastle(a2);
  if ( v2 )
    CCastle::WarDelcareList(v2, a1);
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (004178D0) --------------------------------------------------------
int __thiscall CGuild::TrialUnfurlStandard(_DWORD *this, int a2, unsigned int a3)
{
  int result; // eax
  XBaseModel *v5; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E0980);
  if ( sub_417450() )
  {
    v5 = CCastle::GetCastle(a3);
    if ( v5 )
    {
      if ( CCastle::IsStandardAlive(v5) )
      {
        if ( CCastle::GetStandardUnfurl(v5) )
        {
          CRWLock::ReadUnlock(&unk_4E0980);
          result = 95;
        }
        else if ( *(_DWORD *)(a2 + 452) == CPlayer::GetGID((CIOCriticalSection *)a2) )
        {
          if ( !this[98] || this[98] == *(_DWORD *)(a2 + 452) )
          {
            if ( CCastle::IsLord(v5, *(_DWORD *)(a2 + 452)) || CCastle::IsAlreadyDeclare(v5, *(_DWORD *)(a2 + 452)) )
            {
              CChar::Lock((CIOCriticalSection *)a2);
              if ( CChar::IsGState((_DWORD *)a2, 1024) )
              {
                CChar::Unlock((CIOCriticalSection *)a2);
                CRWLock::ReadUnlock(&unk_4E0980);
                result = 82;
              }
              else
              {
                CCastle::SetStandardUnfurl(v5, 1);
                (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 1024);
                *(_DWORD *)(a2 + 1468) = GetTickCount() + 60000;
                *(_DWORD *)(a2 + 1268) = a3;
                CChar::Unlock((CIOCriticalSection *)a2);
                CRWLock::ReadUnlock(&unk_4E0980);
                result = 84;
              }
            }
            else
            {
              CRWLock::ReadUnlock(&unk_4E0980);
              result = 93;
            }
          }
          else
          {
            CRWLock::ReadUnlock(&unk_4E0980);
            result = 92;
          }
        }
        else
        {
          CRWLock::ReadUnlock(&unk_4E0980);
          result = 22;
        }
      }
      else
      {
        CRWLock::ReadUnlock(&unk_4E0980);
        result = 83;
      }
    }
    else
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      result = 1;
    }
  }
  else
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 91;
  }
  return result;
}

//----- (00417A90) --------------------------------------------------------
void __thiscall CGuild::UnfurlStandard(int this, int a2, unsigned int a3)
{
  CIOBuffer *v4; // [esp+4h] [ebp-8h]
  XBaseModel *v5; // [esp+8h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E0980);
  if ( sub_417450() )
  {
    v5 = CCastle::GetCastle(a3);
    if ( v5 )
    {
      if ( CCastle::IsStandardAlive(v5) && CCastle::CreateStandard(a3, *(_DWORD *)(a2 + 452), (char *)(this + 44), 1) )
      {
        CCastle::SetCurStandardGuild((int)v5, *(_DWORD *)(a2 + 452), (volatile int *)this);
        CCastle::SetStandardUnfurl(v5, 0);
        CCastle::SetLordDeclare(v5, 1);
        ++*(_DWORD *)(this + 32);
        v4 = MakePacket(94, "bbds", 0, 85, a3, this + 44);
        CCastle::WarMsg(v4);
        CIOBuffer::Release(v4);
      }
    }
  }
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (00417BA0) --------------------------------------------------------
void __cdecl CGuild::BrokenStandard(int a1)
{
  int *v1; // [esp+0h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E0980);
  v1 = (int *)CCastle::GetCastle(a1);
  if ( v1 )
    CCastle::BrokenStandard(v1, a1);
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (00417BE0) --------------------------------------------------------
void __cdecl CGuild::BrokenGate(int a1, int a2)
{
  CIOBuffer *v2; // [esp+0h] [ebp-Ch]
  int v3; // [esp+4h] [ebp-8h]

  CRWLock::ReadLock(&unk_4E0980);
  if ( CCastle::GetCastle(a1) )
  {
    v3 = CCastle::SubGateState(a1, a2);
    if ( v3 >= 0 )
    {
      v2 = MakePacket(94, "bbdb", 0, 99, a1, (unsigned __int8)v3);
      CCastle::WarMsg(v2);
      CIOBuffer::Release(v2);
    }
  }
  CRWLock::ReadUnlock(&unk_4E0980);
}

//----- (00417C60) --------------------------------------------------------
int __cdecl CGuild::CanAttack(int a1, int a2)
{
  int result; // eax

  if ( a1 && CCastle::IsAllCastleWarRelation(a1) )
  {
    if ( a2 )
    {
      if ( a1 == a2 )
      {
        CIOObject::Release((CIOObject *)a1, (volatile int *)(a1 + 40));
        CIOObject::Release((CIOObject *)a2, (volatile int *)(a2 + 40));
        result = 0;
      }
      else
      {
        CRWLock::ReadLock(&unk_4E0980);
        if ( *(_DWORD *)(a1 + 392) && *(_DWORD *)(a1 + 392) == *(_DWORD *)(a2 + 392) )
        {
          CRWLock::ReadUnlock(&unk_4E0980);
          CIOObject::Release((CIOObject *)a1, (volatile int *)(a1 + 40));
          CIOObject::Release((CIOObject *)a2, (volatile int *)(a2 + 40));
          result = 0;
        }
        else
        {
          CRWLock::ReadUnlock(&unk_4E0980);
          CIOObject::Release((CIOObject *)a1, (volatile int *)(a1 + 40));
          CIOObject::Release((CIOObject *)a2, (volatile int *)(a2 + 40));
          result = 1;
        }
      }
    }
    else
    {
      CIOObject::Release((CIOObject *)a1, (volatile int *)(a1 + 40));
      result = 1;
    }
  }
  else
  {
    if ( a2 )
      CIOObject::Release((CIOObject *)a2, (volatile int *)(a2 + 40));
    result = 0;
  }
  return result;
}
// 417C9F: conditional instruction was optimized away because of '%arg_0.4!=0'

//----- (00417D70) --------------------------------------------------------
int __thiscall CGuild::CastleInfo(void *this, int a2, unsigned int a3)
{
  int result; // eax
  int v4; // [esp-8h] [ebp-10h]
  int v5; // [esp-4h] [ebp-Ch]
  XBaseModel *v6; // [esp+4h] [ebp-4h]

  if ( *(_DWORD *)(a2 + 452) != CPlayer::GetGID((CIOCriticalSection *)a2) )
    return 22;
  CRWLock::ReadLock(&unk_4E0980);
  v6 = CCastle::GetCastle(a3);
  if ( v6 )
  {
    if ( CCastle::IsLord(v6, *(_DWORD *)(a2 + 452)) )
    {
      v5 = CCastle::GetTax(v6);
      v4 = (unsigned __int8)CCastle::GetTaxRate(v6);
      CPlayer::Write(a2, 94, "bbd", 23, v4, v5);
      CRWLock::ReadUnlock(&unk_4E0980);
      result = 0;
    }
    else
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      result = 86;
    }
  }
  else
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 1;
  }
  return result;
}

//----- (00417E30) --------------------------------------------------------
int __stdcall CGuild::TaxRateControl(int a1, unsigned int a2, int a3)
{
  int result; // eax
  XBaseModel *v4; // [esp+4h] [ebp-4h]

  if ( *(_DWORD *)(a1 + 452) != CPlayer::GetGID((CIOCriticalSection *)a1) )
    return 1;
  if ( a3 > 115 || a3 < 85 )
    return 87;
  CRWLock::ReadLock(&unk_4E0980);
  v4 = CCastle::GetCastle(a2);
  if ( v4 && CCastle::IsLord(v4, *(_DWORD *)(a1 + 452)) )
  {
    CCastle::SetTaxRate(v4, a2, a3);
    CRWLock::ReadUnlock(&unk_4E0980);
    CPlayer::Write(a1, 94, "bbb", 0, 88, (unsigned __int8)a3);
    result = 0;
  }
  else
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 1;
  }
  return result;
}

//----- (00417F10) --------------------------------------------------------
int __thiscall CGuild::TaxLevy(_DWORD *this, int a2, unsigned int a3)
{
  int v5; // [esp+4h] [ebp-Ch]
  XBaseModel *v6; // [esp+8h] [ebp-8h]
  CItem *item; // [esp+Ch] [ebp-4h]

  if ( *(_DWORD *)(a2 + 452) != CPlayer::GetGID((CIOCriticalSection *)a2) )
    return 1;
  v6 = CCastle::GetCastle(a3);
  if ( !v6 )
    return 1;
  if ( !CCastle::IsLord(v6, *(_DWORD *)(a2 + 452)) )
    return 1;
  v5 = CCastle::ResetTax(v6, a3);
  this[20] += v5;
  item = (CItem *)CItem::CreateItem(31, 0, v5, -1);
  if ( item )
  {
    if ( !CPlayer::InsertItem((CIOCriticalSection *)a2, 31, (int)item) )
    {
      LOG_ERR("CGuild::TaxLevy() Fail to insert money(%d).", v5);
      CBase::Delete(item);
    }
  }
  CPlayer::Write(a2, 94, "bbd", 0, 101, v5);
  return 0;
}

//----- (00418000) --------------------------------------------------------
int __cdecl CGuild::CastleGateNPC(int a1, unsigned int a2, int a3)
{
  int result; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp+0h] [ebp-Ch]
  XBaseModel *v7; // [esp+4h] [ebp-8h]

  CRWLock::ReadLock(&unk_4E0980);
  v7 = CCastle::GetCastle(a2);
  if ( v7 )
  {
    if ( sub_417450() )
    {
      v4 = CPlayer::GetGID((CIOCriticalSection *)a1);
      v6 = CCastle::IsGateUseWarring(v7, v4);
    }
    else
    {
      v5 = CPlayer::GetGID((CIOCriticalSection *)a1);
      v6 = CCastle::IsGateUse(v7, v5);
    }
    if ( v6 )
    {
      CRWLock::ReadUnlock(&unk_4E0980);
      result = v6;
    }
    else
    {
      CCastle::GateGoto(a1, a3);
      CRWLock::ReadUnlock(&unk_4E0980);
      result = 0;
    }
  }
  else
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 1;
  }
  return result;
}

//----- (004180B0) --------------------------------------------------------
_DWORD __stdcall CGuild::CastleSetGateLmit(CIOCriticalSection *a1, unsigned int nXModelID, signed int a2)
{
  int result; // eax
  XBaseModel *v4; // [esp+4h] [ebp-4h]

  if ( a1[14].m_critical_section.LockCount != CPlayer::GetGID(a1) )
    return 22;
  CRWLock::ReadLock(&unk_4E0980);
  v4 = CCastle::GetCastle(nXModelID);
  if ( !v4 )
    goto LABEL_4;
  if ( CCastle::IsLord(v4, a1[14].m_critical_section.LockCount) )
  {
    if ( !CCastle::SetGateLimit(v4, a2, nXModelID) )
    {
LABEL_4:
      CRWLock::ReadUnlock(&unk_4E0980);
      return 1;
    }
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 90;
  }
  else
  {
    CRWLock::ReadUnlock(&unk_4E0980);
    result = 22;
  }
  return result;
}

//----- (00418170) --------------------------------------------------------
BOOL __thiscall CGuild::IsAlliancePeriod(void *this, int a2)
{
  BOOL v3; // [esp+0h] [ebp-Ch]

  CRWLock::ReadLock(&unk_4E0980);
  if ( *((_DWORD *)this + 98) )
    v3 = CCastle::IsAlliance((_DWORD *)a2, *((_DWORD *)this + 98));
  else
    v3 = 0;
  CRWLock::ReadUnlock(&unk_4E0980);
  return v3;
}

//----- (004181D0) --------------------------------------------------------
void __cdecl CGuild::ChangePlayerName(int a1, int a2, char *Source)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  char *v6; // [esp-4h] [ebp-18h]
  char v7[4]; // [esp+0h] [ebp-14h] BYREF
  char v8[4]; // [esp+4h] [ebp-10h] BYREF
  int v9; // [esp+8h] [ebp-Ch]
  char v10[4]; // [esp+Ch] [ebp-8h] BYREF
  char v11[4]; // [esp+10h] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock(&unk_4E0980);
    sub_44AE20(dword_4E0968, v11, &a1);
    v3 = sub_430C20(dword_4E0968, (int)v8);
    if ( (unsigned __int8)unknown_libname_8(v3) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
    }
    else
    {
      v9 = *(_DWORD *)(sub_420250(v11) + 4);
      sub_44AE20((_DWORD *)(v9 + 380), v10, &a2);
      v4 = sub_430C20((_DWORD *)(v9 + 380), (int)v7);
      if ( !(unsigned __int8)unknown_libname_8(v4) )
      {
        v6 = Source;
        v5 = sub_420250(v10);
        strcpy(*(char **)(v5 + 4), v6);
        if ( a1 == a2 )
        {
          CAlliance::ChangeLeaderName(*(_DWORD *)(v9 + 392), a1, Source);
          CCastle::ChangeLeaderName(a1, Source);
        }
      }
      CRWLock::WriteUnlock(&unk_4E0980);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0968: using guessed type int dword_4E0968[3];

//----- (004182E0) --------------------------------------------------------
void __cdecl CGuild::ChangeGuildName(int a1, int a2, char *Source)
{
  int v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v5[4]; // [esp+0h] [ebp-1Ch] BYREF
  char v6[4]; // [esp+4h] [ebp-18h] BYREF
  char v7[4]; // [esp+8h] [ebp-14h] BYREF
  int a1a; // [esp+Ch] [ebp-10h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v9; // [esp+10h] [ebp-Ch] BYREF
  int v10; // [esp+14h] [ebp-8h]
  char v11[4]; // [esp+18h] [ebp-4h] BYREF

  if ( a1 && a1 == a2 )
  {
    CRWLock::WriteLock(&unk_4E0980);
    sub_44AE20(dword_4E0968, v11, &a1);
    v3 = sub_430C20(dword_4E0968, (int)v7);
    if ( (unsigned __int8)unknown_libname_8(v3) )
    {
      CRWLock::WriteUnlock(&unk_4E0980);
    }
    else
    {
      v10 = *(_DWORD *)(sub_420250(v11) + 4);
      strcpy((char *)(v10 + 44), Source);
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(v10 + 380),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
      while ( 1 )
      {
        v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((_DWORD *)(v10 + 380), (int)v5);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                &v9,
                v4) )
          break;
        a1a = *(_DWORD *)(*(_DWORD *)(sub_420250(&v9) + 4) + 32);
        if ( a1a )
        {
          CPlayer::Write((CPlayer *)a1a, S2C_MESSAGEV, "bbs", 100, 8, Source);
          CPlayer::SetGuildName((CPlayer *)a1a, Source);
        }
        sub_446090((int *)&v9, v6, 0);
      }
      CAlliance::ChangeGuildName(*(_DWORD *)(v10 + 392), a1, Source);
      CCastle::ChangeGuildName(a1, Source);
      CRWLock::WriteUnlock(&unk_4E0980);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E0968: using guessed type int dword_4E0968[3];

//----- (00418420) --------------------------------------------------------
unsigned int __thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator _First; // [esp+8h] [ebp-Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator _Last; // [esp+Ch] [ebp-8h]
  unsigned int _Off; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&_First,
    _Keyval);
  _Off = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    (int)_First._Ptr,
    (int)_Last._Ptr,
    &_Off);
  sub_4185D0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    (int)_First._Ptr,
    (int)_Last._Ptr);
  return _Off;
}

//----- (00418480) --------------------------------------------------------
_DWORD *__thiscall sub_418480(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_418670(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (004184E0) --------------------------------------------------------
std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *__thiscall std::map<int,CSocket *>::map<int,CSocket *>(std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00418510) --------------------------------------------------------
int __thiscall sub_418510(void *this)
{
  return sub_4187B0((int)this);
}

//----- (00418530) --------------------------------------------------------
_DWORD *__thiscall sub_418530(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_418710(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00418590) --------------------------------------------------------
int __thiscall std::vector<CControl *>::size(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (004185D0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4185D0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_418480(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00418670) --------------------------------------------------------
int __stdcall sub_418670(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_418670(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (004186F0) --------------------------------------------------------
BOOL __stdcall sub_4186F0(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (00418710) --------------------------------------------------------
int __stdcall sub_418710(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_418710(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (00418790) --------------------------------------------------------
int __thiscall sub_418790(_DWORD *this)
{
  return sub_474590(this[1]);
}

//----- (004187B0) --------------------------------------------------------
int __thiscall sub_4187B0(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4188A0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (00418860) --------------------------------------------------------
void *__thiscall sub_418860(void *this)
{
  sub_44B740(this);
  return this;
}

//----- (00418880) --------------------------------------------------------
void *__thiscall sub_418880(void *this)
{
  sub_44B760(this);
  return this;
}

//----- (004188A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4188A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_418530(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00418940) --------------------------------------------------------
CAtlTraceSettings *__cdecl sub_418940(CAtlTraceSettings *a1)
{
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>(a1);
  return a1;
}

//----- (00418960) --------------------------------------------------------
_BYTE *__cdecl GetNumeric<unsigned char>(_BYTE *a1, _BYTE *a2)
{
  *a2 = *a1;
  return a1 + 1;
}

//----- (00418980) --------------------------------------------------------
_WORD *__cdecl GetNumeric<short>(_WORD *a1, _WORD *a2)
{
  *a2 = *a1;
  return a1 + 1;
}

//----- (004189A0) --------------------------------------------------------
_BYTE *__cdecl PutNumeric<unsigned char>(_BYTE *a1, char a2)
{
  *a1 = a2;
  return a1 + 1;
}

//----- (004189C0) --------------------------------------------------------
BOOL __cdecl std::_Distance2<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, int a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_418860(&a1);
  }
  return result;
}

//----- (00418A00) --------------------------------------------------------
void *__thiscall sub_418A00(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00418A30) --------------------------------------------------------
int __thiscall sub_418A30(void *this)
{
  return sub_418A50(this);
}

//----- (00418A50) --------------------------------------------------------
int __thiscall sub_418A50(void *this)
{
  return sub_418A70((int)this);
}

//----- (00418A70) --------------------------------------------------------
int __thiscall sub_418A70(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4185D0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (00418B20) --------------------------------------------------------
CAlliance *__thiscall CAlliance::CAlliance(CAlliance *this)
{
  CBase::CBase();
  this->__vftable = (CAlliance_vtbl *)&off_4B56A0;
  this->m_pNextAlliance = (CAlliance *)-5;
  this->m_nGID = 0;
  memset(this->m_szGuildName, 0, sizeof(this->m_szGuildName));
  memset(this->m_szLeaderName, 0, sizeof(this->m_szLeaderName));
  this->m_dwAllianceDate = 0;
  this->m_pGuild = 0;
  return this;
}
// 4B56A0: using guessed type int (__stdcall *off_4B56A0)(int);

//----- (00418B90) --------------------------------------------------------
void *__thiscall sub_418B90(void *this, char a2)
{
  sub_418BC0((std::locale::facet *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00418BC0) --------------------------------------------------------
void __thiscall sub_418BC0(std::locale::facet *this)
{
  this->__vftable = (std::locale::facet_vtbl *)&off_4B56A0;
  CBase::~CBase(this);
}
// 4B56A0: using guessed type int (__stdcall *off_4B56A0)(int);

//----- (00418BE0) --------------------------------------------------------
void __cdecl sub_418BE0()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09B0);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CAlliance::Clear(*(_DWORD *)(v1 + 4));
    sub_446090((int *)v4, v3, 0);
  }
  sub_41C710(dword_4E09A4);
  CRWLock::WriteUnlock(&unk_4E09B0);
}

//----- (00418C60) --------------------------------------------------------
void __thiscall CAlliance::Clear(int this)
{
  CItem *v2; // [esp+4h] [ebp-8h]
  CItem *item; // [esp+8h] [ebp-4h]

  for ( item = *(CItem **)(this + 32); item != (CItem *)-5; item = v2 )
  {
    v2 = (CItem *)item->m_nPID;
    item->m_nPID = -5;
    CBase::Delete(item);
  }
  *(_DWORD *)(this + 32) = -5;
  CBase::Delete((CItem *)this);
}

//----- (00418CC0) --------------------------------------------------------
void __thiscall CAlliance::OnDelete(int this)
{
  if ( *(_DWORD *)(this + 80) )
    CGuild::SetAlliance(*(_DWORD *)(this + 80), 0, 0);
  CWar::SetGuild((volatile int **)this, 0);
  sub_402180(this);
}

//----- (00418D00) --------------------------------------------------------
int __cdecl CAlliance::IsLoad(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E09B0);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v1) )
      break;
    for ( i = *(_DWORD *)(sub_420250(v6) + 4); i != -5; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 36) == a1 )
      {
        CRWLock::ReadUnlock(&unk_4E09B0);
        return 1;
      }
    }
    sub_446090((int *)v6, v4, 0);
  }
  CRWLock::ReadUnlock(&unk_4E09B0);
  return 0;
}

//----- (00418DA0) --------------------------------------------------------
void __cdecl CAlliance::Load(_BYTE *a1)
{
  _DWORD *v1; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char *v3; // eax
  CAtlTraceSettings *v4; // eax
  char *v5; // eax
  char *v6; // eax
  CAlliance *v7; // [esp+0h] [ebp-44h]
  CItem *v8; // [esp+4h] [ebp-40h]
  CMemory **v9; // [esp+8h] [ebp-3Ch]
  char v10[8]; // [esp+Ch] [ebp-38h] BYREF
  char v11[8]; // [esp+14h] [ebp-30h] BYREF
  CMemory **v12; // [esp+1Ch] [ebp-28h]
  char v13[4]; // [esp+20h] [ebp-24h] BYREF
  char v14[4]; // [esp+24h] [ebp-20h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v15; // [esp+28h] [ebp-1Ch] BYREF
  CAlliance *v16; // [esp+2Ch] [ebp-18h]
  time_t v17; // [esp+30h] [ebp-14h] BYREF
  CItem *item; // [esp+34h] [ebp-10h]
  int v19; // [esp+38h] [ebp-Ch] BYREF
  char v20[8]; // [esp+3Ch] [ebp-8h] BYREF
  char *packet; // [esp+4Ch] [ebp+8h]
  char *packeta; // [esp+4Ch] [ebp+8h]
  char *packetb; // [esp+4Ch] [ebp+8h]

  CRWLock::WriteLock(&unk_4E09B0);
  v19 = 0;
  packet = GetNumeric<unsigned char>(a1, &v19);
  if ( v19 > 0 )
  {
    v1 = GetNumeric<int>(packet, &v17);
    packeta = (char *)GetNumeric<int>(v1, v14);
    sub_44AE20(dword_4E09A4, &v15, v14);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v13);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &v15,
           v2) )
    {
      CRWLock::WriteUnlock(&unk_4E09B0);
    }
    else if ( v17 > time(0) )
    {
      v12 = operator new(0x54u);
      if ( v12 )
        v8 = (CItem *)CAlliance::CAlliance((CAlliance *)v12);
      else
        v8 = 0;
      item = v8;
      v8->m_nIID = *(_DWORD *)v14;
      v3 = GetString(packeta, (char *)&item->m_pInit);
      packetb = GetString(v3, (char *)&item->m_pMap + 1);
      item->m_nKeyID = v17;
      v4 = sub_418940((CAtlTraceSettings *)v10);
      std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(
        (std::pair<int const ,IDirect3DTexture9 *> *)v11,
        v4);
      sub_445DF0(
        (int)dword_4E09A4,
        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v20,
        (const std::pair<int const ,CGame_Character::TargetInfo> *)v11);
      if ( v20[4] )
      {
        --v19;
        while ( v19 > 0 )
        {
          v9 = operator new(0x54u);
          if ( v9 )
            v7 = CAlliance::CAlliance((CAlliance *)v9);
          else
            v7 = 0;
          v16 = v7;
          v5 = (char *)GetNumeric<int>(packetb, &v7->m_nGID);
          v6 = GetString(v5, v16->m_szGuildName);
          packetb = GetString(v6, v16->m_szLeaderName);
          v16->m_dwAllianceDate = v17;
          CAlliance::Add(item, (int)v16);
          --v19;
        }
        CRWLock::WriteUnlock(&unk_4E09B0);
      }
      else
      {
        CBase::Delete(item);
        CRWLock::WriteUnlock(&unk_4E09B0);
        LOG_ERR("CAlliance::Load() alliance map inset error (aid:%d)", *(_DWORD *)v14);
      }
    }
    else
    {
      CDBSocket::Write(26, "d", *(_DWORD *)v14);
      CRWLock::WriteUnlock(&unk_4E09B0);
    }
  }
  else
  {
    CRWLock::WriteUnlock(&unk_4E09B0);
  }
}
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (00418FF0) --------------------------------------------------------
void __cdecl CAlliance::LoadSetGuild(int a1, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  char v5[4]; // [esp+0h] [ebp-Ch] BYREF
  volatile int **i; // [esp+4h] [ebp-8h]
  char v7[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09B0);
  sub_44AE20(dword_4E09A4, v7, &a1);
  v3 = sub_430C20(dword_4E09A4, (int)v5);
  if ( !(unsigned __int8)unknown_libname_8(v3) )
  {
    for ( i = *(volatile int ***)(sub_420250(v7) + 4); i != (volatile int **)-5; i = (volatile int **)i[8] )
    {
      if ( i[9] == (volatile int *)a2 )
      {
        CWar::SetGuild(i, (volatile int *)a3);
        v4 = sub_420250(v7);
        CGuild::SetAlliance(a3, a1, *(volatile int **)(v4 + 4));
        CRWLock::WriteUnlock(&unk_4E09B0);
        return;
      }
    }
  }
  CGuild::SetAlliance(a3, 0, 0);
  CRWLock::WriteUnlock(&unk_4E09B0);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (004190C0) --------------------------------------------------------
void __thiscall CAlliance::DeleteSetGuild(void *this, int a2)
{
  while ( this != (void *)-5 )
  {
    if ( *((_DWORD *)this + 20) == a2 )
    {
      CGuild::SetAlliance(a2, 0, 0);
      CWar::SetGuild((volatile int **)this, 0);
    }
    this = (void *)*((_DWORD *)this + 8);
  }
}

//----- (00419110) --------------------------------------------------------
int __cdecl CAlliance::Join(int a1, char *Source, int a3, int a4, char *a5, int a6, int a7)
{
  CAtlTraceSettings *v7; // eax
  CAlliance *v9; // [esp+0h] [ebp-3Ch]
  CAlliance *v10; // [esp+4h] [ebp-38h]
  CMemory **v11; // [esp+8h] [ebp-34h]
  char v12[8]; // [esp+Ch] [ebp-30h] BYREF
  char v13[8]; // [esp+14h] [ebp-28h] BYREF
  CMemory **v14; // [esp+1Ch] [ebp-20h]
  CItem *i; // [esp+20h] [ebp-1Ch]
  char v16[8]; // [esp+24h] [ebp-18h] BYREF
  CIOBuffer *v17; // [esp+2Ch] [ebp-10h]
  int v18; // [esp+30h] [ebp-Ch]
  volatile int **v19; // [esp+34h] [ebp-8h]
  CItem *item; // [esp+38h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E09B0);
  v18 = 0;
  if ( *(_DWORD *)(a3 + 392) )
  {
    item = *(CItem **)(a3 + 396);
    for ( i = item; i != (CItem *)-5; i = (CItem *)i->m_nPID )
      ++v18;
  }
  else
  {
    v14 = operator new(0x54u);
    if ( v14 )
      v10 = CAlliance::CAlliance((CAlliance *)v14);
    else
      v10 = 0;
    item = (CItem *)v10;
    v7 = sub_418940((CAtlTraceSettings *)v12);
    std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(
      (std::pair<int const ,IDirect3DTexture9 *> *)v13,
      v7);
    sub_445DF0(
      (int)dword_4E09A4,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v16,
      (const std::pair<int const ,CGame_Character::TargetInfo> *)v13);
    if ( !v16[4] )
    {
      CBase::Delete(item);
      CRWLock::WriteUnlock(&unk_4E09B0);
      LOG_ERR("CAlliance::Join() alliance map inset error (aid:%d)", a1);
      return 0;
    }
    item->m_nIID = a1;
    strcpy((char *)&item->m_pInit, (const char *)(a3 + 44));
    strcpy((char *)&item->m_pMap + 1, Source);
    item->m_nKeyID = a7;
    CWar::SetGuild((volatile int **)item, (volatile int *)a3);
    CGuild::SetAlliance(a3, a1, (volatile int *)item);
    ++v18;
    CDBSocket::Write(S2D_ALLIANCE_CREATE, "dd", a1, a7);
    v17 = (CIOBuffer *)MakePacket(S2C_GUILD, "bdbdss", 17, a7, 1, a1, a3 + 44, Source);
    CGuild::Broadcast(a3, v17, 0);
    CIOBuffer::Release(v17);
  }
  v11 = operator new(0x54u);
  if ( v11 )
    v9 = CAlliance::CAlliance((CAlliance *)v11);
  else
    v9 = 0;
  v19 = (volatile int **)v9;
  v9->m_nGID = a4;
  strcpy((char *)v19 + 40, (const char *)(a6 + 44));
  strcpy((char *)v19 + 57, a5);
  v19[19] = (volatile int *)a7;
  CWar::SetGuild(v19, (volatile int *)a6);
  CGuild::SetAlliance(a6, a1, (volatile int *)item);
  CAlliance::Add(item, (int)v19);
  CDBSocket::Write(S2D_ALLIANCE_JOIN, "ddb", a1, a4, (unsigned __int8)v18);
  CRWLock::WriteUnlock(&unk_4E09B0);
  return 1;
}
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (00419370) --------------------------------------------------------
void __cdecl CAlliance::PostponeExpire()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  int v2; // [esp-8h] [ebp-18h]
  unsigned int v3; // [esp-4h] [ebp-14h]
  char v4[4]; // [esp+0h] [ebp-10h] BYREF
  char v5[4]; // [esp+4h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+8h] [ebp-8h] BYREF
  time_t v7; // [esp+Ch] [ebp-4h]

  CRWLock::WriteLock(&unk_4E09B0);
  v7 = CGuild::GetWarEndTime();
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v0) )
      break;
    v3 = v7;
    v2 = *(_DWORD *)sub_420250(&v6);
    v1 = sub_420250(&v6);
    CAlliance::Postpone(*(_DWORD **)(v1 + 4), v2, v3);
    sub_446090((int *)&v6, v5, 0);
  }
  CRWLock::WriteUnlock(&unk_4E09B0);
}
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (00419400) --------------------------------------------------------
void __thiscall CAlliance::Postpone(_DWORD *this, int a2, unsigned int a3)
{
  CIOBuffer *v4; // [esp+4h] [ebp-4h]

  if ( this[19] < a3 )
  {
    this[19] = a3;
    CDBSocket::Write(60, "dd", a2, a3);
    v4 = MakePacket(94, "bbd", 0, 69, a3);
    CAlliance::Broadcast(this, v4);
    CIOBuffer::Release(v4);
  }
}

//----- (00419470) --------------------------------------------------------
void __cdecl CAlliance::Expire(unsigned int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v2[4]; // [esp+0h] [ebp-1Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-18h] BYREF
  char v4[4]; // [esp+8h] [ebp-14h] BYREF
  CIOBuffer *v5; // [esp+Ch] [ebp-10h]
  char v6[4]; // [esp+10h] [ebp-Ch]
  int v7; // [esp+14h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+18h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09B0);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v8);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v1) )
      break;
    *(_DWORD *)v6 = *(_DWORD *)sub_420250(&v8);
    v7 = *(_DWORD *)(sub_420250(&v8) + 4);
    if ( *(_DWORD *)(v7 + 76) >= a1 )
    {
      sub_446090((int *)&v8, v2, 0);
    }
    else
    {
      CDBSocket::Write(26, "d", *(_DWORD *)v6);
      v5 = MakePacket(94, "bb", 0, 67);
      CAlliance::Broadcast((_DWORD *)v7, v5);
      CIOBuffer::Release(v5);
      CAlliance::Clear(v7);
      v8._Myptr = (CIOSocket::CIOTimer *)*sub_44AF50(dword_4E09A4, v3, (int)v8._Myptr);
      LOG_NORMAL("CAlliance::Expire() Alliance's expired. (AID:%d)", *(_DWORD *)v6);
    }
  }
  CRWLock::WriteUnlock(&unk_4E09B0);
}
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (00419570) --------------------------------------------------------
void __thiscall CAlliance::AllianceInfo(const char *this, int a2)
{
  const char *i; // [esp+8h] [ebp-1014h]
  char v4; // [esp+Ch] [ebp-1010h] BYREF
  char v5[4092]; // [esp+Dh] [ebp-100Fh] BYREF
  __int16 v6; // [esp+1009h] [ebp-13h]
  char v7; // [esp+100Bh] [ebp-11h]
  int v8; // [esp+1010h] [ebp-Ch]
  char *v9; // [esp+1014h] [ebp-8h]
  int v10; // [esp+1018h] [ebp-4h]

  v8 = dword_4D9830;
  CRWLock::ReadLock(&unk_4E09B0);
  v4 = 0;
  memset(v5, 0, sizeof(v5));
  v6 = 0;
  v7 = 0;
  v9 = &v4;
  v10 = 0;
  for ( i = this; i != (const char *)-5; i = (const char *)*((_DWORD *)i + 8) )
  {
    v9 = (char *)PutNumeric<int>(v9, *((_DWORD *)i + 9));
    v9 = PutString(v9, i + 40);
    v9 = PutString(v9, i + 57);
    ++v10;
  }
  CPlayer::Write(a2, 94, "bdbm", 17, *((_DWORD *)this + 19), (unsigned __int8)v10, &v4, v9 - &v4);
  CRWLock::ReadUnlock(&unk_4E09B0);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00419690) --------------------------------------------------------
_DWORD *__thiscall CAlliance::Add(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  *(_DWORD *)(a2 + 32) = this[8];
  result = this;
  this[8] = a2;
  return result;
}

//----- (004196C0) --------------------------------------------------------
int __thiscall CAlliance::GetSize(void *this)
{
  _DWORD *i; // [esp+4h] [ebp-8h]
  int v4; // [esp+8h] [ebp-4h]

  v4 = 0;
  CRWLock::ReadLock(&unk_4E09B0);
  for ( i = this; i != (_DWORD *)-5; i = (_DWORD *)i[8] )
    ++v4;
  CRWLock::ReadUnlock(&unk_4E09B0);
  return v4;
}

//----- (00419710) --------------------------------------------------------
volatile int *__thiscall CWar::SetGuild(volatile int **this, volatile int *a2)
{
  volatile int *result; // eax

  if ( this[20] )
    CIOObject::Release((int *)this[20]);
  if ( a2 )
    CIOObject::AddRef((int)a2);
  result = a2;
  this[20] = a2;
  return result;
}

//----- (00419750) --------------------------------------------------------
void __thiscall CAlliance::BroadcastLock(_DWORD *this, void *a2)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09B0);
  for ( i = this; i != (_DWORD *)-5; i = (_DWORD *)i[8] )
  {
    if ( i[20] )
      CGuild::Broadcast(i[20], a2, 0);
  }
  CRWLock::ReadUnlock(&unk_4E09B0);
}

//----- (004197B0) --------------------------------------------------------
void __thiscall CAlliance::Broadcast(_DWORD *this, void *a2)
{
  while ( this != (_DWORD *)-5 )
  {
    if ( this[20] )
      CGuild::Broadcast(this[20], a2, 0);
    this = (_DWORD *)this[8];
  }
}

//----- (00419800) --------------------------------------------------------
void __cdecl CAlliance::ChangeLeaderName(int a1, int a2, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  int i; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+8h] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock(&unk_4E09B0);
    sub_44AE20(dword_4E09A4, &v6, &a1);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v4);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &v6,
           v3) )
    {
      for ( i = *(_DWORD *)(sub_420250(&v6) + 4); i != -5; i = *(_DWORD *)(i + 32) )
      {
        if ( *(_DWORD *)(i + 36) == a2 )
        {
          strcpy((char *)(i + 57), Source);
          break;
        }
      }
    }
    CRWLock::WriteUnlock(&unk_4E09B0);
  }
}
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (004198A0) --------------------------------------------------------
void __cdecl CAlliance::ChangeGuildName(int a1, int a2, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  int i; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+8h] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock(&unk_4E09B0);
    sub_44AE20(dword_4E09A4, &v6, &a1);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09A4, (int)v4);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &v6,
           v3) )
    {
      for ( i = *(_DWORD *)(sub_420250(&v6) + 4); i != -5; i = *(_DWORD *)(i + 32) )
      {
        if ( *(_DWORD *)(i + 36) == a2 )
        {
          strcpy((char *)(i + 40), Source);
          break;
        }
      }
    }
    CRWLock::WriteUnlock(&unk_4E09B0);
  }
}
// 4E09A4: using guessed type int dword_4E09A4[3];

//----- (00419940) --------------------------------------------------------
CCastle *__thiscall CCastle::CCastle(CCastle *this)
{
  CBase::CBase((int)this);
  this->__vftable = (CCastle_vtbl *)&off_4B5798;
  std::vector<IPAddrMask>::vector<IPAddrMask>((std::vector<CIOSocket::CIOTimer> *)&this->m_cGateVec);
  this->m_nGID = 0;
  this->m_nTax = 0;
  this->m_nTaxRate = 100;
  this->m_pGuild = 0;
  this->m_pWarHead = (CWar *)-4;
  this->m_pCurStandardGuild = 0;
  this->m_nCurStandardGID = 0;
  this->m_bCurStandardUnfurl = 0;
  this->m_nGateLimit = 0;
  this->m_nCID = 0;
  this->m_bCurLordDeclare = 0;
  this->m_nLordDeclareEnd = 0;
  this->m_nExtendedCnt = 0;
  this->m_nWarEnd = 0;
  return this;
}
// 4B5798: using guessed type int (__stdcall *off_4B5798)(int);

//----- (00419A00) --------------------------------------------------------
void *__thiscall sub_419A00(void *this, char a2)
{
  CCastle::_CCastle((std::locale::facet *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00419A30) --------------------------------------------------------
void __thiscall CCastle::_CCastle(std::locale::facet *this)
{
  this->__vftable = (std::locale::facet_vtbl *)&off_4B5798;
  sub_44F580((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)&this[11]);
  CBase::~CBase(this);
}
// 4B5798: using guessed type int (__stdcall *off_4B5798)(int);

//----- (00419A60) --------------------------------------------------------
void __cdecl CCastle::Start()
{
  hHandle = CreateEventA(0, 1, 0, 0);
  CDBSocket::Write(57, &DefaultNullString);
  WaitForSingleObject(hHandle, 0xFFFFFFFF);
  CloseHandle(hHandle);
}

//----- (00419AB0) --------------------------------------------------------
void __cdecl sub_419AB0()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CBase::Delete(*(CItem **)(v1 + 4));
    sub_446090((int *)v4, v3, 0);
  }
  sub_41C770(dword_4E09C8);
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (00419B30) --------------------------------------------------------
void __cdecl CCastle::Load(int a1, int a2)
{
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  _BYTE *v4; // eax
  _BYTE *v5; // eax
  CAtlTraceSettings *v6; // eax
  CCastle *v7; // [esp+0h] [ebp-24h]
  char v8[8]; // [esp+4h] [ebp-20h] BYREF
  char v9[8]; // [esp+Ch] [ebp-18h] BYREF
  CMemory **v10; // [esp+14h] [ebp-10h]
  CItem *item; // [esp+18h] [ebp-Ch]
  char v12[8]; // [esp+1Ch] [ebp-8h] BYREF
  char *a2a; // [esp+30h] [ebp+Ch]

  CRWLock::WriteLock(&unk_4E09D4);
  if ( !a1 )
  {
    SetEvent(hHandle);
    CRWLock::WriteUnlock(&unk_4E09D4);
    return;
  }
  v10 = operator new(0x68u);
  if ( v10 )
    v7 = CCastle::CCastle((CCastle *)v10);
  else
    v7 = 0;
  item = (CItem *)v7;
  v2 = GetNumeric<int>((_DWORD *)a2, &v7->m_nCID);
  v3 = GetNumeric<int>(v2, &v7->m_nGID);
  v4 = GetNumeric<int>(v3, &v7->m_nTax);
  v5 = GetNumeric<unsigned char>(v4, &v7->m_nTaxRate);
  a2a = GetNumeric<unsigned char>(v5, &v7->m_nGateLimit);
  v6 = sub_418940((CAtlTraceSettings *)v8);
  std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>((std::pair<int const ,IDirect3DTexture9 *> *)v9, v6);
  sub_445DF0(
    (int)dword_4E09C8,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v12,
    (const std::pair<int const ,CGame_Character::TargetInfo> *)v9);
  if ( !v12[4] )
  {
    LOG_ERR("CCastle::Load() castle insert error ( cid:%d )", item->m_dwTick);
    CBase::Delete(item);
    CRWLock::WriteUnlock(&unk_4E09D4);
    return;
  }
  if ( item->m_nPID )
  {
    if ( a1 == 2 )
    {
      LOG_ERR("CCastle::Load() guild error (cid:%d, gid:%d)", item->m_dwTick, item->m_nPID);
      item->m_nPID = 0;
      CRWLock::WriteUnlock(&unk_4E09D4);
      return;
    }
    CGuild::Load(item->m_nPID, a2a, (CCastle *)item);
    if ( item->m_pMap )
      CIOObject::Release((CIOObject *)item->m_pMap);
    if ( item->m_dwInfo )
      CIOObject::AddRef(item->m_dwInfo);
    item->m_pMap = (CSMap *)item->m_dwInfo;
    item->m_ptPixel.x = item->m_nPID;
    CCastle::CreateStandard(item->m_dwTick, item->m_nPID, (char *)(item->m_dwInfo + 44), 0);
    CCastle::CreateGate((int)item, item->m_dwTick, item->m_nPID, (char *)(item->m_dwInfo + 44));
  }
  else
  {
    CCastle::CreateStandard(item->m_dwTick, 0, &DefaultNullString, 0);
    CCastle::CreateGate((int)item, item->m_dwTick, 0, &DefaultNullString);
  }
  CRWLock::WriteUnlock(&unk_4E09D4);
}
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (00419D80) --------------------------------------------------------
void __cdecl CCastle::SetWarGuild(volatile int *a1, volatile int *a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  volatile int **i; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v2) )
      break;
    for ( i = *(volatile int ***)(*(_DWORD *)(sub_420250(&v6) + 4) + 52);
          i != (volatile int **)-4;
          i = (volatile int **)i[8] )
    {
      if ( i[10] == a1 )
        CWar::SetGuild(i, a2);
    }
    sub_446090((int *)&v6, v4, 0);
  }
}
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (00419E10) --------------------------------------------------------
void __cdecl CCastle::WarBegin(int a1)
{
  char *v1; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-1038h]
  int v8; // [esp-4h] [ebp-1030h]
  int v9; // [esp-4h] [ebp-1030h]
  CIOBuffer *v10; // [esp-4h] [ebp-1030h]
  int v11; // [esp+4h] [ebp-1028h]
  char v12[4]; // [esp+8h] [ebp-1024h] BYREF
  char v13[4]; // [esp+Ch] [ebp-1020h] BYREF
  int a2; // [esp+10h] [ebp-101Ch]
  CIOBuffer *v15; // [esp+14h] [ebp-1018h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v16; // [esp+18h] [ebp-1014h] BYREF
  char v17; // [esp+1Ch] [ebp-1010h] BYREF
  char v18[4092]; // [esp+1Dh] [ebp-100Fh] BYREF
  __int16 v19; // [esp+1019h] [ebp-13h]
  char v20; // [esp+101Bh] [ebp-11h]
  int v21; // [esp+1020h] [ebp-Ch]
  char *v22; // [esp+1024h] [ebp-8h]
  int v23; // [esp+1028h] [ebp-4h] BYREF

  v21 = dword_4D9830;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  v19 = 0;
  v20 = 0;
  v22 = &v17;
  CRWLock::ReadLock(&unk_4E09D4);
  CCastle::WarList(&v23, v22);
  v22 = v1;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v16);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v12);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v16,
            v2) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v16) + 4) + 52) != -4 )
    {
      a2 = 0;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v16) + 4) + 48) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v16) + 4) + 48) + 392) )
          v11 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v16) + 4) + 48) + 392);
        else
          v11 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v16) + 4) + 32);
        a2 = v11;
      }
      v8 = a2;
      v3 = (int *)sub_420250(&v16);
      CPlayer::WarPortalAll(*v3, v8);
      v4 = (int *)sub_420250(&v16);
      CNPC::WarRelationShow(*v4, 0);
      *(_DWORD *)(*(_DWORD *)(sub_420250(&v16) + 4) + 76) = a1;
      v9 = v22 - &v17;
      v7 = v23;
      v5 = (_DWORD *)sub_420250(&v16);
      v15 = MakePacket(94, "bbddm", 0, 78, *v5, v7, &v17, v9);
      v10 = v15;
      v6 = sub_420250(&v16);
      CCastle::_WarMsg(*(int **)(v6 + 4), v10);
      LOG_NORMAL("CCastle::WarBegin Started");
      CPlayer::CountWarrelationPlayer();
      CIOBuffer::Release(v15);
    }
    sub_446090((int *)&v16, v13, 0);
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
  CCastle::SetWarRemainSecondTime(0);
}
// 419E62: variable 'v1' is possibly undefined
// 4D9830: using guessed type int dword_4D9830;
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041A030) --------------------------------------------------------
int __cdecl CCastle::WarPortal(int a1, int a2, int a3, int a4)
{
  int i; // [esp+0h] [ebp-4h]

  for ( i = 0; i < 1; ++i )
  {
    if ( a1 == dword_4D5B60[7 * i]
      && a2 == dword_4D5B64[7 * i]
      && a3 >= dword_4D5B68[7 * i]
      && a3 <= dword_4D5B70[7 * i]
      && a4 <= dword_4D5B6C[7 * i]
      && a4 >= dword_4D5B74[7 * i] )
    {
      return dword_4D5B78[7 * i];
    }
  }
  return -1;
}
// 4D5B60: using guessed type int dword_4D5B60[];
// 4D5B64: using guessed type int dword_4D5B64[];
// 4D5B68: using guessed type int dword_4D5B68[];
// 4D5B6C: using guessed type int dword_4D5B6C[];
// 4D5B70: using guessed type int dword_4D5B70[];
// 4D5B74: using guessed type int dword_4D5B74[];
// 4D5B78: using guessed type int dword_4D5B78[];

//----- (0041A0D0) --------------------------------------------------------
void __thiscall CCastle::_WarMsg(int *this, void *a2)
{
  int i; // [esp+4h] [ebp-4h]

  if ( this[12] )
  {
    CRWLock::ReadLock(&unk_4E09B0);
    if ( *(_DWORD *)(this[12] + 396) )
      CAlliance::Broadcast(*(_DWORD **)(this[12] + 396), a2);
    else
      CGuild::Broadcast(this[12], a2, 0);
    CRWLock::ReadUnlock(&unk_4E09B0);
  }
  for ( i = this[13]; i != -4; i = *(_DWORD *)(i + 32) )
  {
    if ( *(_DWORD *)(i + 80) )
      CGuild::Broadcast(*(_DWORD *)(i + 80), a2, 0);
  }
}

//----- (0041A170) --------------------------------------------------------
void __stdcall CCastle::WarMsg(void *a2)
{
  int *v1; // ecx
  int *v2; // [esp+0h] [ebp-4h]

  v2 = v1;
  CRWLock::ReadLock(&unk_4E09D4);
  CCastle::_WarMsg(v2, a2);
  CRWLock::ReadUnlock(&unk_4E09D4);
}
// 41A174: variable 'v1' is possibly undefined

//----- (0041A1A0) --------------------------------------------------------
void __cdecl CCastle::WarList(_DWORD *a1, _DWORD *a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // [esp-4h] [ebp-18h]
  char v4[4]; // [esp+0h] [ebp-14h] BYREF
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int j; // [esp+8h] [ebp-Ch]
  int i; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+10h] [ebp-4h] BYREF

  *a1 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v8);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v2) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v8) + 4) + 48) )
    {
      CRWLock::ReadLock(&unk_4E09B0);
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v8) + 4) + 48) + 396) )
      {
        for ( i = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v8) + 4) + 48) + 396); i != -5; i = *(_DWORD *)(i + 32) )
        {
          a2 = PutNumeric<int>(a2, *(_DWORD *)(i + 36));
          ++*a1;
        }
      }
      else
      {
        v3 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v8) + 4) + 32);
        a2 = PutNumeric<int>(a2, v3);
        ++*a1;
      }
      CRWLock::ReadUnlock(&unk_4E09B0);
    }
    for ( j = *(_DWORD *)(*(_DWORD *)(sub_420250(&v8) + 4) + 52); j != -4; j = *(_DWORD *)(j + 32) )
    {
      a2 = PutNumeric<int>(a2, *(_DWORD *)(j + 40));
      ++*a1;
    }
    sub_446090((int *)&v8, v5, 0);
  }
}
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041A300) --------------------------------------------------------
void __thiscall CCastle::OnDelete(int this)
{
  CCastle::SetGuild((volatile int **)this, 0);
  if ( *(_DWORD *)(this + 56) )
    CIOObject::Release(*(int **)(this + 56));
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  if ( *(_DWORD *)(this + 52) != -4 )
  {
    CWar::Clear(*(_DWORD *)(this + 52));
    *(_DWORD *)(this + 52) = -4;
  }
  sub_402180(this);
}

//----- (0041A370) --------------------------------------------------------
void __thiscall CCastle::SetGuild(volatile int **this, volatile int *a2)
{
  if ( this[12] )
    CIOObject::Release((int *)this[12]);
  if ( a2 )
    CIOObject::AddRef((int)a2);
  this[12] = a2;
}

//----- (0041A3B0) --------------------------------------------------------
XBaseModel *__cdecl CCastle::GetCastle(unsigned int nXModelID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  XBaseModel *result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44AE20(dword_4E09C8, v4, &nXModelID);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
         v1) )
  {
    result = *(XBaseModel **)(sub_420250(v4) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0041A400) --------------------------------------------------------
int __cdecl CCastle::GetMonsterTile2CID(int a1, int a2, int a3)
{
  int *v4; // [esp+0h] [ebp-Ch]
  _DWORD *v5; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]
  int j; // [esp+8h] [ebp-4h]

  for ( i = 0; i < 1; ++i )
  {
    v5 = &dword_4D5998[7 * i];
    if ( v5[2] == a1 && v5[3] == a2 && v5[4] == a3 )
      return *v5;
  }
  for ( j = 0; j < 5; ++j )
  {
    v4 = &dword_4D59B8[7 * j];
    if ( v4[2] == a1 && v4[3] == a2 && v4[4] == a3 )
      return *v4;
  }
  return 0;
}

//----- (0041A4B0) --------------------------------------------------------
_DWORD __stdcall CCastle::SubGateState(int a1, int a2)
{
  int v2; // ecx
  int v4; // eax
  int v5; // [esp+0h] [ebp-14h]
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  char v7[4]; // [esp+8h] [ebp-Ch] BYREF
  int i; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  v5 = v2;
  CRWLock::WriteLock(&unk_4E09D4);
  sub_430C20((_DWORD *)(v5 + 88), (int)v9);
  for ( i = 0; i < 5; ++i )
  {
    if ( dword_4D59B8[7 * i] == a1 )
    {
      if ( a2 == *(_DWORD *)sub_420010(v9) )
      {
        *(_DWORD *)sub_420010(v9) = 0;
        CRWLock::WriteUnlock(&unk_4E09D4);
        return i;
      }
      sub_420030((int *)v9, v7, 0);
      v4 = sub_445B40((_DWORD *)(v5 + 88), (int)v6);
      if ( (unsigned __int8)unknown_libname_8(v4) )
        break;
    }
  }
  CRWLock::WriteUnlock(&unk_4E09D4);
  return -1;
}
// 41A4B6: variable 'v2' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041A570) --------------------------------------------------------
BOOL __thiscall CCastle::IsLord(_DWORD *this, int a2)
{
  BOOL v4; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  v4 = a2 == this[8];
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v4;
}

//----- (0041A5B0) --------------------------------------------------------
BOOL __thiscall CCastle::IsAlliance(_DWORD *this, int a2)
{
  BOOL v3; // [esp+0h] [ebp-Ch]

  CRWLock::ReadLock(&unk_4E09D4);
  v3 = this[12] && *(_DWORD *)(this[12] + 392) == a2;
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v3;
}

//----- (0041A610) --------------------------------------------------------
int __thiscall CCastle::IsAlreadyDeclare(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v5 = 0;
  CRWLock::ReadLock(&unk_4E09D4);
  for ( i = this[13]; i != -4; i = *(_DWORD *)(i + 32) )
  {
    if ( *(_DWORD *)(i + 40) == a2 )
    {
      v5 = 1;
      break;
    }
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v5;
}

//----- (0041A670) --------------------------------------------------------
int __cdecl CCastle::IsAllCastleWarRelation(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int i; // [esp+8h] [ebp-Ch]
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v1) )
      break;
    v6 = *(_DWORD **)(sub_420250(v7) + 4);
    if ( v6[8] && (v6[12] == a1 || *(_DWORD *)(v6[12] + 392) && *(_DWORD *)(v6[12] + 392) == *(_DWORD *)(a1 + 392)) )
    {
LABEL_12:
      CRWLock::ReadUnlock(&unk_4E09D4);
      return 1;
    }
    for ( i = v6[13]; i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 80) && *(_DWORD *)(i + 80) == a1 )
        goto LABEL_12;
    }
    sub_446090((int *)v7, v4, 0);
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
  return 0;
}

//----- (0041A790) --------------------------------------------------------
void __cdecl CCastle::Login(_DWORD *a1, int a2)
{
  char *v2; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  int *v7; // eax
  int v8; // [esp-Ch] [ebp-1044h]
  int v9; // [esp-Ch] [ebp-1044h]
  int v10; // [esp-Ch] [ebp-1044h]
  int v11; // [esp-Ch] [ebp-1044h]
  int v12; // [esp-8h] [ebp-1040h]
  int v13; // [esp-4h] [ebp-103Ch]
  int v14; // [esp-4h] [ebp-103Ch]
  int v15; // [esp-4h] [ebp-103Ch]
  int v16; // [esp-4h] [ebp-103Ch]
  char v17[4]; // [esp+4h] [ebp-1034h] BYREF
  char v18[4]; // [esp+8h] [ebp-1030h] BYREF
  _DWORD *v19; // [esp+Ch] [ebp-102Ch]
  int v20; // [esp+10h] [ebp-1028h]
  int v21; // [esp+14h] [ebp-1024h]
  int j; // [esp+18h] [ebp-1020h]
  int i; // [esp+1Ch] [ebp-101Ch]
  int v24; // [esp+20h] [ebp-1018h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v25; // [esp+24h] [ebp-1014h] BYREF
  char v26; // [esp+28h] [ebp-1010h] BYREF
  char v27[4092]; // [esp+29h] [ebp-100Fh] BYREF
  __int16 v28; // [esp+1025h] [ebp-13h]
  char v29; // [esp+1027h] [ebp-11h]
  int v30; // [esp+102Ch] [ebp-Ch]
  char *v31; // [esp+1030h] [ebp-8h]
  int v32; // [esp+1034h] [ebp-4h] BYREF

  v30 = dword_4D9830;
  v26 = 0;
  memset(v27, 0, sizeof(v27));
  v28 = 0;
  v29 = 0;
  v31 = &v26;
  CRWLock::ReadLock(&unk_4E09D4);
  CCastle::WarList(&v32, v31);
  v31 = v2;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v25);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v17);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v25,
            v3) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v25) + 4) + 52) != -4 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v25) + 4) + 48) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v25) + 4) + 32) == a2 )
        {
          v13 = v31 - &v26;
          v8 = v32;
          v4 = (_DWORD *)sub_420250(&v25);
          CPlayer::Write((int)a1, 94, "bbddm", 0, 78, *v4, v8, &v26, v13);
          break;
        }
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v25) + 4) + 48) + 396) )
        {
          CRWLock::ReadLock(&unk_4E09B0);
          for ( i = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v25) + 4) + 48) + 396); i != -5; i = *(_DWORD *)(i + 32) )
          {
            if ( *(_DWORD *)(i + 36) == a2 )
            {
              v14 = v31 - &v26;
              v9 = v32;
              v5 = (_DWORD *)sub_420250(&v25);
              CPlayer::Write((int)a1, 94, "bbddm", 0, 78, *v5, v9, &v26, v14);
              CRWLock::ReadUnlock(&unk_4E09B0);
              CRWLock::ReadUnlock(&unk_4E09D4);
              return;
            }
          }
          CRWLock::ReadUnlock(&unk_4E09B0);
        }
      }
      for ( j = *(_DWORD *)(*(_DWORD *)(sub_420250(&v25) + 4) + 52); j != -4; j = *(_DWORD *)(j + 32) )
      {
        if ( *(_DWORD *)(j + 40) == a2 )
        {
          v15 = v31 - &v26;
          v10 = v32;
          v6 = (_DWORD *)sub_420250(&v25);
          CPlayer::Write((int)a1, 94, "bbddm", 0, 78, *v6, v10, &v26, v15);
          break;
        }
      }
      v16 = a1[84];
      v12 = a1[83];
      v11 = a1[79];
      v7 = (int *)sub_420250(&v25);
      v24 = CCastle::WarPortal(*v7, v11, v12, v16);
      if ( v24 >= 0 )
      {
        v19 = (_DWORD *)((char *)&unk_4D77C8 + 28 * v24);
        v20 = Random(v19[1] - 32, v19[1] + 32);
        v21 = Random(v19[2] - 32, v19[2] + 32);
        a1[79] = *v19;
        a1[83] = v20;
        a1[84] = v21;
        a1[85] = 0;
      }
    }
    sub_446090((int *)&v25, v18, 0);
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
}
// 41A7E2: variable 'v2' is possibly undefined
// 4D9830: using guessed type int dword_4D9830;
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041AB10) --------------------------------------------------------
void __thiscall CCastle::WarAllianceADD(_DWORD *this, int a2, int a3, int a4, char *a5)
{
  unsigned int v5; // [esp-4h] [ebp-1Ch]
  CWar *v6; // [esp+0h] [ebp-18h]
  CMemory **v8; // [esp+8h] [ebp-10h]
  char *i; // [esp+Ch] [ebp-Ch]
  CIOBuffer *v10; // [esp+14h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E09D4);
  CRWLock::WriteLock(&unk_4E09B0);
  v5 = CGuild::GetWarEndTime();
  CAlliance::Postpone(a5, a3, v5);
  v10 = MakePacket(94, "bbds", 0, 76, a2, a4);
  for ( i = a5; i != (char *)-5; i = (char *)*((_DWORD *)i + 8) )
  {
    v8 = operator new(0x54u);
    if ( v8 )
      v6 = CWar::CWar((CWar *)v8);
    else
      v6 = 0;
    v6->m_nAID = a3;
    v6->m_nGID = *((_DWORD *)i + 9);
    strcpy(v6->m_szGuildName, i + 40);
    strcpy(v6->m_szLeaderName, i + 57);
    CWar::SetGuild((volatile int **)v6, *((volatile int **)i + 20));
    if ( this[13] == -4 )
      this[13] = v6;
    else
      CWar::ADD((_DWORD *)this[13], (int)v6);
    CDBSocket::Write(61, "ddd", a2, a3, *((_DWORD *)i + 9));
    if ( *((_DWORD *)i + 20) )
      CGuild::Broadcast(*((_DWORD *)i + 20), v10, 0);
  }
  CIOBuffer::Release(v10);
  CRWLock::WriteUnlock(&unk_4E09B0);
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041AC80) --------------------------------------------------------
void __thiscall CCastle::WarADD(_DWORD *this, int a2, int a3, char *Source, int a5)
{
  CWar *v5; // [esp+0h] [ebp-14h]
  CMemory **v7; // [esp+8h] [ebp-Ch]
  CIOBuffer *v8; // [esp+10h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E09D4);
  v7 = operator new(0x54u);
  if ( v7 )
    v5 = CWar::CWar((CWar *)v7);
  else
    v5 = 0;
  v5->m_nAID = 0;
  v5->m_nGID = a3;
  strcpy(v5->m_szGuildName, (const char *)(a5 + 44));
  strcpy(v5->m_szLeaderName, Source);
  CWar::SetGuild((volatile int **)v5, (volatile int *)a5);
  if ( this[13] == -4 )
    this[13] = v5;
  else
    CWar::ADD((_DWORD *)this[13], (int)v5);
  CDBSocket::Write(61, "ddd", a2, 0, a3);
  v8 = MakePacket(94, "bbds", 0, 76, a2, a5 + 44);
  CGuild::Broadcast(a5, v8, 0);
  CIOBuffer::Release(v8);
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041AD90) --------------------------------------------------------
int __thiscall CCastle::GetWarSize(_DWORD *this)
{
  int i; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v7 = 0;
  CRWLock::ReadLock(&unk_4E09D4);
  for ( i = this[13]; i != -4; i = *(_DWORD *)(i + 32) )
    ++v7;
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v7;
}

//----- (0041ADE0) --------------------------------------------------------
void __thiscall CCastle::WarDelcareList(_DWORD *this, int a2)
{
  char *v2; // eax
  int j; // [esp+8h] [ebp-1018h]
  int i; // [esp+Ch] [ebp-1014h]
  char v6; // [esp+10h] [ebp-1010h] BYREF
  char v7[4092]; // [esp+11h] [ebp-100Fh] BYREF
  __int16 v8; // [esp+100Dh] [ebp-13h]
  char v9; // [esp+100Fh] [ebp-11h]
  int v10; // [esp+1010h] [ebp-10h]
  char *v11; // [esp+1014h] [ebp-Ch]
  int v12; // [esp+1018h] [ebp-8h]
  int v13; // [esp+101Ch] [ebp-4h]

  v10 = dword_4D9830;
  CRWLock::ReadLock(&unk_4E09D4);
  v6 = 0;
  memset(v7, 0, sizeof(v7));
  v8 = 0;
  v9 = 0;
  v11 = &v6;
  v13 = 0;
  v12 = 0;
  if ( this[12] )
  {
    if ( *(_DWORD *)(this[12] + 396) )
    {
      for ( i = *(_DWORD *)(this[12] + 396); i != -5; i = *(_DWORD *)(i + 32) )
      {
        v11 = PutString(v11, (const char *)(i + 40));
        v11 = PutString(v11, (const char *)(i + 57));
        ++v12;
      }
    }
    else
    {
      v11 = PutString(v11, (const char *)(this[12] + 44));
      v2 = CGuild::GetLeaderName(this[12]);
      v11 = PutString(v11, v2);
      ++v12;
    }
  }
  if ( this[13] != -4 )
  {
    for ( j = this[13]; j != -4; j = *(_DWORD *)(j + 32) )
    {
      if ( !this[12] || this[8] != *(_DWORD *)(j + 40) && this[8] != *(_DWORD *)(j + 36) )
      {
        if ( *(_DWORD *)(j + 36) && *(_DWORD *)(j + 40) != *(_DWORD *)(j + 36) )
          v11 = PutNumeric<unsigned char>(v11, 0);
        else
          v11 = PutNumeric<unsigned char>(v11, 1);
        v11 = (char *)PutNumeric<int>(v11, *(_DWORD *)(j + 36));
        v11 = PutString(v11, (const char *)(j + 44));
        v11 = PutString(v11, (const char *)(j + 61));
        ++v13;
      }
    }
  }
  CPlayer::Write(a2, 94, "bbbm", 20, (unsigned __int8)v12, (unsigned __int8)v13, &v6, v11 - &v6);
  CRWLock::ReadUnlock(&unk_4E09D4);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0041B060) --------------------------------------------------------
BOOL __thiscall CCastle::IsStandardAlive(_DWORD *this)
{
  BOOL v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  v3 = this[15] == 0;
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v3;
}

//----- (0041B0A0) --------------------------------------------------------
int __thiscall CCastle::GetStandardUnfurl(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  v3 = this[16];
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v3;
}

//----- (0041B0D0) --------------------------------------------------------
void __thiscall CCastle::SetStandardUnfurl(_DWORD *this, int a2)
{
  CRWLock::WriteLock(&unk_4E09D4);
  this[16] = a2;
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041B100) --------------------------------------------------------
void __thiscall CCastle::SetCurStandardGuild(int this, int a2, volatile int *a3)
{
  CRWLock::WriteLock(&unk_4E09D4);
  if ( *(_DWORD *)(this + 56) )
    CIOObject::Release(*(int **)(this + 56));
  if ( a3 )
    CIOObject::AddRef((int)a3);
  *(_DWORD *)(this + 56) = a3;
  *(_DWORD *)(this + 60) = a2;
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041B160) --------------------------------------------------------
void __cdecl CCastle::UnfurlStandardCancel(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v2[4]; // [esp+0h] [ebp-10h] BYREF
  char v3[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock(&unk_4E09D4);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v2);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
              v1) )
        break;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 52) != -4 )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 32) == a1 )
        {
          *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 64) = 0;
          break;
        }
        for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
        {
          if ( *(_DWORD *)(i + 40) == a1 )
          {
            *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 64) = 0;
            CRWLock::WriteUnlock(&unk_4E09D4);
            return;
          }
        }
      }
      sub_446090((int *)v5, v3, 0);
    }
    CRWLock::WriteUnlock(&unk_4E09D4);
  }
  else
  {
    LOG_ERR("CCastle::UnfurlStandardCancel() gid error");
  }
}

//----- (0041B270) --------------------------------------------------------
void __thiscall CCastle::BrokenStandard(int *this, int a2)
{
  CIOBuffer *v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  if ( this[14] )
  {
    v3 = MakePacket(94, "bbdsb", 0, 98, a2, this[14] + 44, this[20] != 0);
    if ( !--*(_DWORD *)(this[14] + 32) )
      *(_DWORD *)(this[14] + 356) = GetTickCount() + 600000;
  }
  else
  {
    v3 = MakePacket(94, "bbdsb", 0, 98, a2, &DefaultNullString, 0);
  }
  CCastle::_WarMsg(this, v3);
  CIOBuffer::Release(v3);
  CRWLock::ReadUnlock(&unk_4E09D4);
  CCastle::SetCurStandardGuild((int)this, 0, 0);
  CCastle::SetLordDeclare(this, 0);
}

//----- (0041B360) --------------------------------------------------------
int __cdecl CCastle::CreateStandard(int a1, int a5, char *Source, int a7)
{
  int i; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v6 = 0;
  for ( i = 0; i < 1; ++i )
  {
    if ( dword_4D5998[7 * i] == a1 )
    {
      if ( CMonsterGuildWar::Create(
             dword_4D5998[7 * i + 1],
             dword_4D5998[7 * i + 2],
             (int)&dword_4D5998[7 * i + 3],
             dword_4D5998[7 * i + 6] + (dword_4D5998[7 * i + 5] << 8),
             a5,
             Source,
             a7) )
      {
        v6 = 1;
      }
      return v6;
    }
  }
  return v6;
}

//----- (0041B3F0) --------------------------------------------------------
void __thiscall CCastle::CreateGate(int this, int a2, int a3, char *Source)
{
  CIOSocket::CIOTimer _Val; // [esp+4h] [ebp-Ch] BYREF

  for ( _Val.m_nId = 0; _Val.m_nId < 5; ++_Val.m_nId )
  {
    _Val.m_pObject = (CIOObject *)&dword_4D59B8[7 * _Val.m_nId];
    if ( _Val.m_pObject->__vftable == (CIOObject_vtbl *)a2 )
    {
      _Val.m_dwTime = (unsigned int)CMonsterGuildWar::Create(
                                      _Val.m_pObject->m_nRef,
                                      _Val.m_pObject->m_nTimerRef,
                                      (int)&_Val.m_pObject->m_nGeneralRef,
                                      _Val.m_pObject[1].m_nTimerRef + (_Val.m_pObject[1].m_nRef << 8),
                                      a3,
                                      Source,
                                      0);
      std::vector<IPAddrMask>::push_back((std::vector<CIOSocket::CIOTimer> *)(this + 88), &_Val);
    }
  }
}

//----- (0041B480) --------------------------------------------------------
void __stdcall CCastle::CreateNoExistGate(int a1, int a2, char *Source)
{
  int v3; // ecx
  CIOCriticalSection *v4; // esi
  int v5; // eax
  int v6; // [esp+4h] [ebp-1Ch]
  char v7[4]; // [esp+8h] [ebp-18h] BYREF
  char v8[4]; // [esp+Ch] [ebp-14h] BYREF
  int *v9; // [esp+10h] [ebp-10h]
  int i; // [esp+14h] [ebp-Ch]
  char v11[4]; // [esp+18h] [ebp-8h] BYREF
  int v12; // [esp+1Ch] [ebp-4h]

  v6 = v3;
  sub_430C20((_DWORD *)(v3 + 88), (int)v11);
  for ( i = 0; i < 5; ++i )
  {
    v9 = &dword_4D59B8[7 * i];
    if ( *v9 == a1 )
    {
      v12 = *(_DWORD *)sub_420010(v11);
      if ( v12 )
      {
        (*(void (__thiscall **)(int, int, char *))(*(_DWORD *)v12 + 216))(v12, a2, Source);
      }
      else
      {
        v4 = CMonsterGuildWar::Create(v9[1], v9[2], (int)(v9 + 3), v9[6] + (v9[5] << 8), a2, Source, 0);
        *(_DWORD *)sub_420010(v11) = v4;
      }
      sub_420030((int *)v11, v8, 0);
      v5 = sub_445B40((_DWORD *)(v6 + 88), (int)v7);
      if ( (unsigned __int8)unknown_libname_8(v5) )
        break;
    }
  }
}
// 41B487: variable 'v3' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041B580) --------------------------------------------------------
int __cdecl CCastle::IsGateAlive(char a1, unsigned int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+0h] [ebp-10h] BYREF
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+Ch] [ebp-4h] BYREF

  v6 = 0;
  CRWLock::ReadLock(&unk_4E09D4);
  sub_44AE20(dword_4E09C8, &v7, &a1);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v7,
         v2) )
  {
    v5 = *(_DWORD *)(sub_420250(&v7) + 4);
    if ( *(_DWORD *)std::vector<Event::Section>::operator[]((std::vector<CItemInfo> *)(v5 + 88), a2) )
      v6 = 1;
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v6;
}
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041B610) --------------------------------------------------------
int __thiscall CCastle::GetTaxRate(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  v3 = this[10];
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v3;
}

//----- (0041B640) --------------------------------------------------------
void __thiscall CCastle::SetTaxRate(_DWORD *this, int a2, int a3)
{
  CRWLock::WriteLock(&unk_4E09D4);
  this[10] = a3;
  CDBSocket::Write(63, "db", a2, (unsigned __int8)a3);
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041B690) --------------------------------------------------------
BOOL __thiscall CCastle::IsPayment(_DWORD *this)
{
  BOOL v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  v3 = this[8] != 0;
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v3;
}

//----- (0041B6D0) --------------------------------------------------------
int __thiscall CCastle::GetTax(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E09D4);
  v3 = this[9];
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v3;
}

//----- (0041B700) --------------------------------------------------------
void __thiscall CCastle::AddTax(_DWORD *this, int a2)
{
  int v2; // [esp+0h] [ebp-8h]

  CRWLock::WriteLock(&unk_4E09D4);
  if ( this[9] + (a2 < 0 ? 0 : a2) <= 2000000000 )
    v2 = this[9] + (a2 < 0 ? 0 : a2);
  else
    v2 = 2000000000;
  this[9] = v2;
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041B770) --------------------------------------------------------
int __thiscall CCastle::ResetTax(_DWORD *this, int a2)
{
  int v4; // [esp+4h] [ebp-4h]

  CRWLock::WriteLock(&unk_4E09D4);
  v4 = this[9];
  this[9] = 0;
  CDBSocket::Write(27, "dd", a2, 0);
  CRWLock::WriteUnlock(&unk_4E09D4);
  return v4;
}

//----- (0041B7C0) --------------------------------------------------------
void __cdecl CCastle::TaxSave()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  _DWORD *v1; // eax
  int v2; // [esp-4h] [ebp-10h]
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  if ( ++dword_4E099C > 5 )
  {
    dword_4E099C = 0;
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
    while ( 1 )
    {
      v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v3);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
              v0) )
        break;
      v2 = *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 36);
      v1 = (_DWORD *)sub_420250(v5);
      CDBSocket::Write(27, "dd", *v1, v2);
      sub_446090((int *)v5, v4, 0);
    }
  }
}
// 4E099C: using guessed type int dword_4E099C;

//----- (0041B860) --------------------------------------------------------
int __thiscall CCastle::IsGateUse(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v5 = 0;
  CRWLock::ReadLock(&unk_4E09D4);
  if ( this[11] != 2 )
  {
    if ( this[11] )
    {
      if ( this[11] == 1 )
      {
        if ( a2 && this[12] )
        {
          if ( *(_DWORD *)(this[12] + 396) )
          {
            CRWLock::ReadLock(&unk_4E09B0);
            for ( i = *(_DWORD *)(this[12] + 396); i != -5 && *(_DWORD *)(i + 36) != a2; i = *(_DWORD *)(i + 32) )
              ;
            if ( i == -5 )
              v5 = 97;
            CRWLock::ReadUnlock(&unk_4E09B0);
          }
          else if ( this[8] != a2 )
          {
            v5 = 97;
          }
        }
        else
        {
          v5 = 97;
        }
      }
    }
    else if ( !a2 || this[8] != a2 )
    {
      v5 = 96;
    }
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v5;
}

//----- (0041B970) --------------------------------------------------------
int __thiscall CCastle::IsGateUseWarring(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-8h]
  int v8; // [esp+8h] [ebp-4h]

  v8 = 0;
  CRWLock::ReadLock(&unk_4E09D4);
  if ( a2 && this[12] )
  {
    if ( *(_DWORD *)(this[12] + 396) )
    {
      CRWLock::ReadLock(&unk_4E09B0);
      for ( i = *(_DWORD *)(this[12] + 396); i != -5 && *(_DWORD *)(i + 36) != a2; i = *(_DWORD *)(i + 32) )
        ;
      if ( i == -5 )
        v8 = 97;
      CRWLock::ReadUnlock(&unk_4E09B0);
    }
    else if ( this[8] != a2 )
    {
      v8 = 97;
    }
  }
  else
  {
    v8 = 97;
  }
  CRWLock::ReadUnlock(&unk_4E09D4);
  return v8;
}

//----- (0041BA30) --------------------------------------------------------
void __cdecl CCastle::GateGoto(int a1, int a2)
{
  int i; // [esp+4h] [ebp-4h]

  for ( i = 0; i < 10; ++i )
  {
    if ( dword_4D5A48[7 * i + 1] == a2 )
    {
      CPlayer::Teleport((_DWORD *)a1, dword_4D5A48[7 * i + 2], &dword_4D5A48[7 * i + 3], 0, 0);
      return;
    }
  }
}

//----- (0041BA90) --------------------------------------------------------
int __thiscall CCastle::SetGateLimit(void *this, signed int a2, int a3)
{
  if ( a2 < 0 || a2 > 2 )
    return 0;
  CRWLock::WriteLock(&unk_4E09D4);
  *((_DWORD *)this + 11) = a2;
  CRWLock::WriteUnlock(&unk_4E09D4);
  CDBSocket::Write(65, "db", a3, (unsigned __int8)a2);
  return 1;
}

//----- (0041BAF0) --------------------------------------------------------
void __cdecl CCastle::SetWarRemainSecondTime(int a1)
{
  CRWLock::WriteLock(&unk_4E09D4);
  dword_4E09A0 = a1;
  CRWLock::WriteUnlock(&unk_4E09D4);
}
// 4E09A0: using guessed type int dword_4E09A0;

//----- (0041BB20) --------------------------------------------------------
void __cdecl CCastle::ChangeLeaderName(int a1, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v2) )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a1 )
      {
        strcpy((char *)(i + 61), Source);
        CRWLock::WriteUnlock(&unk_4E09D4);
        return;
      }
    }
    sub_446090((int *)&v6, v4, 0);
  }
  CRWLock::WriteUnlock(&unk_4E09D4);
}
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041BBD0) --------------------------------------------------------
void __cdecl CCastle::ChangeGuildName(int a1, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v2) )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a1 )
      {
        strcpy((char *)(i + 44), Source);
        CRWLock::WriteUnlock(&unk_4E09D4);
        return;
      }
    }
    sub_446090((int *)&v6, v4, 0);
  }
  CRWLock::WriteUnlock(&unk_4E09D4);
}
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041BC80) --------------------------------------------------------
void __thiscall CCastle::SetLordDeclare(_DWORD *this, int a2)
{
  CRWLock::WriteLock(&unk_4E09D4);
  this[20] = a2;
  if ( a2 )
    this[21] = time(0) + 300;
  else
    this[21] = 0;
  CRWLock::WriteUnlock(&unk_4E09D4);
}

//----- (0041BCE0) --------------------------------------------------------
void __cdecl CCastle::SecondProcess()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  char v1[4]; // [esp+0h] [ebp-24h] BYREF
  char v2[4]; // [esp+4h] [ebp-20h] BYREF
  CIOBuffer *v3; // [esp+8h] [ebp-1Ch]
  CIOBuffer *v4; // [esp+Ch] [ebp-18h]
  int *v5; // [esp+10h] [ebp-14h]
  int v6; // [esp+14h] [ebp-10h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+18h] [ebp-Ch] BYREF
  time_t v8; // [esp+1Ch] [ebp-8h]
  int v9; // [esp+20h] [ebp-4h]

  v9 = 0;
  v8 = time(0);
  CRWLock::WriteLock(&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v1);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v0) )
      break;
    v5 = *(int **)(sub_420250(&v7) + 4);
    if ( v5[13] != -4 && v5[19] )
    {
      v6 = v5[19] - v8;
      if ( v6 <= 600 )
      {
        if ( !(v6 % 60) || v6 <= 60 )
        {
          v4 = MakePacket(94, "bbbb", 0, 100, (unsigned __int8)(v6 / 60), (unsigned __int8)(v6 % 60));
          CCastle::_WarMsg(v5, v4);
          CIOBuffer::Release(v4);
        }
        if ( v6 <= 0 )
        {
          v9 = CCastle::IsWarEnd(v5);
          if ( v9 )
            CCastle::WarEnd((int)v5);
        }
      }
      if ( v5[20] )
      {
        v6 = v5[21] - v8;
        if ( v6 <= 300 && (!(v6 % 60) || v6 < 60 && !(v6 % 10) || v6 <= 30) )
        {
          v3 = MakePacket(94, "bbsbb", 0, 104, v5[14] + 44, (unsigned __int8)(v6 / 60), (unsigned __int8)(v6 % 60));
          CCastle::_WarMsg(v5, v3);
          CIOBuffer::Release(v3);
        }
        if ( v6 <= 0 )
        {
          CCastle::ChangeLord((int)v5);
          v5[20] = 0;
          v5[21] = 0;
        }
      }
    }
    sub_446090((int *)&v7, v2, 0);
  }
  if ( v9 )
    dword_4E0964 = 0;
  CRWLock::WriteUnlock(&unk_4E09D4);
}
// 4E0964: using guessed type int dword_4E0964;
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041BEE0) --------------------------------------------------------
void __thiscall CCastle::WarEnd(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char *v2; // [esp+0h] [ebp-34h]
  char v4[4]; // [esp+8h] [ebp-2Ch] BYREF
  char v5[4]; // [esp+Ch] [ebp-28h] BYREF
  int v6; // [esp+10h] [ebp-24h] BYREF
  int v7; // [esp+14h] [ebp-20h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+18h] [ebp-1Ch] BYREF
  CItem *item; // [esp+1Ch] [ebp-18h]
  _DWORD v10[3]; // [esp+20h] [ebp-14h] BYREF
  int a2; // [esp+2Ch] [ebp-8h]
  CIOBuffer *v12; // [esp+30h] [ebp-4h]

  CCastle::ChangeLord(this);
  if ( *(_DWORD *)(this + 48) )
    v2 = (char *)(*(_DWORD *)(this + 48) + 44);
  else
    v2 = &DefaultNullString;
  v12 = MakePacket(94, "bbds", 0, 79, *(_DWORD *)(this + 68), v2);
  CCastle::_WarMsg((int *)this, v12);
  CIOBuffer::Release(v12);
  LOG_NORMAL("CCastle::WarEnd  ");
  sub_47D030(v10);
  CMonster::GetMonsterList((int)v10, 319);
  item = 0;
  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)v10,
    (std::list<tagPARTICLES *>::iterator *)&v8);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v10, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v1) )
      break;
    item = *(CItem **)sub_40F040(&v8);
    v7 = 0;
    v6 = 0;
    ((void (__thiscall *)(CItem *, CItem *, _DWORD, int *, int *))item->__vftable[1].OnWaitCallback)(
      item,
      item,
      0,
      &v7,
      &v6);
    CBase::Delete(item);
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v8, v5, 0);
  }
  a2 = 0;
  if ( *(_DWORD *)(this + 48) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(this + 48) + 392) )
      a2 = *(_DWORD *)(*(_DWORD *)(this + 48) + 392);
    else
      a2 = *(_DWORD *)(this + 32);
  }
  CPlayer::WarPortalAll(*(_DWORD *)(this + 68), a2);
  if ( *(_DWORD *)(this + 52) != -4 )
  {
    CWar::Clear(*(_DWORD *)(this + 52));
    *(_DWORD *)(this + 52) = -4;
  }
  CNPC::WarRelationShow(*(_DWORD *)(this + 68), 1);
  if ( *(_DWORD *)(this + 48) )
  {
    if ( !*(_DWORD *)(this + 56) )
      CCastle::CreateStandard(*(_DWORD *)(this + 68), *(_DWORD *)(this + 32), (char *)(*(_DWORD *)(this + 48) + 44), 0);
    CCastle::CreateNoExistGate(*(_DWORD *)(this + 68), *(_DWORD *)(this + 32), (char *)(*(_DWORD *)(this + 48) + 44));
  }
  else
  {
    CCastle::CreateStandard(*(_DWORD *)(this + 68), 0, &DefaultNullString, 0);
    CCastle::CreateNoExistGate(*(_DWORD *)(this + 68), 0, &DefaultNullString);
  }
  if ( *(_DWORD *)(this + 56) )
    CIOObject::Release(*(int **)(this + 56));
  if ( *(_DWORD *)(this + 48) )
    CIOObject::AddRef(*(_DWORD *)(this + 48));
  *(_DWORD *)(this + 56) = *(_DWORD *)(this + 48);
  *(_DWORD *)(this + 60) = *(_DWORD *)(this + 32);
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 80) = 0;
  *(_DWORD *)(this + 84) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_DWORD *)(this + 72) = 0;
  CDBSocket::Write(62, &DefaultNullString);
  sub_472990((std::list<std::pair<std::string const ,int>> *)v10);
}

//----- (0041C180) --------------------------------------------------------
int __thiscall CCastle::IsWarEnd(int *this)
{
  CIOBuffer *v3; // [esp+4h] [ebp-4h]

  if ( !this[16] && !this[20] )
    return 1;
  if ( ++this[18] >= 4 )
    return 1;
  v3 = MakePacket(94, "bb", 0, 105);
  CCastle::_WarMsg(this, v3);
  LOG_NORMAL("CCastle::IsWarEnd   ");
  CIOBuffer::Release(v3);
  this[19] += 600;
  return 0;
}

//----- (0041C210) --------------------------------------------------------
void __thiscall CCastle::ChangeLord(int this)
{
  char *v1; // [esp+0h] [ebp-10h]
  CIOBuffer *v3; // [esp+8h] [ebp-8h]
  int v4; // [esp+Ch] [ebp-4h]

  v4 = 0;
  if ( *(_DWORD *)(this + 56) )
  {
    v4 = *(_DWORD *)(this + 56);
  }
  else if ( *(_DWORD *)(this + 48) )
  {
    v4 = *(_DWORD *)(this + 48);
  }
  if ( v4 != *(_DWORD *)(this + 48) )
  {
    *(_DWORD *)(this + 32) = *(_DWORD *)(this + 60);
    CCastle::SetGuild((volatile int **)this, *(volatile int **)(this + 56));
    CDBSocket::Write(64, "dd", *(_DWORD *)(this + 68), *(_DWORD *)(this + 32));
    if ( *(_DWORD *)(this + 48) )
      v1 = (char *)(*(_DWORD *)(this + 48) + 44);
    else
      v1 = &DefaultNullString;
    v3 = MakePacket(94, "bbds", 0, 106, *(_DWORD *)(this + 68), v1);
    CCastle::_WarMsg((int *)this, v3);
    CIOBuffer::Release(v3);
    *(_DWORD *)(this + 36) = 0;
    *(_DWORD *)(this + 40) = 100;
    CDBSocket::Write(63, "db", *(_DWORD *)(this + 68), 100);
  }
}

//----- (0041C310) --------------------------------------------------------
int CCastle::IsWarDeclared()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E09C8, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v4) + 4) + 52) != -4 )
      return 1;
    sub_446090((int *)v4, v3, 0);
  }
  return 0;
}

//----- (0041C380) --------------------------------------------------------
CWar *__thiscall CWar::CWar(CWar *this)
{
  CBase::CBase((int)this);
  this->__vftable = (CWar_vtbl *)&off_4B58F0;
  this->m_pNextWar = (CWar *)-4;
  this->m_nAID = 0;
  this->m_nGID = 0;
  memset(this->m_szGuildName, 0, sizeof(this->m_szGuildName));
  memset(this->m_szLeaderName, 0, sizeof(this->m_szLeaderName));
  this->m_pGuild = 0;
  return this;
}
// 4B58F0: using guessed type int (__stdcall *off_4B58F0)(int);

//----- (0041C3F0) --------------------------------------------------------
void *__thiscall sub_41C3F0(void *this, char a2)
{
  sub_41C420((std::locale::facet *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041C420) --------------------------------------------------------
void __thiscall sub_41C420(std::locale::facet *this)
{
  this->__vftable = (std::locale::facet_vtbl *)&off_4B58F0;
  CBase::~CBase(this);
}
// 4B58F0: using guessed type int (__stdcall *off_4B58F0)(int);

//----- (0041C440) --------------------------------------------------------
void __cdecl CWar::Start()
{
  hHandle = CreateEventA(0, 1, 0, 0);
  CDBSocket::Write(58, &DefaultNullString);
  WaitForSingleObject(hHandle, 0xFFFFFFFF);
  CloseHandle(hHandle);
}

//----- (0041C490) --------------------------------------------------------
void __cdecl CWar::Load(int a1, char *a2)
{
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  char *v4; // eax
  char *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  CItem *v9; // [esp-4h] [ebp-24h]
  CItem *v10; // [esp+0h] [ebp-20h]
  char v11[4]; // [esp+4h] [ebp-1Ch] BYREF
  char v12[4]; // [esp+8h] [ebp-18h] BYREF
  CMemory **v13; // [esp+Ch] [ebp-14h]
  int v14; // [esp+10h] [ebp-10h]
  int v15; // [esp+14h] [ebp-Ch] BYREF
  CItem *item; // [esp+18h] [ebp-8h]
  char v17[4]; // [esp+1Ch] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E09D4);
  if ( a1 )
  {
    std::_String_base::_String_base((std::_String_base *)&v15);
    while ( a1 > 0 )
    {
      v13 = operator new(0x54u);
      if ( v13 )
        v10 = (CItem *)CWar::CWar((CWar *)v13);
      else
        v10 = 0;
      item = v10;
      v2 = GetNumeric<int>(a2, v17);
      v3 = GetNumeric<int>(v2, &item->m_nIID);
      v4 = (char *)GetNumeric<int>(v3, &item->m_pInit);
      v5 = GetString(v4, (char *)&item->m_pPrefix);
      a2 = GetString(v5, (char *)&item->m_ptPixel.x + 1);
      v15 = *sub_44AE20(dword_4E09C8, v12, v17);
      v6 = sub_430C20(dword_4E09C8, (int)v11);
      if ( (unsigned __int8)unknown_libname_8(v6) )
      {
        LOG_ERR("CWar::Load() not find castle (cid:%d)", *(_DWORD *)v17);
        CBase::Delete(item);
        CRWLock::WriteUnlock(&unk_4E09D4);
        return;
      }
      v14 = *(_DWORD *)(sub_420250(&v15) + 4);
      if ( item->m_pInit == *(CInitItem **)(v14 + 32) )
        CWar::SetGuild((volatile int **)item, *(volatile int **)(v14 + 48));
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v15) + 4) + 52) == -4 )
      {
        v7 = sub_420250(&v15);
        *(_DWORD *)(*(_DWORD *)(v7 + 4) + 52) = item;
      }
      else
      {
        v9 = item;
        v8 = sub_420250(&v15);
        CWar::ADD(*(_DWORD **)(*(_DWORD *)(v8 + 4) + 52), (int)v9);
      }
      --a1;
    }
    CRWLock::WriteUnlock(&unk_4E09D4);
  }
  else
  {
    SetEvent(hHandle);
    CRWLock::WriteUnlock(&unk_4E09D4);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E09C8: using guessed type int dword_4E09C8[3];

//----- (0041C650) --------------------------------------------------------
void __thiscall sub_41C650(volatile int **this)
{
  CWar::SetGuild(this, 0);
  sub_402180((int)this);
}

//----- (0041C670) --------------------------------------------------------
_DWORD *__thiscall CWar::ADD(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  while ( 1 )
  {
    result = this;
    if ( this[8] == -4 )
      break;
    this = (_DWORD *)this[8];
  }
  this[8] = a2;
  return result;
}

//----- (0041C6B0) --------------------------------------------------------
void __thiscall CWar::Clear(int this)
{
  CItem *v2; // [esp+4h] [ebp-8h]
  CItem *item; // [esp+8h] [ebp-4h]

  for ( item = *(CItem **)(this + 32); item != (CItem *)-4; item = v2 )
  {
    v2 = (CItem *)item->m_nPID;
    item->m_nPID = -4;
    CBase::Delete(item);
  }
  *(_DWORD *)(this + 32) = -4;
  CBase::Delete((CItem *)this);
}

//----- (0041C710) --------------------------------------------------------
void __thiscall sub_41C710(_DWORD *this)
{
  int *v1; // eax

  v1 = (int *)sub_478AB0(this);
  sub_41C8D0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
}

//----- (0041C770) --------------------------------------------------------
void __thiscall sub_41C770(_DWORD *this)
{
  int *v1; // eax

  v1 = (int *)sub_478AB0(this);
  sub_41C950(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
}

//----- (0041C7D0) --------------------------------------------------------
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *__thiscall std::vector<IPAddrMask>::vector<IPAddrMask>(std::vector<CIOSocket::CIOTimer> *this)
{
  std::vector<CIOSocket::CIOTimer> *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *v3; // [esp+0h] [ebp-8h]

  v3 = (std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  sub_44F7C0(v3, (char)v2);
  std::vector<TSmartPointer<TriggerSystem::CEvent>>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0041C800) --------------------------------------------------------
CItemInfo *__thiscall std::vector<Event::Section>::operator[](std::vector<CItemInfo> *this, unsigned int _Pos)
{
  int *v2; // eax
  _DWORD *v3; // eax
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v2 = (int *)sub_430C20(this, (int)v6);
  v3 = sub_44F7E0(v2, v5, _Pos);
  return (CItemInfo *)sub_420010(v3);
}

//----- (0041C840) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall std::vector<IPAddrMask>::push_back(std::vector<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Val)
{
  unsigned int v2; // esi
  CIOSocket::CIOTimer *result; // eax
  void **v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this);
  if ( v2 >= std::vector<TSmartPointer<TriggerSystem::CEvent>>::capacity((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this) )
  {
    v4 = (void **)sub_445B40(this, (int)v7);
    result = (CIOSocket::CIOTimer *)std::length_error::length_error(
                                      (std::length_error *)this,
                                      (const std::length_error *)v6,
                                      *v4,
                                      (int)_Val);
  }
  else
  {
    result = (CIOSocket::CIOTimer *)std::vector<char const *>::_Ufill(
                                      (std::vector<unsigned int> *)this,
                                      &this->_Mylast->m_dwTime,
                                      1u,
                                      &_Val->m_dwTime);
    this->_Mylast = result;
  }
  return result;
}

//----- (0041C8D0) --------------------------------------------------------
int __stdcall sub_41C8D0(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_41C8D0(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (0041C950) --------------------------------------------------------
int __stdcall sub_41C950(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_41C950(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (0041C9D0) --------------------------------------------------------
const std::length_error *__thiscall std::length_error::length_error(std::length_error *this, const std::length_error *that, void *a3, int a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this) )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this, (int)v11);
    v8 = std::vector<IPAddrMask>::iterator::operator-((std::vector<CIOSocket::CIOTimer>::iterator *)&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  std::vector<std::list<std::pair<std::string const,int>>::iterator,std::allocator<std::list<std::pair<std::string const,int>>::iterator>>::_Insert_n(
    (int)this,
    (char *)a3,
    1u,
    (unsigned int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_44F7E0(v5, that, v7);
  return that;
}

//----- (0041CA50) --------------------------------------------------------
unsigned int *__thiscall std::vector<char const *>::_Ufill(std::vector<unsigned int> *this, unsigned int *_Ptr, unsigned int _Count, const unsigned int *_Val)
{
  std::_Uninitialized_fill_n<char *,unsigned int,char,std::allocator<char>>((char *)_Ptr, _Count, (const char *)_Val);
  return &_Ptr[_Count];
}

//----- (0041CA80) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *this, const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *_Val1, const bool *_Val2)
{
  *(_DWORD *)this = *(_DWORD *)_Val1;
  *((_BYTE *)this + 4) = *_Val2;
  return this;
}

//----- (0041CAB0) --------------------------------------------------------
std::list<std::pair<std::string const ,int>>::const_iterator *__thiscall sub_41CAB0(std::list<std::pair<std::string const ,int>>::const_iterator *this)
{
  std::list<std::pair<std::string const,int>>::const_iterator::operator--(this);
  return this;
}

//----- (0041CAD0) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0((int *)this);
  v6 = this->_Myhead;
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, _Keyval) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = (std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *)v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (0041CB60) --------------------------------------------------------
unsigned int __thiscall sub_41CB60(std::allocator<tagPARTICLES *> *this)
{
  return std::allocator<XSoundPtr>::max_size(this);
}

//----- (0041CB80) --------------------------------------------------------
void __thiscall std::vector<std::list<std::pair<std::string const,int>>::iterator,std::allocator<std::list<std::pair<std::string const,int>>::iterator>>::_Insert_n(int this, char *a2, unsigned int a3, unsigned int *a4)
{
  unsigned int v4; // esi
  unsigned int *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-1Ch]
  char *v8; // [esp+Ch] [ebp-14h]
  CMemory **v9; // [esp+10h] [ebp-10h]
  unsigned int *v10; // [esp+14h] [ebp-Ch]
  unsigned int v11; // [esp+18h] [ebp-8h]
  int v12; // [esp+18h] [ebp-8h]
  unsigned int _Val; // [esp+1Ch] [ebp-4h] BYREF
  unsigned int _Count; // [esp+2Ch] [ebp+Ch]

  _Val = *a4;
  v11 = std::vector<TSmartPointer<TriggerSystem::CEvent>>::capacity((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this);
  if ( a3 )
  {
    v4 = sub_41CB60((std::allocator<tagPARTICLES *> *)this);
    if ( v4
       - std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this) >= a3 )
    {
      if ( v11 >= a3
                + std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) >> 2 >= a3 )
        {
          v8 = *(char **)(this + 8);
          *(_DWORD *)(this + 8) = std::vector<CGameScreenOverlay>::_Ucopy<std::vector<CGameScreenOverlay>::const_iterator>(
                                    (std::allocator<unsigned int> *)this,
                                    &v8[-4 * a3],
                                    (int)v8,
                                    v8);
          sub_44FAC0(a2, (int)&v8[-4 * a3], (int)v8);
          std::fill<HyperElement::CElement * *,HyperElement::CElement *>(
            (unsigned int *)a2,
            (unsigned int *)&a2[4 * a3],
            &_Val);
        }
        else
        {
          std::vector<CGameScreenOverlay>::_Ucopy<std::vector<CGameScreenOverlay>::const_iterator>(
            (std::allocator<unsigned int> *)this,
            a2,
            *(_DWORD *)(this + 8),
            &a2[4 * a3]);
          std::vector<char const *>::_Ufill(
            (std::vector<unsigned int> *)this,
            *(unsigned int **)(this + 8),
            a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 2),
            &_Val);
          *(_DWORD *)(this + 8) += 4 * a3;
          std::fill<HyperElement::CElement * *,HyperElement::CElement *>(
            (unsigned int *)a2,
            (unsigned int *)(*(_DWORD *)(this + 8) - 4 * a3),
            &_Val);
        }
      }
      else
      {
        if ( sub_41CB60((std::allocator<tagPARTICLES *> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < a3
                + std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this) )
          v12 = a3
              + std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this);
        v9 = sub_41CE40(v12);
        v5 = (unsigned int *)std::vector<CGameScreenOverlay>::_Ucopy<std::vector<CGameScreenOverlay>::const_iterator>(
                               (std::allocator<unsigned int> *)this,
                               *(void **)(this + 4),
                               (int)a2,
                               v9);
        v10 = std::vector<char const *>::_Ufill((std::vector<unsigned int> *)this, v5, a3, &_Val);
        std::vector<CGameScreenOverlay>::_Ucopy<std::vector<CGameScreenOverlay>::const_iterator>(
          (std::allocator<unsigned int> *)this,
          a2,
          *(_DWORD *)(this + 8),
          v10);
        _Count = a3
               + std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_44F720((std::allocator<int> *)this, *(int **)(this + 4), *(int **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 2);
        }
        *(_DWORD *)(this + 12) = &v9[v12];
        *(_DWORD *)(this + 8) = &v9[_Count];
        *(_DWORD *)(this + 4) = v9;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (0041CE40) --------------------------------------------------------
CMemory **__stdcall sub_41CE40(int a1)
{
  return sub_44FB00(a1);
}

//----- (0041CE60) --------------------------------------------------------
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> >::iterator *__thiscall std::vector<TriggerSystem::CTrigger *>::iterator::operator+=(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> >::iterator *this, int _Off)
{
  *(_DWORD *)this += 4 * _Off;
  return this;
}

//----- (0041CE80) --------------------------------------------------------
int __thiscall std::vector<IPAddrMask>::iterator::operator-(std::vector<CIOSocket::CIOTimer>::iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right)
{
  CIOSocket::CIOTimer *v3; // [esp+4h] [ebp-4h] BYREF

  v3 = this->_Myptr;
  return sub_41CEE0(&v3, _Right);
}

//----- (0041CEB0) --------------------------------------------------------
std::list<std::pair<std::string const ,int>>::const_iterator *__thiscall std::list<std::pair<std::string const,int>>::const_iterator::operator--(std::list<std::pair<std::string const ,int>>::const_iterator *this)
{
  *(_DWORD *)this = *(_DWORD *)sub_474590(*(_DWORD *)this);
  return this;
}

//----- (0041CEE0) --------------------------------------------------------
int __thiscall sub_41CEE0(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) >> 2;
}

//----- (0041CF00) --------------------------------------------------------
// Microsoft VisualC 2-14/net runtime
std::pair<int const ,IDirect3DTexture9 *> *__thiscall std::pair<int const,CSocketMsg *>::pair<int const,CSocketMsg *>(std::pair<int const ,IDirect3DTexture9 *> *this, const std::pair<int,IDirect3DTexture9 *> *_Right)
{
  *(_DWORD *)this = *(_DWORD *)_Right;
  *((_DWORD *)this + 1) = *((_DWORD *)_Right + 1);
  return this;
}

//----- (0041CF30) --------------------------------------------------------
char *__thiscall std::vector<CGameScreenOverlay>::_Ucopy<std::vector<CGameScreenOverlay>::const_iterator>(std::allocator<unsigned int> *this, void *Src, int a3, void *a4)
{
  return std::_Uninitialized_copy<Patch * *,Patch * *,std::allocator<Patch *>>(
           (unsigned int *)Src,
           (unsigned int *)a3,
           (unsigned int *)a4);
}

//----- (0041CF60) --------------------------------------------------------
unsigned int __cdecl sub_41CF60(unsigned int *a1, unsigned int a2, const unsigned int *a3)
{
  return std::fill_n<TriggerSystem::CTrigger * *,unsigned int,TriggerSystem::CTrigger *>(a1, a2, a3);
}

//----- (0041CF80) --------------------------------------------------------
void *__cdecl std::_Copy_backward_opt<CControl * *,CControl * *>(void *a1, int a2, int a3)
{
  return memcpy_0((void *)(a3 - 4 * ((a2 - (int)a1) >> 2)), a1, 4 * ((a2 - (int)a1) >> 2));
}

//----- (0041CFC0) --------------------------------------------------------
// Microsoft VisualC 2-14/net runtime
char *__cdecl std::_Uninit_copy<Patch *,Patch *>(void *a1, int a2, void *a3)
{
  return (char *)memcpy_0(a3, a1, 4 * ((a2 - (int)a1) >> 2)) + 4 * ((a2 - (int)a1) >> 2);
}

//----- (0041D000) --------------------------------------------------------
void *__thiscall sub_41D000(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0041D030) --------------------------------------------------------
void *__thiscall sub_41D030(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0041D060) --------------------------------------------------------
int __thiscall sub_41D060(void *this)
{
  return sub_41D080(this);
}

//----- (0041D080) --------------------------------------------------------
int __thiscall sub_41D080(void *this)
{
  return sub_41D0A0((int)this);
}

//----- (0041D0A0) --------------------------------------------------------
int __thiscall sub_41D0A0(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_41D150(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (0041D150) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D150(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_41C710(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041D1F0) --------------------------------------------------------
int __thiscall sub_41D1F0(void *this)
{
  return sub_41D210(this);
}

//----- (0041D210) --------------------------------------------------------
int __thiscall sub_41D210(void *this)
{
  return sub_41D230((int)this);
}

//----- (0041D230) --------------------------------------------------------
int __thiscall sub_41D230(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_41D2E0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (0041D2E0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D2E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_41C770(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041D380) --------------------------------------------------------
CInitItem *__thiscall CInitItem::CInitItem(CInitItem *this)
{
  CBase::CBase();
  this->__vftable = (CInitItem_vtbl *)&off_4B5978;
  sub_41FFC0(&this->m_mapSpec);
  memset(this->m_szName, 0, sizeof(this->m_szName));
  this->m_nIndex = 0;
  this->m_nClass = 0;
  this->m_nSubClass = 0;
  this->m_dwCode = 0;
  this->m_nLevel = 0;
  this->m_bWear = 0;
  this->m_bUse = 0;
  this->m_bPlural = 0;
  this->m_nClsLimit = -1;
  this->m_nLvLimit = 0;
  this->m_nRange = 0;
  this->m_nBuy = 0;
  this->m_nSell = 0;
  this->m_nEndurance = 0;
  this->m_nCycle = 0;
  this->m_nNumPerHour = 0;
  this->m_nTime = 0;
  this->m_nRestNum = 0;
  this->m_dwCoolTime = 0;
  this->m_nRace = 0;
  this->m_bPay = 0;
  this->m_nStBuff = -1;
  this->m_nStBuffValue = 0;
  this->m_nMaxProtect = 0;
  this->m_nEffect = 0;
  this->m_dwCountry = 0;
  this->m_bWarRelation = 0;
  return this;
}
// 4B5978: using guessed type int (__stdcall *off_4B5978)(int);

//----- (0041D500) --------------------------------------------------------
void *__thiscall CInitItem::`scalar deleting destructor'(CInitItem *this, char a2)
{
  CInitItem::~CInitItem(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041D530) --------------------------------------------------------
void __thiscall CInitItem::~CInitItem(CInitItem *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+8h] [ebp-Ch] BYREF
  char v5[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+10h] [ebp-4h] BYREF

  this->__vftable = (CInitItem_vtbl *)&off_4B5978;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapSpec, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    v2 = sub_420250(&v6);
    operator delete(*(void **)(v2 + 4));
    sub_446090((int *)&v6, v5, 0);
  }
  sub_41D5C0(&this->m_mapSpec);
  CBase::~CBase(this);
}
// 4B5978: using guessed type int (__stdcall *off_4B5978)(int);

//----- (0041D5C0) --------------------------------------------------------
int __thiscall sub_41D5C0(void *this)
{
  return sub_41FFF0(this);                      // std::map<enum Symbol,CSpec *,std::less<enum Symbol>,std::allocator<std::pair<enum Symbol const ,CSpec *> > >::~map<enum Symbol,CSpec *,std::less<enum Symbol>,std::allocator<std::pair<enum Symbol const ,CSpec *> > >
}

//----- (0041D5E0) --------------------------------------------------------
void __cdecl CInitItem::Open()
{
  __int64 r; // [esp+0h] [ebp-10h] BYREF
  int i; // [esp+8h] [ebp-8h]
  int nSize; // [esp+Ch] [ebp-4h]

  nSize = 46;
  for ( i = 0; i < nSize; ++i )
  {
    sub_420060(
      (int)dword_4E09F0,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)&r,
      8 * i + 5114368);
    if ( !BYTE4(r) )
      LOG_ERR("CInitItem::Open() Duplicate Key. (key:%d)", i);
  }
}

//----- (0041D640) --------------------------------------------------------
int __cdecl CInitItem::FindKey(const char *szKey)
{
  int v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  int it; // [esp+4h] [ebp-4h] BYREF

  sub_44C970((iless *)dword_4E09F0, &it, &szKey);
  v1 = sub_430C20(dword_4E09F0, (int)v3);
  if ( (unsigned __int8)unknown_libname_8(v1) )
    result = -1;
  else
    result = *(_DWORD *)(sub_420250(&it) + 4);
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041D690) --------------------------------------------------------
CBase *__thiscall CInitItem::Copy(CInitItem *this)
{
  CInitItem *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0xB8u);
  if ( v3 )
    v2 = CInitItem::CInitItem((CInitItem *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (0041D6D0) --------------------------------------------------------
int __thiscall CInitItem::Set(CInitItem *this, enum Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  int v4; // eax
  int result; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  const char *v8; // eax
  lisp::var *v9; // eax
  const char *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  const char *v20; // eax
  lisp::var *v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  lisp::var *v30; // eax
  lisp::var *v31; // eax
  lisp::var *v32; // eax
  lisp::var *v33; // eax
  lisp::var *v34; // eax
  lisp::var *v35; // eax
  lisp::var *v36; // eax
  lisp::var v37[2]; // [esp-4h] [ebp-9Ch] BYREF
  CInitItem *valuea; // [esp+4h] [ebp-94h]
  lisp::var v39; // [esp+Ch] [ebp-8Ch] BYREF
  lisp::var v40; // [esp+10h] [ebp-88h] BYREF
  lisp::var v41; // [esp+14h] [ebp-84h] BYREF
  lisp::var v42; // [esp+18h] [ebp-80h] BYREF
  lisp::var v43; // [esp+1Ch] [ebp-7Ch] BYREF
  lisp::var v44; // [esp+20h] [ebp-78h] BYREF
  lisp::var v45; // [esp+24h] [ebp-74h] BYREF
  lisp::var v46; // [esp+28h] [ebp-70h] BYREF
  lisp::var v47; // [esp+2Ch] [ebp-6Ch] BYREF
  lisp::var v48; // [esp+30h] [ebp-68h] BYREF
  lisp::var v49[2]; // [esp+34h] [ebp-64h] BYREF
  lisp::var v50; // [esp+3Ch] [ebp-5Ch] BYREF
  lisp::var v51; // [esp+40h] [ebp-58h] BYREF
  lisp::var v52; // [esp+44h] [ebp-54h] BYREF
  lisp::var v53; // [esp+48h] [ebp-50h] BYREF
  lisp::var v54; // [esp+4Ch] [ebp-4Ch] BYREF
  lisp::var v55; // [esp+50h] [ebp-48h] BYREF
  lisp::var v56; // [esp+54h] [ebp-44h] BYREF
  lisp::var v57; // [esp+58h] [ebp-40h] BYREF
  lisp::var v58; // [esp+5Ch] [ebp-3Ch] BYREF
  lisp::var v59; // [esp+60h] [ebp-38h] BYREF
  lisp::var v60; // [esp+64h] [ebp-34h] BYREF
  lisp::var v61; // [esp+68h] [ebp-30h] BYREF
  lisp::var v62; // [esp+6Ch] [ebp-2Ch] BYREF
  lisp::var v63; // [esp+70h] [ebp-28h] BYREF
  lisp::var v64; // [esp+74h] [ebp-24h] BYREF
  lisp::var v65; // [esp+78h] [ebp-20h] BYREF
  lisp::var v66; // [esp+7Ch] [ebp-1Ch] BYREF
  lisp::var v67; // [esp+80h] [ebp-18h] BYREF
  int g4; // [esp+84h] [ebp-14h]
  int g1; // [esp+88h] [ebp-10h]
  int g3; // [esp+8Ch] [ebp-Ch]
  int g2; // [esp+90h] [ebp-8h]
  char *szName; // [esp+94h] [ebp-4h]

  valuea = this;
  v37[1].m_pObject = (lisp::_object *)(symbol - 1);
  switch ( symbol )
  {
    case S_NAME:
      v3 = lisp::var::pop(&value, &v67);
      v4 = lisp::var::operator int(v3);
      szName = GetStr(v4);
      if ( szName && strlen(szName) && strlen(szName) <= 0x1E )
      {
        strcpy(valuea->m_szName, szName);
        goto LABEL_34;
      }
      LOG_ERR("CInitItem::Set() Invalid Name. (Name:%s)", szName);
      return 0;
    case S_INDEX:
      v6 = lisp::var::pop(&value, &v66);
      valuea->m_nIndex = lisp::var::operator int(v6);
      goto LABEL_34;
    case S_LEVEL:
      v15 = lisp::var::pop(&value, &v59);
      valuea->m_nLevel = lisp::var::operator int(v15);
      goto LABEL_34;
    case S_RACE:
      v29 = lisp::var::pop(&value, &v46);
      valuea->m_nRace = lisp::var::operator int(v29);
      goto LABEL_34;
    case S_RANGE:
      v22 = lisp::var::pop(&value, &v53);
      valuea->m_nRange = lisp::var::operator int(v22);
      goto LABEL_34;
    case S_CLASS:
      v7 = lisp::var::pop(&value, &v65);
      v8 = (const char *)lisp::var::operator char const *(v7);
      valuea->m_nClass = CInitItem::FindKey(v8);
      v9 = lisp::var::pop(&value, &v64);
      v10 = (const char *)lisp::var::operator char const *(v9);
      valuea->m_nSubClass = CInitItem::FindKey(v10);
      goto LABEL_34;
    case S_LIMIT:
      v19 = lisp::var::pop(&value, &v55);
      v20 = (const char *)lisp::var::operator char const *(v19);
      valuea->m_nClsLimit = CInitItem::FindKey(v20);
      v21 = lisp::var::pop(&value, &v54);
      valuea->m_nLvLimit = lisp::var::operator int(v21);
      goto LABEL_34;
    case S_BUY:
      v23 = lisp::var::pop(&value, &v52);
      valuea->m_nBuy = lisp::var::operator int(v23);
      goto LABEL_34;
    case S_ENDURANCE:
      v25 = lisp::var::pop(&value, &v50);
      valuea->m_nEndurance = lisp::var::operator int(v25);
      goto LABEL_34;
    case S_SPECIALTY:
      v37[0].m_pObject = (lisp::_object *)(symbol - 1);
      lisp::var::var(v37, &value);
      if ( CInitItem::SetSpec(valuea, v37[0]) )
        goto LABEL_34;
      result = 0;
      break;
    case S_IMAGE:
    case S_ACTION:
    case S_DESC:
    case S_COCOON:
    case S_IMAGEEX:
      goto LABEL_34;
    case S_WEAR:
      v16 = lisp::var::pop(&value, &v58);
      valuea->m_bWear = lisp::var::operator int(v16);
      goto LABEL_34;
    case S_USE:
      v17 = lisp::var::pop(&value, &v57);
      valuea->m_bUse = lisp::var::operator int(v17);
      goto LABEL_34;
    case S_PLURAL:
      v18 = lisp::var::pop(&value, &v56);
      valuea->m_bPlural = lisp::var::operator int(v18);
      goto LABEL_34;
    case S_SELL:
      v24 = lisp::var::pop(&value, &v51);
      valuea->m_nSell = lisp::var::operator int(v24);
      goto LABEL_34;
    case S_DROPRATE:
      v26 = lisp::var::pop(&value, v49);
      valuea->m_nCycle = lisp::var::operator int(v26);
      v27 = lisp::var::pop(&value, &v48);
      valuea->m_nNumPerHour = lisp::var::operator int(v27);
      valuea->m_nRestNum = valuea->m_nNumPerHour;
      goto LABEL_34;
    case S_COOLTIME:
      v28 = lisp::var::pop(&value, &v47);
      valuea->m_dwCoolTime = lisp::var::operator int(v28);
      goto LABEL_34;
    case S_WARRELATION:
      v36 = lisp::var::pop(&value, &v39);
      valuea->m_bWarRelation = lisp::var::operator int(v36);
      goto LABEL_34;
    case S_PAY:
      v30 = lisp::var::pop(&value, &v45);
      valuea->m_bPay = lisp::var::operator int(v30);
      goto LABEL_34;
    case S_CODE:
      v11 = lisp::var::pop(&value, &v63);
      g1 = lisp::var::operator int(v11);
      v12 = lisp::var::pop(&value, &v62);
      g2 = lisp::var::operator int(v12);
      v13 = lisp::var::pop(&value, &v61);
      g3 = lisp::var::operator int(v13);
      v14 = lisp::var::pop(&value, &v60);
      g4 = lisp::var::operator int(v14);
      valuea->m_dwCode = g4 | (g3 << 8) | (g2 << 16) | (g1 << 24);
      goto LABEL_34;
    case S_STBUFF:
      v31 = lisp::var::pop(&value, &v44);
      valuea->m_nStBuff = lisp::var::operator int(v31);
      v32 = lisp::var::pop(&value, &v43);
      valuea->m_nStBuffValue = lisp::var::operator int(v32);
      goto LABEL_34;
    case S_MAXPROTECT:
      v33 = lisp::var::pop(&value, &v42);
      valuea->m_nMaxProtect = lisp::var::operator int(v33);
      goto LABEL_34;
    case S_EFFECT:
      v34 = lisp::var::pop(&value, &v41);
      valuea->m_nEffect = lisp::var::operator int(v34);
      goto LABEL_34;
    case S_COUNTRY:
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        v35 = lisp::var::pop(&value, &v40);
        valuea->m_dwCountry |= 1 << lisp::var::operator int(v35);
      }
LABEL_34:
      result = 1;
      break;
    default:
      v37[0].m_pObject = (lisp::_object *)(symbol - 1);
      lisp::var::var(v37, &value);
      result = CBase::Set(valuea, symbol, v37[0]);
      break;
  }
  return result;
}

//----- (0041DCC0) --------------------------------------------------------
int __thiscall CInitItem::OnLoad(CInitItem *this)
{
  if ( this->m_nClass == 1 && this->m_nLevel >= 40 )
    this->m_nMaxProtect = 30;
  return CItem::InsertInitItem((int)this);
}

//----- (0041DD00) --------------------------------------------------------
int __thiscall CInitItem::SetSpec(CInitItem *this, lisp::var value)
{
  lisp::var *v2; // eax
  int result; // eax
  lisp::var *v4; // eax
  int v5; // eax
  lisp::var *v6; // eax
  int v7; // eax
  lisp::var *v8; // eax
  int v9; // eax
  lisp::var *v10; // eax
  int v11; // eax
  lisp::var *v12; // eax
  int v13; // eax
  lisp::var *v14; // eax
  int v15; // eax
  lisp::var *v16; // eax
  int v17; // eax
  lisp::var *v18; // eax
  int v19; // eax
  lisp::var *v20; // eax
  int v21; // eax
  lisp::var *v22; // eax
  int v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  int v30; // eax
  lisp::var *v31; // eax
  int v32; // eax
  lisp::var *v33; // eax
  int v34; // eax
  lisp::var *v35; // eax
  int v36; // eax
  lisp::var *v37; // eax
  int v38; // eax
  lisp::var *v39; // eax
  int v40; // eax
  lisp::var *v41; // eax
  int v42; // eax
  lisp::var *v43; // eax
  int v44; // eax
  lisp::var *v45; // eax
  char v46; // al
  lisp::var *v47; // eax
  lisp::var *v48; // eax
  lisp::var *v49; // eax
  const char *v50; // eax
  lisp::var *v51; // eax
  lisp::var *v52; // eax
  const char *v53; // eax
  int v54; // eax
  lisp::var *v55; // eax
  const char *v56; // eax
  lisp::var *v57; // eax
  lisp::var *v58; // eax
  lisp::var *v59; // eax
  lisp::var *v60; // eax
  lisp::var *v61; // eax
  lisp::var *v62; // eax
  lisp::var *v63; // eax
  lisp::var *v64; // eax
  int v65; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v66; // eax
  CSpecRevival *v67; // [esp+0h] [ebp-1F0h]
  CSpecProtect *v68; // [esp+4h] [ebp-1ECh]
  CSpecBuff *v69; // [esp+8h] [ebp-1E8h]
  CSpecChangePrefix *v70; // [esp+Ch] [ebp-1E4h]
  CSpecRepair *v71; // [esp+10h] [ebp-1E0h]
  CSpecCharming *v72; // [esp+14h] [ebp-1DCh]
  CSpecRefresh *v73; // [esp+18h] [ebp-1D8h]
  CSpecTeleport *v74; // [esp+1Ch] [ebp-1D4h]
  CSpecGState *v75; // [esp+20h] [ebp-1D0h]
  CSpecPrty *v76; // [esp+24h] [ebp-1CCh]
  CSpecPrty *v77; // [esp+28h] [ebp-1C8h]
  CSpecPrty *v78; // [esp+2Ch] [ebp-1C4h]
  CSpecPrty *v79; // [esp+30h] [ebp-1C0h]
  CSpecPrty *v80; // [esp+34h] [ebp-1BCh]
  CSpecPrty *v81; // [esp+38h] [ebp-1B8h]
  CSpecPrty *v82; // [esp+3Ch] [ebp-1B4h]
  CSpecPrty *v83; // [esp+40h] [ebp-1B0h]
  CSpecPrty *v84; // [esp+44h] [ebp-1ACh]
  CSpecPrty *v85; // [esp+48h] [ebp-1A8h]
  CSpecPrty *v86; // [esp+4Ch] [ebp-1A4h]
  CSpecPrty *v87; // [esp+50h] [ebp-1A0h]
  CSpecPrty *v88; // [esp+54h] [ebp-19Ch]
  CSpecPrty *v89; // [esp+58h] [ebp-198h]
  CSpecPrty *v90; // [esp+5Ch] [ebp-194h]
  CSpecPrty *v91; // [esp+60h] [ebp-190h]
  CSpecPrty *v92; // [esp+64h] [ebp-18Ch]
  CSpecPrty *v93; // [esp+68h] [ebp-188h]
  CSpecPrty *v94; // [esp+6Ch] [ebp-184h]
  CSpecPrty *v95; // [esp+70h] [ebp-180h]
  char v97[8]; // [esp+7Ch] [ebp-174h] BYREF
  lisp::var v98; // [esp+84h] [ebp-16Ch] BYREF
  CSpecRevival *v99; // [esp+88h] [ebp-168h]
  CMemory **v100; // [esp+8Ch] [ebp-164h]
  CSpecBuff *v101; // [esp+90h] [ebp-160h]
  lisp::var v102; // [esp+94h] [ebp-15Ch] BYREF
  lisp::var v103; // [esp+98h] [ebp-158h] BYREF
  lisp::var v104; // [esp+9Ch] [ebp-154h] BYREF
  CSpecChangePrefix *v105; // [esp+A0h] [ebp-150h]
  lisp::var v106; // [esp+A4h] [ebp-14Ch] BYREF
  lisp::var v107; // [esp+A8h] [ebp-148h] BYREF
  lisp::var v108; // [esp+ACh] [ebp-144h] BYREF
  lisp::var v109; // [esp+B0h] [ebp-140h] BYREF
  lisp::var v110; // [esp+B4h] [ebp-13Ch] BYREF
  CSpecRepair *v111; // [esp+B8h] [ebp-138h]
  lisp::var v112; // [esp+BCh] [ebp-134h] BYREF
  CSpecCharming *v113; // [esp+C0h] [ebp-130h]
  CSpecRefresh *v114; // [esp+C4h] [ebp-12Ch]
  lisp::var v115; // [esp+C8h] [ebp-128h] BYREF
  lisp::var v116; // [esp+CCh] [ebp-124h] BYREF
  CSpecTeleport *v117; // [esp+D0h] [ebp-120h]
  lisp::var v118; // [esp+D4h] [ebp-11Ch] BYREF
  lisp::var v119; // [esp+D8h] [ebp-118h] BYREF
  lisp::var v120; // [esp+DCh] [ebp-114h] BYREF
  CSpecGState *v121; // [esp+E0h] [ebp-110h]
  lisp::var v122; // [esp+E4h] [ebp-10Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v123; // [esp+E8h] [ebp-108h]
  lisp::var v124; // [esp+ECh] [ebp-104h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v125; // [esp+F0h] [ebp-100h]
  lisp::var v126; // [esp+F4h] [ebp-FCh] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v127; // [esp+F8h] [ebp-F8h]
  lisp::var v128; // [esp+FCh] [ebp-F4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v129; // [esp+100h] [ebp-F0h]
  lisp::var v130; // [esp+104h] [ebp-ECh] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v131; // [esp+108h] [ebp-E8h]
  lisp::var v132; // [esp+10Ch] [ebp-E4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v133; // [esp+110h] [ebp-E0h]
  lisp::var v134; // [esp+114h] [ebp-DCh] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v135; // [esp+118h] [ebp-D8h]
  lisp::var v136; // [esp+11Ch] [ebp-D4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v137; // [esp+120h] [ebp-D0h]
  CSpecPrty *v138; // [esp+124h] [ebp-CCh]
  lisp::var v139; // [esp+128h] [ebp-C8h] BYREF
  CSpecPrty *v140; // [esp+12Ch] [ebp-C4h]
  lisp::var v141; // [esp+130h] [ebp-C0h] BYREF
  lisp::var v142; // [esp+134h] [ebp-BCh] BYREF
  CSpecPrty *v143; // [esp+138h] [ebp-B8h]
  lisp::var v144; // [esp+13Ch] [ebp-B4h] BYREF
  lisp::var v145; // [esp+140h] [ebp-B0h] BYREF
  lisp::var v146; // [esp+144h] [ebp-ACh] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v147; // [esp+148h] [ebp-A8h]
  lisp::var v148; // [esp+14Ch] [ebp-A4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v149; // [esp+150h] [ebp-A0h]
  lisp::var v150; // [esp+154h] [ebp-9Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v151; // [esp+158h] [ebp-98h]
  lisp::var v152; // [esp+15Ch] [ebp-94h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v153; // [esp+160h] [ebp-90h]
  lisp::var v154; // [esp+164h] [ebp-8Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v155; // [esp+168h] [ebp-88h]
  lisp::var v156; // [esp+16Ch] [ebp-84h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v157; // [esp+170h] [ebp-80h]
  lisp::var v158; // [esp+174h] [ebp-7Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v159; // [esp+178h] [ebp-78h]
  lisp::var v160; // [esp+17Ch] [ebp-74h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v161; // [esp+180h] [ebp-70h]
  lisp::var v162; // [esp+184h] [ebp-6Ch] BYREF
  lisp::var v163; // [esp+188h] [ebp-68h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v164; // [esp+18Ch] [ebp-64h]
  lisp::var v165; // [esp+190h] [ebp-60h] BYREF
  int nBuffType; // [esp+194h] [ebp-5Ch]
  __int64 dwTime; // [esp+198h] [ebp-58h]
  int nICLimit; // [esp+1A0h] [ebp-50h]
  int nRate1; // [esp+1A4h] [ebp-4Ch]
  int nRate0; // [esp+1A8h] [ebp-48h]
  int nPrefix0; // [esp+1ACh] [ebp-44h]
  int nPrefix1; // [esp+1B0h] [ebp-40h]
  int a2; // [esp+1B4h] [ebp-3Ch]
  int a3; // [esp+1B8h] [ebp-38h]
  char *v175; // [esp+1BCh] [ebp-34h]
  int nValue2; // [esp+1C0h] [ebp-30h]
  int v177; // [esp+1C4h] [ebp-2Ch]
  int v178; // [esp+1C8h] [ebp-28h]
  int v179; // [esp+1CCh] [ebp-24h]
  int nValue1; // [esp+1D0h] [ebp-20h]
  int v181; // [esp+1D4h] [ebp-1Ch]
  char v182[8]; // [esp+1D8h] [ebp-18h] BYREF
  _DWORD *v183; // [esp+1E0h] [ebp-10h]
  char *szSymbol; // [esp+1E4h] [ebp-Ch]
  lisp::var v185; // [esp+1E8h] [ebp-8h] BYREF
  Symbol symbol; // [esp+1ECh] [ebp-4h]

  while ( 2 )
  {
    if ( (unsigned __int8)lisp::var::null(&value) )
      return 1;
    lisp::var::pop(&value, &v185);
    v2 = lisp::var::pop(&v185, &v165);
    szSymbol = (char *)lisp::var::operator char const *(v2);
    symbol = CObjectDB::FindSymbol(szSymbol);
    if ( symbol )
    {
      v183 = 0;
      switch ( symbol )
      {
        case S_STR:
          v164 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v164 )
          {
            v4 = lisp::var::pop(&v185, &v163);
            v5 = lisp::var::operator int(v4);
            v95 = CSpecPrty::CSpecPrty((CSpecPrty *)v164, 0, v5);
          }
          else
          {
            v95 = 0;
          }
          v183 = &v95->__vftable;
          goto LABEL_9;
        case S_HTH:
          v161 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v161 )
          {
            v8 = lisp::var::pop(&v185, &v160);
            v9 = lisp::var::operator int(v8);
            v94 = CSpecPrty::CSpecPrty((CSpecPrty *)v161, 1, v9);
          }
          else
          {
            v94 = 0;
          }
          v183 = &v94->__vftable;
          goto LABEL_9;
        case S_INT:
          v159 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v159 )
          {
            v10 = lisp::var::pop(&v185, &v158);
            v11 = lisp::var::operator int(v10);
            v93 = CSpecPrty::CSpecPrty((CSpecPrty *)v159, 2, v11);
          }
          else
          {
            v93 = 0;
          }
          v183 = &v93->__vftable;
          goto LABEL_9;
        case S_WIS:
          v157 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v157 )
          {
            v12 = lisp::var::pop(&v185, &v156);
            v13 = lisp::var::operator int(v12);
            v92 = CSpecPrty::CSpecPrty((CSpecPrty *)v157, 3, v13);
          }
          else
          {
            v92 = 0;
          }
          v183 = &v92->__vftable;
          goto LABEL_9;
        case S_DEX:
          v155 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v155 )
          {
            v14 = lisp::var::pop(&v185, &v154);
            v15 = lisp::var::operator int(v14);
            v91 = CSpecPrty::CSpecPrty((CSpecPrty *)v155, 4, v15);
          }
          else
          {
            v91 = 0;
          }
          v183 = &v91->__vftable;
          goto LABEL_9;
        case S_HP:
          v153 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v153 )
          {
            v16 = lisp::var::pop(&v185, &v152);
            v17 = lisp::var::operator int(v16);
            v90 = CSpecPrty::CSpecPrty((CSpecPrty *)v153, 5, v17);
          }
          else
          {
            v90 = 0;
          }
          v183 = &v90->__vftable;
          goto LABEL_9;
        case S_MP:
          v151 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v151 )
          {
            v18 = lisp::var::pop(&v185, &v150);
            v19 = lisp::var::operator int(v18);
            v89 = CSpecPrty::CSpecPrty((CSpecPrty *)v151, 6, v19);
          }
          else
          {
            v89 = 0;
          }
          v183 = &v89->__vftable;
          goto LABEL_9;
        case S_HIT:
          v149 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v149 )
          {
            v20 = lisp::var::pop(&v185, &v148);
            v21 = lisp::var::operator int(v20);
            v88 = CSpecPrty::CSpecPrty((CSpecPrty *)v149, 9, v21);
          }
          else
          {
            v88 = 0;
          }
          v183 = &v88->__vftable;
          goto LABEL_9;
        case S_DODGE:
          v147 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v147 )
          {
            v22 = lisp::var::pop(&v185, &v146);
            v23 = lisp::var::operator int(v22);
            v87 = CSpecPrty::CSpecPrty((CSpecPrty *)v147, 10, v23);
          }
          else
          {
            v87 = 0;
          }
          v183 = &v87->__vftable;
          goto LABEL_9;
        case S_ATTACK:
          v24 = lisp::var::pop(&v185, &v145);
          nValue1 = lisp::var::operator int(v24);
          v25 = lisp::var::pop(&v185, &v144);
          v181 = lisp::var::operator int(v25);
          v143 = (CSpecPrty *)operator new(0x14u);
          if ( v143 )
            v86 = CSpecPrty::CSpecPrty(v143, 27, nValue1, v181);
          else
            v86 = 0;
          v183 = &v86->__vftable;
          goto LABEL_9;
        case S_MAGIC:
          v26 = lisp::var::pop(&v185, &v142);
          v178 = lisp::var::operator int(v26);
          v27 = lisp::var::pop(&v185, &v141);
          v179 = lisp::var::operator int(v27);
          v140 = (CSpecPrty *)operator new(0x14u);
          if ( v140 )
            v85 = CSpecPrty::CSpecPrty(v140, 28, v178, v179);
          else
            v85 = 0;
          v183 = &v85->__vftable;
          goto LABEL_9;
        case S_DEFENSE:
          v28 = lisp::var::pop(&v185, &v139);
          v177 = lisp::var::operator int(v28);
          v138 = (CSpecPrty *)operator new(0x14u);
          if ( v138 )
            v84 = CSpecPrty::CSpecPrty(v138, 15, v177, v177);
          else
            v84 = 0;
          v183 = &v84->__vftable;
          goto LABEL_9;
        case S_ABSORB:
          v137 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v137 )
          {
            v29 = lisp::var::pop(&v185, &v136);
            v30 = lisp::var::operator int(v29);
            v83 = CSpecPrty::CSpecPrty((CSpecPrty *)v137, 16, v30);
          }
          else
          {
            v83 = 0;
          }
          v183 = &v83->__vftable;
          goto LABEL_9;
        case S_ASPEED:
          v125 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v125 )
          {
            v41 = lisp::var::pop(&v185, &v124);
            v42 = lisp::var::operator int(v41);
            v77 = CSpecPrty::CSpecPrty((CSpecPrty *)v125, 17, v42);
          }
          else
          {
            v77 = 0;
          }
          v183 = &v77->__vftable;
          goto LABEL_9;
        case S_MSPEED:
          v123 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v123 )
          {
            v43 = lisp::var::pop(&v185, &v122);
            v44 = lisp::var::operator int(v43);
            v76 = CSpecPrty::CSpecPrty((CSpecPrty *)v123, 32, v44);
          }
          else
          {
            v76 = 0;
          }
          v183 = &v76->__vftable;
          goto LABEL_9;
        case S_RESIST_FIRE:
          v135 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v135 )
          {
            v31 = lisp::var::pop(&v185, &v134);
            v32 = lisp::var::operator int(v31);
            v82 = CSpecPrty::CSpecPrty((CSpecPrty *)v135, 18, v32);
          }
          else
          {
            v82 = 0;
          }
          v183 = &v82->__vftable;
          goto LABEL_9;
        case S_RESIST_ICE:
          v133 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v133 )
          {
            v33 = lisp::var::pop(&v185, &v132);
            v34 = lisp::var::operator int(v33);
            v81 = CSpecPrty::CSpecPrty((CSpecPrty *)v133, 19, v34);
          }
          else
          {
            v81 = 0;
          }
          v183 = &v81->__vftable;
          goto LABEL_9;
        case S_RESIST_LITNING:
          v131 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v131 )
          {
            v35 = lisp::var::pop(&v185, &v130);
            v36 = lisp::var::operator int(v35);
            v80 = CSpecPrty::CSpecPrty((CSpecPrty *)v131, 20, v36);
          }
          else
          {
            v80 = 0;
          }
          v183 = &v80->__vftable;
          goto LABEL_9;
        case S_RESIST_CURSE:
          v129 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v129 )
          {
            v37 = lisp::var::pop(&v185, &v128);
            v38 = lisp::var::operator int(v37);
            v79 = CSpecPrty::CSpecPrty((CSpecPrty *)v129, 21, v38);
          }
          else
          {
            v79 = 0;
          }
          v183 = &v79->__vftable;
          goto LABEL_9;
        case S_RESIST_PALSY:
          v127 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
          if ( v127 )
          {
            v39 = lisp::var::pop(&v185, &v126);
            v40 = lisp::var::operator int(v39);
            v78 = CSpecPrty::CSpecPrty((CSpecPrty *)v127, 22, v40);
          }
          else
          {
            v78 = 0;
          }
          v183 = &v78->__vftable;
LABEL_9:
          if ( !(unsigned __int8)lisp::var::null(&v185) )
          {
            v6 = lisp::var::pop(&v185, &v162);
            v7 = lisp::var::operator int(v6);
            v183[3] = v7;
          }
          goto LABEL_125;
        case S_TELEPORT:
          v47 = lisp::var::pop(&v185, &v119);
          v175 = (char *)lisp::var::operator int(v47);
          v48 = lisp::var::pop(&v185, &v118);
          nValue2 = lisp::var::operator int(v48);
          v117 = (CSpecTeleport *)operator new(0xCu);
          if ( v117 )
            v74 = CSpecTeleport::CSpecTeleport(v117, (int)v175, nValue2);
          else
            v74 = 0;
          v183 = &v74->__vftable;
          goto LABEL_125;
        case S_REFRESH:
          v49 = lisp::var::pop(&v185, &v116);
          v50 = (const char *)lisp::var::operator char const *(v49);
          a2 = CInitItem::FindKey(v50);
          v51 = lisp::var::pop(&v185, &v115);
          a3 = lisp::var::operator int(v51);
          v114 = (CSpecRefresh *)operator new(0xCu);
          if ( v114 )
            v73 = CSpecRefresh::CSpecRefresh(v114, a2, a3);
          else
            v73 = 0;
          v183 = &v73->__vftable;
          goto LABEL_125;
        case S_CHARMING:
          v113 = (CSpecCharming *)operator new(0xCu);
          if ( v113 )
          {
            v52 = lisp::var::pop(&v185, &v112);
            v53 = (const char *)lisp::var::operator char const *(v52);
            v54 = CInitItem::FindKey(v53);
            v72 = CSpecCharming::CSpecCharming(v113, v54);
          }
          else
          {
            v72 = 0;
          }
          v183 = &v72->__vftable;
          goto LABEL_125;
        case S_REPAIR:
          v111 = (CSpecRepair *)operator new(0xCu);
          if ( v111 )
            v71 = CSpecRepair::CSpecRepair(v111, 0);
          else
            v71 = 0;
          v183 = &v71->__vftable;
          goto LABEL_125;
        case S_GSTATE:
          v121 = (CSpecGState *)operator new(0xCu);
          if ( v121 )
          {
            v45 = lisp::var::pop(&v185, &v120);
            v46 = lisp::var::operator int(v45);
            v75 = CSpecGState::CSpecGState(v121, 1 << v46);
          }
          else
          {
            v75 = 0;
          }
          v183 = &v75->__vftable;
          goto LABEL_125;
        case S_CHANGEPREFIX:
          v55 = lisp::var::pop(&v185, &v110);
          v56 = (const char *)lisp::var::operator char const *(v55);
          nICLimit = CInitItem::FindKey(v56);
          v57 = lisp::var::pop(&v185, &v109);
          nRate0 = lisp::var::operator int(v57);
          v58 = lisp::var::pop(&v185, &v108);
          nPrefix0 = lisp::var::operator int(v58);
          v59 = lisp::var::pop(&v185, &v107);
          nRate1 = lisp::var::operator int(v59);
          v60 = lisp::var::pop(&v185, &v106);
          nPrefix1 = lisp::var::operator int(v60);
          v105 = (CSpecChangePrefix *)operator new(0x1Cu);
          if ( v105 )
            v70 = CSpecChangePrefix::CSpecChangePrefix(v105, nICLimit, nRate0, nPrefix0, nRate1, nPrefix1);
          else
            v70 = 0;
          v183 = &v70->__vftable;
          goto LABEL_125;
        case S_BUFF:
          v61 = lisp::var::pop(&v185, &v104);
          nBuffType = lisp::var::operator int(v61);
          v62 = lisp::var::pop(&v185, &v103);
          LODWORD(dwTime) = lisp::var::operator int(v62);
          v63 = lisp::var::pop(&v185, &v102);
          HIDWORD(dwTime) = lisp::var::operator int(v63);
          v101 = (CSpecBuff *)operator new(0x14u);
          if ( v101 )
            v69 = CSpecBuff::CSpecBuff(v101, nBuffType, dwTime, SHIDWORD(dwTime));
          else
            v69 = 0;
          v183 = &v69->__vftable;
          goto LABEL_125;
        case S_PROTECT:
          v100 = operator new(0xCu);
          if ( v100 )
            v68 = CSpecProtect::CSpecProtect((CSpecProtect *)v100);
          else
            v68 = 0;
          v183 = &v68->__vftable;
          goto LABEL_125;
        case S_REVIVAL:
          v99 = (CSpecRevival *)operator new(0xCu);
          if ( v99 )
          {
            v64 = lisp::var::pop(&v185, &v98);
            v65 = lisp::var::operator int(v64);
            v67 = CSpecRevival::CSpecRevival(v99, v65);
          }
          else
          {
            v67 = 0;
          }
          v183 = &v67->__vftable;
LABEL_125:
          std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v97);
          sub_445DF0(
            (int)&this->m_mapSpec,
            (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v182,
            v66);
          if ( v182[4] )
            continue;
          LOG_ERR("CInitItem::Set() Duplicate Specialty. (Symbol:%d)", symbol);
          result = 0;
          break;
        default:
          LOG_ERR("CInitItem::SetSpec() Invalid Specialty. (symbol:%d)", symbol);
          return 0;
      }
    }
    else
    {
      LOG_ERR("CInitItem::SetSpec() Invalid symbol(%s)", szSymbol);
      result = 0;
    }
    return result;
  }
}
// 41E999: variable 'v66' is possibly undefined

//----- (0041EAA0) --------------------------------------------------------
CSpecPrty *__thiscall CSpecPrty::CSpecPrty(CSpecPrty *this, int nType, int nValue)
{
  CSpec::CSpec(this, nValue);                   // GUESS 100% -HighGamer
  this->__vftable = (CSpecPrty_vtbl *)off_4B5AA8;
  this->m_bPt = 1;
  this->m_nPrtyType = nType;
  return this;
}
// 4B5AA8: using guessed type int (__stdcall *off_4B5AA8[3])(int);

//----- (0041EAE0) --------------------------------------------------------
CInitItem *__thiscall CSpec::CSpec(CSpec *this, int nValue)
{
  this->__vftable = (CSpec_vtbl *)off_4B5AB8;
  this->m_nValue1 = nValue;
  this->m_nValue2 = 0;
  return (CInitItem *)this;
}
// 4B5AB8: using guessed type int (__stdcall *off_4B5AB8[3])(int);

//----- (0041EB20) --------------------------------------------------------
CSpecPrty *__thiscall CSpecPrty::CSpecPrty(CSpecPrty *this, int nType, int nValue1, int nValue2)
{
  CSpec::CSpec(this, nValue1, nValue2);
  this->__vftable = (CSpecPrty_vtbl *)off_4B5AA8;
  this->m_bPt = 1;
  this->m_nPrtyType = nType;
  return this;
}
// 4B5AA8: using guessed type int (__stdcall *off_4B5AA8[3])(int);

//----- (0041EB60) --------------------------------------------------------
int __thiscall CSpec::CSpec(CSpec *this, int nValue1, int nValue2)
{
  this->__vftable = (CSpec_vtbl *)off_4B5AB8;
  this->m_nValue1 = nValue1;
  this->m_nValue2 = nValue2;
  return (int)this;
}
// 4B5AB8: using guessed type int (__stdcall *off_4B5AB8[3])(int);

//----- (0041EB90) --------------------------------------------------------
CSpecGState *__thiscall CSpecGState::CSpecGState(CSpecGState *this, int nValue)
{
  CSpec::CSpec(this, nValue);
  this->__vftable = (CSpecGState_vtbl *)off_4B5AC8;
  return this;
}
// 4B5AC8: using guessed type int (__stdcall *off_4B5AC8[3])(int);

//----- (0041EBC0) --------------------------------------------------------
CSpecTeleport *__thiscall CSpecTeleport::CSpecTeleport(CSpecTeleport *this, int nValue1, int nValue2)
{
  CSpec::CSpec(this, nValue1, nValue2);
  this->__vftable = (CSpecTeleport_vtbl *)off_4B5AD8;
  return this;
}
// 4B5AD8: using guessed type int (__stdcall *off_4B5AD8[3])(int);

//----- (0041EBF0) --------------------------------------------------------
CSpecRefresh *__thiscall CSpecRefresh::CSpecRefresh(CSpecRefresh *this, int nValue1, int nValue2)
{
  CSpec::CSpec(this, nValue1, nValue2);
  this->__vftable = (CSpecRefresh_vtbl *)off_4B5AE8;
  return this;
}
// 4B5AE8: using guessed type int (__stdcall *off_4B5AE8[3])(int);

//----- (0041EC20) --------------------------------------------------------
CSpecCharming *__thiscall CSpecCharming::CSpecCharming(CSpecCharming *this, int nValue)
{
  CSpec::CSpec(this, nValue);
  this->__vftable = (CSpecCharming_vtbl *)off_4B5AF8;
  return this;
}
// 4B5AF8: using guessed type int (__stdcall *off_4B5AF8[3])(int);

//----- (0041EC50) --------------------------------------------------------
CSpecRepair *__thiscall CSpecRepair::CSpecRepair(CSpecRepair *this, int mValue)
{
  CSpec::CSpec(this, mValue);
  this->__vftable = (CSpecRepair_vtbl *)off_4B5B08;
  return this;
}
// 4B5B08: using guessed type int (__stdcall *off_4B5B08[3])(int);

//----- (0041EC80) --------------------------------------------------------
CSpecChangePrefix *__thiscall CSpecChangePrefix::CSpecChangePrefix(CSpecChangePrefix *this, int nICLimit, int nRate0, int nPrefix0, int nRate1, int nPrefix1)
{
  CSpec::CSpec(this, nICLimit);
  this->__vftable = (CSpecChangePrefix_vtbl *)off_4B5B18;
  this->m_nRate[0] = nRate0;
  this->m_nPrefix[0] = nPrefix0;
  this->m_nRate[1] = nRate1;
  this->m_nPrefix[1] = nPrefix1;
  return this;
}
// 4B5B18: using guessed type int (__stdcall *off_4B5B18[3])(int);

//----- (0041ECD0) --------------------------------------------------------
CSpecProtect *__thiscall CSpecProtect::CSpecProtect(CSpecProtect *this)
{
  CSpec::CSpec(this, 0);
  this->__vftable = (CSpecProtect_vtbl *)off_4B5B28;
  return this;
}
// 4B5B28: using guessed type int (__stdcall *off_4B5B28[3])(int);

//----- (0041ED00) --------------------------------------------------------
CSpecBuff *__thiscall CSpecBuff::CSpecBuff(CSpecBuff *this, int nBuffType, int dwTime, int nAmount)
{
  CSpec::CSpec(this, nBuffType);
  this->__vftable = (CSpecBuff_vtbl *)off_4B5B38;// TODO: Bugs not generating the second part of the struct putter  (dwTime is probably __int64, but who knows) -HighGamer
  *(_QWORD *)&this->m_dwTime = __PAIR64__(nAmount, dwTime);
  return this;
}
// 4B5B38: using guessed type int (__stdcall *off_4B5B38[3])(int);

//----- (0041ED40) --------------------------------------------------------
CSpecRevival *__thiscall CSpecRevival::CSpecRevival(CSpecRevival *this, int nValue)
{
  CSpec::CSpec(this, nValue);
  this->__vftable = (CSpecRevival_vtbl *)off_4B5B48;
  return this;
}
// 4B5B48: using guessed type int (__stdcall *off_4B5B48[3])(int);

//----- (0041ED70) --------------------------------------------------------
void __thiscall CInitItem::ApplySpec(CInitItem *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapSpec, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v2) )
      break;
    v3 = sub_420250(&v7);
    (***(void (__thiscall ****)(_DWORD, CPlayer *))(v3 + 4))(*(_DWORD *)(v3 + 4), pPlayer);
    sub_446090((int *)&v7, v6, 0);
  }
}

//----- (0041EDE0) --------------------------------------------------------
void __thiscall CInitItem::FreeSpec(CInitItem *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapSpec, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v2) )
      break;
    v3 = sub_420250(&v7);
    (*(void (__thiscall **)(_DWORD, CPlayer *))(**(_DWORD **)(v3 + 4) + 4))(*(_DWORD *)(v3 + 4), pPlayer);
    sub_446090((int *)&v7, v6, 0);
  }
}

//----- (0041EE50) --------------------------------------------------------
int __thiscall CInitItem::Use(CInitItem *this, CPlayer *pPlayer)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  char v7[4]; // [esp+Ch] [ebp-Ch] BYREF
  unsigned int v8; // [esp+10h] [ebp-8h]
  char v9[4]; // [esp+14h] [ebp-4h] BYREF

  if ( this->m_nLvLimit > pPlayer->m_nLevel )
    return 0;
  if ( !this->m_bWarRelation || sub_417450() )
  {
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
    v3 = sub_430C20(&this->m_mapSpec, (int)v7);
    if ( (unsigned __int8)unknown_libname_8(v3) )
    {
      result = 0;
    }
    else if ( this->m_dwCoolTime )
    {
      v8 = GetTickCount();
      if ( v8 < pPlayer->m_dwNextRefresh )
      {
        result = 0;
      }
      else
      {
        pPlayer->m_dwNextRefresh = this->m_dwCoolTime + v8;
        v4 = sub_420250(v9);                    // TODO: needs work -HighGamer
        result = (*(int (__thiscall **)(_DWORD, CPlayer *))(**(_DWORD **)(v4 + 4) + 8))(*(_DWORD *)(v4 + 4), pPlayer);
      }
    }
    else
    {
      v5 = sub_420250(v9);                      // TODO: needs work -HighGamer
      result = (*(int (__thiscall **)(_DWORD, CPlayer *))(**(_DWORD **)(v5 + 4) + 8))(*(_DWORD *)(v5 + 4), pPlayer);
    }
  }
  else
  {
    CPlayer::Write(pPlayer, S2C_MESSAGEV, "bw", 135, this->m_nIndex);
    result = 0;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041EF60) --------------------------------------------------------
int __thiscall CInitItem::Enchant(CInitItem *this, CPlayer *pPlayer, CItem *pItem)
{
  int v3; // eax
  int v5; // eax
  char v7[4]; // [esp+8h] [ebp-8h] BYREF
  int it; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  v3 = sub_430C20(&this->m_mapSpec, (int)v7);
  if ( (unsigned __int8)unknown_libname_8(v3) )
    return 0;
  v5 = sub_420250(&it);                         // TODO: needs some work -HighGamer
  return (*(int (__thiscall **)(_DWORD, CPlayer *, CItem *))(**(_DWORD **)(v5 + 4) + 12))(
           *(_DWORD *)(v5 + 4),
           pPlayer,
           pItem);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041EFD0) --------------------------------------------------------
int CInitItem::GetSpecValue(CInitItem *this, enum Symbol symbol, ...)
{
  int v2; // eax
  _DWORD *v3; // esi
  _DWORD *v4; // esi
  char v6[4]; // [esp+8h] [ebp-10h] BYREF
  int v7; // [esp+Ch] [ebp-Ch]
  va_list v8; // [esp+10h] [ebp-8h]
  char v9[4]; // [esp+14h] [ebp-4h] BYREF
  va_list va; // [esp+28h] [ebp+10h] BYREF

  va_start(va, symbol);
  va_copy(v8, va);
  v7 = 0;
  sub_44AE20(&this->m_mapSpec, v9, &symbol);
  v2 = sub_430C20(&this->m_mapSpec, (int)v6);
  if ( !(unsigned __int8)unknown_libname_8(v2) && (symbol == S_ATTACK || symbol == S_MAGIC) )
  {
    v8 += 4;
    v3 = (_DWORD *)*((_DWORD *)v8 - 1);
    *v3 = *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 4);
    v8 += 4;
    v4 = (_DWORD *)*((_DWORD *)v8 - 1);
    *v4 = *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 8);
    v7 = 1;
  }
  return v7;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041F0D0) --------------------------------------------------------
CPrefix *__thiscall CPrefix::CPrefix(CPrefix *this)
{
  CBase::CBase();
  this->__vftable = (CPrefix_vtbl *)&off_4B5B58;
  sub_41FFC0(&this->m_mapSpec);
  this->m_nPrefix = 0;
  this->m_nLevel = 0;
  this->m_nSellPer = 0;
  return this;
}
// 4B5B58: using guessed type int (__stdcall *off_4B5B58)(int);

//----- (0041F120) --------------------------------------------------------
CPrefix *__thiscall CPrefix::`scalar deleting destructor'(CPrefix *this, char a2)
{
  CPrefix::~CPrefix(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041F150) --------------------------------------------------------
void __thiscall CPrefix::~CPrefix(CPrefix *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+8h] [ebp-Ch] BYREF
  char v5[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  this->__vftable = (CPrefix_vtbl *)&off_4B5B58;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapSpec, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v1) )
      break;
    v2 = sub_420250(&it);
    operator delete(*(void **)(v2 + 4));
    sub_446090((int *)&it, v5, 0);
  }
  sub_41D5C0(&this->m_mapSpec);
  CBase::~CBase(this);
}
// 4B5B58: using guessed type int (__stdcall *off_4B5B58)(int);

//----- (0041F1E0) --------------------------------------------------------
CBase *__thiscall CPrefix::Copy(CPrefix *this)
{
  CPrefix *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x38u);
  if ( v3 )
    v2 = CPrefix::CPrefix((CPrefix *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (0041F220) --------------------------------------------------------
int __thiscall CPrefix::Set(CPrefix *this, enum Symbol symbol, struct lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  int v7; // eax
  lisp::var *v8; // eax
  int v9; // eax
  lisp::var *v10; // eax
  int v11; // eax
  lisp::var *v12; // eax
  int v13; // eax
  lisp::var *v14; // eax
  int v15; // eax
  lisp::var *v16; // eax
  int v17; // eax
  lisp::var *v18; // eax
  int v19; // eax
  lisp::var *v20; // eax
  int v21; // eax
  lisp::var *v22; // eax
  int v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  int v30; // eax
  lisp::var *v31; // eax
  int v32; // eax
  lisp::var *v33; // eax
  int v34; // eax
  lisp::var *v35; // eax
  int v36; // eax
  lisp::var *v37; // eax
  int v38; // eax
  lisp::var *v39; // eax
  int v40; // eax
  int result; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v42; // eax
  lisp::var v43; // [esp-4h] [ebp-124h] BYREF
  CSpecPrty *v44; // [esp+0h] [ebp-120h]
  CSpecPrty *v45; // [esp+4h] [ebp-11Ch]
  CSpecPrty *v46; // [esp+8h] [ebp-118h]
  CSpecPrty *v47; // [esp+Ch] [ebp-114h]
  CSpecPrty *v48; // [esp+10h] [ebp-110h]
  CSpecPrty *v49; // [esp+14h] [ebp-10Ch]
  CSpecPrty *v50; // [esp+18h] [ebp-108h]
  CSpecPrty *v51; // [esp+1Ch] [ebp-104h]
  CSpecPrty *v52; // [esp+20h] [ebp-100h]
  CSpecPrty *v53; // [esp+24h] [ebp-FCh]
  CSpecPrty *v54; // [esp+28h] [ebp-F8h]
  CSpecPrty *v55; // [esp+2Ch] [ebp-F4h]
  CSpecPrty *v56; // [esp+30h] [ebp-F0h]
  CSpecPrty *v57; // [esp+34h] [ebp-ECh]
  CSpecPrty *v58; // [esp+38h] [ebp-E8h]
  CSpecPrty *v59; // [esp+3Ch] [ebp-E4h]
  CSpecPrty *v60; // [esp+40h] [ebp-E0h]
  CSpecPrty *v61; // [esp+44h] [ebp-DCh]
  int v62; // [esp+48h] [ebp-D8h]
  CBase *v63; // [esp+4Ch] [ebp-D4h]
  char v64[12]; // [esp+50h] [ebp-D0h] BYREF
  lisp::var v65; // [esp+5Ch] [ebp-C4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v66; // [esp+60h] [ebp-C0h]
  lisp::var v67; // [esp+64h] [ebp-BCh] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v68; // [esp+68h] [ebp-B8h]
  lisp::var v69; // [esp+6Ch] [ebp-B4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v70; // [esp+70h] [ebp-B0h]
  lisp::var v71; // [esp+74h] [ebp-ACh] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v72; // [esp+78h] [ebp-A8h]
  lisp::var v73; // [esp+7Ch] [ebp-A4h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v74; // [esp+80h] [ebp-A0h]
  lisp::var v75; // [esp+84h] [ebp-9Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v76; // [esp+88h] [ebp-98h]
  CSpecPrty *v77; // [esp+8Ch] [ebp-94h]
  lisp::var v78; // [esp+90h] [ebp-90h] BYREF
  CSpecPrty *v79; // [esp+94h] [ebp-8Ch]
  lisp::var v80; // [esp+98h] [ebp-88h] BYREF
  lisp::var v81; // [esp+9Ch] [ebp-84h] BYREF
  CSpecPrty *v82; // [esp+A0h] [ebp-80h]
  lisp::var v83; // [esp+A4h] [ebp-7Ch] BYREF
  lisp::var v84; // [esp+A8h] [ebp-78h] BYREF
  lisp::var v85; // [esp+ACh] [ebp-74h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v86; // [esp+B0h] [ebp-70h]
  lisp::var v87; // [esp+B4h] [ebp-6Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v88; // [esp+B8h] [ebp-68h]
  lisp::var v89; // [esp+BCh] [ebp-64h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v90; // [esp+C0h] [ebp-60h]
  lisp::var v91; // [esp+C4h] [ebp-5Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v92; // [esp+C8h] [ebp-58h]
  lisp::var v93; // [esp+CCh] [ebp-54h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v94; // [esp+D0h] [ebp-50h]
  lisp::var v95; // [esp+D4h] [ebp-4Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v96; // [esp+D8h] [ebp-48h]
  lisp::var v97; // [esp+DCh] [ebp-44h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v98; // [esp+E0h] [ebp-40h]
  lisp::var v99; // [esp+E4h] [ebp-3Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v100; // [esp+E8h] [ebp-38h]
  lisp::var v101; // [esp+ECh] [ebp-34h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *v102; // [esp+F0h] [ebp-30h]
  lisp::var v103; // [esp+F4h] [ebp-2Ch] BYREF
  lisp::var v104; // [esp+F8h] [ebp-28h] BYREF
  lisp::var v105; // [esp+FCh] [ebp-24h] BYREF
  int v106; // [esp+100h] [ebp-20h]
  int v107; // [esp+104h] [ebp-1Ch]
  int v108; // [esp+108h] [ebp-18h]
  int nValue1; // [esp+10Ch] [ebp-14h]
  int nValue2; // [esp+110h] [ebp-10h]
  char v111[8]; // [esp+114h] [ebp-Ch] BYREF
  CSpecPrty *v112; // [esp+11Ch] [ebp-4h]

  v63 = this;
  v112 = 0;
  v62 = symbol - 2;
  switch ( symbol )
  {
    case S_INDEX:
      v3 = lisp::var::pop(&value, &v105);
      v63[1].__vftable = (CBase_vtbl *)lisp::var::operator int(v3);
      goto LABEL_78;
    case S_LEVEL:
      v4 = lisp::var::pop(&value, &v104);
      v63[1].m_nRef = lisp::var::operator int(v4);
      goto LABEL_78;
    case S_STR:
      v102 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v102 )
      {
        v6 = lisp::var::pop(&value, &v101);
        v7 = lisp::var::operator int(v6);
        v61 = CSpecPrty::CSpecPrty((CSpecPrty *)v102, 0, v7);
      }
      else
      {
        v61 = 0;
      }
      v112 = v61;
      goto LABEL_78;
    case S_HTH:
      v100 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v100 )
      {
        v8 = lisp::var::pop(&value, &v99);
        v9 = lisp::var::operator int(v8);
        v60 = CSpecPrty::CSpecPrty((CSpecPrty *)v100, 1, v9);
      }
      else
      {
        v60 = 0;
      }
      v112 = v60;
      goto LABEL_78;
    case S_INT:
      v98 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v98 )
      {
        v10 = lisp::var::pop(&value, &v97);
        v11 = lisp::var::operator int(v10);
        v59 = CSpecPrty::CSpecPrty((CSpecPrty *)v98, 2, v11);
      }
      else
      {
        v59 = 0;
      }
      v112 = v59;
      goto LABEL_78;
    case S_WIS:
      v96 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v96 )
      {
        v12 = lisp::var::pop(&value, &v95);
        v13 = lisp::var::operator int(v12);
        v58 = CSpecPrty::CSpecPrty((CSpecPrty *)v96, 3, v13);
      }
      else
      {
        v58 = 0;
      }
      v112 = v58;
      goto LABEL_78;
    case S_DEX:
      v94 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v94 )
      {
        v14 = lisp::var::pop(&value, &v93);
        v15 = lisp::var::operator int(v14);
        v57 = CSpecPrty::CSpecPrty((CSpecPrty *)v94, 4, v15);
      }
      else
      {
        v57 = 0;
      }
      v112 = v57;
      goto LABEL_78;
    case S_HP:
      v92 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v92 )
      {
        v16 = lisp::var::pop(&value, &v91);
        v17 = lisp::var::operator int(v16);
        v56 = CSpecPrty::CSpecPrty((CSpecPrty *)v92, 5, v17);
      }
      else
      {
        v56 = 0;
      }
      v112 = v56;
      goto LABEL_78;
    case S_MP:
      v90 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v90 )
      {
        v18 = lisp::var::pop(&value, &v89);
        v19 = lisp::var::operator int(v18);
        v55 = CSpecPrty::CSpecPrty((CSpecPrty *)v90, 6, v19);
      }
      else
      {
        v55 = 0;
      }
      v112 = v55;
      goto LABEL_78;
    case S_HIT:
      v88 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v88 )
      {
        v20 = lisp::var::pop(&value, &v87);
        v21 = lisp::var::operator int(v20);
        v54 = CSpecPrty::CSpecPrty((CSpecPrty *)v88, 9, v21);
      }
      else
      {
        v54 = 0;
      }
      v112 = v54;
      goto LABEL_78;
    case S_DODGE:
      v86 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v86 )
      {
        v22 = lisp::var::pop(&value, &v85);
        v23 = lisp::var::operator int(v22);
        v53 = CSpecPrty::CSpecPrty((CSpecPrty *)v86, 10, v23);
      }
      else
      {
        v53 = 0;
      }
      v112 = v53;
      goto LABEL_78;
    case S_ATTACK:
      v24 = lisp::var::pop(&value, &v84);
      nValue1 = lisp::var::operator int(v24);
      v25 = lisp::var::pop(&value, &v83);
      nValue2 = lisp::var::operator int(v25);
      v82 = (CSpecPrty *)operator new(0x14u);
      if ( v82 )
        v52 = CSpecPrty::CSpecPrty(v82, 27, nValue1, nValue2);
      else
        v52 = 0;
      v112 = v52;
      goto LABEL_78;
    case S_MAGIC:
      v26 = lisp::var::pop(&value, &v81);
      v107 = lisp::var::operator int(v26);
      v27 = lisp::var::pop(&value, &v80);
      v108 = lisp::var::operator int(v27);
      v79 = (CSpecPrty *)operator new(0x14u);
      if ( v79 )
        v51 = CSpecPrty::CSpecPrty(v79, 28, v107, v108);
      else
        v51 = 0;
      v112 = v51;
      goto LABEL_78;
    case S_DEFENSE:
      v28 = lisp::var::pop(&value, &v78);
      v106 = lisp::var::operator int(v28);
      v77 = (CSpecPrty *)operator new(0x14u);
      if ( v77 )
        v50 = CSpecPrty::CSpecPrty(v77, 15, v106, v106);
      else
        v50 = 0;
      v112 = v50;
      goto LABEL_78;
    case S_ABSORB:
      v76 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v76 )
      {
        v29 = lisp::var::pop(&value, &v75);
        v30 = lisp::var::operator int(v29);
        v49 = CSpecPrty::CSpecPrty((CSpecPrty *)v76, 16, v30);
      }
      else
      {
        v49 = 0;
      }
      v112 = v49;
      goto LABEL_78;
    case S_RESIST_FIRE:
      v74 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v74 )
      {
        v31 = lisp::var::pop(&value, &v73);
        v32 = lisp::var::operator int(v31);
        v48 = CSpecPrty::CSpecPrty((CSpecPrty *)v74, 18, v32);
      }
      else
      {
        v48 = 0;
      }
      v112 = v48;
      goto LABEL_78;
    case S_RESIST_ICE:
      v72 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v72 )
      {
        v33 = lisp::var::pop(&value, &v71);
        v34 = lisp::var::operator int(v33);
        v47 = CSpecPrty::CSpecPrty((CSpecPrty *)v72, 19, v34);
      }
      else
      {
        v47 = 0;
      }
      v112 = v47;
      goto LABEL_78;
    case S_RESIST_LITNING:
      v70 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v70 )
      {
        v35 = lisp::var::pop(&value, &v69);
        v36 = lisp::var::operator int(v35);
        v46 = CSpecPrty::CSpecPrty((CSpecPrty *)v70, 20, v36);
      }
      else
      {
        v46 = 0;
      }
      v112 = v46;
      goto LABEL_78;
    case S_RESIST_CURSE:
      v68 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v68 )
      {
        v37 = lisp::var::pop(&value, &v67);
        v38 = lisp::var::operator int(v37);
        v45 = CSpecPrty::CSpecPrty((CSpecPrty *)v68, 21, v38);
      }
      else
      {
        v45 = 0;
      }
      v112 = v45;
      goto LABEL_78;
    case S_RESIST_PALSY:
      v66 = (std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> > *)operator new(0x14u);
      if ( v66 )
      {
        v39 = lisp::var::pop(&value, &v65);
        v40 = lisp::var::operator int(v39);
        v44 = CSpecPrty::CSpecPrty((CSpecPrty *)v66, 22, v40);
      }
      else
      {
        v44 = 0;
      }
      v112 = v44;
      goto LABEL_78;
    case S_SELL:
      v5 = lisp::var::pop(&value, &v103);
      v63[1].m_nTimerRef = lisp::var::operator int(v5);
LABEL_78:
      if ( v112 )
      {
        std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v64);
        sub_445DF0(
          (int)&v63[1].m_nGeneralRef,
          (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v111,
          v42);
        if ( v111[4] )
        {
          result = 1;
        }
        else
        {
          LOG_ERR("CPrefix::Set() Duplicate Specialty. (Symbol:%d)", symbol);
          result = 0;
        }
      }
      else
      {
        result = 1;
      }
      break;
    default:
      v43.m_pObject = (lisp::_object *)(symbol - 2);
      lisp::var::var(&v43, &value);
      result = CBase::Set(v63, symbol, v43);
      break;
  }
  return result;
}
// 41F976: variable 'v42' is possibly undefined

//----- (0041FA40) --------------------------------------------------------
int __thiscall CPrefix::OnLoad(CPrefix *this)
{
  return CItem::InsertPrefix((int)this);
}

//----- (0041FA60) --------------------------------------------------------
void __thiscall CPrefix::ApplySpec(CPrefix *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapSpec, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v2) )
      break;
    v3 = sub_420250(&v7);                       // TODO: Work on this function a little later when more functions discovered -HighGamer
    (***(void (__thiscall ****)(_DWORD, CPlayer *))(v3 + 4))(*(_DWORD *)(v3 + 4), pPlayer);
    sub_446090((int *)&v7, v6, 0);
  }
}

//----- (0041FAD0) --------------------------------------------------------
void __thiscall CPrefix::FreeSpec(CPrefix *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapSpec,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapSpec, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    v3 = sub_420250(&it);                       // TODO: Work on this function a little later when more functions discovered -HighGamer
    (*(void (__thiscall **)(_DWORD, CPlayer *))(**(_DWORD **)(v3 + 4) + 4))(*(_DWORD *)(v3 + 4), pPlayer);
    sub_446090((int *)&it, v6, 0);
  }
}

//----- (0041FB40) --------------------------------------------------------
void __thiscall CSpecPrty::ApplySpec(CSpecPrty *this, CPlayer *pPlayer)
{
  if ( this->m_bPt )
    pPlayer->UpdatePrtyPt(pPlayer, this->m_nPrtyType, 1, this->m_nValue1, this->m_nValue2);
  else
    pPlayer->UpdatePrtyPer(pPlayer, this->m_nPrtyType, 1, this->m_nValue1, this->m_nValue2);
}

//----- (0041FBB0) --------------------------------------------------------
void __thiscall CSpecPrty::FreeSpec(CSpecPrty *this, CPlayer *pPlayer)
{
  if ( this->m_bPt )
    pPlayer->UpdatePrtyPt(pPlayer, this->m_nPrtyType, 0, this->m_nValue1, this->m_nValue2);
  else
    pPlayer->UpdatePrtyPer(pPlayer, this->m_nPrtyType, 0, this->m_nValue1, this->m_nValue2);
}

//----- (0041FC20) --------------------------------------------------------
void __thiscall CSpecGState::ApplySpec(CSpecGState *this, CPlayer *pPlayer)
{
  CChar::AddGState(pPlayer, this->m_nValue1);
}

//----- (0041FC40) --------------------------------------------------------
void __thiscall CSpecGState::FreeSpec(CSpecGState *this, CPlayer *pPlayer)
{
  CChar::SubGState(pPlayer, this->m_nValue1);
}

//----- (0041FC60) --------------------------------------------------------
int __thiscall CSpecTeleport::Use(CSpecTeleport *this, CPlayer *pPlayer)
{
  CIOCriticalSection *v4; // [esp+4h] [ebp-18h]
  tagPOINT ptP; // [esp+Ch] [ebp-10h] BYREF
  tagPOINT *ptPLoc; // [esp+14h] [ebp-8h]
  int nMap; // [esp+18h] [ebp-4h]

  if ( !CChar::IsNormal(pPlayer) || CChar::IsGState(pPlayer, 256) )
    return 0;
  if ( !this->m_nValue1 )
  {
    if ( pPlayer->m_nParty )
    {
      v4 = (CIOCriticalSection *)sub_44D4E0(pPlayer->m_nParty);
      if ( v4 )
      {
        if ( CParty::ExistOnPK((CParty *)v4) )
        {
          CPlayer::Write(pPlayer, S2C_MESSAGEV, "b", 114);
          return 0;
        }
        if ( CParty::Teleport(v4, (int)pPlayer, this->m_nValue2) )
        {
          CIOObject::Release((CIOObject *)v4);
          return 1;
        }
        CIOObject::Release((CIOObject *)v4);
      }
    }
  }
  nMap = dword_4D7900[4 * this->m_nValue2];
  ptPLoc = (tagPOINT *)&byte_4D7904[16 * this->m_nValue2];// Make this struct of Array tagPOINT? -HighGamer
  ptP.x = Random(ptPLoc->x - 64, ptPLoc->x + 64);
  ptP.y = Random(ptPLoc->y - 64, ptPLoc->y + 64);
  CPlayer::Teleport(pPlayer, nMap, &ptP, 0, 0);
  return 1;
}
// 4D7900: using guessed type int dword_4D7900[];

//----- (0041FDA0) --------------------------------------------------------
int __thiscall CParty::ExistOnPK(CParty *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  CPlayer *pOnPKPlayer; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  CIOCriticalSection::Enter(&this->m_lock.m_critical_section);
  sub_430C20(&this->m_vecParty, (int)&it);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecParty, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v1) )
      break;
    pOnPKPlayer = *(CPlayer **)sub_420010(&it);
    if ( CChar::IsGState(pOnPKPlayer, 256) )
    {
      CIOCriticalSection::Leave((int)&this->m_lock);
      return 1;
    }
    sub_420030((int *)&it, v5, 0);
  }
  CIOCriticalSection::Leave((int)&this->m_lock);
  return 0;
}

//----- (0041FE40) --------------------------------------------------------
int __thiscall CSpecRefresh::Use(CSpecRefresh *this, CPlayer *pPlayer)
{
  if ( !CChar::IsNormal(pPlayer) )
    return 0;
  pPlayer->UpdateProperty(pPlayer, this->m_nValue1, 1, this->m_nValue2);
  return 1;
}

//----- (0041FE90) --------------------------------------------------------
int __thiscall CSpecCharming::Enchant(CSpecCharming *this, CPlayer *pPlayer, CItem *pItem)
{
  return pItem->Charming(pItem, pPlayer, this->m_nValue1);
}

//----- (0041FEC0) --------------------------------------------------------
int __thiscall CSpecRepair::Enchant(CSpecRepair *this, CPlayer *pPlayer, CItem *pItem)
{
  return pItem->Repair(pItem, pPlayer);
}

//----- (0041FEE0) --------------------------------------------------------
int __thiscall CSpecChangePrefix::Enchant(CSpecChangePrefix *this, CPlayer *pPlayer, CItem *pItem)
{
  return pItem->ChangePrefix(pItem, pPlayer, this->m_nValue1, this->m_nRate, this->m_nPrefix);
}

//----- (0041FF20) --------------------------------------------------------
int __thiscall CSpecProtect::Enchant(CSpecProtect *this, CPlayer *pPlayer, CItem *pItem)
{
  return pItem->Protect(pItem, pPlayer);
}

//----- (0041FF40) --------------------------------------------------------
int __thiscall CSpecBuff::Use(CSpecBuff *this, CPlayer *pPlayer)
{
  CBuff *pBuff; // [esp+4h] [ebp-4h]

  if ( !CChar::IsNormal(pPlayer) )
    return 0;
  pBuff = CBuff::CreateBuff(this->m_nValue1, this->m_dwTime, this->m_nAmount);
  return pPlayer->AddBuff(pPlayer, pBuff);
}

//----- (0041FFA0) --------------------------------------------------------
int __thiscall CSpecRevival::Use(CSpecRevival *this, CPlayer *a2)
{
  return CPlayer::RevivalItem(a2, this->m_nValue1);
}

//----- (0041FFC0) --------------------------------------------------------
void *__thiscall sub_41FFC0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0041FFF0) --------------------------------------------------------
int __thiscall sub_41FFF0(void *this)
{
  return sub_4206B0((int)this);
}

//----- (00420010) --------------------------------------------------------
int __thiscall sub_420010(void *this)
{
  return unknown_libname_7(this);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00420030) --------------------------------------------------------
_DWORD *__thiscall sub_420030(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_420760(this);
  *a2 = v4;
  return a2;
}

//----- (00420060) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_420060(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3)
{
  const char **v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  const char **v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  const char *v10; // [esp-4h] [ebp-3Ch]
  const char *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = *(const char **)sub_473500((int)v21);
    v3 = (const char **)sub_474590(a3);
    v23 = mbstricmp::operator()((iless *)this, *v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270(this, (int)v17, 1, v22, (const std::pair<int const ,CGame_Character::TargetInfo> *)a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(v20);
  }
  v11 = *(const char **)sub_474590(a3);
  v7 = unknown_libname_7(v20);
  v8 = (const char **)sub_473500(v7);
  if ( mbstricmp::operator()((iless *)this, *v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270(this, (int)v15, v23, v22, (const std::pair<int const ,CGame_Character::TargetInfo> *)a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00420220) --------------------------------------------------------
bool __thiscall mbstricmp::operator()(iless *this, const char *a, const char *b)
{
  return mbstricmp(a, b) < 0;
}

//----- (00420250) --------------------------------------------------------
int __thiscall sub_420250(void *this)
{
  return sub_44F8B0(this);
}

//----- (00420270) --------------------------------------------------------
int __thiscall sub_420270(int this, int a2, char a3, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *a4, const std::pair<int const ,CGame_Character::TargetInfo> *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  CMemory **v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Parg; // [esp+60h] [ebp+10h]

  if ( sub_47EA90(this) - 1 <= *(_DWORD *)(this + 8) )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = std::_Tree<std::_Tmap_traits<int,int,std::less<int>,std::allocator<std::pair<int const,int>>,0>>::_Buynode(
          (std::_Tree<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> > *)this,
          *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)(this + 4),
          a4,
          *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)(this + 4),
          a5,
          0);
  ++*(_DWORD *)(this + 8);
  if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)(this + 4) )
  {
    v6 = (CMemory ***)sub_478AB0((int *)this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790((_DWORD *)this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40((int *)this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)sub_474590((int)a4);
    *v9 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_418790((_DWORD *)this) )
    {
      v10 = (CMemory ***)sub_418790((_DWORD *)this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90((int)a4);
    *v11 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_47EB40((int *)this) )
    {
      v12 = (CMemory ***)sub_47EB40((int *)this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_446F90(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_446F90((int)_Parg) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(CMemory ***)sub_446FF0((int)v43);
        sub_44CBF0((void *)this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_446F90(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_446F90(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_44CAC0((void *)this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_474590(*v31);
      if ( *(_BYTE *)sub_446F90((int)_Parg) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (CMemory ***)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(CMemory ***)sub_446FF0((int)v43);
          sub_44CAC0((void *)this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_446F90(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_446F90(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_44CBF0((void *)this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_446F90(*v19) = 1;
        *(_BYTE *)sub_446F90((int)_Parg) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_446F90(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0((int *)this);
  *(_BYTE *)sub_446F90(*v39) = 1;
  sub_446700((void *)a2, (int)v44);
  return a2;
}
// 4202A8: variable 'v5' is possibly undefined

//----- (004206B0) --------------------------------------------------------
int __thiscall sub_4206B0(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_420780(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (00420760) --------------------------------------------------------
_DWORD *__thiscall sub_420760(_DWORD *this)
{
  *this += 4;
  return this;
}

//----- (00420780) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420780(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_420820(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00420820) --------------------------------------------------------
_DWORD *__thiscall sub_420820(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_420880(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00420880) --------------------------------------------------------
int __stdcall sub_420880(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_420880(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (00420900) --------------------------------------------------------
CMemory **__cdecl sub_420900(int a1)
{
  return operator new(24 * a1);
}

//----- (00420920) --------------------------------------------------------
void *__thiscall sub_420920(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00420950) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall std::_Tree_ptr<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tree_ptr<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, char a3)
{
  std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *v4; // [esp-4h] [ebp-Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *v5; // [esp+0h] [ebp-8h]

  v5 = this;
  v4 = this;
  std::_Init_locks::operator=(&v4, (int)&a3);
  std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Tidy(
    v5,
    a2,
    (char)v4);
  std::_Init_locks::operator=(
    (char *)&v5->std::_Tree_val<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> >
  + 2,
    (int)&a3);
  return v5;
}

//----- (00420990) --------------------------------------------------------
void __thiscall std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>(CAtlTraceSettings *this)
{
  _DWORD *v1; // [esp+Ch] [ebp+8h]
  _DWORD *v2; // [esp+10h] [ebp+Ch]

  *(_DWORD *)this = *v1;
  *((_DWORD *)this + 1) = *v2;
}
// 420990: inconsistent function type and number of purged bytes

//----- (004209C0) --------------------------------------------------------
int __thiscall sub_4209C0(void *this)
{
  return sub_4209E0(this);
}

//----- (004209E0) --------------------------------------------------------
int __thiscall sub_4209E0(void *this)
{
  return sub_420A00((int)this);
}

//----- (00420A00) --------------------------------------------------------
int __thiscall sub_420A00(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_420AB0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (00420AB0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420AB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_420B50(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00420B50) --------------------------------------------------------
_DWORD *__thiscall sub_420B50(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_420BB0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00420BB0) --------------------------------------------------------
int __stdcall sub_420BB0(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_420BB0(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (00420C30) --------------------------------------------------------
CInitMap *__thiscall CInitMap::CInitMap(CInitMap *this)
{
  CBase::CBase();
  this->__vftable = (CInitMap_vtbl *)&off_4B5D58;
  this->m_nIndex = 0;
  this->m_nKind = 0;
  this->m_nX = -1;
  this->m_nY = -1;
  memset(this->m_szPath, 0, sizeof(this->m_szPath));
  return this;
}
// 4B5D58: using guessed type int (__stdcall *off_4B5D58)(int);

//----- (00420C90) --------------------------------------------------------
CInitMap *__thiscall CInitMap::`scalar deleting destructor'(CInitMap *this, char a2)
{
  CInitMap::~CInitMap(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00420CC0) --------------------------------------------------------
void __thiscall CInitMap::~CInitMap(CInitMap *this)
{
  this->__vftable = (CInitMap_vtbl *)&off_4B5D58;
  CBase::~CBase(this);
}
// 4B5D58: using guessed type int (__stdcall *off_4B5D58)(int);

//----- (00420CE0) --------------------------------------------------------
int __thiscall CInitMap::Set(CInitMap *this, enum Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  const char *v7; // eax
  int v8; // eax
  int v9; // [esp-8h] [ebp-24h]
  lisp::var v10; // [esp-4h] [ebp-20h] BYREF
  int v11; // [esp+0h] [ebp-1Ch]
  CInitMap *v12; // [esp+4h] [ebp-18h]
  lisp::var v13; // [esp+Ch] [ebp-10h] BYREF
  lisp::var v14; // [esp+10h] [ebp-Ch] BYREF
  lisp::var v15; // [esp+14h] [ebp-8h] BYREF
  lisp::var result; // [esp+18h] [ebp-4h] BYREF

  v12 = this;
  v11 = symbol - 2;
  switch ( symbol )
  {
    case S_INDEX:
      v3 = lisp::var::pop(&value, &result);
      v12->m_nIndex = lisp::var::operator int(v3);
      goto LABEL_6;
    case S_KIND:
      v4 = lisp::var::pop(&value, &v15);
      v12->m_nKind = lisp::var::operator int(v4);
      goto LABEL_6;
    case S_XY:
      v5 = lisp::var::pop(&value, &v14);
      v12->m_nX = lisp::var::operator int(v5);
      v6 = lisp::var::pop(&value, &v13);
      v12->m_nY = lisp::var::operator int(v6);
      v10.m_pObject = (lisp::_object *)v12->m_nY;
      v9 = v12->m_nX;
      v7 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E1194);
      sprintf(v12->m_szPath, "%s\\n_%03d_%03d.ksm", v7, v9, v10.m_pObject);
      goto LABEL_6;
    case S_FILENAME:
LABEL_6:
      v8 = 1;
      break;
    default:
      v10.m_pObject = (lisp::_object *)(symbol - 2);
      lisp::var::var(&v10, &value);
      v8 = CBase::Set(v12, symbol, v10);
      break;
  }
  return v8;
}

//----- (00420E10) --------------------------------------------------------
int __thiscall CInitMap::OnLoad(CInitMap *this)
{
  return CSMap::LoadSMap(this);
}

//----- (00420E30) --------------------------------------------------------
DWORD __cdecl SnapCurrentProcessMiniDump(LPCONTEXT lpContext)
{
  DWORD v1; // eax
  DWORD v2; // edx
  DWORD v3; // ecx
  DWORD v4; // ebx
  DWORD v5; // edi
  DWORD v6; // esi
  HANDLE v7; // eax
  DWORD v10; // [esp+BCh] [ebp-230h]
  DWORD v11; // [esp+C0h] [ebp-22Ch]
  DWORD v12; // [esp+C4h] [ebp-228h]
  DWORD var0; // [esp+2ECh] [ebp+0h]
  DWORD retaddr; // [esp+2F0h] [ebp+4h]
                                                // This function is naked, not __cdecl -HighGamer
                                                // 
                                                // DWORD __declspec ( naked )  SnapCurrentProcessMiniDump(LPCONTEXT lpContext)
  v12 = v1;
  v11 = v3;
  v10 = v2;
  memset(lpContext, 0, sizeof(CONTEXT));
  lpContext->ContextFlags = 65599;
  v7 = GetCurrentThread();
  if ( !GetThreadContext(v7, lpContext) )
    return 0;
  lpContext->Eax = v12;
  lpContext->Ebx = v4;
  lpContext->Ecx = v11;
  lpContext->Edx = v10;
  lpContext->Edi = v5;
  lpContext->Esi = v6;
  lpContext->SegGs = (unsigned __int16)__GS__;
  lpContext->SegFs = (unsigned __int16)__FS__;
  lpContext->SegEs = (unsigned __int16)__ES__;
  lpContext->SegDs = (unsigned __int16)__DS__;
  lpContext->SegCs = (unsigned __int16)__CS__;
  lpContext->SegSs = (unsigned __int16)__SS__;
  lpContext->Ebp = var0;
  lpContext->Eip = retaddr;
  return 1;
}
// 420E39: variable 'v1' is possibly undefined
// 420E45: variable 'v3' is possibly undefined
// 420E4B: variable 'v2' is possibly undefined
// 420EFB: variable 'v4' is possibly undefined
// 420F28: variable 'v5' is possibly undefined
// 420F37: variable 'v6' is possibly undefined
// 420FA0: variable 'var0' is possibly undefined

//----- (00420FF0) --------------------------------------------------------
void __thiscall CIOException::CInit::CInit(CIOException::CInit *this)
{
  char *v1; // eax
  char *lpString1; // [esp+4h] [ebp-4h]

  InitializeCriticalSection(&CriticalSection);
  GetModuleFileNameA(0, ExistingFileName, 0x104u);
  v1 = GetFilePart(ExistingFileName);
  lstrcpyA(v1, "Exception.txt");
  GetModuleFileNameA(0, byte_4E0B80, 0x104u);
  lpString1 = GetFilePart(byte_4E0B80);
  lstrcpyA(lpString1, "Exception.dmp");
  dword_4E0D8C = time(0);
  lpTopLevelExceptionFilter = SetUnhandledExceptionFilter(RecordExceptionInfo);
  sub_4A0647((int)SecurityHandler);
}

//----- (004210A0) --------------------------------------------------------
char *__cdecl GetFilePart(char *source)
{
  char *v2; // [esp+0h] [ebp-4h]
  char *v3; // [esp+0h] [ebp-4h]

  v2 = strrchr(source, 92);
  if ( v2 )
    v3 = v2 + 1;
  else
    v3 = source;
  return v3;
}

//----- (004210E0) --------------------------------------------------------
void __cdecl __noreturn SecurityHandler()
{
  char savedregs; // [esp+0h] [ebp+0h]

  ELOG("Buffer Overrun\n", savedregs);
  if ( g_nEnable )
  {
    sub_421120();
    GenerateExceptionReport(0);
    sendMail();
    sub_421130();
  }
  ExitProcess(1u);
}
// 4210E8: variable 'savedregs' is possibly undefined

//----- (00421120) --------------------------------------------------------
void sub_421120()
{
  EnterCriticalSection(&CriticalSection);
}

//----- (00421130) --------------------------------------------------------
void sub_421130()
{
  LeaveCriticalSection(&CriticalSection);
}

//----- (00421140) --------------------------------------------------------
BOOL __cdecl sendMail()
{
  time_t v1; // [esp+0h] [ebp-118h] BYREF
  char *v2; // [esp+4h] [ebp-114h]
  CHAR NewFileName[264]; // [esp+8h] [ebp-110h] BYREF
  int v4; // [esp+110h] [ebp-8h]
  struct tm *v5; // [esp+114h] [ebp-4h]

  v4 = dword_4D9830;
  if ( host )
    sendMail_0(host, from, to, ExistingFileName);
  strcpy(NewFileName, ExistingFileName);
  v2 = GetFilePart(NewFileName);
  time(&v1);
  v5 = localtime(&v1);
  wsprintfA(
    v2,
    "Exception\\%02d%02d%02d.%02d%02d%02d.dbg.txt",
    v5->tm_year % 100,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    v5->tm_min,
    v5->tm_sec);
  MoveFileExA(ExistingFileName, NewFileName, 1u);
  wsprintfA(
    v2,
    "Exception\\%02d%02d%02d.%02d%02d%02d.dbg.dmp",
    v5->tm_year % 100,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    v5->tm_min,
    v5->tm_sec);
  MoveFileExA(byte_4E0B80, NewFileName, 1u);
  DeleteFileA(ExistingFileName);
  return DeleteFileA(byte_4E0B80);
}
// 4B4264: using guessed type int (*wsprintfA)(_DWORD, const char *, ...);
// 4D9830: using guessed type int dword_4D9830;

//----- (004212B0) --------------------------------------------------------
int __cdecl sendMail_0(const char *host, const char *from, const char *to, const char *body)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int namelen; // [esp+0h] [ebp-9D8h] BYREF
  size_t v14; // [esp+4h] [ebp-9D4h]
  struct hostent *v15; // [esp+8h] [ebp-9D0h]
  char *i; // [esp+Ch] [ebp-9CCh]
  char optval[4]; // [esp+10h] [ebp-9C8h] BYREF
  struct sockaddr name; // [esp+14h] [ebp-9C4h] BYREF
  int v19; // [esp+24h] [ebp-9B4h]
  SOCKET sock; // [esp+28h] [ebp-9B0h]
  int v21; // [esp+2Ch] [ebp-9ACh]
  char buf[348]; // [esp+30h] [ebp-9A8h] BYREF
  struct WSAData WSAData; // [esp+830h] [ebp-1A8h] BYREF
  struct sockaddr v24; // [esp+9C4h] [ebp-14h] BYREF
  int v25; // [esp+9D4h] [ebp-4h]

  v25 = dword_4D9830;
  v21 = 0;
  if ( WSAStartup(0x202u, &WSAData) )
    return 0;
  sock = socket(2, 1, 0);
  if ( sock == -1 )
  {
    WSACleanup();
    return 0;
  }
  *(_DWORD *)optval = 5000;
  v19 = setsockopt(sock, 0xFFFF, 4102, optval, 4);
  if ( v19 != -1 )
  {
    *(_DWORD *)optval = 5000;
    v19 = setsockopt(sock, 0xFFFF, 4101, optval, 4);
    if ( v19 != -1 )
    {
      name.sa_family = 2;
      *(_DWORD *)&name.sa_data[2] = 0;
      *(_WORD *)name.sa_data = 0;
      if ( bind(sock, &name, 16) != -1 )
      {
        name.sa_family = 2;
        *(_DWORD *)&name.sa_data[2] = inet_addr(host);
        if ( *(_DWORD *)&name.sa_data[2] != -1 )
        {
LABEL_11:
          *(_WORD *)name.sa_data = htons(0x19u);
          if ( connect(sock, &name, 16) != -1 )
          {
            recv(sock, buf, 2048, 0);
            i = "HELO www.inixsoft.com\r\n";
            v5 = strlen("HELO www.inixsoft.com\r\n");
            if ( send(sock, "HELO www.inixsoft.com\r\n", v5, 0) > 0 )
            {
              recv(sock, buf, 2048, 0);
              sprintf(buf, "MAIL From: <%s>\r\n", from);
              v6 = strlen(buf);
              if ( send(sock, buf, v6, 0) > 0 )
              {
                recv(sock, buf, 2048, 0);
                for ( i = (char *)to; ; i += v14 )
                {
                  i += strspn(i, " ,");
                  if ( !*i )
                    break;
                  v14 = strcspn(i, ",");
                  sprintf(buf, "RCPT To: <%.*s>\r\n", v14, i);
                  v7 = strlen(buf);
                  if ( send(sock, buf, v7, 0) <= 0 )
                    goto LABEL_25;
                  recv(sock, buf, 2048, 0);
                }
                i = "DATA\r\n";
                v8 = strlen("DATA\r\n");
                if ( send(sock, "DATA\r\n", v8, 0) > 0 )
                {
                  recv(sock, buf, 2048, 0);
                  memset(&v24, 0, sizeof(v24));
                  namelen = 16;
                  getsockname(sock, &v24, &namelen);
                  sprintf(buf, "From: <%s>\r\n", from);
                  v9 = strlen(buf);
                  if ( send(sock, buf, v9, 0) > 0 )
                  {
                    sprintf(
                      buf,
                      "Subject: Exception (%d.%d.%d.%d)\r\n\r\n\r\n",
                      (unsigned __int8)v24.sa_data[2],
                      (unsigned __int8)v24.sa_data[3],
                      (unsigned __int8)v24.sa_data[4],
                      (unsigned __int8)v24.sa_data[5]);
                    v10 = strlen(buf);
                    if ( send(sock, buf, v10, 0) > 0 )
                    {
                      if ( sendFile(sock, body) )
                      {
                        i = "\r\n.\r\n";
                        v11 = strlen("\r\n.\r\n");
                        if ( send(sock, i, v11, 0) > 0 )
                        {
                          recv(sock, buf, 2048, 0);
                          i = "QUIT\r\n";
                          v12 = strlen("QUIT\r\n");
                          if ( send(sock, i, v12, 0) > 0 )
                          {
                            recv(sock, buf, 2048, 0);
                            v21 = 1;
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
          goto LABEL_25;
        }
        v15 = gethostbyname(host);
        if ( v15 )
        {
          memcpy(&name.sa_data[2], *(const void **)v15->h_addr_list, v15->h_length);
          goto LABEL_11;
        }
      }
    }
  }
LABEL_25:
  closesocket(sock);
  WSACleanup();
  return v21;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00421820) --------------------------------------------------------
int __cdecl sendFile(unsigned int sock, const char *name)
{
  DWORD len; // [esp+0h] [ebp-40Ch] BYREF
  char Buffer[1024]; // [esp+4h] [ebp-408h] BYREF
  int v5; // [esp+404h] [ebp-8h]
  HANDLE hFile; // [esp+408h] [ebp-4h]

  v5 = dword_4D9830;
  hFile = CreateFileA(name, 0x80000000, 1u, 0, 3u, 0, 0);
  if ( hFile == (HANDLE)-1 )
    return 1;
  do
  {
    if ( !ReadFile(hFile, Buffer, 0x400u, &len, 0) || !len )
    {
      CloseHandle(hFile);
      return 1;
    }
  }
  while ( send(sock, Buffer, len, 0) > 0 );
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004218D0) --------------------------------------------------------
void __cdecl GenerateExceptionReport(PEXCEPTION_POINTERS data)
{
  DWORD v1; // eax
  const char *v2; // eax
  HANDLE v3; // eax
  HANDLE v4; // eax
  int v5; // [esp-1Ch] [ebp-B8Ch]
  int v6; // [esp-18h] [ebp-B88h]
  int v7; // [esp-14h] [ebp-B84h]
  int v8; // [esp-10h] [ebp-B80h]
  int v9; // [esp-Ch] [ebp-B7Ch]
  const char *v10; // [esp-Ch] [ebp-B7Ch]
  int v11; // [esp-8h] [ebp-B78h]
  DWORD v12; // [esp-8h] [ebp-B78h]
  DWORD v13; // [esp-4h] [ebp-B74h]
  const char *v14; // [esp+Ch] [ebp-B64h]
  DWORD v15; // [esp+10h] [ebp-B60h]
  int i; // [esp+14h] [ebp-B5Ch]
  char v17[4]; // [esp+18h] [ebp-B58h] BYREF
  const char *v18; // [esp+404h] [ebp-76Ch]
  CONTEXT Context; // [esp+408h] [ebp-768h] BYREF
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+6D8h] [ebp-498h] BYREF
  char *v21; // [esp+6F4h] [ebp-47Ch]
  _CONTEXT ContextRecord; // [esp+6F8h] [ebp-478h] BYREF
  struct tm *v23; // [esp+9CCh] [ebp-1A4h]
  struct _SYSTEMTIME SystemTime; // [esp+9D0h] [ebp-1A0h] BYREF
  char v25[12]; // [esp+9E0h] [ebp-190h] BYREF
  DWORD v26; // [esp+9ECh] [ebp-184h]
  DWORD v27; // [esp+A34h] [ebp-13Ch]
  int v28[2]; // [esp+A38h] [ebp-138h] BYREF
  PEXCEPTION_RECORD v29; // [esp+A40h] [ebp-130h]
  HANDLE LogFile; // [esp+A44h] [ebp-12Ch]
  CHAR Filename[4]; // [esp+A48h] [ebp-128h] BYREF
  int v32; // [esp+B54h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+B58h] [ebp-18h]

  v32 = dword_4D9830;
  LogFile = CreateFileA(ExistingFileName, 0x40000000u, 1u, 0, 4u, 0x80000080, 0);
  if ( LogFile == (HANDLE)-1 )
  {
    OutputDebugStringA("Error creating exception report");
  }
  else
  {
    SetFilePointer(LogFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    if ( g_bRaise )
      v14 = "first excpetion";
    else
      v14 = &DefaultNullString;
    v11 = SystemTime.wSecond;
    v9 = SystemTime.wMinute;
    v8 = SystemTime.wHour;
    v7 = SystemTime.wDay;
    v6 = SystemTime.wMonth;
    v5 = SystemTime.wYear;
    v1 = GetCurrentThreadId();
    hprintf(
      LogFile,
      "[%x %04d/%02d/%02d %02d:%02d:%02d]: ======================= %s\r\n",
      v1,
      v5,
      v6,
      v7,
      v8,
      v9,
      v11,
      v14);
    v21 = "Unknown";
    if ( !data )
    {
      SnapCurrentProcessMiniDump(&Context);
      memset(v25, 0, 0x50u);
      v26 = Context.Eip;
      v28[1] = (int)&Context;
      v28[0] = (int)v25;
      data = (PEXCEPTION_POINTERS)v28;
    }
    qmemcpy(&ContextRecord, data->ContextRecord, sizeof(ContextRecord));
    if ( VirtualQuery((LPCVOID)ContextRecord.Eip, &Buffer, 0x1Cu)
      && GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u) )
    {
      v21 = GetFilePart(Filename);
    }
    v23 = localtime(&dword_4E0D8C);
    hprintf(
      LogFile,
      "start at %02d/%02d/%02d %02d:%02d:%02d\r\n",
      v23->tm_year % 100,
      v23->tm_mon + 1,
      v23->tm_mday,
      v23->tm_hour,
      v23->tm_min,
      v23->tm_sec);
    sub_422180(LogFile);
    v29 = data->ExceptionRecord;
    v13 = ContextRecord.Eip;
    v12 = ContextRecord.SegCs;
    v10 = v21;
    v2 = GetExceptionDescription(v29->ExceptionCode);
    hprintf(LogFile, "%s in module %s at %04x:%08x.\r\n", v2, v10, v12, v13);
    if ( v29->ExceptionCode == -1073741819 && v29->NumberParameters >= 2 )
    {
      v18 = "Read from";
      if ( v29->ExceptionInformation[0] )
        v18 = "Write to";
      wsprintfA(v17, "%s location %08x caused an access violation.\r\n", v18, v29->ExceptionInformation[1]);
      hprintf(LogFile, "%s", v17);
    }
    hprintf(LogFile, "\r\n");
    hprintf(LogFile, "Registers:\r\n");
    hprintf(
      LogFile,
      "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n",
      ContextRecord.Eax,
      ContextRecord.SegCs,
      ContextRecord.Eip,
      ContextRecord.EFlags);
    hprintf(
      LogFile,
      "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n",
      ContextRecord.Ebx,
      ContextRecord.SegSs,
      ContextRecord.Esp,
      ContextRecord.Ebp);
    hprintf(
      LogFile,
      "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n",
      ContextRecord.Ecx,
      ContextRecord.SegDs,
      ContextRecord.Esi,
      ContextRecord.SegFs);
    hprintf(
      LogFile,
      "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n",
      ContextRecord.Edx,
      ContextRecord.SegEs,
      ContextRecord.Edi,
      ContextRecord.SegGs);
    hprintf(LogFile, "\r\nBytes at CS:EIP:\r\n");
    v27 = ContextRecord.Eip;
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      hprintf(LogFile, "%02x ", *(unsigned __int8 *)(i + v27));
      ms_exc.registration.TryLevel = -1;
    }
    hprintf(LogFile, "\r\n\r\nStack dump:\r\n");
    *(_DWORD *)begin = ContextRecord.Esp & 0xFFFFFFE0;
    dword_4E0B70 = (int)NtCurrentTeb()->NtTib.StackBase & 0xFFFFFFE0;
    PrintStack(LogFile, ContextRecord.Esp & 0xFFFFFFE0, (ContextRecord.Esp & 0xFFFFFFE0) + 160);
    hprintf(LogFile, "\r\n");
    v3 = GetCurrentProcess();
    if ( SymInitialize(v3, 0, 1) )
    {
      v15 = SymGetOptions();
      if ( (v15 & 0x16) != 20 )
        SymSetOptions(v15 & 0xFFFFFFFD | 0x14);
      ImageHelpStackWalk(LogFile, &ContextRecord);
      v4 = GetCurrentProcess();
      SymCleanup(v4);
    }
    else
    {
      IntelStackWalk((int)LogFile, (int)&ContextRecord);
    }
    RecordModuleList(LogFile);
    CloseHandle(LogFile);
    CreateMiniDump(data);
  }
}
// 4B4264: using guessed type int (*wsprintfA)(_DWORD, const char *, ...);
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (00421EC0) --------------------------------------------------------
BOOL hprintf(void *LogFile, char *Format, ...)
{
  int v2; // eax
  CHAR String[2004]; // [esp+0h] [ebp-7E0h] BYREF
  int v5; // [esp+7D4h] [ebp-Ch]
  DWORD NumberOfBytesWritten; // [esp+7D8h] [ebp-8h] BYREF
  va_list arglist; // [esp+7DCh] [ebp-4h]
  va_list va; // [esp+7F0h] [ebp+10h] BYREF

  va_start(va, Format);
  v5 = dword_4D9830;
  va_copy(arglist, va);
  wvsprintfA(String, Format, va);
  arglist = 0;
  v2 = lstrlenA(String);
  return WriteFile(LogFile, String, v2, &NumberOfBytesWritten, 0);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00421F30) --------------------------------------------------------
void __cdecl CreateMiniDump(_EXCEPTION_POINTERS *pException)
{
  HANDLE v1; // eax
  HANDLE v2; // eax
  HANDLE v3; // eax
  DWORD v4; // [esp-18h] [ebp-2Ch]
  struct _MINIDUMP_EXCEPTION_INFORMATION *ExceptionParam; // [esp+0h] [ebp-14h]
  HANDLE hFile; // [esp+4h] [ebp-10h]
  int v7[3]; // [esp+8h] [ebp-Ch] BYREF

  hFile = CreateFileA(byte_4E0B80, 0x40000000u, 1u, 0, 2u, 0x80000080, 0);
  if ( hFile != (HANDLE)-1 )
  {
    v1 = GetCurrentThread();
    SetThreadPriority(v1, 2);
    if ( pException )
    {
      v7[0] = GetCurrentThreadId();
      v7[2] = 1;
      v7[1] = (int)pException;
      ExceptionParam = (struct _MINIDUMP_EXCEPTION_INFORMATION *)v7;
    }
    else
    {
      ExceptionParam = 0;
    }
    v4 = GetCurrentProcessId();
    v2 = GetCurrentProcess();
    j_MiniDumpWriteDump(v2, v4, hFile, MiniDumpNormal, ExceptionParam, 0, 0);
    v3 = GetCurrentThread();
    SetThreadPriority(v3, 0);
    CloseHandle(hFile);
  }
}

//----- (00421FE0) --------------------------------------------------------
int __cdecl RecordModuleList(void *LogFile)
{
  hprintf(LogFile, "Module list:\r\n");
  GetModuleHandleA(0);
  return _getdrive();
}

//----- (00422280) --------------------------------------------------------
const char *__cdecl GetExceptionDescription(unsigned int ExceptionCode)
{
  unsigned int i; // [esp+0h] [ebp-C4h]
  int v3; // [esp+4h] [ebp-C0h]
  int v4[47]; // [esp+8h] [ebp-BCh]

  v3 = 1073807365;
  v4[0] = (int)"a Control-C";
  v4[1] = 1073807368;
  v4[2] = (int)"a Control-Break";
  v4[3] = -2147483646;
  v4[4] = (int)"a Datatype Misalignment";
  v4[5] = -2147483645;
  v4[6] = (int)"a Breakpoint";
  v4[7] = -1073741819;
  v4[8] = (int)"an Access Violation";
  v4[9] = -1073741818;
  v4[10] = (int)"an In Page Error";
  v4[11] = -1073741801;
  v4[12] = (int)"a No Memory";
  v4[13] = -1073741795;
  v4[14] = (int)"an Illegal Instruction";
  v4[15] = -1073741787;
  v4[16] = (int)"a Noncontinuable Exception";
  v4[17] = -1073741786;
  v4[18] = (int)"an Invalid Disposition";
  v4[19] = -1073741684;
  v4[20] = (int)"a Array Bounds Exceeded";
  v4[21] = -1073741683;
  v4[22] = (int)"a Float Denormal Operand";
  v4[23] = -1073741682;
  v4[24] = (int)"a Float Divide by Zero";
  v4[25] = -1073741681;
  v4[26] = (int)"a Float Inexact Result";
  v4[27] = -1073741680;
  v4[28] = (int)"a Float Invalid Operation";
  v4[29] = -1073741679;
  v4[30] = (int)"a Float Overflow";
  v4[31] = -1073741678;
  v4[32] = (int)"a Float Stack Check";
  v4[33] = -1073741677;
  v4[34] = (int)"a Float Underflow";
  v4[35] = -1073741676;
  v4[36] = (int)"an Integer Divide by Zero";
  v4[37] = -1073741675;
  v4[38] = (int)"an Integer Overflow";
  v4[39] = -1073741674;
  v4[40] = (int)"a Privileged Instruction";
  v4[41] = -1073741571;
  v4[42] = (int)"a Stack Overflow";
  v4[43] = -1073741502;
  v4[44] = (int)"a DLL Initialization Failed";
  v4[45] = -529697949;
  v4[46] = (int)"a Microsoft C++ Exception";
  for ( i = 0; i < 0x18; ++i )
  {
    if ( ExceptionCode == *(&v3 + 2 * i) )
      return (const char *)v4[2 * i];
  }
  return "Unknown exception type";
}

//----- (00422460) --------------------------------------------------------
int __cdecl PrintStack(void *LogFile, unsigned int begin, unsigned int end)
{
  int result; // eax
  int v4; // eax
  int v5; // eax
  char v6; // [esp+Ch] [ebp-80h] BYREF
  char v7[88]; // [esp+Dh] [ebp-7Fh] BYREF
  __int16 v8; // [esp+65h] [ebp-27h]
  char v9; // [esp+67h] [ebp-25h]
  int v10; // [esp+6Ch] [ebp-20h]
  char *v11; // [esp+70h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+74h] [ebp-18h]
  unsigned int v13; // [esp+9Ch] [ebp+10h]

  v10 = dword_4D9830;
  if ( *(_DWORD *)::begin < begin )
    *(_DWORD *)::begin = begin & 0xFFFFFFE0;
  if ( end <= dword_4E0B70 )
    v13 = (end + 31) & 0xFFFFFFE0;
  else
    v13 = dword_4E0B70;
  ms_exc.registration.TryLevel = 0;
  v6 = DefaultNullString;
  memset(v7, 0, sizeof(v7));
  v8 = 0;
  v9 = 0;
  result = (int)&v6;
  v11 = &v6;
  while ( *(_DWORD *)::begin < v13 )
  {
    if ( (::begin[0] & 0x1F) == 0 )
    {
      v4 = wsprintfA(v11, "%08x:", *(_DWORD *)::begin);
      v11 += v4;
    }
    v5 = wsprintfA(v11, " %08x", **(_DWORD **)::begin);
    v11 += v5;
    *(_DWORD *)::begin += 4;
    result = ::begin[0] & 0x1F;
    if ( (::begin[0] & 0x1F) == 0 )
    {
      hprintf(LogFile, "%s\r\n", &v6);
      v6 = 0;
      result = (int)&v6;
      v11 = &v6;
    }
  }
  return result;
}
// 4B4264: using guessed type int (*wsprintfA)(_DWORD, const char *, ...);
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (004225E0) --------------------------------------------------------
BOOL __cdecl ImageHelpStackWalk(void *LogFile, _CONTEXT *ptrContext)
{
  HANDLE v2; // eax
  HANDLE v3; // eax
  HANDLE v4; // eax
  HANDLE v6; // [esp-1Ch] [ebp-678h]
  DWORD64 v7; // [esp-10h] [ebp-66Ch]
  DWORD64 v8; // [esp-10h] [ebp-66Ch]
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+0h] [ebp-65Ch] BYREF
  CHAR Filename[268]; // [esp+1Ch] [ebp-640h] BYREF
  DWORD pdwDisplacement; // [esp+128h] [ebp-534h] BYREF
  struct _IMAGEHLP_LINE64 Line64; // [esp+12Ch] [ebp-530h] BYREF
  PSYMBOL_INFO Symbol; // [esp+148h] [ebp-514h]
  CHAR outputString[512]; // [esp+14Ch] [ebp-510h] BYREF
  struct _SYMBOL_INFO v15; // [esp+34Ch] [ebp-310h] BYREF
  int v16; // [esp+5A8h] [ebp-B4h]
  unsigned __int64 Displacement; // [esp+5ACh] [ebp-B0h] BYREF
  struct _tagSTACKFRAME StackFrame; // [esp+5B4h] [ebp-A8h] BYREF

  v16 = dword_4D9830;
  hprintf(LogFile, "Call Stack Information:\r\n");
  memset(&StackFrame, 0, sizeof(StackFrame));
  StackFrame.AddrPC.Offset = ptrContext->Eip;
  StackFrame.AddrPC.Mode = AddrModeFlat;
  StackFrame.AddrStack.Offset = ptrContext->Esp;
  StackFrame.AddrStack.Mode = AddrModeFlat;
  StackFrame.AddrFrame.Offset = ptrContext->Ebp;
  StackFrame.AddrFrame.Mode = AddrModeFlat;
  while ( 1 )
  {
    v6 = GetCurrentThread();
    v2 = GetCurrentProcess();
    if ( !StackWalk(0x14Cu, v2, v6, &StackFrame, ptrContext, 0, SymFunctionTableAccess, SymGetModuleBase, 0)
      || !StackFrame.AddrFrame.Offset )
    {
      break;
    }
    PrintStack(LogFile, StackFrame.AddrFrame.Offset - 32, StackFrame.AddrFrame.Offset + 12);
    hprintf(LogFile, "\r\n%08x  %08x ", StackFrame.AddrFrame.Offset, StackFrame.AddrPC.Offset);
    Symbol = &v15;
    v15.SizeOfStruct = 600;
    v15.MaxNameLen = 512;
    Displacement = 0i64;
    outputString[0] = 0;
    v7 = StackFrame.AddrPC.Offset;
    v3 = GetCurrentProcess();
    if ( SymFromAddr(v3, v7, &Displacement, &v15)
      && (hprintf(LogFile, "%s +%x\r\n", Symbol->Name, (_DWORD)Displacement),
          UnDecorateSymbolName(Symbol->Name, outputString, 0x200u, 0),
          pdwDisplacement = 0,
          Line64.SizeOfStruct = 24,
          v8 = StackFrame.AddrPC.Offset,
          v4 = GetCurrentProcess(),
          SymGetLineFromAddr64(v4, v8, &pdwDisplacement, &Line64)) )
    {
      hprintf(LogFile, "%s %d %s\r\n", Line64.FileName, Line64.LineNumber, outputString);
    }
    else
    {
      Filename[0] = 0;
      if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu) )
        GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u);
      hprintf(LogFile, "%s %s\r\n", Filename, outputString);
    }
    hprintf(
      LogFile,
      "Params:   %08x %08x %08x %08x\r\n",
      StackFrame.Params[0],
      StackFrame.Params[1],
      StackFrame.Params[2],
      StackFrame.Params[3]);
  }
  return hprintf(LogFile, "\r\n");
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004228C0) --------------------------------------------------------
unsigned int __cdecl IntelStackWalk(int a1, int a2)
{
  unsigned int result; // eax
  int i; // [esp+Ch] [ebp-154h]
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+10h] [ebp-150h] BYREF
  unsigned __int8 *v5; // [esp+2Ch] [ebp-134h]
  CHAR Filename[8]; // [esp+30h] [ebp-130h] BYREF
  int v7; // [esp+138h] [ebp-28h]
  LPCVOID lpAddress; // [esp+13Ch] [ebp-24h]
  LPVOID lp; // [esp+140h] [ebp-20h]
  LPVOID v10; // [esp+144h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+148h] [ebp-18h]

  v7 = dword_4D9830;
  hprintf((void *)a1, "Intel Call Stack Information:\r\n");
  lpAddress = *(LPCVOID *)(a2 + 184);
  lp = *(LPVOID *)(a2 + 180);
  do
  {
    PrintStack((void *)a1, (unsigned int)lp - 32, (unsigned int)lp + 12);
    Filename[0] = 0;
    if ( VirtualQuery(lpAddress, &Buffer, 0x1Cu) )
      GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u);
    hprintf((void *)a1, "\r\n%08x  %08x  %s\r\n", lp, lpAddress, Filename);
    hprintf((void *)a1, "Bytes at CS:EIP: ");
    v5 = (unsigned __int8 *)lpAddress;
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      hprintf((void *)a1, "%02x ", v5[i]);
      ms_exc.registration.TryLevel = -1;
    }
    hprintf((void *)a1, "\r\n");
    lpAddress = (LPCVOID)*((_DWORD *)lp + 1);
    v10 = lp;
    result = (unsigned int)lp;
    lp = *(LPVOID *)lp;
    if ( ((unsigned __int8)lp & 3) != 0 )
      break;
    result = (unsigned int)lp;
    if ( lp <= v10 )
      break;
    result = IsBadWritePtr(lp, 8u);
  }
  while ( !result );
  return result;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00422A90) --------------------------------------------------------
LONG __stdcall RecordExceptionInfo(struct _EXCEPTION_POINTERS *ExceptionInfo)
{
  DWORD v1; // ebx
  DWORD v2; // edi
  DWORD v3; // esi
  LONG result; // eax

  if ( g_nEnable && ExceptionInfo->ExceptionRecord->ExceptionCode != -536870911 )
  {
    sub_421120();
    if ( !dword_4E0DB8 )
    {
      dword_4E0DB8 = 1;
      GenerateExceptionReport(v1, v2, v3, ExceptionInfo);
      sendMail();
    }
    sub_421130();
  }
  if ( lpTopLevelExceptionFilter )
    result = lpTopLevelExceptionFilter(ExceptionInfo);
  else
    result = 0;
  return result;
}
// 422ACC: variable 'v1' is possibly undefined
// 422ACC: variable 'v2' is possibly undefined
// 422ACC: variable 'v3' is possibly undefined
// 4E0DB8: using guessed type int dword_4E0DB8;

//----- (00422B00) --------------------------------------------------------
void __thiscall CIOException::CInit::~CInit(CIOException::CInit *this)
{
  if ( lpTopLevelExceptionFilter )
    SetUnhandledExceptionFilter(lpTopLevelExceptionFilter);
  DeleteCriticalSection(&CriticalSection);
}

//----- (00422B30) --------------------------------------------------------
void ELOG(char *Format, char a2, ...)
{
  DWORD v2; // eax
  int v3; // [esp-18h] [ebp-448h]
  int v4; // [esp-14h] [ebp-444h]
  int v5; // [esp-10h] [ebp-440h]
  int v6; // [esp-Ch] [ebp-43Ch]
  int v7; // [esp-8h] [ebp-438h]
  int v8; // [esp-4h] [ebp-434h]
  _BYTE *v9; // [esp+0h] [ebp-430h]
  DWORD NumberOfBytesWritten; // [esp+4h] [ebp-42Ch] BYREF
  int i; // [esp+8h] [ebp-428h]
  struct _SYSTEMTIME SystemTime; // [esp+Ch] [ebp-424h] BYREF
  HANDLE hFile; // [esp+1Ch] [ebp-414h]
  char Buffer[1028]; // [esp+20h] [ebp-410h] BYREF
  int v15; // [esp+424h] [ebp-Ch]
  DWORD nNumberOfBytesToWrite; // [esp+428h] [ebp-8h]
  va_list v17; // [esp+42Ch] [ebp-4h]

  v15 = dword_4D9830;
  if ( g_nEnable )
  {
    sub_421120();
    va_copy(v17, &a2);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    hFile = CreateFileA(ExistingFileName, 0xC0000000, 1u, 0, 4u, 0x80u, 0);
    if ( hFile == (HANDLE)-1 )
    {
      sub_421130();
    }
    else
    {
      SetFilePointer(hFile, 0, 0, 2u);
      v8 = SystemTime.wSecond;
      v7 = SystemTime.wMinute;
      v6 = SystemTime.wHour;
      v5 = SystemTime.wDay;
      v4 = SystemTime.wMonth;
      v3 = SystemTime.wYear;
      v2 = GetCurrentThreadId();
      nNumberOfBytesToWrite = _snprintf(
                                Buffer,
                                0x400u,
                                "[%x %04d/%02d/%02d %02d:%02d:%02d]: ",
                                v2,
                                v3,
                                v4,
                                v5,
                                v6,
                                v7,
                                v8);
      if ( (nNumberOfBytesToWrite & 0x80000000) == 0 )
      {
        WriteFile(hFile, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        nNumberOfBytesToWrite = _vsnprintf(Buffer, 0x400u, Format, v17);
        if ( (nNumberOfBytesToWrite & 0x80000000) == 0 )
        {
          for ( i = 0; i < (int)nNumberOfBytesToWrite; i += 2 )
          {
            v9 = memchr(&Buffer[i], 10, nNumberOfBytesToWrite - i);
            if ( !v9 )
              break;
            if ( nNumberOfBytesToWrite < 0x400 )
              ++nNumberOfBytesToWrite;
            i = v9 - Buffer;
            memcpy_0(v9 + 1, v9, nNumberOfBytesToWrite - (v9 - Buffer) - 1);
            *v9 = 13;
          }
          WriteFile(hFile, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        }
      }
      v17 = 0;
      CloseHandle(hFile);
      sub_421130();
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00422D80) --------------------------------------------------------
void __stdcall __spoils<edx,ecx> EBREAK()
{
  if ( g_nEnable && InterlockedExchange(&g_bRaise, 0) )
  {
    if ( g_nEnable )
      EBreak();
  }
}

//----- (00422DC0) --------------------------------------------------------
int __cdecl EBreak()
{
  int result; // eax
  char savedregs; // [esp+0h] [ebp+0h]

  ELOG("EASSERT\n", savedregs);
  sub_421120();
  GenerateExceptionReport(0);
  sendMail();
  sub_421130();
  return result;
}
// 422DC8: variable 'savedregs' is possibly undefined

//----- (00422DF0) --------------------------------------------------------
int __cdecl CIOException::Filter(_EXCEPTION_POINTERS *pExp)
{
  DWORD v1; // ebx
  DWORD v2; // edi
  DWORD v3; // esi

  if ( g_nEnable && pExp->ExceptionRecord->ExceptionCode != -536870911 )
  {
    sub_421120();
    GenerateExceptionReport(v1, v2, v3, pExp);
    sub_421130();
  }
  return 1;
}
// 422E12: variable 'v1' is possibly undefined
// 422E12: variable 'v2' is possibly undefined
// 422E12: variable 'v3' is possibly undefined

//----- (00422E30) --------------------------------------------------------
HANDLE __cdecl CIOException::Open(const char *szMailServer, const char *szMailFrom, const char *szMailTo)
{
  HANDLE result; // eax

  if ( szMailServer && *szMailServer )
  {
    host = (char *)szMailServer;
    from = (char *)szMailFrom;
    to = (char *)szMailTo;
  }
  else
  {
    host = 0;
    from = 0;
    to = 0;
  }
  result = CreateFileA(ExistingFileName, 0x80000000, 1u, 0, 3u, 0, 0);
  if ( result != (HANDLE)-1 )
  {
    CloseHandle(result);
    sub_422F10();
  }
  return result;
}

//----- (00422EC0) --------------------------------------------------------
BOOL sub_422EC0()
{
  return InterlockedExchange(&g_nEnable, 1) == 0;
}

//----- (00422EE0) --------------------------------------------------------
LONG sub_422EE0()
{
  return InterlockedExchange(&g_nEnable, 0);
}

//----- (00422F00) --------------------------------------------------------
LONG sub_422F00()
{
  return g_nEnable;
}

//----- (00422F10) --------------------------------------------------------
void sub_422F10()
{
  sub_421120();
  sendMail();
  sub_421130();
}

//----- (00422F30) --------------------------------------------------------
LONG sub_422F30()
{
  g_bRaise = g_bRaise == 0;
  return g_bRaise;
}

//----- (00422F50) --------------------------------------------------------
void __cdecl CIOException::DumpStack(int nThread, void **hThread, unsigned int *nThreadId)
{
  HANDLE v3; // eax
  DWORD v4; // eax
  HANDLE v5; // eax
  HANDLE v6; // eax
  HANDLE v7; // eax
  int v8; // [esp-18h] [ebp-38h]
  int v9; // [esp-14h] [ebp-34h]
  int v10; // [esp-10h] [ebp-30h]
  int v11; // [esp-Ch] [ebp-2Ch]
  int v12; // [esp-8h] [ebp-28h]
  int v13; // [esp-4h] [ebp-24h]
  int i; // [esp+0h] [ebp-20h]
  DWORD v15; // [esp+4h] [ebp-1Ch]
  struct tm *v16; // [esp+8h] [ebp-18h]
  struct _SYSTEMTIME SystemTime; // [esp+Ch] [ebp-14h] BYREF
  HANDLE LogFile; // [esp+1Ch] [ebp-4h]

  v3 = GetCurrentThread();
  SetThreadPriority(v3, 2);
  sub_421120();
  LogFile = CreateFileA(ExistingFileName, 0x40000000u, 1u, 0, 4u, 0x80000080, 0);
  if ( LogFile == (HANDLE)-1 )
  {
    sub_421130();
  }
  else
  {
    SetFilePointer(LogFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    v13 = SystemTime.wSecond;
    v12 = SystemTime.wMinute;
    v11 = SystemTime.wHour;
    v10 = SystemTime.wDay;
    v9 = SystemTime.wMonth;
    v8 = SystemTime.wYear;
    v4 = GetCurrentThreadId();
    hprintf(
      LogFile,
      "[%x %04d/%02d/%02d %02d:%02d:%02d]: Dump Stack =======================\r\n",
      v4,
      v8,
      v9,
      v10,
      v11,
      v12,
      v13);
    v16 = localtime(&dword_4E0D8C);
    hprintf(
      LogFile,
      "start at %02d/%02d/%02d %02d:%02d:%02d\r\n",
      v16->tm_year % 100,
      v16->tm_mon + 1,
      v16->tm_mday,
      v16->tm_hour,
      v16->tm_min,
      v16->tm_sec);
    v5 = GetCurrentProcess();
    if ( SymInitialize(v5, 0, 1) )
    {
      v15 = SymGetOptions();
      if ( (v15 & 0x16) != 20 )
        SymSetOptions(v15 & 0xFFFFFFFD | 0x14);
      for ( i = 0; i < nThread; ++i )
      {
        hprintf(LogFile, "Call Stack Information %d (%x):\r\n", i, nThreadId[i]);
        ImageHelpStackWalk(LogFile, hThread[i]);
      }
      RecordModuleList(LogFile);
      v6 = GetCurrentProcess();
      SymCleanup(v6);
    }
    CloseHandle(LogFile);
    sub_421130();
    CreateMiniDump(0);
    v7 = GetCurrentThread();
    SetThreadPriority(v7, 0);
  }
}

//----- (00423130) --------------------------------------------------------
DWORD __cdecl ImageHelpStackWalk(HANDLE hFile, HANDLE hThread)
{
  HANDLE v2; // eax
  HANDLE v3; // eax
  HANDLE v4; // eax
  DWORD64 v6; // [esp-10h] [ebp-93Ch]
  DWORD64 v7; // [esp-10h] [ebp-93Ch]
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+0h] [ebp-92Ch] BYREF
  CHAR Filename[268]; // [esp+1Ch] [ebp-910h] BYREF
  DWORD pdwDisplacement; // [esp+128h] [ebp-804h] BYREF
  struct _IMAGEHLP_LINE64 Line64; // [esp+12Ch] [ebp-800h] BYREF
  PSYMBOL_INFO Symbol; // [esp+148h] [ebp-7E4h]
  CHAR outputString[512]; // [esp+14Ch] [ebp-7E0h] BYREF
  struct _SYMBOL_INFO v14; // [esp+34Ch] [ebp-5E0h] BYREF
  unsigned __int64 Displacement; // [esp+5A4h] [ebp-388h] BYREF
  CONTEXT Context; // [esp+5ACh] [ebp-380h] BYREF
  int v17; // [esp+880h] [ebp-ACh]
  struct _tagSTACKFRAME StackFrame; // [esp+884h] [ebp-A8h] BYREF

  v17 = dword_4D9830;
  SuspendThread(hThread);
  memset(&Context, 0, sizeof(Context));
  Context.ContextFlags = 65543;
  GetThreadContext(hThread, &Context);
  hprintf(hFile, "\r\nRegisters:\r\n");
  hprintf(hFile, "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n", Context.Eax, Context.SegCs, Context.Eip, Context.EFlags);
  hprintf(hFile, "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n", Context.Ebx, Context.SegSs, Context.Esp, Context.Ebp);
  hprintf(hFile, "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n", Context.Ecx, Context.SegDs, Context.Esi, Context.SegFs);
  hprintf(hFile, "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n", Context.Edx, Context.SegEs, Context.Edi, Context.SegGs);
  hprintf(hFile, "\r\nStack dump:\r\n");
  *(_DWORD *)begin = Context.Esp & 0xFFFFFFE0;
  dword_4E0B70 = 0x80000000;
  PrintStack(hFile, Context.Esp & 0xFFFFFFE0, (Context.Esp & 0xFFFFFFE0) + 160);
  hprintf(hFile, "\r\nCall Stack:\r\n");
  memset(&StackFrame, 0, sizeof(StackFrame));
  StackFrame.AddrPC.Offset = Context.Eip;
  StackFrame.AddrPC.Mode = AddrModeFlat;
  StackFrame.AddrStack.Offset = Context.Esp;
  StackFrame.AddrStack.Mode = AddrModeFlat;
  StackFrame.AddrFrame.Offset = Context.Ebp;
  StackFrame.AddrFrame.Mode = AddrModeFlat;
  while ( 1 )
  {
    v2 = GetCurrentProcess();
    if ( !StackWalk(0x14Cu, v2, hThread, &StackFrame, &Context, 0, SymFunctionTableAccess, SymGetModuleBase, 0)
      || !StackFrame.AddrFrame.Offset )
    {
      break;
    }
    PrintStack(hFile, StackFrame.AddrFrame.Offset - 16, StackFrame.AddrFrame.Offset + 12);
    hprintf(hFile, "\r\n%08x  %08x ", StackFrame.AddrFrame.Offset, StackFrame.AddrPC.Offset);
    Symbol = &v14;
    v14.SizeOfStruct = 600;
    v14.MaxNameLen = 512;
    outputString[0] = 0;
    Displacement = 0i64;
    v6 = StackFrame.AddrPC.Offset;
    v3 = GetCurrentProcess();
    if ( SymFromAddr(v3, v6, &Displacement, &v14)
      && (hprintf(hFile, "%s +%x\r\n", Symbol->Name, (_DWORD)Displacement),
          UnDecorateSymbolName(Symbol->Name, outputString, 0x200u, 0),
          pdwDisplacement = 0,
          Line64.SizeOfStruct = 24,
          v7 = StackFrame.AddrPC.Offset,
          v4 = GetCurrentProcess(),
          SymGetLineFromAddr64(v4, v7, &pdwDisplacement, &Line64)) )
    {
      hprintf(hFile, "%s %d %s\r\n", Line64.FileName, Line64.LineNumber, outputString);
    }
    else
    {
      Filename[0] = 0;
      if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu) )
        GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u);
      hprintf(hFile, "%s %s\r\n", Filename, outputString);
    }
    hprintf(
      hFile,
      "Params:   %08x %08x %08x %08x\r\n",
      StackFrame.Params[0],
      StackFrame.Params[1],
      StackFrame.Params[2],
      StackFrame.Params[3]);
  }
  hprintf(hFile, "\r\n");
  return ResumeThread(hThread);
}
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (00423550) --------------------------------------------------------
LONG __thiscall CIOSocket::AddIOThread(volatile LONG *this)
{
  LONG result; // eax
  int v3; // [esp+4h] [ebp-4h]
  int v4; // [esp+4h] [ebp-4h]

  v3 = 4000;
  while ( --v3 >= 0 )
  {
    result = InterlockedCompareExchange(this, 1, 0);
    if ( !result )
      return result;
    _mm_pause();
  }
  v4 = 4000;
  while ( --v4 >= 0 )
  {
    SwitchToThread();
    result = InterlockedCompareExchange(this, 1, 0);
    if ( !result )
      return result;
  }
  do
  {
    Sleep(0x3E8u);
    result = InterlockedCompareExchange(this, 1, 0);
  }
  while ( result );
  return result;
}

//----- (004235E0) --------------------------------------------------------
CIOCriticalSection *__thiscall CIOCriticalSection::CIOCriticalSection(CIOCriticalSection *this)
{
  InitializeCriticalSection((LPCRITICAL_SECTION)this);
  *((_DWORD *)this + 7) = 0;
  *((_DWORD *)this + 6) = 0;
  return this;
}

//----- (00423610) --------------------------------------------------------
void __thiscall CIOCriticalSection::~CIOCriticalSection(CIOCriticalSection *this)
{
  if ( this->m_dwEIP[0] )
    EBREAK((int)this);
  DeleteCriticalSection(&this->m_critical_section);
}

//----- (00423640) --------------------------------------------------------
void __thiscall CIOCriticalSection::Enter(struct _RTL_CRITICAL_SECTION *this)
{
  int v2; // [esp+8h] [ebp-4h]
  int var0; // [esp+Ch] [ebp+0h]
  _RTL_CRITICAL_SECTION_DEBUG *retaddr; // [esp+10h] [ebp+4h]

  if ( !TryEnterCriticalSection(this) )
    EnterCriticalSection(this);
  if ( this[1].DebugInfo )
  {
    ELOG("CIOCriticalSection::Enter EIP(%p %p)\n", (char)this[1].DebugInfo);
    EBREAK();
  }
  v2 = *(_DWORD *)(var0 + 4);
  this[1].DebugInfo = retaddr;
  this[1].LockCount = v2;
}
// 4236A5: variable 'var0' is possibly undefined

//----- (004236D0) --------------------------------------------------------
void __thiscall CIOCriticalSection::Leave(int this)
{
  if ( !*(_DWORD *)(this + 24) )
    EBREAK();
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 24) = 0;
  LeaveCriticalSection((LPCRITICAL_SECTION)this);
}

//----- (00423710) --------------------------------------------------------
int sub_423710()
{
  CIOSocket::FreeIOThread();
  return CIOBuffer::FreeAll();
}

//----- (00423730) --------------------------------------------------------
int __cdecl CIOObject::RegisterWait(int nThread)
{
  HANDLE v1; // eax
  int result; // eax
  int i; // [esp+0h] [ebp-4h]

  v1 = GetCurrentProcess();
  SetProcessPriorityBoost(v1, 1);
  dword_4E0FD8 = 0;
  handle = CreateEventA(0, 0, 0, 0);
  ExistingCompletionPort = CreateIoCompletionPort((HANDLE)0xFFFFFFFF, 0, 0, 0);
  CIOSocket::CIOTimerInstance::OnTimerCallback(&unk_4E1020, 0);
  CIOObject::AddRef(&unk_4E1020, pRef);
  if ( CIOObject::RegisterWait(&unk_4E1020, handle) )
  {
    hThread = (void **)CMemory::_malloc(4 * nThread);
    nThreadId = CMemory::_malloc(4 * nThread);
    ::nThread = nThread;
    for ( i = 0; i < nThread; ++i )
      hThread[i] = (void *)_beginthreadex(0, 0, (int)CIOSocket::IOThread, i, 0, (LPDWORD)nThreadId + i);
    result = 1;
  }
  else
  {
    LOG_ERR("RegisterWait error for timer");
    result = 0;
  }
  return result;
}

//----- (00423840) --------------------------------------------------------
unsigned int __thiscall CIOSocket::AddIOThread(void *this)
{
  DWORD ThreadId; // [esp+0h] [ebp-4h] BYREF

  ThreadId = (DWORD)this;
  if ( !ExistingCompletionPort )
    return 0;
  hThread = (void **)CMemory::_realloc(hThread, 4 * nThread + 4);
  nThreadId = CMemory::_realloc(nThreadId, 4 * nThread + 4);
  hThread[nThread] = (void *)_beginthreadex(0, 0, (int)CIOSocket::IOThread, nThread, 0, &ThreadId);
  *((_DWORD *)nThreadId + nThread++) = ThreadId;
  return ThreadId;
}

//----- (004238F0) --------------------------------------------------------
int __cdecl CIOSocket::CloseIOThread()
{
  if ( InterlockedExchange(&dword_4E0FD8, 1) )
    return 0;
  SetEvent(handle);
  return 1;
}

//----- (00423920) --------------------------------------------------------
void __stdcall CIOSocket::FreeIOThread()
{
  CMemory::_free(hThread);
  CMemory::_free(nThreadId);
  hThread = 0;
  nThreadId = 0;
}

//----- (00423980) --------------------------------------------------------
LONG __thiscall CIOObject::AddRef(CIOObject *this, volatile int *pRef)
{
  if ( InterlockedIncrement(&this->m_nRef) == 1 )
  {
    EBREAK(1);
    this->m_nRef = 100;
  }
  return InterlockedIncrement(pRef);
}

//----- (004239C0) --------------------------------------------------------
void __thiscall CIOObject::Release(CIOObject *this, volatile int *pRef)
{
  LONG v3; // [esp+8h] [ebp-4h]

  if ( InterlockedDecrement(pRef) < 0 )
    goto LABEL_2;
  v3 = InterlockedDecrement(&this->m_nRef);
  if ( v3 <= 0 )
  {
    if ( v3 >= 0 )
    {
      if ( *pRef )
      {
LABEL_2:
        ELOG("CIOObject::Release %p %p %x %d\n", (char)this);
        EBREAK();
        *pRef = 100;
        this->m_nRef = 100;
        return;
      }
      this->OnFree(this);
    }
    else
    {
      ELOG("CIOObject::Release %p %p %d\n", (char)this);
      EBREAK();
      this->m_nRef = 100;
    }
  }
}

//----- (00423AC0) --------------------------------------------------------
int __thiscall CIOObject::RegisterWait(CIOObject *this, void *handle)
{
  int result; // eax
  CIOCriticalSection *v3; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  if ( (int)nCount < 64 )
  {
    Handles[nCount] = handle;
    dword_4E0DD0[nCount++] = (int)v3;
    SetEvent(::handle);
    CIOCriticalSection::Leave(v3);
    result = 1;
  }
  else
  {
    CIOCriticalSection::Leave(v3);
    result = 0;
  }
  return result;
}
// 423ADF: variable 'v3' is possibly undefined

//----- (00423B40) --------------------------------------------------------
void __thiscall CIOObject::AddTimer(CIOObject *this, unsigned int dwTime, int nId)
{
  CIOSocket::CIOTimer *v3; // eax
  CIOObject *pObject; // [esp+0h] [ebp-10h]
  CIOSocket::CIOTimer v6; // [esp+4h] [ebp-Ch] BYREF
  unsigned int dwTimea; // [esp+18h] [ebp+8h]

  CIOObject::AddRef(this, &this->m_nTimerRef);
  dwTimea = dwTime + GetTickCount();
  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  v3 = CIOSocket::CIOTimer::CIOTimer(&v6, pObject, dwTimea, nId);
  std::priority_queue<CIOSocket::CIOTimer>::push(&unk_4E100C, v3);
  if ( (int)(dword_4E0FD0 - dwTimea) <= 0 )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)pObject);
  }
  else
  {
    dword_4E0FD0 = dwTimea;
    CIOCriticalSection::Leave((CIOCriticalSection *)pObject);
    SetEvent(handle);
  }
}
// 423B7D: variable 'pObject' is possibly undefined
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423BD0) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall CIOSocket::CIOTimer::CIOTimer(CIOSocket::CIOTimer *this, CIOObject *pObject, unsigned int dwTime, int nId)
{
  *(_DWORD *)this = dwTime;
  *((_DWORD *)this + 1) = pObject;
  *((_DWORD *)this + 2) = nId;
  return this;
}

//----- (00423C00) --------------------------------------------------------
void __thiscall CIOBuffer::Alloc(CIOObject *this, int nId)
{
  if ( !PostQueuedCompletionStatus(ExistingCompletionPort, nId, (ULONG_PTR)this, 0) )
  {
    EBREAK(0);
    CIOObject::Release((int *)this);
  }
}

//----- (00423C40) --------------------------------------------------------
void __thiscall CIOObject::OnIOCallback(CIOObject *this, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  int v4; // eax
  DWORD v5; // ebx
  DWORD v6; // edi
  DWORD v7; // esi

  if ( lpOverlapped )
    EBREAK(v4);
  this->OnTimer(this, dwTransferred);
  CIOObject::Release(this, v5, v6, v7, &this->m_nTimerRef);
}
// 423C4D: variable 'v4' is possibly undefined
// 423C6B: variable 'v5' is possibly undefined
// 423C6B: variable 'v6' is possibly undefined
// 423C6B: variable 'v7' is possibly undefined

//----- (00423C80) --------------------------------------------------------
void __thiscall CIOSocket::CIOTimerInstance::OnTimerCallback(CIOSocket::CIOTimerInstance *this, int nId)
{
  DWORD v2; // eax
  CIOSocket::CIOTimer *v3; // eax
  CIOSocket::CIOTimer v5; // [esp+4h] [ebp-Ch] BYREF

  v2 = GetTickCount();
  v3 = CIOSocket::CIOTimer::CIOTimer(&v5, this, v2 + 86400000, nId);
  std::priority_queue<CIOSocket::CIOTimer>::push(&unk_4E100C, v3);
  dword_4E0FD0 = sub_424D50(&unk_4E100C.c)->m_dwTime;
}
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423CD0) --------------------------------------------------------
void __thiscall CIOSocket::CIOTimerInstance::OnIOCallback(CIOSocket::CIOTimerInstance *this, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  HANDLE v4; // eax

  if ( dwTransferred )
    CIOObject::PostObject(&unk_4E1020, dwTransferred - 1);
  else
    SetEvent(handle);
  v4 = GetCurrentThread();
  SuspendThread(v4);
}

//----- (00423D10) --------------------------------------------------------
unsigned int __stdcall CIOBuffer::FreeAll(void *formal)
{
  CIOCriticalSection *v2; // [esp+0h] [ebp-1Ch]
  CIOCriticalSection *v3; // [esp+0h] [ebp-1Ch]
  CIOObject *v4; // [esp+0h] [ebp-1Ch]
  CIOSocket::CIOTimer *v5; // [esp+4h] [ebp-18h]
  CIOObject *v6; // [esp+8h] [ebp-14h]
  int i; // [esp+Ch] [ebp-10h]
  int dwMilliseconds; // [esp+10h] [ebp-Ch]
  DWORD v9; // [esp+14h] [ebp-8h]
  DWORD v10; // [esp+18h] [ebp-4h]

  while ( 1 )
  {
    v9 = GetTickCount();
    dwMilliseconds = dword_4E0FD0 - v9;
    if ( (int)(dword_4E0FD0 - v9) <= 0 )
    {
      CIOCriticalSection::Enter(v2);
      v5 = sub_424D50(&unk_4E100C.c);
      v6 = v5->m_pObject;
      for ( i = v5->m_nId; ; i = v5->m_nId )
      {
        std::priority_queue<CIOSocket::CIOTimer>::pop(&unk_4E100C);
        v6->OnTimerCallback(v6, i);
        *v5 = *sub_424D50(&unk_4E100C.c);
        dwMilliseconds = v5->m_dwTime - v9;
        if ( dwMilliseconds > 0 )
          break;
        v6 = v5->m_pObject;
      }
      dword_4E0FD0 = v5->m_dwTime;
      CIOCriticalSection::Leave(v3);
    }
    v10 = WaitForMultipleObjects(nCount, Handles, 0, dwMilliseconds);
    if ( dword_4E0FD8 )
      break;
    if ( v10 < nCount )
      (*(void (__thiscall **)(int))(*(_DWORD *)dword_4E0DD0[v10] + 16))(dword_4E0DD0[v10]);
  }
  CIOCriticalSection::Enter(v2);
  while ( !sub_424D30(&unk_4E100C) )
  {
    v4 = sub_424D50(&unk_4E100C.c)->m_pObject;
    CIOObject::Release(v4, &v4->m_nTimerRef);
    std::priority_queue<CIOSocket::CIOTimer>::pop(&unk_4E100C);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)v4);
  CIOObject::PostObject(&unk_4E1020, nThread - 1);
  WaitForSingleObject(handle, 0xFFFFFFFF);
  CloseHandle(handle);
  return 0;
}
// 423D39: variable 'v2' is possibly undefined
// 423DCA: variable 'v3' is possibly undefined
// 423E44: variable 'v4' is possibly undefined
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423EC0) --------------------------------------------------------
void __stdcall __noreturn CIOSocket::IOThread(void *arglist)
{
  HANDLE v1; // eax
  unsigned __int32 CompletionKey; // [esp+0h] [ebp-10h] BYREF
  BOOL v3; // [esp+4h] [ebp-Ch]
  DWORD NumberOfBytesTransferred; // [esp+8h] [ebp-8h] BYREF
  LPOVERLAPPED Overlapped; // [esp+Ch] [ebp-4h] BYREF

  v1 = GetCurrentThread();
  SetThreadIdealProcessor(v1, 0x20u);
  while ( 1 )
  {
    v3 = GetQueuedCompletionStatus(
           ExistingCompletionPort,
           &NumberOfBytesTransferred,
           &CompletionKey,
           &Overlapped,
           0xFFFFFFFF);
    InterlockedIncrement(&dword_4E0FDC);
    (*(void (__thiscall **)(unsigned __int32, BOOL, DWORD, LPOVERLAPPED))(*(_DWORD *)CompletionKey + 20))(
      CompletionKey,
      v3,
      NumberOfBytesTransferred,
      Overlapped);
    InterlockedDecrement(&dword_4E0FDC);
  }
}

//----- (00423F30) --------------------------------------------------------
int __stdcall CIOSocket::DumpStack()
{
  int result; // eax

  CIOException::DumpStack(nThread, hThread, (unsigned int *)nThreadId);
  sub_422F10();
  return result;
}

//----- (00423F60) --------------------------------------------------------
int __stdcall `vector constructor iterator'(void *__t, unsigned int __s, int __n, void *(__thiscall *__f)(void *))
{
  int result; // eax

  while ( 1 )
  {
    result = --__n;
    if ( __n < 0 )
      break;
    __f(__t);
    __t = (char *)__t + __s;
  }
  return result;
}

//----- (00423F90) --------------------------------------------------------
CIOBuffer *__cdecl CIOBuffer::Alloc()
{
  char v0; // al
  CIOBuffer *v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  v0 = InterlockedIncrement(&dword_4D5B84);
  v3 = 8 * (v0 & 0xF) + 5115952;
  CIOSpinLock::Enter((CIOSpinLock *)(8 * (v0 & 0xF) + 5115956));
  v2 = *(CIOBuffer **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = v2->m_pNext;
    CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
    v2 = (CIOBuffer *)operator new(0x1F4Cu);
  }
  v2->m_dwSize = 0;
  v2->m_nRef = 1;
  v2->m_pNext = 0;
  return v2;
}

//----- (00424040) --------------------------------------------------------
LONG __thiscall CIOBuffer::Free(CIOBuffer *this)
{
  char v1; // al
  int v4; // [esp+4h] [ebp-4h]

  v1 = InterlockedDecrement(&dword_4E0FE4);
  v4 = 8 * (v1 & 0xF) + 5115952;
  CIOSpinLock::Enter((CIOSpinLock *)(8 * (v1 & 0xF) + 5115956));
  this->m_pNext = *(CIOBuffer **)v4;
  *(_DWORD *)v4 = this;
  return CIOSpinLock::Leave((volatile LONG *)(v4 + 4));
}

//----- (004240A0) --------------------------------------------------------
int __cdecl CIOBuffer::FreeAll()
{
  int result; // eax
  _DWORD *v1; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 16; ++i )
  {
    CIOSpinLock::Enter((CIOSpinLock *)(8 * i + 5115956));
    while ( 1 )
    {
      v1 = (_DWORD *)_t[2 * i];
      if ( !v1 )
        break;
      _t[2 * i] = v1[2002];
      operator delete(v1);
    }
    CIOSpinLock::Leave((volatile LONG *)(8 * i + 5115956));
    result = i + 1;
  }
  return result;
}

//----- (00424120) --------------------------------------------------------
_DWORD *__thiscall CIOSocket::CIOSocket(_DWORD *this, int a2)
{
  CIOObject::CIOObject((CIOObject *)this);
  *this = &off_4B6624;
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 5));
  this[4] = a2;
  if ( this[4] != -1 )
    CIOObject::AddRef((int)this);
  memset(this + 13, 0, 0x14u);
  memset(this + 18, 0, 0x14u);
  this[23] = CIOBuffer::Alloc();
  this[26] = 0;
  this[25] = 0;
  this[24] = 0;
  return this;
}
// 4B6624: using guessed type int (__stdcall *off_4B6624)(int);

//----- (004241C0) --------------------------------------------------------
void __thiscall sub_4241C0(void *this, char a2)
{
  CIOSocket::_CIOSocket((CIOBuffer **)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
}

//----- (004241F0) --------------------------------------------------------
void __thiscall CIOSocket::_CIOSocket(CIOBuffer **a1)
{
  CIOBuffer *v2; // [esp+4h] [ebp-4h]

  *a1 = (CIOBuffer *)&off_4B6624;
  CIOBuffer::Release(a1[23]);
  while ( a1[24] )
  {
    v2 = a1[24];
    a1[24] = v2->m_pNext;
    CIOBuffer::Free(v2);
  }
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(a1 + 5));
  std::locale::facet::~facet((std::locale::facet *)a1);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);
// 4B6624: using guessed type int (__stdcall *off_4B6624)(int);

//----- (00424260) --------------------------------------------------------
void __thiscall CIOSocket::WriteCallback(CIOSocket *this)
{
  int *v1; // [esp+0h] [ebp-Ch]
  int *v2; // [esp+0h] [ebp-Ch]
  char optval[2]; // [esp+4h] [ebp-8h] BYREF
  __int16 v4; // [esp+6h] [ebp-6h]
  SOCKET s; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  s = InterlockedExchange(v1 + 4, -1);
  CIOCriticalSection::Leave((CIOCriticalSection *)v1);
  if ( s != -1 )
  {
    (*(void (__thiscall **)(int *))(*v2 + 28))(v2);
    *(_WORD *)optval = 1;
    v4 = 0;
    setsockopt(s, 0xFFFF, 128, optval, 4);
    closesocket(s);
    CIOObject::Release(v2);
  }
}
// 42427C: variable 'v1' is possibly undefined
// 42429A: variable 'v2' is possibly undefined

//----- (004242E0) --------------------------------------------------------
void __thiscall CIOSocket::GracefulClose(CIOSocket *this)
{
  int *v1; // [esp+0h] [ebp-8h]
  int *v2; // [esp+0h] [ebp-8h]
  LONG s; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  s = InterlockedExchange(v1 + 4, -1);
  CIOCriticalSection::Leave((CIOCriticalSection *)v1);
  if ( s != -1 )
  {
    (*(void (__thiscall **)(int *))(*v2 + 28))(v2);
    closesocket(s);
    CIOObject::Release(v2);
  }
}
// 4242FC: variable 'v1' is possibly undefined
// 42431A: variable 'v2' is possibly undefined

//----- (00424340) --------------------------------------------------------
void __thiscall CIOSocket::OnIOCallback(CIOSocket *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  if ( bSuccess )
  {
    if ( lpOverlapped == &this->m_overlappedWrite )
    {
      CIOSocket::WriteCallback(this, dwTransferred);
      CIOObject::Release((int *)this);
    }
    else if ( lpOverlapped == &this->m_overlappedRead )
    {
      CIOSocket::ReadCallback(this, dwTransferred);
      CIOObject::Release((int *)this);
    }
    else
    {
      this->OnTimer(this, dwTransferred);
      CIOObject::Release(this, &this->m_nTimerRef);
    }
  }
  else
  {
    if ( lpOverlapped == &this->m_overlappedRead )
      CIOSocket::WriteCallback(this);
    CIOObject::Release((int *)this);
  }
}

//----- (004243D0) --------------------------------------------------------
void __thiscall sub_4243D0(CIOSocket *this)
{
  CIOSocket::Read(this, 0);
}

//----- (004243F0) --------------------------------------------------------
void __thiscall CIOSocket::ReadCallback(CIOSocket *this, unsigned int dwTransferred)
{
  if ( dwTransferred )
  {
    *(_DWORD *)(*((_DWORD *)this + 23) + 8000) += dwTransferred;
    (*(void (__thiscall **)(CIOSocket *))(*(_DWORD *)this + 32))(this);
  }
  else
  {
    CIOSocket::WriteCallback(this);
  }
}

//----- (00424440) --------------------------------------------------------
void __thiscall CIOSocket::Read(CIOSocket *this, unsigned int dwLeft)
{
  CIOSocket *v3; // [esp+0h] [ebp-1Ch]
  CIOSocket *v4; // [esp+0h] [ebp-1Ch]
  DWORD v5; // [esp+4h] [ebp-18h]
  CIOBuffer *v6; // [esp+8h] [ebp-14h]
  DWORD NumberOfBytesRecvd; // [esp+Ch] [ebp-10h] BYREF
  struct _WSABUF Buffers; // [esp+10h] [ebp-Ch] BYREF
  DWORD Flags; // [esp+18h] [ebp-4h] BYREF

  this->m_pReadBuf->m_dwSize -= dwLeft;
  if ( this->m_pReadBuf->m_nRef == 1 )
  {
    memcpy_0(this->m_pReadBuf, &this->m_pReadBuf->m_buffer[this->m_pReadBuf->m_dwSize], dwLeft);
  }
  else
  {
    v6 = CIOBuffer::Alloc();
    memcpy(v6, &this->m_pReadBuf->m_buffer[this->m_pReadBuf->m_dwSize], dwLeft);
    CIOBuffer::Release(this->m_pReadBuf);
    this->m_pReadBuf = v6;
  }
  this->m_pReadBuf->m_dwSize = dwLeft;
  CIOObject::AddRef((int)this);
  Buffers.len = 8000 - this->m_pReadBuf->m_dwSize;
  Buffers.buf = &this->m_pReadBuf->m_buffer[this->m_pReadBuf->m_dwSize];
  Flags = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  if ( !WSARecv(v3->m_hSocket, &Buffers, 1u, &NumberOfBytesRecvd, &Flags, &v3->m_overlappedRead, 0)
    || GetLastError() == 997 )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)v3);
  }
  else
  {
    v5 = GetLastError();
    CIOCriticalSection::Leave((CIOCriticalSection *)v3);
    if ( v5 != 10038 && v5 != 10054 && v5 != 10053 && v5 != 10058 )
      LOG_ERR("CIOSocket::Read %x(%x) err = %d", v4->m_hSocket, v4, v5);
    CIOSocket::WriteCallback(v4);
    CIOObject::Release((int *)v4);
  }
}
// 424546: variable 'v3' is possibly undefined
// 4245A4: variable 'v4' is possibly undefined

//----- (004245E0) --------------------------------------------------------
void __thiscall CIOSocket::WriteCallback(CIOSocket *this, unsigned int dwTransferred)
{
  int *v2; // [esp+0h] [ebp-18h]
  int *v3; // [esp+0h] [ebp-18h]
  DWORD v4; // [esp+4h] [ebp-14h]
  struct _WSABUF Buffers; // [esp+8h] [ebp-10h] BYREF
  DWORD NumberOfBytesSent; // [esp+10h] [ebp-8h] BYREF
  CIOBuffer *v7; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  if ( dwTransferred == *(_DWORD *)(v2[24] + 8000) )
  {
    v2[26] -= *(_DWORD *)(v2[24] + 8000);
    v7 = (CIOBuffer *)v2[24];
    v2[24] = *(_DWORD *)(v2[24] + 8008);
    if ( v2[24] )
    {
      CIOObject::AddRef((int)v2);
      Buffers.len = *(_DWORD *)(v2[24] + 8000);
      Buffers.buf = (char *)v2[24];
      if ( !WSASend(v2[4], &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)(v2 + 18), 0) || GetLastError() == 997 )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)v2);
      }
      else
      {
        v4 = GetLastError();
        CIOCriticalSection::Leave((CIOCriticalSection *)v2);
        if ( v4 != 10038 && v4 != 10054 && v4 != 10053 && v4 != 10058 )
          LOG_ERR("CIOSocket::WriteCallback %x(%x) err=%d", v3[4], v3, v4);
        CIOObject::Release(v3);
      }
    }
    else
    {
      v2[25] = 0;
      CIOCriticalSection::Leave((CIOCriticalSection *)v2);
    }
    CIOBuffer::Free(v7);
  }
  else
  {
    LOG_ERR("different write count %x(%x) %d != %d", v2[4], v2, dwTransferred, *(_DWORD *)(v2[24] + 8000));
    CIOCriticalSection::Leave((CIOCriticalSection *)v2);
  }
}
// 4245F7: variable 'v2' is possibly undefined
// 424714: variable 'v3' is possibly undefined

//----- (00424760) --------------------------------------------------------
void __thiscall CIOSocket::Write(CIOSocket *this, CIOBuffer *pBuffer)
{
  int *v3; // [esp+0h] [ebp-14h]
  int *v4; // [esp+0h] [ebp-14h]
  DWORD v5; // [esp+4h] [ebp-10h]
  struct _WSABUF Buffers; // [esp+8h] [ebp-Ch] BYREF
  DWORD NumberOfBytesSent; // [esp+10h] [ebp-4h] BYREF

  if ( pBuffer->m_dwSize )
  {
    if ( pBuffer->m_dwSize > 0x1F40 )
      EBREAK((int)pBuffer);
    CIOCriticalSection::Enter((CIOCriticalSection *)this);
    v3[26] += pBuffer->m_dwSize;
    if ( v3[25] )
    {
      if ( v3[24] == v3[25] || pBuffer->m_dwSize + *(_DWORD *)(v3[25] + 8000) > 0x1F40 )
      {
        *(_DWORD *)(v3[25] + 8008) = pBuffer;
        v3[25] = (int)pBuffer;
        CIOCriticalSection::Leave((CIOCriticalSection *)v3);
      }
      else
      {
        memcpy((void *)(*(_DWORD *)(v3[25] + 8000) + v3[25]), pBuffer, pBuffer->m_dwSize);
        *(_DWORD *)(v3[25] + 8000) += pBuffer->m_dwSize;
        CIOCriticalSection::Leave((CIOCriticalSection *)v3);
        CIOBuffer::Free(pBuffer);
      }
    }
    else
    {
      v3[25] = (int)pBuffer;
      v3[24] = (int)pBuffer;
      CIOObject::AddRef((int)v3);
      Buffers.len = pBuffer->m_dwSize;
      Buffers.buf = (char *)pBuffer;
      if ( !WSASend(v3[4], &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)(v3 + 18), 0) || GetLastError() == 997 )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)v3);
      }
      else
      {
        v5 = GetLastError();
        CIOCriticalSection::Leave((CIOCriticalSection *)v3);
        if ( v5 != 10038 && v5 != 10054 && v5 != 10053 && v5 != 10058 )
          LOG_ERR("CIOSocket::Write %x(%x) err=%d", v4[4], v4, v5);
        CIOObject::Release(v4);
      }
    }
  }
  else
  {
    CIOBuffer::Free(pBuffer);
  }
}
// 4247A4: variable 'v3' is possibly undefined
// 424865: variable 'v4' is possibly undefined

//----- (00424950) --------------------------------------------------------
void __thiscall CIOServer::CIOServer(CIOServer *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B66D8;
  *((_DWORD *)this + 4) = -1;
  *((_DWORD *)this + 5) = 0;
}
// 4B66D8: using guessed type int (__stdcall *off_4B66D8)(int);

//----- (00424990) --------------------------------------------------------
CWin32FileIO *__thiscall sub_424990(CWin32FileIO *this, char a2)
{
  CAnger::~CAnger(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004249C0) --------------------------------------------------------
void __thiscall CAnger::~CAnger(CWin32FileIO *this)
{
  *(_DWORD *)this = &off_4B66D8;
  CIOServer::Close(this);
  std::locale::facet::~facet(this);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);
// 4B66D8: using guessed type int (__stdcall *off_4B66D8)(int);

//----- (004249F0) --------------------------------------------------------
CIOServer *__thiscall CIOServer::Close(CIOServer *this)
{
  CIOServer *result; // eax

  result = this;
  if ( *((_DWORD *)this + 4) != -1 )
  {
    closesocket(*((_DWORD *)this + 4));
    result = this;
    *((_DWORD *)this + 4) = -1;
  }
  if ( *((_DWORD *)this + 5) )
  {
    result = (CIOServer *)WSACloseEvent(*((HANDLE *)this + 5));
    *((_DWORD *)this + 5) = 0;
  }
  return result;
}

//----- (00424A40) --------------------------------------------------------
int __thiscall CIOObject::Release(CIOServer *this, int nPort)
{
  int v2; // eax
  int v4; // eax
  int v5; // eax
  struct sockaddr name; // [esp+4h] [ebp-14h] BYREF
  int v8; // [esp+14h] [ebp-4h]

  v8 = dword_4D9830;
  *((_DWORD *)this + 4) = socket(2, 1, 0);
  if ( *((_DWORD *)this + 4) == -1 )
  {
    v2 = WSAGetLastError();
    LOG_ERR("socket error %d", v2);
    return 0;
  }
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  *(_WORD *)name.sa_data = htons(nPort);
  if ( bind(*((_DWORD *)this + 4), &name, 16) )
  {
    v4 = WSAGetLastError();
    LOG_ERR("bind error %d", v4);
  }
  else if ( listen(*((_DWORD *)this + 4), 5) )
  {
    v5 = WSAGetLastError();
    LOG_ERR("listen error %d", v5);
  }
  else
  {
    *((_DWORD *)this + 5) = WSACreateEvent();
    WSAEventSelect(*((_DWORD *)this + 4), *((HANDLE *)this + 5), 8);
    if ( CIOObject::RegisterWait(this, *((void **)this + 5)) )
      return 1;
    LOG_ERR("RegisterWait error on port %d", nPort);
  }
  CIOServer::Close(this);
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00424B70) --------------------------------------------------------
BOOL __thiscall CIOServer::OnWaitCallback(CIOServer *this)
{
  WSAResetEvent(this->m_hAcceptEvent);
  return PostQueuedCompletionStatus(ExistingCompletionPort, 0, (ULONG_PTR)this, 0);
}

//----- (00424BA0) --------------------------------------------------------
int __thiscall CIOServer::Stop(CIOServer *this)
{
  SOCKET s; // [esp+4h] [ebp-4h]

  s = *((_DWORD *)this + 4);
  *((_DWORD *)this + 4) = -1;
  return closesocket(s);
}

//----- (00424BD0) --------------------------------------------------------
void __thiscall std::priority_queue<CIOSocket::CIOTimer>::top(CIOServer *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  int v4; // eax
  struct sockaddr addr; // [esp+4h] [ebp-20h] BYREF
  int v7; // [esp+14h] [ebp-10h]
  CIOSocket *v8; // [esp+18h] [ebp-Ch]
  int addrlen; // [esp+1Ch] [ebp-8h] BYREF
  SOCKET s; // [esp+20h] [ebp-4h]

  v7 = dword_4D9830;
  addrlen = 16;
  s = accept(this->m_hSocket, &addr, &addrlen);
  if ( s == -1 )
  {
    if ( WSAGetLastError() != 10035 && this->m_hSocket != -1 )
    {
      v4 = WSAGetLastError();
      LOG_ERR("accept error: %d", v4);
    }
  }
  else
  {
    v8 = this->CreateSocket(this, s, &addr);
    if ( v8 )
    {
      CIOSocket::Initialize(v8);
      CIOObject::Release((int *)v8);
    }
    else
    {
      closesocket(s);
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00424C80) --------------------------------------------------------
void __thiscall CIOSocket::Initialize(CIOSocket *this)
{
  char v1; // al
  char optval[4]; // [esp+4h] [ebp-4h] BYREF

  if ( CreateIoCompletionPort((HANDLE)this->m_hSocket, ExistingCompletionPort, (ULONG_PTR)this, 0) )
  {
    *(_DWORD *)optval = 0;
    setsockopt(this->m_hSocket, 0xFFFF, 4098, optval, 4);
    *(_DWORD *)optval = 0;
    setsockopt(this->m_hSocket, 0xFFFF, 4097, optval, 4);
    this->OnCreate(this);
  }
  else
  {
    v1 = GetLastError();
    ELOG("CreateIoCompletionPort: %d %x %x\n", v1);
    CIOSocket::WriteCallback(this);
  }
}

//----- (00424D30) --------------------------------------------------------
BOOL __thiscall sub_424D30(void *this)
{
  return sub_445B60((std::vector<CIOSocket::CIOTimer> *)this);
}

//----- (00424D50) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall sub_424D50(std::vector<CIOSocket::CIOTimer> *this)
{
  return std::vector<CIOSocket::CIOTimer>::front(this);
}

//----- (00424D70) --------------------------------------------------------
int *__thiscall std::priority_queue<CIOSocket::CIOTimer>::push(std::priority_queue<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Pred)
{
  int *v2; // eax
  int v4; // [esp-8h] [ebp-14h]
  char v6[4]; // [esp+4h] [ebp-8h] BYREF
  char v7[4]; // [esp+8h] [ebp-4h] BYREF

  sub_424E30((int)this, (int)_Pred);
  v4 = *(_DWORD *)sub_445B40(this, (int)v7);
  v2 = (int *)sub_430C20(this, (int)v6);
  return std::push_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(*v2, v4);
}

//----- (00424DC0) --------------------------------------------------------
int __thiscall std::priority_queue<CIOSocket::CIOTimer>::pop(std::priority_queue<CIOSocket::CIOTimer> *this)
{
  int *v1; // eax
  int v3; // [esp-8h] [ebp-14h]
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = *(_DWORD *)sub_445B40(this, (int)v6);
  v1 = (int *)sub_430C20(this, (int)v5);
  std::pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(*v1, v3);
  return std::vector<CIOSocket::CIOTimer>::pop_back(this);
}

//----- (00424E10) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall std::vector<CIOSocket::CIOTimer>::front(std::vector<CIOSocket::CIOTimer> *this)
{
  void *v1; // eax
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  v1 = (void *)sub_430C20(this, (int)v3);
  return (CIOSocket::CIOTimer *)sub_420010(v1);
}

//----- (00424E30) --------------------------------------------------------
char *__thiscall sub_424E30(int this, int a2)
{
  unsigned int v2; // esi
  char *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
  if ( v2 >= std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (char *)sub_424EF0((std::vector<CIOSocket::CIOTimer> *)this, (int)v6, *v4, a2);
  }
  else
  {
    result = std::vector<CIOSocket::CIOTimer>::_Xlen(
               (std::vector<CIOSocket::CIOTimer> *)this,
               *(char **)(this + 8),
               1,
               a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00424EA0) --------------------------------------------------------
int __thiscall std::vector<CIOSocket::CIOTimer>::pop_back(std::vector<CIOSocket::CIOTimer> *this)
{
  int result; // eax

  result = sub_445B60(this);
  if ( !(_BYTE)result )
  {
    std::vector<IPAddrMask>::_Destroy(
      this,
      (CIOSocket::CIOTimer *)(*((_DWORD *)this + 2) - 12),
      *((CIOSocket::CIOTimer **)this + 2));
    result = *((_DWORD *)this + 2) - 12;
    *((_DWORD *)this + 2) = result;
  }
  return result;
}

//----- (00424EF0) --------------------------------------------------------
int __thiscall sub_424EF0(std::vector<CIOSocket::CIOTimer> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CIOSocket::CIOTimer>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_431D50(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_424FA0((int)this, (CIOSocket::CIOTimer *)a3, 1u, (int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_446FA0(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (00424F70) --------------------------------------------------------
int __thiscall std::vector<IPAddrMask>::_Destroy(std::vector<CIOSocket::CIOTimer> *this, CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last)
{
  return std::_Destroy_range<IPAddrMask>(_First, _Last);
}

//----- (00424FA0) --------------------------------------------------------
void __thiscall sub_424FA0(int this, CIOSocket::CIOTimer *a2, unsigned int a3, int *a4)
{
  unsigned int v4; // esi
  char *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-24h]
  CIOSocket::CIOTimer *_Dest; // [esp+Ch] [ebp-1Ch]
  CMemory **_First; // [esp+10h] [ebp-18h]
  char *_Last; // [esp+14h] [ebp-14h]
  unsigned int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+18h] [ebp-10h]
  CIOSocket::CIOTimer _Val; // [esp+1Ch] [ebp-Ch] BYREF
  int v14; // [esp+34h] [ebp+Ch]

  _Val.m_dwTime = *a4;
  _Val.m_pObject = (CIOObject *)a4[1];
  _Val.m_nId = a4[2];
  v11 = std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this);
  if ( a3 )
  {
    v4 = sub_446800((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)this);
    if ( v4 - std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) >= a3 )
    {
      if ( v11 >= a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) / 12 >= a3 )
        {
          _Dest = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = sub_4474B0((int)&_Dest[-a3], (int)_Dest, _Dest);
          std::copy_backward<IPAddrMask *,IPAddrMask *>(a2, &_Dest[-a3], _Dest);
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(a2, &a2[a3], &_Val);
        }
        else
        {
          sub_4474B0((int)a2, *(_DWORD *)(this + 8), &a2[a3]);
          std::vector<CIOSocket::CIOTimer>::_Xlen(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(char **)(this + 8),
            a3 - (*(_DWORD *)(this + 8) - (int)a2) / 12,
            (int)&_Val);
          *(_DWORD *)(this + 8) += 12 * a3;
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)(*(_DWORD *)(this + 8) - 12 * a3),
            &_Val);
        }
      }
      else
      {
        if ( sub_446800((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)this)
           - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
          v12 = a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        _First = sub_446B40(v12);
        v5 = sub_4474B0(*(_DWORD *)(this + 4), (int)a2, _First);
        _Last = std::vector<CIOSocket::CIOTimer>::_Xlen((std::vector<CIOSocket::CIOTimer> *)this, v5, a3, (int)&_Val);
        sub_4474B0((int)a2, *(_DWORD *)(this + 8), _Last);
        v14 = a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          std::vector<IPAddrMask>::_Destroy(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 4),
            *(CIOSocket::CIOTimer **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12);
        }
        *(_DWORD *)(this + 12) = &_First[3 * v12];
        *(_DWORD *)(this + 8) = &_First[3 * v14];
        *(_DWORD *)(this + 4) = _First;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (00425280) --------------------------------------------------------
int __thiscall sub_425280(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) / 12;
}

//----- (004252A0) --------------------------------------------------------
int *__cdecl std::push_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2)
{
  int *result; // eax
  int *v3; // eax

  result = (int *)std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                    (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
                    (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
  if ( (_BYTE)result )
  {
    sub_4253C0();
    sub_4253C0();
    v3 = sub_4253A0(&a2);
    result = std::_Push_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
               a1,
               *v3);
  }
  return result;
}

//----- (004252F0) --------------------------------------------------------
int __cdecl std::pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2)
{
  int result; // eax

  result = sub_431D50(&a2, &a1);
  if ( result > 1 )
  {
    sub_4253C0();
    result = (int)std::_Pop_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
                    a1,
                    a2);
  }
  return result;
}

//----- (00425330) --------------------------------------------------------
void *__cdecl std::_Uninitialized_fill_n<IPAddrMask *,unsigned int,IPAddrMask,std::allocator<IPAddrMask>>(void *a1, int a2, int a3)
{
  unknown_libname_6(&a1, &a1);
  return sub_431E90(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00425370) --------------------------------------------------------
char *__cdecl std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, const CIOSocket::CIOTimer *_Val)
{
  char *result; // eax

  while ( _First != _Last )
  {
    *(_DWORD *)_First = *(_DWORD *)_Val;
    *((_DWORD *)_First + 1) = *((_DWORD *)_Val + 1);
    *((_DWORD *)_First + 2) = *((_DWORD *)_Val + 2);
    result = (char *)_First + 12;
    _First = (CIOSocket::CIOTimer *)((char *)_First + 12);
  }
  return result;
}

//----- (004253A0) --------------------------------------------------------
_DWORD *__thiscall sub_4253A0(_DWORD *this)
{
  *this -= 12;
  return this;
}

//----- (004253C0) --------------------------------------------------------
int sub_4253C0()
{
  return 0;
}

//----- (004253D0) --------------------------------------------------------
int *__cdecl std::_Push_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2)
{
  int *result; // eax
  int *v3; // eax
  int *_Hole; // [esp+Ch] [ebp-4h]

  result = (int *)sub_431D50(&a2, &a1);
  _Hole = result;
  if ( (int)result > 0 )
  {
    v3 = (int *)sub_420010(&a2);
    result = std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
               a1,
               (int)_Hole,
               0,
               *v3,
               v3[1],
               v3[2]);
  }
  return result;
}

//----- (00425440) --------------------------------------------------------
int *__cdecl std::_Pop_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2)
{
  std::vector<CIOSocket::CIOTimer>::iterator *v2; // eax
  int *v3; // eax
  int *v4; // eax
  CIOSocket::CIOTimer *v6; // [esp-18h] [ebp-30h]
  int v7; // [esp-14h] [ebp-2Ch]
  int v8; // [esp-10h] [ebp-28h]
  int v9; // [esp-Ch] [ebp-24h]
  std::vector<CIOSocket::CIOTimer>::iterator v10; // [esp+0h] [ebp-18h] BYREF
  std::vector<CIOSocket::CIOTimer>::iterator v11; // [esp+4h] [ebp-14h] BYREF
  std::vector<CIOSocket::CIOTimer>::iterator result; // [esp+8h] [ebp-10h] BYREF
  int v13; // [esp+Ch] [ebp-Ch]
  int v14; // [esp+10h] [ebp-8h]
  int v15; // [esp+14h] [ebp-4h]

  v2 = std::vector<IPAddrMask>::iterator::operator+((std::vector<CIOSocket::CIOTimer>::iterator *)&a2, &result, 1);
  v3 = (int *)sub_420010(v2);
  v13 = *v3;
  v14 = v3[1];
  v15 = v3[2];
  sub_4253C0();
  v7 = v13;
  v8 = v14;
  v9 = v15;
  v6 = std::vector<IPAddrMask>::iterator::operator+((std::vector<CIOSocket::CIOTimer>::iterator *)&a2, &v11, 1)->_Myptr;
  v4 = (int *)std::vector<IPAddrMask>::iterator::operator+((std::vector<CIOSocket::CIOTimer>::iterator *)&a2, &v10, 1);
  return std::_Pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
           a1,
           *v4,
           (int)v6,
           v7,
           v8,
           v9);
}

//----- (004254E0) --------------------------------------------------------
_DWORD *__cdecl std::_Copy_backward_opt<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    a2 -= 3;
    a3 -= 3;
    *a3 = *a2;
    a3[1] = a2[1];
    a3[2] = a2[2];
  }
  return a3;
}

//----- (00425520) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall std::vector<IPAddrMask>::iterator::operator+(std::vector<CIOSocket::CIOTimer>::iterator *this, std::vector<CIOSocket::CIOTimer>::iterator *result, int _Off)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *(_DWORD *)this;
  *(_DWORD *)result = *sub_425550(&v4, _Off);
  return result;
}

//----- (00425550) --------------------------------------------------------
_DWORD *__thiscall sub_425550(_DWORD *this, int a1)
{
  return std::_Destroy_range<CIOSocket::CIOTimer>(this, -a1);
}

//----- (00425570) --------------------------------------------------------
int *__cdecl std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // eax
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int *result; // eax
  char v14[4]; // [esp+4h] [ebp-14h] BYREF
  char v15[4]; // [esp+8h] [ebp-10h] BYREF
  char v16[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v17[4]; // [esp+10h] [ebp-8h] BYREF
  int i; // [esp+14h] [ebp-4h]

  for ( i = (a2 - 1) / 2; a3 < a2; i = (i - 1) / 2 )
  {
    v6 = sub_446FA0(&a1, v17, i);
    v7 = sub_420010(v6);
    if ( !sub_4256A0(v7, (int)&a4) )
      break;
    v8 = sub_446FA0(&a1, v15, i);
    v9 = (_DWORD *)sub_420010(v8);
    v10 = sub_446FA0(&a1, v16, a2);
    v11 = (_DWORD *)sub_420010(v10);
    *v11 = *v9;
    v11[1] = v9[1];
    v11[2] = v9[2];
    a2 = i;
  }
  v12 = sub_446FA0(&a1, v14, a2);
  result = (int *)sub_420010(v12);
  *result = a4;
  result[1] = a5;
  result[2] = a6;
  return result;
}

//----- (00425640) --------------------------------------------------------
int *__cdecl std::_Pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  _DWORD *v7; // eax
  int v8; // eax
  int v10; // [esp-10h] [ebp-14h]
  int v11; // [esp-Ch] [ebp-10h]
  int v12; // [esp-8h] [ebp-Ch]

  v6 = (_DWORD *)sub_420010(&a1);
  v7 = (_DWORD *)sub_420010(&a3);
  *v7 = *v6;
  v7[1] = v6[1];
  v7[2] = v6[2];
  v10 = a4;
  v11 = a5;
  v12 = a6;
  v8 = sub_431D50(&a2, &a1);
  return std::_Adjust_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
           a1,
           0,
           v8,
           v10,
           v11,
           v12);
}

//----- (004256A0) --------------------------------------------------------
BOOL __stdcall sub_4256A0(int a1, int a2)
{
  return sub_4256C0((_DWORD *)a1, (_DWORD *)a2);
}

//----- (004256C0) --------------------------------------------------------
BOOL __thiscall sub_4256C0(_DWORD *this, _DWORD *a2)
{
  return *this - *a2 > 0;
}

//----- (004256E0) --------------------------------------------------------
int *__cdecl std::_Adjust_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // esi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // esi
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  int v18; // [esp-4h] [ebp-28h]
  char v19[4]; // [esp+4h] [ebp-20h] BYREF
  char v20[4]; // [esp+8h] [ebp-1Ch] BYREF
  char v21[4]; // [esp+Ch] [ebp-18h] BYREF
  char v22[4]; // [esp+10h] [ebp-14h] BYREF
  char v23[4]; // [esp+14h] [ebp-10h] BYREF
  char v24[4]; // [esp+18h] [ebp-Ch] BYREF
  int i; // [esp+1Ch] [ebp-8h]
  int _Top; // [esp+20h] [ebp-4h]

  _Top = a2;
  for ( i = 2 * a2 + 2; i < a3; i = 2 * i + 2 )
  {
    v6 = sub_446FA0(&a1, v24, i - 1);
    v18 = sub_420010(v6);
    v7 = sub_446FA0(&a1, v23, i);
    v8 = sub_420010(v7);
    if ( sub_4256A0(v8, v18) )
      --i;
    v9 = sub_446FA0(&a1, v21, i);
    v10 = (_DWORD *)sub_420010(v9);
    v11 = sub_446FA0(&a1, v22, a2);
    v12 = (_DWORD *)sub_420010(v11);
    *v12 = *v10;
    v12[1] = v10[1];
    v12[2] = v10[2];
    a2 = i;
  }
  if ( i == a3 )
  {
    v13 = sub_446FA0(&a1, v19, a3 - 1);
    v14 = (_DWORD *)sub_420010(v13);
    v15 = sub_446FA0(&a1, v20, a2);
    v16 = (_DWORD *)sub_420010(v15);
    *v16 = *v14;
    v16[1] = v14[1];
    v16[2] = v14[2];
    a2 = a3 - 1;
  }
  return std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
           a1,
           a2,
           _Top,
           a4,
           a5,
           a6);
}

//----- (00425830) --------------------------------------------------------
void *__thiscall sub_425830(void *this)
{
  sub_425850((std::vector<CIOSocket::CIOTimer> *)this);
  return this;
}

//----- (00425850) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__thiscall sub_425850(std::vector<CIOSocket::CIOTimer> *this)
{
  std::vector<CIOSocket::CIOTimer> *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer> *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  sub_44F7C0(v3, (char)v2);
  std::vector<CIOSocket::CIOTimer>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00425880) --------------------------------------------------------
CIOObject *__thiscall sub_425880(CIOObject *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B677C;
  return this;
}
// 4B677C: using guessed type int (__stdcall *off_4B677C)(int);

//----- (004258A0) --------------------------------------------------------
Concurrency::details::_Condition_variable *__thiscall CIOBuffer::CSlot::CSlot(Concurrency::details::_Condition_variable *this)
{
  *(_DWORD *)this = 0;
  std::_Container_base::_Container_base((Concurrency::details::_Condition_variable *)((char *)this + 4));
  return this;
}
// 475860: using guessed type _DWORD __thiscall std::_Container_base::_Container_base(std::_Container_base *__hidden this);

//----- (004258D0) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__thiscall sub_4258D0(void *this)
{
  return sub_445B20((std::vector<CIOSocket::CIOTimer> *)this);
}

//----- (004258F0) --------------------------------------------------------
CItem *__thiscall CItem::CItem(CItem *this)
{
  CBase::CBase((int)this);
  *(_DWORD *)this = &off_4B6798;
  *((_DWORD *)this + 6) = 4;
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 0;
  *((_DWORD *)this + 11) = 0;
  *((_DWORD *)this + 12) = 0;
  *((_DWORD *)this + 13) = 0;
  *((_DWORD *)this + 14) = 0;
  *((_DWORD *)this + 16) = -1;
  *((_DWORD *)this + 15) = -1;
  *((_DWORD *)this + 17) = 0;
  *((_DWORD *)this + 18) = 0;
  *((_DWORD *)this + 19) = 0;
  *((_DWORD *)this + 20) = 0;
  *((_DWORD *)this + 21) = 0;
  *((_DWORD *)this + 22) = 0;
  return this;
}
// 4B6798: using guessed type int (__stdcall *off_4B6798)(int);

//----- (004259B0) --------------------------------------------------------
int __thiscall sub_4259B0(_DWORD *this, int a2)
{
  return this[13];
}

//----- (004259D0) --------------------------------------------------------
int __thiscall sub_4259D0(_DWORD *this, int a2, int a3)
{
  return this[13];
}

//----- (004259F0) --------------------------------------------------------
int __stdcall sub_4259F0(int a1, int a2, int a3, int a4)
{
  return 0;
}

//----- (00425A00) --------------------------------------------------------
void *__thiscall sub_425A00(void *this, char a2)
{
  sub_425A30((std::locale::facet *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00425A30) --------------------------------------------------------
void __thiscall sub_425A30(std::locale::facet *this)
{
  this->__vftable = (std::locale::facet_vtbl *)&off_4B6798;
  CBase::~CBase((CBase *)this);
}
// 4B6798: using guessed type int (__stdcall *off_4B6798)(int);

//----- (00425A50) --------------------------------------------------------
int __cdecl CItem::InsertInitItem(int a1)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v3);
  sub_445DF0(
    (int)dword_4E10B4,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItem::InsertInitItem() Duplicate InitItem. (Code:%d)", *(_DWORD *)(a1 + 64));
  return 0;
}
// 425A73: variable 'v1' is possibly undefined
// 4E10B4: using guessed type int dword_4E10B4[3];

//----- (00425AB0) --------------------------------------------------------
int __cdecl CItem::InsertPrefix(int a1)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v3);
  sub_445DF0(
    (int)dword_4E10C0,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItem::InsertPrefix() Duplicate Prefix. (Index:%d)", *(_DWORD *)(a1 + 32));
  return 0;
}
// 425AD3: variable 'v1' is possibly undefined
// 4E10C0: using guessed type int dword_4E10C0[3];

//----- (00425B10) --------------------------------------------------------
int __cdecl sub_425B10(int a1)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v3);
  sub_445DF0(
    (int)dword_4E10CC,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItem::InsertItemGroup() Duplicate ItemGroup. (Index:%d)", *(_DWORD *)(a1 + 32));
  return 0;
}
// 425B33: variable 'v1' is possibly undefined
// 4E10CC: using guessed type int dword_4E10CC[3];

//----- (00425B70) --------------------------------------------------------
void __cdecl CItem::ReloadItemGroup()
{
  CObjectDB config; // [esp+0h] [ebp-220h] BYREF
  int v1; // [esp+21Ch] [ebp-4h]

  v1 = dword_4D9830;
  if ( sub_44C960() )
  {
    sub_425C20(&config);
    CRWLock::WriteLock(&unk_4E10D8);
    CItem::ClearItemGroup();
    if ( CObjectDB::Open(&config, "Config\\ItemGroup.txt") )
    {
      CRWLock::WriteUnlock(&unk_4E10D8);
      LOG_NORMAL("<ItemGroup> reloading is completed.");
    }
    else
    {
      CItem::ClearItemGroup();
      CRWLock::WriteUnlock(&unk_4E10D8);
      LOG_ERR("<ItemGroup> reloading is failed.");
    }
    sub_425C40(&config);
  }
  else
  {
    LOG_NORMAL("invalid server state to reload <ItemGroup>. Try later.");
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00425C20) --------------------------------------------------------
CConfig *__thiscall sub_425C20(CConfig *this)
{
  CConfig::CConfig(this);
  return this;
}

//----- (00425C40) --------------------------------------------------------
void __thiscall sub_425C40(CConfig *this)
{
  CConfig::~CConfig(this);
}

//----- (00425C60) --------------------------------------------------------
int __cdecl sub_425C60(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v4; // [esp+4h] [ebp-4h] BYREF

  sub_44AE20(dword_4E10B4, &v4, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10B4, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v4,
         v1) )
  {
    result = *(_DWORD *)(sub_420250(&v4) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4E10B4: using guessed type int dword_4E10B4[3];

//----- (00425CB0) --------------------------------------------------------
int __cdecl sub_425CB0(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v4; // [esp+4h] [ebp-4h] BYREF

  sub_44AE20(dword_4E10C0, &v4, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10C0, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v4,
         v1) )
  {
    result = *(_DWORD *)(sub_420250(&v4) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4E10C0: using guessed type int dword_4E10C0[3];

//----- (00425D00) --------------------------------------------------------
CItem *__cdecl CItem::NewItem(CInitItem *pInit)
{
  CItem *result; // eax
  CMemory **v2; // eax
  CItemTransform *v3; // [esp+0h] [ebp-54h]
  CItemMoney *v4; // [esp+4h] [ebp-50h]
  CItemDefense *v5; // [esp+8h] [ebp-4Ch]
  CItemStandard *v6; // [esp+Ch] [ebp-48h]
  CItemMask *v7; // [esp+10h] [ebp-44h]
  int v8; // [esp+14h] [ebp-40h]
  CItemWeapon *v9; // [esp+18h] [ebp-3Ch]
  CItemGeneral *v10; // [esp+1Ch] [ebp-38h]
  CItem *v11; // [esp+20h] [ebp-34h]
  CItemOrnament *v12; // [esp+24h] [ebp-30h]
  CMemory **v13; // [esp+2Ch] [ebp-28h]
  CMemory **v14; // [esp+30h] [ebp-24h]
  CMemory **v15; // [esp+38h] [ebp-1Ch]
  CMemory **v16; // [esp+3Ch] [ebp-18h]
  CMemory **v17; // [esp+40h] [ebp-14h]
  CItemGeneral *v18; // [esp+44h] [ebp-10h]
  CMemory **v19; // [esp+48h] [ebp-Ch]
  CMemory **v20; // [esp+4Ch] [ebp-8h]
  CItem *pItem; // [esp+50h] [ebp-4h]

  if ( (pInit->m_dwCountry & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0 )
    return 0;
  switch ( pInit->m_nClass )
  {
    case 0:
      v17 = operator new(0x84u);
      if ( v17 )
        v9 = CItemWeapon::CItemWeapon((CItemWeapon *)v17, pInit);
      else
        v9 = 0;
      pItem = v9;
      goto LABEL_44;
    case 1:
      v8 = pInit->m_nSubClass;
      if ( v8 == 20 )
      {
        v16 = operator new(0x7Cu);
        if ( v16 )
          v7 = CItemMask::CItemMask((CItemMask *)v16, (int)pInit);
        else
          v7 = 0;
        pItem = v7;
      }
      else if ( v8 == 22 )
      {
        v15 = operator new(0x84u);
        if ( v15 )
          v6 = CItemStandard::CItemStandard((CItemStandard *)v15, (int)pInit);
        else
          v6 = 0;
        pItem = v6;
      }
      else
      {
        v2 = operator new(0x7Cu);
        if ( v2 )
          v5 = CItemDefense::CItemDefense((CItemDefense *)v2, (int)pInit);
        else
          v5 = 0;
        pItem = v5;
      }
      goto LABEL_44;
    case 2:
      v20 = operator new(0x5Cu);
      if ( v20 )
        v12 = CItemOrnament::CItemOrnament((CItemOrnament *)v20, (int)pInit);
      else
        v12 = 0;
      pItem = v12;
      goto LABEL_44;
    case 3:
      v19 = operator new(0x5Cu);
      if ( v19 )
        v11 = (CItem *)sub_42CF10(v19, (int)pInit);
      else
        v11 = 0;
      pItem = v11;
      goto LABEL_44;
    case 4:
      v18 = (CItemGeneral *)operator new(0x5Cu);
      if ( v18 )
        v10 = CItemGeneral::CItemGeneral(v18, pInit);
      else
        v10 = 0;
      pItem = v10;
      goto LABEL_44;
    case 5:
      v14 = operator new(0x5Cu);
      if ( v14 )
        v4 = CItemMoney::CItemMoney((CItemMoney *)v14, pInit);
      else
        v4 = 0;
      pItem = v4;
      goto LABEL_44;
    case 6:
      v13 = operator new(0x6Cu);
      if ( v13 )
        v3 = CItemTransform::CItemTransform((CItemTransform *)v13, pInit);
      else
        v3 = 0;
      pItem = v3;
LABEL_44:
      result = pItem;
      break;
    default:
      LOG_ERR("CItem::NewItem() Invalid Item Class(%d).", pInit->m_nClass);
      result = 0;
      break;
  }
  return result;
}

//----- (00425F80) --------------------------------------------------------
CItemMask *__thiscall CItemMask::CItemMask(CItemMask *this, int a2)
{
  CItemDefense::CItemDefense(this, a2);
  this->__vftable = (CItemMask_vtbl *)&off_4B69E0;
  return this;
}
// 4B69E0: using guessed type int (__stdcall *off_4B69E0)(int);

//----- (00425FB0) --------------------------------------------------------
BOOL __thiscall CItemDefense::IsBroken(CItemDefense *this)
{
  return this->m_nCurEnd <= 0;
}

//----- (00425FD0) --------------------------------------------------------
CItemMask *__thiscall CItemMask::`scalar deleting destructor'(CItemMask *this, char a2)
{
  sub_426040(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00426000) --------------------------------------------------------
CItemStandard *__thiscall CItemStandard::CItemStandard(CItemStandard *this, int a2)
{
  CItemDefense::CItemDefense(this, a2);
  this->__vftable = (CItemStandard_vtbl *)&off_4B6AC0;
  this->m_bSpecApplied = 0;
  this->m_dwPutOffTick = 0;
  return this;
}
// 4B6AC0: using guessed type int (__stdcall *off_4B6AC0)(int);

//----- (00426040) --------------------------------------------------------
void __thiscall sub_426040(void *this)
{
  sub_4275C0((std::locale::facet *)this);
}

//----- (00426060) --------------------------------------------------------
CItem *__cdecl CItem::CreateItem(int nPID, char **ppInfo)
{
  CItem *result; // eax
  CInitItem *pInit; // [esp+0h] [ebp-Ch]
  char nIndex[4]; // [esp+4h] [ebp-8h] BYREF
  CItem *pItem; // [esp+8h] [ebp-4h]

  *(_DWORD *)nIndex = 0;
  *ppInfo = (char *)GetNumeric<short>(*ppInfo, nIndex);
  pInit = (CInitItem *)sub_425C60(*(int *)nIndex);
  if ( pInit )
  {
    pItem = 0;
    pItem = CItem::NewItem(pInit);
    if ( pItem )
      pItem->Init(pItem, nPID, ppInfo);
    else
      *ppInfo += 24;
    result = pItem;
  }
  else
  {
    LOG_ERR("CItem::CreateItem() Invalid index(%d). PID(%d)", *(_DWORD *)nIndex, nPID);
    *ppInfo += 24;
    result = 0;
  }
  return result;
}

//----- (00426110) --------------------------------------------------------
CItem *__cdecl CItem::CreateItem(int nIndex, int nPrefix, int nNum, int nVer)
{
  CInitItem *pInit; // [esp+0h] [ebp-8h]
  CItem *pItem; // [esp+4h] [ebp-4h]

  if ( nNum <= 0 )
    return 0;
  pItem = 0;
  pInit = (CInitItem *)sub_425C60(nIndex);
  if ( pInit )
  {
    pItem = CItem::NewItem(pInit);
    if ( pItem )
      pItem->Init_(pItem, nPrefix, nNum, nVer);
  }
  return pItem;
}

//----- (00426170) --------------------------------------------------------
CItem *__cdecl CItem::CreateCheatItem(int nIndex, int nPrefix, int nNum, int nVer)
{
  CInitItem *pInit; // [esp+0h] [ebp-8h]
  CItem *pItem; // [esp+4h] [ebp-4h]

  if ( nNum <= 0 )
    return 0;
  pItem = 0;
  pInit = (CInitItem *)sub_425C60(nIndex);
  if ( pInit )
  {
    pItem = CItem::NewItem(pInit);
    if ( pItem )
    {
      pItem->Init_(pItem, nPrefix, nNum, nVer);
      if ( (dword_4E1174[0] & 2) == 0 )
        CItem::AddState(pItem, 8);
    }
  }
  return pItem;
}

//----- (004261F0) --------------------------------------------------------
void __thiscall CItem::AddState(CItem *this, int dwState)
{
  this->m_dwInfo |= dwState;
}

//----- (00426210) --------------------------------------------------------
CItem *__cdecl CItem::CreateOwnItem(int nIndex, int nPrefix, int nNum, int nVer)
{
  CInitItem *pInit; // [esp+0h] [ebp-8h]
  CItem *pItem; // [esp+4h] [ebp-4h]

  if ( nNum <= 0 )
    return 0;
  pItem = 0;
  pInit = (CInitItem *)sub_425C60(nIndex);
  if ( pInit )
  {
    pItem = CItem::NewItem(pInit);
    if ( pItem )
    {
      pItem->Init_(pItem, nPrefix, nNum, nVer);
      if ( (dword_4E1174[0] & 2) == 0 )
        CItem::AddState(pItem, 128);
    }
  }
  return pItem;
}

//----- (00426290) --------------------------------------------------------
CItem *__cdecl CItem::CreateDropItem(int nItemGroup, int dwDropItemMask)
{
  int v2; // eax
  int v4; // eax
  char v5[4]; // [esp+0h] [ebp-1Ch] BYREF
  CInitItem *pInit; // [esp+4h] [ebp-18h]
  int nIndex; // [esp+8h] [ebp-14h] BYREF
  int nNum; // [esp+Ch] [ebp-10h] BYREF
  CItem *pItem; // [esp+10h] [ebp-Ch]
  int nPrefix; // [esp+14h] [ebp-8h] BYREF
  char it[4]; // [esp+18h] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E10D8);
  sub_44AE20(dword_4E10CC, it, &nItemGroup);
  v2 = sub_430C20(dword_4E10CC, (int)v5);
  if ( (unsigned __int8)unknown_libname_8(v2) )
  {
    CRWLock::ReadUnlock(&unk_4E10D8);
    return 0;
  }
  nIndex = 0;
  nPrefix = 0;
  nNum = 0;
  v4 = sub_420250(it);
  CItemGroup::GetItemInfo(*(CItemGroup **)(v4 + 4), &nIndex, &nPrefix, &nNum);
  CRWLock::ReadUnlock(&unk_4E10D8);
  if ( nNum <= 0 )
    return 0;
  pItem = 0;
  pInit = (CInitItem *)sub_425C60(nIndex);
  if ( pInit )
  {
    if ( (dwDropItemMask & pInit->m_dwCode) != dwDropItemMask )
      return 0;
    pItem = CItem::NewItem(pInit);
    if ( pItem )
      pItem->Init_(pItem, nPrefix, nNum, 0);
  }
  return pItem;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E10CC: using guessed type int dword_4E10CC[3];

//----- (00426390) --------------------------------------------------------
CItem *__cdecl CItem::CreateQuestItem(int nItemGroup)
{
  int v1; // eax
  CItem *result; // eax
  int v3; // eax
  char v4[4]; // [esp+0h] [ebp-20h] BYREF
  CInitItem *pInit; // [esp+4h] [ebp-1Ch]
  int nIndex; // [esp+8h] [ebp-18h] BYREF
  int nNum; // [esp+Ch] [ebp-14h] BYREF
  CGroup *pGroup; // [esp+10h] [ebp-10h]
  CItem *pItem; // [esp+14h] [ebp-Ch]
  int nPrefix; // [esp+18h] [ebp-8h] BYREF
  char it[4]; // [esp+1Ch] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E10D8);
  sub_44AE20(dword_4E10CC, it, &nItemGroup);
  v1 = sub_430C20(dword_4E10CC, (int)v4);
  if ( (unsigned __int8)unknown_libname_8(v1) )
  {
    CRWLock::ReadUnlock(&unk_4E10D8);
    result = 0;
  }
  else
  {
    nIndex = 0;
    nPrefix = 0;
    nNum = 0;
    v3 = sub_420250(it);
    pGroup = CItemGroup::GetFirstGroup(*(CItemGroup **)(v3 + 4));
    if ( pGroup )
      CGroup::GetItemInfo(pGroup, &nIndex, &nPrefix, &nNum);
    CRWLock::ReadUnlock(&unk_4E10D8);
    if ( nNum > 0 )
    {
      pItem = 0;
      pInit = (CInitItem *)sub_425C60(nIndex);
      if ( pInit )
      {
        pItem = CItem::NewItem(pInit);
        if ( pItem )
          pItem->Init_(pItem, nPrefix, nNum, 0);
      }
      result = pItem;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E10CC: using guessed type int dword_4E10CC[3];

//----- (00426490) --------------------------------------------------------
void __cdecl CItem::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  void (__thiscall ***v2)(_DWORD, int); // [esp+Ch] [ebp-24h]
  char v3[4]; // [esp+10h] [ebp-20h] BYREF
  char v4[4]; // [esp+14h] [ebp-1Ch] BYREF
  void (__thiscall ***v5)(_DWORD, int); // [esp+18h] [ebp-18h]
  void (__thiscall ***v6)(_DWORD, int); // [esp+1Ch] [ebp-14h]
  char v7[4]; // [esp+20h] [ebp-10h] BYREF
  char v8[4]; // [esp+24h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it_; // [esp+28h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+2Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10B4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10B4, (int)v7);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v5 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it) + 4);
    v6 = v5;
    if ( v5 )
      (**v6)(v6, 1);
    sub_446090((int *)&it, v8, 0);
  }
  sub_42F590(dword_4E10B4);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10C0,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it_);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10C0, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it_,
            v1) )
      break;
    v2 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it_) + 4);
    if ( v2 )
      (**v2)(v2, 1);
    sub_446090((int *)&it_, v4, 0);
  }
  sub_42F5F0(dword_4E10C0);
  CRWLock::WriteLock(&unk_4E10D8);
  CItem::ClearItemGroup();
  CRWLock::WriteUnlock(&unk_4E10D8);
  CGoods::ClearGoods();
}
// 4E10B4: using guessed type int dword_4E10B4[3];
// 4E10C0: using guessed type int dword_4E10C0[3];

//----- (004265B0) --------------------------------------------------------
void __cdecl CItem::ClearItemGroup()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v1)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v2[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v3[4]; // [esp+10h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-4h] BYREF

  CItemGroup::ClearGroup();
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10CC,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10CC, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it) + 4);
    if ( v1 )
      (**v1)(v1, 1);
    sub_446090((int *)&it, v3, 0);
  }
  sub_42F650(dword_4E10CC);
}
// 4E10CC: using guessed type int dword_4E10CC[3];

//----- (00426640) --------------------------------------------------------
void __thiscall CItem::OnTimer(CItem *this, int nId)
{
  CIOBuffer *pBuffer; // [esp+8h] [ebp-14h]
  tagPOINT ptT; // [esp+Ch] [ebp-10h] BYREF
  CSMap *pMap; // [esp+14h] [ebp-8h]
  unsigned int dwTick; // [esp+18h] [ebp-4h]

  if ( nId )
  {
    if ( nId == 1 )
    {
      this->m_bParty = 0;
      this->m_nKeyID = 0;
      this->m_nFrom = 0;
    }
  }
  else
  {
    dwTick = this->m_dwTick;
    pMap = this->m_pMap;
    if ( dwTick && !CBase::IsDeleted(this) )
    {
      if ( GetTickCount() < dwTick )
      {
        CIOObject::AddTimer(this, 60000u, 0);   // 60 seconds to remove drop from floor? -HighGamer
      }
      else
      {
        ptT.x = this->m_ptPixel.x >> 5;
        ptT.y = this->m_ptPixel.y >> 5;
        if ( pMap && CSMap::RemoveFromMap(pMap, this, &ptT) )
        {
          pBuffer = (CIOBuffer *)MakePacket(S2C_REMOVEITEM, "d", this->m_nId);
          CSMap::SendPacketInRect(pMap, &ptT, pBuffer, 25);
          CIOBuffer::Release(pBuffer);
          this->Erase(this, 11);
        }
      }
    }
  }
}

//----- (00426750) --------------------------------------------------------
void __thiscall CItem::PutInfo(CItem *this, char *ppInfo, int nNum)
{
  int v3; // [esp+0h] [ebp-8h]

  if ( !nNum )
    nNum = this->m_nNum;
  *(_DWORD *)ppInfo = PutNumeric<int>(*(char **)ppInfo, this->m_nIID);
  *(_DWORD *)ppInfo = PutNumeric<short>(*(_WORD **)ppInfo, this->m_pInit->m_nIndex);
  if ( this->m_pPrefix )
    v3 = this->m_pPrefix->m_nPrefix;
  else
    LOBYTE(v3) = 0;
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, v3);
  *(_DWORD *)ppInfo = PutNumeric<int>(*(char **)ppInfo, this->m_dwInfo);
  *(_DWORD *)ppInfo = PutNumeric<int>(*(char **)ppInfo, nNum);
}

//----- (00426810) --------------------------------------------------------
void __thiscall CItem::Init(CItem *this, int nPID, char *ppInfo)
{
  int nPrefix; // [esp+4h] [ebp-4h] BYREF

  this->m_nPID = nPID;
  nPrefix = 0;
  *(_DWORD *)ppInfo = GetNumeric<int>(*(_DWORD **)ppInfo, &this->m_nIID);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &nPrefix);
  *(_DWORD *)ppInfo = GetNumeric<int>(*(_DWORD **)ppInfo, &this->m_dwInfo);
  *(_DWORD *)ppInfo = GetNumeric<int>(*(_DWORD **)ppInfo, &this->m_nNum);
  *(_DWORD *)ppInfo += 2;
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nVer);
  *(_DWORD *)ppInfo += 8;
  this->m_pPrefix = (CPrefix *)sub_425CB0(nPrefix);
}

//----- (004268E0) --------------------------------------------------------
void __thiscall CItem::Init(CItem *this, int nPrefix, int nNum, int nVer)
{
  int v4; // [esp+0h] [ebp-Ch]

  if ( !this->m_pInit->m_bPlural )
    nNum = 1;
  this->m_nNum = nNum;
  if ( stru_4E35B4.m_nRef == 2 && this->m_pInit->m_bPay )
  {
    if ( nVer < 0 )
      v4 = dword_4E1164;
    else
      v4 = nVer;
    this->m_nVer = v4;
  }
}
// 4E1164: using guessed type int dword_4E1164;

//----- (00426950) --------------------------------------------------------
void __thiscall CItem::SendDelete(CItem *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer)
{
  CPlayer::Write((CPlayer *)pPlayer, S2C_REMOVEITEM, "d", this->m_nId);
}

//----- (00426980) --------------------------------------------------------
void __thiscall CItem::SendCreate(CItem *this, CBase *pPlayer, CIOBuffer *pCreateBuffer)
{
  CPlayer::Write(
    (CPlayer *)pPlayer,
    S2C_CREATEITEM,
    "wdddd",
    this->m_pInit->m_nIndex,
    this->m_nId,
    this->m_ptPixel.x,
    this->m_ptPixel.y,
    this->m_nNum);
}

//----- (004269D0) --------------------------------------------------------
int __thiscall CItem::Trash(CItem *this, CPlayer *pPlayer, int nLogType)
{
  CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
  CDBSocket::Write(
    S2D_DELETEITEM,
    "ddwdbddd",
    this->m_nIID,
    this->m_nPID,
    this->m_pInit->m_nIndex,
    this->m_nNum,
    nLogType,
    (unsigned __int8)this->m_nVer << 8,
    0,
    0);
  CBase::Delete(this);
  return 1;
}

//----- (00426A60) --------------------------------------------------------
int __thiscall CItem::Erase(CItem *this, int nLogType)
{
  if ( this->m_nIID )
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      nLogType,
      (unsigned __int8)this->m_nVer << 8,
      0,
      0);
  return CBase::Delete(this);
}

//----- (00426AD0) --------------------------------------------------------
void __thiscall CItem::Insert(CItem *this, int nPID, int nIID)
{
  this->m_nPID = nPID;
  this->m_nIID = nIID;
  CDBSocket::Write(
    S2D_INSERTITEM,
    "dwbbdbbdb",
    this->m_nIID,
    this->m_pInit->m_nIndex,
    0,
    this->m_dwInfo,
    this->m_nNum,
    0,
    this->m_nVer,
    this->m_nPID,
    2);
}

//----- (00426B40) --------------------------------------------------------
void __thiscall CItem::Insert(CItem *this, CPlayer *pPlayer, int nLogType, int bOldItem)
{
  int nOldPID; // [esp+4h] [ebp-4h]

  nOldPID = this->m_nPID;
  this->m_nPID = pPlayer->m_nPID;
  if ( nLogType == 10 )
    this->m_dwInfo &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, pPlayer, S2C_INSERTITEM);
  if ( bOldItem )
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      nOldPID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      nLogType,
      this->m_nNum);
  else
    CDBSocket::Write(
      S2D_INSERTITEM,
      "dwbddbbdb",
      this->m_nIID,
      this->m_pInit->m_nIndex,
      0,
      this->m_dwInfo,
      this->m_nNum,
      0,
      this->m_nVer,
      this->m_nPID,
      nLogType);
}

//----- (00426C10) --------------------------------------------------------
int __thiscall CItem::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  if ( nNum + this->m_nNum > 0 )
    return this->m_nNum;
  CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, 0, nLogType);
  if ( nLogType == 50 )
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      pPlayer->m_nPID,
      0,
      this->m_pInit->m_nIndex,
      50,
      this->m_nNum);
  else
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      nLogType,
      (unsigned __int8)this->m_nVer << 8,
      0,
      0);
  this->m_nNum = 0;
  CBase::Delete(this);
  return 0;
}

//----- (00426D00) --------------------------------------------------------
void __thiscall CItem::Drop(CItem *this, CChar *pChar, const tagPOINT *ptP, const tagPOINT *ptT, int bDropAll, int bParty, int nKeyID)
{
  int v7; // edx
  tagPOINT ptTCenter_; // [esp+4h] [ebp-20h] BYREF
  CIOBuffer *pBuffer__; // [esp+Ch] [ebp-18h]
  tagPOINT ptTCenter; // [esp+10h] [ebp-14h] BYREF
  CIOBuffer *pBuffer_; // [esp+18h] [ebp-Ch]
  CPlayer *pPlayer; // [esp+1Ch] [ebp-8h]
  CIOBuffer *pBuffer; // [esp+20h] [ebp-4h]

  this->m_pMap = pChar->m_pMap;
  v7 = ptP->y;
  this->m_ptPixel.x = ptP->x;
  this->m_ptPixel.y = v7;
  this->m_dwTick = GetTickCount() + 180000;
  CIOObject::AddTimer(this, 60000u, 0);         // Player drop is about 60 seconds until disappear? -HighGamer
  if ( pChar->IsPlayer(pChar) )
  {
    pPlayer = (CPlayer *)pChar;
    if ( bDropAll )
    {
      CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, 11);
      CDBSocket::Write(
        S2D_UPDATEITEMPID,
        "dddwbd",
        this->m_nIID,
        this->m_nPID,
        0,
        this->m_pInit->m_nIndex,
        11,
        this->m_nNum);
    }
    else
    {
      this->m_nPID = pPlayer->m_nPID;
    }
  }
  else
  {                                             // Monster Drop is about 120 seconds until disappear? -HighGamer
    this->m_bParty = bParty;
    this->m_nKeyID = nKeyID;
    CIOObject::AddTimer(this, 120000u, 1);
  }
  if ( (this->m_pInit->m_nIndex >= 665 && this->m_pInit->m_nIndex <= 668
     || this->m_pInit->m_nIndex >= 802 && this->m_pInit->m_nIndex <= 825
     || this->m_pInit->m_nIndex >= 856 && this->m_pInit->m_nIndex <= 867
     || this->m_pInit->m_nIndex == 688)
    && abs(this->m_ptPixel.x - 57367) < 1000
    && abs(this->m_ptPixel.y - 9077) < 1001 )
  {
    ptTCenter.x = 1792;
    ptTCenter.y = 284;
    pBuffer_ = (CIOBuffer *)MakePacket(S2C_MESSAGEV, "bsw", 113, pChar->m_szName, this->m_pInit->m_nIndex);
    CSMap::SendPacketInRect(this->m_pMap, &ptTCenter, pBuffer_, 32);
    CIOBuffer::Release(pBuffer_);
  }
  if ( (this->m_pInit->m_nIndex >= 673 && this->m_pInit->m_nIndex <= 687
     || this->m_pInit->m_nIndex >= 826 && this->m_pInit->m_nIndex <= 855)
    && abs(this->m_ptPixel.x - 20284) < 1160
    && abs(this->m_ptPixel.y - 67480) < 1212 )
  {
    ptTCenter_.x = 634;
    ptTCenter_.y = 2109;
    pBuffer__ = (CIOBuffer *)MakePacket(S2C_MESSAGEV, "bsw", 113, pChar->m_szName, this->m_pInit->m_nIndex);
    CSMap::SendPacketInRect(this->m_pMap, &ptTCenter_, pBuffer__, 38);
    CIOBuffer::Release(pBuffer__);
  }
  pBuffer = (CIOBuffer *)MakePacket(
                           S2C_CREATEITEM,
                           "wdddd",
                           this->m_pInit->m_nIndex,
                           this->m_nId,
                           ptP->x,
                           ptP->y,
                           this->m_nNum);
  CSMap::SendPacketInRect(pChar->m_pMap, ptT, pBuffer, 25);
  CIOBuffer::Release(pBuffer);
}

//----- (00427010) --------------------------------------------------------
CItem *__thiscall CItem::Trade(CItem *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  if ( this->m_nNum != nNum )
    EBREAK();
  this->m_nPID = 0;
  this->m_dwInfo |= 4u;
  CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
  CDBSocket::Write(
    S2D_UPDATEITEMPID,
    "dddwbd",
    this->m_nIID,
    pPlayer->m_nPID,
    this->m_nPID,
    this->m_pInit->m_nIndex,
    nLogType,
    this->m_nNum);
  return this;
}

//----- (004270B0) --------------------------------------------------------
BOOL __thiscall CItem::CanSell(CItem *this, int nNum)
{
  BOOL result; // eax
  BOOL v3; // [esp+0h] [ebp-Ch]
  BOOL v4; // [esp+4h] [ebp-8h]

  if ( (dword_4E1174[0] & 2) != 0 )
  {
    v4 = this->m_pInit->m_nSell > 0 && this->m_nNum >= nNum;
    result = v4;
  }
  else
  {
    v3 = !CItem::IsState(this, 0x88) && this->m_pInit->m_nSell > 0 && this->m_nNum >= nNum;
    result = v3;
  }
  return result;
}

//----- (00427130) --------------------------------------------------------
unsigned int __thiscall CItem::IsState(CItem *this, int dwState)
{
  return dwState & this->m_dwInfo;
}

//----- (00427150) --------------------------------------------------------
BOOL __thiscall CItem::CanTrade(CItem *this, int nNum, CPlayer *pPlayer, CPlayer *pOther)
{
  BOOL result; // eax
  BOOL v5; // [esp+0h] [ebp-Ch]
  BOOL v6; // [esp+4h] [ebp-8h]

  if ( (dword_4E1174[0] & 2) != 0 )
    return this->m_nNum >= nNum;
  if ( stru_4E35B4.m_nRef == 2 && this->m_pInit->m_bPay )
  {
    v6 = pPlayer->m_nLevel > dword_4D6068[this->m_nVer] && !CItem::IsState(this, 0x88) && this->m_nNum >= nNum;
    result = v6;
  }
  else
  {
    v5 = !CItem::IsState(this, 0x88) && this->m_nNum >= nNum;
    result = v5;
  }
  return result;
}

//----- (00427210) --------------------------------------------------------
BOOL __thiscall CItem::CanDrop(_DWORD *this, int a2, int a3)
{
  BOOL result; // eax
  BOOL v4; // [esp+0h] [ebp-Ch]
  BOOL v5; // [esp+4h] [ebp-8h]

  if ( (dword_4E1174[0] & 2) != 0 )
    return this[13] >= a2;
  if ( stru_4E35B4.m_nRef == 2 && *(_DWORD *)(this[10] + 156) )
  {
    v5 = *(_DWORD *)(a3 + 60) > dword_4D6068[this[21]] && !CItem::IsState((CItem *)this, 136) && this[13] >= a2;
    result = v5;
  }
  else
  {
    v4 = !CItem::IsState((CItem *)this, 136) && this[13] >= a2;
    result = v4;
  }
  return result;
}

//----- (004272D0) --------------------------------------------------------
int __thiscall CItem::StorageOut(CItem *this, CPlayer *pPlayer, int nNum, int nIndex, int *nStorNum)
{
  this->m_dwInfo &= 0xFFFFFFEF;
  CItem::SendItemInfo(this, pPlayer, S2C_INSERT_SITEM);
  CPlayer::_StorageOut(pPlayer, this->m_nIID, 0);
  CDBSocket::Write(S2D_PUTOUTSTORAGE, "ddbd", this->m_nIID, this->m_nPID, 0, this->m_nNum);
  return 1;
}

//----- (00427340) --------------------------------------------------------
void __thiscall CItem::ForcedStorageIn(CItem *this, int nLogType, int nUID, char *szName, int nPayCode)
{
  int n_mNewIDD; // eax
  int m_nIndex; // [esp-24h] [ebp-2Ch]
  unsigned int m_dwInfo; // [esp-1Ch] [ebp-24h]
  int m_nNum; // [esp-18h] [ebp-20h]
  int m_nVer; // [esp-10h] [ebp-18h]
  char *szName_; // [esp+0h] [ebp-8h]

  if ( szName )
    szName_ = szName;
  else
    szName_ = &DefaultNullString;
  m_nVer = this->m_nVer;
  m_nNum = this->m_nNum;
  m_dwInfo = this->m_dwInfo;
  m_nIndex = this->m_pInit->m_nIndex;
  n_mNewIDD = CItem::NewIID();
  CDBSocket::Write(
    S2D_FORCEDINSTORAGE,
    "bdwbddbbdds",
    nLogType,
    n_mNewIDD,
    m_nIndex,
    0,
    m_dwInfo,
    m_nNum,
    0,
    m_nVer,
    nUID,
    nPayCode,
    szName_);
}

//----- (004273B0) --------------------------------------------------------
int __cdecl CItem::NewIID()
{
  int v1; // [esp+0h] [ebp-4h]
                                                // InterlockedIncrement is a simple std::mutex, so all functions change this value together 1 by 1. -HighGamer
  v1 = InterlockedIncrement(&dword_4E10B0);
  if ( !v1 )
    v1 = InterlockedIncrement(&dword_4E10B0);
  return v1;
}

//----- (004273E0) --------------------------------------------------------
int __thiscall CItem::GetSellMoney(CItem *this, int nNum)
{
  return nNum * this->m_pInit->m_nSell;
}

//----- (00427400) --------------------------------------------------------
int __thiscall CItem::SetEtc(CItem *this, CPlayer *pPlayer)
{
  int result; // eax

  this->m_nFrom = 0;
  result = pPlayer->m_nPID;
  this->m_nPID = result;
  return result;
}

//----- (00427430) --------------------------------------------------------
void __thiscall CItem::SendItemInfo(CItem *this, CPlayer *a2, enum S2C_PROTOCOL nType)
{
  CIOBuffer *v3; // eax
  CIOBuffer *packet; // [esp+4h] [ebp-Ch]
  char *end; // [esp+8h] [ebp-8h] BYREF
  CIOBuffer *pBuffer; // [esp+Ch] [ebp-4h]

  v3 = CIOBuffer::Alloc();
  pBuffer = v3;
  packet = v3;
  v3->m_buffer[2] = nType;
  end = &v3->m_buffer[3];
  this->PutInfo(this, &end, 0);
  *(_WORD *)packet->m_buffer = (_WORD)end - (_WORD)packet;
  pBuffer->m_dwSize = *(unsigned __int16 *)packet->m_buffer;
  CPlayer::Send(a2, pBuffer);
  CIOBuffer::Release(pBuffer);
}

//----- (004274A0) --------------------------------------------------------
void __thiscall CItem::InsertItem(CItem *this, CPlayer *pPlayer, int nLogType, int nIndex, int nPrefix, int nNum, int nVer)
{
  CItem *pItem; // [esp+4h] [ebp-4h]

  pItem = CItem::CreateItem(nIndex, nPrefix, nNum, -1);
  if ( pItem )
  {
    CIOObject::AddRef((int)pItem);
    if ( CPlayer::_InsertItem(pPlayer, nLogType, pItem) != 1 )
    {
      LOG_ERR("CItem::InsertItem() (PID:%d, LogType:%d, Index:%d)", pPlayer->m_nPID, nLogType, nIndex);
      CBase::Delete(pItem);
    }
    CIOObject::Release(pItem);
  }
}

//----- (00427520) --------------------------------------------------------
CItemWeapon *__thiscall CItemWeapon::CItemWeapon(CItemWeapon *this, CInitItem *pInit)
{
  CItem::CItem(this);
  this->__vftable = (CItemWeapon_vtbl *)&off_4B6C50;
  this->m_pInit = pInit;
  this->m_nMaxEnd = 0;
  this->m_nCurEnd = 0;
  this->m_nXAttack = 0;
  this->m_nXMagic = 0;
  this->m_nXDefense = 0;
  this->m_nXHit = 0;
  this->m_nXDodge = 0;
  this->m_nProtect = 0;
  this->m_nUpgrLevel = 0;
  this->m_nUpgrRate = 0;
  return this;
}
// 4B6C50: using guessed type int (__stdcall *off_4B6C50)(int);

//----- (004275C0) --------------------------------------------------------
void __thiscall sub_4275C0(std::locale::facet *this)
{
  sub_425A30(this);
}

//----- (004275E0) --------------------------------------------------------
void __thiscall CItemWeapon::PutInfo(CItemWeapon *this, char *ppInfo, int nNum)
{
  int m_pPrefix; // [esp+0h] [ebp-8h]

  if ( !nNum )
    nNum = this->m_nNum;
  *(_DWORD *)ppInfo = PutNumeric<int>(*(char **)ppInfo, this->m_nIID);
  *(_DWORD *)ppInfo = PutNumeric<short>(*(_WORD **)ppInfo, this->m_pInit->m_nIndex);
  if ( this->m_pPrefix )
    m_pPrefix = this->m_pPrefix->m_nPrefix;
  else
    LOBYTE(m_pPrefix) = 0;
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, m_pPrefix);
  *(_DWORD *)ppInfo = PutNumeric<int>(*(char **)ppInfo, this->m_dwInfo);
  *(_DWORD *)ppInfo = PutNumeric<int>(*(char **)ppInfo, nNum);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nMaxEnd);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nCurEnd);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nVer);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nXAttack);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nXMagic);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nXDefense);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nXHit);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nXDodge);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nProtect);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nUpgrLevel);
  *(_DWORD *)ppInfo = PutNumeric<unsigned char>(*(_BYTE **)ppInfo, this->m_nUpgrRate);
}

//----- (004277C0) --------------------------------------------------------
void __thiscall CItemWeapon::Init(CItemWeapon *this, int nPID, char *ppInfo)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  this->m_nPID = nPID;
  v4 = 0;
  *(_DWORD *)ppInfo = GetNumeric<int>(*(_DWORD **)ppInfo, &this->m_nIID);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &v4);
  *(_DWORD *)ppInfo = GetNumeric<int>(*(_DWORD **)ppInfo, &this->m_dwInfo);
  *(_DWORD *)ppInfo = GetNumeric<int>(*(_DWORD **)ppInfo, &this->m_nNum);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nMaxEnd);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nCurEnd);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nVer);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nXAttack);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nXMagic);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nXDefense);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nXHit);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nXDodge);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nProtect);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nUpgrLevel);
  *(_DWORD *)ppInfo = GetNumeric<unsigned char>(*(_BYTE **)ppInfo, &this->m_nUpgrRate);
  if ( this->m_nXAttack > 20 )
  {
    this->m_nXAttack = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXAttack:%d)", nPID, this->m_nXAttack);
  }
  if ( this->m_nXMagic > 20 )
  {
    this->m_nXMagic = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXMagic:%d)", nPID, this->m_nXMagic);
  }
  if ( this->m_nXHit > 20 )
  {
    this->m_nXHit = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXHit:%d)", nPID, this->m_nXHit);
  }
  if ( this->m_nXDefense > 10 )
  {
    this->m_nXDefense = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXDefense:%d)", nPID, this->m_nXDefense);
  }
  if ( this->m_nXDodge > 1 )
  {
    this->m_nXDodge = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXDodge:%d)", nPID, this->m_nXDodge);
  }
  this->m_pPrefix = (CPrefix *)sub_425CB0(v4);
}

//----- (00427A50) --------------------------------------------------------
void __thiscall CItemWeapon::Init(CItemWeapon *this, int nPrefix, int nNum, int nVer)
{
  this->m_pPrefix = (CPrefix *)sub_425CB0(nPrefix);
  this->m_nNum = 1;
  this->m_nCurEnd = this->m_pInit->m_nEndurance;
  this->m_nMaxEnd = this->m_nCurEnd;
}

//----- (00427AA0) --------------------------------------------------------
void __thiscall CItemWeapon::SetWearState(CItemWeapon *this, CPlayer *a2)
{
  if ( CItem::IsState(this, 1) )
  {
    if ( (this->m_pInit->m_nClsLimit < 0 || this->m_pInit->m_nClsLimit == a2->m_nClass)
      && this->m_pInit->m_nLvLimit <= a2->m_nLevel
      && !CPlayer::IsWState(a2, 0) )
    {
      if ( this->m_pInit->m_nSubClass != 21 )
      {
LABEL_10:
        CPlayer::AddWState(a2, 0);
        a2->m_wWearItem[0] = this->m_pInit->m_nIndex;
        a2->m_nRange = this->m_pInit->m_nRange;
        this->ApplySpec(this, a2);
        return;
      }
      if ( !CPlayer::IsWState(a2, 1) )
      {
        CPlayer::AddWState(a2, 0xCu);
        goto LABEL_10;
      }
    }
    CItem::SubState(this, 1);
    CDBSocket::Write(S2D_PUTOFFITEM, "d", this->m_nIID);
  }
}

//----- (00427B90) --------------------------------------------------------
void __thiscall CItem::SubState(CItem *this, int dwState)
{
  this->m_dwInfo &= ~dwState;
}

//----- (00427BB0) --------------------------------------------------------
void __thiscall CPlayer::AddWState(CPlayer *this, unsigned int nWState)
{
  this->m_dwWearState |= 1 << nWState;
}

//----- (00427BE0) --------------------------------------------------------
unsigned int __thiscall CPlayer::IsWState(CPlayer *this, int nWState)
{
  return this->m_dwWearState & (1 << nWState);
}

//----- (00427C00) --------------------------------------------------------
int __thiscall CItemWeapon::Trash(CItemWeapon *this, CPlayer *pPlayer, int nLogType)
{
  int result; // eax
  int m_nPrefix; // [esp+0h] [ebp-14h]

  if ( CItem::IsState(this, 1) )
  {
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
    if ( this->m_pPrefix )
      m_nPrefix = this->m_pPrefix->m_nPrefix;
    else
      m_nPrefix = 0;
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      nLogType,
      (unsigned __int8)this->m_nXAttack | ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this->m_nMaxEnd << 16) | (m_nPrefix << 24),
      ((unsigned __int8)this->m_nXHit << 8) | ((unsigned __int8)this->m_nXMagic << 24),
      ((unsigned __int8)this->m_nUpgrRate << 8) | ((unsigned __int8)this->m_nUpgrLevel << 16) | ((unsigned __int8)this->m_nProtect << 24));
    CBase::Delete(this);
    result = 1;
  }
  return result;
}

//----- (00427D60) --------------------------------------------------------
void __thiscall CItemWeapon::Erase(CItemWeapon *this, int nLogType)
{
  int m_nPrefix; // [esp+0h] [ebp-14h]

  if ( this->m_nIID )
  {
    if ( this->m_pPrefix )
      m_nPrefix = this->m_pPrefix->m_nPrefix;
    else
      m_nPrefix = 0;
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      nLogType,
      (unsigned __int8)this->m_nXAttack | ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this->m_nMaxEnd << 16) | (m_nPrefix << 24),
      ((unsigned __int8)this->m_nXHit << 8) | ((unsigned __int8)this->m_nXMagic << 24),
      ((unsigned __int8)this->m_nUpgrRate << 8) | ((unsigned __int8)this->m_nUpgrLevel << 16) | ((unsigned __int8)this->m_nProtect << 24));
  }
  CBase::Delete(this);
}

//----- (00427E70) --------------------------------------------------------
void __thiscall CItemWeapon::ApplySpec(CItemWeapon *this, CPlayer *pPlayer)
{
  int nMin; // [esp+4h] [ebp-Ch] BYREF
  int nValue; // [esp+8h] [ebp-8h]
  int nMax; // [esp+Ch] [ebp-4h] BYREF

  CInitItem::ApplySpec(this->m_pInit, pPlayer);
  nMin = 0;
  nMax = 0;
  if ( CInitItem::GetSpecValue(this->m_pInit, S_ATTACK, &nMin, &nMax) )
  {
    pPlayer->m_nWMinAttack = nMin;
    pPlayer->m_nWMaxAttack = nMax;
  }
  if ( CInitItem::GetSpecValue(this->m_pInit, S_MAGIC, &nMin, &nMax) )
  {
    pPlayer->m_nWMinMagic = nMin;
    pPlayer->m_nWMaxMagic = nMax;
  }
  if ( this->m_pPrefix )
    CPrefix::ApplySpec(this->m_pPrefix, pPlayer);
  if ( this->m_nXAttack )
  {
    nValue = this->m_nXAttack * (2 * this->m_nXAttack + 7) / 9;
    pPlayer->m_nCAttack = nValue;
    pPlayer->UpdatePrtyPt(pPlayer, 27, 1, nValue, nValue);
  }
  if ( this->m_nXMagic )
  {
    nValue = this->m_nXMagic * (2 * this->m_nXMagic + 7) / 9;
    pPlayer->m_nCMagic = nValue;
    pPlayer->UpdatePrtyPt(pPlayer, 28, 1, nValue, nValue);
  }
  if ( this->m_nXHit )
    pPlayer->UpdatePrtyPt(pPlayer, 9, 1, this->m_nXHit);
  if ( this->m_nUpgrLevel )
    pPlayer->m_nUpgrLevel = this->m_nUpgrLevel;
}

//----- (00428000) --------------------------------------------------------
void __thiscall CItemWeapon::FreeSpec(CItemWeapon *this, CPlayer *pPlayer)
{
  int v3; // [esp+4h] [ebp-4h]
  int v4; // [esp+4h] [ebp-4h]

  CInitItem::FreeSpec(this->m_pInit, pPlayer);
  pPlayer->m_nWMinAttack = 0;
  pPlayer->m_nWMaxAttack = 0;
  pPlayer->m_nWMinMagic = 0;
  pPlayer->m_nWMaxMagic = 0;
  if ( this->m_pPrefix )
    CPrefix::FreeSpec(this->m_pPrefix, pPlayer);
  if ( this->m_nXAttack )
  {
    v3 = this->m_nXAttack * (2 * this->m_nXAttack + 7) / 9;
    pPlayer->m_nCAttack = 0;
    pPlayer->UpdatePrtyPt(pPlayer, 27, 0, v3, v3);
  }
  if ( this->m_nXMagic )
  {
    v4 = this->m_nXMagic * (2 * this->m_nXMagic + 7) / 9;
    pPlayer->m_nCMagic = 0;
    pPlayer->UpdatePrtyPt(pPlayer, 28, 0, v4, v4);
  }
  if ( this->m_nXHit )
    pPlayer->UpdatePrtyPt(pPlayer, 9, 0, this->m_nXHit);
  pPlayer->m_nUpgrLevel = 0;
}

//----- (00428140) --------------------------------------------------------
void __thiscall CItemWeapon::PutOn(CItemWeapon *this, CPlayer *pPlayer)
{
  int m_nId; // eax
  int m_nIID; // [esp-8h] [ebp-10h]
  int m_nIndex; // [esp-4h] [ebp-Ch]
  unsigned int m_dwInfo; // [esp+0h] [ebp-8h]

  if ( this->m_pInit->m_nClsLimit >= 0 && this->m_pInit->m_nClsLimit != pPlayer->m_nClass
    || this->m_pInit->m_nLvLimit > pPlayer->m_nLevel )
  {
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 12);
    return;
  }
  if ( !CItem::IsState(this, 1) )
  {
    if ( CPlayer::IsWState(pPlayer, 0) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 10);
      return;
    }
    if ( this->m_pInit->m_nSubClass == 21 )
    {
      if ( CPlayer::IsWState(pPlayer, 1) )
        return;
      CPlayer::AddWState(pPlayer, 0xCu);
    }
    CPlayer::AddWState(pPlayer, 0);
    pPlayer->m_wWearItem[0] = this->m_pInit->m_nIndex;
    pPlayer->m_nRange = this->m_pInit->m_nRange;
    CItem::AddState(this, 1);
    this->ApplySpec(this, pPlayer);
    if ( (this->m_dwInfo & 0x7FF00) != 0 )
    {
      if ( (this->m_dwInfo & 0x100000) != 0 )
        pPlayer->AddGState(pPlayer, 0x80000000);
      m_dwInfo = this->m_dwInfo & 0x7FF00;
      if ( m_dwInfo > 0x2000 )
      {
        if ( m_dwInfo > 0x10000 )
        {
          if ( m_dwInfo == 0x20000 )
          {
            pPlayer->AddGState(pPlayer, 0x20000000);
            pPlayer->UpdatePrtyPt(pPlayer, 27, 1, 50, 50);
            pPlayer->UpdatePrtyPt(pPlayer, 28, 1, 50, 50);
          }
          else if ( m_dwInfo == 0x40000 )
          {
            pPlayer->AddGState(pPlayer, 0x40000000);
            pPlayer->UpdatePrtyPt(pPlayer, 5, 1, 50);
            pPlayer->UpdatePrtyPt(pPlayer, 6, 1, 50);
            pPlayer->UpdatePrtyPt(pPlayer, 0, 1, 6);
            pPlayer->UpdatePrtyPt(pPlayer, 2, 1, 6);
            pPlayer->UpdatePrtyPt(pPlayer, 4, 1, 6);
            pPlayer->UpdatePrtyPt(pPlayer, 3, 1, 10);
            pPlayer->UpdatePrtyPt(pPlayer, 1, 1, 10);
          }
        }
        else
        {
          switch ( m_dwInfo )
          {
            case 0x10000u:
              pPlayer->AddGState(pPlayer, 0x10000000);
              if ( (this->m_dwInfo & 0x80000) != 0 )
              {
                pPlayer->UpdatePrtyPer(pPlayer, 5, 0, 5);
                pPlayer->UpdatePrtyPer(pPlayer, 6, 1, 10);
              }
              else if ( (this->m_dwInfo & 0x100000) != 0 )
              {
                pPlayer->UpdatePrtyPer(pPlayer, 5, 0, 10);
                pPlayer->UpdatePrtyPer(pPlayer, 6, 1, 20);
              }
              break;
            case 0x4000u:
              pPlayer->AddGState(pPlayer, 0x4000000);
              break;
            case 0x8000u:
              pPlayer->AddGState(pPlayer, 0x8000000);
              if ( (this->m_dwInfo & 0x80000) != 0 )
              {
                pPlayer->UpdatePrtyPer(pPlayer, 5, 1, 10);
                pPlayer->UpdatePrtyPer(pPlayer, 6, 0, 5);
              }
              else if ( (this->m_dwInfo & 0x100000) != 0 )
              {
                pPlayer->UpdatePrtyPer(pPlayer, 5, 1, 20);
                pPlayer->UpdatePrtyPer(pPlayer, 6, 0, 10);
              }
              break;
          }
        }
      }
      else if ( m_dwInfo == 0x2000 )
      {
        pPlayer->AddGState(pPlayer, 0x2000000);
      }
      else if ( m_dwInfo > 0x400 )
      {
        if ( m_dwInfo == 0x800 )
        {
          pPlayer->AddGState(pPlayer, 0x800000);
        }
        else if ( m_dwInfo == 0x1000 )
        {
          pPlayer->AddGState(pPlayer, 0x1000000);
        }
      }
      else
      {
        switch ( m_dwInfo )
        {
          case 0x400u:
            pPlayer->AddGState(pPlayer, 0x400000);
            break;
          case 0x100u:
            pPlayer->AddGState(pPlayer, 0x100000);
            if ( (this->m_dwInfo & 0x80000) != 0 )
            {
              pPlayer->UpdatePrtyPt(pPlayer, 5, 1, 20);
              pPlayer->UpdatePrtyPt(pPlayer, 0, 1, 2);
              pPlayer->UpdatePrtyPt(pPlayer, 2, 1, 2);
              pPlayer->UpdatePrtyPt(pPlayer, 4, 1, 2);
            }
            else if ( (this->m_dwInfo & 0x100000) != 0 )
            {
              pPlayer->UpdatePrtyPt(pPlayer, 5, 1, 50);
              pPlayer->UpdatePrtyPt(pPlayer, 0, 1, 3);
              pPlayer->UpdatePrtyPt(pPlayer, 2, 1, 3);
              pPlayer->UpdatePrtyPt(pPlayer, 4, 1, 3);
            }
            break;
          case 0x200u:
            pPlayer->AddGState(pPlayer, 0x200000);
            if ( (this->m_dwInfo & 0x80000) != 0 )
            {
              pPlayer->UpdatePrtyPt(pPlayer, 6, 1, 20);
              pPlayer->UpdatePrtyPt(pPlayer, 3, 1, 2);
              pPlayer->UpdatePrtyPt(pPlayer, 1, 1, 2);
            }
            else if ( (this->m_dwInfo & 0x100000) != 0 )
            {
              pPlayer->UpdatePrtyPt(pPlayer, 6, 1, 50);
              pPlayer->UpdatePrtyPt(pPlayer, 3, 1, 5);
              pPlayer->UpdatePrtyPt(pPlayer, 1, 1, 5);
            }
            break;
        }
      }
    }
    m_nIndex = LOWORD(this->m_pInit->m_nIndex);
    m_nIID = this->m_nIID;
    m_nId = CBase::Id(pPlayer);
    CChar::WriteInSight(pPlayer, S2C_PUTONITEM, "ddw", m_nId, m_nIID, m_nIndex);
    CDBSocket::Write(S2D_PUTONITEM, "d", this->m_nIID);
  }
}

//----- (00428770) --------------------------------------------------------
void __thiscall CItemWeapon::PutOff(CItemWeapon *this, CPlayer *pPlayer)
{
  int m_nId; // eax
  int m_nIID; // [esp-8h] [ebp-Ch]
  int m_nIndex; // [esp-4h] [ebp-8h]

  if ( CItem::IsState(this, 1) && CPlayer::IsWState(pPlayer, 0) )
  {
    CPlayer::SubWState(pPlayer, 0);
    if ( this->m_pInit->m_nSubClass == 21 )
      CPlayer::SubWState(pPlayer, 12);
    pPlayer->m_wWearItem[0] = 0;
    pPlayer->m_nRange = 0;
    CItem::SubState(this, 1);
    this->FreeSpec(this, pPlayer);
    if ( (this->m_dwInfo & 0x7FF00) != 0 )
    {
      if ( (this->m_dwInfo & 0x100) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x100000);
        if ( CChar::IsGState(pPlayer, 0x80000000) )
        {
          pPlayer->UpdatePrtyPt(pPlayer, 5, 0, 50);
          pPlayer->UpdatePrtyPt(pPlayer, 0, 0, 3);
          pPlayer->UpdatePrtyPt(pPlayer, 2, 0, 3);
          pPlayer->UpdatePrtyPt(pPlayer, 4, 0, 3);
        }
        else
        {
          pPlayer->UpdatePrtyPt(pPlayer, 5, 0, 20);
          pPlayer->UpdatePrtyPt(pPlayer, 0, 0, 2);
          pPlayer->UpdatePrtyPt(pPlayer, 2, 0, 2);
          pPlayer->UpdatePrtyPt(pPlayer, 4, 0, 2);
        }
      }
      else if ( (this->m_dwInfo & 0x200) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x200000);
        if ( CChar::IsGState(pPlayer, 0x80000000) )
        {
          pPlayer->UpdatePrtyPt(pPlayer, 6, 0, 50);
          pPlayer->UpdatePrtyPt(pPlayer, 3, 0, 5);
          pPlayer->UpdatePrtyPt(pPlayer, 1, 0, 5);
        }
        else
        {
          pPlayer->UpdatePrtyPt(pPlayer, 6, 0, 20);
          pPlayer->UpdatePrtyPt(pPlayer, 3, 0, 2);
          pPlayer->UpdatePrtyPt(pPlayer, 1, 0, 2);
        }
      }
      else if ( (this->m_dwInfo & 0x400) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x400000);
      }
      else if ( (this->m_dwInfo & 0x800) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x800000);
      }
      else if ( (this->m_dwInfo & 0x1000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x1000000);
      }
      else if ( (this->m_dwInfo & 0x2000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x2000000);
      }
      else if ( (this->m_dwInfo & 0x4000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x4000000);
      }
      else if ( (this->m_dwInfo & 0x8000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x8000000);
        if ( CChar::IsGState(pPlayer, 0x80000000) )
        {
          pPlayer->UpdatePrtyPer(pPlayer, 5, 0, 20);
          pPlayer->UpdatePrtyPer(pPlayer, 6, 1, 10);
        }
        else
        {
          pPlayer->UpdatePrtyPer(pPlayer, 5, 0, 10);
          pPlayer->UpdatePrtyPer(pPlayer, 6, 1, 5);
        }
      }
      else if ( (this->m_dwInfo & 0x10000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x10000000);
        if ( CChar::IsGState(pPlayer, 0x80000000) )
        {
          pPlayer->UpdatePrtyPer(pPlayer, 5, 1, 10);
          pPlayer->UpdatePrtyPer(pPlayer, 6, 0, 20);
        }
        else
        {
          pPlayer->UpdatePrtyPer(pPlayer, 5, 1, 5);
          pPlayer->UpdatePrtyPer(pPlayer, 6, 0, 10);
        }
      }
      else if ( (this->m_dwInfo & 0x20000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x20000000);
        pPlayer->UpdatePrtyPt(pPlayer, 27, 0, 50, 50);
        pPlayer->UpdatePrtyPt(pPlayer, 28, 0, 50, 50);
      }
      else if ( (this->m_dwInfo & 0x40000) != 0 )
      {
        pPlayer->SubGState(pPlayer, 0x40000000);
        pPlayer->UpdatePrtyPt(pPlayer, 5, 0, 50);
        pPlayer->UpdatePrtyPt(pPlayer, 6, 0, 50);
        pPlayer->UpdatePrtyPt(pPlayer, 0, 0, 6);
        pPlayer->UpdatePrtyPt(pPlayer, 2, 0, 6);
        pPlayer->UpdatePrtyPt(pPlayer, 4, 0, 6);
        pPlayer->UpdatePrtyPt(pPlayer, 3, 0, 10);
        pPlayer->UpdatePrtyPt(pPlayer, 1, 0, 10);
      }
      if ( (this->m_dwInfo & 0x100000) != 0 )
        pPlayer->SubGState(pPlayer, 0x80000000);
    }
    m_nIndex = LOWORD(this->m_pInit->m_nIndex);
    m_nIID = this->m_nIID;
    m_nId = CBase::Id(pPlayer);
    CChar::WriteInSight(pPlayer, S2C_PUTOFFITEM, "ddw", m_nId, m_nIID, m_nIndex);
    CDBSocket::Write(S2D_PUTOFFITEM, "d", this->m_nIID);
  }
}

//----- (00428CD0) --------------------------------------------------------
void __thiscall CPlayer::SubWState(CPlayer *this, int nWState)
{
  this->m_dwWearState &= ~(1 << nWState);
}

//----- (00428D00) --------------------------------------------------------
void __thiscall CItemWeapon::Insert(CItemWeapon *this, int nPID, int nIID)
{
  this->m_nPID = nPID;
  this->m_nIID = nIID;
  CDBSocket::Write(
    S2D_INSERTITEM,
    "dwbddbbdb",
    this->m_nIID,
    this->m_pInit->m_nIndex,
    0,
    this->m_dwInfo,
    this->m_nNum,
    this->m_nMaxEnd,
    this->m_nVer,
    this->m_nPID,
    2);
}

//----- (00428D70) --------------------------------------------------------
int __thiscall CItemWeapon::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  int v5; // [esp+0h] [ebp-14h]

  if ( nNum + this->m_nNum > 0 )
    return this->m_nNum;
  CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, 0, nLogType);
  if ( nLogType == 50 )
  {
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      pPlayer->m_nPID,
      0,
      this->m_pInit->m_nIndex,
      50,
      this->m_nNum);
  }
  else
  {
    if ( this->m_pPrefix )
      v5 = this->m_pPrefix->m_nPrefix;
    else
      v5 = 0;
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      nLogType,
      (unsigned __int8)this[1].m_nTimerRef | ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this[1].__vftable << 16) | (v5 << 24),
      ((unsigned __int8)this[1].m_bit << 8) | ((unsigned __int8)this[1].m_nGeneralRef << 24),
      ((unsigned __int8)this[1].m_nIID << 8) | ((unsigned __int8)this[1].m_nPID << 16) | ((unsigned __int8)this[1].m_nId << 24));
  }
  this->m_nNum = 0;
  CBase::Delete(this);
  return 0;
}

//----- (00428F00) --------------------------------------------------------
BOOL __thiscall CItemDefense::CanSell(CItemDefense *this, int nNum)
{
  BOOL result; // eax

  if ( CItem::IsState(this, 1) )
    result = 0;
  else
    result = CItem::CanSell(this, nNum);
  return result;
}

//----- (00428F30) --------------------------------------------------------
int __thiscall CItemWeapon::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-24h]
  ITEMINFO v6; // [esp+8h] [ebp-1Ch] BYREF

  if ( CItem::IsState((CItem *)this, 1) )
    return 0;
  v6.wIndex = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v6.nIID = *(_DWORD *)(this + 36);
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  v6.byPrefix = v4;
  v6.dwInfo = *(_DWORD *)(this + 48);
  v6.nNum = *(_DWORD *)(this + 52);
  v6.byMaxEnd = *(_BYTE *)(this + 92);
  v6.byCurEnd = *(_BYTE *)(this + 96);
  v6.byVer = *(_BYTE *)(this + 84);
  v6.byXAttack = *(_BYTE *)(this + 100);
  v6.byXMagic = *(_BYTE *)(this + 104);
  v6.byXDefense = *(_BYTE *)(this + 108);
  v6.byXHit = *(_BYTE *)(this + 112);
  v6.byXDodge = *(_BYTE *)(this + 116);
  v6.byProtect = *(_BYTE *)(this + 120);
  v6.byUpgrLevel = *(_BYTE *)(this + 124);
  v6.byUpgrRate = *(_BYTE *)(this + 128);
  CPlayer::_StorageIn((CPlayer *)a2, &v6, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    S2D_PUTINSTORAGE,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((CBase *)this);
  return 1;
}

//----- (00429060) --------------------------------------------------------
void __thiscall CItemWeapon::ForcedStorageIn(_DWORD *this, int a2, int a3, char *a4, int a5)
{
  LONG v5; // [esp-28h] [ebp-38h]
  int v6; // [esp-24h] [ebp-34h]
  int v7; // [esp-1Ch] [ebp-2Ch]
  int v8; // [esp-18h] [ebp-28h]
  int v9; // [esp-14h] [ebp-24h]
  int v10; // [esp-10h] [ebp-20h]
  char *v11; // [esp+0h] [ebp-10h]
  int v12; // [esp+4h] [ebp-Ch]

  if ( this[11] )
    v12 = *(_DWORD *)(this[11] + 32);
  else
    v12 = 0;
  if ( a4 )
    v11 = a4;
  else
    v11 = &DefaultNullString;
  v10 = this[21];
  v9 = this[23];
  v8 = this[13];
  v7 = this[12];
  v6 = *(_DWORD *)(this[10] + 64);
  v5 = CItem::NewIID();
  CDBSocket::Write(35, "bdwbddbbdds", a2, v5, v6, v12, v7, v8, v9, v10, a3, a5, v11);
}

//----- (00429100) --------------------------------------------------------
signed int __thiscall CItemWeapon::Charming(_DWORD *this, int a2, int a3)
{
  signed int result; // eax
  int v4; // esi
  int v5; // esi
  int v6; // esi
  int v7; // [esp+4h] [ebp-40h]
  int v8; // [esp+8h] [ebp-3Ch]
  int v9; // [esp+Ch] [ebp-38h]
  int v10; // [esp+10h] [ebp-34h]
  int v11; // [esp+14h] [ebp-30h]
  int v13; // [esp+38h] [ebp-Ch]
  int v14; // [esp+3Ch] [ebp-8h]
  unsigned int v15; // [esp+40h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState((CItem *)this, 1) )
    return 0;
  v15 = CItem::IsState((CItem *)this, 64);
  if ( a3 == 9 )
  {
    if ( (int)this[28] < 20 )
    {
      v6 = this[28];
      if ( dword_4D5C48[v6] >= Random(1, 10000000) )
      {
        CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], 9, ++this[28], v15);
        goto LABEL_22;
      }
    }
    goto LABEL_25;
  }
  if ( a3 == 27 )
  {
    if ( (int)this[25] < 20 )
    {
      v4 = this[25];
      if ( dword_4D5B88[v4] >= Random(1, 10000000) )
      {
        CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], a3, ++this[25], v15);
        goto LABEL_22;
      }
    }
LABEL_25:
    if ( v15 )
    {
      CDBSocket::Write(S2D_UPDATEITEMINFO, "dddbb", this[9], this[8], 64, 0, a3);
      CItem::SubState((CItem *)this, 64);
      CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
      result = 1;
    }
    else
    {
      if ( Random(1, 100) > 90 )
      {
        this[24] = 0;
      }
      else
      {
        v13 = Random(1, 100);
        if ( v13 <= 50 )
        {
          if ( v13 <= 20 )
            v14 = 3;
          else
            v14 = 2;
        }
        else
        {
          v14 = 1;
        }
        this[24] -= v14;
      }
      if ( (int)this[24] <= 0 )
      {
        CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], 0);
        if ( this[11] )
          v11 = *(_DWORD *)(this[11] + 32);
        else
          v11 = 0;
        CDBSocket::Write(
          S2D_DELETEITEM,
          "ddwdbddd",
          this[9],
          this[8],
          *(_DWORD *)(this[10] + 64),
          this[13],
          21,
          (unsigned __int8)this[25] | ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v11 << 24),
          ((unsigned __int8)this[28] << 8) | ((unsigned __int8)this[26] << 24),
          ((unsigned __int8)this[32] << 8) | ((unsigned __int8)this[31] << 16) | ((unsigned __int8)this[30] << 24));
        if ( CItem::GetLevel(this) - 40 >= 20 )
          v10 = 20;
        else
          v10 = CItem::GetLevel(this) - 40;
        if ( *(_DWORD *)(this[10] + 72) == 1 )
        {
          if ( (int)this[26] >= 20 )
            v9 = 20;
          else
            v9 = this[26];
          v8 = v9;
        }
        else
        {
          if ( (int)this[25] >= 20 )
            v7 = 20;
          else
            v7 = this[25];
          v8 = v7;
        }
        CItem::InsertItem((CItem *)this, (CPlayer *)a2, 21, 517, 0, dword_4D5F90[v8] + dword_4D5F38[v10], -1);
        CBase::Delete((CBase *)this);
      }
      else
      {
        CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], this[24]);
        CDBSocket::Write(S2D_UPDATEITEMEND, "ddb", this[9], this[8], this[24]);
      }
      result = 1;
    }
    return result;
  }
  if ( a3 != 28 )
    return 0;
  if ( *(_DWORD *)(this[10] + 72) != 1 )
    return 0;
  if ( (int)this[26] >= 20 )
    goto LABEL_25;
  v5 = this[26];
  if ( dword_4D5B88[v5] < Random(1, 10000000) )
    goto LABEL_25;
  CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], a3, ++this[26], v15);
LABEL_22:
  if ( v15 )
    CItem::SubState((CItem *)this, 64);
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  return 1;
}

//----- (004295B0) --------------------------------------------------------
int __thiscall CItem::GetLevel(_DWORD *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( this[11] )
    v2 = *(_DWORD *)(this[11] + 36);
  else
    v2 = 0;
  return v2 + *(_DWORD *)(this[10] + 80);
}

//----- (004295F0) --------------------------------------------------------
int __thiscall CItemWeapon::CharmingCheat(_DWORD *this, int a2, int a3, int a4)
{
  unsigned int v6; // [esp+8h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState((CItem *)this, 1) )
    return 0;
  v6 = CItem::IsState((CItem *)this, 64);
  switch ( a3 )
  {
    case 9:
      this[28] = a4;
      CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], 9, this[28], v6);
      break;
    case 27:
      this[25] = a4;
      CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], 27, this[25], v6);
      break;
    case 28:
      if ( *(_DWORD *)(this[10] + 72) != 1 )
        return 0;
      this[26] = a4;
      CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], a3, this[26], v6);
      break;
    default:
      return 0;
  }
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  return 1;
}

//----- (00429730) --------------------------------------------------------
int __thiscall CItemDefense::Repair(_DWORD *this, int a2)
{
  if ( this[24] >= this[23] )
    return 0;
  CPlayer::Write(a2, 91, "db", this[9], ++this[24]);
  CDBSocket::Write(18, "ddb", this[9], this[8], this[24]);
  return 1;
}

//----- (004297B0) --------------------------------------------------------
int __thiscall CItemWeapon::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v6; // [esp+0h] [ebp-4Ch]
  int v7; // [esp+4h] [ebp-48h]
  int v8; // [esp+8h] [ebp-44h]
  int v9; // [esp+Ch] [ebp-40h]
  int v10; // [esp+10h] [ebp-3Ch]
  int v11; // [esp+14h] [ebp-38h]
  int v13; // [esp+34h] [ebp-18h]
  int i; // [esp+38h] [ebp-14h]
  int v15; // [esp+3Ch] [ebp-10h]
  int v16; // [esp+40h] [ebp-Ch]
  unsigned int v17; // [esp+48h] [ebp-4h]

  if ( CItem::IsState((CItem *)this, 1) || a3 > 0 )
    return 0;
  if ( this[11] )
    v11 = *(_DWORD *)(this[11] + 32);
  else
    v11 = 0;
  v15 = v11;
  v16 = Random(1, 100);
  v17 = CItem::IsState((CItem *)this, 64);
  for ( i = 0; i < 2; ++i )
  {
    if ( v16 <= *(_DWORD *)(a4 + 4 * i) )
    {
      v15 = *(_DWORD *)(a5 + 4 * i);
      break;
    }
  }
  if ( v11 == v15 )
  {
    if ( v17 )
    {
      CDBSocket::Write(S2D_UPDATEITEMINFO, "dddbb", this[9], this[8], 64, 0, 255);
      CItem::SubState((CItem *)this, 64);
      CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
      return 1;
    }
    this[24] -= 5;
    if ( (int)this[24] <= 0 )
    {
      CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], 0);
      if ( this[11] )
        v10 = *(_DWORD *)(this[11] + 32);
      else
        v10 = 0;
      CDBSocket::Write(
        S2D_DELETEITEM,
        "ddwdbddd",
        this[9],
        this[8],
        *(_DWORD *)(this[10] + 64),
        this[13],
        27,
        (unsigned __int8)this[25] | ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v10 << 24),
        ((unsigned __int8)this[28] << 8) | ((unsigned __int8)this[26] << 24),
        ((unsigned __int8)this[32] << 8) | ((unsigned __int8)this[31] << 16) | ((unsigned __int8)this[30] << 24));
      if ( CItem::GetLevel(this) >= 40 )
      {
        if ( CItem::GetLevel(this) - 40 >= 20 )
          v9 = 20;
        else
          v9 = CItem::GetLevel(this) - 40;
        if ( *(_DWORD *)(this[10] + 72) == 1 )
        {
          if ( (int)this[26] >= 20 )
            v8 = 20;
          else
            v8 = this[26];
          v7 = v8;
        }
        else
        {
          if ( (int)this[25] >= 20 )
            v6 = 20;
          else
            v6 = this[25];
          v7 = v6;
        }
        CItem::InsertItem((CItem *)this, (CPlayer *)a2, 27, 517, 0, dword_4D5F90[v7] + dword_4D5F38[v9], -1);
      }
      CBase::Delete((CBase *)this);
    }
    else
    {
      CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], this[24]);
      CDBSocket::Write(S2D_UPDATEITEMEND, "ddb", this[9], this[8], this[24]);
    }
  }
  else
  {
    v13 = sub_425CB0(v15);
    if ( !v13 )
      return 0;
    this[11] = v13;
    CDBSocket::Write(S2D_UPDATEITEMPREFIX, "ddbb", this[9], this[8], v15, v17);
    if ( v17 )
      CItem::SubState((CItem *)this, 64);
    CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  }
  return 1;
}

//----- (00429B60) --------------------------------------------------------
int __thiscall CItemWeapon::Protect(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-10h]
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  if ( CItem::GetLevel(this) < 40
    || stru_4E35B4.m_nRef != 2 && this[30] >= *(_DWORD *)(this[10] + 168)
    || CItem::IsState((CItem *)this, 65) )
  {
    return 0;
  }
  if ( this[11] )
    v3 = *(_DWORD *)(this[11] + 32);
  else
    v3 = 0;
  v5 = (unsigned __int8)this[25] | ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v3 << 24);
  v6 = ((unsigned __int8)this[28] << 8) | ((unsigned __int8)this[26] << 24);
  CDBSocket::Write(
    S2D_UPDATEITEMINFO,
    "dddbwddb",
    this[9],
    this[8],
    64,
    1,
    *(_DWORD *)(this[10] + 64),
    v5,
    v6,
    ++this[30]);
  CItem::AddState((CItem *)this, 64);
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  return 1;
}

//----- (00429C90) --------------------------------------------------------
int __thiscall CItemWeapon::GetSellMoney(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = *(_DWORD *)(this[10] + 112);
  if ( this[11] )
    v3 += *(_DWORD *)(this[11] + 40) * v3 / 100;
  if ( this[25] )
    v3 += 100 * this[25] * this[25] * this[25];
  if ( this[26] )
    v3 += 100 * this[26] * this[26] * this[26];
  if ( this[28] )
    v3 += 200 * this[28] * this[28] * this[28];
  return v3;
}

//----- (00429D50) --------------------------------------------------------
void __thiscall CItemWeapon::UpgradeDestroy(CPlayer *this, int a2)
{
  int v2; // [esp+0h] [ebp-20h]
  int v3; // [esp+4h] [ebp-1Ch]
  int v4; // [esp+8h] [ebp-18h]
  int v5; // [esp+Ch] [ebp-14h]

  if ( CItem::GetLevel(this) >= 40
    && !CItem::IsState((CItem *)this, 1)
    && ((int (__thiscall *)(CPlayer *, int, int))this->UpdateProperty)(this, a2, 45) )
  {
    if ( CItem::GetLevel(this) - 40 >= 20 )
      v5 = 20;
    else
      v5 = CItem::GetLevel(this) - 40;
    if ( *(_DWORD *)(*(_DWORD *)&this->m_szName[8] + 72) == 1 )
    {
      if ( this->m_prtyPt.nPt[3] >= 20 )
        v4 = 20;
      else
        v4 = this->m_prtyPt.nPt[3];
      v3 = v4;
    }
    else
    {
      if ( this->m_prtyPt.nPt[2] >= 20 )
        v2 = 20;
      else
        v2 = this->m_prtyPt.nPt[2];
      v3 = v2;
    }
    CItem::InsertItem((CItem *)this, (CPlayer *)a2, 45, 517, 0, dword_4D5F90[v3] + dword_4D5F38[v5], -1);
    CPlayer::_OutofInven((CPlayer *)a2, (CItem *)this);
  }
}

//----- (00429E60) --------------------------------------------------------
void __thiscall CItemWeapon::UpgradeRateUp(_DWORD *this, int a2)
{
  int v2; // [esp+0h] [ebp-18h]
  int v3; // [esp+4h] [ebp-14h]
  int v4; // [esp+8h] [ebp-10h]
  int a3; // [esp+10h] [ebp-8h]
  CItem *player; // [esp+14h] [ebp-4h]

  if ( CItem::GetLevel(this) >= 40 && !CItem::IsState((CItem *)this, 1) )
  {
    v4 = (int)this[31] >= 19 ? 19 : this[31];
    v3 = (int)this[31] >= 19 ? 19 : this[31];
    if ( dword_4D5E40[v4] + this[32] * dword_4D5E90[v3] < 100 )
    {
      v2 = (int)this[31] >= 19 ? 19 : this[31];
      a3 = dword_4D5EE8[v2];
      player = CPlayer::_FindItem((CPlayer *)a2, 517, a3);
      if ( player )
      {
        if ( !player->UpdateNum(player, (CPlayer *)a2, 46, -a3) )
          CPlayer::_OutofInven((CPlayer *)a2, player);
        CDBSocket::Write(S2D_UPDATEITEMUPGRADE, "ddbb", this[9], this[8], 1, ++this[32]);
        CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
      }
    }
  }
}

//----- (00429FB0) --------------------------------------------------------
void __thiscall CItemWeapon::UpgradeLevel(int this, int a2)
{
  int v2; // esi
  int v3; // [esp+4h] [ebp-30h]
  int v4; // [esp+8h] [ebp-2Ch]
  int v5; // [esp+Ch] [ebp-28h]
  int v6; // [esp+10h] [ebp-24h]
  int v7; // [esp+14h] [ebp-20h]
  int v9; // [esp+28h] [ebp-Ch]
  int a3; // [esp+2Ch] [ebp-8h]
  CItem *player; // [esp+30h] [ebp-4h]

  if ( CItem::GetLevel((_DWORD *)this) >= 40 && !CItem::IsState((CItem *)this, 1) )
  {
    v7 = *(_DWORD *)(*(_DWORD *)(this + 40) + 72) == 1 ? *(_DWORD *)(this + 104) : *(_DWORD *)(this + 100);
    if ( *(_DWORD *)(this + 124) < v7 )
    {
      a3 = 1500 * (*(_DWORD *)(this + 124) + 1);
      player = CPlayer::_FindItem((CPlayer *)a2, 31, a3);
      if ( player )
      {
        if ( *(int *)(this + 124) >= 19 )
          v6 = 19;
        else
          v6 = *(_DWORD *)(this + 124);
        if ( *(int *)(this + 124) >= 19 )
          v5 = 19;
        else
          v5 = *(_DWORD *)(this + 124);
        v2 = dword_4D5E40[v6] + *(_DWORD *)(this + 128) * dword_4D5E90[v5];
        if ( v2 < Random(1, 100) )
        {
          v9 = Random(1, 100);
          if ( v9 > 60 )
          {
            if ( v9 > 90 )
            {
              CPlayer::Write((CPlayer *)a2, S2C_MESSAGEV, "bd", 82, *(_DWORD *)(this + 36));
              if ( *(_DWORD *)(this + 44) )
                v3 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
              else
                v3 = 0;
              CDBSocket::Write(
                S2D_DELETEITEM,
                "ddwdbddd",
                *(_DWORD *)(this + 36),
                *(_DWORD *)(this + 32),
                *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
                *(_DWORD *)(this + 52),
                47,
                (unsigned __int8)*(_DWORD *)(this + 100) | ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v3 << 24),
                ((unsigned __int8)*(_DWORD *)(this + 112) << 8) | ((unsigned __int8)*(_DWORD *)(this + 104) << 24),
                ((unsigned __int8)*(_DWORD *)(this + 128) << 8) | ((unsigned __int8)*(_DWORD *)(this + 124) << 16) | ((unsigned __int8)*(_DWORD *)(this + 120) << 24));
              CPlayer::_OutofInven((CPlayer *)a2, (CItem *)this);
              CBase::Delete((CBase *)this);
            }
            else
            {
              *(_DWORD *)(this + 128) = 0;
              if ( *(int *)(this + 124) <= 0 )
                v4 = 0;
              else
                v4 = --*(_DWORD *)(this + 124);
              CDBSocket::Write(S2D_UPDATEITEMUPGRADE, "ddbb", *(_DWORD *)(this + 36), *(_DWORD *)(this + 32), 2, v4);
              CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
            }
          }
          else
          {
            if ( !player->UpdateNum(player, (CPlayer *)a2, 47, -a3) )
              CPlayer::_OutofInven((CPlayer *)a2, player);
            CPlayer::Write((CPlayer *)a2, S2C_MESSAGE, "b", 81);
          }
        }
        else
        {
          if ( !player->UpdateNum(player, (CPlayer *)a2, 47, -a3) )
            CPlayer::_OutofInven((CPlayer *)a2, player);
          *(_DWORD *)(this + 128) = 0;
          CDBSocket::Write(
            S2D_UPDATEITEMUPGRADE,
            "ddbb",
            *(_DWORD *)(this + 36),
            *(_DWORD *)(this + 32),
            2,
            ++*(_DWORD *)(this + 124));
          CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
        }
      }
    }
  }
}

//----- (0042A310) --------------------------------------------------------
CItemDefense *__thiscall CItemDefense::CItemDefense(CItemDefense *this, int a2)
{
  CItem::CItem(this);
  *(_DWORD *)this = &off_4B6E58;
  *((_DWORD *)this + 10) = a2;
  *((_DWORD *)this + 23) = 0;
  *((_DWORD *)this + 24) = 0;
  *((_DWORD *)this + 25) = 0;
  *((_DWORD *)this + 26) = 0;
  *((_DWORD *)this + 27) = 0;
  *((_DWORD *)this + 28) = 0;
  *((_DWORD *)this + 29) = 0;
  *((_DWORD *)this + 30) = 0;
  return this;
}
// 4B6E58: using guessed type int (__stdcall *off_4B6E58)(int);

//----- (0042A390) --------------------------------------------------------
std::locale::facet *__thiscall sub_42A390(std::locale::facet *this, char a2)
{
  sub_4275C0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0042A3C0) --------------------------------------------------------
void **__thiscall CItemDefense::PutInfo(int this, void **a2, int a3)
{
  void **result; // eax
  int v4; // [esp+0h] [ebp-8h]

  if ( !a3 )
    a3 = *(_DWORD *)(this + 52);
  *a2 = PutNumeric<int>(*a2, *(_DWORD *)(this + 36));
  *a2 = PutNumeric<short>(*a2, *(_WORD *)(*(_DWORD *)(this + 40) + 64));
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  *a2 = PutNumeric<unsigned char>(*a2, v4);
  *a2 = PutNumeric<int>(*a2, *(_DWORD *)(this + 48));
  *a2 = PutNumeric<int>(*a2, a3);
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 92));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 96));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 84));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 100));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 104));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 108));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 112));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 116));
  *a2 = PutNumeric<unsigned char>(*a2, *(_BYTE *)(this + 120));
  memset(*a2, 0, 2u);
  result = a2;
  *a2 = (char *)*a2 + 2;
  return result;
}

//----- (0042A590) --------------------------------------------------------
int __thiscall CItemDefense::Init2(int this, int a2, _DWORD *a3)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  *(_DWORD *)(this + 32) = a2;
  v5 = 0;
  *a3 = GetNumeric<int>((_DWORD *)*a3, (_DWORD *)(this + 36));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, &v5);
  *a3 = GetNumeric<int>((_DWORD *)*a3, (_DWORD *)(this + 48));
  *a3 = GetNumeric<int>((_DWORD *)*a3, (_DWORD *)(this + 52));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 92));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 96));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 84));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 100));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 104));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 108));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 112));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 116));
  *a3 = GetNumeric<unsigned char>((_BYTE *)*a3, (_BYTE *)(this + 120));
  *a3 += 2;
  if ( *(int *)(this + 100) > 20 )
  {
    *(_DWORD *)(this + 100) = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXAttack:%d)", a2, *(_DWORD *)(this + 100));
  }
  if ( *(int *)(this + 104) > 20 )
  {
    *(_DWORD *)(this + 104) = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXMagic:%d)", a2, *(_DWORD *)(this + 104));
  }
  if ( *(int *)(this + 108) > 10 )
  {
    *(_DWORD *)(this + 108) = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXDefense:%d)", a2, *(_DWORD *)(this + 108));
  }
  if ( *(int *)(this + 112) > 20 )
  {
    *(_DWORD *)(this + 112) = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXHit:%d)", a2, *(_DWORD *)(this + 112));
  }
  if ( *(int *)(this + 116) > 1 )
  {
    *(_DWORD *)(this + 116) = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXDodge:%d)", a2, *(_DWORD *)(this + 116));
  }
  result = sub_425CB0(v5);
  *(_DWORD *)(this + 44) = result;
  return result;
}

//----- (0042A800) --------------------------------------------------------
void __thiscall CItemDefense::SetWearState(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    if ( *(int *)(this[10] + 96) >= 0 && *(_DWORD *)(this[10] + 96) != a2[115]
      || *(_DWORD *)(this[10] + 100) > a2[15]
      || (v3 = *(_DWORD *)(this[10] + 72) - 2, CPlayer::IsWState(a2, v3))
      || *(_DWORD *)(this[10] + 72) == 3 && CPlayer::IsWState(a2, 12) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::AddWState(a2, v3);
      *((_WORD *)a2 + v3 + 526) = *(_WORD *)(this[10] + 64);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    }
  }
}

//----- (0042A8F0) --------------------------------------------------------
int __thiscall CItemDefense::Trash(CItem *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-14h]

  if ( CItem::IsState(this, 1) )
  {
    CPlayer::Write(a2, 67, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, 8, "db", this->m_nIID, a3);
    if ( this->m_pPrefix )
      v4 = this->m_pPrefix->m_nPrefix;
    else
      v4 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      a3,
      ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this[1].__vftable << 16) | (v4 << 24),
      (unsigned __int8)this[1].m_dwAttr | ((unsigned __int8)this[1].m_pNext << 16),
      (unsigned __int8)this[1].m_nId << 24);
    CBase::Delete(this);
    result = 1;
  }
  return result;
}

//----- (0042AA10) --------------------------------------------------------
int __thiscall CItemDefense::Erase(CItem *this, int a2)
{
  int v3; // [esp+0h] [ebp-14h]

  if ( *((_DWORD *)this + 9) )
  {
    if ( *((_DWORD *)this + 11) )
      v3 = *(_DWORD *)(*((_DWORD *)this + 11) + 32);
    else
      v3 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *((_DWORD *)this + 9),
      *((_DWORD *)this + 8),
      *(_DWORD *)(*((_DWORD *)this + 10) + 64),
      *((_DWORD *)this + 13),
      a2,
      ((unsigned __int8)*((_DWORD *)this + 21) << 8) | ((unsigned __int8)*((_DWORD *)this + 23) << 16) | (v3 << 24),
      (unsigned __int8)*((_DWORD *)this + 29) | ((unsigned __int8)*((_DWORD *)this + 27) << 16),
      (unsigned __int8)*((_DWORD *)this + 30) << 24);
  }
  return CBase::Delete(this);
}

//----- (0042AAF0) --------------------------------------------------------
int __thiscall CItemDefense::ApplySpec(int *this, int a2)
{
  int result; // eax

  result = CInitItem::ApplySpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::ApplySpec(this[11], a2);
  if ( this[27] )
    result = (*(int (__cdecl **)(int, int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 15, 1, this[27], this[27]);
  if ( this[29] )
    result = (*(int (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 10, 1, this[29]);
  return result;
}

//----- (0042AB80) --------------------------------------------------------
int __thiscall CItemDefense::FreeSpec(int *this, int a2)
{
  int result; // eax

  result = CInitItem::FreeSpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::FreeSpec(this[11], a2);
  if ( this[27] )
    result = (*(int (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 92))(a2, 15, 0, this[27], this[27]);
  if ( this[29] )
    result = (*(int (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 92))(a2, 10, 0, this[29]);
  return result;
}

//----- (0042AC10) --------------------------------------------------------
void __thiscall CItemDefense::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( (*(int *)(this[10] + 96) < 0 || *(_DWORD *)(this[10] + 96) == a2[115]) && *(_DWORD *)(this[10] + 100) <= a2[15] )
  {
    if ( !CItem::IsState(this, 1) )
    {
      v6 = *(_DWORD *)(this[10] + 72) - 2;
      if ( CPlayer::IsWState(a2, v6) )
      {
        CPlayer::Write((int)a2, 67, "b", 10);
      }
      else if ( *(_DWORD *)(this[10] + 72) != 3 || !CPlayer::IsWState(a2, 12) )
      {
        CPlayer::AddWState(a2, v6);
        *((_WORD *)a2 + v6 + 526) = *(_WORD *)(this[10] + 64);
        CItem::AddState(this, 1);
        (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
        v4 = *(unsigned __int16 *)(this[10] + 64);
        v3 = this[9];
        v2 = CBase::Id(a2);
        CChar::WriteInSight((int)a2, 5, "ddw", v2, v3, v4);
        CDBSocket::Write(4, "d", this[9]);
      }
    }
  }
  else
  {
    CPlayer::Write((int)a2, 67, "b", 12);
  }
}

//----- (0042AD60) --------------------------------------------------------
void __thiscall CItemDefense::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // [esp-Ch] [ebp-14h]
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    v6 = *(_DWORD *)(this[10] + 72) - 2;
    if ( CPlayer::IsWState(a2, v6) )
    {
      CPlayer::SubWState(a2, v6);
      *((_WORD *)a2 + v6 + 526) = 0;
      CItem::SubState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = CBase::Id(a2);
      CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
      CDBSocket::Write(5, "d", this[9]);
    }
  }
}

//----- (0042AE20) --------------------------------------------------------
void __thiscall sub_42AE20(_DWORD *this, int a2, int a3)
{
  this[8] = a2;
  this[9] = a3;
  CDBSocket::Write(
    6,
    "dwbbdbbdb",
    this[9],
    *(_DWORD *)(this[10] + 64),
    0,
    this[12],
    this[13],
    this[23],
    this[21],
    this[8],
    2);
}

//----- (0042AE90) --------------------------------------------------------
void __thiscall CItemDefense::Insert(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // [esp+0h] [ebp-10h]
  int v6; // [esp+Ch] [ebp-4h]

  v6 = this[8];
  this[8] = *(_DWORD *)(a2 + 452);
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_INSERTITEM);
  if ( a4 )
  {
    CDBSocket::Write(S2D_UPDATEITEMPID, "dddwbd", this[9], v6, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  }
  else
  {
    if ( this[11] )
      v4 = *(_DWORD *)(this[11] + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      S2D_INSERTITEM,
      "dwbddbbdb",
      this[9],
      *(_DWORD *)(this[10] + 64),
      v4,
      this[12],
      this[13],
      this[23],
      this[21],
      this[8],
      a3);
  }
}

//----- (0042AF90) --------------------------------------------------------
int __thiscall CItemDefense::UpdateNum(CItem *this, int a2, int a3, int a4)
{
  int v5; // [esp+0h] [ebp-14h]

  if ( a4 + this->m_nNum > 0 )
    return this->m_nNum;
  CPlayer::Write(a2, 9, "ddb", this->m_nIID, 0, a3);
  if ( a3 == 50 )
  {
    CDBSocket::Write(7, "dddwbd", this->m_nIID, *(_DWORD *)(a2 + 452), 0, this->m_pInit->m_nIndex, 50, this->m_nNum);
  }
  else
  {
    if ( this->m_pPrefix )
      v5 = this->m_pPrefix->m_nPrefix;
    else
      v5 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      a3,
      ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this[1].__vftable << 16) | (v5 << 24),
      (unsigned __int8)this[1].m_dwAttr | ((unsigned __int8)this[1].m_pNext << 16),
      (unsigned __int8)this[1].m_nId << 24);
  }
  this->m_nNum = 0;
  CBase::Delete(this);
  return 0;
}

//----- (0042B0F0) --------------------------------------------------------
int __thiscall CItemDefense::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-24h]
  ITEMINFO v6; // [esp+8h] [ebp-1Ch] BYREF

  if ( CItem::IsState((CItem *)this, 1) )
    return 0;
  v6.wIndex = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v6.nIID = *(_DWORD *)(this + 36);
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  v6.byPrefix = v4;
  v6.dwInfo = *(_DWORD *)(this + 48);
  v6.nNum = *(_DWORD *)(this + 52);
  v6.byMaxEnd = *(_BYTE *)(this + 92);
  v6.byCurEnd = *(_BYTE *)(this + 96);
  v6.byVer = *(_BYTE *)(this + 84);
  v6.byXAttack = *(_BYTE *)(this + 100);
  v6.byXMagic = *(_BYTE *)(this + 104);
  v6.byXDefense = *(_BYTE *)(this + 108);
  v6.byXHit = *(_BYTE *)(this + 112);
  v6.byXDodge = *(_BYTE *)(this + 116);
  v6.byProtect = *(_BYTE *)(this + 120);
  v6.byUpgrLevel = 0;
  v6.byUpgrRate = 0;
  CPlayer::_StorageIn((CPlayer *)a2, &v6, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    S2D_PUTINSTORAGE,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((CBase *)this);
  return 1;
}

//----- (0042B210) --------------------------------------------------------
int __thiscall CItemDefense::Charming(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // esi
  int v5; // esi
  int v6; // [esp+4h] [ebp-34h]
  int v7; // [esp+8h] [ebp-30h]
  int v8; // [esp+Ch] [ebp-2Ch]
  int v9; // [esp+10h] [ebp-28h]
  int a5; // [esp+24h] [ebp-14h]
  int v12; // [esp+2Ch] [ebp-Ch]
  int v13; // [esp+30h] [ebp-8h]
  unsigned int v14; // [esp+34h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState((CItem *)this, 1) )
    return 0;
  v14 = CItem::IsState((CItem *)this, 64);
  if ( a3 == 10 )
  {
    if ( (int)this[29] >= 1 || (v5 = this[29], dword_4D5C48[v5] < Random(1, 10000000)) )
    {
LABEL_18:
      if ( v14 )
      {
        CDBSocket::Write(S2D_UPDATEITEMINFO, "dddbb", this[9], this[8], 64, 0, a3);
        CItem::SubState((CItem *)this, 64);
        CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
        result = 1;
      }
      else
      {
        if ( Random(1, 100) > 90 )
        {
          this[24] = 0;
        }
        else
        {
          v12 = Random(1, 100);
          if ( v12 <= 50 )
          {
            if ( v12 <= 20 )
              v13 = 3;
            else
              v13 = 2;
          }
          else
          {
            v13 = 1;
          }
          this[24] -= v13;
        }
        if ( (int)this[24] <= 0 )
        {
          CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], 0);
          if ( this[11] )
            v9 = *(_DWORD *)(this[11] + 32);
          else
            v9 = 0;
          CDBSocket::Write(
            S2D_DELETEITEM,
            "ddwdbddd",
            this[9],
            this[8],
            *(_DWORD *)(this[10] + 64),
            this[13],
            21,
            ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v9 << 24),
            (unsigned __int8)this[29] | ((unsigned __int8)this[27] << 16),
            (unsigned __int8)this[30] << 24);
          a5 = 0;
          if ( *(_DWORD *)(this[10] + 72) == 3 )
          {
            if ( CItem::GetLevel(this) >= 44 )
            {
              if ( CItem::GetLevel(this) - 40 >= 20 )
                v8 = 20;
              else
                v8 = CItem::GetLevel(this) - 40;
              if ( (int)this[27] >= 10 )
                v7 = 10;
              else
                v7 = this[27];
              a5 = dword_4D603C[v7] + dword_4D5FE8[v8];
            }
          }
          else
          {
            if ( (int)this[27] >= 10 )
              v6 = 10;
            else
              v6 = this[27];
            a5 = dword_4D603C[v6] + (*(_DWORD *)(this[10] + 112) + 1000) / 10000;
          }
          if ( a5 > 0 )
            CItem::InsertItem((CItem *)this, (CPlayer *)a2, 21, 517, 0, a5, -1);
          CBase::Delete((CBase *)this);
        }
        else
        {
          CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], this[24]);
          CDBSocket::Write(S2D_UPDATEITEMEND, "ddb", this[9], this[8], this[24]);
        }
        result = 1;
      }
      return result;
    }
    CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], 10, ++this[29], v14);
  }
  else
  {
    if ( a3 != 15 )
      return 0;
    if ( (int)this[27] >= 10 )
      goto LABEL_18;
    v4 = this[27];
    if ( dword_4D5BE8[v4] < Random(1, 10000000) )
      goto LABEL_18;
    CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], a3, ++this[27], v14);
  }
  if ( v14 )
    CItem::SubState((CItem *)this, 64);
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  return 1;
}

//----- (0042B630) --------------------------------------------------------
int __thiscall CItemDefense::CharmingCheat(_DWORD *this, int a2, int a3, int a4)
{
  unsigned int v6; // [esp+8h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState((CItem *)this, 1) )
    return 0;
  v6 = CItem::IsState((CItem *)this, 64);
  if ( a3 == 10 )
  {
    this[29] = a4;
    CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], 10, this[29], v6);
  }
  else
  {
    if ( a3 != 15 )
      return 0;
    this[27] = a4;
    CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", this[9], this[8], 15, this[27], v6);
  }
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  return 1;
}

//----- (0042B710) --------------------------------------------------------
int __thiscall CItemDefense::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v6; // [esp+0h] [ebp-40h]
  int v7; // [esp+4h] [ebp-3Ch]
  int v8; // [esp+8h] [ebp-38h]
  int v9; // [esp+Ch] [ebp-34h]
  int v10; // [esp+10h] [ebp-30h]
  int a6; // [esp+18h] [ebp-28h]
  int v13; // [esp+28h] [ebp-18h]
  int i; // [esp+2Ch] [ebp-14h]
  int v15; // [esp+30h] [ebp-10h]
  int v16; // [esp+34h] [ebp-Ch]
  unsigned int v17; // [esp+3Ch] [ebp-4h]

  if ( CItem::IsState((CItem *)this, 1) || a3 >= 0 && a3 != 1 )
    return 0;
  if ( this[11] )
    v10 = *(_DWORD *)(this[11] + 32);
  else
    v10 = 0;
  v15 = v10;
  v16 = Random(1, 100);
  v17 = CItem::IsState((CItem *)this, 64);
  for ( i = 0; i < 2; ++i )
  {
    if ( v16 <= *(_DWORD *)(a4 + 4 * i) )
    {
      v15 = *(_DWORD *)(a5 + 4 * i);
      break;
    }
  }
  if ( v10 == v15 )
  {
    if ( v17 )
    {
      CDBSocket::Write(S2D_UPDATEITEMINFO, "dddbb", this[9], this[8], 64, 0, 255);
      CItem::SubState((CItem *)this, 64);
      CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
      return 1;
    }
    this[24] -= 5;
    if ( (int)this[24] <= 0 )
    {
      CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], 0);
      if ( this[11] )
        v9 = *(_DWORD *)(this[11] + 32);
      else
        v9 = 0;
      CDBSocket::Write(
        S2D_DELETEITEM,
        "ddwdbddd",
        this[9],
        this[8],
        *(_DWORD *)(this[10] + 64),
        this[13],
        27,
        ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v9 << 24),
        (unsigned __int8)this[29] | ((unsigned __int8)this[27] << 16),
        (unsigned __int8)this[30] << 24);
      if ( CItem::GetLevel(this) >= 40 )
      {
        a6 = 0;
        if ( *(_DWORD *)(this[10] + 72) == 3 )
        {
          if ( CItem::GetLevel(this) >= 44 )
          {
            if ( CItem::GetLevel(this) - 40 >= 20 )
              v8 = 20;
            else
              v8 = CItem::GetLevel(this) - 40;
            if ( (int)this[27] >= 10 )
              v7 = 10;
            else
              v7 = this[27];
            a6 = dword_4D603C[v7] + dword_4D5FE8[v8];
          }
        }
        else
        {
          if ( (int)this[27] >= 10 )
            v6 = 10;
          else
            v6 = this[27];
          a6 = dword_4D603C[v6] + (*(_DWORD *)(this[10] + 112) + 1000) / 10000;
        }
        if ( a6 > 0 )
          CItem::InsertItem((CItem *)this, (CPlayer *)a2, 21, 517, 0, a6, -1);
      }
      CBase::Delete((CBase *)this);
    }
    else
    {
      CPlayer::Write((CPlayer *)a2, S2C_UPDATEITEMEND, "db", this[9], this[24]);
      CDBSocket::Write(S2D_UPDATEITEMEND, "ddb", this[9], this[8], this[24]);
    }
  }
  else
  {
    v13 = sub_425CB0(v15);
    if ( !v13 )
      return 0;
    this[11] = v13;
    CDBSocket::Write(S2D_UPDATEITEMPREFIX, "ddbb", this[9], this[8], v15, v17);
    if ( v17 )
      CItem::SubState((CItem *)this, 64);
    CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  }
  return 1;
}

//----- (0042BAB0) --------------------------------------------------------
int __thiscall CItemDefense::Protect(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-10h]
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  if ( CItem::GetLevel(this) < 40
    || stru_4E35B4.m_nRef != 2 && this[30] >= *(_DWORD *)(this[10] + 168)
    || CItem::IsState((CItem *)this, 65) )
  {
    return 0;
  }
  if ( this[11] )
    v3 = *(_DWORD *)(this[11] + 32);
  else
    v3 = 0;
  v5 = ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v3 << 24);
  v6 = (unsigned __int8)this[29] | ((unsigned __int8)this[27] << 16);
  CDBSocket::Write(
    S2D_UPDATEITEMINFO,
    "dddbwddb",
    this[9],
    this[8],
    64,
    1,
    *(_DWORD *)(this[10] + 64),
    v5,
    v6,
    ++this[30]);
  CItem::AddState((CItem *)this, 64);
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  return 1;
}

//----- (0042BBD0) --------------------------------------------------------
int __thiscall CItemDefense::GetSellMoney(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = *(_DWORD *)(this[10] + 112);
  if ( this[11] )
    v3 += *(_DWORD *)(this[11] + 40) * v3 / 100;
  if ( this[27] )
    v3 += 100 * this[27] * this[27] * this[27];
  if ( this[29] )
    v3 += 200 * this[29] * this[29] * this[29];
  return v3;
}

//----- (0042BC70) --------------------------------------------------------
void __thiscall CItemDefense::UpgradeDestroy(CPlayer *this, int a2)
{
  int v2; // [esp+0h] [ebp-18h]
  int v3; // [esp+4h] [ebp-14h]
  int v4; // [esp+8h] [ebp-10h]
  BOOL v5; // [esp+Ch] [ebp-Ch]
  int a5; // [esp+14h] [ebp-4h]

  if ( *(_DWORD *)(*(_DWORD *)&this->m_szName[8] + 72) == 3 )
    v5 = CItem::GetLevel(this) < 44;
  else
    v5 = CItem::GetLevel(this) < 40;
  if ( !v5
    && !CItem::IsState((CItem *)this, 1)
    && ((int (__thiscall *)(CPlayer *, int, int))this->UpdateProperty)(this, a2, 45) )
  {
    a5 = 0;
    if ( *(_DWORD *)(*(_DWORD *)&this->m_szName[8] + 72) == 3 )
    {
      if ( CItem::GetLevel(this) >= 44 )
      {
        if ( CItem::GetLevel(this) - 40 >= 20 )
          v4 = 20;
        else
          v4 = CItem::GetLevel(this) - 40;
        if ( this->m_prtyPt.nPt[4] >= 10 )
          v3 = 10;
        else
          v3 = this->m_prtyPt.nPt[4];
        a5 = dword_4D603C[v3] + dword_4D5FE8[v4];
      }
    }
    else
    {
      if ( this->m_prtyPt.nPt[4] >= 10 )
        v2 = 10;
      else
        v2 = this->m_prtyPt.nPt[4];
      a5 = dword_4D603C[v2] + (*(_DWORD *)(*(_DWORD *)&this->m_szName[8] + 112) + 1000) / 10000;
    }
    if ( a5 > 0 )
      CItem::InsertItem((CItem *)this, (CPlayer *)a2, 21, 517, 0, a5, -1);
    CPlayer::_OutofInven((CPlayer *)a2, (CItem *)this);
  }
}

//----- (0042BDD0) --------------------------------------------------------
void __thiscall CItemMask::SetWearState(_DWORD *this, int a2)
{
  if ( CItem::IsState(this, 1) )
  {
    CItem::SubState(this, 1);
    CDBSocket::Write(5, "d", this[9]);
  }
}

//----- (0042BE10) --------------------------------------------------------
void __stdcall CItemMask::PutOn(int a1)
{
  CPlayer::Write(a1, 67, "b", 109);
}

//----- (0042BE40) --------------------------------------------------------
_DWORD *__thiscall CItemMask::Init(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *result; // eax

  this[11] = 0;
  this[13] = 1;
  this[24] = 1;
  result = this;
  this[23] = 1;
  return result;
}

//----- (0042BE80) --------------------------------------------------------
void __thiscall CItemStandard::SetWearState(_DWORD *this, int a2)
{
  if ( *(_DWORD *)(a2 + 480) || *(int *)(this[10] + 160) < 0 )
  {
    if ( CItem::IsState(this, 1) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
  }
  else
  {
    CItemStandard::Broken((CPlayer *)this, (_DWORD *)a2, 0);
  }
}

//----- (0042BEF0) --------------------------------------------------------
int *__thiscall CItemStandard::ApplySpec(int *this, int a2)
{
  int *result; // eax

  result = this;
  if ( !this[31] )
  {
    CInitItem::ApplySpec(this[10], a2);
    result = this;
    this[31] = 1;
  }
  return result;
}

//----- (0042BF30) --------------------------------------------------------
int *__thiscall CItemStandard::FreeSpec(int *this, int a2)
{
  int *result; // eax

  result = this;
  if ( this[31] )
  {
    CInitItem::FreeSpec(this[10], a2);
    result = this;
    this[31] = 0;
  }
  return result;
}

//----- (0042BF70) --------------------------------------------------------
void __thiscall CItemStandard::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-24h]
  int v4; // [esp-4h] [ebp-20h]

  if ( *(int *)(this[10] + 160) < 0 )
  {
    if ( CItem::IsState(this, 1) || !CChar::IsNormal((int)a2) || CChar::IsGState(a2, 512) )
      return;
    if ( CPlayer::IsWState(a2, 13) )
    {
LABEL_11:
      CPlayer::Write((int)a2, 67, "b", 10);
      return;
    }
LABEL_24:
    this[32] = GetTickCount() + 10000;
    CPlayer::AddWState(a2, 13);
    a2[128] = (unsigned __int16)a2[128] | (*(_DWORD *)(this[10] + 64) << 16);
    a2[279] = this;
    a2[280] = *(_DWORD *)(this[10] + 160);
    CItem::AddState(this, 1);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    v4 = *(unsigned __int16 *)(this[10] + 64);
    v3 = this[9];
    v2 = CBase::Id(a2);
    CChar::WriteInSight((int)a2, 5, "ddw", v2, v3, v4);
    CDBSocket::Write(4, "d", this[9]);
    return;
  }
  if ( !a2[120] )
  {
    CItemStandard::Broken((CPlayer *)this, a2, 1);
    return;
  }
  if ( !CItem::IsState(this, 1)
    && CChar::IsNormal((int)a2)
    && !CChar::IsGState(a2, 512)
    && (int)a2[122] >= 3
    && (int)a2[129] <= 5 )
  {
    if ( CPlayer::IsWState(a2, 13) )
      goto LABEL_11;
    if ( CChar::IsMState(a2, 0x2000i64) )
      CChar::CancelBuff(a2, 12);
    if ( CChar::IsMState(a2, 0x1000000000i64) )
      CChar::CancelBuff(a2, 40);
    if ( CChar::IsMState(a2, 1i64) )
      (*(void (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 124))(a2, 1, 0);
    goto LABEL_24;
  }
}

//----- (0042C1B0) --------------------------------------------------------
void __thiscall CItemStandard::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-Ch]
  int v4; // [esp-4h] [ebp-8h]

  if ( CItem::IsState(this, 1) && CPlayer::IsWState(a2, 13) )
  {
    if ( this[32] <= GetTickCount() )
    {
      CPlayer::SubWState(a2, 13);
      a2[128] = (unsigned __int16)a2[128];
      a2[279] = 0;
      a2[280] = -1;
      CItem::SubState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = CBase::Id(a2);
      CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::Write((int)a2, 67, "b", 79);
    }
  }
}

//----- (0042C2B0) --------------------------------------------------------
int __stdcall CItemStandard::CanDrop(int a1, int a2)
{
  CPlayer::Write(a2, 67, "b", 78);
  return 0;
}

//----- (0042C2E0) --------------------------------------------------------
BOOL __thiscall CItemStandard::CanTrade(_DWORD *this, int a2, int a3, int a4)
{
  BOOL result; // eax

  if ( !CItem::IsState(this, 1) && a4 && *(_DWORD *)(a3 + 480) == *(_DWORD *)(a4 + 480) && *(int *)(a4 + 516) < 6 )
    result = CItem::CanTrade(this, a2, a3, a4);
  else
    result = 0;
  return result;
}

//----- (0042C340) --------------------------------------------------------
int __thiscall CItemStandard::Broken(CPlayer *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int v5; // [esp-8h] [ebp-Ch]
  int v6; // [esp-4h] [ebp-8h]

  if ( a3 && CItem::IsState((CItem *)this, 1) )
  {
    if ( CPlayer::IsWState((CPlayer *)a2, 13) )
      CPlayer::SubWState((CPlayer *)a2, 13);
    a2[128] = (unsigned __int16)a2[128];
    a2[279] = 0;
    a2[280] = -1;
    CItem::SubState((CItem *)this, 1);
    ((void (__thiscall *)(CPlayer *, _DWORD *))this->AddBState)(this, a2);
    v6 = *(unsigned __int16 *)(*(_DWORD *)&this->m_szName[8] + 64);
    v5 = *(_DWORD *)&this->m_szName[4];
    v3 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_PUTOFFITEM, "ddw", v3, v5, v6);
    CDBSocket::Write(S2D_PUTOFFITEM, "d", *(_DWORD *)&this->m_szName[4]);
  }
  CPlayer::_OutofInven((CPlayer *)a2, (CItem *)this);
  CPlayer::Write((CPlayer *)a2, S2C_TRASHITEM, "db", *(_DWORD *)&this->m_szName[4], 4);
  return ((int (__thiscall *)(CPlayer *, int))this->UpdatePrtyPt)(this, 4);
}

//----- (0042C450) --------------------------------------------------------
CItemOrnament *__thiscall CItemOrnament::CItemOrnament(CItemOrnament *this, int a2)
{
  CItem::CItem(this);
  *(_DWORD *)this = &off_4B7038;
  *((_DWORD *)this + 10) = a2;
  return this;
}
// 4B7038: using guessed type int (__stdcall *off_4B7038)(int);

//----- (0042C480) --------------------------------------------------------
int __thiscall CItemOrnament::Init(_DWORD *this, char a2, int a3, int a4)
{
  int result; // eax

  result = sub_425CB0(a2);
  this[11] = result;
  this[13] = 1;
  return result;
}

//----- (0042C4B0) --------------------------------------------------------
void __thiscall CItemOrnament::SetWearState(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    if ( *(int *)(this[10] + 96) >= 0 && *(_DWORD *)(this[10] + 96) != a2[115]
      || *(_DWORD *)(this[10] + 100) > a2[15]
      || (v3 = *(_DWORD *)(this[10] + 72) - 2, CPlayer::IsWState(a2, v3)) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::AddWState(a2, v3);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    }
  }
}

//----- (0042C560) --------------------------------------------------------
int __thiscall CItemOrnament::Trash(CItem *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-Ch]

  if ( CItem::IsState(this, 1) )
  {
    CPlayer::Write(a2, 67, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, 8, "db", this->m_nIID, a3);
    if ( this->m_pPrefix )
      v4 = this->m_pPrefix->m_nPrefix;
    else
      v4 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nNum,
      a3,
      ((unsigned __int8)this->m_nVer << 8) | (v4 << 24),
      0,
      0);
    CBase::Delete(this);
    result = 1;
  }
  return result;
}

//----- (0042C640) --------------------------------------------------------
int __thiscall CItemOrnament::Erase(CItem *this, int a2)
{
  int v3; // [esp+0h] [ebp-Ch]

  if ( *((_DWORD *)this + 9) )
  {
    if ( *((_DWORD *)this + 11) )
      v3 = *(_DWORD *)(*((_DWORD *)this + 11) + 32);
    else
      v3 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *((_DWORD *)this + 9),
      *((_DWORD *)this + 8),
      *(_DWORD *)(*((_DWORD *)this + 10) + 64),
      *((_DWORD *)this + 13),
      a2,
      ((unsigned __int8)*((_DWORD *)this + 21) << 8) | (v3 << 24),
      0,
      0);
  }
  return CBase::Delete(this);
}

//----- (0042C6E0) --------------------------------------------------------
BOOL __thiscall CItemOrnament::ApplySpec(int *this, int a2)
{
  BOOL result; // eax

  result = CInitItem::ApplySpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::ApplySpec(this[11], a2);
  return result;
}

//----- (0042C720) --------------------------------------------------------
BOOL __thiscall sub_42C720(int *this, int a2)
{
  BOOL result; // eax

  result = CInitItem::FreeSpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::FreeSpec(this[11], a2);
  return result;
}

//----- (0042C760) --------------------------------------------------------
void __thiscall CItemOrnament::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( (*(int *)(this[10] + 96) < 0 || *(_DWORD *)(this[10] + 96) == a2[115]) && *(_DWORD *)(this[10] + 100) <= a2[15] )
  {
    if ( !CItem::IsState(this, 1) )
    {
      v6 = *(_DWORD *)(this[10] + 72) - 2;
      if ( CPlayer::IsWState(a2, v6) )
      {
        CPlayer::Write((int)a2, 67, "b", 10);
      }
      else
      {
        CPlayer::AddWState(a2, v6);
        CItem::AddState(this, 1);
        (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
        v4 = *(unsigned __int16 *)(this[10] + 64);
        v3 = this[9];
        v2 = CBase::Id(a2);
        CPlayer::Write((int)a2, 5, "ddw", v2, v3, v4);
        CDBSocket::Write(4, "d", this[9]);
      }
    }
  }
  else
  {
    CPlayer::Write((int)a2, 67, "b", 12);
  }
}

//----- (0042C870) --------------------------------------------------------
void __thiscall CItemOrnament::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    v6 = *(_DWORD *)(this[10] + 72) - 2;
    if ( CPlayer::IsWState(a2, v6) )
    {
      CPlayer::SubWState(a2, v6);
      CItem::SubState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = CBase::Id(a2);
      CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
      CDBSocket::Write(5, "d", this[9]);
    }
  }
}

//----- (0042C920) --------------------------------------------------------
void __thiscall CItemOrnament::Insert(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // [esp+0h] [ebp-10h]
  int v6; // [esp+Ch] [ebp-4h]

  v6 = this[8];
  this[8] = *(_DWORD *)(a2 + 452);
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_INSERTITEM);
  if ( a4 )
  {
    CDBSocket::Write(S2D_UPDATEITEMPID, "dddwbd", this[9], v6, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  }
  else
  {
    if ( this[11] )
      v4 = *(_DWORD *)(this[11] + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      S2D_INSERTITEM,
      "dwbddbbdb",
      this[9],
      *(_DWORD *)(this[10] + 64),
      v4,
      this[12],
      this[13],
      0,
      this[21],
      this[8],
      a3);
  }
}

//----- (0042CA20) --------------------------------------------------------
int __thiscall CItemOrnament::UpdateNum(int this, int a2, int a3, int a4)
{
  int v5; // [esp+0h] [ebp-Ch]

  if ( a4 + *(_DWORD *)(this + 52) > 0 )
    return *(_DWORD *)(this + 52);
  CPlayer::Write(a2, 9, "ddb", *(_DWORD *)(this + 36), 0, a3);
  if ( a3 == 50 )
  {
    CDBSocket::Write(
      7,
      "dddwbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(a2 + 452),
      0,
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      50,
      *(_DWORD *)(this + 52));
  }
  else
  {
    if ( *(_DWORD *)(this + 44) )
      v5 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v5 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | (v5 << 24),
      0,
      0);
  }
  *(_DWORD *)(this + 52) = 0;
  CBase::Delete((CItem *)this);
  return 0;
}

//----- (0042CB30) --------------------------------------------------------
BOOL __thiscall CItemTransform::CanDrop(_DWORD *this, int a2, int a3)
{
  if ( !CItem::IsState(this, 1) )
    return CItem::CanDrop(this, a2, a3);
  CPlayer::Write(a3, 67, "b", 13);
  return 0;
}

//----- (0042CB80) --------------------------------------------------------
int __thiscall CItemOrnament::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-24h]
  ITEMINFO v6; // [esp+8h] [ebp-1Ch] BYREF

  if ( CItem::IsState((CItem *)this, 1) )
    return 0;
  v6.wIndex = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v6.nIID = *(_DWORD *)(this + 36);
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  v6.byPrefix = v4;
  v6.dwInfo = *(_DWORD *)(this + 48);
  v6.nNum = *(_DWORD *)(this + 52);
  v6.byMaxEnd = 0;
  v6.byCurEnd = 0;
  v6.byVer = *(_BYTE *)(this + 84);
  v6.byXAttack = 0;
  v6.byXMagic = 0;
  v6.byXDefense = 0;
  v6.byXHit = 0;
  v6.byXDodge = 0;
  v6.byProtect = 0;
  v6.byUpgrLevel = 0;
  v6.byUpgrRate = 0;
  CPlayer::_StorageIn((CPlayer *)a2, &v6, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    S2D_PUTINSTORAGE,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((CBase *)this);
  return 1;
}

//----- (0042CC80) --------------------------------------------------------
void __thiscall CItemOrnament::ForcedStorageIn(_DWORD *this, int a2, int a3, char *a4, int a5)
{
  LONG v5; // eax
  int v6; // [esp-24h] [ebp-34h]
  int v7; // [esp-1Ch] [ebp-2Ch]
  int v8; // [esp-18h] [ebp-28h]
  int v9; // [esp-10h] [ebp-20h]
  char *v10; // [esp+0h] [ebp-10h]
  int v11; // [esp+4h] [ebp-Ch]

  if ( this[11] )
    v11 = *(_DWORD *)(this[11] + 32);
  else
    v11 = 0;
  if ( a4 )
    v10 = a4;
  else
    v10 = &DefaultNullString;
  v9 = this[21];
  v8 = this[13];
  v7 = this[12];
  v6 = *(_DWORD *)(this[10] + 64);
  v5 = CItem::NewIID();
  CDBSocket::Write(35, "bdwbddbbdds", a2, v5, v6, v11, v7, v8, 0, v9, a3, a5, v10);
}

//----- (0042CD20) --------------------------------------------------------
int __thiscall CItemOrnament::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v6; // [esp+0h] [ebp-1Ch]
  int v8; // [esp+8h] [ebp-14h]
  int i; // [esp+Ch] [ebp-10h]
  int v10; // [esp+10h] [ebp-Ch]
  int v11; // [esp+14h] [ebp-8h]

  if ( CItem::IsState((CItem *)this, 1) || a3 >= 0 && a3 != 2 )
    return 0;
  if ( this[11] )
    v6 = *(_DWORD *)(this[11] + 32);
  else
    v6 = 0;
  v10 = v6;
  v11 = Random(1, 100);
  for ( i = 0; i < 2; ++i )
  {
    if ( v11 <= *(_DWORD *)(a4 + 4 * i) )
    {
      v10 = *(_DWORD *)(a5 + 4 * i);
      break;
    }
  }
  if ( v6 == v10 )
  {
    CPlayer::Write((CPlayer *)a2, S2C_MESSAGE, "b", 54);
  }
  else
  {
    v8 = sub_425CB0(v10);
    if ( !v8 )
      return 0;
    this[11] = v8;
    CDBSocket::Write(S2D_UPDATEITEMPREFIX, "ddbb", this[9], this[8], v10, 0);
    CItem::SendItemInfo((CItem *)this, (CPlayer *)a2, S2C_UPDATEITEMINFO);
  }
  return 1;
}

//----- (0042CE40) --------------------------------------------------------
int __thiscall CItemOrnament::GetSellMoney(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = *(_DWORD *)(this[10] + 112);
  if ( this[11] )
    v3 += *(_DWORD *)(this[11] + 40) * v3 / 100;
  return v3;
}

//----- (0042CE90) --------------------------------------------------------
void __thiscall CItemOrnament::UpgradeDestroy(int this, int a2)
{
  if ( *(_DWORD *)(*(_DWORD *)(this + 40) + 64) != 596 && !CItem::IsState((CItem *)this, 1) )
  {
    if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)this + 88))(this, a2, 45) )
    {
      CItem::InsertItem((CItem *)this, (CPlayer *)a2, 45, 517, 0, 1, -1);
      CPlayer::_OutofInven((CPlayer *)a2, (CItem *)this);
    }
  }
}

//----- (0042CF10) --------------------------------------------------------
_DWORD *__thiscall sub_42CF10(_DWORD *this, int a2)
{
  CItem::CItem((CItem *)this);
  *this = &off_4B7118;
  this[10] = a2;
  return this;
}
// 4B7118: using guessed type int (__stdcall *off_4B7118)(int);

//----- (0042CF40) --------------------------------------------------------
int __thiscall CItem::Sum(CItem *this, int nNum)
{
  if ( nNum <= 0 || (unsigned int)(nNum + this->m_nNum) <= 0x7FFFFFFF )// variable: dwSum  missing -HighGamer
    return nNum + this->m_nNum;
  LOG_ERR(
    "Excess of Item Num : PID(%d), Index(%d), IID(%d), Num(%d), AddNum(%d)",
    this->m_nPID,
    this->m_pInit->m_nIndex,
    this->m_nIID,
    this->m_nNum,
    nNum);
  return 0x7FFFFFFF;
}

//----- (0042CFB0) --------------------------------------------------------
int __thiscall CItemGeneral::Use(CItemGeneral *this, CPlayer *pPlayer)
{
  int m_nId; // eax
  int m_nEffect; // [esp-4h] [ebp-8h]

  if ( CInitItem::Use(this->m_pInit, pPlayer) )
  {
    this->UpdateNum(this, pPlayer, this->m_pInit->m_bPay != 0 ? 43 : 9, -1);
    if ( this->m_pInit->m_nEffect )
    {
      m_nEffect = this->m_pInit->m_nEffect;
      m_nId = CBase::Id(pPlayer);
      CChar::WriteInRect(pPlayer, S2C_EFFECT, 15, "db", m_nId, m_nEffect);
    }
  }
  return this->m_nNum;
}

//----- (0042D040) --------------------------------------------------------
CItem *__thiscall CItemGeneral::Trade(CItemGeneral *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  CItemGeneral *pAddItem; // [esp+4h] [ebp-4h]

  if ( this->m_nNum < nNum )
    EBREAK();
  if ( this->m_nNum <= nNum )
  {
    this->m_nPID = 0;
    this->m_dwInfo |= 4u;
    CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      pPlayer->m_nPID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      nLogType,
      this->m_nNum);
    pAddItem = this;
  }
  else
  {
    this->m_nNum -= nNum;
    CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, this->m_nNum, nLogType);
    CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, -nNum, nLogType);
    pAddItem = (CItemGeneral *)CItem::CreateItem(this->m_pInit->m_nIndex, 0, nNum, this->m_nVer);
  }
  return pAddItem;
}

//----- (0042D180) --------------------------------------------------------
int __thiscall CItemGeneral::StorageIn(CItemGeneral *this, CPlayer *pPlayer, int nNum)
{
  int m_nNum; // [esp+0h] [ebp-2Ch]
  int nIID; // [esp+Ch] [ebp-20h] BYREF
  ITEMINFO iteminfo; // [esp+10h] [ebp-1Ch] BYREF

  if ( this->m_nNum >= nNum )
    m_nNum = nNum;
  else
    m_nNum = this->m_nNum;
  iteminfo.wIndex = 0;
  iteminfo.nIID = 0;
  *(_DWORD *)&iteminfo.byPrefix = 0;
  *(unsigned int *)((char *)&iteminfo.dwInfo + 3) = 0;
  *(_QWORD *)((char *)&iteminfo.nNum + 3) = 0i64;
  *(_DWORD *)&iteminfo.byXDodge = 0;
  iteminfo.dwInfo = this->m_dwInfo & 0x88;
  *(_DWORD *)&iteminfo.byVer = LOBYTE(this->m_nVer);
  if ( this->m_pInit->m_bPlural )
  {
    this->m_nNum -= m_nNum;
    if ( CPlayer::_FindStorageItem(pPlayer, this->m_pInit->m_nIndex, &nIID, this->m_dwInfo & 0x88, this->m_nVer) )
    {
      iteminfo.nIID = nIID;
      iteminfo.nNum = m_nNum;
      CDBSocket::Write(S2D_PUTINSTORAGE, "dddbd", nIID, this->m_nPID, pPlayer->m_nUID, 1, m_nNum);
      if ( this->m_nNum <= 0 )
        CDBSocket::Write(
          S2D_DELETEITEM,
          "ddwdbddd",
          this->m_nIID,
          this->m_nPID,
          this->m_pInit->m_nIndex,
          m_nNum,
          15,
          (unsigned __int8)this->m_nVer << 8,
          0,
          0);
      else
        CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, -m_nNum, 15);
    }
    else
    {
      iteminfo.wIndex = this->m_pInit->m_nIndex;
      iteminfo.nNum = m_nNum;
      if ( this->m_nNum <= 0 )
      {
        iteminfo.nIID = this->m_nIID;
        CDBSocket::Write(S2D_PUTINSTORAGE, "dddbd", this->m_nIID, this->m_nPID, pPlayer->m_nUID, 0, m_nNum);
      }
      else
      {
        iteminfo.nIID = CItem::NewIID();
        CDBSocket::Write(
          S2D_INSERTITEM,
          "dwbddbbdb",
          iteminfo.nIID,
          iteminfo.wIndex,
          0,
          this->m_dwInfo & 0x88 | 0x10,
          m_nNum,
          0,
          this->m_nVer,
          pPlayer->m_nUID,
          15);
        CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, -m_nNum, 15);
      }
    }
    CPlayer::_StorageIn(pPlayer, &iteminfo, this->m_nIID, this->m_nNum);
    if ( this->m_nNum > 0 )
      return 0;
  }
  else
  {
    iteminfo.nIID = this->m_nIID;
    iteminfo.wIndex = this->m_pInit->m_nIndex;
    iteminfo.nNum = this->m_nNum;
    CPlayer::_StorageIn(pPlayer, &iteminfo, this->m_nIID, 0);
    CDBSocket::Write(S2D_PUTINSTORAGE, "dddbd", this->m_nIID, this->m_nPID, pPlayer->m_nUID, 0, this->m_nNum);
  }
  CBase::Delete(this);
  return 1;
}

//----- (0042D460) --------------------------------------------------------
int __thiscall CItemGeneral::StorageOut(CItem *this, CPlayer *pPlayer, int nNum, int nIndex, _DWORD *nStorNum)
{
  int result; // eax
  int m_nNum; // [esp+0h] [ebp-10h]
  int nOldIID; // [esp+8h] [ebp-8h]
  CItem *pItem; // [esp+Ch] [ebp-4h]

  if ( !this->m_pInit->m_bPlural )
    return CItem::StorageOut(this, pPlayer, nNum, nIndex, nStorNum);
  if ( this->m_nNum >= nNum )
    m_nNum = nNum;
  else
    m_nNum = this->m_nNum;
  this->m_nNum -= m_nNum;
  pItem = CPlayer::_FindMergeItem(pPlayer, this);
  if ( pItem )
  {
    pItem->m_nNum = CItem::Sum(pItem, m_nNum);
    CPlayer::Write(pPlayer, S2C_UPDATE_SITEMNUM, "dd", pItem->m_nIID, pItem->m_nNum);
    CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", pItem->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, m_nNum, 15);
    *nStorNum = this->m_nNum;
    CPlayer::_StorageOut(pPlayer, this->m_nIID, *nStorNum);
    CDBSocket::Write(S2D_PUTOUTSTORAGE, "ddbd", this->m_nIID, this->m_nPID, (this->m_nNum <= 0) + 1, m_nNum);
    CBase::Delete(this);
    result = 0;
  }
  else if ( this->m_nNum <= 0 )
  {
    this->m_nNum = m_nNum;
    result = CItem::StorageOut(this, pPlayer, m_nNum, nIndex, nStorNum);
  }
  else
  {
    nOldIID = this->m_nIID;
    this->m_nIID = CItem::NewIID();
    *nStorNum = this->m_nNum;
    this->m_nNum = m_nNum;
    CItem::SendItemInfo(this, pPlayer, S2C_INSERT_SITEM);
    CDBSocket::Write(S2D_PUTOUTSTORAGE, "ddbd", nOldIID, this->m_nPID, 1, m_nNum);
    CDBSocket::Write(
      S2D_INSERTITEM,
      "dwbddbbdb",
      this->m_nIID,
      nIndex,
      0,
      this->m_dwInfo & 0x88,
      m_nNum,
      0,
      this->m_nVer,
      this->m_nPID,
      15);
    result = 1;
  }
  return result;
}

//----- (0042D670) --------------------------------------------------------
int __thiscall CItemGeneral::Enchant(CItemGeneral *this, CPlayer *pPlayer, CItem *pItem)
{
  if ( CInitItem::Enchant(this->m_pInit, pPlayer, pItem) )
    this->UpdateNum(this, pPlayer, 21, -1);
  return this->m_nNum;
}

//----- (0042D6B0) --------------------------------------------------------
CItemGeneral *__thiscall CItemGeneral::CItemGeneral(CItemGeneral *this, CInitItem *pInit)
{
  CItem::CItem(this);
  this->__vftable = (CItemGeneral_vtbl *)&off_4B7248;
  this->m_pInit = pInit;
  return this;
}
// 4B7248: using guessed type int (__stdcall *off_4B7248)(int);

//----- (0042D6E0) --------------------------------------------------------
int __thiscall CItemGeneral::UpdateNum(CItemGeneral *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  int nOldNum; // [esp+8h] [ebp-4h]
  int m_nNum; // [esp+1Ch] [ebp+10h]

  if ( !this->m_pInit->m_bPlural )
    return CItem::UpdateNum(this, pPlayer, nLogType, nNum);
  nOldNum = this->m_nNum;
  this->m_nNum = CItem::Sum(this, nNum);
  if ( this->m_nNum <= 0 )
  {
    CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, 0, nLogType);
    if ( nLogType == 50 )
      CDBSocket::Write(
        S2D_UPDATEITEMPID,
        "dddwbd",
        this->m_nIID,
        pPlayer->m_nPID,
        0,
        this->m_pInit->m_nIndex,
        50,
        this->m_nNum);
    else
      CDBSocket::Write(
        S2D_DELETEITEM,
        "ddwdbddd",
        this->m_nIID,
        this->m_nPID,
        this->m_pInit->m_nIndex,
        nOldNum,
        nLogType,
        (unsigned __int8)this->m_nVer << 8,
        0,
        0);
    m_nNum = 0;
    CBase::Delete(this);
  }
  else
  {
    CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, this->m_nNum, nLogType);
    CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, nNum, nLogType);
    m_nNum = this->m_nNum;
  }
  return m_nNum;
}

//----- (0042D860) --------------------------------------------------------
BOOL __thiscall CItemQuest::CanMerge(CItemQuest *this, CItem *pConvItem)
{
  unsigned int v2; // esi
  BOOL v4; // [esp+4h] [ebp-8h]

  v4 = 0;
  if ( this->m_pInit == pConvItem->m_pInit )
  {
    v2 = CItem::IsState(this, 0x88);
    if ( v2 == CItem::IsState(pConvItem, 0x88) && (stru_4E35B4.m_nRef != 2 || this->m_nVer == pConvItem->m_nVer) )
      v4 = 1;
  }
  return v4;
}

//----- (0042D8D0) --------------------------------------------------------
CItemMoney *__thiscall CItemMoney::CItemMoney(CItemMoney *this, CInitItem *pInit)
{
  CItem::CItem(this);
  this->__vftable = (CItemMoney_vtbl *)&off_4B7328;
  this->m_pInit = pInit;
  return this;
}
// 4B7328: using guessed type int (__stdcall *off_4B7328)(int);

//----- (0042D900) --------------------------------------------------------
BOOL __thiscall CItemMoney::CanMerge(CItemMoney *this, CItem *pConvItem)
{
  return pConvItem->m_pInit == this->m_pInit;
}

//----- (0042D920) --------------------------------------------------------
int __thiscall CItemMoney::Trash(CItem *this, CPlayer *pPlayer, int nLogType)
{
  InterlockedExchangeAdd(&dword_4E2014, -this->m_nNum);
  pPlayer->m_pMoney = 0;
  CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
  CDBSocket::Write(
    S2D_DELETEITEM,
    "ddwdbddd",
    this->m_nIID,
    this->m_nPID,
    this->m_pInit->m_nIndex,
    this->m_nNum,
    nLogType,
    0,
    0,
    0);
  CBase::Delete(this);
  return 1;
}

//----- (0042D9C0) --------------------------------------------------------
void __thiscall CItemMoney::Insert(CItemMoney *this, CPlayer *pPlayer, int nLogType, int bOldItem)
{
  int nOldPID; // [esp+4h] [ebp-4h]

  if ( nLogType != 10 )
    InterlockedExchangeAdd(&dword_4E2014, this->m_nNum);
  if ( this->m_nFrom )
  {
    if ( this->m_nFrom == 1 )
    {
      pPlayer->m_nMlmMoney += this->m_nNum;
    }
    else if ( this->m_nFrom == 2 )
    {
      pPlayer->m_nMlmFee += this->m_nNum;
    }
  }
  pPlayer->m_pMoney = this;
  nOldPID = this->m_nPID;
  this->m_nPID = pPlayer->m_nPID;
  if ( nLogType == 10 )
    this->m_dwInfo &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, pPlayer, S2C_INSERTITEM);
  if ( bOldItem )
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      nOldPID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      nLogType,
      this->m_nNum);
  else
    CDBSocket::Write(
      S2D_INSERTITEM,
      "dwbddbbdb",
      this->m_nIID,
      this->m_pInit->m_nIndex,
      0,
      this->m_dwInfo,
      this->m_nNum,
      0,
      0,
      this->m_nPID,
      nLogType);
}

//----- (0042DB00) --------------------------------------------------------
int __thiscall CItemMoney::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  int result; // eax
  int nOldNum; // [esp+4h] [ebp-4h]

  if ( nLogType != 10 && nLogType != 26 && nLogType != 50 && nLogType != 51 && (nLogType != 15 || nNum < 0) )
    InterlockedExchangeAdd(&dword_4E2014, nNum);
  nOldNum = this->m_nNum;
  if ( nOldNum >= 0 )
  {
    this->m_nNum = CItem::Sum(this, nNum);
    if ( this->m_nNum <= 0 )
    {
      pPlayer->m_pMoney = 0;
      CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, this->m_nNum, nLogType);
      if ( nLogType == 50 || nLogType == 51 )
        CDBSocket::Write(
          S2D_UPDATEITEMPID,
          "dddwbd",
          this->m_nIID,
          pPlayer->m_nPID,
          0,
          this->m_pInit->m_nIndex,
          nLogType,
          this->m_nNum);
      else
        CDBSocket::Write(
          S2D_DELETEITEM,
          "ddwdbddd",
          this->m_nIID,
          this->m_nPID,
          this->m_pInit->m_nIndex,
          nOldNum,
          nLogType,
          0,
          0,
          0);
      this->m_nNum = 0;
      CBase::Delete(this);
    }
    else
    {
      CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, this->m_nNum, nLogType);
      CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, nNum, nLogType);
    }
    result = this->m_nNum;
  }
  else
  {
    CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, 1, nLogType);
    CDBSocket::Write(
      S2D_UPDATEITEMNUM,
      "ddwdb",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      1 - nOldNum,
      nLogType);
    LOG_ERR("nOldNum<0 :  UID(%d) PID(%d) IID(%d) Num(%d) ", pPlayer->m_nUID, this->m_nPID, this->m_nIID, nOldNum);
    result = 1;
  }
  return result;
}

//----- (0042DD20) --------------------------------------------------------
void __thiscall CItemMoney::Drop(CItemMoney *this, CChar *pChar, const tagPOINT *ptP, const tagPOINT *ptT, int bDropAll, int bParty, int nKeyID)
{
  int v7; // edx
  int nAddPer; // [esp+14h] [ebp-10h]
  CPlayer *pPlayer; // [esp+18h] [ebp-Ch]
  CIOBuffer *pBuffer; // [esp+20h] [ebp-4h]

  this->m_pMap = pChar->m_pMap;
  v7 = ptP->y;
  this->m_ptPixel.x = ptP->x;
  this->m_ptPixel.y = v7;
  this->m_dwTick = GetTickCount() + 180000;
  CIOObject::AddTimer(this, 0xEA60u, 0);
  if ( pChar->IsPlayer(pChar) )
  {
    if ( bDropAll )
    {
      InterlockedExchangeAdd(&dword_4E2014, -this->m_nNum);
      pChar[2].m_prtyPer.nHit = 0;
      CPlayer::Write((CPlayer *)pChar, S2C_TRASHITEM, "db", this->m_nIID, 11);
      CDBSocket::Write(
        S2D_UPDATEITEMPID,
        "dddwbd",
        this->m_nIID,
        this->m_nPID,
        0,
        this->m_pInit->m_nIndex,
        11,
        this->m_nNum);
    }
    else
    {
      this->m_nPID = pChar[1].m_nGeneralRef;
    }
  }
  else
  {
    if ( !bParty )
    {
      pPlayer = (CPlayer *)CPlayer::FindPlayer(nKeyID);
      if ( pPlayer )
      {
        nAddPer = 0;
        if ( CChar::IsBState(pPlayer, 4i64) )
        {
          nAddPer = 20;
        }
        else if ( CChar::IsBState(pPlayer, 1i64) )
        {
          nAddPer = 20;
        }
        if ( nAddPer )
          this->m_nNum += nAddPer * this->m_nNum / 100;
        CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
      }
    }
    this->m_bParty = bParty;
    this->m_nKeyID = nKeyID;
    CIOObject::AddTimer(this, 0x1D4C0u, 1);
  }
  pBuffer = (CIOBuffer *)MakePacket(
                           S2C_CREATEITEM,
                           "wdddd",
                           this->m_pInit->m_nIndex,
                           this->m_nId,
                           ptP->x,
                           ptP->y,
                           this->m_nNum);
  CSMap::SendPacketInRect(pChar->m_pMap, ptT, pBuffer, 25);
  CIOBuffer::Release(pBuffer);
}

//----- (0042DF30) --------------------------------------------------------
CItem *__thiscall CItemMoney::Trade(CItemMoney *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  CItemMoney *pAddItem; // [esp+4h] [ebp-4h]

  if ( this->m_nNum < nNum )
    EBREAK();                                   // Put Server in Debug mode (crash) if nNum < how much nNum have -HighGamer
  if ( this->m_nNum <= nNum )
  {
    this->m_nPID = 0;
    this->m_dwInfo |= 4u;
    pPlayer->m_pMoney = 0;
    CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      pPlayer->m_nPID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      nLogType,
      this->m_nNum);
    pAddItem = this;
  }
  else
  {
    this->m_nNum -= nNum;
    CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, this->m_nNum, nLogType);
    CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, -nNum, nLogType);
    pAddItem = (CItemMoney *)CItem::CreateItem(this->m_pInit->m_nIndex, 0, nNum, -1);
  }
  return pAddItem;
}

//----- (0042E080) --------------------------------------------------------
int __thiscall CItemMoney::StorageIn(CItemMoney *this, CPlayer *a2, int nNum)
{
  int m_nNum; // [esp+0h] [ebp-28h]
  ITEMINFO a2a; // [esp+8h] [ebp-20h] BYREF
  int nIID; // [esp+24h] [ebp-4h] BYREF

  if ( this->m_nNum >= nNum )
    m_nNum = nNum;
  else
    m_nNum = this->m_nNum;
  this->m_nNum -= m_nNum;
  a2a.wIndex = 0;
  a2a.nIID = 0;
  *(_DWORD *)&a2a.byPrefix = 0;
  *(unsigned int *)((char *)&a2a.dwInfo + 3) = 0;
  *(int *)((char *)&a2a.nNum + 3) = 0;
  *(_DWORD *)&a2a.byXAttack = 0;
  *(_DWORD *)&a2a.byXDodge = 0;
  a2a.dwInfo = this->m_dwInfo & 0x88;
  if ( CPlayer::_FindStorageItem(a2, this->m_pInit->m_nIndex, &nIID, this->m_dwInfo & 0x88, 0) )
  {
    a2a.nIID = nIID;
    a2a.nNum = m_nNum;
    CDBSocket::Write(S2D_PUTINSTORAGE, "dddbd", nIID, this->m_nPID, a2->m_nUID, 1, m_nNum);
    if ( this->m_nNum <= 0 )
    {
      a2->m_pMoney = 0;
      CDBSocket::Write(
        S2D_DELETEITEM,
        "ddwdbddd",
        this->m_nIID,
        this->m_nPID,
        this->m_pInit->m_nIndex,
        m_nNum,
        15,
        0,
        0,
        0);
    }
    else
    {
      CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, -m_nNum, 15);
    }
  }
  else
  {
    a2a.wIndex = this->m_pInit->m_nIndex;
    a2a.nNum = m_nNum;
    if ( this->m_nNum <= 0 )
    {
      a2->m_pMoney = 0;
      a2a.nIID = this->m_nIID;
      CDBSocket::Write(S2D_PUTINSTORAGE, "dddbd", this->m_nIID, this->m_nPID, a2->m_nUID, 0, m_nNum);
    }
    else
    {
      a2a.nIID = CItem::NewIID();
      CDBSocket::Write(
        S2D_INSERTITEM,
        "dwbddbbdb",
        a2a.nIID,
        a2a.wIndex,
        0,
        this->m_dwInfo & 0x88 | 0x10,
        m_nNum,
        0,
        0,
        a2->m_nUID,
        15);
      CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", this->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, -m_nNum, 15);
    }
  }
  CPlayer::_StorageIn(a2, &a2a, this->m_nIID, this->m_nNum);
  if ( this->m_nNum > 0 )
    return 0;
  CBase::Delete(this);
  return 1;
}

//----- (0042E2E0) --------------------------------------------------------
int __thiscall CItemMoney::StorageOut(CItem *this, CPlayer *pPlayer, int nNum, int nIndex, int *nStorNum)
{
  int result; // eax
  int m_nNum; // [esp+0h] [ebp-10h]
  int nOldIID; // [esp+8h] [ebp-8h]
  CItem *pItem; // [esp+Ch] [ebp-4h]

  if ( this->m_nNum >= nNum )
    m_nNum = nNum;
  else
    m_nNum = this->m_nNum;
  this->m_nNum -= m_nNum;
  pItem = CPlayer::_FindMergeItem(pPlayer, this);
  if ( pItem )
  {
    if ( pItem->m_nNum >= 0 )
    {
      pItem->m_nNum = CItem::Sum(pItem, m_nNum);
      CPlayer::Write(pPlayer, S2C_UPDATE_SITEMNUM, "dd", pItem->m_nIID, pItem->m_nNum);
      CDBSocket::Write(S2D_UPDATEITEMNUM, "ddwdb", pItem->m_nIID, this->m_nPID, this->m_pInit->m_nIndex, m_nNum, 15);
      *nStorNum = this->m_nNum;
      CPlayer::_StorageOut(pPlayer, this->m_nIID, *nStorNum);
      CDBSocket::Write(S2D_PUTOUTSTORAGE, "ddbd", this->m_nIID, this->m_nPID, (this->m_nNum <= 0) + 1, m_nNum);
      CBase::Delete(this);
      result = 0;
    }
    else
    {
      CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", pItem->m_nIID, 1, 15);
      CDBSocket::Write(
        S2D_UPDATEITEMNUM,
        "ddwdb",
        pItem->m_nIID,
        this->m_nPID,
        pItem->m_pInit->m_nIndex,
        1 - pItem->m_nNum,
        15);
      LOG_ERR(
        "nOldNum<0 :  UID(%d) PID(%d) IID(%d) Num(%d) LogType(%d)",
        pPlayer->m_nUID,
        this->m_nPID,
        pItem->m_nIID,
        pItem->m_nNum,
        15);
      result = 1;
    }
  }
  else
  {
    pPlayer->m_pMoney = (CItemMoney *)this;
    if ( this->m_nNum <= 0 )
    {
      this->m_nNum = m_nNum;
      result = CItem::StorageOut(this, pPlayer, m_nNum, nIndex, nStorNum);
    }
    else
    {
      nOldIID = this->m_nIID;
      this->m_nIID = CItem::NewIID();
      *nStorNum = this->m_nNum;
      this->m_nNum = m_nNum;
      CItem::SendItemInfo(this, pPlayer, S2C_INSERT_SITEM);
      CDBSocket::Write(S2D_PUTOUTSTORAGE, "ddbd", nOldIID, this->m_nPID, 1, m_nNum);
      CDBSocket::Write(
        S2D_INSERTITEM,
        "dwbddbbdb",
        this->m_nIID,
        nIndex,
        0,
        this->m_dwInfo & 0x88,
        m_nNum,
        0,
        0,
        this->m_nPID,
        15);
      result = 1;
    }
  }
  return result;
}

//----- (0042E570) --------------------------------------------------------
void __thiscall CItemMoney::SetEtc(CItemMoney *this, CPlayer *pPlayer)
{
  if ( this->m_nFrom )
  {
    if ( this->m_nFrom == 1 )
    {
      pPlayer->m_nMlmMoney += this->m_nNum;
    }
    else if ( this->m_nFrom == 2 )
    {
      pPlayer->m_nMlmFee += this->m_nNum;
    }
  }
  CItem::SetEtc(this, pPlayer);
}

//----- (0042E5E0) --------------------------------------------------------
CItemTransform *__thiscall CItemTransform::CItemTransform(CItemTransform *this, CInitItem *pInit)
{
  CItem::CItem(this);
  this->__vftable = (CItemTransform_vtbl *)&off_4B7470;
  this->m_pInit = pInit;
  this->m_nLevel = 0;
  this->m_nExp = 0;
  this->m_dwPutOn = 0;
  this->m_nTFLevel = 0;
  return this;
}
// 4B7470: using guessed type int (__stdcall *off_4B7470)(int);

//----- (0042E640) --------------------------------------------------------
void __thiscall CItemTransform::PutInfo(CItemTransform *this, char **ppInfo, int nNum)
{
  *ppInfo = PutNumeric<int>(*ppInfo, this->m_nIID);
  *ppInfo = (char *)PutNumeric<short>(*ppInfo, this->m_pInit->m_nIndex);
  *ppInfo = PutNumeric<unsigned char>(*ppInfo, 0);
  *ppInfo = PutNumeric<int>(*ppInfo, this->m_dwInfo);
  *ppInfo = PutNumeric<int>(*ppInfo, this->m_nExp);
  *ppInfo = PutNumeric<unsigned char>(*ppInfo, this->m_nLevel);
  memset(*ppInfo, 0, 0xAu);
  *ppInfo += 10;
}

//----- (0042E710) --------------------------------------------------------
void __thiscall CItemTransform::Init(CItemTransform *this, int nPID, _DWORD *ppInfo)
{
  this->m_nPID = nPID;
  this->m_nNum = 1;
  *ppInfo = GetNumeric<int>((_DWORD *)*ppInfo, &this->m_nIID);
  ++*ppInfo;
  *ppInfo = GetNumeric<int>((_DWORD *)*ppInfo, &this->m_dwInfo);
  *ppInfo = GetNumeric<int>((_DWORD *)*ppInfo, &this->m_nExp);
  *ppInfo = GetNumeric<unsigned char>((_BYTE *)*ppInfo, &this->m_nLevel);
  ++*ppInfo;
  *ppInfo = GetNumeric<unsigned char>((_BYTE *)*ppInfo, &this->m_nVer);
  *ppInfo += 8;
  this->m_dwInfo |= 0x20u;
}

//----- (0042E7F0) --------------------------------------------------------
void __thiscall CItemTransform::Init(CItemTransform *this, int nPrefix, int nNum, int nVer)
{
  this->m_dwInfo |= 0x20u;
  this->m_nNum = 1;
  this->m_nLevel = 1;
}

//----- (0042E820) --------------------------------------------------------
void __thiscall CItemTransform::SetWearState(CItemTransform *this, CPlayer *pPlayer)
{
  if ( CItem::IsState(this, 1) )
  {
    if ( pPlayer->m_nLevel < this->m_nLevel || CPlayer::IsWState(pPlayer, 10) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(S2D_PUTOFFITEM, "d", this->m_nIID);
    }
    else
    {
      CPlayer::AddWState(pPlayer, 0xAu);
      pPlayer->m_pTransform = this;
      pPlayer->m_nTFlag = 16 * this->m_pInit->m_nRace;
      this->ApplySpec(this, pPlayer);
    }
  }
}

//----- (0042E8C0) --------------------------------------------------------
int __thiscall CItemTransform::Trash(CItemTransform *this, CPlayer *pPlayer, int nLogType)
{
  int result; // eax

  if ( CItem::IsState(this, 1) )
  {
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(pPlayer, S2C_TRASHITEM, "db", this->m_nIID, nLogType);
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nExp,
      nLogType,
      ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this->m_nLevel << 16),
      0,
      0);
    CBase::Delete(this);
    result = 1;
  }
  return result;
}

//----- (0042E980) --------------------------------------------------------
void __thiscall CItemTransform::Erase(CItemTransform *this, int nLogType)
{
  if ( this->m_nIID )
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this->m_nExp,
      nLogType,
      ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this->m_nLevel << 16),
      0,
      0);
  CBase::Delete(this);
}

//----- (0042EA00) --------------------------------------------------------
void __thiscall CItemTransform::ApplySpec(CItemTransform *this, CPlayer *pPlayer)
{
  int nType; // [esp+4h] [ebp-8h]
  int nFactor; // [esp+8h] [ebp-4h]

  for ( nType = 0; nType <= 4; ++nType )
  {
    nFactor = dword_4D6090[11 * this->m_pInit->m_nRace + nType];
    if ( nFactor )
      pPlayer->UpdatePrtyPt(pPlayer, nType, 1, this->m_nLevel / nFactor + 1);
  }
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042EA70) --------------------------------------------------------
void __thiscall CItemTransform::FreeSpec(CItemTransform *this, CPlayer *pPlayer)
{
  int nType; // [esp+4h] [ebp-8h]
  int nFactor; // [esp+8h] [ebp-4h]

  for ( nType = 0; nType <= 4; ++nType )
  {
    nFactor = dword_4D6090[11 * this->m_pInit->m_nRace + nType];
    if ( nFactor )
      pPlayer->UpdatePrtyPt(pPlayer, nType, 0, this->m_nLevel / nFactor + 1);
  }
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042EAE0) --------------------------------------------------------
void __thiscall CItemTransform::PutOn(CItemTransform *this, CPlayer *pPlayer)
{
  int m_nId; // [esp-Ch] [ebp-10h]
  int m_nIID; // [esp-8h] [ebp-Ch]
  int m_nIndex; // [esp-4h] [ebp-8h]

  if ( pPlayer->m_nLevel >= this->m_nLevel && !CItem::IsState(this, 1) )
  {
    if ( CPlayer::IsWState(pPlayer, 10) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 10);
    }
    else
    {
      CPlayer::AddWState(pPlayer, 0xAu);
      pPlayer->m_pTransform = this;
      pPlayer->m_nTFlag = 16 * this->m_pInit->m_nRace;
      CItem::AddState(this, 1);
      this->ApplySpec(this, pPlayer);
      m_nIndex = LOWORD(this->m_pInit->m_nIndex);
      m_nIID = this->m_nIID;
      m_nId = CBase::Id(pPlayer);
      CPlayer::Write(pPlayer, S2C_PUTONITEM, "ddw", m_nId, m_nIID, m_nIndex);
      CDBSocket::Write(S2D_PUTONITEM, "d", this->m_nIID);
    }
  }
}

//----- (0042EBD0) --------------------------------------------------------
void __thiscall CItemTransform::PutOff(CItemTransform *this, CPlayer *pPlayer)
{
  int m_nId; // eax
  int m_nIID; // [esp-8h] [ebp-Ch]
  int m_nIndex; // [esp-4h] [ebp-8h]

  if ( CItem::IsState(this, 1) && CPlayer::IsWState(pPlayer, 10) && !CChar::IsGState(pPlayer, 0x200) )
  {
    CPlayer::SubWState(pPlayer, 10);
    pPlayer->m_pTransform = 0;
    pPlayer->m_nTFlag = 0;
    this->m_dwPutOn = 0;
    CItem::SubState(this, 1);
    this->FreeSpec(this, pPlayer);
    m_nIndex = LOWORD(this->m_pInit->m_nIndex);
    m_nIID = this->m_nIID;
    m_nId = CBase::Id(pPlayer);
    CPlayer::Write(pPlayer, S2C_PUTOFFITEM, "ddw", m_nId, m_nIID, m_nIndex);
    CDBSocket::Write(S2D_PUTOFFITEM, "d", this->m_nIID);
    CItemTransform::SaveInfo(this, 0);
  }
}

//----- (0042ECB0) --------------------------------------------------------
void __thiscall CItemTransform::Insert(CItemTransform *this, CPlayer *pPlayer, int nLogType, int bOldItem)
{
  int nOldPID; // [esp+4h] [ebp-4h]

  nOldPID = this->m_nPID;
  this->m_nPID = pPlayer->m_nPID;
  if ( nLogType == 10 )
    this->m_dwInfo &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, pPlayer, S2C_INSERTITEM);
  if ( bOldItem )
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      nOldPID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      nLogType,
      this->m_nNum);
  else
    CDBSocket::Write(
      S2D_INSERTITEM,
      "dwbddbbdb",
      this->m_nIID,
      this->m_pInit->m_nIndex,
      0,
      this->m_dwInfo,
      this->m_nExp,
      this->m_nLevel,
      this->m_nVer,
      this->m_nPID,
      nLogType);
}

//----- (0042ED90) --------------------------------------------------------
int __thiscall CItemTransform::UpdateNum(CItem *this, CPlayer *pPlayer, int nLogType, int nNum)
{
  if ( nNum + this->m_nNum > 0 )
    return this->m_nNum;
  CPlayer::Write(pPlayer, S2C_UPDATEITEMNUM, "ddb", this->m_nIID, 0, nLogType);
  if ( nLogType == 50 )
    CDBSocket::Write(
      S2D_UPDATEITEMPID,
      "dddwbd",
      this->m_nIID,
      pPlayer->m_nPID,
      0,
      this->m_pInit->m_nIndex,
      50,
      this->m_nNum);
  else
    CDBSocket::Write(
      S2D_DELETEITEM,
      "ddwdbddd",
      this->m_nIID,
      this->m_nPID,
      this->m_pInit->m_nIndex,
      this[1].m_nRef,
      nLogType,
      ((unsigned __int8)this->m_nVer << 8) | ((unsigned __int8)this[1].__vftable << 16),
      0,
      0);
  this->m_nNum = 0;
  CBase::Delete(this);
  return 0;
}

//----- (0042EE90) --------------------------------------------------------
BOOL __thiscall CItemTransform::CanTrade(CItemTransform *this, int nNum, CPlayer *pPlayer, CPlayer *pOther)
{
  BOOL result; // eax

  if ( CItem::IsState(this, 1) )
    result = 0;
  else
    result = CItem::CanTrade(this, nNum, pPlayer, pOther);
  return result;
}

//----- (0042EED0) --------------------------------------------------------
int __thiscall CItemTransform::StorageIn(CItemTransform *this, CPlayer *pPlayer, int nNum)
{
  ITEMINFO iteminfo; // [esp+4h] [ebp-1Ch] BYREF

  if ( CItem::IsState(this, 1) )
    return 0;
  iteminfo.wIndex = this->m_pInit->m_nIndex;
  iteminfo.nIID = this->m_nIID;
  iteminfo.byPrefix = 0;
  iteminfo.dwInfo = this->m_dwInfo;
  iteminfo.nNum = this->m_nExp;
  iteminfo.byMaxEnd = this->m_nLevel;
  iteminfo.byCurEnd = 0;
  iteminfo.byVer = this->m_nVer;
  iteminfo.byXAttack = 0;
  iteminfo.byXMagic = 0;
  iteminfo.byXDefense = 0;
  iteminfo.byXHit = 0;
  iteminfo.byXDodge = 0;
  iteminfo.byProtect = 0;
  iteminfo.byUpgrLevel = 0;
  iteminfo.byUpgrRate = 0;
  CPlayer::_StorageIn(pPlayer, &iteminfo, this->m_nIID, 0);
  CDBSocket::Write(S2D_PUTINSTORAGE, "dddbd", this->m_nIID, this->m_nPID, pPlayer->m_nUID, 0, this->m_nNum);
  CBase::Delete(this);
  return 1;
}

//----- (0042EFB0) --------------------------------------------------------
void __thiscall CItemTransform::ForcedStorageIn(CItemTransform *this, int nLogType, int nUID, char *szName, int nPayCode)
{
  int m_nIDD; // [esp-28h] [ebp-30h]
  int m_nIndex; // [esp-24h] [ebp-2Ch]
  unsigned int m_dwInfo; // [esp-1Ch] [ebp-24h]
  int m_nExp; // [esp-18h] [ebp-20h]
  int m_nLevel; // [esp-14h] [ebp-1Ch]
  int v10; // [esp-10h] [ebp-18h]
  char *szName_; // [esp+0h] [ebp-8h]

  if ( szName )
    szName_ = szName;
  else
    szName_ = &DefaultNullString;
  v10 = this->m_nVer;
  m_nLevel = this->m_nLevel;
  m_nExp = this->m_nExp;
  m_dwInfo = this->m_dwInfo;
  m_nIndex = this->m_pInit->m_nIndex;
  m_nIDD = CItem::NewIID();
  CDBSocket::Write(
    S2D_FORCEDINSTORAGE,
    "bdwbbdbbdds",
    nLogType,
    m_nIDD,
    m_nIndex,
    0,
    m_dwInfo,
    m_nExp,
    m_nLevel,
    v10,
    nUID,
    nPayCode,
    szName_);
}

//----- (0042F030) --------------------------------------------------------
void __thiscall CItemTransform::UpdateExp(CItemTransform *this, CPlayer *pPlayer, int bTimer)
{
  int nPrevValue; // [esp+4h] [ebp-18h]
  int nNewValue; // [esp+8h] [ebp-14h]
  int n; // [esp+Ch] [ebp-10h]
  int nPrevLevel; // [esp+10h] [ebp-Ch]
  int nFactor; // [esp+14h] [ebp-8h]
  int nAdded; // [esp+18h] [ebp-4h]

  if ( pPlayer->m_nPID != this->m_nPID || !CItem::IsState(this, 1) || this->m_nLevel >= 100 )
  {
    this->m_dwPutOn = 0;
    return;
  }
  nAdded = 1;
  if ( bTimer )
  {
    if ( ++this->m_dwPutOn < 180 )
      return;
    this->m_dwPutOn -= 180;
    nAdded = 10;
    this->m_nExp += 10;
  }
  else
  {
    if ( pPlayer->m_nLevel > 20 )
      nAdded = (pPlayer->m_nLevel - 11) / 10 + 1;
    this->m_nExp += nAdded;
  }
  if ( this->m_nExp >= dword_4D5CA8[this->m_nLevel] )
  {
    if ( pPlayer->m_nLevel <= this->m_nLevel )
    {
      this->m_nExp -= nAdded;
      return;
    }
    this->m_nExp -= dword_4D5CA8[this->m_nLevel];
    nPrevLevel = this->m_nLevel;
    this->m_nLevel = nPrevLevel + 1;
    for ( n = 0; n <= 4; ++n )
    {
      nFactor = dword_4D6090[11 * this->m_pInit->m_nRace + n];
      if ( nFactor )
      {
        nPrevValue = nPrevLevel / nFactor + 1;
        nNewValue = this->m_nLevel / nFactor + 1;
        if ( nNewValue > nPrevValue )
          pPlayer->UpdatePrtyPt(pPlayer, n, 1, nNewValue - nPrevValue);
      }
    }
    CItemTransform::SaveInfo(this, 1);
  }
  CItem::SendItemInfo(this, pPlayer, S2C_UPDATEITEMINFO);
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042F200) --------------------------------------------------------
void __thiscall CItemTransform::CheatLevelUp(CItemTransform *this, CPlayer *pPlayer, int nNewLevel)
{
  int n; // [esp+Ch] [ebp-Ch]
  int nPrevLevel; // [esp+10h] [ebp-8h]
  int nFactor; // [esp+14h] [ebp-4h]

  if ( nNewLevel >= 1 && nNewLevel <= 40 )
  {
    nPrevLevel = this->m_nLevel;
    this->m_nLevel = nNewLevel;
    for ( n = 0; n <= 4; ++n )
    {
      nFactor = dword_4D6090[11 * this->m_pInit->m_nRace + n];
      if ( nFactor )
      {
        if ( nPrevLevel / nFactor + 1 != this->m_nLevel / nFactor + 1 )
          pPlayer->UpdatePrtyPt(pPlayer, n, 1, this->m_nLevel / nFactor - nPrevLevel / nFactor);
      }
    }
    CItem::SendItemInfo(this, pPlayer, S2C_UPDATEITEMINFO);
  }
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042F2C0) --------------------------------------------------------
void __thiscall CItemTransform::SaveInfo(CItemTransform *this, int bLevelUp)
{
  CDBSocket::Write(S2D_UPDATE_TFITEM, "dddbb", this->m_nIID, this->m_nPID, this->m_nExp, this->m_nLevel, bLevelUp);
}

//----- (0042F300) --------------------------------------------------------
void __thiscall CItemTransform::ApplyTransform(CItemTransform *this, CPlayer *pPlayer, int nLevel)
{
  int m_nId; // eax
  int nLevel_; // [esp-4h] [ebp-10h]
  int nRace; // [esp+4h] [ebp-8h]

  if ( nLevel <= (this->m_nLevel - 1) / 10 )
  {
    this->m_nTFLevel = nLevel;
    nRace = this->m_pInit->m_nRace;
    pPlayer->UpdatePrtyPer(pPlayer, 32, 1, dword_4D60A4[11 * nRace]);
    if ( nLevel >= 2 )
    {
      pPlayer->UpdatePrtyPt(pPlayer, 15, 1, dword_4D60B0[11 * nRace], dword_4D60B4[11 * nRace]);
      pPlayer->UpdatePrtyPer(pPlayer, 29, 1, dword_4D60B8[11 * nRace]);
      if ( nLevel >= 3 )
      {
        pPlayer->UpdatePrtyPer(pPlayer, 27, 1, dword_4D60A8[11 * nRace], dword_4D60A8[11 * nRace]);
        pPlayer->UpdatePrtyPer(pPlayer, 28, 1, dword_4D60AC[11 * nRace], dword_4D60AC[11 * nRace]);
      }
    }
    pPlayer->m_nTFlag |= nLevel;
    CChar::AddGState(pPlayer, 512);
    nLevel_ = pPlayer->m_nTFlag;
    m_nId = CBase::Id(pPlayer);
    CChar::WriteInSight(pPlayer, S2C_ACTION, "dbb", m_nId, 13, nLevel_);
  }
}
// 4D60A4: using guessed type int dword_4D60A4[];
// 4D60A8: using guessed type int dword_4D60A8[];
// 4D60AC: using guessed type int dword_4D60AC[];
// 4D60B0: using guessed type int dword_4D60B0[];
// 4D60B4: using guessed type int dword_4D60B4[];

//----- (0042F460) --------------------------------------------------------
void __thiscall CItemTransform::FreeTransform(CItemTransform *this, CPlayer *pPlayer)
{
  int nLevel; // [esp+4h] [ebp-Ch]
  int nRace; // [esp+8h] [ebp-8h]

  nLevel = this->m_nTFLevel;
  this->m_nTFLevel = 0;
  nRace = this->m_pInit->m_nRace;
  pPlayer->UpdatePrtyPer(pPlayer, 32, 0, dword_4D60A4[11 * nRace]);
  if ( nLevel >= 2 )
  {
    pPlayer->UpdatePrtyPt(pPlayer, 15, 0, dword_4D60B0[11 * nRace], dword_4D60B4[11 * nRace]);
    pPlayer->UpdatePrtyPer(pPlayer, 29, 0, dword_4D60B8[11 * nRace]);
    if ( nLevel >= 3 )
    {
      pPlayer->UpdatePrtyPer(pPlayer, 27, 0, dword_4D60A8[11 * nRace], dword_4D60A8[11 * nRace]);
      pPlayer->UpdatePrtyPer(pPlayer, 28, 0, dword_4D60AC[11 * nRace], dword_4D60AC[11 * nRace]);
    }
  }
  pPlayer->m_nTFlag &= ~nLevel;
  pPlayer->SubGState(pPlayer, 512);
}
// 4D60A4: using guessed type int dword_4D60A4[];
// 4D60A8: using guessed type int dword_4D60A8[];
// 4D60AC: using guessed type int dword_4D60AC[];
// 4D60B0: using guessed type int dword_4D60B0[];
// 4D60B4: using guessed type int dword_4D60B4[];

//----- (0042F590) --------------------------------------------------------
_DWORD *__thiscall sub_42F590(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_42F6B0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0042F5F0) --------------------------------------------------------
_DWORD *__thiscall sub_42F5F0(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_42F730(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0042F650) --------------------------------------------------------
_DWORD *__thiscall sub_42F650(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_42F7B0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0042F6B0) --------------------------------------------------------
int __stdcall sub_42F6B0(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_42F6B0(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (0042F730) --------------------------------------------------------
int __stdcall sub_42F730(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_42F730(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (0042F7B0) --------------------------------------------------------
int __stdcall sub_42F7B0(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_42F7B0(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (0042F840) --------------------------------------------------------
int __thiscall sub_42F840(_DWORD *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_431110(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*this);
    if ( *(_BYTE *)sub_431110(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_431110(v5) || *this != *(_DWORD *)sub_474590(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_431110(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*this);
      result = sub_4470E0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0042F920) --------------------------------------------------------
int __cdecl sub_42F920(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_431110(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (0042F960) --------------------------------------------------------
_WORD *__cdecl PutNumeric<short>(_WORD *a1, __int16 a2)
{
  *a1 = a2;
  return a1 + 1;
}

//----- (0042F980) --------------------------------------------------------
void *__thiscall sub_42F980(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0042F9B0) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *__stdcall sub_42F9B0(void *a1, int a2)
{
  return std::_Construct<std::_Tree_nod<std::_Tmap_traits<int,std::pair<std::string,std::string>,std::less<int>,std::allocator<std::pair<int const,std::pair<std::string,std::string>>>,1>>::_Node *,std::_Tree_nod<std::_Tmap_traits<int,std::pair<std::string,std::string>,std::less<int>,std::allocator<std::pair<int const,std::pair<std::string,std::string>>>,1>>::_Node *>(
           (std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node **)a1,
           (std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *const *)a2);
}

//----- (0042F9D0) --------------------------------------------------------
void *__thiscall sub_42F9D0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0042FA10) --------------------------------------------------------
void *__thiscall sub_42FA10(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0042FA40) --------------------------------------------------------
int __thiscall sub_42FA40(void *this)
{
  return sub_42FA60(this);
}

//----- (0042FA60) --------------------------------------------------------
int __thiscall sub_42FA60(void *this)
{
  return sub_42FA80((int)this);
}

//----- (0042FA80) --------------------------------------------------------
int __thiscall sub_42FA80(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_42FB30(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (0042FB30) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FB30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_42F590(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0042FBD0) --------------------------------------------------------
int __thiscall sub_42FBD0(void *this)
{
  return sub_42FBF0(this);
}

//----- (0042FBF0) --------------------------------------------------------
int __thiscall sub_42FBF0(void *this)
{
  return sub_42FC10((int)this);
}

//----- (0042FC10) --------------------------------------------------------
int __thiscall sub_42FC10(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_42FCC0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (0042FCC0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FCC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_42F5F0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0042FD60) --------------------------------------------------------
int __thiscall sub_42FD60(void *this)
{
  return sub_42FD80(this);
}

//----- (0042FD80) --------------------------------------------------------
int __thiscall sub_42FD80(void *this)
{
  return sub_42FDA0((int)this);
}

//----- (0042FDA0) --------------------------------------------------------
int __thiscall sub_42FDA0(int this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20((_DWORD *)this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_42FE50(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  sub_4338F0(*(void **)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (0042FE50) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FE50(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, std::vector<CIOSocket::CIOTimer>::const_iterator a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_42F650(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              &a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0042FEF0) --------------------------------------------------------
CBase *__thiscall CGroup::Copy(CGroup *this)
{
  CGroup *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x34u);
  if ( v3 )
    v2 = CGroup::CGroup((CGroup *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (0042FF30) --------------------------------------------------------
CGroup *__thiscall CGroup::CGroup(CGroup *this)
{
  CBase::CBase();
  this->__vftable = (CGroup_vtbl *)&off_4B7558;
  sub_47CF60(&this->m_vecItemInfo);
  return this;
}
// 4B7558: using guessed type int (__stdcall *off_4B7558)(int);

//----- (0042FF60) --------------------------------------------------------
CGroup *__thiscall CGroup::`scalar deleting destructor'(CGroup *this, char a2)
{
  CGroup::~CGroup(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0042FF90) --------------------------------------------------------
void __thiscall CGroup::~CGroup(CGroup *this)
{
  std::vector<ITEMDROPINFO>::vector<ITEMDROPINFO>(&this->m_vecItemInfo);
  CBase::~CBase(this);
}

//----- (0042FFB0) --------------------------------------------------------
int __thiscall CGroup::Set(CGroup *this, Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var v12; // [esp-4h] [ebp-5Ch] BYREF
  int v13; // [esp+0h] [ebp-58h]
  Symbol v14; // [esp+4h] [ebp-54h]
  CGroup *v15; // [esp+8h] [ebp-50h]
  lisp::var v16; // [esp+10h] [ebp-48h] BYREF
  lisp::var v17; // [esp+14h] [ebp-44h] BYREF
  lisp::var v18; // [esp+18h] [ebp-40h] BYREF
  lisp::var v19; // [esp+1Ch] [ebp-3Ch] BYREF
  lisp::var v20; // [esp+20h] [ebp-38h] BYREF
  lisp::var v21; // [esp+24h] [ebp-34h] BYREF
  lisp::var v22; // [esp+28h] [ebp-30h] BYREF
  lisp::var v23; // [esp+2Ch] [ebp-2Ch] BYREF
  ITEMDROPINFO stInfo_; // [esp+30h] [ebp-28h] BYREF
  lisp::var v_; // [esp+40h] [ebp-18h] BYREF
  ITEMDROPINFO stInfo; // [esp+44h] [ebp-14h] BYREF
  lisp::var v; // [esp+54h] [ebp-4h] BYREF

  v15 = this;
  v14 = symbol;
  if ( symbol == S_INDEX )
  {
    v3 = lisp::var::pop(&value, &v23);
    v15->m_nID = lisp::var::operator int(v3);
  }
  else if ( v14 == S_ITEM )
  {
    while ( !(unsigned __int8)lisp::var::null(&value) )
    {
      lisp::var::pop(&value, &v_);
      ITEMDROPINFO::ITEMDROPINFO(&stInfo_);
      v7 = lisp::var::pop(&v_, &v19);
      stInfo_.nPer = lisp::var::operator int(v7);
      v8 = lisp::var::pop(&v_, &v18);
      stInfo_.nItemID = lisp::var::operator int(v8);
      v9 = lisp::var::pop(&v_, &v17);
      stInfo_.nPrefix = lisp::var::operator int(v9);
      if ( !(unsigned __int8)lisp::var::null(&v_) )
      {
        v10 = lisp::var::pop(&v_, &v16);
        stInfo_.nNum = lisp::var::operator int(v10);
      }
      std::vector<ITEMDROPINFO>::~vector<ITEMDROPINFO>(&v15->m_vecItemInfo, (const tagRECT *)&stInfo_);
    }
  }
  else
  {
    if ( v14 != S_MONEY )
    {
      v12.m_pObject = (lisp::_object *)this;
      lisp::var::var(&v12, &value);
      return CBase::Set(v15, symbol, v12);
    }
    while ( !(unsigned __int8)lisp::var::null(&value) )
    {
      lisp::var::pop(&value, &v);
      ITEMDROPINFO::ITEMDROPINFO(&stInfo, 31);
      v4 = lisp::var::pop(&v, &v22);
      stInfo.nPer = lisp::var::operator int(v4);
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        v5 = lisp::var::pop(&v, &v21);
        v13 = 5 * lisp::var::operator int(v5);
      }
      else
      {
        v6 = lisp::var::pop(&v, &v20);
        v13 = lisp::var::operator int(v6);
      }
      stInfo.nNum = v13;
      std::vector<ITEMDROPINFO>::~vector<ITEMDROPINFO>(&v15->m_vecItemInfo, (const tagRECT *)&stInfo);
    }
  }
  return 1;
}

//----- (00430160) --------------------------------------------------------
ITEMDROPINFO *__thiscall ITEMDROPINFO::ITEMDROPINFO(ITEMDROPINFO *this)
{
  this->nPer = 0;
  this->nItemID = 0;
  this->nPrefix = 0;
  this->nNum = 1;
  return this;
}

//----- (004301A0) --------------------------------------------------------
ITEMDROPINFO *__thiscall ITEMDROPINFO::ITEMDROPINFO(ITEMDROPINFO *this, int itemId)
{
  this->nPer = 0;
  this->nItemID = itemId;
  this->nPrefix = 0;
  this->nNum = 1;
  return this;
}

//----- (004301E0) --------------------------------------------------------
int __thiscall CGroup::OnLoad(CGroup *this)
{
  return CItemGroup::InsertGroup(this);
}

//----- (00430200) --------------------------------------------------------
void __thiscall CGroup::GetItemInfo(CGroup *this, _DWORD *nIndex, _DWORD *nPrefix, _DWORD *nNum)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  _DWORD *v5; // eax
  char v7[4]; // [esp+4h] [ebp-10h] BYREF
  char v8[4]; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-8h] BYREF
  int nPer; // [esp+10h] [ebp-4h]

  if ( this )
  {
    nPer = Random(1, 1000);
    sub_430C20(&this->m_vecItemInfo, (int)&it);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecItemInfo, (int)v7);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &it,
              v4) )
        break;
      v5 = (_DWORD *)sub_430DE0(&it);
      if ( nPer <= *v5 )
      {
        *nIndex = *(_DWORD *)(sub_430DE0(&it) + 4);
        *nPrefix = *(_DWORD *)(sub_430DE0(&it) + 8);
        *nNum = *(_DWORD *)(sub_430DE0(&it) + 12);
        return;
      }
      sub_430E00((int *)&it, v8, 0);
    }
  }
}

//----- (004302B0) --------------------------------------------------------
int __cdecl CItemGroup::InsertGroup(CGroup *pGroup)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char r[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v3);
  sub_445DF0(
    (int)dword_4E10F0,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)r,
    v1);
  if ( r[4] )
    return 1;
  LOG_ERR("CItemGroup::InsertGroup() Duplicate Group. (GroupID:%d)", pGroup->m_nID);
  return 0;
}
// 4302D3: variable 'v1' is possibly undefined
// 4E10F0: using guessed type int dword_4E10F0[3];

//----- (00430310) --------------------------------------------------------
void __cdecl CItemGroup::ClearGroup()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v1)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v2[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v3[4]; // [esp+10h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10F0,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10F0, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it) + 4);
    if ( v1 )
      (**v1)(v1, 1);
    sub_446090((int *)&it, v3, 0);
  }
  sub_430C40(dword_4E10F0);
}
// 4E10F0: using guessed type int dword_4E10F0[3];

//----- (004303A0) --------------------------------------------------------
CBase *__thiscall CItemGroup::Copy(CItemGroup *this)
{
  CItemGroup *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x34u);
  if ( v3 )
    v2 = CItemGroup::CItemGroup((CItemGroup *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (004303E0) --------------------------------------------------------
CItemGroup *__thiscall CItemGroup::CItemGroup(CItemGroup *this)
{
  CBase::CBase();
  this->__vftable = (CItemGroup_vtbl *)&off_4B75D8;
  sub_4707A0(&this->m_vecGroup);
  return this;
}
// 4B75D8: using guessed type int (__stdcall *off_4B75D8)(int);

//----- (00430410) --------------------------------------------------------
void *__thiscall CItemGroup::`scalar deleting destructor'(void *this, char a2)
{
  CItemGroup::~CItemGroup((CItemGroup *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00430440) --------------------------------------------------------
void __thiscall CItemGroup::~CItemGroup(CItemGroup *this)
{
  sub_445BF0((std::vector<IPAddrMask> *)&this->m_vecGroup);
  CBase::~CBase(this);
}

//----- (00430460) --------------------------------------------------------
int __thiscall CItemGroup::Set(CItemGroup *this, enum Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var v7; // [esp-4h] [ebp-28h] BYREF
  enum Symbol v8; // [esp+0h] [ebp-24h]
  CItemGroup *v9; // [esp+4h] [ebp-20h]
  lisp::var v10; // [esp+Ch] [ebp-18h] BYREF
  lisp::var v11; // [esp+10h] [ebp-14h] BYREF
  lisp::var result; // [esp+14h] [ebp-10h] BYREF
  ITEMGROUP stGroup; // [esp+18h] [ebp-Ch] BYREF
  lisp::var v; // [esp+20h] [ebp-4h] BYREF

  v9 = this;
  v8 = symbol;
  if ( symbol == S_INDEX )
  {
    v3 = lisp::var::pop(&value, &result);
    v9->m_nIndex = lisp::var::operator int(v3);
  }
  else
  {
    if ( v8 != S_GROUP )
    {
      v7.m_pObject = (lisp::_object *)this;
      lisp::var::var(&v7, &value);
      return CBase::Set(v9, symbol, v7);
    }
    while ( !(unsigned __int8)lisp::var::null(&value) )
    {
      lisp::var::pop(&value, &v);
      v4 = lisp::var::pop(&v, &v11);
      stGroup.nPer = lisp::var::operator int(v4);
      v5 = lisp::var::pop(&v, &v10);
      v7.m_pObject = (lisp::_object *)lisp::var::operator int(v5);
      stGroup.pGroup = CItemGroup::FindGroup(v9);
      sub_430CA0((int)&v9->m_vecGroup, (const XMessageQueue::XTimerElement *)&stGroup);
    }
  }
  return 1;
}

//----- (00430520) --------------------------------------------------------
int __thiscall CItemGroup::OnLoad(CItemGroup *this)
{
  return sub_425B10((int)this);
}

//----- (00430540) --------------------------------------------------------
CGroup *__thiscall CItemGroup::FindGroup(CItemGroup *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int nId; // [esp+4h] [ebp-Ch] BYREF
  CGroup *pGroup; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-4h] BYREF
  int v6; // [esp+18h] [ebp+8h] BYREF

  pGroup = 0;
  sub_44AE20(dword_4E10F0, &it, &v6);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10F0, (int)&nId);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    pGroup = *(CGroup **)(sub_420250(&it) + 4);
  }
  return pGroup;
}
// 4E10F0: using guessed type int dword_4E10F0[3];

//----- (004305A0) --------------------------------------------------------
void __thiscall CItemGroup::GetItemInfo(CItemGroup *this, int *nIndex, _DWORD *nPrefix, _DWORD *nNum)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  _DWORD *v5; // eax
  int v6; // eax
  char v8[4]; // [esp+4h] [ebp-10h] BYREF
  char v9[4]; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-8h] BYREF
  int nPer; // [esp+10h] [ebp-4h]

  nPer = Random(1, 1000);
  sub_430C20(&this->m_vecGroup, (int)&it);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecGroup, (int)v8);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v4) )
      break;
    v5 = (_DWORD *)sub_430DE0(&it);
    if ( nPer <= *v5 )
    {
      v6 = sub_430DE0(&it);
      CGroup::GetItemInfo(*(CGroup **)(v6 + 4), nIndex, nPrefix, nNum);
      return;
    }
    sub_430E30((int *)&it, v9, 0);
  }
}

//----- (00430630) --------------------------------------------------------
CGroup *__thiscall CItemGroup::GetFirstGroup(CItemGroup *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  CGroup *result; // eax
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  sub_430C20(&this->m_vecGroup, (int)&it);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecGroup, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    result = *(CGroup **)(sub_430DE0(&it) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00430680) --------------------------------------------------------
void __cdecl CGoods::ForcedStorageIn(int nUID, int nMax, char *packet)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  char v6[4]; // [esp+0h] [ebp-48h] BYREF
  char v7[4]; // [esp+4h] [ebp-44h] BYREF
  char v8[4]; // [esp+8h] [ebp-40h] BYREF
  int v9; // [esp+Ch] [ebp-3Ch] BYREF
  int nIndex; // [esp+10h] [ebp-38h]
  CItem *pItem; // [esp+14h] [ebp-34h]
  int nPrefix; // [esp+18h] [ebp-30h]
  int nTotalNum; // [esp+1Ch] [ebp-2Ch]
  std::vector<ITEMDETAIL>::iterator *goods; // [esp+20h] [ebp-28h] BYREF
  CGoods *pGoods; // [esp+24h] [ebp-24h]
  char byDC; // [esp+2Bh] [ebp-1Dh] BYREF
  int nPayCode; // [esp+2Ch] [ebp-1Ch] BYREF
  unsigned __int16 wGoods; // [esp+30h] [ebp-18h] BYREF
  char byGift; // [esp+37h] [ebp-11h] BYREF
  int nFlag; // [esp+38h] [ebp-10h]
  unsigned __int16 wQuantity; // [esp+3Ch] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+40h] [ebp-8h] BYREF
  int n; // [esp+44h] [ebp-4h]

  for ( n = 0; n < nMax; ++n )
  {
    nFlag = 0;
    byGift = 0;
    if ( stru_4E35B4.m_nRef )
      packet = (char *)ReadPacket(packet, "dwwbb", &nPayCode, &wGoods, &wQuantity, &byDC, &byGift);
    else
      packet = (char *)ReadPacket(packet, "dwwb", &nPayCode, &wGoods, &wQuantity, &byDC);
    v9 = wGoods;
    sub_44AE20(dword_4E10FC, &it, &v9);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10FC, (int)v8);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &it,
           v3) )
    {
      pGoods = *(CGoods **)(sub_420250(&it) + 4);
      sub_430C20(&pGoods->m_vecDetail, (int)&goods);
      while ( 1 )
      {
        v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&pGoods->m_vecDetail, (int)v6);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                (std::vector<CIOSocket::CIOTimer>::const_iterator *)&goods,
                v4) )
          break;
        nIndex = *(_DWORD *)sub_420010(&goods);
        nPrefix = *(_DWORD *)(sub_420010(&goods) + 4);
        v5 = sub_420010(&goods);
        nTotalNum = *(_DWORD *)(v5 + 8) * wQuantity;
        pItem = CItem::CreateItem(nIndex, nPrefix, nTotalNum, -1);
        if ( pItem )
        {
          if ( byDC || byGift )
            CItem::AddState(pItem, 128);
          if ( pItem->m_pInit->m_bPlural )
          {
            pItem->ForcedStorageIn(pItem, 42, nUID, &DefaultNullString, nPayCode);
            CBase::Delete(pItem);
          }
          else
          {
            while ( 1 )
            {
              pItem->ForcedStorageIn(pItem, 42, nUID, &DefaultNullString, nPayCode);
              CBase::Delete(pItem);
              if ( --nTotalNum <= 0 )
                break;
              pItem = CItem::CreateItem(nIndex, 0, 1, -1);
              if ( byDC || byGift )
                CItem::AddState(pItem, 128);
            }
          }
        }
        else
        {
          LOG_ERR(
            "CGoods::ForcedStorageIn() Can't create goods. (%d<%d> : %d %d %d)",
            wGoods,
            nPayCode,
            nIndex,
            nPrefix,
            nTotalNum);
        }
        sub_446060((int *)&goods, v7, 0);
      }
      nFlag = 2;
    }
    CAuthSocket::Write(S2A_SPECIALITEM, "db", nPayCode, nFlag);
  }
}
// 4E10FC: using guessed type int dword_4E10FC[3];

//----- (004308F0) --------------------------------------------------------
void __cdecl CGoods::ClearGoods()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v1)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v2[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v3[4]; // [esp+10h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10FC,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10FC, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it) + 4);
    if ( v1 )
      (**v1)(v1, 1);
    sub_446090((int *)&it, v3, 0);
  }
  sub_430D10(dword_4E10FC);
}
// 4E10FC: using guessed type int dword_4E10FC[3];

//----- (00430980) --------------------------------------------------------
CBase *__thiscall CGoods::Copy(CGoods *this)
{
  CGoods *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x34u);
  if ( v3 )
    v2 = CGoods::CGoods((CGoods *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (004309C0) --------------------------------------------------------
CGoods *__thiscall CGoods::CGoods(CGoods *this)
{
  CBase::CBase();
  this->__vftable = (CGoods_vtbl *)&off_4B7678;
  this->m_nIndex = 0;
  sub_425850((std::vector<CIOSocket::CIOTimer> *)&this->m_vecDetail);
  return this;
}
// 4B7678: using guessed type int (__stdcall *off_4B7678)(int);

//----- (00430A00) --------------------------------------------------------
CGoods *__thiscall CGoods::`scalar deleting destructor'(CGoods *this, char a2)
{
  CGoods::~CGoods(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00430A30) --------------------------------------------------------
void __thiscall CGoods::~CGoods(CGoods *this)
{
  sub_445B20((std::vector<CIOSocket::CIOTimer> *)&this->m_vecDetail);
  CBase::~CBase(this);
}

//----- (00430A50) --------------------------------------------------------
int __thiscall CGoods::Set(CGoods *this, enum Symbol symbol, struct lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var v8; // [esp-4h] [ebp-30h] BYREF
  enum Symbol v9; // [esp+0h] [ebp-2Ch]
  CGoods *v10; // [esp+4h] [ebp-28h]
  lisp::var v11; // [esp+Ch] [ebp-20h] BYREF
  lisp::var v12; // [esp+10h] [ebp-1Ch] BYREF
  lisp::var v13; // [esp+14h] [ebp-18h] BYREF
  lisp::var v14; // [esp+18h] [ebp-14h] BYREF
  ITEMDETAIL detail; // [esp+1Ch] [ebp-10h] BYREF
  lisp::var v; // [esp+28h] [ebp-4h] BYREF

  v10 = this;
  v9 = symbol;
  if ( symbol == S_INDEX )
  {
    v3 = lisp::var::pop(&value, &v14);
    v10->m_nIndex = lisp::var::operator int(v3);
  }
  else
  {
    if ( v9 != S_ITEM )
    {
      v8.m_pObject = (lisp::_object *)this;
      lisp::var::var(&v8, &value);
      return CBase::Set(v10, symbol, v8);
    }
    while ( !(unsigned __int8)lisp::var::null(&value) )
    {
      lisp::var::pop(&value, &v);
      v4 = lisp::var::pop(&v, &v13);
      detail.nCode = lisp::var::operator int(v4);
      v5 = lisp::var::pop(&v, &v12);
      detail.nPrefix = lisp::var::operator int(v5);
      v6 = lisp::var::pop(&v, &v11);
      detail.nNum = lisp::var::operator int(v6);
      sub_430D70((int)&v10->m_vecDetail, (int)&detail);
    }
  }
  return 1;
}

//----- (00430B30) --------------------------------------------------------
int __thiscall CGoods::OnLoad(CGoods *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v4[8]; // [esp+8h] [ebp-10h] BYREF
  char r[8]; // [esp+10h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v4);
  sub_445DF0(
    (int)dword_4E10FC,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)r,
    v1);
  if ( r[4] )
    return 1;
  LOG_ERR("CGoods::OnLoad() Duplicate Index. (Index:%d)", this->m_nIndex);
  return 0;
}
// 430B5C: variable 'v1' is possibly undefined
// 4E10FC: using guessed type int dword_4E10FC[3];

//----- (00430B90) --------------------------------------------------------
std::vector<tagRECT> *__thiscall std::vector<ITEMDROPINFO>::vector<ITEMDROPINFO>(std::vector<ITEMDROPINFO> *this)
{
  return std::vector<tagRECT>::_Tidy((std::vector<tagRECT> *)this);
}

//----- (00430BB0) --------------------------------------------------------
tagRECT *__thiscall std::vector<ITEMDROPINFO>::~vector<ITEMDROPINFO>(std::vector<ITEMDROPINFO> *this, const tagRECT *a2)
{
  unsigned int v2; // esi
  tagRECT *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<tagRECT>::size((std::vector<tagRECT> *)this);
  if ( v2 >= std::vector<tagRECT>::capacity((std::vector<tagRECT> *)this) )
  {
    v4 = (int *)sub_445B40(this, (int)v7);
    result = (tagRECT *)sub_430EA0((std::vector<tagRECT> *)this, (int)v6, *v4, (int)a2);
  }
  else
  {
    result = std::vector<tagRECT>::_Ufill((std::vector<tagRECT> *)this, (tagRECT *)this->_Mylast, 1u, a2);
    this->_Mylast = (ITEMDROPINFO *)result;
  }
  return result;
}

//----- (00430C20) --------------------------------------------------------
int __thiscall sub_430C20(_DWORD *this, int a2)
{
  sub_446700((void *)a2, this[1]);
  return a2;
}

//----- (00430C40) --------------------------------------------------------
_DWORD *__thiscall sub_430C40(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_430FA0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00430CA0) --------------------------------------------------------
XMessageQueue::XTimerElement *__thiscall sub_430CA0(int this, const XMessageQueue::XTimerElement *a2)
{
  unsigned int v2; // esi
  XMessageQueue::XTimerElement *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
  if ( v2 >= std::vector<XMessageQueue::XElement>::capacity((std::vector<XMessageQueue::XTimerElement> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (XMessageQueue::XTimerElement *)sub_431020((std::vector<IPAddrMask> *)this, (int)v6, *v4, (int)a2);
  }
  else
  {
    result = std::vector<XMessageQueue::XElement>::_Ufill(
               (std::vector<XMessageQueue::XTimerElement> *)this,
               *(XMessageQueue::XTimerElement **)(this + 8),
               1u,
               a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00430D10) --------------------------------------------------------
_DWORD *__thiscall sub_430D10(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_431120(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00430D70) --------------------------------------------------------
char *__thiscall sub_430D70(int this, int a2)
{
  unsigned int v2; // esi
  char *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
  if ( v2 >= std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (char *)sub_4311E0((std::vector<CIOSocket::CIOTimer> *)this, (int)v6, *v4, a2);
  }
  else
  {
    result = std::vector<CIOSocket::CIOTimer>::_Xlen(
               (std::vector<CIOSocket::CIOTimer> *)this,
               *(char **)(this + 8),
               1,
               a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00430DE0) --------------------------------------------------------
int __thiscall sub_430DE0(void *this)
{
  return sub_420010(this);
}

//----- (00430E00) --------------------------------------------------------
_DWORD *__thiscall sub_430E00(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_431350(this);
  *a2 = v4;
  return a2;
}

//----- (00430E30) --------------------------------------------------------
_DWORD *__thiscall sub_430E30(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_48DA00(this);
  *a2 = v4;
  return a2;
}

//----- (00430E60) --------------------------------------------------------
int __thiscall std::vector<tagRECT>::size(std::vector<tagRECT> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) >> 4;
  else
    v2 = 0;
  return v2;
}

//----- (00430EA0) --------------------------------------------------------
int __thiscall sub_430EA0(std::vector<tagRECT> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<tagRECT>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_47D7D0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  std::vector<tagRECT>::_Insert_n((int)this, (tagRECT *)a3, 1u, (LONG *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_431D20(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (00430F20) --------------------------------------------------------
std::vector<tagRECT> *__thiscall std::vector<tagRECT>::_Tidy(std::vector<tagRECT> *this)
{
  std::vector<tagRECT> *result; // eax

  if ( *((_DWORD *)this + 1) )
  {
    sub_4313B0(this, *((_DWORD *)this + 1), *((_DWORD *)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 4);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  result = this;
  *((_DWORD *)this + 3) = 0;
  return result;
}

//----- (00430F90) --------------------------------------------------------
int __cdecl sub_430F90(int a1)
{
  return a1 + 8;
}

//----- (00430FA0) --------------------------------------------------------
int __stdcall sub_430FA0(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_430FA0(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (00431020) --------------------------------------------------------
int __thiscall sub_431020(std::vector<IPAddrMask> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<XMessageQueue::XElement>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_4470B0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  std::vector<XMessageQueue::XElement>::_Insert_n((int)this, (XMessageQueue::XTimerElement *)a3, 1u, (int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_478710(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (004310A0) --------------------------------------------------------
std::vector<IPAddrMask> *__thiscall std::vector<IPAddrMask>::_Tidy(std::vector<IPAddrMask> *this)
{
  std::vector<IPAddrMask> *result; // eax

  if ( *((_DWORD *)this + 1) )
  {
    sub_4316C0(this, *((_DWORD *)this + 1), *((_DWORD *)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 3);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  result = this;
  *((_DWORD *)this + 3) = 0;
  return result;
}

//----- (00431110) --------------------------------------------------------
int __cdecl sub_431110(int a1)
{
  return a1 + 21;
}

//----- (00431120) --------------------------------------------------------
int __stdcall sub_431120(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_431120(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (004311A0) --------------------------------------------------------
int __thiscall std::vector<CIOSocket::CIOTimer>::size(std::vector<CIOSocket::CIOTimer> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) / 12;
  else
    v2 = 0;
  return v2;
}

//----- (004311E0) --------------------------------------------------------
int __thiscall sub_4311E0(std::vector<CIOSocket::CIOTimer> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CIOSocket::CIOTimer>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_431D50(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_431A40((int)this, (CIOSocket::CIOTimer *)a3, 1u, (int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_446FA0(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (00431260) --------------------------------------------------------
char __thiscall std::vector<CIOSocket::CIOTimer>::_Buy(std::vector<CIOSocket::CIOTimer> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_446800(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_446B40(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 12 * _Capacity;
  }
  else
  {
    std::vector<tagShowdownPaticipateInfo>::_Xran(this);
  }
  return 1;
}

//----- (004312E0) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__thiscall std::vector<CSyncPacket::CElement>::_Tidy(std::vector<CIOSocket::CIOTimer> *this)
{
  std::vector<CIOSocket::CIOTimer> *result; // eax

  if ( *((_DWORD *)this + 1) )
  {
    std::vector<IPAddrMask>::_Destroy(this, *((CIOSocket::CIOTimer **)this + 1), *((CIOSocket::CIOTimer **)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) / 12);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  result = this;
  *((_DWORD *)this + 3) = 0;
  return result;
}

//----- (00431350) --------------------------------------------------------
_DWORD *__thiscall sub_431350(_DWORD *this)
{
  *this += 16;
  return this;
}

//----- (00431390) --------------------------------------------------------
_DWORD *__thiscall sub_431390(_DWORD *this)
{
  *this += 12;
  return this;
}

//----- (004313B0) --------------------------------------------------------
int __thiscall sub_4313B0(void *this, int a2, int a3)
{
  return sub_47D860(a2, a3);
}

//----- (004313E0) --------------------------------------------------------
void __thiscall std::vector<tagRECT>::_Insert_n(int this, tagRECT *a2, unsigned int a3, LONG *a4)
{
  unsigned int v4; // esi
  char *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-28h]
  _DWORD *v8; // [esp+Ch] [ebp-20h]
  CMemory **v9; // [esp+10h] [ebp-1Ch]
  tagRECT *_Ptr; // [esp+14h] [ebp-18h]
  unsigned int v11; // [esp+18h] [ebp-14h]
  int v12; // [esp+18h] [ebp-14h]
  tagRECT _Val; // [esp+1Ch] [ebp-10h] BYREF
  unsigned int _Count; // [esp+38h] [ebp+Ch]

  _Val.left = *a4;
  _Val.top = a4[1];
  _Val.right = a4[2];
  _Val.bottom = a4[3];
  v11 = std::vector<tagRECT>::capacity((std::vector<tagRECT> *)this);
  if ( a3 )
  {
    v4 = sub_47D3D0((std::allocator<tagRECT> *)this);
    if ( v4 - std::vector<tagRECT>::size((std::vector<tagRECT> *)this) >= a3 )
    {
      if ( v11 >= a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) >> 4 >= a3 )
        {
          v8 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E30((void *)this, (int)&v8[-4 * a3], (int)v8, v8);
          sub_47D8E0(a2, &v8[-4 * a3], v8);
          std::fill<tagRECT *,tagRECT>(a2, &a2[a3], &_Val);
        }
        else
        {
          sub_431E30((void *)this, (int)a2, *(_DWORD *)(this + 8), &a2[a3]);
          std::vector<tagRECT>::_Ufill(
            (std::vector<tagRECT> *)this,
            *(tagRECT **)(this + 8),
            a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 4),
            &_Val);
          *(_DWORD *)(this + 8) += 16 * a3;
          std::fill<tagRECT *,tagRECT>(a2, (tagRECT *)(*(_DWORD *)(this + 8) - 16 * a3), &_Val);
        }
      }
      else
      {
        if ( sub_47D3D0((std::allocator<tagRECT> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this) )
          v12 = a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this);
        v9 = sub_47D6D0(v12);
        v5 = sub_431E30((void *)this, *(_DWORD *)(this + 4), (int)a2, v9);
        _Ptr = std::vector<tagRECT>::_Ufill((std::vector<tagRECT> *)this, (tagRECT *)v5, a3, &_Val);
        sub_431E30((void *)this, (int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Count = a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4313B0((void *)this, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 4);
        }
        *(_DWORD *)(this + 12) = &v9[4 * v12];
        *(_DWORD *)(this + 8) = &v9[4 * _Count];
        *(_DWORD *)(this + 4) = v9;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (004316C0) --------------------------------------------------------
int __thiscall sub_4316C0(void *this, int a2, int a3)
{
  return sub_47A3B0(a2, a3);
}

//----- (004316F0) --------------------------------------------------------
void __thiscall std::vector<XMessageQueue::XElement>::_Insert_n(int this, XMessageQueue::XTimerElement *a2, unsigned int a3, int *a4)
{
  int v4; // edx
  unsigned int v5; // esi
  char *v6; // eax
  unsigned int v7; // [esp+4h] [ebp-20h]
  _DWORD *v9; // [esp+Ch] [ebp-18h]
  CMemory **v10; // [esp+10h] [ebp-14h]
  XMessageQueue::XTimerElement *_Ptr; // [esp+14h] [ebp-10h]
  unsigned int v12; // [esp+18h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-Ch]
  int v14[2]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int _Count; // [esp+30h] [ebp+Ch]

  v4 = a4[1];
  v14[0] = *a4;
  v14[1] = v4;
  v12 = std::vector<XMessageQueue::XElement>::capacity((std::vector<XMessageQueue::XTimerElement> *)this);
  if ( a3 )
  {
    v5 = sub_446B60((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)this);
    if ( v5 - std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) >= a3 )
    {
      if ( v12 >= a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) >> 3 >= a3 )
        {
          v9 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E60((void *)this, (int)&v9[-2 * a3], (int)v9, v9);
          sub_47A3F0(a2, &v9[-2 * a3], v9);
          std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(
            a2,
            (XMessageQueue::XTimerElement *)((char *)a2 + 8 * a3),
            (const XMessageQueue::XTimerElement *)v14);
        }
        else
        {
          sub_431E60((void *)this, (int)a2, *(_DWORD *)(this + 8), (char *)a2 + 8 * a3);
          std::vector<XMessageQueue::XElement>::_Ufill(
            (std::vector<XMessageQueue::XTimerElement> *)this,
            *(XMessageQueue::XTimerElement **)(this + 8),
            a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3),
            (const XMessageQueue::XTimerElement *)v14);
          *(_DWORD *)(this + 8) += 8 * a3;
          std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(
            a2,
            (XMessageQueue::XTimerElement *)(*(_DWORD *)(this + 8) - 8 * a3),
            (const XMessageQueue::XTimerElement *)v14);
        }
      }
      else
      {
        if ( sub_446B60((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)this) - (v12 >> 1) >= v12 )
          v7 = v12 + (v12 >> 1);
        else
          v7 = 0;
        v13 = v7;
        if ( v7 < a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) )
          v13 = a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
        v10 = sub_446E50(v13);
        v6 = sub_431E60((void *)this, *(_DWORD *)(this + 4), (int)a2, v10);
        _Ptr = std::vector<XMessageQueue::XElement>::_Ufill(
                 (std::vector<XMessageQueue::XTimerElement> *)this,
                 (XMessageQueue::XTimerElement *)v6,
                 a3,
                 (const XMessageQueue::XTimerElement *)v14);
        sub_431E60((void *)this, (int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Count = a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4316C0((void *)this, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3);
        }
        *(_DWORD *)(this + 12) = &v10[2 * v13];
        *(_DWORD *)(this + 8) = &v10[2 * _Count];
        *(_DWORD *)(this + 4) = v10;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (004319C0) --------------------------------------------------------
CMemory **__thiscall std::_Tree<std::_Tmap_traits<int,int,std::less<int>,std::allocator<std::pair<int const,int>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Rarg, const std::pair<int const ,CGame_Character::TargetInfo> *_Val, char _Carg)
{
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v7; // [esp+8h] [ebp-8h]
  CMemory **v8; // [esp+Ch] [ebp-4h]

  v8 = sub_44CD20(1);
  v7 = (std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *)operator new(0x18u, v8);
  if ( v7 )
    std::_Tree_nod<std::_Tmap_traits<char const *,int,iless,std::allocator<std::pair<char const * const,int>>,0>>::_Node::_Node(
      v7,
      _Larg,
      _Parg,
      _Rarg,
      _Val,
      _Carg);
  return v8;
}

//----- (00431A40) --------------------------------------------------------
void __thiscall sub_431A40(int this, CIOSocket::CIOTimer *a2, unsigned int a3, int *a4)
{
  unsigned int v4; // esi
  char *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-24h]
  CIOSocket::CIOTimer *_Dest; // [esp+Ch] [ebp-1Ch]
  CMemory **_First; // [esp+10h] [ebp-18h]
  char *_Last; // [esp+14h] [ebp-14h]
  unsigned int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+18h] [ebp-10h]
  CIOSocket::CIOTimer _Val; // [esp+1Ch] [ebp-Ch] BYREF
  int v14; // [esp+34h] [ebp+Ch]

  _Val.m_dwTime = *a4;
  _Val.m_pObject = (CIOObject *)a4[1];
  _Val.m_nId = a4[2];
  v11 = std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this);
  if ( a3 )
  {
    v4 = sub_446800((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)this);
    if ( v4 - std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) >= a3 )
    {
      if ( v11 >= a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) / 12 >= a3 )
        {
          _Dest = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = sub_4474B0((int)&_Dest[-a3], (int)_Dest, _Dest);
          std::copy_backward<IPAddrMask *,IPAddrMask *>(a2, &_Dest[-a3], _Dest);
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(a2, &a2[a3], &_Val);
        }
        else
        {
          sub_4474B0((int)a2, *(_DWORD *)(this + 8), &a2[a3]);
          std::vector<CIOSocket::CIOTimer>::_Xlen(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(char **)(this + 8),
            a3 - (*(_DWORD *)(this + 8) - (int)a2) / 12,
            (int)&_Val);
          *(_DWORD *)(this + 8) += 12 * a3;
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)(*(_DWORD *)(this + 8) - 12 * a3),
            &_Val);
        }
      }
      else
      {
        if ( sub_446800((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)this)
           - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
          v12 = a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        _First = sub_446B40(v12);
        v5 = sub_4474B0(*(_DWORD *)(this + 4), (int)a2, _First);
        _Last = std::vector<CIOSocket::CIOTimer>::_Xlen((std::vector<CIOSocket::CIOTimer> *)this, v5, a3, (int)&_Val);
        sub_4474B0((int)a2, *(_DWORD *)(this + 8), _Last);
        v14 = a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          std::vector<IPAddrMask>::_Destroy(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 4),
            *(CIOSocket::CIOTimer **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12);
        }
        *(_DWORD *)(this + 12) = &_First[3 * v12];
        *(_DWORD *)(this + 8) = &_First[3 * v14];
        *(_DWORD *)(this + 4) = _First;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (00431D20) --------------------------------------------------------
_DWORD *__thiscall sub_431D20(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a2 = *(_DWORD *)std::vector<tagRECT>::iterator::operator+=((std::vector<tagRECT>::iterator *)&v4, a3);
  return a2;
}

//----- (00431D50) --------------------------------------------------------
int __thiscall sub_431D50(int *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *this;
  return sub_425280(&v3, a2);
}

//----- (00431D80) --------------------------------------------------------
unsigned int __thiscall std::allocator<tagRECT>::max_size(std::allocator<tagRECT> *this)
{
  return 0xFFFFFFF;
}

//----- (00431DB0) --------------------------------------------------------
int __thiscall sub_431DB0(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) >> 4;
}

//----- (00431DD0) --------------------------------------------------------
int __thiscall sub_431DD0(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) >> 3;
}

//----- (00431DF0) --------------------------------------------------------
char *__cdecl sub_431DF0(void *a1, int a2, int a3)
{
  unknown_libname_6(&a1, &a1);
  return std::_Uninit_fill_n<XMessageQueue::XTimerElement *,unsigned int,XMessageQueue::XTimerElement,std::allocator<XMessageQueue::XTimerElement>>(
           (char *)a1,
           a2,
           a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00431E30) --------------------------------------------------------
char *__thiscall sub_431E30(void *this, int a2, int a3, void *a4)
{
  return sub_47D9D0(a2, a3, a4);
}

//----- (00431E60) --------------------------------------------------------
char *__thiscall sub_431E60(void *this, int a2, int a3, void *a4)
{
  return sub_47A690(a2, a3, a4);
}

//----- (00431E90) --------------------------------------------------------
void *__cdecl sub_431E90(void *a1, int a2, int a3)
{
  void *result; // eax

  result = a1;
  while ( a2 )
  {
    result = sub_4475D0(a1, a3);
    --a2;
    a1 = (char *)a1 + 12;
  }
  return result;
}

//----- (00431EF0) --------------------------------------------------------
_DWORD *__cdecl std::_Copy_backward_opt<tagRECT *,tagRECT *>(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    a2 -= 4;
    a3 -= 4;
    *a3 = *a2;
    a3[1] = a2[1];
    a3[2] = a2[2];
    a3[3] = a2[3];
  }
  return a3;
}

//----- (00431F30) --------------------------------------------------------
_DWORD *__cdecl std::_Copy_backward_opt<XMessageQueue::XTimerElement *,XMessageQueue::XTimerElement *>(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  int v3; // edx

  while ( a1 != a2 )
  {
    a2 -= 2;
    a3 -= 2;
    v3 = a2[1];
    *a3 = *a2;
    a3[1] = v3;
  }
  return a3;
}

//----- (00431F70) --------------------------------------------------------
int __cdecl std::_Destroy_range<CSyncPacket::CElement>(int a1, int a2)
{
  int result; // eax

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 12;
    a1 += 12;
  }
  return result;
}

//----- (00431FA0) --------------------------------------------------------
char *__cdecl std::allocator<IPAddrMask>::construct(IPAddrMask *_Ptr, const IPAddrMask *_Val, void *a3)
{
  unknown_libname_6(&_Ptr, &a3);
  return sub_4475F0((int)_Ptr, (int)_Val, (char *)a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00431FE0) --------------------------------------------------------
LONG *__cdecl std::_Construct<tagRECT,tagRECT>(tagRECT *_Ptr, const tagRECT *_Val)
{
  LONG *result; // eax
  LONG *v3; // [esp+4h] [ebp-4h]

  result = (LONG *)operator new(0x10u, _Ptr);
  v3 = result;
  if ( result )
  {
    *result = _Val->left;
    result[1] = _Val->top;
    result = (LONG *)_Val->right;
    v3[2] = (LONG)result;
    v3[3] = _Val->bottom;
  }
  return result;
}

//----- (00432030) --------------------------------------------------------
void *__thiscall sub_432030(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00432060) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, char a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(&a3);
  std::_Tree_ptr<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::_Tree_ptr<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>(
    this,
    a2,
    v4);
  std::_Init_locks::operator=(&a3);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (004320A0) --------------------------------------------------------
void *__thiscall sub_4320A0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004320D0) --------------------------------------------------------
int __thiscall sub_4320D0(void *this)
{
  return sub_4320F0(this);
}

//----- (004320F0) --------------------------------------------------------
int __thiscall sub_4320F0(void *this)
{
  return sub_432110((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00432110) --------------------------------------------------------
int __thiscall sub_432110(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4321C0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (004321C0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4321C0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_430C40(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00432260) --------------------------------------------------------
int __thiscall sub_432260(void *this)
{
  return sub_432280(this);
}

//----- (00432280) --------------------------------------------------------
int __thiscall sub_432280(void *this)
{
  return sub_4322A0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (004322A0) --------------------------------------------------------
int __thiscall sub_4322A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_432350(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00432350) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_432350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_430D10(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004323F0) --------------------------------------------------------
_DWORD *__thiscall lisp::var::operator=(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  if ( this != &v )
  {
    result = this;
    *this = a2;
  }
  return result;
}

//----- (00432410) --------------------------------------------------------
__int32 __thiscall sub_432410(const char **this)
{
  return strtol(this[1], 0, 0);
}

//----- (00432430) --------------------------------------------------------
unsigned __int32 __thiscall sub_432430(const char **this)
{
  return strtoul(this[1], 0, 0);
}

//----- (00432450) --------------------------------------------------------
int __thiscall lisp::_cons::length(lisp::_cons *this)
{
  _DWORD *v2; // eax
  int v3; // ecx
  int v4[3]; // [esp-4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h] BYREF

  v4[1] = (int)this;
  v5 = 0;
  lisp::var::var(&v6, &this->m_cdr.m_pObject);
  while ( 1 )
  {
    ++v5;
    if ( !(unsigned __int8)lisp::var::consp(&v6) )
      break;
    v2 = (_DWORD *)lisp::var::cdr(&v6);
    v4[0] = v3;
    lisp::var::var(v4, v2);
    lisp::var::operator=(&v6, v4[0]);
  }
  return v5;
}
// 432494: variable 'v3' is possibly undefined

//----- (004324B0) --------------------------------------------------------
std::ios_base *__thiscall sub_4324B0(std::ios_base *this)
{
  std::ios_base::ios_base(this);
  *(_DWORD *)this = off_4B76F0;
  return this;
}
// 40C340: using guessed type _DWORD __thiscall std::ios_base::ios_base(std::ios_base *__hidden this);
// 4B76F0: using guessed type int (*off_4B76F0[6])();

//----- (004324E0) --------------------------------------------------------
unsigned int __thiscall CLog::CInit::~CInit(CLog::CInit *this)
{
  unsigned int result; // eax
  unsigned int i; // [esp+4h] [ebp-4h]

  for ( i = 0; i < 3; ++i )
  {
    if ( *(&stream + i) )
      fclose(*(&stream + i));
    result = i + 1;
  }
  return result;
}

//----- (00432530) --------------------------------------------------------
void __cdecl CLog::AddV(int nType, char *format, char *va)
{
  char v3[36]; // [esp+8h] [ebp-93Ch] BYREF
  char v4[260]; // [esp+2Ch] [ebp-918h] BYREF
  time_t v5; // [esp+130h] [ebp-814h] BYREF
  struct tm *v6; // [esp+134h] [ebp-810h]
  size_t count; // [esp+138h] [ebp-80Ch]
  char a3[1024]; // [esp+13Ch] [ebp-808h] BYREF
  char buffer[1004]; // [esp+53Ch] [ebp-408h] BYREF
  int v10; // [esp+940h] [ebp-4h]

  v10 = dword_4D9830;
  vsprintf(a3, format, va);
  CScreen::Lock((CScreen *)&unk_4E1128);
  CLink::Insert(&unk_4E1128, *(&pLink + nType), a3);
  if ( nType >= 1 )
  {
    time(&v5);
    v6 = localtime(&v5);
    if ( v5 >= (unsigned int)dword_4E1110[nType] )
    {
      if ( *(&stream + nType) )
        fclose(*(&stream + nType));
      if ( nType == 1 )
        sprintf(v4, "Log\\%02d%02d%02d.log", v6->tm_year % 100, v6->tm_mon + 1, v6->tm_mday);
      else
        sprintf(v4, "Log\\%02d%02d%02d.err.log", v6->tm_year % 100, v6->tm_mon + 1, v6->tm_mday);
      qmemcpy(v3, v6, sizeof(v3));
      v6->tm_sec = 0;
      v6->tm_min = 0;
      v6->tm_hour = 0;
      dword_4E1110[nType] = mktime(v6) + 86400;
      *(&stream + nType) = fopen(v4, "ab");
      qmemcpy(v6, v3, sizeof(struct tm));
    }
    count = sprintf(
              buffer,
              "%02d/%02d/%02d %02d:%02d:%02d %s\r\n",
              v6->tm_year % 100,
              v6->tm_mon + 1,
              v6->tm_mday,
              v6->tm_hour,
              v6->tm_min,
              v6->tm_sec,
              a3);
    if ( *(&stream + nType) )
      fread_0(buffer, 1u, count, *(&stream + nType));
  }
  CScreen::Unlock((CScreen *)&unk_4E1128);
  if ( dword_4E2130 == (CScreen *)&unk_4E1128 )
    InvalidateRect(hWnd, 0, 1);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004327C0) --------------------------------------------------------
void __thiscall CScreen::Lock(CScreen *this)
{
  CIOCriticalSection::Enter(&this->m_lock.m_critical_section);
}

//----- (004327E0) --------------------------------------------------------
void __thiscall CScreen::Unlock(CScreen *this)
{
  CIOCriticalSection::Leave((int)&this->m_lock);
}

//----- (00432800) --------------------------------------------------------
void __stdcall CLog::Flush()
{
  unsigned int i; // [esp+0h] [ebp-4h]

  CScreen::Lock((CIOCriticalSection *)&unk_4E1128);
  for ( i = 0; i < 3; ++i )
  {
    if ( *(&stream + i) )
      fflush(*(&stream + i));
  }
  CScreen::Unlock((CIOCriticalSection *)&unk_4E1128);
}

//----- (00432860) --------------------------------------------------------
void LOG_INFO(char *format, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, format);
  CLog::AddV(0, format, va);
}

//----- (00432890) --------------------------------------------------------
void LOG_NORMAL(char *format, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, format);
  CLog::AddV(1, format, va);
}

//----- (004328C0) --------------------------------------------------------
void LOG_ERR(char *format, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, format);
  CLog::AddV(2, format, va);
}

//----- (004328F0) --------------------------------------------------------
int __cdecl CMainConfig::Open()
{
  int v0; // eax
  char *v1; // eax
  char *v2; // eax
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax
  size_t v9; // eax
  size_t v10; // eax
  size_t v11; // eax
  size_t v12; // eax
  const char *v13; // eax
  const char *v14; // eax
  const char *v15; // eax
  _lambda_9ab38a79c03e1e04423ad6818173354b_ *v16; // eax
  int v17; // [esp-4h] [ebp-2F4h]
  std::string v18; // [esp+8h] [ebp-2E8h] BYREF
  char v19[32]; // [esp+24h] [ebp-2CCh] BYREF
  int v20; // [esp+44h] [ebp-2ACh]
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> result; // [esp+50h] [ebp-2A0h] BYREF
  CHAR String[32]; // [esp+58h] [ebp-298h] BYREF
  char *i; // [esp+78h] [ebp-278h]
  char v24[4]; // [esp+7Ch] [ebp-274h] BYREF
  struct _SYSTEM_INFO SystemInfo; // [esp+80h] [ebp-270h] BYREF
  char Str[48]; // [esp+A4h] [ebp-24Ch] BYREF
  FILE *v27; // [esp+D4h] [ebp-21Ch]
  CConfig v28; // [esp+D8h] [ebp-218h] BYREF
  int v29; // [esp+2E8h] [ebp-8h]
  int v30; // [esp+2ECh] [ebp-4h]

  v29 = dword_4D9830;
  CConfig::CConfig(&v28);
  if ( CConfig::Open(&v28, "MainConfig.txt") )
  {
    GetSystemInfo(&SystemInfo);
    *(_DWORD *)dword_4E1190 = CConfig::GetInt(&v28, "NumberOfThreads", 2 * SystemInfo.dwNumberOfProcessors);
    dword_4E118C = CConfig::GetInt(&v28, "MaxUser", 1000);
    dword_4E1188 = CConfig::GetInt(&v28, "ServerId");
    dword_4E1184 = CConfig::GetInt(&v28, "AgeLimit", 18);
    v1 = (char *)CConfig::Get(&v28, "Map", ".\\Map");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E1194, v1);
    v2 = (char *)CConfig::Get(&v28, "DBServer", "127.0.0.1");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E11B0, v2);
    v3 = (char *)CConfig::Get(&v28, "AuthServer", "127.0.0.1");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E11CC, v3);
    v4 = (char *)CConfig::Get(&v28, "MailServer");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E1204, v4);
    v5 = (char *)CConfig::Get(&v28, "MailFrom");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E1220, v5);
    v6 = (char *)CConfig::Get(&v28, "MailTo");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E123C, v6);
    dword_4E117C = CConfig::GetTimeStamp();
    *(_DWORD *)&nPort = CConfig::GetInt(&v28, "Port", 30001);
    *(_DWORD *)&dword_4E116C = CConfig::GetInt(&v28, "DBPort", 40001);
    *(_DWORD *)&hostshort = CConfig::GetInt(&v28, "AuthPort", 50001);
    v7 = (char *)CConfig::Get(&v28, "ODBC", off_4B7858);
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E11E8, v7);
    dword_4E1164 = CConfig::GetInt(&v28, "ItemVer", 1);
    stru_4E35B4.m_nRef = CConfig::GetInt(&v28, "Country", 0);
    v8 = (char *)CConfig::Get(&v28, "Language", "LanguageM_kr.txt");
    sub_433B70((std::vector<IPAddrMask> *)&stru_4E1264, v8);
    dword_4E1180 = CConfig::GetInt(&v28, "MailLimitLv", 0);
    *(_DWORD *)dword_4E1160 = CConfig::GetInt(&v28, "Seed", 0);
    i = (char *)CConfig::Get(&v28, "Title");
    if ( *i )
    {
      sprintf(String, "%s on port %d", i, *(_DWORD *)&nPort);
      SetWindowTextA(hWnd, String);
    }
    for ( i = (char *)CConfig::Get(&v28, "Event", &DefaultNullString); ; i += v10 )
    {
      v9 = strspn(i, " ,");
      i += v9;
      if ( !*i )
        break;
      dword_4E1178 |= 1 << j__atol(i);
      v10 = strcspn(i, " ,");
    }
    for ( i = (char *)CConfig::Get(&v28, "System", &DefaultNullString); ; i += v12 )
    {
      v11 = strspn(i, " ,");
      i += v11;
      if ( !*i )
        break;
      *(_DWORD *)dword_4E1174 |= 1 << j__atol(i);
      v12 = strcspn(i, " ,");
    }
    v30 = 0;
    v13 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E1264);
    v27 = fopen(v13, "rt");
    if ( v27 )
    {
      while ( (v27->_flag & 0x10) == 0 )
      {
        ++v30;
        if ( fscanf(v27, "%d %[^\n]", v24, Str) < 2 )
        {
          if ( (v27->_flag & 0x10) == 0 )
          {
            v17 = v30;
            v15 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E1264);
            LOG_ERR("Can't read '%s'. (line:%d)", v15, v17);
            fclose(v27);
            v20 = 0;
            CConfig::~CConfig(&v28);
            return v20;
          }
          break;
        }
        std::string::string((std::vector<IPAddrMask> *)&v18, Str);
        v16 = _lambda_9ab38a79c03e1e04423ad6818173354b_::_lambda_9ab38a79c03e1e04423ad6818173354b_(
                (_lambda_9ab38a79c03e1e04423ad6818173354b_ *)v19,
                v24,
                &v18);
        std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::insert(
          (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1258,
          &result,
          (const std::pair<int const ,CSocket *> *)v16);
        sub_432EC0((int)v19);
        sub_40F780(&v18);
        if ( !result.second )
        {
          LOG_ERR("Can't insert into LanguageMap.(index:%d, string:%s)", *(_DWORD *)v24, Str);
          fclose(v27);
          CConfig::~CConfig(&v28);
          return 0;
        }
      }
      fclose(v27);
      CConfig::~CConfig(&v28);
      v0 = 1;
    }
    else
    {
      v14 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E1264);
      LOG_ERR("Can't open '%s'", v14);
      CConfig::~CConfig(&v28);
      v0 = 0;
    }
  }
  else
  {
    CConfig::~CConfig(&v28);
    v0 = 0;
  }
  return v0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4E1164: using guessed type int dword_4E1164;
// 4E1178: using guessed type int dword_4E1178;
// 4E117C: using guessed type int dword_4E117C;
// 4E1180: using guessed type int dword_4E1180;
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;
// 4E118C: using guessed type int dword_4E118C;
// 4E1258: using guessed type int dword_4E1258[3];

//----- (00432EC0) --------------------------------------------------------
void __thiscall sub_432EC0(int this)
{
  sub_40F780((void *)(this + 4));
}

//----- (00432EE0) --------------------------------------------------------
void __cdecl CMainConfig::Close()
{
  sub_433110(dword_4E1258);
}
// 4E1258: using guessed type int dword_4E1258[3];

//----- (00432EF0) --------------------------------------------------------
char *__cdecl GetStr(int nIndex)
{
  int v1; // eax
  char *v2; // eax
  int v3; // eax
  char v4[4]; // [esp+0h] [ebp-8h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator result; // [esp+4h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1258,
    &result,
    &nIndex);
  v1 = sub_430C20(dword_4E1258, (int)v4);
  if ( (unsigned __int8)unknown_libname_8(v1) )
  {
    LOG_ERR("Can't find words in LanguageMap. (index:%d)", nIndex);
    v2 = &DefaultNullString;
  }
  else
  {
    v3 = sub_420250(&result);
    v2 = (char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_((void *)(v3 + 4));
  }
  return v2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1258: using guessed type int dword_4E1258[3];

//----- (00432F60) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::insert(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *result, const std::pair<int const ,CSocket *> *_Val)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = this->_Myhead;
  v23 = 1;
  while ( !*(_BYTE *)sub_433230((int)v21) )
  {
    v22 = (std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *)v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)sub_474590((int)_Val);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4332F0((int)this, (int)v17, 1, (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *)v22, (const std::pair<unsigned long const ,std::string > *)_Val);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)result,
        v5,
        &v18);
      return result;
    }
    sub_475900(v20);
  }
  v11 = (_DWORD *)sub_474590((int)_Val);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4332F0((int)this, (int)v15, v23, (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *)v22, (const std::pair<unsigned long const ,std::string > *)_Val);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)result,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)result,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00433110) --------------------------------------------------------
_DWORD *__thiscall sub_433110(_DWORD *this)
{
  int *v1; // eax
  _DWORD *result; // eax

  v1 = (int *)sub_478AB0(this);
  sub_433270(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00433170) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *result, const int *_Keyval)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_433240(this, (int)v12, (int)_Keyval);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(_Keyval, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *(_DWORD *)result = *(_DWORD *)v7;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00433200) --------------------------------------------------------
_lambda_9ab38a79c03e1e04423ad6818173354b_ *__thiscall _lambda_9ab38a79c03e1e04423ad6818173354b_::_lambda_9ab38a79c03e1e04423ad6818173354b_(_lambda_9ab38a79c03e1e04423ad6818173354b_ *this, _DWORD *a2, const std::string *a3)
{
  *(_DWORD *)this = *a2;
  std::string::string((_lambda_9ab38a79c03e1e04423ad6818173354b_ *)((char *)this + 4), a3);
  return this;
}

//----- (00433230) --------------------------------------------------------
int __cdecl sub_433230(int a1)
{
  return a1 + 45;
}

//----- (00433240) --------------------------------------------------------
int __thiscall sub_433240(_DWORD *this, int a1, int a2)
{
  int v3; // eax

  v3 = sub_476660(this, (_DWORD *)a2);
  sub_446700((void *)a1, v3);
  return a1;
}

//----- (00433270) --------------------------------------------------------
int __stdcall sub_433270(int a1)
{
  int result; // eax
  int *v2; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_433230(i);
    if ( result )
      break;
    v2 = (int *)sub_430F90(i);
    sub_433270(*v2);
    i = *(_DWORD *)sub_474590(i);
    sub_433910(a1);
    sub_4338F0((void *)a1, 1);
  }
  return result;
}

//----- (004332F0) --------------------------------------------------------
int __thiscall sub_4332F0(int this, int a2, char a3, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *a4, const std::pair<unsigned long const ,std::string > *a5)
{
  void *v5; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v6; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v7; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v8; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v9; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v10; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v11; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v43; // [esp+48h] [ebp-8h]
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v44; // [esp+4Ch] [ebp-4h]
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Parg; // [esp+60h] [ebp+10h]

  if ( sub_477640(this) - 1 <= *(_DWORD *)(this + 8) )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Buynode(
          (std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> > *)this,
          *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)(this + 4),
          a4,
          *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)(this + 4),
          a5,
          0);
  ++*(_DWORD *)(this + 8);
  if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)(this + 4) )
  {
    v6 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_478AB0((int *)this);
    *v6 = v44;
    v7 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_418790((_DWORD *)this);
    *v7 = v44;
    v8 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_47EB40((int *)this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_474590((int)a4);
    *v9 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_418790((_DWORD *)this) )
    {
      v10 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_418790((_DWORD *)this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_430F90((int)a4);
    *v11 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_47EB40((int *)this) )
    {
      v12 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_47EB40((int *)this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_433730(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_433730((int)_Parg) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_446FF0((int)v43);
        sub_4766F0((void *)this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_433730(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_433730(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_433740((void *)this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_474590(*v31);
      if ( *(_BYTE *)sub_433730((int)_Parg) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_446FF0((int)v43);
          sub_433740((void *)this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_433730(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_433730(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_4766F0((void *)this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_433730(*v19) = 1;
        *(_BYTE *)sub_433730((int)_Parg) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_433730(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node **)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0((int *)this);
  *(_BYTE *)sub_433730(*v39) = 1;
  sub_446700((void *)a2, (int)v44);
  return a2;
}
// 433328: variable 'v5' is possibly undefined

//----- (00433730) --------------------------------------------------------
int __cdecl sub_433730(int a1)
{
  return a1 + 44;
}

//----- (00433740) --------------------------------------------------------
int *__thiscall sub_433740(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_433230(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00433870) --------------------------------------------------------
CMemory **__thiscall std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> > *this, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Rarg, const std::pair<unsigned long const ,std::string > *_Val, char _Carg)
{
  std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *v7; // [esp+8h] [ebp-8h]
  CMemory **v8; // [esp+Ch] [ebp-4h]

  v8 = sub_4793B0(1);
  v7 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *)operator new(0x30u, v8);
  if ( v7 )
    std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Node::_Node(
      v7,
      _Larg,
      _Parg,
      _Rarg,
      _Val,
      _Carg);
  return v8;
}

//----- (004338F0) --------------------------------------------------------
void __stdcall sub_4338F0(void *a1, int a2)
{
  operator delete(a1);
}

//----- (00433910) --------------------------------------------------------
void *__stdcall sub_433910(int a1)
{
  return sub_433AF0((void *)a1);
}

//----- (00433930) --------------------------------------------------------
int __thiscall sub_433930(_DWORD *this)
{
  return sub_447000(*this);
}

//----- (00433950) --------------------------------------------------------
int __thiscall sub_433950(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_433230(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*this);
    if ( *(_BYTE *)sub_433230(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_433230(v5) || *this != *(_DWORD *)sub_474590(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_433230(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*this);
      result = sub_433AB0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00433A30) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,std::string>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *_Rarg, const std::pair<unsigned long const ,std::string > *_Val, char _Carg)
{
  *(_DWORD *)this = _Larg;
  *((_DWORD *)this + 1) = _Parg;
  *((_DWORD *)this + 2) = _Rarg;
  std::pair<unsigned long const,tagSibmanRankInfo>::pair<unsigned long const,tagSibmanRankInfo>(
    (std::_Tree_nod<std::_Tmap_traits<unsigned long,std::string,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::string > >,0> >::_Node *)((char *)this + 12),
    _Val);
  *((_BYTE *)this + 44) = _Carg;
  *((_BYTE *)this + 45) = 0;
  return this;
}

//----- (00433A80) --------------------------------------------------------
std::pair<unsigned long const ,tagSibmanRankInfo> *__thiscall std::pair<unsigned long const,tagSibmanRankInfo>::pair<unsigned long const,tagSibmanRankInfo>(std::pair<unsigned long const ,tagSibmanRankInfo> *this, const std::pair<unsigned long,tagSibmanRankInfo> *_Right)
{
  *(_DWORD *)this = *(_DWORD *)_Right;
  std::string::string(
    (std::pair<unsigned long const ,tagSibmanRankInfo> *)((char *)this + 4),
    (const std::pair<unsigned long,tagSibmanRankInfo> *)((char *)_Right + 4));
  return this;
}

//----- (00433AB0) --------------------------------------------------------
int __cdecl sub_433AB0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_433230(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00433AF0) --------------------------------------------------------
void *__cdecl sub_433AF0(void *a1)
{
  return sub_433B20(a1, 0);
}

//----- (00433B00) --------------------------------------------------------
CMemory **__cdecl sub_433B00(int a1)
{
  return operator new(48 * a1);
}

//----- (00433B20) --------------------------------------------------------
void *__thiscall sub_433B20(void *this, char a2)
{
  sub_433B50(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 433B50: using guessed type int __thiscall sub_433B50(_DWORD);

//----- (00433B70) --------------------------------------------------------
std::string *__thiscall sub_433B70(std::vector<IPAddrMask> *this, char *a2)
{
  return std::vector<IPAddrMask>::capacity(this, a2);
}

//----- (00433B90) --------------------------------------------------------
std::string *__thiscall std::string::string(std::string *this)
{
  std::string *v2; // [esp-4h] [ebp-Ch] BYREF
  int v3; // [esp+0h] [ebp-8h]

  v3 = (int)this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  sub_44F7C0((void *)v3, (char)v2);
  std::string::_Tidy(v3, 0, 0);
  return (std::string *)v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00433BC0) --------------------------------------------------------
void *__thiscall sub_433BC0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_472ED0(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00433BF0) --------------------------------------------------------
int __thiscall sub_433BF0(void *this)
{
  return sub_433C10(this);
}

//----- (00433C10) --------------------------------------------------------
int __thiscall sub_433C10(void *this)
{
  return sub_433C30((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00433C30) --------------------------------------------------------
int __thiscall sub_433C30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_433CE0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00433CE0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_433CE0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_433110(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_434510(&a3, v10, 0);
      sub_433D80(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00433D80) --------------------------------------------------------
_DWORD *__thiscall sub_433D80(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  char v52[36]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_433230(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0((std::logic_error *)v52, (const std::string *)v51);
    std::exception::_Raise(v4);
    sub_4111D0((std::logic_error *)v52);
    sub_40F780(v51);
  }
  v56 = (void *)unknown_libname_7(&a3);
  sub_475880(&a3);
  v54 = v56;
  v5 = (int *)sub_474590((int)v56);
  if ( *(_BYTE *)sub_433230(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_433230(*v6) )
    {
      v55 = *(void **)sub_474590((int)v54);
    }
    else
    {
      v54 = (void *)unknown_libname_7(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_433230((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)sub_474590((int)v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)sub_474590((int)v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_479190((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_433AB0((int)v55);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)sub_474590((int)v56);
    *(_DWORD *)sub_474590((int)v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_433230((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)sub_474590((int)v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v56);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v56 )
      {
        v27 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_433730((int)v56);
    v31 = (char *)sub_433730((int)v54);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_433730((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_433730((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_433730((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)sub_474590((int)v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)sub_474590((int)v53);
      if ( !*(_BYTE *)sub_433730((int)v54) )
      {
        *(_BYTE *)sub_433730((int)v54) = 1;
        *(_BYTE *)sub_433730((int)v53) = 0;
        sub_433740(this, (int)v53);
        v54 = *(void **)sub_474590((int)v53);
      }
      if ( !*(_BYTE *)sub_433230((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_433730(*v40) != 1 || (v41 = (int *)sub_474590((int)v54), *(_BYTE *)sub_433730(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v54);
          if ( *(_BYTE *)sub_433730(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_433730(*v43) = 1;
            *(_BYTE *)sub_433730((int)v54) = 0;
            sub_4766F0(this, (int)v54);
            v54 = *(void **)sub_474590((int)v53);
          }
          v44 = (_BYTE *)sub_433730((int)v53);
          *(_BYTE *)sub_433730((int)v54) = *v44;
          *(_BYTE *)sub_433730((int)v53) = 1;
          v45 = (int *)sub_474590((int)v54);
          *(_BYTE *)sub_433730(*v45) = 1;
          sub_433740(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_433730((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_433730((int)v54) )
    {
      *(_BYTE *)sub_433730((int)v54) = 1;
      *(_BYTE *)sub_433730((int)v53) = 0;
      sub_4766F0(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_433230((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v54);
    if ( *(_BYTE *)sub_433730(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_433730(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_433730(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v54);
        *(_BYTE *)sub_433730(*v37) = 1;
        *(_BYTE *)sub_433730((int)v54) = 0;
        sub_433740(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_433730((int)v53);
      *(_BYTE *)sub_433730((int)v54) = *v38;
      *(_BYTE *)sub_433730((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_433730(*v39) = 1;
      sub_4766F0(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_433910((int)v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00434510) --------------------------------------------------------
_DWORD *__thiscall sub_434510(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_475880(this);
  *a2 = v4;
  return a2;
}

//----- (00434540) --------------------------------------------------------
int __thiscall sub_434540(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_433230(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_433230(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_433230(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_479190(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00434600) --------------------------------------------------------
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
  DWORD ThreadId; // [esp+0h] [ebp-24h] BYREF
  struct tagMSG Msg; // [esp+4h] [ebp-20h] BYREF
  HACCEL hAccTable; // [esp+20h] [ebp-4h]

  LoadStringA(hInstance, 0x67u, WindowName, 100);
  LoadStringA(hInstance, 0x6Du, ClassName, 100);
  MyRegisterClass(hInstance);
  CScreen::Open((CScreen *)&unk_4E1128, 200, 50);
  CScreen::Open((CScreen *)dword_4E2EDC, 80, 20);
  dword_4E2130 = (CScreen *)&unk_4E1128;
  if ( !InitInstance(hInstance, nShowCmd) )
    return 0;
  hAccTable = LoadAcceleratorsA(hInstance, (LPCSTR)0x6D);
  dword_4E1280 = (HANDLE)_beginthreadex(0, 0, (int)StartThread, 0, 0, &ThreadId);
  while ( GetMessageA(&Msg, 0, 0, 0) )
  {
    if ( !TranslateAcceleratorA(Msg.hwnd, hAccTable, &Msg) )
    {
      TranslateMessage(&Msg);
      DispatchMessageA(&Msg);
    }
  }
  CLog::Flush();
  if ( sub_422EE0() )
    ExitProcess(0);
  return Msg.wParam;
}
// 4E2EDC: using guessed type int dword_4E2EDC[13];

//----- (00434710) --------------------------------------------------------
ATOM __cdecl MyRegisterClass(HINSTANCE__ *hInstance)
{
  WNDCLASSEXA v2; // [esp+0h] [ebp-30h] BYREF

  v2.cbSize = 48;
  v2.style = 3;
  v2.lpfnWndProc = WndProc;
  v2.cbClsExtra = 0;
  v2.cbWndExtra = 0;
  v2.hInstance = hInstance;
  v2.hIcon = LoadIconA(hInstance, (LPCSTR)0x6B);
  v2.hCursor = LoadCursorA(0, (LPCSTR)0x7F00);
  v2.hbrBackground = (HBRUSH__ *)6;
  v2.lpszMenuName = (const char *)109;
  v2.lpszClassName = ClassName;
  v2.hIconSm = LoadIconA(hInstance, (LPCSTR)0x6C);
  return RegisterClassExA(&v2);
}

//----- (00434790) --------------------------------------------------------
int __cdecl InitInstance(HINSTANCE hInstance, int nCmdShow)
{
  HMENU v3; // eax
  HMENU v4; // eax
  HWND hWnd; // [esp+0h] [ebp-4h]

  ::hInstance = hInstance;
  hWnd = CreateWindowExA(0x300u, ClassName, WindowName, 0xCF0000u, 0x80000000, 0, 0x80000000, 0, 0, 0, hInstance, 0);
  if ( !hWnd )
    return 0;
  v3 = GetMenu(hWnd);
  EnableMenuItem(v3, 0x8011u, 1u);
  v4 = GetMenu(hWnd);
  EnableMenuItem(v4, 0x8015u, 1u);
  ::hWnd = hWnd;
  ShowWindow(hWnd, nCmdShow);
  UpdateWindow(hWnd);
  return 1;
}

//----- (00434840) --------------------------------------------------------
int TestException()
{
  int result; // eax
  char v1; // [esp+0h] [ebp-28h]

  ELOG("Exception Test\n", v1);
  result = 0;
  MEMORY[0] = 0;
  return result;
}
// 43486B: variable 'v1' is possibly undefined

//----- (004348E0) --------------------------------------------------------
LRESULT __stdcall WndProc(HWND hWndParent, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  int v5; // [esp+Ch] [ebp-24h]
  int v6; // [esp+10h] [ebp-20h]
  int v7; // [esp+14h] [ebp-1Ch]
  unsigned int v8; // [esp+1Ch] [ebp-14h]
  HANDLE hObject; // [esp+20h] [ebp-10h]
  DWORD ThreadId[3]; // [esp+24h] [ebp-Ch] BYREF

  if ( Msg > 0x10 )
  {
    if ( Msg == 273 )
    {
      ThreadId[2] = (unsigned __int16)wParam;
      ThreadId[1] = HIWORD(wParam);
      if ( (unsigned __int16)wParam > 0x800Eu )
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x8011u:
          case 0x8015u:
            return 0;
          case 0x8012u:
            goto LABEL_26;
          case 0x8013u:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)dword_4E2EDC;
            CStatus::Update();
            SetTimer(hWndParent, 1u, 0xBB8u, 0);
            return 0;
          case 0x8017u:
            DialogBoxParamA(hInstance, (LPCSTR)0x82, hWndParent, NoticeDialogProc, 0);
            return 0;
          case 0x8019u:
            CItem::ReloadItemGroup();
            return 0;
          case 0x801Bu:
            DialogBoxParamA(hInstance, (LPCSTR)0x83, hWndParent, ProtocolDialogProc, 0);
            return 0;
          default:
            return DefWindowProcA(hWndParent, Msg, wParam, lParam);
        }
      }
      if ( (unsigned __int16)wParam == 32782 )
      {
        KillTimer(hWndParent, 1u);
        dword_4E2130 = (CScreen *)&unk_4E1128;
        if ( sub_422F30() )
          LOG_INFO("ASSERT enabled");
        else
          LOG_INFO("ASSERT disabled");
      }
      else if ( (unsigned __int16)wParam > 0x800Au )
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x800Bu:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            LOG_INFO("Stack dump started");
            UpdateWindow(hWndParent);
            CIOSocket::DumpStack();
            LOG_INFO("Stack dump completed");
            break;
          case 0x800Cu:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            CLog::Flush();
            LOG_INFO("Log Flushed");
            break;
          case 0x800Du:
            v8 = CIOSocket::AddIOThread((void *)HIWORD(wParam));
            if ( v8 )
              ++*(_DWORD *)dword_4E1190;
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            LOG_ERR("Add thread count(%d) thread id(%x)", *(_DWORD *)dword_4E1190, v8);
            break;
          default:
            return DefWindowProcA(hWndParent, Msg, wParam, lParam);
        }
      }
      else
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x800Au:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            LOG_INFO("Exception test started");
            UpdateWindow(hWndParent);
            TestException();
            LOG_INFO("Exception test completed");
            break;
          case 0x68u:
            DialogBoxParamA(hInstance, (LPCSTR)0x67, hWndParent, About, 0);
            break;
          case 0x69u:
            PostMessageA(hWndParent, 0x10u, 0, 0);
            break;
          case 0x8009u:
            if ( sub_422EE0() )
            {
              hObject = (HANDLE)_beginthreadex(0, 0, (int)StopThread, lParam, 0, ThreadId);
              CloseHandle(hObject);
LABEL_26:
              KillTimer(hWndParent, 1u);
              dword_4E2130 = (CScreen *)&unk_4E1128;
              InvalidateRect(hWndParent, 0, 1);
            }
            break;
          default:
            return DefWindowProcA(hWndParent, Msg, wParam, lParam);
        }
      }
    }
    else
    {
      if ( Msg != 275 )
        return DefWindowProcA(hWndParent, Msg, wParam, lParam);
      switch ( wParam )
      {
        case 1u:
          CStatus::Update();
          break;
        case 2u:
          dword_4E17B8 -= 10000;
          if ( dword_4E17B8 <= 0 )
          {
            KillTimer(hWndParent, 2u);
            SetTimer(hWndParent, 3u, 0x7D0u, 0);
            CPlayer::WriteAll(S2C_MESSAGE, "b", 2);
            LOG_INFO("[Shutdown] Server is closed right now!");
            dword_4E17B8 = 0;
          }
          else
          {
            v7 = dword_4E17B8 / 60000;
            v6 = dword_4E17B8 % 60000 / 1000;
            if ( dword_4E17B8 / 60000 <= 0 )
            {
              CPlayer::WriteAll(S2C_MESSAGEV, "bb", 1, v6);
              LOG_INFO("[Shutdown] Server will be closed after %d sec", v6);
            }
            else if ( !v6 )
            {
              CPlayer::WriteAll(S2C_MESSAGEV, "bb", 0, v7);
              LOG_INFO("[Shutdown] Server will be closed after %d min", v7);
            }
          }
          break;
        case 3u:
          KillTimer(hWndParent, 3u);
          PostMessageA(hWndParent, 0x111u, 0x8009u, 0);
          break;
      }
    }
  }
  else
  {
    switch ( Msg )
    {
      case 0x10u:
        if ( sub_422F00() )
        {
          v5 = MessageBoxA(hWndParent, "Really shutdown the System?", "MainSvr", 3u);
          if ( v5 == 6 )
          {
            PostMessageA(hWndParent, 0x111u, 0x8009u, 1);
            return 0;
          }
          if ( v5 == 2 )
            return 0;
        }
        DestroyWindow(hWndParent);
        return 0;
      case 2u:
        PostQuitMessage(0);
        break;
      case 0xFu:
        CScreen::OnPaint(dword_4E2130);
        break;
      default:
        return DefWindowProcA(hWndParent, Msg, wParam, lParam);
    }
  }
  return 0;
}
// 4E17B8: using guessed type int dword_4E17B8;
// 4E2EDC: using guessed type int dword_4E2EDC[13];

//----- (00434E60) --------------------------------------------------------
int __stdcall About(HWND__ *hDlg, unsigned int message, unsigned int wParam, int lParam)
{
  if ( message == 272 )
    return 1;
  if ( message != 273 || (unsigned __int16)wParam != 1 && (unsigned __int16)wParam != 2 )
    return 0;
  EndDialog(hDlg, (unsigned __int16)wParam);
  return 1;
}

//----- (00434ED0) --------------------------------------------------------
BOOL __stdcall NoticeDialogProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  HWND v5; // eax
  UINT v6; // [esp-4h] [ebp-224h]
  signed int v7; // [esp+Ch] [ebp-214h]
  CHAR String; // [esp+10h] [ebp-210h] BYREF
  char v9[508]; // [esp+11h] [ebp-20Fh] BYREF
  __int16 v10; // [esp+20Dh] [ebp-13h]
  char v11; // [esp+20Fh] [ebp-11h]
  int v12; // [esp+214h] [ebp-Ch]
  int v13; // [esp+218h] [ebp-8h]
  int v14; // [esp+21Ch] [ebp-4h]

  v12 = dword_4D9830;
  if ( uMsg == 272 )
    return 1;
  if ( uMsg != 273 )
    return 0;
  v14 = (unsigned __int16)wParam;
  v13 = HIWORD(wParam);
  if ( (unsigned __int16)wParam == 1 )
  {
    String = 0;
    memset(v9, 0, sizeof(v9));
    v10 = 0;
    v11 = 0;
    GetDlgItemTextA(hDlg, 1001, &String, 511);
    if ( IsDlgButtonChecked(hDlg, 1003) )
    {
      v7 = GetDlgItemInt(hDlg, 1002, 0, 0);
      if ( v7 > 60 )
      {
        MessageBoxA(hDlg, "Shutdown Time Setting Error. (Max 60)", "Shutdown Error", 0);
        return 1;
      }
      if ( v7 <= 0 )
      {
        if ( dword_4E17B8 )
        {
          KillTimer(hWnd, 2u);
          dword_4E17B8 = 0;
          LOG_NORMAL("Shutdown's canceled.");
        }
        goto LABEL_22;
      }
      if ( dword_4E17B8 )
      {
        LOG_INFO("[Shutdown] Shutdown's already started. (%d min. remains)", dword_4E17B8 / 60000);
LABEL_22:
        EndDialog(hDlg, 1);
        return 1;
      }
      dword_4E17B8 = 60000 * v7;
      SetTimer(hWnd, 2u, 0x2710u, 0);
      LOG_NORMAL("Shutdown's started. (%d min. remains)", v7);
    }
    if ( String )
    {
      CPlayer::WriteAll(S2C_NOTICE, "s", &String);
      if ( stru_4E35B4.m_nRef == 1 )
        LOG_NORMAL("[GM Command] Notice from Main : %s", &String);
    }
    goto LABEL_22;
  }
  if ( (unsigned __int16)wParam == 2 )
  {
    EndDialog(hDlg, 0);
    return 1;
  }
  if ( (unsigned __int16)wParam == 1003 && !v13 )
  {
    v6 = IsDlgButtonChecked(hDlg, 1003);
    v5 = GetDlgItem(hDlg, 1002);
    EnableWindow(v5, v6);
  }
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4E17B8: using guessed type int dword_4E17B8;

//----- (00435130) --------------------------------------------------------
BOOL __stdcall ProtocolDialogProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  BOOL wmId; // eax

  if ( uMsg == 272 )
  {
    SetDlgItemInt(hDlg, 1004, uValue, 1);
    wmId = 1;
  }
  else if ( uMsg == 273 && (unsigned __int16)wParam == 1 )
  {
    uValue = GetDlgItemInt(hDlg, 1004, 0, 0);
    EndDialog(hDlg, 1);
    wmId = 1;
  }
  else
  {
    wmId = 0;
  }
  return wmId;
}

//----- (004351C0) --------------------------------------------------------
int __stdcall StartThread(void *__formal)
{
  std::string *v1; // eax
  std::string *v2; // eax
  const CHAR *v3; // eax
  const char *v5; // eax
  const char *v6; // [esp-8h] [ebp-200h]
  const std::string *v7; // [esp-4h] [ebp-1FCh]
  const char *v8; // [esp-4h] [ebp-1FCh]
  std::string result; // [esp+0h] [ebp-1F8h] BYREF
  char v10[28]; // [esp+1Ch] [ebp-1DCh] BYREF
  int i; // [esp+38h] [ebp-1C0h]
  char v12[4]; // [esp+3Ch] [ebp-1BCh]
  char v13[16]; // [esp+40h] [ebp-1B8h] BYREF
  char v14[4]; // [esp+50h] [ebp-1A8h]
  int err; // [esp+54h] [ebp-1A4h]
  struct tm *tm; // [esp+58h] [ebp-1A0h]
  time_t nTimeStamp; // [esp+5Ch] [ebp-19Ch] BYREF
  struct WSAData WSAData; // [esp+60h] [ebp-198h] BYREF
  int v19; // [esp+1F4h] [ebp-4h]

  v19 = dword_4D9830;
  sub_422EE0();
  v7 = GetUniqueName(&result);
  v1 = (std::string *)std::string::string((std::vector<IPAddrMask> *)v10, "Global\\");
  v2 = std::string::append(v1, v7);
  v3 = (const CHAR *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(v2);
  CreateMutexA(0, 0, v3);
  sub_40F780(v10);
  sub_40F780(&result);
  if ( GetLastError() )
  {
    LOG_INFO("Another Server is running");
    return 0;
  }
  LOG_NORMAL("Server started");
  err = WSAStartup(0x202u, &WSAData);
  if ( err )
  {
    LOG_ERR("WSAStartup error 0x%x", err);
    return 0;
  }
  if ( !CMainConfig::Open() )
    return 0;
  InitRandom();
  v8 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E123C);
  v6 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E1220);
  v5 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(&stru_4E1204);
  CIOException::Open(v5, v6, v8);
  CIOObject::RegisterWait(*(int *)dword_4E1190);
  if ( !CDBSocket::Start() )
    return 0;
  if ( !CAuthSocket::Start() )
    return 0;
  if ( !CObjectDB::Open() )
    return 0;
  CCalendar::Start();
  CServer::Start();
  CPlayer::Start();
  CMonster::Start();
  CNPC::Start();
  CCastle::Start();
  CWar::Start();
  if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
  {
    *(_DWORD *)v14 = AntiCpSvr_Initialize("Config\\HackShield.crc");
    if ( *(_DWORD *)v14 )
    {
      LOG_ERR("_AntiCpSvr_Initialize() is Failed.  ErrorType(%d)", *(_DWORD *)v14);
      return 0;
    }
    LOG_INFO(" HackShield Initialized");
  }
  if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0 )
  {
    for ( i = 0; i < 16; ++i )
      v13[i] = Random(0, 63);
    memcpy(&unk_4E1358, v13, 0x10u);
    *(_DWORD *)v12 = _HsCrypt_InitCrypt((int)&unk_4E1358);
    if ( *(_DWORD *)v12 )
    {
      LOG_ERR("_HsCrypt_InitCrypt() is Failed.  ErrorType(%d)", *(_DWORD *)v12);
      return 0;
    }
    LOG_INFO(" InitCrypt is done");
  }
  if ( *(_DWORD *)dword_4E1160 )
  {
    uValue = *(_DWORD *)dword_4E1160;
    LOG_NORMAL("Seed is %d", *(_DWORD *)dword_4E1160);
  }
  else
  {
    uValue = 3793;
  }
  nTimeStamp = dword_4E117C + 32400;
  tm = gmtime(&nTimeStamp);
  LOG_NORMAL(
    "Server is ready on port %d (time stamp: %02d/%02d/%02d %02d:%02d:%02d (KR))",
    *(_DWORD *)&nPort,
    tm->tm_year % 100,
    tm->tm_mon + 1,
    tm->tm_mday,
    tm->tm_hour,
    tm->tm_min,
    tm->tm_sec);
  CLog::Flush();
  sub_422EC0();
  CIOBuffer::FreeAll(0);
  return 0;
}
// 4B4014: using guessed type int (__stdcall *AntiCpSvr_Initialize)(_DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E117C: using guessed type int dword_4E117C;

//----- (00435500) --------------------------------------------------------
int __stdcall StopThread(void *arglist)
{
  LOG_NORMAL("Shutdown started");
  sub_418BE0();
  sub_419AB0();
  CGuild::Stop();
  CLog::Flush();
  CNPC::Stop();
  CMonster::Stop();
  _initp_misc_winxfltr();
  CServer::Stop();
  while ( CServer::Size() )
    Sleep(30u);
  Sleep(1000u);
  CCalendar::Stop();
  CObjectDB::Close();
  CSMap::FreeSMap();
  CAuthSocket::Stop();
  CDBSocket::Stop();
  CIOSocket::CloseIOThread();
  WaitForSingleObject(dword_4E1280, 0xFFFFFFFF);
  CMainConfig::Close();
  if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
  {
    AntiCpSvr_Finalize();
    LOG_INFO(" HackShield Finalized");
  }
  LOG_NORMAL("Shutdown completed");
  if ( arglist )
    PostMessageA(hWnd, 0x10u, 0, 0);
  return 0;
}
// 4B4010: using guessed type int (*AntiCpSvr_Finalize)(void);

//----- (004355E0) --------------------------------------------------------
std::string *__thiscall std::string::append(std::string *this, const std::string *a2)
{
  return std::string::append(this, a2, 0, 0xFFFFFFFF);
}

//----- (00435600) --------------------------------------------------------
std::string *__thiscall std::string::append(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count)
{
  _DWORD *v4; // eax
  char *v6; // [esp-8h] [ebp-10h]
  unsigned int _Newsize; // [esp+4h] [ebp-4h]
  unsigned int _Newsizea; // [esp+4h] [ebp-4h]

  if ( unknown_libname_4(_Right) < _Roff )
    std::_String_base::_Xran(this);
  _Newsize = unknown_libname_4(_Right) - _Roff;
  if ( _Newsize < _Count )
    _Count = _Newsize;
  if ( -1 - this->_Mysize <= _Count )
    sub_49F289();
  if ( _Count )
  {
    _Newsizea = _Count + this->_Mysize;
    if ( std::string::_Grow(this, _Newsizea, 0) )
    {
      v6 = (char *)std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(_Right) + _Roff;
      v4 = std::basic_string_char_std::char_traits_char__std::allocator_char_____::_Myptr(this);
      std::char_traits<char>::copy((char *)v4 + this->_Mysize, v6, _Count);
      std::string::_Eos(this, _Newsizea);
    }
  }
  return this;
}
// 40F880: using guessed type int __thiscall unknown_libname_4(_DWORD);

//----- (004356C0) --------------------------------------------------------
void *__thiscall CMemory::CInit::CInit(void *this)
{
  int v1; // eax
  int v3; // [esp+0h] [ebp-10h]
  CMemory *v5; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 16; ++i )
  {
    v5 = (CMemory *)CNoMemoryObject::operator new(0x38u);
    if ( v5 )
    {
      CMemory::CMemory(v5);
      v3 = v1;
    }
    else
    {
      v3 = 0;
    }
    dword_4E17C8[i] = v3;
  }
  return this;
}
// 4356FC: variable 'v1' is possibly undefined

//----- (00435720) --------------------------------------------------------
void __thiscall CMemory::CMemory(CMemory *this)
{
  InitializeCriticalSection((LPCRITICAL_SECTION)((char *)this + 32));
  *((_DWORD *)this + 7) = 0;
  CMemory::_heap_init(this);
}

//----- (00435750) --------------------------------------------------------
int __thiscall CMemory::_heap_init(CMemory *this)
{
  *(_DWORD *)this = HeapCreate(1u, 0x10000u, 0);
  if ( !*(_DWORD *)this )
    return 0;
  if ( CMemory::__sbh_heap_init(this, 0x3F8u) )
    return 1;
  HeapDestroy(*(HANDLE *)this);
  *(_DWORD *)this = 0;
  return 0;
}

//----- (004357B0) --------------------------------------------------------
int __thiscall CMemory::__sbh_heap_init(CMemory *this, unsigned int threshold)
{
  *((_DWORD *)this + 2) = HeapAlloc(*(HANDLE *)this, 0, 0x140u);
  if ( !*((_DWORD *)this + 2) )
    return 0;
  *((_DWORD *)this + 1) = threshold;
  *((_DWORD *)this + 3) = *((_DWORD *)this + 2);
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 4) = 16;
  return 1;
}

//----- (00435820) --------------------------------------------------------
CMemory **__cdecl CMemory::_malloc(unsigned int size)
{
  CMemory *v2; // [esp+0h] [ebp-8h]
  CMemory **v3; // [esp+4h] [ebp-4h]

  v2 = (CMemory *)dword_4E17C8[InterlockedIncrement(&dword_4E17C0) & 0xF];
  v3 = (CMemory **)CMemory::_heap_alloc_base(v2, size + 4);
  if ( v3 )
  {
    *v3++ = v2;
    memset(v3, 252, size);
  }
  return v3;
}

//----- (00435890) --------------------------------------------------------
void *__thiscall CMemory::_heap_alloc_base(CMemory *this, unsigned int size)
{
  CMemory::tagEntry **v4; // [esp+4h] [ebp-4h]
  void *v5; // [esp+4h] [ebp-4h]

  if ( size <= this->__sbh_threshold )
  {
    CMemory::_mlock((int)this);
    v4 = CMemory::__sbh_alloc_block(this, size);
    CMemory::_munlock((int)this);
    if ( v4 )
      return v4;
  }
  CMemory::_mlock((int)this);
  v5 = HeapAlloc(this->_crtheap, 0, (size + 15) & 0xFFFFFFF0);
  CMemory::_munlock((int)this);
  return v5;
}

//----- (00435910) --------------------------------------------------------
CMemory::tagEntry **__thiscall CMemory::__sbh_alloc_block(CMemory *this, int intSize)
{
  int v5; // eax
  signed int v7; // [esp+8h] [ebp-38h]
  int v8; // [esp+Ch] [ebp-34h]
  int v9; // [esp+Ch] [ebp-34h]
  unsigned int v10; // [esp+10h] [ebp-30h]
  int v11; // [esp+14h] [ebp-2Ch]
  CMemory::tagRegion *v12; // [esp+18h] [ebp-28h]
  CMemory::tagGroup *v13; // [esp+1Ch] [ebp-24h]
  int *v14; // [esp+20h] [ebp-20h]
  CMemory::tagHeader *pHeader; // [esp+24h] [ebp-1Ch]
  unsigned int v16; // [esp+28h] [ebp-18h]
  int i; // [esp+2Ch] [ebp-14h]
  int v18; // [esp+30h] [ebp-10h]
  CMemory::tagHeader *v19; // [esp+34h] [ebp-Ch]
  int *v20; // [esp+38h] [ebp-8h]
  char *v21; // [esp+38h] [ebp-8h]
  int v22; // [esp+3Ch] [ebp-4h]

  v19 = &this->__sbh_pHeaderList[this->__sbh_cntHeaderList];
  v7 = (intSize + 23) & 0xFFFFFFF0;
  v8 = (v7 >> 4) - 1;
  if ( v8 >= 32 )
  {
    v16 = 0;
    v10 = 0xFFFFFFFF >> ((v7 >> 4) - 33);
  }
  else
  {
    v16 = 0xFFFFFFFF >> v8;
    v10 = -1;
  }
  for ( pHeader = this->__sbh_pHeaderScan;
        pHeader < v19 && !(pHeader->bitvEntryLo & v10 | pHeader->bitvEntryHi & v16);
        ++pHeader )
  {
    ;
  }
  if ( pHeader != v19 )
    goto LABEL_27;
  for ( pHeader = this->__sbh_pHeaderList;
        pHeader < this->__sbh_pHeaderScan && !(pHeader->bitvEntryLo & v10 | pHeader->bitvEntryHi & v16);
        ++pHeader )
  {
    ;
  }
  if ( pHeader != this->__sbh_pHeaderScan )
    goto LABEL_27;
  while ( pHeader < v19 && !pHeader->bitvCommit )
    ++pHeader;
  if ( pHeader == v19 )
  {
    for ( pHeader = this->__sbh_pHeaderList; pHeader < this->__sbh_pHeaderScan && !pHeader->bitvCommit; ++pHeader )
      ;
    if ( pHeader == this->__sbh_pHeaderScan )
    {
      pHeader = CMemory::__sbh_alloc_new_region(this);
      if ( !pHeader )
        return 0;
    }
  }
  pHeader->pRegion->indGroupUse = CMemory::__sbh_alloc_new_group(this, pHeader);
  if ( pHeader->pRegion->indGroupUse == -1 )
    return 0;
LABEL_27:
  this->__sbh_pHeaderScan = pHeader;
  v12 = pHeader->pRegion;
  i = v12->indGroupUse;
  if ( v12->indGroupUse == -1 || !(v12->bitvGroupLo[i] & v10 | v12->bitvGroupHi[i] & v16) )
  {
    for ( i = 0; !(v12->bitvGroupLo[i] & v10 | v12->bitvGroupHi[i] & v16); ++i )
      ;
  }
  v13 = &v12->grpHeadList[i];
  v9 = 0;
  v22 = v12->bitvGroupHi[i] & v16;
  if ( !v22 )
  {
    v9 = 32;
    v22 = v12->bitvGroupLo[i] & v10;
  }
  while ( v22 >= 0 )
  {
    v22 *= 2;
    ++v9;
  }
  v20 = &v13->listHead[v9].pEntryNext->sizeFront;
  v11 = *v20 - v7;
  v18 = (v11 >> 4) - 1;
  if ( v18 > 63 )
    v18 = 63;
  if ( v18 != v9 )
  {
    if ( v20[1] == v20[2] )
    {
      if ( v9 >= 32 )
      {
        v12->bitvGroupLo[i] &= ~(0x80000000 >> (v9 - 32));
        if ( !--v12->cntRegionSize[v9] )
          pHeader->bitvEntryLo &= ~(0x80000000 >> (v9 - 32));
      }
      else
      {
        v12->bitvGroupHi[i] &= ~(0x80000000 >> v9);
        if ( !--v12->cntRegionSize[v9] )
          pHeader->bitvEntryHi &= ~(0x80000000 >> v9);
      }
    }
    *(_DWORD *)(v20[2] + 4) = v20[1];
    *(_DWORD *)(v20[1] + 8) = v20[2];
    if ( v11 )
    {
      v14 = &v13->cntEntries + 2 * v18;
      v20[1] = v14[1];
      v20[2] = (int)v14;
      v14[1] = (int)v20;
      *(_DWORD *)(v20[1] + 8) = v20;
      if ( v20[1] == v20[2] )
      {
        if ( v18 >= 32 )
        {
          if ( !v12->cntRegionSize[v18]++ )
            pHeader->bitvEntryLo |= 0x80000000 >> (v18 - 32);
          v12->bitvGroupLo[i] |= 0x80000000 >> (v18 - 32);
        }
        else
        {
          if ( !v12->cntRegionSize[v18]++ )
            pHeader->bitvEntryHi |= 0x80000000 >> v18;
          v12->bitvGroupHi[i] |= 0x80000000 >> v18;
        }
      }
    }
  }
  if ( v11 )
  {
    *v20 = v11;
    *(int *)((char *)v20 + v11 - 4) = v11;
  }
  v21 = (char *)v20 + v11;
  *(_DWORD *)v21 = v7 + 1;
  *(_DWORD *)&v21[v7 - 4] = v7 + 1;
  v5 = v13->cntEntries++;
  if ( !v5 && pHeader == this->__sbh_pHeaderDefer && i == this->__sbh_indGroupDefer )
    this->__sbh_pHeaderDefer = 0;
  v12->indGroupUse = i;
  return (CMemory::tagEntry **)(v21 + 4);
}

//----- (00435E40) --------------------------------------------------------
CMemory::tagHeader *__thiscall CMemory::__sbh_alloc_new_region(CMemory *this)
{
  CMemory::tagHeader *result; // eax
  LPVOID v3; // [esp+4h] [ebp-4h]
  int v4; // [esp+4h] [ebp-4h]

  if ( *((_DWORD *)this + 5) == *((_DWORD *)this + 4) )
  {
    v3 = HeapReAlloc(*(HANDLE *)this, 0, *((LPVOID *)this + 2), 20 * (*((_DWORD *)this + 4) + 16));
    if ( !v3 )
      return 0;
    *((_DWORD *)this + 2) = v3;
    *((_DWORD *)this + 4) += 16;
  }
  v4 = *((_DWORD *)this + 2) + 20 * *((_DWORD *)this + 5);
  *(_DWORD *)(v4 + 16) = HeapAlloc(*(HANDLE *)this, 8u, 0x41C4u);
  if ( !*(_DWORD *)(v4 + 16) )
    return 0;
  *(_DWORD *)(v4 + 12) = VirtualAlloc(0, 0x1000000u, 0x2000u, 4u);
  if ( *(_DWORD *)(v4 + 12) )
  {
    *(_DWORD *)v4 = 0;
    *(_DWORD *)(v4 + 4) = 0;
    *(_DWORD *)(v4 + 8) = -1;
    ++*((_DWORD *)this + 5);
    **(_DWORD **)(v4 + 16) = -1;
    result = (CMemory::tagHeader *)v4;
  }
  else
  {
    HeapFree(*(HANDLE *)this, 0, *(LPVOID *)(v4 + 16));
    result = 0;
  }
  return result;
}

//----- (00435F60) --------------------------------------------------------
int __thiscall CMemory::__sbh_alloc_new_group(CMemory *this, CMemory::tagHeader *pHeader)
{
  int v4; // [esp+4h] [ebp-2Ch]
  int v5; // [esp+8h] [ebp-28h]
  int v6; // [esp+10h] [ebp-20h]
  int v7; // [esp+14h] [ebp-1Ch]
  int i; // [esp+1Ch] [ebp-14h]
  _DWORD *j; // [esp+20h] [ebp-10h]
  char *lpAddress; // [esp+24h] [ebp-Ch]

  v6 = *((_DWORD *)pHeader + 4);
  v4 = *((_DWORD *)pHeader + 2);
  v5 = 0;
  while ( v4 >= 0 )
  {
    v4 *= 2;
    ++v5;
  }
  v7 = v6 + 516 * v5 + 324;
  for ( i = 0; i < 63; ++i )
  {
    *(_DWORD *)(v7 + 8 * i + 8) = v7 + 8 * i;
    *(_DWORD *)(v7 + 8 * i + 4) = v7 + 8 * i;
  }
  lpAddress = (char *)(*((_DWORD *)pHeader + 3) + (v5 << 19));
  if ( !VirtualAlloc(lpAddress, 0x80000u, 0x1000u, 4u) )
    return -1;
  for ( j = lpAddress; j <= (_DWORD *)lpAddress + 114688; j += 0x4000 )
  {
    j[2] = -1;
    j[0x3FFF] = -1;
    j[3] = 65520;
    j[4] = j + 16387;
    j[5] = j - 16381;
    j[16382] = 65520;
  }
  *(_DWORD *)(v6 + 516 * v5 + 832) = lpAddress + 12;
  *(_DWORD *)(*(_DWORD *)(v6 + 516 * v5 + 832) + 8) = v6 + 516 * v5 + 828;
  *(_DWORD *)(v6 + 516 * v5 + 836) = lpAddress + 458764;
  *(_DWORD *)(*(_DWORD *)(v6 + 516 * v5 + 836) + 4) = v6 + 516 * v5 + 828;
  *(_DWORD *)(v6 + 4 * v5 + 68) = 0;
  *(_DWORD *)(v6 + 4 * v5 + 196) = 1;
  if ( !(*(_BYTE *)(v6 + 67))++ )
    *((_DWORD *)pHeader + 1) |= 1u;
  *((_DWORD *)pHeader + 2) &= ~(0x80000000 >> v5);
  return v5;
}

//----- (00436150) --------------------------------------------------------
void __cdecl CMemory::_free(void *pBlock)
{
  CMemory *v1; // [esp+0h] [ebp-8h]

  if ( pBlock )
  {
    v1 = (CMemory *)*((_DWORD *)pBlock - 1);
    *((_DWORD *)pBlock - 1) = 0;
    CMemory::_free_base(v1, (char *)pBlock - 4);
  }
}

//----- (00436190) --------------------------------------------------------
void __thiscall CMemory::_free_base(CMemory *this, void *pBlock)
{
  SIZE_T v3; // [esp+4h] [ebp-Ch]
  CMemory::tagHeader *pHeader; // [esp+Ch] [ebp-4h]

  CMemory::_mlock(this);
  pHeader = CMemory::__sbh_find_block(this, pBlock);
  if ( pHeader )
  {
    memset(pBlock, 253, *((_DWORD *)pBlock - 1) - 9);
    CMemory::__sbh_free_block(this, pHeader, pBlock);
  }
  else
  {
    v3 = HeapSize(this->_crtheap, 0, pBlock);
    memset(pBlock, 253, v3);
    HeapFree(this->_crtheap, 0, pBlock);
  }
  CMemory::_munlock(this);
}

//----- (00436240) --------------------------------------------------------
CMemory::tagHeader *__thiscall CMemory::__sbh_find_block(CMemory *this, void *pvAlloc)
{
  CMemory::tagHeader *i; // [esp+8h] [ebp-8h]

  for ( i = this->__sbh_pHeaderList; i < &this->__sbh_pHeaderList[this->__sbh_cntHeaderList]; ++i )
  {
    if ( (unsigned int)pvAlloc - (unsigned int)i->pHeapData < 0x1000000 )
      return i;
  }
  return 0;
}

//----- (004362A0) --------------------------------------------------------
CMemory::tagGroup *__thiscall CMemory::__sbh_free_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc)
{
  CMemory::tagGroup *result; // eax
  int v7; // [esp+8h] [ebp-3Ch]
  unsigned int v8; // [esp+Ch] [ebp-38h]
  int v9; // [esp+10h] [ebp-34h]
  unsigned int v10; // [esp+14h] [ebp-30h]
  CMemory::tagRegion *v11; // [esp+18h] [ebp-2Ch]
  CMemory::tagGroup *v12; // [esp+1Ch] [ebp-28h]
  int *v13; // [esp+20h] [ebp-24h]
  int v14; // [esp+28h] [ebp-1Ch]
  int *v15; // [esp+2Ch] [ebp-18h]
  int v16; // [esp+30h] [ebp-14h]
  unsigned int v17; // [esp+34h] [ebp-10h]
  char *v18; // [esp+38h] [ebp-Ch]
  char *v19; // [esp+3Ch] [ebp-8h]

  v11 = pHeader->pRegion;
  v16 = ((unsigned int)pvAlloc - (unsigned int)pHeader->pHeapData) >> 19;
  v12 = &v11->grpHeadList[v16];
  v15 = (int *)((char *)pvAlloc - 4);
  result = (CMemory::tagGroup *)((char *)pvAlloc - 4);
  v7 = *((_DWORD *)pvAlloc - 1) - 1;
  if ( (v7 & 1) == 0 )
  {
    v19 = (char *)v15 + v7;
    v9 = *(int *)((char *)v15 + v7);
    v14 = *((_DWORD *)pvAlloc - 2);
    if ( (v9 & 1) == 0 )
    {
      v17 = (v9 >> 4) - 1;
      if ( v17 > 0x3F )
        v17 = 63;
      if ( *((_DWORD *)v19 + 1) == *((_DWORD *)v19 + 2) )
      {
        if ( v17 >= 0x20 )
        {
          v11->bitvGroupLo[v16] &= ~(0x80000000 >> (v17 - 32));
          if ( !--v11->cntRegionSize[v17] )
            pHeader->bitvEntryLo &= ~(0x80000000 >> (v17 - 32));
        }
        else
        {
          v11->bitvGroupHi[v16] &= ~(0x80000000 >> v17);
          if ( !--v11->cntRegionSize[v17] )
            pHeader->bitvEntryHi &= ~(0x80000000 >> v17);
        }
      }
      *(_DWORD *)(*((_DWORD *)v19 + 2) + 4) = *((_DWORD *)v19 + 1);
      *(_DWORD *)(*((_DWORD *)v19 + 1) + 8) = *((_DWORD *)v19 + 2);
      v7 += v9;
    }
    v8 = (v7 >> 4) - 1;
    if ( v8 > 0x3F )
      v8 = 63;
    if ( (v14 & 1) == 0 )
    {
      v18 = (char *)v15 - v14;
      v10 = (v14 >> 4) - 1;
      if ( v10 > 0x3F )
        v10 = 63;
      v7 += v14;
      v8 = (v7 >> 4) - 1;
      if ( v8 > 0x3F )
        v8 = 63;
      if ( v10 != v8 )
      {
        if ( *((_DWORD *)v18 + 1) == *((_DWORD *)v18 + 2) )
        {
          if ( v10 >= 0x20 )
          {
            v11->bitvGroupLo[v16] &= ~(0x80000000 >> (v10 - 32));
            if ( !--v11->cntRegionSize[v10] )
              pHeader->bitvEntryLo &= ~(0x80000000 >> (v10 - 32));
          }
          else
          {
            v11->bitvGroupHi[v16] &= ~(0x80000000 >> v10);
            if ( !--v11->cntRegionSize[v10] )
              pHeader->bitvEntryHi &= ~(0x80000000 >> v10);
          }
        }
        *(_DWORD *)(*((_DWORD *)v18 + 2) + 4) = *((_DWORD *)v18 + 1);
        *(_DWORD *)(*((_DWORD *)v18 + 1) + 8) = *((_DWORD *)v18 + 2);
      }
      v15 = (int *)((char *)v15 - v14);
    }
    if ( (v14 & 1) != 0 || v10 != v8 )
    {
      v13 = &v12->cntEntries + 2 * v8;
      v15[1] = v13[1];
      v15[2] = (int)v13;
      v13[1] = (int)v15;
      *(_DWORD *)(v15[1] + 8) = v15;
      if ( v15[1] == v15[2] )
      {
        if ( v8 >= 0x20 )
        {
          if ( !v11->cntRegionSize[v8]++ )
            pHeader->bitvEntryLo |= 0x80000000 >> (v8 - 32);
          v11->bitvGroupLo[v16] |= 0x80000000 >> (v8 - 32);
        }
        else
        {
          if ( !v11->cntRegionSize[v8]++ )
            pHeader->bitvEntryHi |= 0x80000000 >> v8;
          v11->bitvGroupHi[v16] |= 0x80000000 >> v8;
        }
      }
    }
    *v15 = v7;
    *(int *)((char *)v15 + v7 - 4) = v7;
    --v12->cntEntries;
    result = &v11->grpHeadList[v16];
    if ( !v12->cntEntries )
    {
      if ( this->__sbh_pHeaderDefer )
      {
        VirtualFree(
          (char *)this->__sbh_pHeaderDefer->pHeapData + 0x80000 * this->__sbh_indGroupDefer,
          0x80000u,
          0x4000u);
        this->__sbh_pHeaderDefer->bitvCommit |= 0x80000000 >> this->__sbh_indGroupDefer;
        this->__sbh_pHeaderDefer->pRegion->bitvGroupLo[this->__sbh_indGroupDefer] = 0;
        if ( !--this->__sbh_pHeaderDefer->pRegion->cntRegionSize[63] )
          this->__sbh_pHeaderDefer->bitvEntryLo &= 0xFFFFFFFE;
        if ( this->__sbh_pHeaderDefer->bitvCommit == -1 )
        {
          VirtualFree(this->__sbh_pHeaderDefer->pHeapData, 0, 0x8000u);
          HeapFree(this->_crtheap, 0, this->__sbh_pHeaderDefer->pRegion);
          memcpy_0(
            this->__sbh_pHeaderDefer,
            &this->__sbh_pHeaderDefer[1],
            (char *)&this->__sbh_pHeaderList[this->__sbh_cntHeaderList] - (char *)&this->__sbh_pHeaderDefer[1]);
          --this->__sbh_cntHeaderList;
          if ( pHeader > this->__sbh_pHeaderDefer )
            --pHeader;
          this->__sbh_pHeaderScan = this->__sbh_pHeaderList;
        }
      }
      this->__sbh_pHeaderDefer = pHeader;
      result = (CMemory::tagGroup *)v16;
      this->__sbh_indGroupDefer = v16;
    }
  }
  return result;
}
// 4365BD: variable 'v10' is possibly undefined

//----- (00436870) --------------------------------------------------------
CMemory **__cdecl CMemory::_realloc(void *pBlock, unsigned int newsize)
{
  CMemory **result; // eax
  CMemory *v3; // [esp+0h] [ebp-8h]
  CMemory **lpMem; // [esp+4h] [ebp-4h]

  if ( !pBlock )
    return CMemory::_malloc(newsize);
  if ( newsize )
  {
    v3 = (CMemory *)*((_DWORD *)pBlock - 1);
    *((_DWORD *)pBlock - 1) = 0;
    lpMem = (CMemory **)CMemory::_realloc_base(v3, (char *)pBlock - 4, newsize + 4);
    if ( lpMem )
      *lpMem++ = v3;
    result = lpMem;
  }
  else
  {
    CMemory::_free(pBlock);
    result = 0;
  }
  return result;
}

//----- (00436900) --------------------------------------------------------
void *__thiscall CMemory::_realloc_base(CMemory *this, void *pBlock, unsigned int newsize)
{
  void *result; // eax
  unsigned int v4; // [esp+0h] [ebp-18h]
  unsigned int v5; // [esp+4h] [ebp-14h]
  CMemory::tagHeader *pHeader; // [esp+Ch] [ebp-Ch]
  void *v8; // [esp+14h] [ebp-4h]

  v8 = 0;
  if ( newsize <= 0xFFFFFFE0 )
  {
    CMemory::_mlock(this);
    pHeader = CMemory::__sbh_find_block(this, pBlock);
    if ( pHeader )
    {
      if ( newsize <= this->__sbh_threshold )
      {
        if ( CMemory::__sbh_resize_block(this, pHeader, pBlock, newsize) )
        {
          v8 = pBlock;
        }
        else
        {
          v8 = CMemory::__sbh_alloc_block(this, newsize);
          if ( v8 )
          {
            if ( *((_DWORD *)pBlock - 1) - 9 >= newsize )
              v5 = newsize;
            else
              v5 = *((_DWORD *)pBlock - 1) - 9;
            memcpy(v8, pBlock, v5);
            pHeader = CMemory::__sbh_find_block(this, pBlock);
            CMemory::__sbh_free_block(this, pHeader, pBlock);
          }
        }
      }
      if ( !v8 )
      {
        if ( !newsize )
          newsize = 1;
        newsize = (newsize + 15) & 0xFFFFFFF0;
        v8 = HeapAlloc(this->_crtheap, 0, newsize);
        if ( v8 )
        {
          if ( *((_DWORD *)pBlock - 1) - 9 >= newsize )
            v4 = newsize;
          else
            v4 = *((_DWORD *)pBlock - 1) - 9;
          memcpy(v8, pBlock, v4);
          CMemory::__sbh_free_block(this, pHeader, pBlock);
        }
      }
    }
    CMemory::_munlock(this);
    if ( !pHeader )
    {
      if ( !newsize )
        newsize = 1;
      v8 = HeapReAlloc(this->_crtheap, 0, pBlock, (newsize + 15) & 0xFFFFFFF0);
    }
  }
  if ( v8 )
    result = v8;
  else
    result = 0;
  return result;
}

//----- (00436AB0) --------------------------------------------------------
int __thiscall CMemory::__sbh_resize_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc, int intNew)
{
  int v9; // [esp+4h] [ebp-30h]
  int v10; // [esp+4h] [ebp-30h]
  unsigned int v11; // [esp+8h] [ebp-2Ch]
  int v12; // [esp+Ch] [ebp-28h]
  int v13; // [esp+Ch] [ebp-28h]
  CMemory::tagRegion *v14; // [esp+10h] [ebp-24h]
  int v15; // [esp+14h] [ebp-20h]
  signed int v16; // [esp+18h] [ebp-1Ch]
  unsigned int v17; // [esp+1Ch] [ebp-18h]
  unsigned int v18; // [esp+1Ch] [ebp-18h]
  _DWORD *v19; // [esp+24h] [ebp-10h]
  int *v20; // [esp+24h] [ebp-10h]
  unsigned int v21; // [esp+28h] [ebp-Ch]
  unsigned int v22; // [esp+2Ch] [ebp-8h]
  unsigned int v23; // [esp+2Ch] [ebp-8h]
  unsigned int v24; // [esp+2Ch] [ebp-8h]
  int *v25; // [esp+30h] [ebp-4h]
  int *v26; // [esp+30h] [ebp-4h]

  v16 = (intNew + 23) & 0xFFFFFFF0;
  v14 = pHeader->pRegion;
  v21 = ((unsigned int)pvAlloc - (unsigned int)pHeader->pHeapData) >> 19;
  v15 = (int)&v14->grpHeadList[v21];
  v19 = (char *)pvAlloc - 4;
  v9 = *((_DWORD *)pvAlloc - 1) - 1;
  v25 = (int *)((char *)pvAlloc + v9 - 4);
  v12 = *v25;
  if ( v16 <= v9 )
  {
    if ( v16 < v9 )
    {
      *v19 = v16 + 1;
      *(_DWORD *)((char *)v19 + v16 - 4) = v16 + 1;
      v20 = (_DWORD *)((char *)v19 + v16);
      v10 = v9 - v16;
      v11 = (v10 >> 4) - 1;
      if ( v11 > 0x3F )
        v11 = 63;
      if ( (v12 & 1) == 0 )
      {
        v24 = (v12 >> 4) - 1;
        if ( v24 > 0x3F )
          v24 = 63;
        if ( v25[1] == v25[2] )
        {
          if ( v24 >= 0x20 )
          {
            v14->bitvGroupLo[v21] &= ~(0x80000000 >> (v24 - 32));
            if ( !--v14->cntRegionSize[v24] )
              pHeader->bitvEntryLo &= ~(0x80000000 >> (v24 - 32));
          }
          else
          {
            v14->bitvGroupHi[v21] &= ~(0x80000000 >> v24);
            if ( !--v14->cntRegionSize[v24] )
              pHeader->bitvEntryHi &= ~(0x80000000 >> v24);
          }
        }
        *(_DWORD *)(v25[2] + 4) = v25[1];
        *(_DWORD *)(v25[1] + 8) = v25[2];
        v10 += v12;
        v11 = (v10 >> 4) - 1;
        if ( v11 > 0x3F )
          v11 = 63;
      }
      v18 = v15 + 8 * v11;
      v20[1] = *(_DWORD *)(v18 + 4);
      v20[2] = v18;
      *(_DWORD *)(v18 + 4) = v20;
      *(_DWORD *)(v20[1] + 8) = v20;
      if ( v20[1] == v20[2] )
      {
        if ( v11 >= 0x20 )
        {
          if ( !v14->cntRegionSize[v11]++ )
            pHeader->bitvEntryLo |= 0x80000000 >> (v11 - 32);
          v14->bitvGroupLo[v21] |= 0x80000000 >> (v11 - 32);
        }
        else
        {
          if ( !v14->cntRegionSize[v11]++ )
            pHeader->bitvEntryHi |= 0x80000000 >> v11;
          v14->bitvGroupHi[v21] |= 0x80000000 >> v11;
        }
      }
      *v20 = v10;
      *(int *)((char *)v20 + v10 - 4) = v10;
    }
  }
  else
  {
    if ( (v12 & 1) != 0 || v16 > v12 + v9 )
      return 0;
    v22 = (v12 >> 4) - 1;
    if ( v22 > 0x3F )
      v22 = 63;
    if ( *(_DWORD *)((char *)pvAlloc + v9) == *(_DWORD *)((char *)pvAlloc + v9 + 4) )
    {
      if ( v22 >= 0x20 )
      {
        v14->bitvGroupLo[v21] &= ~(0x80000000 >> (v22 - 32));
        if ( !--v14->cntRegionSize[v22] )
          pHeader->bitvEntryLo &= ~(0x80000000 >> (v22 - 32));
      }
      else
      {
        v14->bitvGroupHi[v21] &= ~(0x80000000 >> v22);
        if ( !--v14->cntRegionSize[v22] )
          pHeader->bitvEntryHi &= ~(0x80000000 >> v22);
      }
    }
    *(_DWORD *)(*(_DWORD *)((char *)pvAlloc + v9 + 4) + 4) = *(_DWORD *)((char *)pvAlloc + v9);
    *(_DWORD *)(*(_DWORD *)((char *)pvAlloc + v9) + 8) = *(_DWORD *)((char *)pvAlloc + v9 + 4);
    v13 = v12 + v9 - v16;
    if ( v13 > 0 )
    {
      v26 = (_DWORD *)((char *)v19 + v16);
      v23 = (v13 >> 4) - 1;
      if ( v23 > 0x3F )
        v23 = 63;
      v17 = v15 + 8 * v23;
      v26[1] = *(_DWORD *)(v17 + 4);
      v26[2] = v17;
      *(_DWORD *)(v17 + 4) = v26;
      *(_DWORD *)(v26[1] + 8) = v26;
      if ( v26[1] == v26[2] )
      {
        if ( v23 >= 0x20 )
        {
          if ( !v14->cntRegionSize[v23]++ )
            pHeader->bitvEntryLo |= 0x80000000 >> (v23 - 32);
          v14->bitvGroupLo[v21] |= 0x80000000 >> (v23 - 32);
        }
        else
        {
          if ( !v14->cntRegionSize[v23]++ )
            pHeader->bitvEntryHi |= 0x80000000 >> v23;
          v14->bitvGroupHi[v21] |= 0x80000000 >> v23;
        }
      }
      *v26 = v13;
      *(int *)((char *)v26 + v13 - 4) = v13;
    }
    *v19 = v16 + 1;
    *(_DWORD *)((char *)v19 + v16 - 4) = v16 + 1;
  }
  return 1;
}

//----- (00437080) --------------------------------------------------------
void *__cdecl CNoMemoryObject::operator new(size_t nSize)
{
  return malloc(nSize);
}

//----- (004370A0) --------------------------------------------------------
void __thiscall CMemory::_mlock(CMemory *this)
{
  EnterCriticalSection(&this->_lock);
}

//----- (004370C0) --------------------------------------------------------
void __thiscall CMemory::_munlock(CMemory *this)
{
  LeaveCriticalSection(&this->_lock);
}

//----- (004370E0) --------------------------------------------------------
char *__stdcall `vector destructor iterator'(void *a1, unsigned int a2, int a3, void (__thiscall *a4)(void *))
{
  char *result; // eax
  char *i; // [esp+8h] [ebp+8h]

  result = (char *)a1 + a3 * a2;
  for ( i = result; --a3 >= 0; result = (char *)((int (__thiscall *)(char *))a4)(i) )
    i -= a2;
  return result;
}

//----- (00437110) --------------------------------------------------------
CInitMonster *__thiscall CInitMonster::CInitMonster(CInitMonster *this)
{
  CBase::CBase();
  this->__vftable = (CInitMonster_vtbl *)&off_4B7CE0;
  sub_425850((std::vector<CIOSocket::CIOTimer> *)&this->m_vecQuestItemDrop);
  sub_4707A0(&this->m_vecMSkill);
  memset(this->m_szName, 0, sizeof(this->m_szName));
  this->m_nIndex = 0;
  this->m_nRace = 0;
  this->m_nLevel = 0;
  this->m_dwAI = 0;
  memset(this->m_nItemGroup, 0, 0x1Cu);
  memset(this->m_nDropNum, 0, 0x60u);
  this->m_nGroupCount = 0;
  this->m_nRange = 0;
  this->m_nSight[1] = 0;
  this->m_nSight[0] = 0;
  this->m_nExp = 0;
  memset(&this->m_prtyBase, 0, sizeof(this->m_prtyBase));
  memset(&this->m_prtyPt, 0, sizeof(this->m_prtyPt));
  this->m_nMSpeed[1] = 0;
  this->m_nMSpeed[0] = 0;
  this->m_nAttackType = 0;
  this->m_nCItemCnt = 0;
  this->m_nCItem = 0;
  return this;
}
// 4B7CE0: using guessed type int (__stdcall *off_4B7CE0)(int);

//----- (00437260) --------------------------------------------------------
void *__thiscall CInitMonster::`scalar deleting destructor'(void *this, char a2)
{
  CInitMonster::~CInitMonster(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00437290) --------------------------------------------------------
void __thiscall CInitMonster::~CInitMonster(_DWORD *this)
{
  *this = &off_4B7CE0;
  sub_445BF0((std::vector<IPAddrMask> *)(this + 72));
  sub_445B20((std::vector<CIOSocket::CIOTimer> *)this + 17);
  CBase::~CBase((CBase *)this);
}
// 4B7CE0: using guessed type int (__stdcall *off_4B7CE0)(int);

//----- (004372D0) --------------------------------------------------------
CBase *__thiscall CInitMonster::Copy(CInitMonster *this)
{
  CInitMonster *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x14Cu);
  if ( v3 )
    v2 = CInitMonster::CInitMonster((CInitMonster *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (00437310) --------------------------------------------------------
int __thiscall CInitMonster::Set(CInitMonster *this, enum Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  int v4; // eax
  int v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  lisp::var *v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  lisp::var *v30; // eax
  lisp::var *v31; // eax
  lisp::var *v32; // eax
  lisp::var *v33; // eax
  lisp::var *v34; // eax
  lisp::var *v35; // eax
  lisp::var *v36; // eax
  int v37; // eax
  lisp::var *v38; // eax
  lisp::var *v39; // eax
  int v40; // eax
  lisp::var *v41; // eax
  lisp::var *v42; // eax
  lisp::var *v43; // eax
  lisp::var *v44; // eax
  lisp::var *v45; // eax
  lisp::var *v46; // eax
  lisp::var *v47; // eax
  lisp::var *v48; // eax
  lisp::var *v49; // eax
  lisp::var *v50; // eax
  lisp::var *v51; // eax
  lisp::var v52[3]; // [esp-4h] [ebp-ECh] BYREF
  CInitMonster *v53; // [esp+8h] [ebp-E0h]
  lisp::var v54; // [esp+10h] [ebp-D8h] BYREF
  lisp::var v55; // [esp+14h] [ebp-D4h] BYREF
  lisp::var v56; // [esp+18h] [ebp-D0h] BYREF
  lisp::var v57; // [esp+1Ch] [ebp-CCh] BYREF
  lisp::var v58; // [esp+20h] [ebp-C8h] BYREF
  lisp::var v59; // [esp+24h] [ebp-C4h] BYREF
  lisp::var v60; // [esp+28h] [ebp-C0h] BYREF
  lisp::var v61; // [esp+2Ch] [ebp-BCh] BYREF
  lisp::var v62; // [esp+30h] [ebp-B8h] BYREF
  lisp::var v63; // [esp+34h] [ebp-B4h] BYREF
  lisp::var v64; // [esp+38h] [ebp-B0h] BYREF
  lisp::var v65; // [esp+3Ch] [ebp-ACh] BYREF
  lisp::var v66; // [esp+40h] [ebp-A8h] BYREF
  lisp::var v67; // [esp+44h] [ebp-A4h] BYREF
  lisp::var v68; // [esp+48h] [ebp-A0h] BYREF
  lisp::var v69; // [esp+4Ch] [ebp-9Ch] BYREF
  lisp::var v70; // [esp+50h] [ebp-98h] BYREF
  lisp::var v71; // [esp+54h] [ebp-94h] BYREF
  lisp::var v72; // [esp+58h] [ebp-90h] BYREF
  lisp::var v73; // [esp+5Ch] [ebp-8Ch] BYREF
  lisp::var v74; // [esp+60h] [ebp-88h] BYREF
  lisp::var v75; // [esp+64h] [ebp-84h] BYREF
  lisp::var v76; // [esp+68h] [ebp-80h] BYREF
  lisp::var v77; // [esp+6Ch] [ebp-7Ch] BYREF
  lisp::var v78; // [esp+70h] [ebp-78h] BYREF
  lisp::var v79; // [esp+74h] [ebp-74h] BYREF
  lisp::var v80; // [esp+78h] [ebp-70h] BYREF
  lisp::var v81; // [esp+7Ch] [ebp-6Ch] BYREF
  lisp::var v82; // [esp+80h] [ebp-68h] BYREF
  lisp::var v83; // [esp+84h] [ebp-64h] BYREF
  lisp::var v84; // [esp+88h] [ebp-60h] BYREF
  lisp::var v85; // [esp+8Ch] [ebp-5Ch] BYREF
  lisp::var v86; // [esp+90h] [ebp-58h] BYREF
  lisp::var v87; // [esp+94h] [ebp-54h] BYREF
  lisp::var v88; // [esp+98h] [ebp-50h] BYREF
  lisp::var v89; // [esp+9Ch] [ebp-4Ch] BYREF
  lisp::var v90; // [esp+A0h] [ebp-48h] BYREF
  lisp::var v91; // [esp+A4h] [ebp-44h] BYREF
  lisp::var v92; // [esp+A8h] [ebp-40h] BYREF
  lisp::var v93; // [esp+ACh] [ebp-3Ch] BYREF
  lisp::var v94; // [esp+B0h] [ebp-38h] BYREF
  lisp::var v95; // [esp+B4h] [ebp-34h] BYREF
  lisp::var v96; // [esp+B8h] [ebp-30h] BYREF
  lisp::var v97; // [esp+BCh] [ebp-2Ch] BYREF
  lisp::var result; // [esp+C0h] [ebp-28h] BYREF
  int v99[2]; // [esp+C4h] [ebp-24h] BYREF
  lisp::var v100; // [esp+CCh] [ebp-1Ch] BYREF
  int v101[3]; // [esp+D0h] [ebp-18h] BYREF
  lisp::var v102; // [esp+DCh] [ebp-Ch] BYREF
  int v103; // [esp+E0h] [ebp-8h]
  char *v104; // [esp+E4h] [ebp-4h]

  v53 = this;
  v52[2].m_pObject = (lisp::_object *)(symbol - 1);
  switch ( symbol )
  {
    case S_NAME:
      v3 = lisp::var::pop(&value, &result);
      v4 = lisp::var::operator int(v3);
      v104 = GetStr(v4);
      if ( v104 && strlen(v104) && strlen(v104) <= 0x18 )
      {
        strcpy(v53->m_szName, v104);
        goto LABEL_47;
      }
      LOG_ERR("CMonster::Set() Invalid Name. (Name:%s)", v104);
      return 0;
    case S_INDEX:
      v6 = lisp::var::pop(&value, &v97);
      v53->m_nIndex = lisp::var::operator int(v6);
      goto LABEL_47;
    case S_LEVEL:
      v8 = lisp::var::pop(&value, &v95);
      v53->m_nLevel = lisp::var::operator int(v8);
      goto LABEL_47;
    case S_RACE:
      v7 = lisp::var::pop(&value, &v96);
      v53->m_nRace = lisp::var::operator int(v7);
      goto LABEL_47;
    case S_STR:
      v16 = lisp::var::pop(&value, &v87);
      v53->m_prtyBase.nBase[0] = lisp::var::operator int(v16);
      goto LABEL_47;
    case S_HTH:
      v17 = lisp::var::pop(&value, &v86);
      v53->m_prtyBase.nBase[1] = lisp::var::operator int(v17);
      goto LABEL_47;
    case S_INT:
      v18 = lisp::var::pop(&value, &v85);
      v53->m_prtyBase.nBase[2] = lisp::var::operator int(v18);
      goto LABEL_47;
    case S_WIS:
      v19 = lisp::var::pop(&value, &v84);
      v53->m_prtyBase.nBase[3] = lisp::var::operator int(v19);
      goto LABEL_47;
    case S_DEX:
      v20 = lisp::var::pop(&value, &v83);
      v53->m_prtyBase.nBase[4] = lisp::var::operator int(v20);
      goto LABEL_47;
    case S_HP:
      v21 = lisp::var::pop(&value, &v82);
      v53->m_prtyBase.nBase[5] = lisp::var::operator int(v21);
      goto LABEL_47;
    case S_MP:
      v22 = lisp::var::pop(&value, &v81);
      v53->m_prtyBase.nBase[6] = lisp::var::operator int(v22);
      goto LABEL_47;
    case S_HIT:
      v23 = lisp::var::pop(&value, &v80);
      v53->m_prtyPt.nHit = lisp::var::operator int(v23);
      goto LABEL_47;
    case S_DODGE:
      v24 = lisp::var::pop(&value, &v79);
      v53->m_prtyPt.nDodge = lisp::var::operator int(v24);
      goto LABEL_47;
    case S_ATTACK:
      v25 = lisp::var::pop(&value, &v78);
      v53->m_nAttackType = lisp::var::operator int(v25);
      v26 = lisp::var::pop(&value, &v77);
      v53->m_prtyPt.nMinAttack = lisp::var::operator int(v26);
      v27 = lisp::var::pop(&value, &v76);
      v53->m_prtyPt.nMaxAttack = lisp::var::operator int(v27);
      goto LABEL_47;
    case S_MAGIC:
      v28 = lisp::var::pop(&value, &v75);
      v53->m_prtyPt.nMinMagic = lisp::var::operator int(v28);
      v29 = lisp::var::pop(&value, &v74);
      v53->m_prtyPt.nMaxMagic = lisp::var::operator int(v29);
      goto LABEL_47;
    case S_DEFENSE:
      v30 = lisp::var::pop(&value, &v73);
      v53->m_prtyPt.nDefense[0] = lisp::var::operator int(v30);
      v31 = lisp::var::pop(&value, &v72);
      v53->m_prtyPt.nDefense[1] = lisp::var::operator int(v31);
      goto LABEL_47;
    case S_ABSORB:
      v32 = lisp::var::pop(&value, &v71);
      v53->m_prtyPt.nAbsorb = lisp::var::operator int(v32);
      goto LABEL_47;
    case S_ASPEED:
      v33 = lisp::var::pop(&value, &v70);
      v53->m_prtyPt.nASpeed = lisp::var::operator int(v33);
      goto LABEL_47;
    case S_MSPEED:
      v34 = lisp::var::pop(&value, &v69);
      v53->m_nMSpeed[0] = lisp::var::operator int(v34);
      v35 = lisp::var::pop(&value, &v68);
      v53->m_nMSpeed[1] = lisp::var::operator int(v35);
      goto LABEL_47;
    case S_RESIST:
      v103 = 0;
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        v36 = lisp::var::pop(&value, &v67);
        v37 = lisp::var::operator int(v36);
        v53->m_prtyPt.nResist[v103++] = 10 * v37;
      }
      goto LABEL_47;
    case S_AI:
      v9 = lisp::var::pop(&value, &v94);
      v53->m_dwAI = lisp::var::operator int(v9);
      goto LABEL_47;
    case S_RANGE:
      v12 = lisp::var::pop(&value, &v91);
      v53->m_nRange = lisp::var::operator int(v12);
      goto LABEL_47;
    case S_SIGHT:
      v13 = lisp::var::pop(&value, &v90);
      v53->m_nSight[0] = lisp::var::operator int(v13);
      v14 = lisp::var::pop(&value, &v89);
      v53->m_nSight[1] = lisp::var::operator int(v14);
      goto LABEL_47;
    case S_EXP:
      v15 = lisp::var::pop(&value, &v88);
      v53->m_nExp = lisp::var::operator int(v15);
      goto LABEL_47;
    case S_ITEMGROUP:
      if ( v53->m_nGroupCount <= 5 )
      {
        v10 = lisp::var::pop(&value, &v93);
        v53->m_nItemGroup[v53->m_nGroupCount] = lisp::var::operator int(v10);
        v11 = lisp::var::pop(&value, &v92);
        v53->m_nDropNum[v53->m_nGroupCount++] = lisp::var::operator int(v11);
      }
      goto LABEL_47;
    case S_QUEST:
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        lisp::var::pop(&value, &v102);
        v38 = lisp::var::pop(&v102, &v66);
        v101[0] = lisp::var::operator int(v38) << 16;
        v39 = lisp::var::pop(&v102, &v65);
        v40 = lisp::var::operator int(v39);
        v101[0] |= v40;
        v41 = lisp::var::pop(&v102, &v64);
        v101[1] = lisp::var::operator int(v41);
        v42 = lisp::var::pop(&v102, &v63);
        v101[2] = lisp::var::operator int(v42);
        sub_445B80((int)&v53->m_vecQuestItemDrop, (int)v101);
      }
      goto LABEL_47;
    case S_SKILL:
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        lisp::var::pop(&value, &v100);
        v43 = lisp::var::pop(&v100, &v62);
        v99[0] = lisp::var::operator int(v43);
        v44 = lisp::var::pop(&v100, &v61);
        v99[1] = lisp::var::operator int(v44);
        sub_445C10((int)&v53->m_vecMSkill, (const XMessageQueue::XTimerElement *)v99);
      }
      goto LABEL_47;
    case S_COUNTRY:
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        v45 = lisp::var::pop(&value, &v60);
        v53->m_dwCountry |= 1 << lisp::var::operator int(v45);
      }
      goto LABEL_47;
    case S_CITEM:
      v46 = lisp::var::pop(&value, &v59);
      v53->m_nCItem = lisp::var::operator int(v46);
      v47 = lisp::var::pop(&value, &v58);
      v53->m_nCItemCnt = lisp::var::operator int(v47);
      goto LABEL_47;
    case S_MONSTERSKILL:
      v48 = lisp::var::pop(&value, &v57);
      v53->m_nSkillIndex = lisp::var::operator int(v48);
      v49 = lisp::var::pop(&value, &v56);
      v53->m_nSkillLevel = lisp::var::operator int(v49);
      v50 = lisp::var::pop(&value, &v55);
      v53->m_nSkillProbablity = (float)lisp::var::operator int(v50);
      v51 = lisp::var::pop(&value, &v54);
      v53->m_nSkillTerm = lisp::var::operator int(v51);
LABEL_47:
      v5 = 1;
      break;
    default:
      v52[0].m_pObject = (lisp::_object *)(symbol - 1);
      lisp::var::var(v52, &value);
      v5 = CBase::Set(v53, symbol, v52[0]);
      break;
  }
  return v5;
}

//----- (00437BD0) --------------------------------------------------------
int __thiscall CInitMonster::OnLoad(CInitMonster *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v4[8]; // [esp+8h] [ebp-10h] BYREF
  char v5[8]; // [esp+10h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v4);
  sub_445DF0(
    (int)dword_4E1820,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v5,
    v1);
  if ( v5[4] )
    return 1;
  LOG_ERR("CInitMonster::Onload() Duplicate Monster Data. (Index:%d)", this->m_nIndex);
  return 0;
}
// 437BFC: variable 'v1' is possibly undefined
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00437C30) --------------------------------------------------------
void __thiscall CInitMonster::DropItemEx(CInitMonster *this, CMonster *pMonster, int nMax, int nItemGroup, int bParty, int nKeyID, int *nRate, __int64 dwDropItemMask)
{
  int v8; // [esp+0h] [ebp-2Ch]
  int v9; // [esp+4h] [ebp-28h]
  tagPOINT ptP; // [esp+14h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+1Ch] [ebp-10h] BYREF
  CItem *pItem; // [esp+24h] [ebp-8h]
  CItem *i; // [esp+28h] [ebp-4h]

  for ( i = 0; (int)i < nMax; i = (CItem *)((char *)i + 1) )
  {
    pItem = CItem::CreateDropItem(nItemGroup, dwDropItemMask);
    if ( pItem )
    {
      if ( ((int (__thiscall *)(CItem *, int))pItem->IsMoney)(pItem, v8) && *nRate > 0 )
      {
        if ( *nRate < 5 )
          v9 = dword_4D62D8[*nRate];
        else
          v9 = 1;
        pItem->m_nNum *= v9;
        *nRate = -1;
      }
      CChar::GetDropPt(pMonster, &ptP);
      ptT.x = ptP.x >> 5;
      ptT.y = ptP.y >> 5;
      if ( CSMap::SetOnMap(pMonster->m_pMap, pItem, &ptT) )
      {
        pItem->m_nFrom = 1;
        pItem->Drop(pItem, pMonster, &ptP, &ptT, 1, bParty, nKeyID);
      }
      else if ( pItem )
      {
        v8 = ((int (__thiscall *)(CItem *, int))pItem->~CIOObject)(pItem, 1);
      }
      else
      {
        v8 = 0;
      }
    }
  }
}
// 437C7C: variable 'v8' is possibly undefined
// 437C30: inconsistent function type and number of purged bytes

//----- (00437D70) --------------------------------------------------------
void __thiscall CInitMonster::DropItem(CInitMonster *this, CMonster *pMonster, int bParty, int nKeyID, int nBestID, __int64 dwDropItemMask)
{
  int v6; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  int *v8; // eax
  _BYTE v9[12]; // [esp-4h] [ebp-5Ch]
  int v10; // [esp+18h] [ebp-40h]
  char v12[4]; // [esp+20h] [ebp-38h] BYREF
  char v13[4]; // [esp+24h] [ebp-34h] BYREF
  int v14; // [esp+28h] [ebp-30h]
  int a4a; // [esp+2Ch] [ebp-2Ch]
  char v16[4]; // [esp+30h] [ebp-28h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v17; // [esp+34h] [ebp-24h] BYREF
  char *v18; // [esp+38h] [ebp-20h]
  int v19; // [esp+3Ch] [ebp-1Ch]
  int i; // [esp+40h] [ebp-18h]
  int v21; // [esp+44h] [ebp-14h]
  int a1; // [esp+48h] [ebp-10h]
  int nRate; // [esp+4Ch] [ebp-Ch] BYREF
  int nDropNum; // [esp+50h] [ebp-8h]
  CParty *pParty; // [esp+54h] [ebp-4h]

  a1 = 0;
  pParty = 0;
  nRate = 0;
  nDropNum = 0;
  v21 = 0;
  if ( bParty )
  {
    pParty = (CParty *)sub_44D4E0(nKeyID);
    if ( pParty )
      a1 = (int)CParty::GetRandomPlayer((CIOCriticalSection *)pParty);
  }
  else
  {
    a1 = (int)CPlayer::FindPlayer(nKeyID);
  }
  if ( a1 )
  {
    for ( i = 0; i < this->m_nGroupCount; ++i )
    {
      nRate = 0;
      if ( (dword_4E1178 & 1) != 0 || (*(_WORD *)dword_4E1174 & 0x100) != 0 )
        v10 = 2 * this->m_nDropNum[i];
      else
        v10 = this->m_nDropNum[i];
      nDropNum = v10;
      if ( this->m_nRace == 4 )
      {
        if ( pParty )
        {
          v6 = CParty::GetLuckySize(pParty, 0);
          nDropNum += v6;
        }
        else
        {
          *(_QWORD *)&v9[4] = CChar::IsBState((CChar *)a1, 0x2000000i64);
          if ( *(_QWORD *)&v9[4] )
            ++nDropNum;
        }
      }
      else if ( CChar::IsBState((CChar *)a1, 0xC000000i64) )
      {
        v19 = Random(1, 10000);
        if ( v19 <= 481 )
        {
          if ( v19 <= 81 )
          {
            if ( v19 <= 21 )
            {
              if ( v19 <= 1 )
              {
                if ( CChar::IsBState((CChar *)a1, 0x8000000i64) )
                  nRate = 4;
              }
              else
              {
                nRate = 3;
              }
            }
            else
            {
              nRate = 2;
            }
          }
          else
          {
            nRate = 1;
          }
        }
      }
      v21 = nRate;
      *(_DWORD *)v9 = 0;
      CInitMonster::DropItemEx(this, pMonster, nDropNum, this->m_nItemGroup[i], bParty, nKeyID, &nRate, *(__int64 *)v9);
      if ( (_DWORD)dwDropItemMask && Random(1, 100) > 50 )
      {
        *(_DWORD *)v9 = dwDropItemMask;
        CInitMonster::DropItemEx(
          this,
          pMonster,
          nDropNum,
          this->m_nItemGroup[i],
          bParty,
          nKeyID,
          &nRate,
          *(__int64 *)v9);
      }
      if ( nRate < 0 )
      {
        if ( pParty )
        {
          v18 = MakePacket(S2C_MESSAGEV, "bb", 90, v21);
          CParty::Broadcast((CIOCriticalSection *)pParty, v18, 0);
        }
        else
        {
          CPlayer::Write((CPlayer *)a1, S2C_MESSAGEV, "bb", 90, v21);
        }
      }
    }
    CIOObject::Release((CIOObject *)a1, (volatile int *)(a1 + 352));
  }
  if ( !sub_445B60((std::vector<CIOSocket::CIOTimer> *)&this->m_vecQuestItemDrop) )
  {
    a1 = 0;
    if ( pParty )
    {
      a1 = (int)CParty::GetRandomPlayer((CIOCriticalSection *)pParty);
    }
    else
    {
      nKeyID = nBestID;
      a1 = (int)CPlayer::FindPlayer(nBestID);
    }
    if ( a1 )
    {
      *(_DWORD *)v9 = 0x20000;
      if ( CSMap::IsValidTile(*(CSMap **)(a1 + 320), (const tagPOINT *)(a1 + 332), *(__int64 *)v9) )
      {
        sub_430C20(&this->m_vecQuestItemDrop, (int)&v17);
        while ( 1 )
        {
          v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecQuestItemDrop, (int)v12);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v17,
                  v7) )
            break;
          v8 = (int *)sub_420010(&v17);
          v14 = *v8;
          a4a = v8[1];
          *(_DWORD *)v16 = v8[2];
          if ( CPlayer::CheckQuestFlag((CIOCriticalSection *)a1, v14) )
          {
            nRate = 0;
            *(_DWORD *)&v9[4] = 0;
            CInitMonster::DropItemEx(this, pMonster, *(int *)v16, a4a, bParty, nKeyID, &nRate, *(__int64 *)&v9[4]);
          }
          sub_446060((int *)&v17, v13, 0);
        }
      }
      CIOObject::Release((CIOObject *)a1, (volatile int *)(a1 + 352));
    }
  }
  if ( pParty )
    CIOObject::Release(pParty);
}
// 437F43: variable 'v9' is possibly undefined
// 437D70: inconsistent function type and number of purged bytes
// 4E1178: using guessed type int dword_4E1178;

//----- (00438130) --------------------------------------------------------
BOOL __thiscall CSMap::IsValidTile(CSMap *this, const tagPOINT *ptP, int dwAttr)
{
  CCellMap *v4; // eax
  __int64 v5; // [esp-8h] [ebp-14h]
  tagPOINT ptT; // [esp+4h] [ebp-8h] BYREF

  ptT.x = ptP->x >> 5;
  ptT.y = ptP->y >> 5;
  if ( ptT.x < 0 || ptT.x >> 8 >= 64 || ptT.y < 0 || ptT.y >> 8 >= 64 )
    return 0;
  HIDWORD(v5) = ((ptP->x >> 3) & 3) + 4 * ((ptP->y >> 3) & 3);
  LODWORD(v5) = dwAttr;
  v4 = CSMap::_GetCellMap(this, &ptT);
  return CCellMap::IsValidTile(v4, &ptT, v5, (int)this);
}
// 438130: inconsistent function type and number of purged bytes

//----- (004381C0) --------------------------------------------------------
BOOL __thiscall CCellMap::IsValidTile(CCellMap *this, const tagPOINT *ptT, __int64 dwAttr, int nQIndex)
{
  tagPOINT _ptT; // [esp+4h] [ebp-8h] BYREF

  if ( !this )
    return 0;
  _ptT.x = (unsigned __int8)ptT->x;
  _ptT.y = (unsigned __int8)ptT->y;
  return (CCellMap::GetTile(this, &_ptT)->m_dwAttr & ((unsigned int)dwAttr | (1 << SBYTE4(dwAttr)))) == 0;
}

//----- (00438220) --------------------------------------------------------
CTile *__thiscall CCellMap::GetTile(CCellMap *this, const tagPOINT *_ptT)
{
  return &this->m_pTile[256 * _ptT->y + _ptT->x];
}

//----- (00438250) --------------------------------------------------------
CCellMap *__thiscall CSMap::_GetCellMap(CSMap *this, const tagPOINT *ptT)
{
  int a2a; // [esp+4h] [ebp-4h]

  a2a = (ptT->y >> 8 << 6) + (ptT->x >> 8);
  if ( a2a >= 0 && a2a <= 4095 )
    return this->m_pSlot[a2a];
  LOG_ERR("CSellMap::_GetCellMap PT2ARRY(%d) ptT.x(%d) ptT.y(%d) \n", a2a, ptT->x, ptT->y);
  ELOG("CSellMap::_GetCellMap PT2ARRY(%d) ptT.x(%d) ptT.y(%d) \n", a2a, ptT->x, ptT->y);
  return 0;
}

//----- (004382D0) --------------------------------------------------------
CGenMonster *__thiscall CGenMonster::CGenMonster(CGenMonster *this)
{
  CBase::CBase();
  this->__vftable = (CGenMonster_vtbl *)&off_4B7DC8;
  this->m_nIndex = 0;
  this->m_nMap = 0;
  this->m_nArea = 0;
  this->m_nMax = 0;
  this->m_nLive = 0;
  this->m_nRange = 0;
  memset(&this->m_rtGen, 0, sizeof(this->m_rtGen));
  this->m_pMap = 0;
  this->m_dwNextGen = GetTickCount();
  this->m_dwGenCycle = 1000;
  this->m_pNextGen = 0;
  return this;
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (00438370) --------------------------------------------------------
void *__thiscall CGenMonster::`scalar deleting destructor'(void *this, char a2)
{
  CGenMonster::~CGenMonster((std::locale::facet *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004383A0) --------------------------------------------------------
void __thiscall CGenMonster::~CGenMonster(std::locale::facet *this)
{
  this->__vftable = (std::locale::facet_vtbl *)&off_4B7DC8;
  CBase::~CBase((CBase *)this);
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (004383C0) --------------------------------------------------------
CGenMonster *__thiscall CGenMonster::CGenMonster(CGenMonster *this, CMonster *pMonster, int nGenIndex, int nRange, int nMax)
{
  CBase::CBase();
  this->__vftable = (CGenMonster_vtbl *)&off_4B7DC8;
  this->m_nIndex = nGenIndex;
  this->m_nMap = pMonster->m_nMap;
  this->m_nArea = 0;
  this->m_nMax = nMax;
  this->m_nLive = 0;
  this->m_nRange = nRange;
  this->m_rtGen.left = pMonster->m_ptPixel.x - 32 * nRange;
  this->m_rtGen.top = pMonster->m_ptPixel.y - 32 * nRange;
  this->m_rtGen.right = pMonster->m_ptPixel.x + 32 * nRange;
  this->m_rtGen.bottom = pMonster->m_ptPixel.y + 32 * nRange;
  this->m_pMap = pMonster->m_pMap;
  this->m_dwNextGen = GetTickCount();
  this->m_dwGenCycle = 1000;
  this->m_pNextGen = 0;
  return this;
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (004384B0) --------------------------------------------------------
CBase *__thiscall CGenMonster::Copy(CGenMonster *this)
{
  CGenMonster *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x58u);
  if ( v3 )
    v2 = CGenMonster::CGenMonster((CGenMonster *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (004384F0) --------------------------------------------------------
int __thiscall CGenMonster::Set(CGenMonster *this, Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  int result; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var v13[2]; // [esp-4h] [ebp-34h] BYREF
  CGenMonster *v14; // [esp+4h] [ebp-2Ch]
  lisp::var v15; // [esp+Ch] [ebp-24h] BYREF
  lisp::var v16; // [esp+10h] [ebp-20h] BYREF
  lisp::var v17; // [esp+14h] [ebp-1Ch] BYREF
  lisp::var v18; // [esp+18h] [ebp-18h] BYREF
  lisp::var v19; // [esp+1Ch] [ebp-14h] BYREF
  lisp::var v20; // [esp+20h] [ebp-10h] BYREF
  lisp::var v21; // [esp+24h] [ebp-Ch] BYREF
  lisp::var v22; // [esp+28h] [ebp-8h] BYREF
  lisp::var v23; // [esp+2Ch] [ebp-4h] BYREF

  v14 = this;
  v13[1].m_pObject = (lisp::_object *)(symbol - 2);
  switch ( symbol )
  {
    case S_INDEX:
      v3 = lisp::var::pop(&value, &v23);
      v14->m_nIndex = lisp::var::operator int(v3);
      goto LABEL_11;
    case S_MAP:
      v4 = lisp::var::pop(&value, &v22);
      v14->m_nMap = lisp::var::operator int(v4);
      v14->m_pMap = CSMap::FindSMap(v14->m_nMap);
      if ( v14->m_pMap )
        goto LABEL_11;
      LOG_ERR("CGenMonster::Set() Can't find the Map. (index:%d)", v14->m_nMap);
      result = 0;
      break;
    case S_AREA:
      v6 = lisp::var::pop(&value, &v21);
      v14->m_nArea = lisp::var::operator int(v6);
      goto LABEL_11;
    case S_MAX:
      v7 = lisp::var::pop(&value, &v20);
      v14->m_nMax = lisp::var::operator int(v7);
      goto LABEL_11;
    case S_RECT:
      v9 = lisp::var::pop(&value, &v18);
      v14->m_rtGen.left = 32 * lisp::var::operator int(v9);
      v10 = lisp::var::pop(&value, &v17);
      v14->m_rtGen.top = 32 * lisp::var::operator int(v10);
      v11 = lisp::var::pop(&value, &v16);
      v14->m_rtGen.right = 32 * lisp::var::operator int(v11);
      v12 = lisp::var::pop(&value, &v15);
      v14->m_rtGen.bottom = 32 * lisp::var::operator int(v12);
      goto LABEL_11;
    case S_CYCLE:
      v8 = lisp::var::pop(&value, &v19);
      v14->m_dwGenCycle = 1000 * lisp::var::operator int(v8);
LABEL_11:
      result = 1;
      break;
    default:
      v13[0].m_pObject = (lisp::_object *)(symbol - 2);
      lisp::var::var(v13, &value);
      result = CBase::Set(v14, symbol, v13[0]);
      break;
  }
  return result;
}

//----- (00438710) --------------------------------------------------------
int __thiscall CGenMonster::OnLoad(CGenMonster *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v4[8]; // [esp+8h] [ebp-10h] BYREF
  char v5[8]; // [esp+10h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v4);
  sub_445DF0(
    (int)dword_4E1870,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v5,
    v1);
  if ( v5[4] )
    return 1;
  LOG_ERR("CGenMosnter::Onload() Duplicate GenArea. (area:%d)", this->m_nArea);
  return 0;
}
// 43873C: variable 'v1' is possibly undefined
// 4E1870: using guessed type int dword_4E1870[3];

//----- (00438770) --------------------------------------------------------
void __thiscall CGenMonster::OnTimer(CGenMonster *this, int nId)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-18h] BYREF
  char v5[4]; // [esp+8h] [ebp-14h] BYREF
  int v6; // [esp+Ch] [ebp-10h]
  CGenMonster *pGen; // [esp+10h] [ebp-Ch]
  DWORD dwCurTick; // [esp+14h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v9; // [esp+18h] [ebp-4h] BYREF

  if ( !dword_4E1814 )
  {
    CRWLock::ReadLock(&unk_4E187C);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1870,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
    while ( 1 )
    {
      v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, (int)v4);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v9,
              v2) )
        break;
      pGen = *(CGenMonster **)(sub_420250(&v9) + 4);
      dwCurTick = GetTickCount();
      if ( pGen->m_dwGenCycle == 1000 || (int)(pGen->m_dwNextGen - dwCurTick) <= 0 )
      {
        v6 = 0;
        while ( pGen->m_nLive < pGen->m_nMax )
        {
          if ( CMonster::Create(pGen, 0) )
          {
            InterlockedIncrement(&pGen->m_nLive);
          }
          else if ( ++v6 >= 3 )
          {
            goto LABEL_3;
          }
        }
        pGen->m_dwNextGen = pGen->m_dwGenCycle + dwCurTick;
      }
LABEL_3:
      sub_446090((int *)&v9, v5, 0);
    }
    CRWLock::ReadUnlock(&unk_4E187C);
    CIOObject::AddTimer(this, 0x3E8u, 0);
  }
}
// 4E1814: using guessed type int dword_4E1814;
// 4E1870: using guessed type int dword_4E1870[3];

//----- (00438880) --------------------------------------------------------
void __thiscall CGenMonster::GetGenTile(CGenMonster *this, tagPOINT *ptP)
{
  int randomY; // eax
  int randomX; // [esp+4h] [ebp-8h]
  CMonster *pParent; // [esp+18h] [ebp+Ch]

  if ( pParent && this->m_nRange )
  {
    this->m_rtGen.left = pParent->m_ptPixel.x - 32 * this->m_nRange;
    this->m_rtGen.top = pParent->m_ptPixel.y - 32 * this->m_nRange;
    this->m_rtGen.right = pParent->m_ptPixel.x + 32 * this->m_nRange;
    this->m_rtGen.bottom = pParent->m_ptPixel.y + 32 * this->m_nRange;
  }
  randomX = Random(this->m_rtGen.left, this->m_rtGen.right);
  randomY = Random(this->m_rtGen.top, this->m_rtGen.bottom);
  ptP->x = randomX;
  ptP->y = randomY;
}

//----- (00438950) --------------------------------------------------------
void __thiscall CGenMonster::Stop(CGenMonster *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  void (__thiscall ***v2)(_DWORD, int); // [esp+Ch] [ebp-10h]
  char v3[4]; // [esp+10h] [ebp-Ch] BYREF
  char v4[4]; // [esp+14h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v5; // [esp+18h] [ebp-4h] BYREF

  dword_4E1814 = 1;
  CRWLock::WriteLock(&unk_4E187C);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1870,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v5);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v5,
            v1) )
      break;
    v2 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&v5) + 4);
    if ( v2 )
      (**v2)(v2, 1);
    sub_446090((int *)&v5, v4, 0);
  }
  sub_446000(dword_4E1870);
  CRWLock::WriteUnlock(&unk_4E187C);
}
// 4E1814: using guessed type int dword_4E1814;
// 4E1870: using guessed type int dword_4E1870[3];

//----- (00438A00) --------------------------------------------------------
int __thiscall CMonsterObject::CMonsterObject(CMonsterObject *this)
{
  int n; // [esp+4h] [ebp-4h]

  CIOObject::CIOObject(this);
  this->__vftable = (CMonsterObject_vtbl *)&off_4B7E78;
  `vector constructor iterator'(
    this->m_lockLink,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  for ( n = 0; n < 2; ++n )
    CLink::Initialize(&this->m_link[n]);
  return (int)this;
}
// 4B7E78: using guessed type int (__stdcall *off_4B7E78)(int);

//----- (00438A60) --------------------------------------------------------
CLink *__thiscall CLink::Initialize(CLink *this)
{
  CLink *result; // eax

  this->m_pNext = this;
  result = this;
  this->m_pPrev = this;
  return result;
}

//----- (00438A80) --------------------------------------------------------
void *__thiscall CMonsterObject::`scalar deleting destructor'(void *this, char a2)
{
  CNPCObject::~CNPCObject((CNPCObject *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00438AB0) --------------------------------------------------------
void __thiscall CMonsterObject::OnTimer(CMonsterObject *this, int nId)
{
  CMonster *pMonster_; // [esp+8h] [ebp-18h]
  CLink *pLink_; // [esp+Ch] [ebp-14h]
  CMonster *pMonster; // [esp+10h] [ebp-10h]
  CLink *pLink; // [esp+14h] [ebp-Ch]
  DWORD dwAddTick; // [esp+18h] [ebp-8h]
  DWORD dwCurTick; // [esp+1Ch] [ebp-4h]

  if ( nId )
  {
    if ( nId == 1 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)this->m_lockLink);
      CIOCriticalSection::Enter(&this->m_lockLink[1].m_critical_section);
      CLink::MoveTo(&this->m_link[1], this->m_link);
      CIOCriticalSection::Leave((int)&this->m_lockLink[1]);
      pLink_ = this->m_link[0].m_pNext;
      while ( pLink_ != this->m_link )
      {
        pMonster_ = (CMonster *)&pLink_[-54].m_pPrev;
        pLink_ = pLink_->m_pNext;
        pMonster_->Tick(pMonster_);
      }
      CIOCriticalSection::Leave((int)this->m_lockLink);
      CIOObject::AddTimer(this, 0x3E8u, 1);
    }
  }
  else
  {
    if ( !this->bDoBigBirdMotherSpwan )
    {
      CMonsterBigBirdMother::Create();
      this->bDoBigBirdMotherSpwan = 1;
    }
    dwCurTick = GetTickCount();
    do
    {
      dwAddTick = dwCurTick + 30;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)this->m_lockLink);
      CIOCriticalSection::Enter(&this->m_lockLink[1].m_critical_section);
      CLink::MoveTo(&this->m_link[1], this->m_link);
      CIOCriticalSection::Leave((int)&this->m_lockLink[1]);
      pLink = this->m_link[0].m_pNext;
      while ( pLink != this->m_link )
      {
        pMonster = (CMonster *)&pLink[-54].m_pPrev;
        pLink = pLink->m_pNext;
        pMonster->AI(pMonster);
      }
      CIOCriticalSection::Leave((int)this->m_lockLink);
      dwCurTick = GetTickCount();
    }
    while ( dwAddTick <= dwCurTick );
    CIOObject::AddTimer(this, dwAddTick - dwCurTick, 0);
  }
}

//----- (00438C40) --------------------------------------------------------
void __thiscall CLink::MoveTo(CLink *this, CLink *pTo)
{
  if ( this->m_pNext != this )
  {
    pTo->m_pPrev->m_pNext = this->m_pNext;
    this->m_pNext->m_pPrev = pTo->m_pPrev;
    pTo->m_pPrev = this->m_pPrev;
    this->m_pPrev->m_pNext = pTo;
    this->m_pNext = this;
    this->m_pPrev = this;
  }
}

//----- (00438CA0) --------------------------------------------------------
void __thiscall CMonsterObject::Insert(CMonsterObject *this, CLink *pLink)
{
  CIOCriticalSection::Enter(&this->m_lockLink[1].m_critical_section);
  CLink::Insert(pLink, &this->m_link[1]);
  CIOCriticalSection::Leave((int)&this->m_lockLink[1]);
}

//----- (00438CE0) --------------------------------------------------------
void __thiscall CLink::Insert(CLink *this, CLink *pLink)
{
  this->m_pPrev = pLink->m_pPrev;
  this->m_pNext = pLink;
  pLink->m_pPrev->m_pNext = this;
  pLink->m_pPrev = this;
}

//----- (00438D20) --------------------------------------------------------
void __thiscall CMonsterObject::Stop(CMonsterObject *this)
{
  CMonster *pMonster; // [esp+4h] [ebp-Ch]
  CLink *pLink; // [esp+8h] [ebp-8h]
  int n; // [esp+Ch] [ebp-4h]

  for ( n = 0; n < 2; ++n )
  {
    CIOCriticalSection::Enter(&this->m_lockLink[n].m_critical_section);
    pLink = this->m_link[n].m_pNext;
    while ( pLink != &this->m_link[n] )
    {
      pMonster = (CMonster *)&pLink[-54].m_pPrev;
      pLink = pLink->m_pNext;
      CBase::Delete(pMonster);
    }
    CIOCriticalSection::Leave((int)&this->m_lockLink[n]);
  }
}

//----- (00438DB0) --------------------------------------------------------
int __thiscall CMonster::CMonster(CMonster *this)
{
  CChar::CChar(this);
  this->__vftable = (CMonster_vtbl *)&off_4B7E90;
  CMonsterSkill::CMonsterSkill(&this->m_skill);
  this->m_dwAttr = 2;
  this->m_pInit = 0;
  this->m_nArea = 0;
  memset(&this->m_rtArea, 0, sizeof(this->m_rtArea));
  this->m_pTarget = 0;
  this->m_dwNextAction = GetTickCount();
  this->m_dwResetHP = this->m_dwNextAction;
  this->m_bAggressive = 0;
  this->m_nAIState = 0;
  this->m_pParent = 0;
  this->m_nGID = 0;
  this->m_nOperator = 0;
  return (int)this;
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (00438E90) --------------------------------------------------------
int __thiscall CMonster::GetGID(CMonster *this)
{
  return this->m_nGID;
}

//----- (00438EB0) --------------------------------------------------------
char *sub_438EB0()
{
  return off_4D62AC;
}
// 4D62AC: using guessed type char *off_4D62AC;

//----- (00438EC0) --------------------------------------------------------
void __stdcall sub_438EC0(int a1, int a2, int a3, int a4)
{
  ;
}

//----- (00438ED0) --------------------------------------------------------
void *__thiscall CMonster::`scalar deleting destructor'(CMonster *this, char a2)
{
  CMonster::~CMonster(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00438F00) --------------------------------------------------------
void __thiscall CMonster::~CMonster(CMonster *this)
{
  this->__vftable = (CMonster_vtbl *)&off_4B7E90;
  CMonsterSkill::~CMonsterSkill(&this->m_skill);
  CChar::~CChar(this);
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (00438F30) --------------------------------------------------------
int __thiscall CChar::GetDefense(CChar *this, int nType)
{
  return this->m_prtyPt.nDefense[nType] + this->m_prtyPer.nDefense[nType] * this->m_prtyPt.nDefense[nType] / 100;
}

//----- (00438F70) --------------------------------------------------------
int __thiscall CChar::GetAbsorb(CChar *this)
{
  return this->m_prtyPt.nAbsorb + this->m_prtyPer.nAbsorb * this->m_prtyPt.nAbsorb / 100;
}

//----- (00438FA0) --------------------------------------------------------
int __thiscall CChar::GetResist(CChar *this, int nIndex)
{
  return this->m_prtyPt.nResist[nIndex];
}

//----- (00438FC0) --------------------------------------------------------
CMonster *__thiscall CMonster::CMonster(CMonster *this, CGenMonster *pGen)
{
  CChar::CChar(this);
  this->__vftable = (CMonster_vtbl *)&off_4B7E90;
  CMonsterSkill::CMonsterSkill(&this->m_skill);
  this->m_dwAttr = 2;
  this->m_nMap = pGen->m_nMap;
  this->m_pMap = pGen->m_pMap;
  this->m_nArea = pGen->m_nArea;
  this->m_rtArea = pGen->m_rtGen;
  this->m_pTarget = 0;
  this->m_dwNextAction = GetTickCount();
  this->m_dwResetHP = this->m_dwNextAction;
  this->m_bAggressive = 0;
  this->m_nAIState = 0;
  this->m_pParent = 0;
  this->m_nGID = 0;
  this->m_nOperator = 0;
  return this;
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (004390C0) --------------------------------------------------------
void CMonster::Start()
{
  dword_4E1810 = 0;
  CIOObject::AddTimer(&unk_4E1898, 1000u, 0);
  CIOObject::AddTimer(&unk_4E1930, 30u, 0);
  CIOObject::AddTimer(&unk_4E1930, 1000u, 1);
  CIOObject::AddTimer(&unk_4E1998, 1000u, 1);
  CIOObject::AddTimer(&unk_4E1A00, 1000u, 1);
}

//----- (00439130) --------------------------------------------------------
void __cdecl CMonster::Stop()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v1)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v2[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v3[4]; // [esp+10h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-4h] BYREF

  CGenMonster::Stop((CGenMonster *)&unk_4E1898);
  CMonsterObject::Stop((CMonsterObject *)&unk_4E1930);
  CMonsterObject::Stop((CMonsterObject *)&unk_4E1998);
  CMonsterObject::Stop((CMonsterObject *)&unk_4E1A00);
  CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1820,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1820, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it) + 4);
    if ( v1 )
      (**v1)(v1, 1);
    sub_446090((int *)&it, v3, 0);
  }
  sub_445D90(dword_4E1820);
  CIOCriticalSection::Leave((int)&unk_4E182C);
}
// 4E1820: using guessed type int dword_4E1820[3];

//----- (004391F0) --------------------------------------------------------
int __cdecl CMonster::Size()
{
  return dword_4E1810;
}

//----- (00439200) --------------------------------------------------------
CMonster *__cdecl CMonster::NewMonster(CInitMonster *pInit, CGenMonster *pGen)
{
  CMonster *v3; // [esp+0h] [ebp-ACh]
  CMonster *v4; // [esp+4h] [ebp-A8h]
  CMonster *v5; // [esp+8h] [ebp-A4h]
  unsigned int v6; // [esp+Ch] [ebp-A0h]
  CMonster *v7; // [esp+10h] [ebp-9Ch]
  CMonsterCocoon *v8; // [esp+14h] [ebp-98h]
  CMonster *v9; // [esp+18h] [ebp-94h]
  CMonster *v10; // [esp+1Ch] [ebp-90h]
  CMonster *v11; // [esp+20h] [ebp-8Ch]
  CMonster *v12; // [esp+24h] [ebp-88h]
  CMonster *v13; // [esp+28h] [ebp-84h]
  CMonsterInvaderBoss *v14; // [esp+2Ch] [ebp-80h]
  CMonster *v15; // [esp+30h] [ebp-7Ch]
  CMonsterBlackBug *v16; // [esp+34h] [ebp-78h]
  CMonsterTowerBoss *v17; // [esp+38h] [ebp-74h]
  CMonsterReal *v18; // [esp+3Ch] [ebp-70h]
  CMonster *v19; // [esp+44h] [ebp-68h]
  CMonster *v20; // [esp+48h] [ebp-64h]
  CMonster *v21; // [esp+4Ch] [ebp-60h]
  CMonsterMaguni *v22; // [esp+50h] [ebp-5Ch]
  CMemory **v23; // [esp+5Ch] [ebp-50h]
  CMemory **v24; // [esp+60h] [ebp-4Ch]
  CMemory **v25; // [esp+64h] [ebp-48h]
  CMemory **v26; // [esp+68h] [ebp-44h]
  CMemory **v27; // [esp+6Ch] [ebp-40h]
  CMemory **v28; // [esp+70h] [ebp-3Ch]
  CMemory **v29; // [esp+74h] [ebp-38h]
  CMemory **v30; // [esp+78h] [ebp-34h]
  CMemory **v31; // [esp+7Ch] [ebp-30h]
  CMemory **v32; // [esp+80h] [ebp-2Ch]
  CMemory **v33; // [esp+84h] [ebp-28h]
  CMemory **v34; // [esp+88h] [ebp-24h]
  CMemory **v35; // [esp+8Ch] [ebp-20h]
  CMemory **v36; // [esp+90h] [ebp-1Ch]
  CMonsterReal *v37; // [esp+94h] [ebp-18h]
  CMemory **v38; // [esp+98h] [ebp-14h]
  CMemory **v39; // [esp+9Ch] [ebp-10h]
  CMemory **v40; // [esp+A0h] [ebp-Ch]
  CMemory **v41; // [esp+A4h] [ebp-8h]
  CMonster *pMonster; // [esp+A8h] [ebp-4h]

  pMonster = 0;
  switch ( pInit->m_nRace )
  {
    case 0:
      switch ( pInit->m_dwAI )
      {
        case 1u:
        case 2u:
          v41 = operator new(0x298u);
          if ( v41 )
            v22 = CMonsterMaguni::CMonsterMaguni((CMonsterMaguni *)v41, pGen);
          else
            v22 = 0;
          pMonster = v22;
          v22->m_bAggressive = pInit->m_dwAI - 1;
          break;
        case 3u:
          v40 = operator new(0x2B0u);
          if ( v40 )
            v21 = (CMonster *)sub_439D20(v40, (int)pGen);
          else
            v21 = 0;
          pMonster = v21;
          v21->m_bAggressive = pInit->m_dwAI - 2;
          break;
        case 4u:
          v39 = operator new(0x298u);
          if ( v39 )
            v20 = (CMonster *)sub_439910(v39, (int)pGen);
          else
            v20 = 0;
          pMonster = v20;
          v20->m_bAggressive = 1;
          break;
        case 5u:
          v38 = operator new(0x2A0u);
          if ( v38 )
            v19 = (CMonster *)CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(v38, (int)pGen);
          else
            v19 = 0;
          pMonster = v19;
          v19->m_bAggressive = 1;
          break;
        default:
          return pMonster;
      }
      break;
    case 1:
      switch ( pInit->m_dwAI )
      {
        case 1u:
        case 2u:
          v37 = (CMonsterReal *)operator new(0x298u);
          if ( v37 )
            v18 = CMonsterReal::CMonsterReal(v37, pGen);
          else
            v18 = 0;
          pMonster = v18;
          v18->m_bAggressive = pInit->m_dwAI - 1;
          break;
        case 3u:
          v36 = operator new(0x2B8u);
          if ( v36 )
            v17 = CMonsterTowerBoss::CMonsterTowerBoss((CMonsterTowerBoss *)v36);
          else
            v17 = 0;
          pMonster = v17;
          break;
        case 4u:
          v35 = operator new(0x2A0u);
          if ( v35 )
            v16 = CMonsterBlackBug::CMonsterBlackBug((CMonsterBlackBug *)v35, (int)pGen);
          else
            v16 = 0;
          pMonster = v16;
          v16->m_bAggressive = 1;
          break;
        case 5u:
          v34 = operator new(0x298u);
          if ( v34 )
            v15 = (CMonster *)sub_439F10(v34, (int)pGen);
          else
            v15 = 0;
          pMonster = v15;
          v15->m_bAggressive = 1;
          break;
        case 6u:
          v33 = operator new(0x2B8u);
          if ( v33 )
            v14 = CMonsterInvaderBoss::CMonsterInvaderBoss((CMonsterInvaderBoss *)v33, (int)pGen);
          else
            v14 = 0;
          pMonster = (CMonster *)v14;
          *((_DWORD *)v14 + 119) = 1;
          break;
        default:
          return pMonster;
      }
      break;
    case 2:
    case 3:
      v32 = operator new(0x238u);
      if ( v32 )
        v13 = (CMonster *)sub_439AD0(v32);
      else
        v13 = 0;
      pMonster = v13;
      break;
    case 4:
      v31 = operator new(0x218u);
      if ( v31 )
        v12 = (CMonster *)sub_439B50(v31, pGen);
      else
        v12 = 0;
      pMonster = v12;
      break;
    case 5:
      v30 = operator new(0x218u);
      if ( v30 )
        v11 = (CMonster *)sub_439BD0(v30, pGen);
      else
        v11 = 0;
      pMonster = v11;
      break;
    case 6:
      v29 = operator new(0x218u);
      if ( v29 )
        v10 = (CMonster *)sub_4399D0(v29, (int)pGen);
      else
        v10 = 0;
      pMonster = v10;
      break;
    case 7:
      v28 = operator new(0x2A0u);
      if ( v28 )
        v9 = (CMonster *)CMonsterEgg::CMonsterEgg(v28, (int)pGen);
      else
        v9 = 0;
      pMonster = v9;
      break;
    case 8:
      v27 = operator new(0x2A0u);
      if ( v27 )
        v8 = CMonsterCocoon::CMonsterCocoon((CMonsterCocoon *)v27, (int)pGen);
      else
        v8 = 0;
      pMonster = v8;
      v8->m_bAggressive = 1;
      break;
    case 9:
      v26 = operator new(0x2A8u);
      if ( v26 )
        v7 = (CMonster *)CMonsterFireFlower::CMonsterFireFlower(v26, (int)pGen);
      else
        v7 = 0;
      pMonster = v7;
      v7->m_bAggressive = 0;
      break;
    case 0xA:
      v6 = pInit->m_dwAI;
      switch ( v6 )
      {
        case 1u:
          v25 = operator new(0x2D0u);
          if ( v25 )
            v5 = (CMonster *)sub_439DE0(v25);
          else
            v5 = 0;
          pMonster = v5;
          v5->m_bAggressive = 0;
          break;
        case 2u:
          v24 = operator new(0x2A8u);
          if ( v24 )
            v4 = (CMonster *)sub_439EA0(v24);
          else
            v4 = 0;
          pMonster = v4;
          v4->m_bAggressive = 0;
          break;
        case 3u:
          v23 = operator new(0x2A8u);
          if ( v23 )
            v3 = (CMonster *)sub_439EF0(v23);
          else
            v3 = 0;
          pMonster = v3;
          break;
      }
      break;
    default:
      return pMonster;
  }
  return pMonster;
}

//----- (00439830) --------------------------------------------------------
CMonsterMaguni *__thiscall CMonsterMaguni::CMonsterMaguni(CMonsterMaguni *this, CGenMonster *pGen)
{
  CMonsterReal::CMonsterReal(this, pGen);
  this->__vftable = (CMonsterMaguni_vtbl *)&off_4B7F88;
  return this;
}
// 4B7F88: using guessed type int (__stdcall *off_4B7F88)(int);

//----- (00439860) --------------------------------------------------------
int __thiscall CMonsterReal::GetAttackType(CMonsterReal *this)
{
  return this->m_pInit->m_nAttackType;
}

//----- (00439880) --------------------------------------------------------
void __thiscall CMonsterReal::ResetNextMove(CMonsterReal *this, unsigned int dwNextMove, int bRefindPath)
{
  this->m_dwNextMove = dwNextMove;
  this->m_bRefindPath = bRefindPath;
}

//----- (004398B0) --------------------------------------------------------
void __thiscall CMonsterReal::~CMonsterReal(CMonsterReal *this)
{
  CFindPath::~CFindPath(&this->m_findpath);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockHostility);
  sub_4398F0(&this->m_mapHostility);
  CMonster::~CMonster(this);
}

//----- (004398F0) --------------------------------------------------------
int __thiscall sub_4398F0(void *this)
{
  return sub_445CB0(this);
}

//----- (00439910) --------------------------------------------------------
_DWORD *__thiscall sub_439910(_DWORD *this, int a2)
{
  CMonsterMaguni::CMonsterMaguni((CMonsterMaguni *)this, (CGenMonster *)a2);
  *this = &off_4B8090;
  return this;
}
// 4B8090: using guessed type int (__stdcall *off_4B8090)(int);

//----- (00439940) --------------------------------------------------------
void *__thiscall sub_439940(void *this, char a2)
{
  sub_439970(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00439970) --------------------------------------------------------
void __thiscall sub_439970(void *this)
{
  sub_4442B0(this);
}

//----- (00439990) --------------------------------------------------------
_DWORD *__thiscall CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(_DWORD *this, int a2)
{
  CMonsterMaguni::CMonsterMaguni(this, a2);
  *this = &off_4B8198;
  this[166] = 0;
  return this;
}
// 4B8198: using guessed type int (__stdcall *off_4B8198)(int);

//----- (004399D0) --------------------------------------------------------
_DWORD *__thiscall sub_4399D0(_DWORD *this, int a2)
{
  sub_439A00(this, (_DWORD *)a2);
  *this = &off_4B82A0;
  return this;
}
// 4B82A0: using guessed type int (__stdcall *off_4B82A0)(int);

//----- (00439A00) --------------------------------------------------------
_DWORD *__thiscall sub_439A00(_DWORD *this, _DWORD *a2)
{
  CMonster::CMonster((CMonster *)this, a2);
  *this = &off_4B8398;
  return this;
}
// 4B8398: using guessed type int (__stdcall *off_4B8398)(int);

//----- (00439A30) --------------------------------------------------------
void *__thiscall sub_439A30(void *this, char a2)
{
  sub_439A60(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00439A60) --------------------------------------------------------
void __thiscall sub_439A60(_DWORD *this)
{
  CMonster::~CMonster(this);
}

//----- (00439A80) --------------------------------------------------------
void *__thiscall sub_439A80(void *this, char a2)
{
  sub_439AB0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00439AB0) --------------------------------------------------------
void __thiscall sub_439AB0(_DWORD *this)
{
  sub_439A60(this);
}

//----- (00439AD0) --------------------------------------------------------
_DWORD *__thiscall sub_439AD0(_DWORD *this)
{
  sub_439AF0(this);
  *this = &off_4B8490;
  return this;
}
// 4B8490: using guessed type int (__stdcall *off_4B8490)(int);

//----- (00439AF0) --------------------------------------------------------
_DWORD *__thiscall sub_439AF0(_DWORD *this)
{
  CMonster::CMonster((int)this);
  *this = &off_4B8398;
  return this;
}
// 4B8398: using guessed type int (__stdcall *off_4B8398)(int);

//----- (00439B10) --------------------------------------------------------
int __thiscall sub_439B10(_DWORD *this)
{
  return this[134];
}

//----- (00439B30) --------------------------------------------------------
char *__thiscall sub_439B30(char *this)
{
  return this + 540;
}

//----- (00439B50) --------------------------------------------------------
_DWORD *__thiscall sub_439B50(_DWORD *this, _DWORD *a2)
{
  sub_439A00(this, a2);
  *this = &off_4B8588;
  return this;
}
// 4B8588: using guessed type int (__stdcall *off_4B8588)(int);

//----- (00439B80) --------------------------------------------------------
void *__thiscall sub_439B80(void *this, char a2)
{
  sub_439BB0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00439BB0) --------------------------------------------------------
void __thiscall sub_439BB0(_DWORD *this)
{
  *this = &off_4B8588;
  sub_439A60(this);
}
// 4B8588: using guessed type int (__stdcall *off_4B8588)(int);

//----- (00439BD0) --------------------------------------------------------
_DWORD *__thiscall sub_439BD0(_DWORD *this, _DWORD *a2)
{
  sub_439A00(this, a2);
  *this = &off_4B8680;
  return this;
}
// 4B8680: using guessed type int (__stdcall *off_4B8680)(int);

//----- (00439C00) --------------------------------------------------------
CMonsterBlackBug *__thiscall CMonsterBlackBug::CMonsterBlackBug(CMonsterBlackBug *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (CGenMonster *)a2);
  this->__vftable = (CMonsterBlackBug_vtbl *)&off_4B8778;
  memset(this->m_dwTick, 0, sizeof(this->m_dwTick));
  this->m_dwTick[0] = 0;
  this->m_pGen = (CGenMonster *)a2;
  return this;
}
// 4B8778: using guessed type int (__stdcall *off_4B8778)(int);

//----- (00439C60) --------------------------------------------------------
_DWORD *__thiscall CMonsterEgg::CMonsterEgg(_DWORD *this, int a2)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this, (CGenMonster *)a2);
  *this = &off_4B8880;
  this[167] = a2;
  this[117] = GetTickCount() + 140000;
  CNPC::AddGState((CNPC *)this, 0x2000);
  return this;
}
// 4B8880: using guessed type int (__stdcall *off_4B8880)(int);

//----- (00439CC0) --------------------------------------------------------
CMonsterCocoon *__thiscall CMonsterCocoon::CMonsterCocoon(CMonsterCocoon *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B8988;
  memset((char *)this + 664, 0, 4u);
  *((_DWORD *)this + 166) = GetTickCount() + 120000;
  *((_DWORD *)this + 167) = a2;
  return this;
}
// 4B8988: using guessed type int (__stdcall *off_4B8988)(int);

//----- (00439D20) --------------------------------------------------------
_DWORD *__thiscall sub_439D20(_DWORD *this, int a2)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this, (_DWORD *)a2);
  *this = &off_4B8A90;
  memset(this + 167, 0, 0x14u);
  this[139] = GetTickCount();
  this[165] = this[139];
  return this;
}
// 4B8A90: using guessed type int (__stdcall *off_4B8A90)(int);

//----- (00439D80) --------------------------------------------------------
_DWORD *__thiscall CMonsterFireFlower::CMonsterFireFlower(_DWORD *this, int a2)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this, (CGenMonster *)a2);
  *this = &off_4B8B98;
  memset(this + 166, 0, 8u);
  this[166] = GetTickCount() + 12000;
  CNPC::AddGState((CNPC *)this, 0x2000);
  return this;
}
// 4B8B98: using guessed type int (__stdcall *off_4B8B98)(int);

//----- (00439DE0) --------------------------------------------------------
_DWORD *__thiscall sub_439DE0(_DWORD *this)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this);
  *this = &off_4B8CA0;
  this[173] = 0;
  memset(this + 172, 0, sizeof(_DWORD));
  this[139] = GetTickCount();
  this[165] = this[139];
  this[174] = 0;
  this[175] = 0;
  this[132] = 0;
  this[177] = 0;
  return this;
}
// 4B8CA0: using guessed type int (__stdcall *off_4B8CA0)(int);

//----- (00439E80) --------------------------------------------------------
char *__thiscall sub_439E80(char *this)
{
  return this + 664;
}

//----- (00439EA0) --------------------------------------------------------
_DWORD *__thiscall sub_439EA0(_DWORD *this)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this);
  *this = &off_4B8DA8;
  return this;
}
// 4B8DA8: using guessed type int (__stdcall *off_4B8DA8)(int);

//----- (00439EC0) --------------------------------------------------------
void *__thiscall sub_439EC0(void *this, char a2)
{
  sub_4442B0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00439EF0) --------------------------------------------------------
_DWORD *__thiscall sub_439EF0(_DWORD *this)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this);
  *this = &off_4B8EB0;
  return this;
}
// 4B8EB0: using guessed type int (__stdcall *off_4B8EB0)(int);

//----- (00439F10) --------------------------------------------------------
_DWORD *__thiscall sub_439F10(_DWORD *this, int a2)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this, (CGenMonster *)a2);
  *this = &off_4B8FB8;
  return this;
}
// 4B8FB8: using guessed type int (__stdcall *off_4B8FB8)(int);

//----- (00439F40) --------------------------------------------------------
CMonsterInvaderBoss *__thiscall CMonsterInvaderBoss::CMonsterInvaderBoss(CMonsterInvaderBoss *this, int a2)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this, (CGenMonster *)a2);
  *(_DWORD *)this = &off_4B90C0;
  memset((char *)this + 668, 0, 0x14u);
  *((_DWORD *)this + 139) = GetTickCount();
  *((_DWORD *)this + 165) = *((_DWORD *)this + 139);
  *((_DWORD *)this + 172) = 0;
  return this;
}
// 4B90C0: using guessed type int (__stdcall *off_4B90C0)(int);

//----- (00439FB0) --------------------------------------------------------
int __cdecl CMonster::Create(CGenMonster *pGen, CChar *a2)
{
  int result; // eax
  int v3; // eax
  char *v4; // eax
  int m_nMaxHP; // eax
  int m_nGState; // [esp-1Ch] [ebp-48h]
  __int64 m_nMState; // [esp-18h] [ebp-44h]
  int szGuildName; // [esp-10h] [ebp-3Ch]
  __int64 dwAttr; // [esp-8h] [ebp-34h]
  CMonster *v10; // [esp+Ch] [ebp-20h] BYREF
  CInitMonster *pInit; // [esp+10h] [ebp-1Ch]
  tagRECT ptTGen; // [esp+14h] [ebp-18h] BYREF
  char v13[4]; // [esp+24h] [ebp-8h] BYREF
  CMonster *pMonster; // [esp+28h] [ebp-4h]
                                                // This one needs some work.. not sure what arguments are -HighGamer
  HIDWORD(dwAttr) = a2;
  CGenMonster::GetGenTile(pGen, (tagPOINT *)&ptTGen);
  LODWORD(dwAttr) = 0x20000;
  if ( !CSMap::IsValidTile(pGen->m_pMap, (const tagPOINT *)&ptTGen, dwAttr) )
    return 0;
  CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
  sub_44AE20(dword_4E1820, v13, &pGen->m_nIndex);
  v3 = sub_430C20(dword_4E1820, (int)&v10);
  if ( (unsigned __int8)unknown_libname_8(v3) )
    goto LABEL_4;
  pInit = *(CInitMonster **)(sub_420250(v13) + 4);
  if ( (pInit->m_dwCountry & (1 << SLOBYTE(stru_4E35B4.m_nRef))) != 0 )
  {
    pMonster = CMonster::NewMonster(pInit, pGen);
    if ( !pMonster )
    {
LABEL_4:
      CIOCriticalSection::Leave((int)&unk_4E182C);
      return 0;
    }
    CChar::SetXY(pMonster, (const tagPOINT *)&ptTGen);
    pMonster->SetProperty(pMonster, pInit);
    CIOCriticalSection::Leave((int)&unk_4E182C);
    CChar::Lock(pMonster);
    ptTGen.right = ptTGen.left >> 5;
    ptTGen.bottom = ptTGen.top >> 5;
    if ( CSMap::SetOnMap(pMonster->m_pMap, pMonster, (const tagPOINT *)&ptTGen.right) )
    {
      pMonster->Add(pMonster, a2);
      v4 = pMonster->GetOperatorName(pMonster);
      szGuildName = ((int (__thiscall *)(CMonster *, int, int, char *))pMonster->GetGuildName)(
                      pMonster,
                      pMonster->m_pInit->m_nRace,
                      pMonster->m_nGID,
                      v4);
      m_nMState = pMonster->m_nMState;
      m_nGState = pMonster->m_nGState;
      m_nMaxHP = CChar::GetMaxHP(pMonster);
      CChar::WriteInSight(
        pMonster,
        S2C_CREATEMONSTER,
        "wdddwdddIsbds",
        pMonster->m_pInit->m_nIndex,
        pMonster->m_nId,
        pMonster->m_ptPixel.x,
        pMonster->m_ptPixel.y,
        pMonster->m_nDir,
        pMonster->m_nCurHP,
        m_nMaxHP,
        m_nGState,
        m_nMState,
        szGuildName);
      CChar::Unlock(pMonster);
      result = 1;
    }
    else
    {
      CChar::Unlock(pMonster);
      if ( pMonster )
        ((void (__thiscall *)(CMonster *, int))pMonster->~CIOObject)(pMonster, 1);
      result = 0;
    }
  }
  else
  {
    CIOCriticalSection::Leave((int)&unk_4E182C);
    result = 1;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (0043A200) --------------------------------------------------------
int __thiscall CChar::GetMaxHP(CChar *this)
{
  return this->m_prtyPt.nPt[5] + this->m_prtyBase.nBase[5] + this->m_prtyPer.nPer[5] * this->m_prtyBase.nBase[5] / 100;
}

//----- (0043A240) --------------------------------------------------------
CMonster *__cdecl CMonster::FindMonster(DWORD nId)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  CMonster *pMonster; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  pMonster = 0;
  CRWLock::ReadLock(&unk_4E1858);
  sub_44AE20(dword_4E184C, &it, &nId);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E184C, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    pMonster = *(CMonster **)(sub_420250(&it) + 4);
    CIOObject::AddRef(pMonster, &pMonster->m_nFindRef);
  }
  CRWLock::ReadUnlock(&unk_4E1858);
  return pMonster;
}
// 4E184C: using guessed type int dword_4E184C[3];

//----- (0043A2C0) --------------------------------------------------------
void __cdecl CMonster::GetMonsterList(std::list<CMonster *> *list_monster, int nIndex)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+8h] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E1858);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E184C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E184C, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v2) )
      break;                                    // Fix below blah blah -HighGamer
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&v6) + 4) + 440) + 60) == nIndex )
    {
      v3 = sub_420250(&v6);
      sub_47D000(list_monster, v3 + 4);
    }
    sub_446090((int *)&v6, v5, 0);
  }
  CRWLock::ReadUnlock(&unk_4E1858);
}
// 4E184C: using guessed type int dword_4E184C[3];

//----- (0043A350) --------------------------------------------------------
CMonster *__cdecl CMonster::ScanMonster(int nIndex)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-8h] BYREF
  CMonster *pMonster; // [esp+Ch] [ebp-4h]

  pMonster = 0;
  CRWLock::ReadLock(&unk_4E1858);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E184C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E184C, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v1) )
      break;                                    // Fix below, after applying all correct std::stuff -HighGamer
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&it) + 4) + 440) + 60) == nIndex )
    {
      pMonster = *(CMonster **)(sub_420250(&it) + 4);
      CIOObject::AddRef((int)pMonster);
      break;
    }
    sub_446090((int *)&it, v4, 0);
  }
  CRWLock::ReadUnlock(&unk_4E1858);
  return pMonster;
}
// 4E184C: using guessed type int dword_4E184C[3];

//----- (0043A3F0) --------------------------------------------------------
void __thiscall CMonster::OnDelete(CMonster *this)
{
  CChar *pParent; // [esp+4h] [ebp-4h]

  CChar::Lock(this);
  this->SetTarget(this, 0);
  this->Remove(this);
  CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile);
  if ( this->m_pParent )
  {
    pParent = this->m_pParent;
    this->m_pParent = 0;
    CChar::Unlock(this);
    pParent->UpdateChild(pParent, this->m_pInit->m_nIndex);
  }
  else
  {
    CChar::Unlock(this);
  }
  sub_402180((int)this);
}

//----- (0043A4A0) --------------------------------------------------------
void __thiscall CMonster::SendDelete(CMonster *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer)
{
  CPlayer::Write((CPlayer *)pPlayer, S2C_REMOVEMONSTER, "d", this->m_nId);
}

//----- (0043A4D0) --------------------------------------------------------
void __thiscall CMonster::SendCreate(CMonster *this, CBase *pPlayer, CIOBuffer *pCreateBuffer)
{
  char *OperatorName; // eax
  int m_nMaxHP; // eax
  int m_nGState; // [esp-1Ch] [ebp-20h]
  __int64 m_nMState; // [esp-18h] [ebp-1Ch]
  int GuildName; // [esp-10h] [ebp-14h]

  OperatorName = this->GetOperatorName(this);
  GuildName = ((int (__thiscall *)(CMonster *, int, int, char *))this->GetGuildName)(
                this,
                this->m_pInit->m_nRace,
                this->m_nGID,
                OperatorName);
  m_nMState = this->m_nMState;
  m_nGState = this->m_nGState;
  m_nMaxHP = CChar::GetMaxHP(this);
  CPlayer::Write(
    (CPlayer *)pPlayer,
    S2C_CREATEMONSTER,
    "wdddwdddIsbds",
    this->m_pInit->m_nIndex,
    this->m_nId,
    this->m_ptPixel.x,
    this->m_ptPixel.y,
    this->m_nDir,
    this->m_nCurHP,
    m_nMaxHP,
    m_nGState,
    m_nMState,
    GuildName);
}

//----- (0043A590) --------------------------------------------------------
void __thiscall CMonster::SetTarget(CMonster *this, CChar *pChar)
{
  if ( this->m_pTarget )
    CIOObject::Release(this->m_pTarget, &this->m_pTarget->m_nTargetRef);
  this->m_pTarget = pChar;
}

//----- (0043A5E0) --------------------------------------------------------
void __thiscall CMonster::SetProperty(CMonster *this, CInitMonster *pInit)
{
  this->m_pInit = pInit;
  strcpy(this->m_szName, pInit->m_szName);
  this->m_nLevel = pInit->m_nLevel;
}

//----- (0043A620) --------------------------------------------------------
int __thiscall CMonster::IsRemoved(CMonster *this)
{
  return CNPC::IsRemoved((CNPC *)this);
}

//----- (0043A640) --------------------------------------------------------
void __thiscall CMonster::Add(int this, int a2)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v2; // eax
  char v4[8]; // [esp+4h] [ebp-18h] BYREF
  int v5; // [esp+Ch] [ebp-10h]
  int v6; // [esp+10h] [ebp-Ch]
  char v7[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef(this);
  CMonsterObject::Insert((CIOCriticalSection *)&unk_4E1930, (CLink *)(this + 428));
  CRWLock::WriteLock(&unk_4E1858);
  v6 = this;
  v5 = *(_DWORD *)(this + 28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v7);
  sub_445DF0(
    (int)dword_4E184C,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v2);
  CRWLock::WriteUnlock(&unk_4E1858);
}
// 43A697: variable 'v2' is possibly undefined
// 4E184C: using guessed type int dword_4E184C[3];

//----- (0043A6B0) --------------------------------------------------------
void __thiscall CMonster::Remove(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E1858);
  v2 = this[7];
  sub_445FA0(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E184C,
    (int)&v2);
  CRWLock::WriteUnlock(&unk_4E1858);
}
// 4E184C: using guessed type int dword_4E184C[3];

//----- (0043A6F0) --------------------------------------------------------
CLink *__thiscall CLink::Remove(CLink *this)
{
  CLink *result; // eax

  *(_DWORD *)(*(_DWORD *)this + 4) = *((_DWORD *)this + 1);
  result = this;
  **((_DWORD **)this + 1) = *(_DWORD *)this;
  return result;
}

//----- (0043A720) --------------------------------------------------------
CIOObject *__thiscall CMonster::GetOperatorName(CMonster *this)
{
  CIOObject *v2; // [esp+4h] [ebp-8h]

  if ( !this->m_nOperator )
    return 0;
  v2 = CPlayer::FindPlayer(this->m_nOperator);
  CIOObject::Release(v2, (volatile int *)&v2[22]);
  return v2 + 2;
}

//----- (0043A770) --------------------------------------------------------
BOOL __thiscall CMonster::CanAttack(CChar *this, CChar *a2, int a3)
{
  BOOL result; // eax

  if ( a3 || !CChar::IsMState(this, 0x200010000100i64) )
    result = CChar::IsMState(a2, 0x80000i64) == 0;
  else
    result = 0;
  return result;
}

//----- (0043A7D0) --------------------------------------------------------
CMonsterReal *__thiscall CMonsterReal::CMonsterReal(CMonsterReal *this)
{
  CMonster::CMonster(this);
  this->__vftable = (CMonsterReal_vtbl *)&off_4B91D8;
  sub_445C80(&this->m_mapHostility);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockHostility);
  CFindPath::CFindPath(&this->m_findpath);
  this->m_nSight[1] = 0;
  this->m_nSight[0] = 0;
  this->m_nRoam = 0;
  this->m_nAIState = 1;
  this->m_ptPReturn.y = 0;
  this->m_ptPReturn.x = 0;
  this->m_dwNextMove = GetTickCount();
  this->m_dwAttacked = this->m_dwNextMove;
  this->m_nAllHostility = 0;
  this->m_nMaxHostility = 0;
  this->m_bRefindPath = 0;
  this->m_bRest = 0;
  return this;
}
// 4B91D8: using guessed type int (__stdcall *off_4B91D8)(int);

//----- (0043A8C0) --------------------------------------------------------
_DWORD *__thiscall CMonsterReal::`scalar deleting destructor'(_DWORD *a1, char a5)
{
  CMonsterReal::~CMonsterReal((CMonsterReal *)a1);
  if ( (a5 & 1) != 0 )
    operator delete(a1);
  return a1;
}

//----- (0043A8F0) --------------------------------------------------------
CMonsterReal *__thiscall CMonsterReal::CMonsterReal(CMonsterReal *this, CGenMonster *pGen)
{
  CMonster::CMonster(this, pGen);
  this->__vftable = (CMonsterReal_vtbl *)&off_4B91D8;
  sub_445C80(&this->m_mapHostility);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockHostility);
  CFindPath::CFindPath(&this->m_findpath);
  this->m_ptPReturn.x = (this->m_rtArea.right + this->m_rtArea.left) / 2;
  this->m_ptPReturn.y = (this->m_rtArea.top + this->m_rtArea.bottom) / 2;
  this->m_nRoam = 0;
  this->m_nAIState = 1;
  this->m_dwNextMove = GetTickCount();
  this->m_dwAttacked = this->m_dwNextMove;
  this->m_nAllHostility = 0;
  this->m_nMaxHostility = 0;
  this->m_bRefindPath = 0;
  this->m_bRest = 0;
  this->m_nIndex = pGen->m_nIndex;
  return this;
}
// 4B91D8: using guessed type int (__stdcall *off_4B91D8)(int);

//----- (0043AA00) --------------------------------------------------------
void __thiscall CMonsterReal::OnDelete(CIOCriticalSection *this)
{
  int v2; // [esp+4h] [ebp-4h]

  CChar::Lock((CChar *)this);
  ((void (__thiscall *)(CIOCriticalSection *, _DWORD))this->m_critical_section.DebugInfo[5].Spare[1])(this, 0);
  CMonsterReal::ResetHostility(this);
  ((void (__thiscall *)(CIOCriticalSection *))this->m_critical_section.DebugInfo[6].ProcessLocksList.Flink)(this);
  CSMap::RemoveFromMap((int)this, (int)&this[10].m_critical_section.LockCount);
  if ( this[15].m_critical_section.LockCount )
  {
    v2 = this[15].m_critical_section.LockCount;
    this[15].m_critical_section.LockCount = 0;
    CChar::Unlock((CChar *)this);
    if ( this[16].m_critical_section.DebugInfo != (_RTL_CRITICAL_SECTION_DEBUG *)331 )
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v2 + 172))(v2, *(_DWORD *)(this[13].m_dwEIP[0] + 60));
  }
  else
  {
    CChar::Unlock((CChar *)this);
  }
  sub_402180((int)this);
}

//----- (0043AAC0) --------------------------------------------------------
void __thiscall CMonsterReal::SendCreate(CPlayer *this, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-1Ch] [ebp-24h]
  __int64 v6; // [esp-18h] [ebp-20h]
  int v7; // [esp-10h] [ebp-18h]

  v3 = ((int (__thiscall *)(CPlayer *))this->__vftable[1].SendMove)(this);
  v7 = ((int (__thiscall *)(CPlayer *, _DWORD, _DWORD, int))this->__vftable[1].OnLoad)(
         this,
         *(_DWORD *)(this->m_nSocketRef + 64),
         *(_DWORD *)&this->m_szGuildClassTitle[4],
         v3);
  v6 = this->m_nMState;
  v5 = this->m_nGState;
  v4 = CChar::GetMaxHP(this);
  CPlayer::Write(
    a2,
    51,
    "wdddwdddIsbds",
    *(_DWORD *)(this->m_nSocketRef + 60),
    this->m_nId,
    this->m_ptPixel.x,
    this->m_ptPixel.y,
    this->m_nDir,
    this->m_nCurHP,
    v4,
    v5,
    v6,
    v7);
  if ( this->m_prtyPer.nMSpeed )
    CPlayer::Write(a2, 72, "dbw", this->m_nId, 32, this->m_prtyPer.nMSpeed);
}

//----- (0043ABB0) --------------------------------------------------------
int __thiscall CMonsterReal::Damage(int *this, int a2, int a3, _DWORD *a4, _DWORD *a5, _DWORD *a6, int a7)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-20h]
  int v9; // [esp+4h] [ebp-1Ch]
  char v11[4]; // [esp+Ch] [ebp-14h] BYREF
  int v12; // [esp+10h] [ebp-10h] BYREF
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  int v15; // [esp+1Ch] [ebp-4h]

  if ( (*(int (__thiscall **)(int *))(*this + 252))(this) )
    return 1;
  if ( a7 )
    v9 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v9 = 1;
  v13 = v9;
  v15 = CChar::GetFinalDamage(this, (_DWORD *)a2, a3, v9);
  if ( v15 > 0 )
  {
    CMonsterReal::ManageBuff(this);
    CChar::Lock((CIOCriticalSection *)this);
    if ( CMonsterReal::ApplyDamage((int)this, a2, a3, v15, a4, (int)a5, a6, a7) )
    {
      v14 = *a6 + *a4;
      if ( a7 )
        v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 24))(a7);
      else
        v8 = 0;
      (*(void (__thiscall **)(int *, int, int, int))(*this + 212))(this, a2, v14, v8);
      if ( this[68] > 0 )
      {
        (*(void (__thiscall **)(int *, int, int))(*this + 256))(this, v14, v13);
        CChar::Unlock((CIOCriticalSection *)this);
      }
      else
      {
        v12 = 0;
        *(_DWORD *)v11 = 0;
        (*(void (__thiscall **)(int *, int, _DWORD, int *, char *))(*this + 236))(this, a2, *a5, &v12, v11);
        CChar::Unlock((CIOCriticalSection *)this);
        CMonsterReal::AllotTransformExp(this, v12, *(int *)v11);
        CBase::Delete((CItem *)this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock((CIOCriticalSection *)this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (0043AD50) --------------------------------------------------------
int __thiscall CChar::GetFinalDamage(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // [esp+10h] [ebp-10h]
  int v7; // [esp+18h] [ebp-8h]
  int v8; // [esp+1Ch] [ebp-4h]
  int v9; // [esp+1Ch] [ebp-4h]

  v7 = a2[15] - this[15];
  if ( a4 )
  {
    if ( (*(int (__thiscall **)(_DWORD *))(*this + 64))(this) || (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
    {
      if ( v7 < 0 )
        v5 = -dword_4D8398[abs(v7)];
      else
        v5 = dword_4D8398[v7];
      a3 += v5;
    }
    v8 = a3 - (*(int (__thiscall **)(_DWORD *, _DWORD *))(*this + 136))(this, a2);
    if ( v8 <= 0 )
      return 0;
    v9 = v8 - v8 * (*(int (__thiscall **)(_DWORD *, _DWORD *))(*this + 140))(this, a2) / 100;
  }
  else
  {
    v9 = a3 + v7 * abs(v7) / 4;
  }
  if ( CChar::IsBState(a2, 512i64) )
  {
    v9 += v9 / 10;
  }
  else if ( CChar::IsBState(a2, 0x40000000i64) )
  {
    v9 += 7 * v9 / 100;
  }
  return v9;
}

//----- (0043AEB0) --------------------------------------------------------
void __thiscall CMonsterReal::Defense(CIOCriticalSection *a1, volatile int *a2)
{
  CChar::Lock(a1);
  if ( !a1[14].m_critical_section.LockSemaphore )
  {
    CIOObject::AddRef((CIOObject *)a2, a2 + 89);
    ((void (__thiscall *)(CIOCriticalSection *, volatile int *))a1->m_critical_section.DebugInfo[5].Spare[1])(a1, a2);
  }
  CChar::Unlock(a1);
}

//----- (0043AF00) --------------------------------------------------------
int __thiscall CMonsterReal::ReviseProperty(CPlayer *this)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h]

  CChar::ReviseProperty(this);
  v3 = this->m_prtyBase.nBase[3];
  this->m_prtyBase.nBase[5] += 2 * this->m_prtyBase.nBase[1] * this->m_prtyBase.nBase[1] / 10 + 115;
  this->m_prtyBase.nBase[6] += v3 + 2 * v3 * v3 / 10;
  this->m_nCurHP = CChar::GetMaxHP(this);
  result = CChar::GetMaxMP(this);
  this->m_nCurMP = result;
  return result;
}

//----- (0043AF90) --------------------------------------------------------
int __thiscall CChar::GetMaxMP(CPlayer *a1)
{
  return *((_DWORD *)a1 + 29) + *((_DWORD *)a1 + 22) + *((_DWORD *)a1 + 53) * *((_DWORD *)a1 + 22) / 100;
}

//----- (0043AFD0) --------------------------------------------------------
void __thiscall CMonsterReal::SetTarget(void *this, int a2)
{
  CMonster::SetTarget((int)this, a2);
  if ( !sub_40F5F0((char *)this + 488) )
  {
    if ( a2 )
    {
      *((_DWORD *)this + 120) = 4;
      *((_DWORD *)this + 139) = 0;
    }
    else
    {
      *((_DWORD *)this + 120) = 1;
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (0043B030) --------------------------------------------------------
void __cdecl CMonsterReal::UpdateProperty(int a1, int a2, int a3, int a4)
{
  int v4; // [esp+0h] [ebp-14h]
  int v5; // [esp+4h] [ebp-10h]

  if ( a2 == 7 )
  {
    if ( a3 )
    {
      *(_DWORD *)(a1 + 272) += a4;
      if ( CChar::GetMaxHP((CPlayer *)a1) >= *(_DWORD *)(a1 + 272) )
        v5 = *(_DWORD *)(a1 + 272);
      else
        v5 = CChar::GetMaxHP((CPlayer *)a1);
      *(_DWORD *)(a1 + 272) = v5;
    }
    else
    {
      *(_DWORD *)(a1 + 272) -= a4;
      if ( *(int *)(a1 + 272) >= 0 )
        v4 = *(_DWORD *)(a1 + 272);
      else
        v4 = 0;
      *(_DWORD *)(a1 + 272) = v4;
    }
    CChar::WriteInSight(a1, 72, "dbd", *(_DWORD *)(a1 + 28), 7, *(_DWORD *)(a1 + 272));
  }
}

//----- (0043B130) --------------------------------------------------------
void CMonsterReal::UpdatePrtyPt(CMonsterReal *this, int nProperty, ...)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp+0h] [ebp-50h]
  int v7; // [esp+4h] [ebp-4Ch]
  int v8; // [esp+8h] [ebp-48h]
  int v9; // [esp+Ch] [ebp-44h]
  int v10; // [esp+1Ch] [ebp-34h]
  int v11; // [esp+24h] [ebp-2Ch]
  int v12; // [esp+2Ch] [ebp-24h]
  int v13; // [esp+2Ch] [ebp-24h]
  int v14; // [esp+2Ch] [ebp-24h]
  int v15; // [esp+30h] [ebp-20h]
  int v16; // [esp+38h] [ebp-18h]
  int v17; // [esp+3Ch] [ebp-14h]
  int v18; // [esp+3Ch] [ebp-14h]
  int v19; // [esp+3Ch] [ebp-14h]
  int v20; // [esp+44h] [ebp-Ch]
  int bAdd; // [esp+60h] [ebp+10h]
  int v22; // [esp+64h] [ebp+14h]
  int v23; // [esp+68h] [ebp+18h]
  va_list va; // [esp+6Ch] [ebp+1Ch] BYREF

  va_start(va, nProperty);
  bAdd = va_arg(va, _DWORD);
  v22 = va_arg(va, _DWORD);
  v23 = va_arg(va, _DWORD);
  switch ( nProperty )
  {
    case 0:
      v20 = CChar::GetStr(this);
      this->m_prtyPt.nHit -= 15 * v20 / 54;
      this->m_prtyPt.nMinAttack -= (11 * v20 - 80) / 30;
      this->m_prtyPt.nMaxAttack -= (8 * v20 - 25) / 15;
      if ( bAdd )
        this->m_prtyPt.nPt[0] += v22;
      else
        this->m_prtyPt.nPt[0] -= v22;
      v2 = CChar::GetStr(this);
      this->m_prtyPt.nHit += 15 * v2 / 54;
      this->m_prtyPt.nMinAttack += (11 * v2 - 80) / 30;
      this->m_prtyPt.nMaxAttack += (8 * v2 - 25) / 15;
      break;
    case 1:
      v17 = CChar::GetHth(this);
      if ( bAdd )
      {
        this->m_prtyBase.nBase[5] -= 2 * v17 * v17 / 10 + 115;
        this->m_prtyPt.nResist[4] -= v17 / 9;
        this->m_prtyPt.nPt[1] += v22;
        v18 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v18 * v18 / 10 + 115;
        this->m_prtyPt.nResist[4] += v18 / 9;
        v16 = CChar::GetMaxHP(this);
        if ( v22 < 0 )
        {
          if ( this->m_nCurHP >= v16 )
            v9 = v16;
          else
            v9 = this->m_nCurHP;
          this->m_nCurHP = v9;
        }
      }
      else
      {
        this->m_prtyBase.nBase[5] -= 2 * v17 * v17 / 10 + 115;
        this->m_prtyPt.nResist[4] -= v17 / 9;
        this->m_prtyPt.nPt[1] -= v22;
        v19 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v19 * v19 / 10 + 115;
        this->m_prtyPt.nResist[4] += v19 / 9;
        v16 = CChar::GetMaxHP(this);
        if ( v22 > 0 )
        {
          if ( this->m_nCurHP >= v16 )
            v8 = v16;
          else
            v8 = this->m_nCurHP;
          this->m_nCurHP = v8;
        }
      }
      CChar::WriteInSight(this, S2C_UPDATEMPROPERTY, "dbd", this->m_nId, 5, v16);
      break;
    case 2:
      v15 = CChar::GetInt(this);
      this->m_prtyPt.nMinMagic -= (7 * v15 - 20) / 12;
      this->m_prtyPt.nMaxMagic -= 7 * v15 / 12;
      this->m_prtyPt.nResist[0] -= v15 / 9;
      this->m_prtyPt.nResist[1] -= v15 / 9;
      this->m_prtyPt.nResist[2] -= v15 / 9;
      if ( bAdd )
        this->m_prtyPt.nPt[2] += v22;
      else
        this->m_prtyPt.nPt[2] -= v22;
      v3 = CChar::GetInt(this);
      this->m_prtyPt.nMinMagic += (7 * v3 - 20) / 12;
      this->m_prtyPt.nMaxMagic += 7 * v3 / 12;
      this->m_prtyPt.nResist[0] += v3 / 9;
      this->m_prtyPt.nResist[1] += v3 / 9;
      this->m_prtyPt.nResist[2] += v3 / 9;
      break;
    case 3:
      v12 = CChar::GetWis(this);
      if ( bAdd )
      {
        this->m_prtyBase.nBase[6] -= v12 + 2 * v12 * v12 / 10;
        this->m_prtyPt.nMinMagic -= v12 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v12 / 45;
        this->m_prtyPt.nResist[3] -= v12 / 9;
        this->m_prtyPt.nPt[3] += v22;
        v13 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v13 + 2 * v13 * v13 / 10;
        this->m_prtyPt.nMinMagic += v13 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v13 / 45;
        this->m_prtyPt.nResist[3] += v13 / 9;
        v11 = CChar::GetMaxMP((CPlayer *)this);
        if ( v22 < 0 )
        {
          if ( this->m_nCurMP >= v11 )
            v7 = v11;
          else
            v7 = this->m_nCurMP;
          this->m_nCurMP = v7;
        }
      }
      else
      {
        this->m_prtyBase.nBase[6] -= v12 + 2 * v12 * v12 / 10;
        this->m_prtyPt.nMinMagic -= v12 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v12 / 45;
        this->m_prtyPt.nResist[3] -= v12 / 9;
        this->m_prtyPt.nPt[3] -= v22;
        v14 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v14 + 2 * v14 * v14 / 10;
        this->m_prtyPt.nMinMagic += v14 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v14 / 45;
        this->m_prtyPt.nResist[3] += v14 / 9;
        v11 = CChar::GetMaxMP((CPlayer *)this);
        if ( v22 > 0 )
        {
          if ( this->m_nCurMP >= v11 )
            v6 = v11;
          else
            v6 = this->m_nCurMP;
          this->m_nCurMP = v6;
        }
      }
      CChar::WriteInSight(this, S2C_UPDATEMPROPERTY, "dbw", this->m_nId, 6, v11);
      break;
    case 4:
      v10 = CChar::GetDex(this);
      this->m_prtyPt.nHit -= v10 / 8;
      this->m_prtyPt.nDodge -= v10 / 3;
      this->m_prtyPt.nMinAttack -= (v10 - 5) / 11;
      this->m_prtyPt.nMaxAttack -= 18 * v10 / 77;
      if ( bAdd )
        this->m_prtyPt.nPt[4] += v22;
      else
        this->m_prtyPt.nPt[4] -= v22;
      v4 = CChar::GetDex(this);
      this->m_prtyPt.nHit += v4 / 8;
      this->m_prtyPt.nDodge += v4 / 3;
      this->m_prtyPt.nMinAttack += (v4 - 5) / 11;
      this->m_prtyPt.nMaxAttack += 18 * v4 / 77;
      break;
    case 15:
      if ( bAdd )
      {
        this->m_prtyPt.nDefense[0] += v22;
        v5 = v23 + this->m_prtyPt.nDefense[1];
      }
      else
      {
        this->m_prtyPt.nDefense[0] -= v22;
        v5 = this->m_prtyPt.nDefense[1] - v23;
      }
      this->m_prtyPt.nDefense[1] = v5;
      break;
    default:
      return;
  }
}

//----- (0043BE20) --------------------------------------------------------
int __thiscall CChar::GetStr(CChar *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this->m_prtyPt.nPt[0] + this->m_prtyBase.nBase[0];
  return v2 + this->m_prtyPer.nPer[0] * v2 / 100;
}

//----- (0043BE60) --------------------------------------------------------
int __thiscall CChar::GetHth(CChar *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this->m_prtyPt.nPt[1] + this->m_prtyBase.nBase[1];
  return v2 + this->m_prtyPer.nPer[1] * v2 / 100;
}

//----- (0043BEA0) --------------------------------------------------------
int __thiscall CChar::GetInt(CChar *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this->m_prtyPt.nPt[2] + this->m_prtyBase.nBase[2];
  return v2 + this->m_prtyPer.nPer[2] * v2 / 100;
}

//----- (0043BEE0) --------------------------------------------------------
int __thiscall CChar::GetWis(CChar *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this->m_prtyPt.nPt[3] + this->m_prtyBase.nBase[3];
  return v2 + this->m_prtyPer.nPer[3] * v2 / 100;
}

//----- (0043BF20) --------------------------------------------------------
int __thiscall CChar::GetDex(CChar *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this->m_prtyPt.nPt[4] + this->m_prtyBase.nBase[4];
  return v2 + this->m_prtyPer.nPer[4] * v2 / 100;
}

//----- (0043BF60) --------------------------------------------------------
void CMonsterReal::UpdatePrtyPer(CMonsterReal *a1, int nProperty, ...)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // [esp+0h] [ebp-68h]
  int v10; // [esp+4h] [ebp-64h]
  int v11; // [esp+8h] [ebp-60h]
  int v12; // [esp+Ch] [ebp-5Ch]
  unsigned int v13; // [esp+18h] [ebp-50h]
  unsigned int v14; // [esp+1Ch] [ebp-4Ch]
  DWORD v15; // [esp+20h] [ebp-48h]
  int v16; // [esp+34h] [ebp-34h]
  int v17; // [esp+3Ch] [ebp-2Ch]
  int v18; // [esp+44h] [ebp-24h]
  int v19; // [esp+44h] [ebp-24h]
  int v20; // [esp+44h] [ebp-24h]
  int v21; // [esp+48h] [ebp-20h]
  int v22; // [esp+50h] [ebp-18h]
  int v23; // [esp+54h] [ebp-14h]
  int v24; // [esp+54h] [ebp-14h]
  int v25; // [esp+54h] [ebp-14h]
  int v26; // [esp+5Ch] [ebp-Ch]
  int bAdd; // [esp+78h] [ebp+10h]
  int a4; // [esp+7Ch] [ebp+14h]
  int a5; // [esp+80h] [ebp+18h]
  va_list va; // [esp+84h] [ebp+1Ch] BYREF

  va_start(va, nProperty);
  bAdd = va_arg(va, _DWORD);
  a4 = va_arg(va, _DWORD);
  a5 = va_arg(va, _DWORD);
  switch ( nProperty )
  {
    case 0:
      v26 = CChar::GetStr(a1);
      a1->m_prtyPt.nHit -= 15 * v26 / 54;
      a1->m_prtyPt.nMinAttack -= (11 * v26 - 80) / 30;
      a1->m_prtyPt.nMaxAttack -= (8 * v26 - 25) / 15;
      if ( bAdd )
        a1->m_prtyPer.nPer[0] += a4;
      else
        a1->m_prtyPer.nPer[0] -= a4;
      v2 = CChar::GetStr(a1);
      a1->m_prtyPt.nHit += 15 * v2 / 54;
      a1->m_prtyPt.nMinAttack += (11 * v2 - 80) / 30;
      a1->m_prtyPt.nMaxAttack += (8 * v2 - 25) / 15;
      break;
    case 1:
      v23 = CChar::GetHth(a1);
      if ( bAdd )
      {
        a1->m_prtyBase.nBase[5] -= 2 * v23 * v23 / 10 + 115;
        a1->m_prtyPt.nResist[4] -= v23 / 9;
        a1->m_prtyPer.nPer[1] += a4;
        v24 = CChar::GetHth(a1);
        a1->m_prtyBase.nBase[5] += 2 * v24 * v24 / 10 + 115;
        a1->m_prtyPt.nResist[4] += v24 / 9;
        v22 = CChar::GetMaxHP(a1);
        if ( a4 < 0 )
        {
          if ( a1->m_nCurHP >= v22 )
            v12 = v22;
          else
            v12 = a1->m_nCurHP;
          a1->m_nCurHP = v12;
        }
      }
      else
      {
        a1->m_prtyBase.nBase[5] -= 2 * v23 * v23 / 10 + 115;
        a1->m_prtyPt.nResist[4] -= v23 / 9;
        a1->m_prtyPer.nPer[1] -= a4;
        v25 = CChar::GetHth(a1);
        a1->m_prtyBase.nBase[5] += 2 * v25 * v25 / 10 + 115;
        a1->m_prtyPt.nResist[4] += v25 / 9;
        v22 = CChar::GetMaxHP(a1);
        if ( a4 > 0 )
        {
          if ( a1->m_nCurHP >= v22 )
            v11 = v22;
          else
            v11 = a1->m_nCurHP;
          a1->m_nCurHP = v11;
        }
      }
      CChar::WriteInSight(a1, S2C_UPDATEMPROPERTY, "dbd", a1->m_nId, 5, v22);
      break;
    case 2:
      v21 = CChar::GetInt(a1);
      a1->m_prtyPt.nMinMagic -= (7 * v21 - 20) / 12;
      a1->m_prtyPt.nMaxMagic -= 7 * v21 / 12;
      a1->m_prtyPt.nResist[0] -= v21 / 9;
      a1->m_prtyPt.nResist[1] -= v21 / 9;
      a1->m_prtyPt.nResist[2] -= v21 / 9;
      if ( bAdd )
        a1->m_prtyPer.nPer[2] += a4;
      else
        a1->m_prtyPer.nPer[2] -= a4;
      v3 = CChar::GetInt(a1);
      a1->m_prtyPt.nMinMagic += (7 * v3 - 20) / 12;
      a1->m_prtyPt.nMaxMagic += 7 * v3 / 12;
      a1->m_prtyPt.nResist[0] += v3 / 9;
      a1->m_prtyPt.nResist[1] += v3 / 9;
      a1->m_prtyPt.nResist[2] += v3 / 9;
      break;
    case 3:
      v18 = CChar::GetWis(a1);
      if ( bAdd )
      {
        a1->m_prtyBase.nBase[6] -= v18 + 2 * v18 * v18 / 10;
        a1->m_prtyPt.nMinMagic -= v18 / 7;
        a1->m_prtyPt.nMaxMagic -= 14 * v18 / 45;
        a1->m_prtyPt.nResist[3] -= v18 / 9;
        a1->m_prtyPer.nPer[3] += a4;
        v19 = CChar::GetWis(a1);
        a1->m_prtyBase.nBase[6] += v19 + 2 * v19 * v19 / 10;
        a1->m_prtyPt.nMinMagic += v19 / 7;
        a1->m_prtyPt.nMaxMagic += 14 * v19 / 45;
        a1->m_prtyPt.nResist[3] += v19 / 9;
        v17 = CChar::GetMaxMP((CPlayer *)a1);
        if ( a4 < 0 )
        {
          if ( a1->m_nCurMP >= v17 )
            v10 = v17;
          else
            v10 = a1->m_nCurMP;
          a1->m_nCurMP = v10;
        }
      }
      else
      {
        a1->m_prtyBase.nBase[6] -= v18 + 2 * v18 * v18 / 10;
        a1->m_prtyPt.nMinMagic -= v18 / 7;
        a1->m_prtyPt.nMaxMagic -= 14 * v18 / 45;
        a1->m_prtyPt.nResist[3] -= v18 / 9;
        a1->m_prtyPt.nPt[3] -= a4;
        v20 = CChar::GetWis(a1);
        a1->m_prtyBase.nBase[6] += v20 + 2 * v20 * v20 / 10;
        a1->m_prtyPt.nMinMagic += v20 / 7;
        a1->m_prtyPt.nMaxMagic += 14 * v20 / 45;
        a1->m_prtyPt.nResist[3] += v20 / 9;
        v17 = CChar::GetMaxMP((CPlayer *)a1);
        if ( a4 > 0 )
        {
          if ( a1->m_nCurMP >= v17 )
            v9 = v17;
          else
            v9 = a1->m_nCurMP;
          a1->m_nCurMP = v9;
        }
      }
      CChar::WriteInSight(a1, S2C_UPDATEMPROPERTY, "dbw", a1->m_nId, 6, v17);
      break;
    case 4:
      v16 = CChar::GetDex(a1);
      a1->m_prtyPt.nHit -= v16 / 8;
      a1->m_prtyPt.nDodge -= v16 / 3;
      a1->m_prtyPt.nMinAttack -= (v16 - 5) / 11;
      a1->m_prtyPt.nMaxAttack -= 18 * v16 / 77;
      if ( bAdd )
        a1->m_prtyPer.nPer[4] += a4;
      else
        a1->m_prtyPer.nPer[4] -= a4;
      v4 = CChar::GetDex(a1);
      a1->m_prtyPt.nHit += v4 / 8;
      a1->m_prtyPt.nDodge += v4 / 3;
      a1->m_prtyPt.nMinAttack += (v4 - 5) / 11;
      a1->m_prtyPt.nMaxAttack += 18 * v4 / 77;
      break;
    case 9:
      if ( bAdd )
        v6 = a4 + a1->m_prtyPer.nHit;
      else
        v6 = a1->m_prtyPer.nHit - a4;
      a1->m_prtyPer.nHit = v6;
      break;
    case 15:
      if ( bAdd )
      {
        a1->m_prtyPer.nDefense[0] += a4;
        v5 = a5 + a1->m_prtyPer.nDefense[1];
      }
      else
      {
        a1->m_prtyPer.nDefense[0] -= a4;
        v5 = a1->m_prtyPer.nDefense[1] - a5;
      }
      a1->m_prtyPer.nDefense[1] = v5;
      break;
    case 17:
      if ( bAdd )
        v8 = a4 + a1->m_prtyPer.nASpeed;
      else
        v8 = a1->m_prtyPer.nASpeed - a4;
      a1->m_prtyPer.nASpeed = v8;
      break;
    case 32:
      if ( bAdd )
        v7 = a4 + a1->m_prtyPer.nMSpeed;
      else
        v7 = a1->m_prtyPer.nMSpeed - a4;
      a1->m_prtyPer.nMSpeed = v7;
      if ( !a1->m_prtyPer.nMSpeed )
      {
        v15 = GetTickCount();
        v14 = a1->GetMSpeed(a1, 1);
        v13 = a1->m_dwNextMove - v15;
        if ( v13 )
        {
          if ( v13 < v14 )
            a1->m_dwNextMove -= v13 * v14 / v14;
        }
      }
      CChar::WriteInSight(a1, S2C_UPDATEMPROPERTY, "dbw", a1->m_nId, 32, a1->m_prtyPer.nMSpeed);
      break;
    default:
      return;
  }
}

//----- (0043CE00) --------------------------------------------------------
void __thiscall CPlayer::AddMState(CPlayer *this, __int64 nMState)
{
  CChar::AddMState(this, nMState);
  CChar::WriteInSight(this, S2C_MSTATE, "dI", this->m_nId, LODWORD(this->m_nMState), HIDWORD(this->m_nMState));
}

//----- (0043CE50) --------------------------------------------------------
void __thiscall CPlayer::SubMState(CPlayer *this, __int64 nMState)
{
  CChar::SubMState(this, nMState);
  CChar::WriteInSight(this, S2C_MSTATE, "dI", this->m_nId, LODWORD(this->m_nMState), HIDWORD(this->m_nMState));
}

//----- (0043CEA0) --------------------------------------------------------
void __thiscall CMonsterReal::SetProperty(CMonsterReal *pChar, CInitMonster *pInit)
{
  CMonster::SetProperty(pChar, pInit);
  memcpy(&pChar->m_prtyBase, &pInit->m_prtyBase, sizeof(pChar->m_prtyBase));
  memcpy(&pChar->m_prtyPt, &pInit->m_prtyPt, sizeof(pChar->m_prtyPt));
  pChar->m_nRange = pInit->m_nRange;
  memcpy(pChar->m_nSight, pInit->m_nSight, sizeof(pChar->m_nSight));
  pChar->ReviseProperty(pChar);
  CFindPath::Init(&pChar->m_findpath, pChar, pChar->m_pMap, pChar->m_nRange * pChar->m_nRange);
  CMonsterSkill::LoadSkill(&pChar->m_skill, pChar);
}

//----- (0043CF70) --------------------------------------------------------
CSMap *__thiscall CFindPath::Init(CFindPath *this, CMonster *pOwner, CSMap *pMap, int nPowRange)
{
  CSMap *result; // eax

  this->m_pOwner = pOwner;
  result = pMap;
  this->m_pMap = pMap;
  this->m_nPowRange = nPowRange;
  return result;
}

//----- (0043CFA0) --------------------------------------------------------
void __thiscall CMonsterReal::Add(CMonsterReal *this, CChar *pParent)
{
  CMonster::Add((int)this, (int)pParent);
  InterlockedIncrement(&dword_4E1810);
  if ( pParent )
  {
    CIOObject::AddRef((int)pParent);
    this->m_pParent = pParent;
  }
}

//----- (0043CFE0) --------------------------------------------------------
void __thiscall CMonsterReal::Remove(CMonsterReal *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v5; // [esp+8h] [ebp-4h] BYREF

  CMonster::Remove(this);
  InterlockedDecrement(&dword_4E1810);
  CRWLock::ReadLock(&unk_4E187C);
  sub_44AE20(dword_4E1870, &v5, &this->m_nArea);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v5,
         v1) )
  {
    v2 = sub_420250(&v5);
    InterlockedDecrement((volatile LONG *)(*(_DWORD *)(v2 + 4) + 48));
  }
  CRWLock::ReadUnlock(&unk_4E187C);
}
// 4E1870: using guessed type int dword_4E1870[3];

//----- (0043D060) --------------------------------------------------------
void __thiscall CMonsterReal::AI(CMonsterReal *this)
{
  if ( !CNPC::IsRemoved((CNPC *)this) && !CChar::IsGState(this, 1) )
  {
    CChar::Lock(this);
    if ( this->m_pTarget && !CChar::IsNormal(this->m_pTarget) )
    {
      this->RemoveHostility(this, this->m_pTarget);
      this->SetTarget(this, 0);
    }
    switch ( this->m_nAIState )
    {
      case 1:
      case 2:
      case 3:
      case 7:
        this->Move(this);
        break;
      case 4:
        this->Attack(this);
        break;
      default:
        break;
    }
    CChar::Unlock(this);
  }
}

//----- (0043D140) --------------------------------------------------------
void __thiscall CMonsterReal::Tick(CMonsterReal *this)
{
  int v2; // [esp+4h] [ebp-8h]
  unsigned int v3; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    v3 = GetTickCount();
    if ( CChar::IsGState(this, 1) && v3 >= this->m_dwNextAction )
    {
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CChar::Unlock(this);
      CBase::Delete(this);
    }
    else
    {
      v2 = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < v2 && v3 >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, v2);
        CMonsterReal::ResetHostility(this);
      }
      CChar::Unlock(this);
    }
  }
}

//----- (0043D210) --------------------------------------------------------
void __thiscall CMonsterReal::AddHostility(CMonsterReal *this, CChar *pChar, int nHostility, signed int nHostPer)
{
  int v4; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v5; // eax
  _DWORD *v6; // [esp+0h] [ebp-34h]
  signed int v7; // [esp+4h] [ebp-30h]
  char v9[8]; // [esp+14h] [ebp-20h] BYREF
  char v10[4]; // [esp+1Ch] [ebp-18h] BYREF
  char v11[8]; // [esp+20h] [ebp-14h] BYREF
  CChar *v12; // [esp+28h] [ebp-Ch] BYREF
  int v13; // [esp+2Ch] [ebp-8h]
  char v14[4]; // [esp+30h] [ebp-4h] BYREF

  if ( pChar->IsPlayer(pChar) )
  {
    v12 = pChar;
    if ( CChar::IsMState(pChar, 0x4000i64) )
      nHostPer += v12->m_prtyPer.nHost;
    if ( nHostPer )
    {
      if ( nHostPer <= -100 )
        v7 = -100;
      else
        v7 = nHostPer;
      nHostility += v7 * nHostility / 100;
    }
    CIOCriticalSection::Enter(&this->m_lockHostility.m_critical_section);
    this->m_nAllHostility += nHostility;
    sub_446130(&this->m_mapHostility, v14, (int)&v12);
    v4 = sub_430C20(&this->m_mapHostility, (int)v10);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      CIOObject::AddRef((int)v12);
      std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v9);
      sub_48D6D0(
        (int *)&this->m_mapHostility,
        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v11,
        v5);
      if ( !v11[4] )
        CIOObject::Release(v12);
      v13 = nHostility;
    }
    else
    {
      v6 = (_DWORD *)(sub_420250(v14) + 4);
      *v6 += nHostility;
      v13 = *(_DWORD *)(sub_420250(v14) + 4);
    }
    CIOCriticalSection::Leave((int)&this->m_lockHostility);
    if ( this->m_pTarget )
    {
      if ( this->m_pTarget == pChar )
      {
        this->m_nMaxHostility = v13;
      }
      else if ( this->m_nMaxHostility < v13 )
      {
        CIOObject::AddRef(pChar, &pChar->m_nTargetRef);
        this->SetTarget(this, pChar);
        this->m_nMaxHostility = v13;
      }
    }
    else
    {
      CIOObject::AddRef(pChar, &pChar->m_nTargetRef);
      this->SetTarget(this, pChar);
      this->m_nMaxHostility = v13;
    }
  }
}
// 43D310: variable 'v5' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0043D410) --------------------------------------------------------
void __thiscall CMonsterReal::RemoveHostility(CMonsterReal *this, CChar *pChar)
{
  CPlayer *pPlayer; // [esp+4h] [ebp-4h] BYREF

  pPlayer = (CPlayer *)pChar;
  CIOCriticalSection::Enter(&this->m_lockHostility.m_critical_section);
  if ( sub_445CD0(
         (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&this->m_mapHostility,
         (const int *)&pPlayer) )
  {
    if ( pPlayer == this->m_pTarget )
      this->m_nMaxHostility = 0;
    CIOObject::Release(pPlayer);
  }
  CIOCriticalSection::Leave((int)&this->m_lockHostility);
}

//----- (0043D480) --------------------------------------------------------
int __thiscall CMonsterReal::GetMSpeed(CMonsterReal *this, int nMoveType)
{
  int v3; // [esp+0h] [ebp-Ch]
  int nMSpeed; // [esp+8h] [ebp-4h]

  nMSpeed = this->m_pInit->m_nMSpeed[nMoveType];
  if ( !this->m_prtyPer.nMSpeed )
    return this->m_pInit->m_nMSpeed[nMoveType];
  if ( this->m_prtyPer.nMSpeed <= 0 )
    v3 = nMSpeed * (abs(this->m_prtyPer.nMSpeed) + 100) / 100;
  else
    v3 = 100 * nMSpeed / (this->m_prtyPer.nMSpeed + 100);
  return v3;
}

//----- (0043D510) --------------------------------------------------------
void __thiscall CMonsterReal::Attack(CMonsterReal *this)
{
  int v1; // [esp-14h] [ebp-6Ch]
  int v2; // [esp-10h] [ebp-68h]
  int v3; // [esp-Ch] [ebp-64h]
  int v4; // [esp-8h] [ebp-60h]
  int v5; // [esp-4h] [ebp-5Ch]
  int a3; // [esp+0h] [ebp-58h]
  int v8; // [esp+30h] [ebp-28h] BYREF
  int v9; // [esp+34h] [ebp-24h] BYREF
  CIOObject *v10; // [esp+38h] [ebp-20h]
  int v11; // [esp+3Ch] [ebp-1Ch] BYREF
  int v12; // [esp+40h] [ebp-18h]
  int v13; // [esp+44h] [ebp-14h]
  __int64 v14; // [esp+48h] [ebp-10h]
  unsigned int v15; // [esp+54h] [ebp-4h]

  if ( !CChar::IsMState(this, 268435712i64) )
  {
    v15 = GetTickCount();
    if ( v15 >= this->m_dwNextAction )
    {
      v14 = PowDistance64(&this->m_ptPixel, &this->m_pTarget->m_ptPixel);
      if ( this->m_nMap == this->m_pTarget->m_nMap && v14 <= this->m_nSight[1] * this->m_nSight[1] )
      {
        if ( v14 <= this->m_nRange * this->m_nRange )
        {
          if ( this->m_pTarget == this->m_pParent )
          {
            this->RemoveHostility(this, this->m_pTarget);
            this->SetTarget(this, 0);
            this->m_nAIState = 1;
          }
          else
          {
            this->m_dwNextAction = v15 + CChar::GetASpeed(this);
            this->m_dwNextMove = this->m_dwNextAction;
            CChar::SetDirection(
              this,
              this->m_pTarget->m_ptPixel.x - this->m_ptPixel.x,
              this->m_pTarget->m_ptPixel.y - this->m_ptPixel.y);
            v11 = 0;
            v8 = 0;
            v13 = 0;
            v12 = 0;
            v10 = this->m_pTarget;
            CIOObject::AddRef(v10, (volatile int *)&v10[22]);
            v9 = this->GetPalsyDamage(this, (CChar *)v10);
            v12 = ((int (__thiscall *)(CIOObject *, CMonsterReal *))v10->__vftable[6].OnFree)(v10, this);
            if ( !v12 && ((int (__thiscall *)(CIOObject *))v10->__vftable[2].OnTimerCallback)(v10) )
            {
              a3 = CChar::IsBState((CChar *)v10, 0x8000i64) ? -5 : 0;
              if ( CChar::CheckHit(this, (CChar *)v10, a3) )
              {
                CChar::Unlock(this);
                v1 = CChar::GetAttack(this);
                v13 = ((int (__thiscall *)(CIOObject *, CMonsterReal *, int, int *, int *, int *, _DWORD))v10->__vftable[3].~CIOObject)(
                        v10,
                        this,
                        v1,
                        &v11,
                        &v8,
                        &v9,
                        0);
                CChar::Lock(this);
              }
            }
            if ( !v13 )
              v10->__vftable[3].OnTimer(v10, (int)this);
            v5 = v13 | (2 * v8) | (4 * v12);
            v4 = v9;
            v3 = v11;
            v2 = CBase::Id((CBase *)v10);
            CChar::WriteInSight(this, S2C_ATTACK, "ddwwb", this->m_nId, v2, v3, v4, v5);
            CIOObject::Release(v10, (volatile int *)&v10[22]);
          }
        }
        else if ( !CChar::IsMState(this, 512i64) )
        {
          this->m_bRefindPath = 1;
          this->m_nAIState = 2;
        }
      }
      else
      {
        this->RemoveHostility(this, this->m_pTarget);
        this->SetTarget(this, 0);
      }
    }
  }
}

//----- (0043D870) --------------------------------------------------------
__int64 __cdecl PowDistance64(const tagPOINT *ptP1, const tagPOINT *ptP2)
{
  __int64 dy; // [esp-10h] [ebp-28h]

  dy = ptP1->y - ptP2->y;
  return dy * dy + (ptP1->x - ptP2->x) * (__int64)(ptP1->x - ptP2->x);
}

//----- (0043D8E0) --------------------------------------------------------
int __thiscall CChar::GetASpeed(CChar *this)
{
  int v2; // [esp+0h] [ebp-Ch]
  int nASpeed; // [esp+8h] [ebp-4h]

  nASpeed = this->m_prtyPt.nASpeed;
  if ( !nASpeed )
    return 0x7FFFFFFF;
  if ( !this->m_prtyPer.nASpeed )
    return this->m_prtyPt.nASpeed;
  if ( this->m_prtyPer.nASpeed <= 0 )
    v2 = nASpeed * (abs(this->m_prtyPer.nASpeed) + 100) / 100;
  else
    v2 = 100 * nASpeed / (this->m_prtyPer.nASpeed + 100);
  return v2;
}

//----- (0043D970) --------------------------------------------------------
int __thiscall CChar::GetAttack(CChar *this)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-Ch]

  v3 = CChar::GetMaxAttack(this);
  v1 = CChar::GetMinAttack(this);
  return Random(v1, v3);
}

//----- (0043D9A0) --------------------------------------------------------
int __thiscall CChar::GetMinAttack(CChar *this)
{
  return this->m_prtyPt.nMinAttack + this->m_prtyPer.nMinAttack * this->m_prtyPt.nMinAttack / 100;
}

//----- (0043D9D0) --------------------------------------------------------
int __thiscall CChar::GetMaxAttack(CChar *this)
{
  return this->m_prtyPt.nMaxAttack + this->m_prtyPer.nMaxAttack * this->m_prtyPt.nMaxAttack / 100;
}

//----- (0043DA00) --------------------------------------------------------
BOOL __thiscall CChar::CheckHit(CChar *this, CChar *pTarget, int nAddHit)
{
  int v4; // esi
  int v5; // [esp+4h] [ebp-30h]
  int pPoint; // [esp+18h] [ebp-1Ch]
  int nHitRate; // [esp+28h] [ebp-Ch]
  int nDiffLevel; // [esp+2Ch] [ebp-8h]

  if ( CChar::IsMState(this, 0x2000000i64) )
    return 1;
  nDiffLevel = this->m_nLevel - pTarget->m_nLevel;
  if ( nDiffLevel < 0 )
    pPoint = -dword_4D8130[abs(nDiffLevel)];    // Max Level 102.. (check array sizes) -HighGamer
  else
    pPoint = dword_4D8130[nDiffLevel];          // Max Level 102.. (check array sizes) -HighGamer
  v4 = CChar::GetHit(this);
  nHitRate = nAddHit + pPoint + v4 - CChar::GetDodge(pTarget);
  if ( pTarget->IsMonster(pTarget) )
  {
    if ( CChar::IsBState(this, 0x4000i64) )
    {
      nHitRate += 10;
    }
    else if ( CChar::IsBState(this, 0x20000000i64) )
    {
      nHitRate += 5;
    }
  }
  if ( nHitRate <= 41 )
  {
    if ( nHitRate < -41 )
      nHitRate = -41;
  }
  else
  {
    nHitRate = 41;
  }
  if ( nHitRate < 0 )
    v5 = 100 - dword_4D82C8[abs(nHitRate)];
  else
    v5 = dword_4D82C8[nHitRate];
  return v5 >= Random(1, 100);
}

//----- (0043DB60) --------------------------------------------------------
int __thiscall CChar::GetHit(CChar *this)
{
  return this->m_prtyPt.nHit + this->m_prtyPer.nHit * this->m_prtyPt.nHit / 100;
}

//----- (0043DB90) --------------------------------------------------------
int __thiscall CChar::GetDodge(CChar *this)
{
  return this->m_prtyPt.nDodge + this->m_prtyPer.nDodge * this->m_prtyPt.nDodge / 100;
}

//----- (0043DBC0) --------------------------------------------------------
signed int __thiscall CMonsterReal::Move(CMonsterReal *this)
{
  signed int dwCurTick; // eax
  unsigned int v2; // [esp+8h] [ebp-64h]
  unsigned int v3; // [esp+18h] [ebp-54h]
  int v4; // [esp+1Ch] [ebp-50h]
  __int64 v5; // [esp+20h] [ebp-4Ch]
  tagPOINT ptDP; // [esp+2Ch] [ebp-40h] BYREF
  __int64 v8; // [esp+34h] [ebp-38h]
  __int64 dwReviseTick; // [esp+40h] [ebp-2Ch] BYREF
  int _dy; // [esp+48h] [ebp-24h]
  __int64 v11; // [esp+4Ch] [ebp-20h]
  __int64 a3; // [esp+58h] [ebp-14h] BYREF
  tagPOINT a2; // [esp+60h] [ebp-Ch] BYREF
  unsigned int v14; // [esp+68h] [ebp-4h]

  v5 = CChar::IsMState(this, 0x10000300i64);
  dwCurTick = HIDWORD(v5) | v5;
  if ( !v5 )
  {
    dwCurTick = GetTickCount();
    v14 = dwCurTick;
    v4 = this->m_nAIState;
    switch ( v4 )
    {
      case 1:
        dwCurTick = (signed int)this;
        if ( v14 >= this->m_dwNextMove )
        {
          if ( CMonsterReal::GetRandomPt(this, &a2)
            && (++this->m_nRoam,
                this->m_bRest = (this->m_nRoam & 3) == 0,
                CSMap::MoveMonster(this->m_pMap, this, a2.x, a2.y, this->m_bRest, 0)) )
          {
            if ( this->m_bRest )
              v3 = 20000;
            else
              v3 = this->GetMSpeed(this, 0);
            this->m_dwNextMove = v3 + v14;
            dwCurTick = (signed int)this;
            if ( this->m_bRest )
            {
              if ( this->m_bAggressive )
              {
                dwCurTick = (signed int)CMonsterReal::ScanSight(this);
                HIDWORD(a3) = dwCurTick;
                if ( dwCurTick )
                {
                  this->m_bRest = 0;
                  dwCurTick = ((int (__thiscall *)(CMonsterReal *, _DWORD))this->SetTarget)(this, HIDWORD(a3));
                }
              }
            }
          }
          else
          {
            this->m_bRest = 0;
            dwCurTick = (signed int)this;
            --this->m_nRoam;
          }
        }
        break;
      case 2:
        if ( !dword_4E1A64 )
        {
          dwCurTick = v14;
          dword_4E1A64 = v14;
        }
        if ( v14 >= this->m_dwNextMove )
        {
          v11 = PowDistance64(&this->m_ptPixel, &this->m_pTarget->m_ptPixel);
          if ( this->m_nMap == this->m_pTarget->m_nMap && v11 <= this->m_nSight[1] * this->m_nSight[1] )
          {
            dwCurTick = this->m_nRange * this->m_nRange;
            v2 = dwCurTick;
            if ( SHIDWORD(v11) > dwCurTick >> 31
              || SHIDWORD(v11) >= dwCurTick >> 31 && (dwCurTick = v11, (unsigned int)v11 > v2) )
            {
              LODWORD(a3) = this->GetMSpeed(this, 1);
              if ( CMonsterReal::GetChasePt(this, (tagPOINT *)((char *)&dwReviseTick + 4), &a3)
                && CSMap::MoveMonster(this->m_pMap, this, SHIDWORD(dwReviseTick), _dy, 0, 1) )
              {
                this->m_dwNextMove = a3 + v14;
                dwCurTick = (signed int)this;
                this->m_dwNextAction = this->m_dwNextMove;
              }
              else
              {
                CSMap::MoveMonster(this->m_pMap, this, 0, 0, 1, 0);
                this->RemoveHostility(this, this->m_pTarget);
                dwCurTick = ((int (__thiscall *)(CMonsterReal *, _DWORD))this->SetTarget)(this, 0);
              }
            }
            else
            {
              this->m_nAIState = 4;
              dword_4E1A64 = 0;
            }
          }
          else
          {
            this->RemoveHostility(this, this->m_pTarget);
            dwCurTick = ((int (__thiscall *)(CMonsterReal *, _DWORD))this->SetTarget)(this, 0);
            dword_4E1A64 = 0;
          }
        }
        break;
      case 7:
        if ( this->m_nIndex == 290 )
        {
          if ( v14 >= this->m_dwNextMove )
          {
            v8 = PowDistance64(&this->m_ptPixel, &this->m_pParent->m_ptPixel);
            if ( v8 > this->m_nRange * this->m_nRange )
            {
              this->SetTarget(this, this->m_pParent);
              LODWORD(dwReviseTick) = this->GetMSpeed(this, 1);
              if ( !CMonsterReal::GetChasePt(this, &ptDP, &dwReviseTick)
                || (dwCurTick = CSMap::MoveMonster(this->m_pMap, this, ptDP.x, ptDP.y, 0, 1)) == 0 )
              {
                this->RemoveHostility(this, this->m_pTarget);
                this->SetTarget(this, 0);
                dwCurTick = (signed int)this;
                this->m_nAIState = 1;
              }
            }
            else
            {
              this->RemoveHostility(this, this->m_pTarget);
              this->SetTarget(this, 0);
              dwCurTick = (signed int)this;
              this->m_nAIState = 1;
            }
          }
        }
        else
        {
          dwCurTick = (signed int)this;
          this->m_nAIState = 1;
        }
        break;
    }
  }
  return dwCurTick;
}
// 4E1A64: using guessed type int dword_4E1A64;

//----- (0043E070) --------------------------------------------------------
int __thiscall CMonsterReal::GetRandomPt(CMonsterReal *this, tagPOINT *ptDP)
{
  int v2; // ecx
  int result; // eax
  __int64 v4; // [esp-4h] [ebp-28h]
  int v5; // [esp+4h] [ebp-20h]
  int v6; // [esp+8h] [ebp-1Ch]
  int v8; // [esp+10h] [ebp-14h]
  int v9; // [esp+18h] [ebp-Ch]
  int v10; // [esp+1Ch] [ebp-8h]
  int v11; // [esp+20h] [ebp-4h]

  v10 = Random(0, 64) - 32;
  v11 = Random(0, 64) - 32;
  if ( !v10 && !v11 )
    goto LABEL_17;
  v8 = abs(v10);
  v9 = abs(v11);
  v6 = v8 < v9 ? 32 * v8 / v9 : 32 * v9 / v8;
  if ( v8 >= v9 )
  {
    v2 = dword_4D6E64[2 * v6];
    ptDP->x = dword_4D6E60[2 * v6];
    ptDP->y = v2;
  }
  else
  {
    ptDP->x = dword_4D6E64[2 * v6];
    ptDP->y = dword_4D6E60[2 * v6];
  }
  v5 = v10 < 0 ? -ptDP->x : ptDP->x;
  ptDP->x = v5;
  HIDWORD(v4) = v11 < 0 ? -ptDP->y : ptDP->y;
  ptDP->y = HIDWORD(v4);
  LODWORD(v4) = 0x20000;
  if ( CSMap::IsMoveTile(this->m_pMap, this, &this->m_ptPixel, ptDP->x, ptDP->y, v4) )
    result = 1;
  else
LABEL_17:
    result = 0;
  return result;
}
// 4D6E60: using guessed type int dword_4D6E60[];

//----- (0043E1C0) --------------------------------------------------------
int __thiscall CSMap::IsMoveTile(CSMap *this, void *pSelf, const tagPOINT *ptPS, int dx_, int dy_, __int64 dwAttr)
{
  CCellMap *v7; // eax
  __int64 v8; // [esp-8h] [ebp-3Ch]
  int v9; // [esp+0h] [ebp-34h]
  int v10; // [esp+4h] [ebp-30h]
  int v11; // [esp+8h] [ebp-2Ch]
  tagPOINT ptT; // [esp+10h] [ebp-24h] BYREF
  int i; // [esp+18h] [ebp-1Ch]
  int absdx; // [esp+1Ch] [ebp-18h]
  int v16; // [esp+20h] [ebp-14h]
  int v17; // [esp+24h] [ebp-10h]
  int v18; // [esp+28h] [ebp-Ch]
  BOOL v19; // [esp+2Ch] [ebp-8h]
  int absdy; // [esp+30h] [ebp-4h]

  absdx = abs(dx_);
  absdy = abs(dy_);
  if ( absdx < absdy )
    v11 = absdy;
  else
    v11 = absdx;
  v18 = v11;
  v19 = 1;
  for ( i = 8; v19 && i <= 32; i += 8 )
  {
    v19 = i < v18;
    if ( i >= v18 )
      v10 = dx_;
    else
      v10 = dx_ * i / v18;
    v16 = v10 + ptPS->x;
    if ( v19 )
      v9 = dy_ * i / v18;
    else
      v9 = dy_;
    v17 = v9 + ptPS->y;
    ptT.x = v16 >> 5;
    ptT.y = v17 >> 5;
    if ( v16 >> 5 < 0 || ptT.x >> 8 >= 64 || ptT.y < 0 || ptT.y >> 8 >= 64 )
      return 0;
    HIDWORD(v8) = ((v16 >> 3) & 3) + 4 * ((v17 >> 3) & 3);
    LODWORD(v8) = dwAttr;
    v7 = CSMap::_GetCellMap(this, &ptT);
    if ( !CCellMap::IsMoveTile(v7, pSelf, &ptT, v8) )
      return 0;
  }
  return 1;
}

//----- (0043E320) --------------------------------------------------------
int __thiscall CCellMap::IsMoveTile(CCellMap *this, void *pSelf, tagPOINT *const ptT, __int64 dwAttr)
{
  CRWLock *v6; // [esp+4h] [ebp-14h]
  tagPOINT a2a; // [esp+8h] [ebp-10h] BYREF
  CTile *v8; // [esp+10h] [ebp-8h]
  char v9[4]; // [esp+14h] [ebp-4h]

  if ( !this )
    return 0;
  a2a.x = (unsigned __int8)ptT->x;
  a2a.y = (unsigned __int8)ptT->y;
  v8 = CCellMap::GetTile(this, &a2a);
  if ( (v8->m_dwAttr & ((unsigned int)dwAttr | (1 << SBYTE4(dwAttr)))) != 0 )
    return 0;
  v6 = CCellMap::GetLock(this, &a2a);
  CRWLock::ReadLock(v6);
  for ( *(_DWORD *)v9 = v8->m_pHead; *(_DWORD *)v9; *(_DWORD *)v9 = CBase::Next(*(CBase **)v9) )
  {
    if ( *(_DWORD *)(*(_DWORD *)v9 + 16) == -6 )
    {
      v8->m_pHead = 0;
      ELOG("CSellMap::IsMoveTile %p %p\n", v9[0], **(_DWORD **)v9);
      EBREAK();
      return 0;
    }
    if ( pSelf != *(void **)v9
      && (*(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)v9 + 56))(*(_DWORD *)v9, HIDWORD(dwAttr)) )
    {
      CRWLock::ReadUnlock(v6);
      return 0;
    }
  }
  CRWLock::ReadUnlock(v6);
  return 1;
}

//----- (0043E440) --------------------------------------------------------
CRWLock *__thiscall CCellMap::GetLock(CCellMap *this, const tagPOINT *_ptT)
{
  return &this->m_pLock[16 * (_ptT->y >> 4) + (_ptT->x >> 4)];
}

//----- (0043E470) --------------------------------------------------------
int __thiscall CMonsterReal::GetChasePt(CMonsterReal *this, tagPOINT *ptDP, __int64 *dwReviseTick)
{
  int v3; // eax
  tagPOINT *v5; // eax
  tagPOINT *v6; // eax
  __int64 v7; // [esp-4h] [ebp-3Ch]
  int v8; // [esp+4h] [ebp-34h]
  int v9; // [esp+8h] [ebp-30h]
  int v10; // [esp+Ch] [ebp-2Ch]
  int v12; // [esp+1Ch] [ebp-1Ch]
  int v13; // [esp+20h] [ebp-18h]
  int v14; // [esp+24h] [ebp-14h]
  int v15; // [esp+28h] [ebp-10h]
  int v16; // [esp+30h] [ebp-8h]
  int v17; // [esp+34h] [ebp-4h]

  if ( this->m_bRefindPath )
  {
    CFindPath::FreeNode(&this->m_findpath);
    this->m_bRefindPath = 0;
  }
  if ( !CFindPath::IsGoal(&this->m_findpath) )
  {
    if ( CFindPath::SetNextPath(&this->m_findpath) )
    {
      v6 = CFindPath::GetPixel(&this->m_findpath);
      ptDP->x = v6->x - this->m_ptPixel.x;
      ptDP->y = v6->y - this->m_ptPixel.y;
      if ( ptDP->x && ptDP->y )
        *(_DWORD *)dwReviseTick = 14 * *(_DWORD *)dwReviseTick / 0xAu;
      return 1;
    }
    CFindPath::FreeNode(&this->m_findpath);
  }
  v14 = *(_DWORD *)dwReviseTick;
  v15 = this->m_nRange + 32;
  v12 = this->m_pTarget->m_ptPixel.x - this->m_ptPixel.x;
  v13 = abs(v12);
  v16 = this->m_pTarget->m_ptPixel.y - this->m_ptPixel.y;
  v17 = abs(v16);
  if ( v13 < v17 )
    v10 = 32 * v13 / v17;
  else
    v10 = 32 * v17 / v13;
  if ( v16 * v16 + v12 * v12 <= v15 * v15 )
  {
    if ( v13 >= v17 )
    {
      ptDP->x = v13 - this->m_nRange * dword_4D6E60[2 * v10] / 32;
      ptDP->y = v17 - this->m_nRange * dword_4D6E64[2 * v10] / 32;
      *(_DWORD *)dwReviseTick = ptDP->x * v14 / (unsigned int)dword_4D6E60[2 * v10];
    }
    else
    {
      ptDP->x = v13 - this->m_nRange * dword_4D6E64[2 * v10] / 32;
      ptDP->y = v17 - this->m_nRange * dword_4D6E60[2 * v10] / 32;
      *(_DWORD *)dwReviseTick = ptDP->y * v14 / (unsigned int)dword_4D6E60[2 * v10];
    }
  }
  else if ( v13 >= v17 )
  {
    v3 = dword_4D6E64[2 * v10];
    ptDP->x = dword_4D6E60[2 * v10];
    ptDP->y = v3;
  }
  else
  {
    ptDP->x = dword_4D6E64[2 * v10];
    ptDP->y = dword_4D6E60[2 * v10];
  }
  if ( v12 < 0 )
    v9 = -ptDP->x;
  else
    v9 = ptDP->x;
  ptDP->x = v9;
  if ( v16 < 0 )
    v8 = -ptDP->y;
  else
    v8 = ptDP->y;
  ptDP->y = v8;
  LODWORD(v7) = 0x20000;
  if ( !CSMap::IsMoveTile(this->m_pMap, this, &this->m_ptPixel, ptDP->x, ptDP->y, v7) )
  {
    if ( !CFindPath::FindPath(&this->m_findpath, &this->m_ptPixel, &this->m_pTarget->m_ptPixel) )
      return 0;
    v5 = CFindPath::GetPixel(&this->m_findpath);
    ptDP->x = v5->x - this->m_ptPixel.x;
    ptDP->y = v5->y - this->m_ptPixel.y;
    if ( ptDP->x )
    {
      if ( ptDP->y )
        *(_DWORD *)dwReviseTick = 14 * v14 / 0xAu;
    }
  }
  return 1;
}
// 43E6FF: variable 'v7' is possibly undefined
// 4D6E60: using guessed type int dword_4D6E60[];

//----- (0043E840) --------------------------------------------------------
BOOL __thiscall CFindPath::IsGoal(CFindPath *this)
{
  return this->m_pCurrent == &stru_4E0908;
}

//----- (0043E860) --------------------------------------------------------
tagPOINT *__thiscall CFindPath::GetPixel(CFindPath *this)
{
  return &this->m_pCurrent->ptPixel;
}

//----- (0043E880) --------------------------------------------------------
int __thiscall CFindPath::SetNextPath(CFindPath *this)
{
  this->m_pCurrent = this->m_pCurrent->pParent;
  if ( this->m_pCurrent )
    return 1;
  this->m_pCurrent = &stru_4E0908;
  return 0;
}

//----- (0043E8C0) --------------------------------------------------------
CPlayer *__thiscall CMonsterReal::ScanSight(CMonsterReal *this)
{
  return CSMap::GetClosestPlayerInRect(this->m_pMap, &this->m_ptTile, this->m_nSight[0] >> 5);
}

//----- (0043E8F0) --------------------------------------------------------
void __thiscall CMonsterReal::ManageBuff(CMonsterReal *this)
{
  if ( CChar::IsMState(this, 0x200i64) )
    CChar::CancelBuff(this, 8);
  if ( CChar::IsMState(this, 0x10000000i64) )
    CChar::CancelBuff(this, 26);
}

//----- (0043E950) --------------------------------------------------------
int __thiscall CMonsterReal::ApplyDamage(CMonsterReal *this, CChar *pChar, int nAttack, int nDamage, int *nNetDamage, int *BFatal, int *nPalsyDamage, CSkill *pSkill)
{
  int result; // eax
  int v9; // [esp+0h] [ebp-1Ch]
  int v10; // [esp+4h] [ebp-18h]
  int v11; // [esp+10h] [ebp-Ch]

  if ( CChar::IsNormal(this) )
  {
    if ( pSkill )
      v11 = pSkill->GetFatalRate(pSkill);
    else
      v11 = 0;
    if ( CChar::IsMState(this, 0x1000000i64) )
      *nNetDamage = nAttack;
    else
      *nNetDamage = nDamage + CChar::GetFatalDamage(pChar, nDamage, BFatal, v11);
    if ( *nNetDamage >= this->m_nCurHP )
      v10 = this->m_nCurHP;
    else
      v10 = *nNetDamage;
    *nNetDamage = v10;
    this->m_nCurHP -= *nNetDamage;
    if ( *nPalsyDamage )
    {
      if ( this->m_nCurHP <= 0 )
      {
        *nPalsyDamage = 0;
      }
      else
      {
        if ( *nPalsyDamage >= this->m_nCurHP )
          v9 = this->m_nCurHP;
        else
          v9 = *nPalsyDamage;
        *nPalsyDamage = v9;
        this->m_nCurHP -= *nPalsyDamage;
      }
    }
    CMonsterReal::AfterDamage(this, pChar, nDamage, *nPalsyDamage + *nNetDamage);
    result = 1;
  }
  else
  {
    *nPalsyDamage = 0;
    *nNetDamage = 0;
    result = 0;
  }
  return result;
}

//----- (0043EAC0) --------------------------------------------------------
int __thiscall CChar::GetFatalDamage(CChar *this, int nDamage, _DWORD *bFatal, int nAddFatal)
{
  int v4; // esi

  v4 = nAddFatal + this->m_prtyPer.nFatal;
  if ( v4 < Random(1, 100) && !CChar::IsMState(this, 0x8000000i64) )
    return 0;
  *bFatal = 1;
  return nDamage * (2 * this->m_prtyPt.nFatal + 50) / 100;
}

//----- (0043EB40) --------------------------------------------------------
int __thiscall CMonsterReal::AfterDamage(CMonsterReal *this, CChar *pChar, int nDamage, int nTotalDamage)
{
  __int64 v4; // rax

  CChar::SetReverseDirection(this, pChar->m_nDir);
  this->m_dwResetHP = GetTickCount() + 20000;
  this->m_bRest = 0;
  if ( !CChar::IsGState(pChar, 512) && GetColorLevel(this->m_nLevel, pChar->m_nLevel) >= 3 )
    pChar->UpdateProperty(pChar, 35, 1, nTotalDamage / 10);
  v4 = CChar::IsBState(pChar, 0x20000i64);
  if ( v4 )
  {
    LODWORD(v4) = Random(1, 100);
    if ( (int)v4 <= 10 )
    {
      CChar::UpdateBuff(pChar, 59);
      LODWORD(v4) = ((int (__cdecl *)(CChar *, int, int, int))pChar->UpdateProperty)(pChar, 7, 1, nDamage);
    }
  }
  return v4;
}

//----- (0043EC20) --------------------------------------------------------
void __thiscall CMonsterReal::AllotTransformExp(CMonsterReal *this, int bParty, int nKeyID)
{
  CIOObject *v4; // [esp+4h] [ebp-8h]
  CIOObject *v5; // [esp+8h] [ebp-4h]

  if ( bParty )
  {
    v5 = (CIOObject *)sub_44D4E0(nKeyID);
    if ( v5 )
    {
      CParty::AllotTransformExp(v5, this->m_nLevel, &this->m_ptPixel.x);
      CIOObject::Release(v5);
    }
  }
  else
  {
    v4 = CPlayer::FindPlayer(nKeyID);
    if ( v4 )
    {
      if ( GetColorLevel(this->m_nLevel, v4[3].m_nGeneralRef) >= 3 )
        ((void (__thiscall *)(CIOObject *, _DWORD))v4->__vftable[7].OnIOCallback)(v4, 0);
      CIOObject::Release(v4, (volatile int *)&v4[22]);
    }
  }
}

//----- (0043ECC0) --------------------------------------------------------
int __thiscall CMonsterReal::AllotExp(CMonsterReal *this, _DWORD *bParty, int *nKeyID, int *nBestID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v6; // eax
  unsigned __int64 v7; // rax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  float v10; // [esp+0h] [ebp-B0h]
  int v11; // [esp+2Ch] [ebp-84h]
  int v12; // [esp+30h] [ebp-80h]
  float v13; // [esp+34h] [ebp-7Ch]
  _DWORD *v14; // [esp+38h] [ebp-78h]
  char v16[4]; // [esp+40h] [ebp-70h] BYREF
  char v17[4]; // [esp+44h] [ebp-6Ch] BYREF
  char v18[8]; // [esp+48h] [ebp-68h] BYREF
  char v19[8]; // [esp+50h] [ebp-60h] BYREF
  char v20[4]; // [esp+58h] [ebp-58h] BYREF
  char v21[4]; // [esp+5Ch] [ebp-54h] BYREF
  char v22[4]; // [esp+60h] [ebp-50h] BYREF
  int a5; // [esp+64h] [ebp-4Ch] BYREF
  int a1; // [esp+68h] [ebp-48h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v25; // [esp+6Ch] [ebp-44h] BYREF
  int v26; // [esp+70h] [ebp-40h]
  int v27; // [esp+74h] [ebp-3Ch]
  int v28; // [esp+78h] [ebp-38h]
  char v29[4]; // [esp+7Ch] [ebp-34h] BYREF
  int v30; // [esp+80h] [ebp-30h]
  CChar *v31; // [esp+84h] [ebp-2Ch]
  int v32; // [esp+88h] [ebp-28h]
  CIOObject *v33; // [esp+8Ch] [ebp-24h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v34; // [esp+90h] [ebp-20h] BYREF
  _DWORD v35[3]; // [esp+94h] [ebp-1Ch] BYREF
  int v36; // [esp+A0h] [ebp-10h]
  int v37; // [esp+A4h] [ebp-Ch]
  int v38; // [esp+A8h] [ebp-8h]
  int v39; // [esp+ACh] [ebp-4h]

  v39 = 0;
  v38 = 0;
  v37 = this->m_pInit->m_nExp;
  v36 = 0;
  sub_4460C0(v35);
  CIOCriticalSection::Enter(&this->m_lockHostility.m_critical_section);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapHostility,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v34);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapHostility, (int)v21);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v34,
            v4) )
      break;
    v32 = 0;
    v31 = *(CChar **)sub_420250(&v34);
    v33 = 0;
    v30 = v31[2].m_prtyPt.nMinMagic;
    if ( v30 )
      v33 = (CIOObject *)sub_44D4E0(v30);
    if ( v33 )
    {
      v28 = *(_DWORD *)(sub_420250(&v34) + 4);
      sub_446130(v35, v29, (int)&v33);
      v5 = sub_430C20(v35, (int)v20);
      if ( (unsigned __int8)unknown_libname_8(v5) )
      {
        CIOObject::AddRef((int)v33);
        std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v19);
        sub_48D6D0(
          v35,
          (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v18,
          v6);
      }
      else
      {
        v14 = (_DWORD *)(sub_420250(v29) + 4);
        *v14 += v28;
      }
      CIOObject::Release(v33);
    }
    else
    {
      v27 = this->m_nLevel - v31->m_nLevel;
      v13 = (float)v37;
      v32 = (unsigned __int64)((double)*(int *)(sub_420250(&v34) + 4) / (double)this->m_nAllHostility * v13);
      if ( v39 < v32 )
      {
        v39 = v32;
        *nBestID = CBase::Id(v31);
      }
      if ( v27 < 0 )
      {
        if ( abs(v27) >= 20 )
          v11 = 20;
        else
          v11 = abs(v27);
        v32 = (unsigned __int64)((double)v32
                               - (double)v32 * ((double)dword_4D8870[21 * ((v31->m_nLevel - 1) / 10) + v11] / 100.0));
      }
      else
      {
        if ( v27 >= 20 )
          v12 = 20;
        else
          v12 = v27;
        v32 = (unsigned __int64)((double)v32 * ((double)dword_4D8528[21 * ((v31->m_nLevel - 1) / 10) + v12] / 100.0)
                               + (double)v32);
      }
      if ( v32 > 0 )
      {
        v26 = (dword_4E1178 & 1) != 0 ? 0x64 : 0;
        if ( CChar::IsBState(v31, 0x8000000000i64)
          || CChar::IsBState(v31, 0x10000000000i64)
          || CChar::IsBState(v31, 0x20000000000i64) )
        {
          v26 += 10;
        }
        if ( CChar::IsBState(v31, 2i64) )
        {
          v26 += 30;
        }
        else if ( CChar::IsBState(v31, 1i64) )
        {
          v26 += 30;
        }
        v7 = (unsigned __int64)((double)v32 + (double)v32 * ((double)v26 / 100.0));
        v31->UpdateProperty(v31, 25, 1, v7, HIDWORD(v7));
        if ( v38 < v32 )
        {
          v38 = v32;
          *nKeyID = CBase::Id(v31);
        }
        v36 += v32;
      }
    }
    CIOObject::Release(v31);
    sub_446090((int *)&v34, v22, 0);
  }
  if ( !sub_446110(v35) )
  {
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)v35,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v25);
    while ( 1 )
    {
      v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v35, (int)v16);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v25,
              v8) )
        break;
      a1 = *(_DWORD *)sub_420250(&v25);
      v10 = (float)v37;
      a5 = (unsigned __int64)((double)*(int *)(sub_420250(&v25) + 4) / (double)this->m_nAllHostility * v10);
      CParty::AllotExp(a1, &a5, this->m_nLevel, &this->m_ptPixel.x);
      if ( v38 < a5 )
      {
        v38 = a5;
        *bParty = 1;
        *nKeyID = *(_DWORD *)(a1 + 16);
      }
      v36 += a5;
      CIOObject::Release((CIOObject *)a1);
      sub_446090((int *)&v25, v17, 0);
    }
  }
  sub_445D30(&this->m_mapHostility);
  CIOCriticalSection::Leave((int)&this->m_lockHostility);
  if ( 2 * v36 + 1 < v37 )
    *nKeyID = 0;
  return std::map<CParty *,int>::~map<CParty *,int>(v35);
}
// 43EDF1: variable 'v6' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4B9304: using guessed type float flt_4B9304;
// 4E1178: using guessed type int dword_4E1178;

//----- (0043F1A0) --------------------------------------------------------
int __thiscall std::map<CParty *,int>::~map<CParty *,int>(void *this)
{
  return sub_4460F0(this);
}

//----- (0043F1C0) --------------------------------------------------------
void __thiscall CMonsterReal::ResetHostility(CMonsterReal *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+4h] [ebp-10h] BYREF
  char v4[4]; // [esp+8h] [ebp-Ch] BYREF
  CIOObject *v5; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+10h] [ebp-4h] BYREF

  CIOCriticalSection::Enter(&this->m_lockHostility.m_critical_section);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapHostility,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapHostility, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    v5 = *(CIOObject **)sub_420250(&v6);
    CIOObject::Release(v5);
    sub_446090((int *)&v6, v4, 0);
  }
  sub_445D30(&this->m_mapHostility);
  this->m_nAllHostility = 0;
  CIOCriticalSection::Leave((int)&this->m_lockHostility);
}

//----- (0043F260) --------------------------------------------------------
int __thiscall CMonsterMaguni::Damage(CMonsterMaguni *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-20h]
  int v9; // [esp+4h] [ebp-1Ch]
  char v11[4]; // [esp+Ch] [ebp-14h] BYREF
  int a2a; // [esp+10h] [ebp-10h] BYREF
  int a4a; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  int nDamage; // [esp+1Ch] [ebp-4h]

  if ( pSkill )
    v9 = pSkill->IsPhysical(pSkill);
  else
    v9 = 1;
  a4a = v9;
  nDamage = CChar::GetFinalDamage(this, pChar, nAttack, v9);
  if ( nDamage > 0 )
  {
    CMonsterReal::ManageBuff(this);
    CChar::Lock(this);
    if ( CMonsterReal::ApplyDamage(this, pChar, nAttack, nDamage, nNetDamage, bFatal, nPalsyDamage, pSkill) )
    {
      v14 = *nPalsyDamage + *nNetDamage;
      if ( pSkill )
        v8 = pSkill->GetHostility(pSkill);
      else
        v8 = 0;
      this->AddHostility(this, pChar, v14, v8);
      if ( this->m_nCurHP > 0 )
      {
        this->Reaction(this, v14, a4a);
        CChar::Unlock(this);
      }
      else
      {
        a2a = 0;
        *(_DWORD *)v11 = 0;
        this->Die(this, pChar, *bFatal, &a2a, (int *)v11);
        CChar::Unlock(this);
        CMonsterReal::AllotTransformExp(this, a2a, *(int *)v11);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(this);
      result = 1;
    }
  }
  else
  {
    *nPalsyDamage = 0;
    *nNetDamage = 0;
    result = 0;
  }
  return result;
}

//----- (0043F3D0) --------------------------------------------------------
void __thiscall CMonsterMaguni::Die(CMonsterMaguni *this, CChar *pChar, int bFatal, int *bParty, int *nKeyID)
{
  __int64 v5; // [esp-4h] [ebp-Ch]
  CChar *a5; // [esp+0h] [ebp-8h]
  int a4; // [esp+4h] [ebp-4h] BYREF

  HIDWORD(v5) = this;
  this->m_nCurHP = 0;
  pChar->InfoDie(pChar, this->m_nId, bFatal);
  a4 = 0;
  CMonsterReal::AllotExp((CMonsterReal *)HIDWORD(v5), bParty, nKeyID, &a4);
  LODWORD(v5) = pChar->GetDropItemMask(pChar);
  CInitMonster::DropItem(*(CInitMonster **)(HIDWORD(v5) + 440), (CMonster *)HIDWORD(v5), *bParty, *nKeyID, a4, v5);
  CChar::CancelAllBuff(a5);
  CChar::AddGState(a5, 1);
  CChar::WriteInSight(a5, S2C_ACTION, "db", a5->m_nId, 8);
  a5[1].m_nId = GetTickCount() + 10000;
}
// 43F44B: variable 'a5' is possibly undefined

//----- (0043F490) --------------------------------------------------------
void __thiscall CMonsterMaguniWithSkillOnly::SetTarget(CMonsterMaguniWithSkillOnly *this, CChar *pChar)
{
  CMonster::SetTarget(this, pChar);
  if ( pChar )
  {
    this->m_nAIState = 5;
    this->m_dwNextMove = 0;
  }
  else
  {
    this->m_nAIState = 1;
  }
}

//----- (0043F4E0) --------------------------------------------------------
void __thiscall CMonsterMaguniWithSkillOnly::AI(CMonsterMaguniWithSkillOnly *this)
{
  __int64 v2; // [esp+20h] [ebp-8h]

  if ( !CNPC::IsRemoved((CNPC *)this) && !CChar::IsGState(this, 1) )
  {
    CChar::Lock(this);
    if ( this->m_pTarget && !CChar::IsNormal(this->m_pTarget) )
    {
      this->RemoveHostility(this, this->m_pTarget);
      this->SetTarget(this, 0);
    }
    switch ( this->m_nAIState )
    {
      case 1:
      case 2:
      case 3:
      case 7:
        this->Move(this);
        goto LABEL_25;
      case 4:
        this->Attack(this);
        this->m_nAIState = 5;
        goto LABEL_25;
      case 5:
        if ( CMonsterSkill::PreSkill(&this->m_skill, this->m_pTarget) )
          this->m_nAIState = 6;
        goto LABEL_25;
      case 6:
        if ( this->m_pTarget )
        {
          v2 = PowDistance64(&this->m_ptPixel, &this->m_pTarget->m_ptPixel);
          if ( this->m_nMap != this->m_pTarget->m_nMap || v2 > this->m_nSight[1] * this->m_nSight[1] )
          {
            this->RemoveHostility(this, this->m_pTarget);
            this->SetTarget(this, 0);
            CChar::Unlock(this);
            return;
          }
          if ( v2 <= this->m_nRange * this->m_nRange )
          {
            if ( this->m_pTarget == this->m_pParent )
            {
              this->RemoveHostility(this, this->m_pTarget);
              this->SetTarget(this, 0);
              this->m_nAIState = 1;
              CChar::Unlock(this);
              return;
            }
            CChar::SetDirection(
              this,
              this->m_pTarget->m_ptPixel.x - this->m_ptPixel.x,
              this->m_pTarget->m_ptPixel.y - this->m_ptPixel.y);
            CMonsterSkill::ExcuteSkillWithoutResetSkill(&this->m_skill, this->m_pTarget);
            this->m_nAIState = 5;
          }
          else if ( !CChar::IsMState(this, 512i64) )
          {
            this->m_bRefindPath = 1;
            this->m_nAIState = 2;
          }
        }
        else
        {
          this->m_nAIState = 1;
        }
LABEL_25:
        CChar::Unlock(this);
        break;
      default:
        goto LABEL_25;
    }
  }
}

//----- (0043F7F0) --------------------------------------------------------
void __thiscall CMonsterMaguniWithSkillOnly::Tick(CMonsterMaguniWithSkillOnly *this)
{
  int nMaxHP; // [esp+4h] [ebp-8h]
  unsigned int dwCurTick; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    dwCurTick = GetTickCount();
    if ( CChar::IsGState(this, 1) && dwCurTick >= this->m_dwNextAction )
    {
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CChar::Unlock(this);
      CBase::Delete(this);
    }
    else
    {
      nMaxHP = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < nMaxHP && dwCurTick >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, nMaxHP);
        CMonsterReal::ResetHostility(this);
      }
      if ( !sub_40F5F0(&this->m_skill) )
        CMonsterSkill::SetCurSkillDefault(&this->m_skill);
      CChar::Unlock(this);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (0043F8E0) --------------------------------------------------------
void __thiscall CMonsterMaguniWithSkill::AI(CMonsterMaguniWithSkill *this)
{
  __int64 nSquareDist; // [esp+20h] [ebp-8h]

  if ( !CNPC::IsRemoved((CNPC *)this) && !CChar::IsGState(this, 1) )
  {
    CChar::Lock(this);
    if ( this->m_pTarget && !CChar::IsNormal(this->m_pTarget) )
    {
      this->RemoveHostility(this, this->m_pTarget);
      this->SetTarget(this, 0);
    }
    switch ( this->m_nAIState )
    {
      case 1:
      case 3:
        goto LABEL_9;
      case 2:
        if ( this->m_pTarget )
LABEL_9:
          this->Move(this);
        goto LABEL_26;
      case 4:
        this->Attack(this);
        goto LABEL_26;
      case 5:
        if ( CMonsterSkill::PreSkill(&this->m_skill, this->m_pTarget) )
          this->m_nAIState = 6;
        goto LABEL_26;
      case 6:
        if ( this->m_pTarget )
        {
          nSquareDist = PowDistance64(&this->m_ptPixel, &this->m_pTarget->m_ptPixel);
          if ( this->m_nMap != this->m_pTarget->m_nMap || nSquareDist > this->m_nSight[1] * this->m_nSight[1] )
          {
            this->RemoveHostility(this, this->m_pTarget);
            this->SetTarget(this, 0);
            CChar::Unlock(this);
            return;
          }
          if ( nSquareDist <= this->m_nRange * this->m_nRange )
          {
            if ( this->m_pTarget == this->m_pParent )
            {
              this->RemoveHostility(this, this->m_pTarget);
              this->SetTarget(this, 0);
              this->m_nAIState = 1;
              CChar::Unlock(this);
              return;
            }
            CChar::SetDirection(
              this,
              this->m_pTarget->m_ptPixel.x - this->m_ptPixel.x,
              this->m_pTarget->m_ptPixel.y - this->m_ptPixel.y);
            CMonsterSkill::ExcuteSkillWithoutResetSkill(&this->m_skill, this->m_pTarget);
            this->m_nAIState = 4;
          }
          else if ( !CChar::IsMState(this, 512i64) )
          {
            this->m_bRefindPath = 1;
            this->m_nAIState = 2;
          }
        }
        else
        {
          this->m_nAIState = 1;
        }
LABEL_26:
        CChar::Unlock(this);
        break;
      default:
        goto LABEL_26;
    }
  }
}

//----- (0043FBF0) --------------------------------------------------------
void __thiscall CMonsterMaguniWithSkill::Tick(CMonsterMaguniWithSkill *this)
{
  int nMaxHP; // [esp+8h] [ebp-8h]
  DWORD dwCurTick; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    dwCurTick = GetTickCount();
    if ( CChar::IsGState(this, 1) && dwCurTick >= this->m_dwNextAction )
    {
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CChar::Unlock(this);
      CBase::Delete(this);
    }
    else
    {
      nMaxHP = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < nMaxHP && dwCurTick >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, nMaxHP);
        CMonsterReal::ResetHostility(this);
      }
      if ( this->m_dwSkillTick <= dwCurTick )
      {
        if ( this->m_pTarget )
        {
          this->m_dwSkillTick = this->m_pInit->m_nSkillTerm + dwCurTick;
          if ( (double)Random(1, 100) <= this->m_pInit->m_nSkillProbablity )
          {
            if ( !sub_40F5F0(&this->m_skill) )
              CMonsterSkill::SetCurSkillDefault(&this->m_skill);
            this->m_nAIState = 5;
          }
        }
      }
      CChar::Unlock(this);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (0043FD50) --------------------------------------------------------
void __thiscall CMonsterMaguniWithSkill::Attack(CMonsterMaguniWithSkill *this)
{
  int v1; // [esp-14h] [ebp-6Ch]
  int v2; // [esp-10h] [ebp-68h]
  int v3; // [esp-Ch] [ebp-64h]
  int v4; // [esp-8h] [ebp-60h]
  int v5; // [esp-4h] [ebp-5Ch]
  int a3; // [esp+0h] [ebp-58h]
  int bFatal; // [esp+30h] [ebp-28h] BYREF
  int pPalsyDamage; // [esp+34h] [ebp-24h] BYREF
  CChar *pTarget; // [esp+38h] [ebp-20h]
  int nNetDamage; // [esp+3Ch] [ebp-1Ch] BYREF
  int bBlock; // [esp+40h] [ebp-18h]
  int bSuccess; // [esp+44h] [ebp-14h]
  __int64 nSquareDist; // [esp+48h] [ebp-10h]
  unsigned int dwCurTick; // [esp+54h] [ebp-4h]

  if ( !CChar::IsMState(this, 0x10000100i64) )
  {
    dwCurTick = GetTickCount();
    if ( dwCurTick >= this->m_dwNextAction )
    {
      if ( this->m_pTarget )
      {
        nSquareDist = PowDistance64(&this->m_ptPixel, &this->m_pTarget->m_ptPixel);
        if ( this->m_nMap == this->m_pTarget->m_nMap && nSquareDist <= this->m_nSight[1] * this->m_nSight[1] )
        {
          if ( nSquareDist <= this->m_nRange * this->m_nRange )
          {
            this->m_dwNextAction = dwCurTick + CChar::GetASpeed(this);
            this->m_dwNextMove = this->m_dwNextAction;
            CChar::SetDirection(
              this,
              this->m_pTarget->m_ptPixel.x - this->m_ptPixel.x,
              this->m_pTarget->m_ptPixel.y - this->m_ptPixel.y);
            nNetDamage = 0;
            bFatal = 0;
            bSuccess = 0;
            bBlock = 0;
            pTarget = this->m_pTarget;
            CIOObject::AddRef(pTarget, &pTarget->m_nFindRef);
            pPalsyDamage = this->GetPalsyDamage(this, pTarget);
            bBlock = pTarget->CheckBlock(pTarget, this);
            if ( !bBlock && pTarget->IsPlayer(pTarget) )
            {
              a3 = CChar::IsBState(pTarget, 0x8000i64) ? -5 : 0;
              if ( CChar::CheckHit(this, pTarget, a3) )
              {
                CChar::Unlock(this);
                v1 = CChar::GetAttack(this);
                bSuccess = pTarget->Damage(pTarget, this, v1, &nNetDamage, &bFatal, &pPalsyDamage, 0);
                CChar::Lock(this);
              }
            }
            if ( !bSuccess )
              pTarget->Defense(pTarget, this);
            v5 = bSuccess | (2 * bFatal) | (4 * bBlock);
            v4 = pPalsyDamage;
            v3 = nNetDamage;
            v2 = CBase::Id(pTarget);
            CChar::WriteInSight(this, S2C_ATTACK, "ddwwb", this->m_nId, v2, v3, v4, v5);
            CIOObject::Release(pTarget, &pTarget->m_nFindRef);
          }
          else if ( !CChar::IsMState(this, 512i64) )
          {
            this->m_bRefindPath = 1;
            this->m_nAIState = 2;
          }
        }
        else
        {
          this->RemoveHostility(this, this->m_pTarget);
          this->SetTarget(this, 0);
        }
      }
    }
  }
}

//----- (00440070) --------------------------------------------------------
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::CMonsterTowerBoss(CMonsterTowerBoss *this)
{
  CMonsterReal::CMonsterReal(this);
  this->__vftable = (CMonsterTowerBoss_vtbl *)&off_4B9308;
  memset(this->m_dwTick, 0, sizeof(this->m_dwTick));
  this->m_dwTick[0] = GetTickCount();
  this->m_pGen = 0;
  return this;
}
// 4B9308: using guessed type int (__stdcall *off_4B9308)(int);

//----- (004400D0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::IsIgnore(CMonsterTowerBoss *this)
{
  return CChar::IsGState(this, 0x12000);
}

//----- (004400F0) --------------------------------------------------------
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::CMonsterTowerBoss(CMonsterTowerBoss *this, int nMap, CSMap *pMap)
{
  CMonsterReal::CMonsterReal(this);
  this->__vftable = (CMonsterTowerBoss_vtbl *)&off_4B9308;
  this->m_nMap = nMap;
  this->m_pMap = pMap;
  memset(this->m_dwTick, 0, sizeof(this->m_dwTick));
  this->m_dwTick[0] = GetTickCount() + 3600000;
  this->m_dwNextAction = GetTickCount() + 10000;
  this->m_dwNextMove = this->m_dwNextAction;
  this->m_pGen = 0;
  CChar::AddGState(this, 0x2000);
  return this;
}
// 4B9308: using guessed type int (__stdcall *off_4B9308)(int);

//----- (004401A0) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
int __cdecl CMonsterTowerBoss::Create()
{
  int result; // eax
  int v1; // eax
  char *v2; // eax
  int v3; // eax
  tagPOINT ptPixel_; // [esp-30h] [ebp-6Ch]
  int nDir; // [esp-28h] [ebp-64h]
  int nCurHP; // [esp-24h] [ebp-60h]
  int nMaxHP; // [esp-20h] [ebp-5Ch]
  int nGState; // [esp-1Ch] [ebp-58h]
  __int64 nMState; // [esp-18h] [ebp-54h]
  int m_szGuildName; // [esp-10h] [ebp-4Ch]
  CMonsterTowerBoss *v11; // [esp+4h] [ebp-38h]
  CMonsterTowerBoss *v12; // [esp+10h] [ebp-2Ch]
  char v13[4]; // [esp+14h] [ebp-28h] BYREF
  int v14; // [esp+18h] [ebp-24h] BYREF
  CInitMonster *v15; // [esp+1Ch] [ebp-20h]
  tagPOINT ptTile; // [esp+20h] [ebp-1Ch] BYREF
  CSMap *pMap; // [esp+28h] [ebp-14h]
  tagPOINT ptPixel; // [esp+2Ch] [ebp-10h] OVERLAPPED BYREF
  std::_Tree<std::_Tmap_traits<int,CInitMonster *,std::less<int>,std::allocator<std::pair<int const ,CInitMonster *> >,0> >::iterator *ptP_8; // [esp+34h] [ebp-8h] BYREF
  CMonsterTowerBoss *pMonster; // [esp+38h] [ebp-4h]

  pMap = CSMap::FindSMap(3);
  if ( !pMap )
    return 0;
  CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
  v14 = 213;
  sub_44AE20(dword_4E1820, &ptP_8, &v14);
  v1 = sub_430C20(dword_4E1820, (int)v13);
  if ( (unsigned __int8)unknown_libname_8(v1) )
  {
    CIOCriticalSection::Leave((int)&unk_4E182C);
    result = 0;
  }
  else
  {
    v15 = *(CInitMonster **)(sub_420250(&ptP_8) + 4);
    if ( (v15->m_dwCountry & (1 << SLOBYTE(stru_4E35B4.m_nRef))) != 0 )
    {
      ptPixel.x = 57367;
      ptPixel.y = 8931;
      v12 = (CMonsterTowerBoss *)operator new(0x2B8u);
      if ( v12 )
        v11 = CMonsterTowerBoss::CMonsterTowerBoss(v12, 3, pMap);
      else
        v11 = 0;
      pMonster = v11;
      CChar::SetXY(v11, &ptPixel);
      CChar::SetDirection(pMonster, 0, -1);
      pMonster->SetProperty(pMonster, v15);
      CIOCriticalSection::Leave((int)&unk_4E182C);
      CChar::Lock(pMonster);
      ptTile.x = ptPixel.x >> 5;
      ptTile.y = ptPixel.y >> 5;
      if ( CSMap::SetOnMap(pMonster->m_pMap, pMonster, &ptTile) )
      {
        pMonster->Add(pMonster, 0);
        v2 = pMonster->GetOperatorName(pMonster);
        m_szGuildName = ((int (__thiscall *)(CMonsterTowerBoss *, int, int, char *))pMonster->GetGuildName)(
                          pMonster,
                          pMonster->m_pInit->m_nRace | 0x80,
                          pMonster->m_nGID,
                          v2);
        nMState = pMonster->m_nMState;
        nGState = pMonster->m_nGState;
        nMaxHP = CChar::GetMaxHP(pMonster);
        nCurHP = pMonster->m_nCurHP;
        nDir = pMonster->m_nDir;
        ptPixel_ = pMonster->m_ptPixel;
        v3 = CBase::Id(pMonster);
        CChar::WriteInSight(
          pMonster,
          S2C_CREATEMONSTER,
          "wdddwdddIsbds",
          pMonster->m_pInit->m_nIndex,
          v3,
          ptPixel_.x,
          ptPixel_.y,
          nDir,
          nCurHP,
          nMaxHP,
          nGState,
          nMState,
          m_szGuildName);
        CChar::Unlock(pMonster);
        CNPCScenario::MirrorGState(0, 3);
        CNPCScenario::ThroneGState(0, 12);
        CPlayer::WriteInMap(3, S2C_MAPSTATE, "bb", 0, 99);
        result = 1;
      }
      else
      {
        CChar::Unlock(pMonster);
        if ( pMonster )
          ((void (__thiscall *)(CMonsterTowerBoss *, int))pMonster->~CIOObject)(pMonster, 1);
        result = 0;
      }
    }
    else
    {
      CIOCriticalSection::Leave((int)&unk_4E182C);
      result = 1;
    }
  }
  return result;
}
// 4401A0: variables would overlap: lvar "ptPixel" ^70.8(user-defined) and stkvar "pMonster" ^70.16(has user info)
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00440430) --------------------------------------------------------
void __thiscall CMonsterTowerBoss::OnDelete(CMonsterTowerBoss *this)
{
  int v1; // [esp+0h] [ebp-18h]
  CGenMonster *i; // [esp+10h] [ebp-8h]
  CGenMonster **v4; // [esp+14h] [ebp-4h]

  CChar::Lock(this);
  this->SetTarget(this, 0);
  CMonsterReal::ResetHostility(this);
  v4 = &this->m_pGen;
  for ( i = this->m_pGen; i; i = *v4 )
  {
    *v4 = i->m_pNextGen;
    v1 = ((int (__thiscall *)(CGenMonster *, int))i->~CIOObject)(i, 1);
  }
  ((void (__thiscall *)(CMonsterTowerBoss *, int))this->Remove)(this, v1);
  CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile);
  CChar::Unlock(this);
  CNPCScenario::ResetBossTower(0);
  sub_402180((int)this);
}
// 440497: conditional instruction was optimized away because of '%var_8.4!=0'
// 4404BB: variable 'v1' is possibly undefined

//----- (00440500) --------------------------------------------------------
void __thiscall CMonsterTowerBoss::Defense(CMonsterTowerBoss *a1, CChar *pChar)
{
  if ( !a1->m_bAggressive )
    a1->m_bAggressive = 1;
  a1->m_dwAttacked = GetTickCount();
  CMonsterReal::Defense((CIOCriticalSection *)a1, (volatile int *)pChar);
}

//----- (00440550) --------------------------------------------------------
void __thiscall CMonsterMaguniMaster::AI(CMonsterMaguniMaster *this)
{
  if ( !CNPC::IsRemoved((CNPC *)this) && !this->IsIgnore(this) )
  {
    CChar::Lock(this);
    if ( this->m_pTarget && !CChar::IsNormal(this->m_pTarget) )
    {
      this->RemoveHostility(this, this->m_pTarget);
      this->SetTarget(this, 0);
    }
    switch ( this->m_nAIState )
    {
      case 1:
      case 2:
      case 3:
        this->Move(this);
        break;
      case 4:
        this->Attack(this);
        break;
      case 5:
        if ( CMonsterSkill::PreSkill(&this->m_skill, this->m_pTarget) )
          this->m_nAIState = 6;
        break;
      case 6:
        CMonsterSkill::ExcuteSkill(&this->m_skill, this->m_pTarget);
        this->m_nAIState = this->m_pTarget != 0 ? 4 : 1;
        break;
      default:
        break;
    }
    CChar::Unlock(this);
  }
}

//----- (004406A0) --------------------------------------------------------
void __thiscall CMonsterTowerBoss::Tick(CMonsterTowerBoss *this)
{
  int v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  unsigned int v4; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    v4 = GetTickCount();
    if ( CChar::IsGState(this, 0x10000) && v4 >= this->m_dwNextAction )
    {
      CChar::WriteInSight(this, S2C_REMOVEMONSTER, "d", this->m_nId);
      CChar::Unlock(this);
      CBase::Delete(this);
    }
    else if ( CChar::IsGState(this, 0x2000) && v4 >= this->m_dwNextMove )
    {
      this->SubGState(this, 0x2000);
      CChar::Unlock(this);
    }
    else
    {
      v2 = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < v2 && v4 >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, v2);
        CMonsterReal::ResetHostility(this);
      }
      if ( this->m_bAggressive
        && !sub_40F5F0(&this->m_skill)
        && !sub_446110(&this->m_mapHostility)
        && v4 - this->m_dwAttacked <= 0x2710 )
      {
        this->Summon(this, 232, 5, 24, 6);
        CMonsterTowerBoss::OnSummon(this);
        v3 = -1;
        if ( this->m_dwTick[0] <= v4 )
          v3 = 8;
        if ( this->m_nCurHP <= 7 * v2 / 10 && this->m_dwTick[1] <= v4 )
        {
          this->m_dwTick[1] = v4 + 42000;
          if ( v3 < 0 )
            v3 = 5;
        }
        if ( this->m_nCurHP <= v2 / 2 && this->m_dwTick[2] <= v4 )
        {
          this->m_dwTick[2] = v4 + 83000;
          if ( v3 < 0 && Random(1, 100) <= 90 )
            v3 = 4;
        }
        if ( this->m_nCurHP <= 3 * v2 / 4 && this->m_dwTick[3] <= v4 )
        {
          this->m_dwTick[3] = v4 + 14000;
          if ( v3 < 0 && Random(1, 100) <= 80 )
            v3 = 2;
        }
        if ( this->m_dwTick[4] <= v4 )
        {
          this->m_dwTick[4] = v4 + 32000;
          if ( v3 < 0 && Random(1, 100) <= 85 )
            v3 = 3;
        }
        if ( this->m_dwTick[5] <= v4 )
        {
          this->m_dwTick[5] = v4 + 10000;
          if ( v3 < 0 && Random(1, 100) <= 75 )
            v3 = this->m_nCurHP <= v2 / 2;
        }
        if ( this->m_dwTick[6] <= v4 )
        {
          this->m_dwTick[6] = v4 + 5000;
          if ( v3 < 0 && Random(1, 100) <= 50 )
            v3 = 13;
        }
        if ( v3 >= 0 )
        {
          if ( CMonsterSkill::SetCurSkill(&this->m_skill, v3) )
            this->m_nAIState = 5;
        }
      }
      CChar::Unlock(this);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00440A30) --------------------------------------------------------
void __thiscall CMonsterTowerBoss::Attack(CMonsterTowerBoss *this)
{
  int v1; // eax
  int v2; // [esp-14h] [ebp-70h]
  int v3; // [esp-10h] [ebp-6Ch]
  int v4; // [esp-Ch] [ebp-68h]
  int v5; // [esp-8h] [ebp-64h]
  int v6; // [esp-4h] [ebp-60h]
  int v7; // [esp-4h] [ebp-60h]
  int a3; // [esp+0h] [ebp-5Ch]
  int v10; // [esp+30h] [ebp-2Ch] BYREF
  int v11; // [esp+34h] [ebp-28h] BYREF
  int a1a; // [esp+38h] [ebp-24h]
  int v13; // [esp+3Ch] [ebp-20h] BYREF
  int v14; // [esp+40h] [ebp-1Ch]
  int v15; // [esp+44h] [ebp-18h]
  CBaseList *pList; // [esp+48h] [ebp-14h]
  __int64 nSquareDist; // [esp+4Ch] [ebp-10h]
  unsigned int dwCurTick; // [esp+54h] [ebp-8h]
  CChar *pMainTarget; // [esp+58h] [ebp-4h]

  if ( !CChar::IsMState(this, 0x10000100i64) )
  {
    dwCurTick = GetTickCount();
    if ( dwCurTick >= this->m_dwNextAction )
    {
      nSquareDist = PowDistance64(&this->m_ptPixel, &this->m_pTarget->m_ptPixel);
      if ( this->m_nMap == this->m_pTarget->m_nMap && nSquareDist <= this->m_nSight[1] * this->m_nSight[1] )
      {
        if ( nSquareDist <= this->m_nRange * this->m_nRange )
        {
          this->m_dwNextAction = dwCurTick + CChar::GetASpeed(this);
          this->m_dwNextMove = this->m_dwNextAction;
          CChar::SetDirection(
            this,
            this->m_pTarget->m_ptPixel.x - this->m_ptPixel.x,
            this->m_pTarget->m_ptPixel.y - this->m_ptPixel.y);
          pMainTarget = this->m_pTarget;
          CIOObject::AddRef(pMainTarget, &pMainTarget->m_nFindRef);
          for ( pList = CSMap::GetPlayerListInRect(pMainTarget->m_pMap, &pMainTarget->m_ptTile, 1);
                pList;
                pList = CBaseList::Pop(pList) )
          {
            a1a = unknown_libname_7(pList);
            v13 = 0;
            v10 = 0;
            v15 = 0;
            v14 = 0;
            v11 = this->GetPalsyDamage(this, (CChar *)a1a);
            v14 = (*(int (__thiscall **)(int, CMonsterTowerBoss *))(*(_DWORD *)a1a + 148))(a1a, this);
            if ( !v14 )
            {
              a3 = CChar::IsBState((CChar *)a1a, 0x8000i64) ? -5 : 0;
              if ( CChar::CheckHit(this, (CChar *)a1a, a3) )
              {
                CChar::Unlock(this);
                v2 = CChar::GetAttack(this);
                v15 = (*(int (__thiscall **)(int, CMonsterTowerBoss *, int, int *, int *, int *, _DWORD))(*(_DWORD *)a1a + 72))(
                        a1a,
                        this,
                        v2,
                        &v13,
                        &v10,
                        &v11,
                        0);
                CChar::Lock(this);
              }
            }
            if ( (CChar *)a1a == pMainTarget )
            {
              v7 = v15 | (2 * v10) | (4 * v14);
              v5 = v11;
              v4 = v13;
              v3 = CBase::Id((CBase *)a1a);
              CChar::WriteInSight(this, S2C_ATTACK, "ddwwb", this->m_nId, v3, v4, v5, v7);
            }
            else if ( v15 )
            {
              v6 = v13;
              v1 = CBase::Id((CBase *)a1a);
              CPlayer::Write((CPlayer *)a1a, S2C_EFFECT, "dbw", v1, 23, v6);
            }
          }
          CIOObject::Release(pMainTarget, &pMainTarget->m_nFindRef);
        }
        else if ( !CChar::IsMState(this, 0x200i64) )
        {
          this->m_bRefindPath = 1;
          this->m_nAIState = 2;
        }
      }
      else
      {
        this->RemoveHostility(this, this->m_pTarget);
        this->SetTarget(this, 0);
      }
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00440D90) --------------------------------------------------------
void __thiscall CMonsterTowerBoss::UpdateChild(CMonsterTowerBoss *this, int nMonIndex)
{
  CGenMonster *i; // [esp+4h] [ebp-4h]

  if ( !CBase::IsDeleted(this) )
  {
    CChar::Lock(this);
    for ( i = this->m_pGen; i && i->m_nIndex != nMonIndex; i = i->m_pNextGen )
      ;
    if ( i )
    {
      --i->m_nMax;
      --i->m_nLive;
    }
    CChar::Unlock(this);
  }
  sub_40AD90(this, nMonIndex);
}

//----- (00440E20) --------------------------------------------------------
CGenMonster *__thiscall CMonsterTowerBoss::Summon(CMonsterTowerBoss *this, int nMonIndex, int nRange, int nMax, int nNum)
{
  CGenMonster *result; // eax
  CGenMonster *pGen; // [esp+0h] [ebp-14h]
  CGenMonster *v8; // [esp+8h] [ebp-Ch]
  CGenMonster *i; // [esp+10h] [ebp-4h]

  for ( i = this->m_pGen; i && i->m_nIndex != nMonIndex; i = i->m_pNextGen )
    ;
  if ( i )
  {
    result = i;
    i->m_nMax += nNum;
    if ( i->m_nMax > nMax )
    {
      result = i;
      i->m_nMax = nMax;
    }
  }
  else
  {
    v8 = (CGenMonster *)operator new(0x58u);
    if ( v8 )
      pGen = CGenMonster::CGenMonster(v8, this, nMonIndex, nRange, nNum);
    else
      pGen = 0;
    pGen->m_pNextGen = this->m_pGen;
    result = pGen;
    this->m_pGen = pGen;
  }
  return result;
}

//----- (00440EE0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::Reaction(CMonsterTowerBoss *this, int nTotalDamage, int bPhysical)
{
  int result; // eax

  if ( !this->m_bAggressive )
    this->m_bAggressive = 1;
  result = GetTickCount();
  this->m_dwAttacked = result;
  if ( nTotalDamage >= 100 )
  {
    result = sub_40F5F0(&this->m_skill);
    if ( !result )
    {
      result = Random(1, 100);
      if ( result <= 80 )
      {
        result = CMonsterSkill::SetCurSkill(&this->m_skill, 7 - (bPhysical != 0));
        if ( result )
          this->m_nAIState = 5;
      }
    }
  }
  return result;
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00440F70) --------------------------------------------------------
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::OnSummon(CMonsterTowerBoss *this)
{
  CMonsterTowerBoss *result; // eax
  int i; // [esp+4h] [ebp-8h]
  CGenMonster *a1; // [esp+8h] [ebp-4h]

  result = this;
  for ( a1 = this->m_pGen; a1; a1 = (CGenMonster *)result )
  {
    for ( i = 0; i < 3 && a1->m_nLive < a1->m_nMax && CMonster::Create(a1, this); ++i )
      InterlockedIncrement(&a1->m_nLive);
    result = (CMonsterTowerBoss *)a1->m_pNextGen;
  }
  return result;
}

//----- (00440FF0) --------------------------------------------------------
int __thiscall CMonsterNotReal::AddBuff(CMonsterNotReal *this, CBuff *pNewBuff)
{
  if ( pNewBuff )
    CBuff::`scalar deleting destructor'(pNewBuff, 1);
  return 0;
}

//----- (00441030) --------------------------------------------------------
int __thiscall CMonsterInactive::Damage(CMonsterInactive *this, CChar *pChar, int nAttack, int *nNetDamage, _DWORD *bFatal, _DWORD *nPalsyDamage, CSkill *pSkill)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-1Ch]
  int v9; // [esp+4h] [ebp-18h]
  int bPhysical; // [esp+8h] [ebp-14h]
  int nDamage; // [esp+14h] [ebp-8h]

  *nPalsyDamage = 0;
  if ( pSkill )
    bPhysical = pSkill->IsPhysical(pSkill);
  else
    bPhysical = 1;
  nDamage = CChar::GetFinalDamage(this, pChar, nAttack, bPhysical);
  if ( nDamage > 0 )
  {
    CChar::Lock(this);
    if ( CChar::IsNormal(this) )
    {
      if ( pSkill )
        v9 = pSkill->GetFatalRate(pSkill);
      else
        v9 = 0;
      *nNetDamage = nDamage + CChar::GetFatalDamage(pChar, nDamage, bFatal, v9);
      if ( *nNetDamage >= this->m_nCurHP )
        v8 = this->m_nCurHP;
      else
        v8 = *nNetDamage;
      *nNetDamage = v8;
      this->m_nCurHP -= *nNetDamage;
      if ( this->m_nCurHP > 0 )
      {
        CChar::Unlock(this);
      }
      else
      {
        this->m_nCurHP = 0;
        CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
        CChar::Unlock(this);
        CBase::Delete(this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(this);
      *nNetDamage = 0;
      result = 0;
    }
  }
  else
  {
    *nNetDamage = 0;
    result = 0;
  }
  return result;
}

//----- (004411A0) --------------------------------------------------------
void __thiscall CMonsterInactive::SetProperty(CMonsterInactive *this, CInitMonster *pInit)
{
  CMonster::SetProperty(this, pInit);
  memcpy(&this->m_prtyBase, &pInit->m_prtyBase, sizeof(this->m_prtyBase));
  this->m_nCurHP = CChar::GetMaxHP(this);
}

//----- (004411F0) --------------------------------------------------------
void __thiscall CMonsterInactive::Add(CMonsterInactive *this, CChar *pParent)
{
  CMonster::Add((int)this, (int)pParent);
  if ( pParent )
  {
    CIOObject::AddRef((int)pParent);
    this->m_pParent = pParent;
  }
}

//----- (00441230) --------------------------------------------------------
int __thiscall CMonsterGuildWar::CMonsterGuildWar(CMonsterGuildWar *this, int nMap, CSMap *pMap, int nDir, int nGID, char *szGuildName)
{
  sub_439AF0(this);
  this->__vftable = (CMonsterGuildWar_vtbl *)&off_4B8490;
  this->m_nMap = nMap;
  this->m_pMap = pMap;
  this->m_nDir = nDir;
  this->m_nGID = nGID;
  strcpy(this->m_szGuildName, szGuildName);
  this->m_dwTickExDeclare = 0;
  return (int)this;
}
// 4B8490: using guessed type int (__stdcall *off_4B8490)(int);

//----- (004412B0) --------------------------------------------------------
CMonster *__cdecl CMonsterGuildWar::Create(int nIndex, int nMap, tagPOINT *ptPixel, int nDir, int nGID, char *szGuildName, int bLordDeclare)
{
  CMonster *result; // eax
  int v8; // eax
  char *v9; // eax
  int m_nId; // eax
  tagPOINT m_PtPixel; // [esp-34h] [ebp-64h]
  int m_nDir; // [esp-2Ch] [ebp-5Ch]
  int m_nCurHP; // [esp-28h] [ebp-58h]
  int m_nMaxHP; // [esp-24h] [ebp-54h]
  int m_nGState; // [esp-20h] [ebp-50h]
  __int64 m_nMState; // [esp-1Ch] [ebp-4Ch]
  int m_nszGuildName; // [esp-14h] [ebp-44h]
  __int64 v18; // [esp-4h] [ebp-34h]
  CMonsterGuildWar *v19; // [esp+4h] [ebp-2Ch]
  CMonsterGuildWar *v20; // [esp+10h] [ebp-20h]
  char v21[4]; // [esp+14h] [ebp-1Ch] BYREF
  tagPOINT ptTile; // [esp+18h] [ebp-18h] BYREF
  int v23; // [esp+20h] [ebp-10h]
  std::_Tree<std::_Tmap_traits<int,CInitMonster *,std::less<int>,std::allocator<std::pair<int const ,CInitMonster *> >,0> >::iterator *pMap; // [esp+24h] [ebp-Ch]
  CMonsterGuildWar *v25; // [esp+28h] [ebp-8h] BYREF
  CMonsterGuildWar *pMonster; // [esp+2Ch] [ebp-4h]

  pMap = (std::_Tree<std::_Tmap_traits<int,CInitMonster *,std::less<int>,std::allocator<std::pair<int const ,CInitMonster *> >,0> >::iterator *)CSMap::FindSMap(nMap);
  if ( pMap )
  {
    LODWORD(v18) = 0;
    if ( CSMap::IsValidTile((CSMap *)pMap, ptPixel, v18) )
    {
      CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
      sub_44AE20(dword_4E1820, &v25, &nIndex);
      v8 = sub_430C20(dword_4E1820, (int)v21);
      if ( (unsigned __int8)unknown_libname_8(v8)
        || (ptTile.x = *(_DWORD *)(sub_420250(&v25) + 4),
            (*(_DWORD *)(ptTile.x + 304) & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C);
        result = 0;
      }
      else
      {
        v20 = (CMonsterGuildWar *)operator new(0x238u);
        if ( v20 )
          v19 = (CMonsterGuildWar *)CMonsterGuildWar::CMonsterGuildWar(
                                      v20,
                                      nMap,
                                      (CSMap *)pMap,
                                      nDir,
                                      nGID,
                                      szGuildName);
        else
          v19 = 0;
        pMonster = v19;
        CChar::SetXY(v19, ptPixel);
        pMonster->SetProperty(pMonster, (CInitMonster *)ptTile.x);
        CIOCriticalSection::Leave((int)&unk_4E182C);
        CChar::Lock(pMonster);
        ptTile.y = ptPixel->x >> 5;
        v23 = ptPixel->y >> 5;
        if ( CSMap::SetOnMap(pMonster->m_pMap, pMonster, (const tagPOINT *)&ptTile.y) )
        {
          pMonster->Add(pMonster, 0);
          v9 = pMonster->GetOperatorName(pMonster);
          m_nszGuildName = ((int (__thiscall *)(CMonsterGuildWar *, int, int, char *))pMonster->GetGuildName)(
                             pMonster,
                             pMonster->m_pInit->m_nRace,
                             pMonster->m_nGID,
                             v9);
          m_nMState = pMonster->m_nMState;
          m_nGState = pMonster->m_nGState;
          m_nMaxHP = CChar::GetMaxHP(pMonster);
          m_nCurHP = pMonster->m_nCurHP;
          m_nDir = pMonster->m_nDir;
          m_PtPixel = pMonster->m_ptPixel;
          m_nId = CBase::Id(pMonster);
          CChar::WriteInSight(
            pMonster,
            S2C_CREATEMONSTER,
            "wdddwdddIsbds",
            pMonster->m_pInit->m_nIndex,
            m_nId,
            m_PtPixel.x,
            m_PtPixel.y,
            m_nDir,
            m_nCurHP,
            m_nMaxHP,
            m_nGState,
            m_nMState,
            m_nszGuildName);
          if ( bLordDeclare && CInitMonster::IsRace((CInitMonster *)ptTile.x, 2) && nGID )
          {
            pMonster->AddGState(pMonster, 0x20000);
            pMonster->m_dwTickExDeclare = GetTickCount() + 300000;
          }
          CChar::Unlock(pMonster);
          result = pMonster;
        }
        else
        {
          CChar::Unlock(pMonster);
          if ( pMonster )
            ((void (__thiscall *)(CMonsterGuildWar *, int))pMonster->~CIOObject)(pMonster, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterGuildWar::Create() not find Map (map:%d)", nMap);
    result = 0;
  }
  return result;
}
// 4412EC: variable 'v18' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00441570) --------------------------------------------------------
BOOL __thiscall CInitMonster::IsRace(CInitMonster *this, int nRace)
{
  return this->m_nRace == nRace;
}

//----- (00441590) --------------------------------------------------------
int __thiscall CMonsterGuildWar::Damage(CMonsterGuildWar *this, CChar *pChar, int nAttack, int *nNetDamage, _DWORD *bFatal, _DWORD *nPalsyDamage, CSkill *pSkill)
{
  int result; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp+0h] [ebp-14h]
  int pPhysical; // [esp+4h] [ebp-10h]
  int nDamage; // [esp+10h] [ebp-4h]
  int nDamagea; // [esp+10h] [ebp-4h]

  *nPalsyDamage = 0;
  if ( pSkill )
    pPhysical = pSkill->IsPhysical(pSkill);
  else
    pPhysical = 1;
  if ( !pPhysical )
    return 0;
  nDamage = CChar::GetFinalDamage(this, pChar, nAttack, pPhysical);
  if ( nDamage <= 0 )
    return 0;
  CChar::Lock(this);
  if ( CChar::IsNormal(this) )
  {
    nDamagea = nDamage + CChar::GetFatalDamage(pChar, nDamage, bFatal, 0);
    if ( nDamagea >= this->m_nCurHP )
      v10 = this->m_nCurHP;
    else
      v10 = nDamagea;
    *nNetDamage = v10;
    this->m_nCurHP -= *nNetDamage;
    this->m_dwResetHP = GetTickCount() + 20000;
    if ( this->m_nCurHP > 0 )
    {
      CChar::Unlock(this);
    }
    else
    {
      this->m_nCurHP = 0;
      pChar->InfoDie(pChar, this->m_nId, *bFatal);
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CChar::Unlock(this);
      if ( CInitMonster::IsRace(this->m_pInit, 2) )
      {
        v8 = CCastle::GetMonsterTile2CID(this->m_nMap, this->m_ptPixel.x, this->m_ptPixel.y);
        CGuild::BrokenStandard(v8);
      }
      else if ( CInitMonster::IsRace(this->m_pInit, 3) )
      {
        v9 = CCastle::GetMonsterTile2CID(this->m_nMap, this->m_ptPixel.x, this->m_ptPixel.y);
        CGuild::BrokenGate(v9, (int)this);
      }
      CBase::Delete(this);
    }
    result = 1;
  }
  else
  {
    CChar::Unlock(this);
    result = 1;
  }
  return result;
}

//----- (00441790) --------------------------------------------------------
int __thiscall CMonsterGuildWar::SetProperty(CMonsterGuildWar *this, CInitMonster *pInit)
{
  CMonster::SetProperty(this, pInit);
  memcpy(&this->m_prtyBase, &pInit->m_prtyBase, sizeof(this->m_prtyBase));
  memcpy(&this->m_prtyPt, &pInit->m_prtyPt, sizeof(this->m_prtyPt));
  return ((int (__thiscall *)(CMonsterGuildWar *))this->ReviseProperty)(this);
}

//----- (004417F0) --------------------------------------------------------
void __thiscall CMonsterGuildWar::Tick(CMonsterGuildWar *this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    v3 = GetTickCount();
    if ( CChar::IsGState(this, 0x20000) && this->m_dwTickExDeclare < v3 )
      this->SubGState(this, 0x20000);
    if ( !sub_417450() )
    {
      CChar::Lock(this);
      v2 = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < v2 && v3 >= this->m_dwResetHP )
        this->UpdateProperty(this, 7, 1, v2);
      CChar::Unlock(this);
    }
  }
}

//----- (004418A0) --------------------------------------------------------
void __thiscall CMonsterGuildWar::SetGuild(CMonsterGuildWar *this, int nGID, char *szGuildName)
{
  CChar::Lock(this);
  this->m_nGID = nGID;
  strcpy(this->m_szGuildName, szGuildName);
  CChar::Unlock(this);
}

//----- (004418E0) --------------------------------------------------------
void __thiscall CPlayer::SubGState(CPlayer *this, int nGState)
{
  CChar::SubGState(this, nGState);
  CChar::WriteInSight(this, S2C_GSTATE, "dd", this->m_nId, this->m_nGState);
}

//----- (00441920) --------------------------------------------------------
int __thiscall CMonsterItem::Damage(CMonsterItem *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill)
{
  int v8; // eax
  CPlayer *pPlayer; // [esp+10h] [ebp-10h]
  int nKind; // [esp+14h] [ebp-Ch]

  if ( CBase::IsDeleted(this) )
    return 0;
  CChar::Lock(this);
  if ( nAttack )
  {
    if ( nAttack == 1 && pChar == this->m_pTarget && this->m_dwNextAction > GetTickCount() )
    {
      this->m_dwNextAction = GetTickCount();
      this->SetTarget(this, 0);
      pChar->SubGState(pChar, 0x8000);
      CPlayer::Write((CPlayer *)pChar, S2C_MESSAGE, "b", 89);
    }
LABEL_22:
    CChar::Unlock(this);
    return 0;
  }
  if ( !this->m_pTarget )
  {
    CIOObject::AddRef(pChar, &pChar->m_nTargetRef);
    this->SetTarget(this, pChar);
    nKind = 6;
    if ( pChar[2].m_prtyPt.nMinMagic )
    {
      pPlayer = (CPlayer *)sub_44D4E0(pChar[2].m_prtyPt.nMinMagic);
      if ( pPlayer )
      {
        if ( CParty::GetLuckySize(pPlayer, 1) )
          nKind = 2;
        CIOObject::Release(pPlayer);
      }
    }
    else if ( CChar::IsBState(pChar, 0x2000000i64) )
    {
      v8 = CBase::Id(pChar);
      CChar::WriteInRect(pChar, S2C_EFFECT, 15, "db", v8, 21);
      nKind = 2;
    }
    this->m_dwNextAction = 1000 * nKind + GetTickCount();
    pChar->AddGState(pChar, 0x8000);
    CPlayer::Write((CPlayer *)pChar, S2C_MESSAGEV, "bb", 87, nKind);
    goto LABEL_22;
  }
  CChar::Unlock(this);
  if ( pChar != this->m_pTarget )
    CPlayer::Write((CPlayer *)pChar, S2C_MESSAGE, "b", 86);
  return 0;
}

//----- (00441B20) --------------------------------------------------------
void __thiscall CMonsterItem::Tick(CMonsterItem *this)
{
  int v1; // eax
  __int64 v2; // [esp-4h] [ebp-10h]
  CChar *item; // [esp+0h] [ebp-Ch]
  int a7; // [esp+4h] [ebp-8h]
  CPlayer *a1; // [esp+8h] [ebp-4h]

  HIDWORD(v2) = this;
  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::Lock((CChar *)HIDWORD(v2));
    if ( !*(_DWORD *)(HIDWORD(v2) + 464) )
      goto LABEL_10;
    if ( !CChar::IsNormal(*(CChar **)(HIDWORD(v2) + 464)) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)HIDWORD(v2) + 188))(HIDWORD(v2), 0);
      CChar::Unlock((CChar *)HIDWORD(v2));
      return;
    }
    if ( *(_DWORD *)(HIDWORD(v2) + 468) <= GetTickCount() )
    {
      a1 = *(CPlayer **)(HIDWORD(v2) + 464);
      a1->SubGState(a1, 0x8000);
      CPlayer::Write(a1, S2C_MESSAGE, "b", 88);
      a7 = a1->m_nParty;
      LODWORD(v2) = 0;
      if ( a7 )
      {
        CInitMonster::DropItem(*(CInitMonster **)(HIDWORD(v2) + 440), (CMonster *)HIDWORD(v2), 1, a7, 0, v2);
      }
      else
      {
        v1 = CBase::Id(a1);
        CInitMonster::DropItem(*(CInitMonster **)(HIDWORD(v2) + 440), (CMonster *)HIDWORD(v2), 0, v1, 0, v2);
      }
      ((void (__thiscall *)(CChar *, _DWORD))item->__vftable[1].~CIOObject)(item, 0);
      CChar::WriteInSight(item, S2C_ACTION, "db", item->m_nId, 9);
      CChar::Unlock(item);
      CBase::Delete(item);
    }
    else
    {
LABEL_10:
      CChar::Unlock((CChar *)HIDWORD(v2));
    }
  }
}
// 441C1D: variable 'item' is possibly undefined

//----- (00441C70) --------------------------------------------------------
void __thiscall CMonsterItem::Add(CMonsterItem *this, CChar *pParent)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v2; // eax
  char v4[8]; // [esp+4h] [ebp-18h] BYREF
  int v5; // [esp+Ch] [ebp-10h]
  CMonsterItem *v6; // [esp+10h] [ebp-Ch]
  char v7[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef((int)this);
  CMonsterObject::Insert((CMonsterObject *)&unk_4E1998, &this->m_link);
  CRWLock::WriteLock(&unk_4E1858);
  v6 = this;
  v5 = this->m_nId;
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v7);
  sub_445DF0(
    (int)dword_4E184C,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v2);
  CRWLock::WriteUnlock(&unk_4E1858);
}
// 441CC7: variable 'v2' is possibly undefined
// 4E184C: using guessed type int dword_4E184C[3];

//----- (00441CE0) --------------------------------------------------------
void __thiscall CMonsterItem::Remove(CMonsterItem *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  std::_Tree<std::_Tmap_traits<int,CGenMonster *,std::less<int>,std::allocator<std::pair<int const ,CGenMonster *> >,0> >::iterator *v5; // [esp+8h] [ebp-4h] BYREF

  CMonster::Remove(this);
  CRWLock::ReadLock(&unk_4E187C);
  sub_44AE20(dword_4E1870, &v5, &this->m_nArea);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v5,
         v1) )
  {
    v2 = sub_420250(&v5);
    InterlockedDecrement((volatile LONG *)(*(_DWORD *)(v2 + 4) + 48));
  }
  CRWLock::ReadUnlock(&unk_4E187C);
}
// 4E1870: using guessed type int dword_4E1870[3];

//----- (00441D60) --------------------------------------------------------
_DWORD *__thiscall CMonsterMagic::CMonsterMagic(CMonsterMagic *this, int nMap, CSMap *pMap, int nDir, int nMagic, __int64 dwTime)
{
  sub_439AF0(this);
  this->__vftable = (CMonsterMagic_vtbl *)&off_4B8680;
  this->m_nMap = nMap;
  this->m_pMap = pMap;
  this->m_nDir = nDir;
  this->m_dwNextAction = dwTime + GetTickCount();
  this->m_prtyPt.nMinMagic = nMagic;
  this->m_prtyPt.nMaxMagic = nMagic;
  *(&this->m_nOperator + 1) = 0;
  return &this->__vftable;
}
// 441D60: inconsistent function type and number of purged bytes
// 4B8680: using guessed type int (__stdcall *off_4B8680)(int);

//----- (00441DE0) --------------------------------------------------------
CMonster *__cdecl CMonsterMagic::Create(int nIndex, int nMap, tagPOINT *ptPixel, int nDir, CChar *pParent, int nMagic, int dwTime)
{
  CMonster *result; // eax
  int v8; // eax
  int v9; // eax
  char *v10; // eax
  int m_nId; // eax
  tagPOINT m_ptPixel; // [esp-34h] [ebp-60h]
  int m_nDir; // [esp-2Ch] [ebp-58h]
  int m_nCurHP; // [esp-28h] [ebp-54h]
  int m_nMaxHP; // [esp-24h] [ebp-50h]
  int m_nGState; // [esp-20h] [ebp-4Ch]
  __int64 m_nMState; // [esp-1Ch] [ebp-48h]
  int szGuildName; // [esp-14h] [ebp-40h]
  __int64 v19; // [esp+0h] [ebp-2Ch]
  CMonster *v20; // [esp+4h] [ebp-28h]
  CMonsterMagic *v21; // [esp+10h] [ebp-1Ch]
  tagPOINT ptTile; // [esp+14h] [ebp-18h] BYREF
  int ptTile_4; // [esp+1Ch] [ebp-10h]
  std::_Tree<std::_Tmap_traits<int,CInitMonster *,std::less<int>,std::allocator<std::pair<int const ,CInitMonster *> >,0> >::iterator *pMap; // [esp+20h] [ebp-Ch]
  CMonster *v25; // [esp+24h] [ebp-8h] BYREF
  CMonster *pMonster; // [esp+28h] [ebp-4h]

  pMap = (std::_Tree<std::_Tmap_traits<int,CInitMonster *,std::less<int>,std::allocator<std::pair<int const ,CInitMonster *> >,0> >::iterator *)CSMap::FindSMap(nMap);
  if ( pMap )
  {
    if ( CSMap::IsValidTile((CSMap *)pMap, ptPixel, 0) )
    {
      CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
      sub_44AE20(dword_4E1820, &v25, &nIndex);
      v8 = sub_430C20(dword_4E1820, (int)&ptTile);
      if ( (unsigned __int8)unknown_libname_8(v8) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C);
        result = 0;
      }
      else
      {
        v21 = (CMonsterMagic *)operator new(0x218u);
        if ( v21 )
        {
          LODWORD(v19) = dwTime;
          v20 = (CMonster *)CMonsterMagic::CMonsterMagic(v21, nMap, (CSMap *)pMap, nDir, nMagic, v19);
        }
        else
        {
          v20 = 0;
        }
        pMonster = v20;
        CChar::SetXY(v20, ptPixel);
        v9 = sub_420250(&v25);
        pMonster->SetProperty(pMonster, *(CInitMonster **)(v9 + 4));
        CIOCriticalSection::Leave((int)&unk_4E182C);
        CChar::Lock(pMonster);
        ptTile.y = ptPixel->x >> 5;
        ptTile_4 = ptPixel->y >> 5;
        if ( CSMap::SetOnMap(pMonster->m_pMap, pMonster, (const tagPOINT *)&ptTile.y) )
        {
          pMonster->Add(pMonster, pParent);
          v10 = pMonster->GetOperatorName(pMonster);
          szGuildName = ((int (__thiscall *)(CMonster *, int, int, char *))pMonster->GetGuildName)(
                          pMonster,
                          pMonster->m_pInit->m_nRace,
                          pMonster->m_nGID,
                          v10);
          m_nMState = pMonster->m_nMState;
          m_nGState = pMonster->m_nGState;
          m_nMaxHP = CChar::GetMaxHP(pMonster);
          m_nCurHP = pMonster->m_nCurHP;
          m_nDir = pMonster->m_nDir;
          m_ptPixel = pMonster->m_ptPixel;
          m_nId = CBase::Id(pMonster);
          CChar::WriteInSight(
            pMonster,
            S2C_CREATEMONSTER,
            "wdddwdddIsbds",
            pMonster->m_pInit->m_nIndex,
            m_nId,
            m_ptPixel.x,
            m_ptPixel.y,
            m_nDir,
            m_nCurHP,
            m_nMaxHP,
            m_nGState,
            m_nMState,
            szGuildName);
          CChar::Unlock(pMonster);
          result = pMonster;
        }
        else
        {
          CChar::Unlock(pMonster);
          if ( pMonster )
            ((void (__thiscall *)(CMonster *, int))pMonster->~CIOObject)(pMonster, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterMagic::Create() not find Map (map:%d)", nMap);
    result = 0;
  }
  return result;
}
// 441EA4: variable 'v19' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00442030) --------------------------------------------------------
void __thiscall CMonsterMagic::Tick(CMonsterMagic *this)
{
  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::Lock(this);
    if ( this->m_dwNextAction < GetTickCount() )
    {
LABEL_3:
      CChar::Unlock(this);
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CBase::Delete(this);
      return;
    }
    if ( this->m_pParent )
    {
      if ( CBase::IsDeleted(this->m_pParent) )
        goto LABEL_3;
      this->m_skill.m_pCurSkill->ExcuteM(this->m_skill.m_pCurSkill, this, this);
    }
    CChar::Unlock(this);
  }
}

//----- (00442110) --------------------------------------------------------
int __thiscall CMonsterMagic::SetProperty(CMonsterMagic *this, CInitMonster *pInit)
{
  this->m_pInit = pInit;
  strcpy(this->m_szName, pInit->m_szName);
  CMonsterSkill::LoadSkill(&this->m_skill, this);
  return CMonsterSkill::SetCurSkillDefault(&this->m_skill);
}
/* Orphan comments:
TODO: need some work here missing variables are probably just 0.
*/

//----- (00442160) --------------------------------------------------------
void __thiscall CMonsterMagic::Add(CMonsterMagic *this, CChar *pParent)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v2; // eax
  char v4[8]; // [esp+4h] [ebp-18h] BYREF
  int v5; // [esp+Ch] [ebp-10h]
  CMonsterMagic *v6; // [esp+10h] [ebp-Ch]
  char v7[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef((int)this);
  CMonsterObject::Insert((CMonsterObject *)&unk_4E1A00, &this->m_link);
  CRWLock::WriteLock(&unk_4E1858);
  v6 = this;
  v5 = this->m_nId;
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v7);
  sub_445DF0(
    (int)dword_4E184C,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v2);
  CRWLock::WriteUnlock(&unk_4E1858);
  if ( pParent )
  {
    CIOObject::AddRef((int)pParent);
    this->m_pParent = pParent;
  }
}
// 4421B7: variable 'v2' is possibly undefined
// 4E184C: using guessed type int dword_4E184C[3];

//----- (004421F0) --------------------------------------------------------
void __thiscall CMonsterBlackBug::Tick(CMonsterBlackBug *this)
{
  int nMaxHP; // [esp+4h] [ebp-Ch]
  int nSkill; // [esp+8h] [ebp-8h]
  unsigned int dwCurTick; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    dwCurTick = GetTickCount();
    if ( CChar::IsGState(this, 0x2000) && dwCurTick >= this->m_dwNextMove )
    {
      this->SubGState(this, 0x2000);
      CChar::Unlock(this);
    }
    else
    {
      nMaxHP = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < nMaxHP && dwCurTick >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, nMaxHP);
        CMonsterReal::ResetHostility(this);
      }
      if ( !sub_40F5F0(&this->m_skill) )
      {
        CMonsterEgg::OnSummon((CMonsterEgg *)this);
        nSkill = -1;
        if ( !this->m_dwTick[0] )
          this->m_dwTick[0] = dwCurTick + 12000;
        if ( this->m_dwTick[0] <= dwCurTick )
        {
          this->m_dwTick[0] = dwCurTick + 120000;
          if ( this->m_nAIState != 4 )
            nSkill = 16;
        }
        if ( nSkill >= 0 )
        {
          if ( CMonsterSkill::SetCurSkill(&this->m_skill, nSkill) )
            this->m_nAIState = 5;
        }
      }
      CChar::Unlock(this);
    }
  }
}
// 442315: conditional instruction was optimized away because of '%nSkill.4==FFFFFFFF'
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00442360) --------------------------------------------------------
void __thiscall CMonsterReal::Die(CMonsterReal *this, CChar *pChar, int bFatal, int *bParty, int *nKeyID)
{
  __int64 v5; // [esp-4h] [ebp-Ch]
  CChar *a5; // [esp+0h] [ebp-8h]
  int nBestID; // [esp+4h] [ebp-4h] BYREF

  HIDWORD(v5) = this;
  this->m_nCurHP = 0;
  pChar->InfoDie(pChar, this->m_nId, bFatal);
  nBestID = 0;
  CMonsterReal::AllotExp((CMonsterReal *)HIDWORD(v5), bParty, nKeyID, &nBestID);
  LODWORD(v5) = pChar->GetDropItemMask(pChar);
  CInitMonster::DropItem(*(CInitMonster **)(HIDWORD(v5) + 440), (CMonster *)HIDWORD(v5), *bParty, *nKeyID, nBestID, v5);
  CChar::CancelAllBuff(a5);
  CChar::WriteInSight(a5, S2C_ACTION, "db", a5->m_nId, 9);
}
// 4423DB: variable 'a5' is possibly undefined

//----- (00442410) --------------------------------------------------------
int __thiscall CMonsterBlackBug::Damage(CMonsterBlackBug *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-20h]
  int bPhysical; // [esp+4h] [ebp-1Ch] MAPDST
  char v11[4]; // [esp+Ch] [ebp-14h] BYREF
  int a2a; // [esp+10h] [ebp-10h] BYREF
  int nTotalDamage; // [esp+18h] [ebp-8h]
  int nDamage; // [esp+1Ch] [ebp-4h]

  if ( this->IsIgnore(this) )
    return 1;
  if ( pSkill )
    bPhysical = pSkill->IsPhysical(pSkill);
  else
    bPhysical = 1;
  nDamage = CChar::GetFinalDamage(this, pChar, nAttack, bPhysical);
  if ( nDamage > 0 )
  {
    CMonsterReal::ManageBuff(this);
    CChar::Lock(this);
    if ( CMonsterReal::ApplyDamage(this, pChar, nAttack, nDamage, nNetDamage, bFatal, nPalsyDamage, pSkill) )
    {
      nTotalDamage = *nPalsyDamage + *nNetDamage;
      if ( pSkill )
        v8 = pSkill->GetHostility(pSkill);
      else
        v8 = 0;
      this->AddHostility(this, pChar, nTotalDamage, v8);
      if ( this->m_nCurHP > 0 )
      {
        this->Reaction(this, nTotalDamage, bPhysical);
        CChar::Unlock(this);
      }
      else
      {
        a2a = 0;
        *(_DWORD *)v11 = 0;
        if ( Random(1, 100) > 60 )
        {
          this->Summon(this, 312, 0, 3, 1);
          CMonsterEgg::OnSummon((CMonsterEgg *)this);
        }
        this->Die(this, pChar, *bFatal, &a2a, (int *)v11);
        CChar::Unlock(this);
        CMonsterReal::AllotTransformExp(this, a2a, *(int *)v11);
        CBase::Delete(this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(this);
      result = 1;
    }
  }
  else
  {
    *nPalsyDamage = 0;
    *nNetDamage = 0;
    result = 0;
  }
  return result;
}

//----- (004425E0) --------------------------------------------------------
void __thiscall CMonsterBlackBug::UpdateChild(CMonsterBlackBug *this, int nMonIndex)
{
  CGenMonster *i; // [esp+4h] [ebp-4h]

  if ( !CBase::IsDeleted(this) )
  {
    CChar::Lock(this);
    for ( i = this->m_pGen; i && i->m_nIndex != nMonIndex; i = i->m_pNextGen )
      ;
    if ( i )
    {
      --i->m_nMax;
      --i->m_nLive;
    }
    CChar::Unlock(this);
  }
  sub_40AD90(this, nMonIndex);
}

//----- (00442670) --------------------------------------------------------
void __thiscall CMonsterBlackBug::Summon(CMonsterBlackBug *this, int nMonIndex, int nRange, int nMax, int nNum)
{
  CGenMonster *pGen_; // [esp+0h] [ebp-14h]
  CGenMonster *v7; // [esp+8h] [ebp-Ch]
  CGenMonster *pGen; // [esp+10h] [ebp-4h]

  for ( pGen = this->m_pGen; pGen && pGen->m_nIndex != nMonIndex; pGen = pGen->m_pNextGen )
    ;
  if ( pGen )
  {
    pGen->m_nMax += nNum;
    if ( pGen->m_nMax > nMax )
      pGen->m_nMax = nMax;
  }
  else
  {
    v7 = (CGenMonster *)operator new(0x58u);
    if ( v7 )
      pGen_ = CGenMonster::CGenMonster(v7, this, nMonIndex, nRange, nNum);
    else
      pGen_ = 0;
    pGen_->m_pNextGen = this->m_pGen;
    this->m_pGen = pGen_;
  }
}

//----- (00442730) --------------------------------------------------------
void __thiscall CMonsterSiegeGunRuins::AI(CMonsterSiegeGunRuins *this)
{
  if ( !CNPC::IsRemoved((CNPC *)this) && !this->IsIgnore(this) )
  {
    CChar::Lock(this);
    if ( this->m_pTarget )
    {
      if ( !CChar::IsNormal(this->m_pTarget) )
      {
        this->RemoveHostility(this, this->m_pTarget);
        this->SetTarget(this, 0);
      }
    }
    CChar::Unlock(this);
  }
}

//----- (004427C0) --------------------------------------------------------
void __thiscall CMonsterEgg::Tick(CMonsterEgg *this)
{
  int v2; // [esp+8h] [ebp-8h]
  unsigned int v3; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::Lock(this);
    v3 = GetTickCount();
    if ( this->m_dwNextAction >= GetTickCount() )
    {
      v2 = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < v2 && v3 >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, v2);
        CMonsterReal::ResetHostility(this);
      }
      CChar::Unlock(this);
    }
    else
    {
      this->InfoDie(this, this->m_nId, 0);
      this->Summon(this, 313, 1, 3, 2);
      CMonsterEgg::OnSummon(this);
      CChar::CancelAllBuff(this);
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CChar::Unlock(this);
      CBase::Delete(this);
    }
  }
}

//----- (004428D0) --------------------------------------------------------
int __thiscall CMonsterEgg::Summon(CMonsterEgg *this, int nMonIndex, int nRange, int nMax, int nNum)
{
  int result; // eax
  CGenMonster *pGen_; // [esp+0h] [ebp-14h]
  CGenMonster *v8; // [esp+8h] [ebp-Ch]
  CGenMonster *pGen; // [esp+10h] [ebp-4h]

  for ( pGen = this->m_pGen; pGen && pGen->m_nIndex != nMonIndex; pGen = pGen->m_pNextGen )
    ;
  if ( pGen )
  {
    pGen->m_nMax += nNum;
    if ( pGen->m_nMax > nMax )
      pGen->m_nMax = nMax;
  }
  else
  {
    v8 = (CGenMonster *)operator new(0x58u);
    if ( v8 )
      pGen_ = CGenMonster::CGenMonster(v8, this, nMonIndex, nRange, nNum);
    else
      pGen_ = 0;
    pGen_->m_pNextGen = this->m_pGen;
    this->m_pGen = pGen_;
  }
  CMonsterEgg::OnSummon(this);
  return result;
}

//----- (004429A0) --------------------------------------------------------
void __thiscall CMonsterEgg::OnSummon(CMonsterEgg *this)
{
  int n; // [esp+4h] [ebp-8h]
  CGenMonster *pGen; // [esp+8h] [ebp-4h]

  for ( pGen = this->m_pGen; pGen; pGen = pGen->m_pNextGen )
  {
    for ( n = 0; n < 3 && pGen->m_nLive < pGen->m_nMax && CMonster::Create(pGen, this); ++n )
      InterlockedIncrement(&pGen->m_nLive);
  }
}

//----- (00442A20) --------------------------------------------------------
void __thiscall CMonsterCocoon::Tick(CMonsterCocoon *this)
{
  int nMaxHP; // [esp+4h] [ebp-8h]
  unsigned int dwCurTick; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((CNPC *)this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    dwCurTick = GetTickCount();
    if ( dwCurTick < this->m_dwTick[0] )
    {
      nMaxHP = CChar::GetMaxHP(this);
      if ( this->m_nCurHP < nMaxHP && dwCurTick >= this->m_dwResetHP )
      {
        this->UpdateProperty(this, 7, 1, nMaxHP);
        CMonsterReal::ResetHostility(this);
      }
      CChar::Unlock(this);
    }
    else
    {
      CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
      CChar::Unlock(this);
      CBase::Delete(this);
    }
  }
}

//----- (00442AF0) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __cdecl CMonsterMaguniMaster::Create(CMonster *pOwner, CChar *pChar)
{
  int v2; // eax
  int v3; // ecx
  char *v4; // eax
  int m_nID; // eax
  tagPOINT m_ptPixel; // [esp-30h] [ebp-6Ch]
  int m_nDir; // [esp-28h] [ebp-64h]
  int m_nCurHP; // [esp-24h] [ebp-60h]
  int m_nMaxHP; // [esp-20h] [ebp-5Ch]
  int m_nGState; // [esp-1Ch] [ebp-58h]
  __int64 m_nMState; // [esp-18h] [ebp-54h]
  int szGuildName; // [esp-10h] [ebp-4Ch]
  CMonsterMaguniMaster *v13; // [esp+4h] [ebp-38h]
  char v14[4]; // [esp+10h] [ebp-2Ch] BYREF
  int v15; // [esp+14h] [ebp-28h] BYREF
  CMemory **v16; // [esp+18h] [ebp-24h]
  CInitMonster *pInit; // [esp+1Ch] [ebp-20h]
  tagPOINT ptTile; // [esp+20h] [ebp-1Ch] BYREF
  CSMap *pMap; // [esp+28h] [ebp-14h]
  tagPOINT ptPixel; // [esp+2Ch] [ebp-10h] OVERLAPPED BYREF
  CMonsterMaguniMaster *pMonster; // [esp+34h] [ebp-8h]
  int ptP_12; // [esp+38h] [ebp-4h] BYREF

  pMap = CSMap::FindSMap(4);
  if ( pMap )
  {
    v16 = operator new(0x2B0u);
    if ( v16 )
      v13 = (CMonsterMaguniMaster *)sub_442DF0(v16);
    else
      v13 = 0;
    pMonster = v13;
    CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
    v15 = 329;
    sub_44AE20(dword_4E1820, &ptP_12, &v15);
    v2 = sub_430C20(dword_4E1820, (int)v14);
    if ( (unsigned __int8)unknown_libname_8(v2)
      || (pInit = *(CInitMonster **)(sub_420250(&ptP_12) + 4),
          (pInit->m_dwCountry & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C);
    }
    else
    {
      v3 = pOwner->m_ptPixel.y;
      ptPixel.x = pOwner->m_ptPixel.x;
      ptPixel.y = v3;
      ptPixel.x += Random(0, 16);
      ptPixel.y += Random(0, 16);
      pMonster->m_nMap = 4;
      pMonster->m_pMap = pMap;
      CChar::SetXY(pMonster, &ptPixel);
      CChar::SetDirection(pMonster, pChar->m_ptPixel.x - pOwner->m_ptPixel.x, pChar->m_ptPixel.y - pOwner->m_ptPixel.y);
      pMonster->SetProperty(pMonster, pInit);
      pMonster->m_bAggressive = 1;
      memset(pMonster->m_dwTick, 0, sizeof(pMonster->m_dwTick));
      pMonster->m_dwNextAction = GetTickCount() + 10000;
      pMonster->m_dwNextMove = pMonster->m_dwNextAction;
      CIOCriticalSection::Leave((int)&unk_4E182C);
      CChar::Lock(pMonster);
      ptTile.x = ptPixel.x >> 5;
      ptTile.y = ptPixel.y >> 5;
      if ( CSMap::SetOnMap(pMonster->m_pMap, pMonster, &ptTile) )
      {
        pMonster->Add(pMonster, 0);
        v4 = pMonster->GetOperatorName(pMonster);
        szGuildName = ((int (__thiscall *)(CMonsterMaguniMaster *, int, int, char *))pMonster->GetGuildName)(
                        pMonster,
                        pMonster->m_pInit->m_nRace | 0x80,
                        pMonster->m_nGID,
                        v4);
        m_nMState = pMonster->m_nMState;
        m_nGState = pMonster->m_nGState;
        m_nMaxHP = CChar::GetMaxHP(pMonster);
        m_nCurHP = pMonster->m_nCurHP;
        m_nDir = pMonster->m_nDir;
        m_ptPixel = pMonster->m_ptPixel;
        m_nID = CBase::Id(pMonster);
        CChar::WriteInSight(
          pMonster,
          S2C_CREATEMONSTER,
          "wdddwdddIsbds",
          pMonster->m_pInit->m_nIndex,
          m_nID,
          m_ptPixel.x,
          m_ptPixel.y,
          m_nDir,
          m_nCurHP,
          m_nMaxHP,
          m_nGState,
          m_nMState,
          szGuildName);
        CChar::Unlock(pMonster);
      }
      else
      {
        CChar::Unlock(pMonster);
        if ( pMonster )
          ((void (__thiscall *)(CMonsterMaguniMaster *, int))pMonster->~CIOObject)(pMonster, 1);
      }
    }
  }
}
// 442AF0: variables would overlap: lvar "ptPixel" ^70.8(user-defined) and stkvar "pMonster" ^70.16(has user info)
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00442DF0) --------------------------------------------------------
_DWORD *__thiscall sub_442DF0(_DWORD *this)
{
  CMonsterReal::CMonsterReal(this);
  *this = &off_4B8A90;
  return this;
}
// 4B8A90: using guessed type int (__stdcall *off_4B8A90)(int);

//----- (00442E10) --------------------------------------------------------
void __thiscall CMonsterMaguniMaster::Tick(int this)
{
  int v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  DWORD v4; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::RefreshBuff((std::locale::facet **)this);
    CChar::Lock((CIOCriticalSection *)this);
    v4 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 0x2000) && v4 >= *(_DWORD *)(this + 556) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 0x2000);
      CChar::Unlock((CIOCriticalSection *)this);
    }
    else
    {
      v2 = CChar::GetMaxHP((CPlayer *)this);
      if ( *(_DWORD *)(this + 272) < v2 && v4 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v2);
        CMonsterReal::ResetHostility((CIOCriticalSection *)this);
      }
      if ( *(_DWORD *)(this + 476) && !sub_40F5F0(this + 488) && !sub_446110((void *)(this + 560)) )
      {
        v3 = -1;
        if ( !*(_DWORD *)(this + 668) )
          *(_DWORD *)(this + 668) = v4 + 120000;
        if ( *(_DWORD *)(this + 668) <= v4 )
        {
          *(_DWORD *)(this + 668) = v4 + 100000;
          if ( Random(1, 100) <= 90 )
            v3 = 17;
        }
        if ( *(_DWORD *)(this + 672) <= v4 )
        {
          *(_DWORD *)(this + 672) = v4 + 18000;
          if ( v3 < 0 && Random(1, 100) <= 70 )
            v3 = 19;
        }
        if ( *(_DWORD *)(this + 676) <= v4 )
        {
          *(_DWORD *)(this + 676) = v4 + 47000;
          if ( v3 < 0 && Random(1, 100) <= 80 )
            v3 = 20;
        }
        if ( *(_DWORD *)(this + 680) <= v4 )
        {
          *(_DWORD *)(this + 680) = v4 + 11000;
          if ( v3 < 0 && Random(1, 100) <= 80 )
            v3 = 18;
        }
        if ( v3 >= 0 )
        {
          if ( CMonsterSkill::SetCurSkill((_DWORD *)(this + 488), v3) )
            *(_DWORD *)(this + 480) = 5;
        }
      }
      CChar::Unlock((CIOCriticalSection *)this);
    }
  }
}
// 442F4D: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00443060) --------------------------------------------------------
CMonsterBigBirdMother *__thiscall CMonsterBigBirdMother::CMonsterBigBirdMother(CMonsterBigBirdMother *this)
{
  CMonsterReal::CMonsterReal(this);
  *(_DWORD *)this = &off_4B9470;
  *((_DWORD *)this + 169) = 0;
  return this;
}
// 4B9470: using guessed type int (__stdcall *off_4B9470)(int);

//----- (00443090) --------------------------------------------------------
void __cdecl CMonsterBigBirdMother::Create()
{
  int v0; // eax
  int v1; // eax
  int v2; // eax
  int v3; // [esp-30h] [ebp-6Ch]
  int v4; // [esp-2Ch] [ebp-68h]
  int v5; // [esp-28h] [ebp-64h]
  int v6; // [esp-24h] [ebp-60h]
  int v7; // [esp-20h] [ebp-5Ch]
  int v8; // [esp-1Ch] [ebp-58h]
  int v9; // [esp-18h] [ebp-54h]
  int v10; // [esp-14h] [ebp-50h]
  int v11; // [esp-10h] [ebp-4Ch]
  CMonsterBigBirdMother *v12; // [esp+4h] [ebp-38h]
  char v13[4]; // [esp+10h] [ebp-2Ch] BYREF
  int v14; // [esp+14h] [ebp-28h] BYREF
  CMemory **v15; // [esp+18h] [ebp-24h]
  CIOCriticalSection *v16; // [esp+1Ch] [ebp-20h]
  tagPOINT a5; // [esp+20h] [ebp-1Ch] BYREF
  CSMap *v18; // [esp+28h] [ebp-14h]
  tagRECT ptP; // [esp+2Ch] [ebp-10h] BYREF

  v18 = CSMap::FindSMap(4);
  if ( v18 )
  {
    v15 = operator new(0x2A8u);
    if ( v15 )
      v12 = CMonsterBigBirdMother::CMonsterBigBirdMother((CMonsterBigBirdMother *)v15);
    else
      v12 = 0;
    ptP.right = (LONG)v12;
    CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
    v14 = 317;
    sub_44AE20(dword_4E1820, &ptP.bottom, &v14);
    v0 = sub_430C20(dword_4E1820, (int)v13);
    if ( (unsigned __int8)unknown_libname_8(v0)
      || (v16 = *(CIOCriticalSection **)(sub_420250(&ptP.bottom) + 4),
          ((int)v16[9].m_critical_section.LockSemaphore & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C);
    }
    else
    {
      ptP.left = 20187;
      ptP.top = 66717;
      *(_DWORD *)(ptP.right + 316) = 4;
      *(_DWORD *)(ptP.right + 320) = v18;
      CChar::SetXY((CChar *)ptP.right, (const tagPOINT *)&ptP);
      CChar::SetDirection((CChar *)ptP.right, -2, 3);
      (*(void (__thiscall **)(LONG, CIOCriticalSection *))(*(_DWORD *)ptP.right + 192))(ptP.right, v16);
      *(_DWORD *)(ptP.right + 476) = 1;
      memset((void *)(ptP.right + 664), 0, 0xCu);
      *(_DWORD *)(ptP.right + 468) = GetTickCount() + 10000;
      *(_DWORD *)(ptP.right + 556) = *(_DWORD *)(ptP.right + 468);
      CIOCriticalSection::Leave((int)&unk_4E182C);
      CChar::Lock((CChar *)ptP.right);
      a5.x = ptP.left >> 5;
      a5.y = ptP.top >> 5;
      if ( CSMap::SetOnMap(*(CSMap **)(ptP.right + 320), (CBase *)ptP.right, &a5) )
      {
        (*(void (__thiscall **)(LONG, _DWORD))(*(_DWORD *)ptP.right + 196))(ptP.right, 0);
        v1 = (*(int (__thiscall **)(LONG))(*(_DWORD *)ptP.right + 240))(ptP.right);
        v11 = (*(int (__thiscall **)(LONG, int, _DWORD, int))(*(_DWORD *)ptP.right + 224))(
                ptP.right,
                *(_DWORD *)(*(_DWORD *)(ptP.right + 440) + 64) | 0x80,
                *(_DWORD *)(ptP.right + 524),
                v1);
        v10 = *(_DWORD *)(ptP.right + 292);
        v9 = *(_DWORD *)(ptP.right + 288);
        v8 = *(_DWORD *)(ptP.right + 280);
        v7 = CChar::GetMaxHP((CChar *)ptP.right);
        v6 = *(_DWORD *)(ptP.right + 272);
        v5 = *(_DWORD *)(ptP.right + 348);
        v4 = *(_DWORD *)(ptP.right + 336);
        v3 = *(_DWORD *)(ptP.right + 332);
        v2 = CBase::Id((CBase *)ptP.right);
        CChar::WriteInSight(
          (CChar *)ptP.right,
          S2C_CREATEMONSTER,
          "wdddwdddIsbds",
          *(_DWORD *)(*(_DWORD *)(ptP.right + 440) + 60),
          v2,
          v3,
          v4,
          v5,
          v6,
          v7,
          v8,
          v9,
          v10,
          v11);
        CChar::Unlock((CChar *)ptP.right);
      }
      else
      {
        CChar::Unlock((CChar *)ptP.right);
        if ( ptP.right )
          (**(void (__thiscall ***)(LONG, int))ptP.right)(ptP.right, 1);
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00443340) --------------------------------------------------------
void __thiscall CMonsterBigBirdMother::Tick(int this)
{
  int v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  DWORD v4; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::RefreshBuff((std::locale::facet **)this);
    CChar::Lock((CIOCriticalSection *)this);
    v4 = GetTickCount();
    v2 = CChar::GetMaxHP((CPlayer *)this);
    if ( *(_DWORD *)(this + 272) < v2 && v4 >= *(_DWORD *)(this + 472) )
    {
      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v2);
      CMonsterReal::ResetHostility((CIOCriticalSection *)this);
    }
    if ( !sub_40F5F0(this + 488) && !sub_446110((void *)(this + 560)) )
    {
      (*(void (__thiscall **)(int))(*(_DWORD *)this + 260))(this);
      v3 = -1;
      if ( *(_DWORD *)(this + 664) <= v4 )
      {
        *(_DWORD *)(this + 664) = v4 + 30000;
        if ( Random(1, 100) <= 80 )
          v3 = 21;
      }
      if ( *(_DWORD *)(this + 668) <= v4 )
      {
        *(_DWORD *)(this + 668) = v4 + 37000;
        if ( v3 < 0 && Random(1, 100) <= 90 )
          v3 = 22;
      }
      if ( *(_DWORD *)(this + 672) <= v4 )
      {
        *(_DWORD *)(this + 672) = v4 + 72000;
        if ( v3 < 0 && Random(1, 100) <= 80 )
          v3 = 23;
      }
      if ( v3 >= 0 )
      {
        if ( CMonsterSkill::SetCurSkill((_DWORD *)(this + 488), v3) )
          *(_DWORD *)(this + 480) = 5;
      }
    }
    CChar::Unlock((CIOCriticalSection *)this);
  }
}
// 443426: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (004434F0) --------------------------------------------------------
CGenMonster *__thiscall CMonsterBigBirdMother::Summon(_DWORD *this, int a2, int a3, int a4, int a5)
{
  CGenMonster *result; // eax
  CGenMonster *v6; // [esp+0h] [ebp-14h]
  CGenMonster *v8; // [esp+8h] [ebp-Ch]
  CGenMonster *i; // [esp+10h] [ebp-4h]

  for ( i = (CGenMonster *)this[169]; i && i->m_nIndex != a2; i = i->m_pNextGen )
    ;
  if ( i )
  {
    result = i;
    i->m_nMax += a5;
    if ( i->m_nMax > a4 )
    {
      result = i;
      i->m_nMax = a4;
    }
  }
  else
  {
    v8 = (CGenMonster *)operator new(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster(v8, this, a2, a3, a5);
    else
      v6 = 0;
    v6->m_pNextGen = (CGenMonster *)this[169];
    result = v6;
    this[169] = v6;
  }
  return result;
}

//----- (004435B0) --------------------------------------------------------
_DWORD *__thiscall CMonsterBigBirdMother::OnSummon(_DWORD *this)
{
  _DWORD *result; // eax
  int i; // [esp+4h] [ebp-8h]
  _DWORD *a1; // [esp+8h] [ebp-4h]

  result = this;
  for ( a1 = (_DWORD *)this[169]; a1; a1 = result )
  {
    for ( i = 0; i < 3 && a1[12] < a1[11] && CMonster::Create(a1, (int)this); ++i )
      InterlockedIncrement(a1 + 12);
    result = (_DWORD *)a1[21];
  }
  return result;
}

//----- (00443630) --------------------------------------------------------
int __thiscall CMonsterBigBirdMother::Move(int this)
{
  int result; // eax
  unsigned int v2; // [esp+8h] [ebp-48h]
  int v3; // [esp+18h] [ebp-38h]
  __int64 v4; // [esp+1Ch] [ebp-34h]
  int a2[2]; // [esp+28h] [ebp-28h] BYREF
  __int64 v7; // [esp+30h] [ebp-20h]
  unsigned int a3; // [esp+3Ch] [ebp-14h] BYREF
  __int64 v9; // [esp+40h] [ebp-10h]
  int v10; // [esp+48h] [ebp-8h]
  unsigned int v11; // [esp+4Ch] [ebp-4h]

  v4 = CChar::IsMState((_QWORD *)this, 268436224i64);
  result = HIDWORD(v4) | v4;
  if ( !v4 )
  {
    result = GetTickCount();
    v11 = result;
    v3 = *(_DWORD *)(this + 480);
    switch ( v3 )
    {
      case 1:
        result = this;
        if ( v11 >= *(_DWORD *)(this + 556) )
        {
          result = CMonsterReal::ScanSight((int *)this);
          v10 = result;
          if ( result )
          {
            *(_DWORD *)(this + 656) = 0;
            result = (*(int (__thiscall **)(int, int))(*(_DWORD *)this + 188))(this, v10);
          }
        }
        break;
      case 2:
        if ( !dword_4E1A68 )
        {
          result = v11;
          dword_4E1A68 = v11;
        }
        if ( v11 >= *(_DWORD *)(this + 556) )
        {
          v9 = PowDistance64((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 464) + 332));
          if ( *(_DWORD *)(this + 316) == *(_DWORD *)(*(_DWORD *)(this + 464) + 316)
            && v9 <= *(_DWORD *)(this + 548) * *(_DWORD *)(this + 548) )
          {
            result = *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312);
            v2 = result;
            if ( SHIDWORD(v9) > result >> 31 || SHIDWORD(v9) >= result >> 31 && (result = v9, (unsigned int)v9 > v2) )
            {
              *(_DWORD *)(this + 480) = 1;
              *(_DWORD *)(this + 556) = v11;
              result = v11;
              *(_DWORD *)(this + 468) = v11;
            }
            else
            {
              *(_DWORD *)(this + 480) = 4;
              dword_4E1A68 = 0;
            }
          }
          else
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
            result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
            dword_4E1A68 = 0;
          }
        }
        break;
      case 7:
        if ( *(_DWORD *)(this + 512) == 290 )
        {
          result = this;
          if ( v11 >= *(_DWORD *)(this + 556) )
          {
            v7 = PowDistance64((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 484) + 332));
            if ( v7 > *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312) )
            {
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, *(_DWORD *)(this + 484));
              a3 = (*(int (__thiscall **)(int, int))(*(_DWORD *)this + 152))(this, 1);
              if ( !CMonsterReal::GetChasePt(this, a2, &a3)
                || (result = CSMap::MoveMonster(*(char **)(this + 320), (CPlayer *)this, a2[0], a2[1], 0, 1)) == 0 )
              {
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
                result = this;
                *(_DWORD *)(this + 480) = 1;
              }
            }
            else
            {
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
              result = this;
              *(_DWORD *)(this + 480) = 1;
            }
          }
        }
        else
        {
          *(_DWORD *)(this + 480) = 1;
        }
        break;
    }
  }
  return result;
}
// 4E1A68: using guessed type int dword_4E1A68;

//----- (00443970) --------------------------------------------------------
int __thiscall CMonsterBigBirdMother::Damage(CIOCriticalSection *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-18h]
  int v9; // [esp+4h] [ebp-14h]
  int v11; // [esp+10h] [ebp-8h]
  int v12; // [esp+14h] [ebp-4h]

  if ( ((int (__thiscall *)(CIOCriticalSection *))this->m_critical_section.DebugInfo[7].Spare[1])(this) )
    return 1;
  if ( a7 )
    v9 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v9 = 1;
  v12 = CChar::GetFinalDamage(this, a2, a3, v9);
  if ( v12 > 0 )
  {
    CMonsterReal::ManageBuff(this);
    CChar::Lock(this);
    if ( CMonsterReal::ApplyDamage((int)this, (int)a2, a3, v12, a4, (int)a5, a6, a7) )
    {
      v11 = *a6 + *a4;
      if ( a7 )
        v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 24))(a7);
      else
        v8 = 0;
      ((void (__thiscall *)(CIOCriticalSection *, _DWORD *, int, int))this->m_critical_section.DebugInfo[6].ContentionCount)(
        this,
        a2,
        v11,
        v8);
      if ( (int)this[8].m_critical_section.LockSemaphore > 0 )
      {
        (*(void (__thiscall **)(CIOCriticalSection *, int, int))&this->m_critical_section.DebugInfo[8].Type)(
          this,
          v11,
          v9);
        CChar::Unlock(this);
      }
      else
      {
        this[8].m_critical_section.LockSemaphore = 0;
        (*(void (__thiscall **)(_DWORD *, unsigned int, _DWORD))(*a2 + 76))(a2, this->m_dwEIP[1], *a5);
        CChar::CancelAllBuff((std::locale::facet **)this);
        CChar::WriteInSight((int)this, 61, "db", this->m_dwEIP[1], 9);
        CChar::Unlock(this);
        CBase::Delete((CItem *)this);
        Sleep(0x157Cu);
        CMonsterBigBirdMaster::Create((int)this[14].m_critical_section.LockSemaphore);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (00443B30) --------------------------------------------------------
void __fastcall CMonsterBigBirdMother::Attack(int a1, int a2)
{
  int v2; // [esp-14h] [ebp-74h]
  int v3; // [esp-10h] [ebp-70h]
  int v4; // [esp-Ch] [ebp-6Ch]
  int v5; // [esp-8h] [ebp-68h]
  int v6; // [esp-4h] [ebp-64h]
  int a3; // [esp+0h] [ebp-60h]
  int v9; // [esp+30h] [ebp-30h] BYREF
  int v10; // [esp+34h] [ebp-2Ch] BYREF
  CIOObject *v11; // [esp+38h] [ebp-28h]
  int v12; // [esp+3Ch] [ebp-24h] BYREF
  int v13; // [esp+40h] [ebp-20h]
  int v14; // [esp+44h] [ebp-1Ch]
  int v15; // [esp+48h] [ebp-18h]
  CIOObject *v16; // [esp+4Ch] [ebp-14h]
  __int64 v17; // [esp+50h] [ebp-10h]
  DWORD v18; // [esp+5Ch] [ebp-4h]

  if ( !CChar::IsMState((CChar *)a1, 268435712i64) )
  {
    v18 = GetTickCount();
    if ( v18 >= *(_DWORD *)(a1 + 468) )
    {
      v17 = PowDistance64((const tagPOINT *)(a1 + 332), (const tagPOINT *)(*(_DWORD *)(a1 + 464) + 332));
      if ( *(_DWORD *)(a1 + 316) == *(_DWORD *)(*(_DWORD *)(a1 + 464) + 316)
        && v17 <= *(_DWORD *)(a1 + 548) * *(_DWORD *)(a1 + 548)
        && v17 <= *(_DWORD *)(a1 + 312) * *(_DWORD *)(a1 + 312)
        && *(_DWORD *)(a1 + 464) != *(_DWORD *)(a1 + 484) )
      {
        *(_DWORD *)(a1 + 468) = v18 + CChar::GetASpeed((CChar *)a1);
        *(_DWORD *)(a1 + 556) = *(_DWORD *)(a1 + 468);
        v16 = (CIOObject *)CSMap::GetPlayerListInRect(
                             *(CSMap **)(*(_DWORD *)(a1 + 464) + 320),
                             (const tagPOINT *)(*(_DWORD *)(a1 + 464) + 324),
                             20);
        v15 = 0;
        while ( v16 )
        {
          if ( ++v15 >= 7 )
            break;
          v11 = (CIOObject *)unknown_libname_7(v16);
          if ( !CChar::IsMState((CChar *)v11, 0x80000i64) )
          {
            CIOObject::AddRef(v11, (volatile int *)&v11[22]);
            v12 = 0;
            v9 = 0;
            v14 = 0;
            v13 = 0;
            v10 = (*(int (__thiscall **)(int, CIOObject *))(*(_DWORD *)a1 + 168))(a1, v11);
            v13 = ((int (__thiscall *)(CIOObject *, int))v11->__vftable[6].OnFree)(v11, a1);
            if ( !v13 )
            {
              if ( ((int (__thiscall *)(CIOObject *))v11->__vftable[2].OnTimerCallback)(v11) )
              {
                a3 = CChar::IsBState((CChar *)v11, 0x8000i64) ? -5 : 0;
                if ( CChar::CheckHit((CChar *)a1, (CChar *)v11, a3) )
                {
                  CChar::Unlock((CChar *)a1);
                  v2 = CChar::GetAttack((CChar *)a1);
                  v14 = ((int (__thiscall *)(CIOObject *, int, int, int *, int *, int *, _DWORD))v11->__vftable[3].~CIOObject)(
                          v11,
                          a1,
                          v2,
                          &v12,
                          &v9,
                          &v10,
                          0);
                  CChar::Lock((CChar *)a1);
                }
              }
              if ( !v14 )
                v11->__vftable[3].OnTimer(v11, a1);
              if ( v14 )
              {
                v6 = v14 | (2 * v9) | (4 * v13);
                v5 = v10;
                v4 = v12;
                v3 = CBase::Id((CBase *)v11);
                CChar::WriteInSight((CChar *)a1, S2C_ATTACK, "ddwwb", *(_DWORD *)(a1 + 28), v3, v4, v5, v6);
              }
              CIOObject::Release(v11, (volatile int *)&v11[22]);
            }
          }
          v16 = (CIOObject *)CBaseList::Pop((CBaseList *)v16);
        }
      }
      else
      {
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)a1 + 132))(a1, *(_DWORD *)(a1 + 464));
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)a1 + 188))(a1, 0);
        *(_DWORD *)(a1 + 480) = 1;
      }
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00443EE0) --------------------------------------------------------
void __thiscall CMonsterFireFlower::Tick(CIOCriticalSection *this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::Lock(this);
    v2 = -1;
    v3 = GetTickCount();
    if ( this[20].m_dwEIP[0] <= v3 )
    {
      v2 = 34;
      this[20].m_dwEIP[0] = v3 + 12000;
      this[20].m_dwEIP[1] = v3 + 7000;
    }
    if ( this[20].m_dwEIP[1] <= v3 && this[20].m_dwEIP[1] )
    {
      CChar::WriteInSight((int)this, 61, "db", this->m_dwEIP[1], 9);
      CChar::Unlock(this);
      CBase::Delete((CItem *)this);
    }
    else
    {
      if ( v2 >= 0 )
      {
        if ( CMonsterSkill::SetCurSkill(&this[15].m_critical_section.RecursionCount, v2) )
          this[15].m_critical_section.DebugInfo = (_RTL_CRITICAL_SECTION_DEBUG *)5;
      }
      CChar::Unlock(this);
    }
  }
}

//----- (00443FD0) --------------------------------------------------------
void __cdecl CMonsterBigBirdMaster::Create(int a1)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // [esp-30h] [ebp-6Ch]
  int v5; // [esp-2Ch] [ebp-68h]
  int v6; // [esp-28h] [ebp-64h]
  int v7; // [esp-24h] [ebp-60h]
  int v8; // [esp-20h] [ebp-5Ch]
  int v9; // [esp-1Ch] [ebp-58h]
  int v10; // [esp-18h] [ebp-54h]
  int v11; // [esp-14h] [ebp-50h]
  int v12; // [esp-10h] [ebp-4Ch]
  _DWORD *v13; // [esp+4h] [ebp-38h]
  char v14[4]; // [esp+10h] [ebp-2Ch] BYREF
  int v15; // [esp+14h] [ebp-28h] BYREF
  CMemory **v16; // [esp+18h] [ebp-24h]
  CIOCriticalSection *v17; // [esp+1Ch] [ebp-20h]
  tagPOINT a5; // [esp+20h] [ebp-1Ch] BYREF
  CSMap *v19; // [esp+28h] [ebp-14h]
  tagRECT ptP; // [esp+2Ch] [ebp-10h] BYREF

  v19 = CSMap::FindSMap(4);
  if ( v19 )
  {
    v16 = operator new(0x2B0u);
    if ( v16 )
      v13 = sub_444290(v16);
    else
      v13 = 0;
    ptP.right = (LONG)v13;
    CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
    v15 = 318;
    sub_44AE20(dword_4E1820, &ptP.bottom, &v15);
    v1 = sub_430C20(dword_4E1820, (int)v14);
    if ( (unsigned __int8)unknown_libname_8(v1)
      || (v17 = *(CIOCriticalSection **)(sub_420250(&ptP.bottom) + 4),
          ((int)v17[9].m_critical_section.LockSemaphore & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C);
    }
    else
    {
      ptP.left = 20187;
      ptP.top = 66717;
      *(_DWORD *)(ptP.right + 316) = 4;
      *(_DWORD *)(ptP.right + 320) = v19;
      CChar::SetXY((CChar *)ptP.right, (const tagPOINT *)&ptP);
      CChar::SetDirection((CChar *)ptP.right, -2, 3);
      (*(void (__thiscall **)(LONG, CIOCriticalSection *))(*(_DWORD *)ptP.right + 192))(ptP.right, v17);
      *(_DWORD *)(ptP.right + 476) = 1;
      *(_DWORD *)(ptP.right + 464) = a1;
      memset((void *)(ptP.right + 668), 0, 0x10u);
      *(_DWORD *)(ptP.right + 468) = GetTickCount() + 10000;
      *(_DWORD *)(ptP.right + 556) = *(_DWORD *)(ptP.right + 468);
      CIOCriticalSection::Leave((int)&unk_4E182C);
      CChar::Lock((CChar *)ptP.right);
      a5.x = ptP.left >> 5;
      a5.y = ptP.top >> 5;
      if ( CSMap::SetOnMap(*(CSMap **)(ptP.right + 320), (CBase *)ptP.right, &a5) )
      {
        (*(void (__thiscall **)(LONG, _DWORD))(*(_DWORD *)ptP.right + 196))(ptP.right, 0);
        v2 = (*(int (__thiscall **)(LONG))(*(_DWORD *)ptP.right + 240))(ptP.right);
        v12 = (*(int (__thiscall **)(LONG, int, _DWORD, int))(*(_DWORD *)ptP.right + 224))(
                ptP.right,
                *(_DWORD *)(*(_DWORD *)(ptP.right + 440) + 64) | 0x80,
                *(_DWORD *)(ptP.right + 524),
                v2);
        v11 = *(_DWORD *)(ptP.right + 292);
        v10 = *(_DWORD *)(ptP.right + 288);
        v9 = *(_DWORD *)(ptP.right + 280);
        v8 = CChar::GetMaxHP((CChar *)ptP.right);
        v7 = *(_DWORD *)(ptP.right + 272);
        v6 = *(_DWORD *)(ptP.right + 348);
        v5 = *(_DWORD *)(ptP.right + 336);
        v4 = *(_DWORD *)(ptP.right + 332);
        v3 = CBase::Id((CBase *)ptP.right);
        CChar::WriteInSight(
          (CChar *)ptP.right,
          S2C_CREATEMONSTER,
          "wdddwdddIsbds",
          *(_DWORD *)(*(_DWORD *)(ptP.right + 440) + 60),
          v3,
          v4,
          v5,
          v6,
          v7,
          v8,
          v9,
          v10,
          v11,
          v12);
        CChar::Unlock((CChar *)ptP.right);
      }
      else
      {
        CChar::Unlock((CChar *)ptP.right);
        if ( ptP.right )
          (**(void (__thiscall ***)(LONG, int))ptP.right)(ptP.right, 1);
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00444290) --------------------------------------------------------
_DWORD *__thiscall sub_444290(_DWORD *this)
{
  CMonsterReal::CMonsterReal(this);
  *this = &off_4B9578;
  return this;
}
// 4B9578: using guessed type int (__stdcall *off_4B9578)(int);

//----- (004442B0) --------------------------------------------------------
void __thiscall sub_4442B0(void *this)
{
  CMonsterReal::~CMonsterReal(this);
}

//----- (004442D0) --------------------------------------------------------
void __thiscall CMonsterBigBirdMaster::Tick(int this)
{
  int v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  DWORD v4; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::RefreshBuff((std::locale::facet **)this);
    CChar::Lock((CIOCriticalSection *)this);
    v4 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 0x2000) && v4 >= *(_DWORD *)(this + 556) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 0x2000);
      CChar::Unlock((CIOCriticalSection *)this);
    }
    else
    {
      v2 = CChar::GetMaxHP((CPlayer *)this);
      if ( *(_DWORD *)(this + 272) < v2 && v4 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v2);
        CMonsterReal::ResetHostility((CIOCriticalSection *)this);
      }
      if ( *(_DWORD *)(this + 476) && !sub_40F5F0(this + 488) && !sub_446110((void *)(this + 560)) )
      {
        v3 = -1;
        if ( !*(_DWORD *)(this + 668) )
          *(_DWORD *)(this + 668) = v4;
        if ( *(_DWORD *)(this + 272) <= 7 * v2 / 10 && !*(_DWORD *)(this + 680)
          || *(_DWORD *)(this + 272) <= 4 * v2 / 10 && *(_DWORD *)(this + 680) == 1
          || *(_DWORD *)(this + 272) <= v2 / 10 && *(_DWORD *)(this + 680) == 2 )
        {
          if ( *(_DWORD *)(this + 272) > v2 / 10 )
          {
            if ( *(_DWORD *)(this + 272) > 4 * v2 / 10 )
              *(_DWORD *)(this + 680) = 1;
            else
              *(_DWORD *)(this + 680) = 2;
          }
          else
          {
            *(_DWORD *)(this + 680) = 3;
          }
          v3 = 28;
        }
        if ( *(_DWORD *)(this + 668) <= v4 && v3 < 0 )
          v3 = 25;
        if ( *(_DWORD *)(this + 672) <= v4 )
          *(_DWORD *)(this + 672) = v4 + 18000;
        if ( *(_DWORD *)(this + 676) <= v4 )
        {
          *(_DWORD *)(this + 676) = v4 + 47000;
          if ( v3 < 0 && Random(1, 100) <= 80 )
            v3 = 27;
        }
        if ( v3 >= 0 )
        {
          if ( CMonsterSkill::SetCurSkill((_DWORD *)(this + 488), v3) )
            *(_DWORD *)(this + 480) = 5;
        }
      }
      CChar::Unlock((CIOCriticalSection *)this);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00444560) --------------------------------------------------------
void __thiscall CMonsterMaguniMaster::Die(int a1, int a5, int a6, int *a7, int *a8)
{
  __int64 _FFFFFFFC; // [esp-4h] [ebp-20h]
  CChar *a5a; // [esp+0h] [ebp-1Ch]
  tagPOINT ptP; // [esp+4h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+Ch] [ebp-10h] BYREF
  _DWORD *a1a; // [esp+14h] [ebp-8h]
  int a4; // [esp+18h] [ebp-4h] BYREF

  HIDWORD(_FFFFFFFC) = a1;
  *(_DWORD *)(a1 + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a5 + 76))(a5, *(_DWORD *)(a1 + 28), a6);
  a4 = 0;
  CMonsterReal::AllotExp((CMonsterReal *)HIDWORD(_FFFFFFFC), a7, a8, &a4);
  LODWORD(_FFFFFFFC) = (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 164))(a5);
  CInitMonster::DropItem(
    *(CInitMonster **)(HIDWORD(_FFFFFFFC) + 440),
    (CMonster *)HIDWORD(_FFFFFFFC),
    *a7,
    *a8,
    a4,
    _FFFFFFFC);
  if ( a5a[1].__vftable[1].SubMStateEx )
  {
    if ( a5a[1].__vftable[1].SubMState )
    {
      a1a = CItem::CreateItem((int)a5a[1].__vftable[1].SubMStateEx, 0, (int)a5a[1].__vftable[1].SubMState, -1);
      if ( a1a )
      {
        CChar::GetDropPt(a5a, &ptP);
        ptT.x = ptP.x >> 5;
        ptT.y = ptP.y >> 5;
        if ( CSMap::SetOnMap(a5a->m_pMap, (CBase *)a1a, &ptT) )
        {
          a1a[20] = 1;
          (*(void (__thiscall **)(_DWORD *, CChar *, tagPOINT *, tagPOINT *, int, int, int))(*a1a + 124))(
            a1a,
            a5a,
            &ptP,
            &ptT,
            1,
            *a7,
            *a8);
        }
      }
    }
  }
  CChar::CancelAllBuff(a5a);
  CChar::WriteInSight(a5a, S2C_ACTION, "db", a5a->m_nId, 9);
}
// 4445DB: variable 'a5a' is possibly undefined

//----- (004446D0) --------------------------------------------------------
int __thiscall CMonsterSiegeGun::CMonsterSiegeGun(int this, int a2, int a3, int a4, char *Source, int a6)
{
  CMonsterReal::CMonsterReal((_DWORD *)this);
  *(_DWORD *)this = &off_4B8CA0;
  *(_DWORD *)(this + 316) = a2;
  *(_DWORD *)(this + 320) = a3;
  *(_DWORD *)(this + 524) = a4;
  *(_DWORD *)(this + 280) = 0;
  *(_DWORD *)(this + 708) = a6;
  strcpy((char *)(this + 664), Source);
  *(_DWORD *)(this + 684) = 0;
  *(_DWORD *)(this + 712) = 1;
  return this;
}
// 4B8CA0: using guessed type int (__stdcall *off_4B8CA0)(int);

//----- (00444760) --------------------------------------------------------
CIOCriticalSection *__cdecl CMonsterSiegeGun::Create(int a1, int a2, int a3, int a4, int a5, char *Source, int a7)
{
  CIOCriticalSection *result; // eax
  int v8; // eax
  int v9; // eax
  tagPOINT v10; // [esp-34h] [ebp-64h]
  int v11; // [esp-2Ch] [ebp-5Ch]
  int v12; // [esp-28h] [ebp-58h]
  int v13; // [esp-24h] [ebp-54h]
  int v14; // [esp-20h] [ebp-50h]
  __int64 v15; // [esp-1Ch] [ebp-4Ch]
  CSkill **v16; // [esp-14h] [ebp-44h]
  int v17; // [esp-10h] [ebp-40h]
  int v18; // [esp-Ch] [ebp-3Ch]
  int v19; // [esp-8h] [ebp-38h]
  __int64 v20; // [esp-4h] [ebp-34h]
  CPlayer *v21; // [esp+4h] [ebp-2Ch]
  CMemory **v22; // [esp+10h] [ebp-20h]
  char v23[4]; // [esp+14h] [ebp-1Ch] BYREF
  CIOCriticalSection *v24; // [esp+18h] [ebp-18h]
  tagPOINT ptT; // [esp+1Ch] [ebp-14h] BYREF
  CSMap *v26; // [esp+24h] [ebp-Ch]
  char v27[4]; // [esp+28h] [ebp-8h] BYREF
  CPlayer *v28; // [esp+2Ch] [ebp-4h]

  v26 = CSMap::FindSMap(a2);
  if ( v26 )
  {
    LODWORD(v20) = 0;
    if ( CSMap::IsValidTile(v26, (const tagPOINT *)a3, v20) )
    {
      CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
      sub_44AE20(dword_4E1820, v27, &a1);
      v8 = sub_430C20(dword_4E1820, (int)v23);
      if ( (unsigned __int8)unknown_libname_8(v8)
        || (v24 = *(CIOCriticalSection **)(sub_420250(v27) + 4),
            ((int)v24[9].m_critical_section.LockSemaphore & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C);
        result = 0;
      }
      else
      {
        v22 = operator new(0x2D0u);
        if ( v22 )
          v21 = (CPlayer *)CMonsterSiegeGun::CMonsterSiegeGun((int)v22, a2, (int)v26, a5, Source, a7);
        else
          v21 = 0;
        v28 = v21;
        CChar::SetXY(v21, (const tagPOINT *)a3);
        CChar::SetDirection(v28, *(_DWORD *)a4 - *(_DWORD *)a3, *(_DWORD *)(a4 + 4) - *(_DWORD *)(a3 + 4));
        ((void (__thiscall *)(CPlayer *, CIOCriticalSection *))v28->__vftable[1].~CIOObject)(v28, v24);
        v28->m_skill.m_pSkill[18] = (CSkill *)v28->m_nDir;
        v28->m_nStandard = a1;
        CIOCriticalSection::Leave((int)&unk_4E182C);
        CChar::Lock(v28);
        ptT.x = *(int *)a3 >> 5;
        ptT.y = *(int *)(a3 + 4) >> 5;
        if ( CSMap::SetOnMap(v28->m_pMap, v28, &ptT) )
        {
          ((void (__thiscall *)(CPlayer *, _DWORD))v28->__vftable[1].OnFree)(v28, 0);
          v19 = ((int (__thiscall *)(CPlayer *))v28->__vftable[1].SendMove)(v28);
          v18 = *(_DWORD *)&v28->m_szGuildClassTitle[4];
          v17 = *(_DWORD *)(v28->m_nSocketRef + 64);
          v16 = &v28->m_skill.m_pSkill[8];
          v15 = v28->m_nMState;
          v14 = v28->m_nGState;
          v13 = CChar::GetMaxHP(v28);
          v12 = v28->m_nCurHP;
          v11 = v28->m_nDir;
          v10 = v28->m_ptPixel;
          v9 = CBase::Id(v28);
          CChar::WriteInSight(
            v28,
            S2C_CREATEMONSTER,
            "wdddwdddIsbds",
            *(_DWORD *)(v28->m_nSocketRef + 60),
            v9,
            v10.x,
            v10.y,
            v11,
            v12,
            v13,
            v14,
            v15,
            v16,
            v17,
            v18,
            v19);
          CChar::Unlock(v28);
          result = (CIOCriticalSection *)v28;
        }
        else
        {
          CChar::Unlock(v28);
          if ( v28 )
            ((void (__thiscall *)(CPlayer *, int))v28->~CIOObject)(v28, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterGuildWar::Create() not find Map (map:%d)", a2);
    result = 0;
  }
  return result;
}
// 44479C: variable 'v20' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (00444A10) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::AI(int *this)
{
  int v1; // [esp+0h] [ebp-8h]

  if ( !CNPC::IsRemoved(this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((CIOCriticalSection *)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    v1 = this[120];
    if ( v1 == 5 )
    {
      if ( CMonsterSkill::PreSkill(this + 122, this[116]) )
        this[120] = 6;
    }
    else if ( v1 == 6 )
    {
      CMonsterSkill::ExcuteSkill(this + 122, (volatile int *)this[116]);
      this[120] = this[116] != 0 ? 4 : 1;
    }
    CChar::Unlock((CIOCriticalSection *)this);
  }
}

//----- (00444B10) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::Tick(CIOCriticalSection *this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::Lock(this);
    v3 = GetTickCount();
    v2 = CChar::GetMaxHP((CPlayer *)this);
    if ( (int)this[8].m_critical_section.LockSemaphore < v2 && v3 >= this[14].m_dwEIP[0] )
    {
      ((void (__cdecl *)(CIOCriticalSection *, int, int, int))this->m_critical_section.DebugInfo[2].Spare[0])(
        this,
        7,
        1,
        v2);
      CMonsterReal::ResetHostility(this);
    }
    if ( !sub_40F5F0(&this[15].m_critical_section.RecursionCount) && this[21].m_critical_section.SpinCount == 35 )
    {
      if ( CMonsterSkill::SetCurSkill(
             &this[15].m_critical_section.RecursionCount,
             this[21].m_critical_section.SpinCount) )
      {
        this[15].m_critical_section.DebugInfo = (_RTL_CRITICAL_SECTION_DEBUG *)5;
        this[21].m_critical_section.SpinCount = -1;
        this[21].m_critical_section.LockSemaphore = (void *)(this[4].m_dwEIP[1] + v3);
      }
    }
    CChar::Unlock(this);
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00444C00) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::Die(int this, int a2, int a3, int a4, int a5)
{
  CIOCriticalSection *v6; // [esp+4h] [ebp-8h]
  CIOObject *a1; // [esp+8h] [ebp-4h]

  *(_DWORD *)(this + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 76))(a2, *(_DWORD *)(this + 28), a3);
  a1 = CPlayer::FindPlayer(*(_DWORD *)(this + 528));
  if ( a1 )
  {
    (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)this + 104))(this, 256, 0);
    CPlayer::Write((int)a1, 1, "b", 5);
    CPlayer::SiegeGunUnset((CIOCriticalSection *)a1, 1);
    CIOObject::Release(a1, (volatile int *)&a1[22]);
  }
  else
  {
    v6 = (CIOCriticalSection *)CNPC::FindNPC(*(_DWORD *)(this + 708));
    if ( v6 )
    {
      CChar::WriteInSight(this, 0, "bdd", 4, *(_DWORD *)(this + 708), *(_DWORD *)(this + 280));
      CNPCSiegeGunStone::SetOperator(v6, 0);
      CNPCSiegeGunStone::SetSiegeGun(v6, 0);
      CIOObject::Release((int *)v6);
    }
  }
  *(_DWORD *)(this + 528) = 0;
  CChar::CancelAllBuff((std::locale::facet **)this);
  CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
}

//----- (00444D30) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::SetFire(CIOCriticalSection *this, _DWORD *a2)
{
  unsigned int v2; // eax

  CChar::Lock(this);
  this[21].m_critical_section.SpinCount = 35;
  v2 = a2[1];
  this[21].m_dwEIP[0] = *a2;
  this[21].m_dwEIP[1] = v2;
  CChar::Unlock(this);
}

//----- (00444D80) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::Summon(int this, char a2, int a3, int a4, int a5)
{
  CMonsterSiegeGunBall::Create(*(_DWORD *)(this + 512) + a2 - 63, *(_DWORD *)(this + 316), this + 696, this);
}

//----- (00444DD0) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::SetOperator(CIOCriticalSection *this, int a2)
{
  CChar::Lock(this);
  this[16].m_critical_section.LockSemaphore = (void *)a2;
  if ( a2 )
    ((void (__thiscall *)(CIOCriticalSection *, int))this->m_critical_section.DebugInfo[3].CriticalSection)(
      this,
      0x40000);
  else
    ((void (__thiscall *)(CIOCriticalSection *, int))this->m_critical_section.DebugInfo[3].EntryCount)(this, 0x40000);
  CChar::Unlock(this);
}

//----- (00444E30) --------------------------------------------------------
int __thiscall CMonsterSiegeGun::Damage(CIOCriticalSection *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-1Ch]
  int v10; // [esp+8h] [ebp-14h] BYREF
  int v11; // [esp+Ch] [ebp-10h] BYREF
  int v12; // [esp+10h] [ebp-Ch]
  int v13; // [esp+14h] [ebp-8h]
  int v14; // [esp+18h] [ebp-4h]

  if ( ((int (__thiscall *)(CIOCriticalSection *))this->m_critical_section.DebugInfo[7].Spare[1])(this) )
    return 1;
  if ( a7 )
    v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v8 = 1;
  v12 = v8;
  v14 = CChar::GetFinalDamage(this, a2, a3, v8);
  if ( v14 > 0 )
  {
    CMonsterReal::ManageBuff(this);
    CChar::Lock(this);
    if ( CMonsterReal::ApplyDamage((int)this, (int)a2, a3, v14, a4, (int)a5, a6, a7) )
    {
      v13 = *a6 + *a4;
      if ( (int)this[8].m_critical_section.LockSemaphore > 0 )
      {
        (*(void (__thiscall **)(CIOCriticalSection *, int, int))&this->m_critical_section.DebugInfo[8].Type)(
          this,
          v13,
          v12);
        CChar::Unlock(this);
      }
      else
      {
        v11 = 0;
        v10 = 0;
        ((void (__thiscall *)(CIOCriticalSection *, int))this->m_critical_section.DebugInfo[3].CriticalSection)(
          this,
          0x80000);
        ((void (__thiscall *)(CIOCriticalSection *, _DWORD *, _DWORD, int *, int *))this->m_critical_section.DebugInfo[7].ProcessLocksList.Blink)(
          this,
          a2,
          *a5,
          &v11,
          &v10);
        CChar::Unlock(this);
        CBase::Delete((CItem *)this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (00444F90) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > *__thiscall std::_Tree<std::_Tmap_traits<int,CAlliance *,std::less<int>,std::allocator<std::pair<int const,CAlliance *>>,0>>::find(std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > *this, std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >::iterator *result, const int *_Keyval, int a4, int a5)
{
  CMonsterReal::CMonsterReal(this);
  this->std::_Tree_val<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > = (std::_Tree_val<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >)&off_4B8DA8;
  this[26]._Myhead = (std::_Tree_nod<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >::_Node *)result;
  this[26]._Mysize = (unsigned int)_Keyval;
  this[29].std::_Tree_val<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > = 0;
  this[43]._Mysize = *(_DWORD *)(a4 + 524);
  memset(&this[55]._Myhead, 0, 8u);
  this[55]._Myhead = (std::_Tree_nod<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >::_Node *)(*(_DWORD *)(a5 + 228) + GetTickCount());
  this[40]._Myhead = (std::_Tree_nod<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >::_Node *)a4;
  CNPC::AddGState((int)this, 0x2000);
  return this;
}
// 4B8DA8: using guessed type int (__stdcall *off_4B8DA8)(int);

//----- (00445030) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __cdecl CMonsterSiegeGunBall::Create(char a1, char a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  tagPOINT v7; // [esp-34h] [ebp-64h]
  int v8; // [esp-2Ch] [ebp-5Ch]
  int v9; // [esp-28h] [ebp-58h]
  int v10; // [esp-24h] [ebp-54h]
  int v11; // [esp-20h] [ebp-50h]
  __int64 v12; // [esp-1Ch] [ebp-4Ch]
  int v13; // [esp-14h] [ebp-44h]
  __int64 v14; // [esp-4h] [ebp-34h]
  CPlayer *v15; // [esp+4h] [ebp-2Ch]
  std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > *v16; // [esp+10h] [ebp-20h]
  char v17[4]; // [esp+14h] [ebp-1Ch] BYREF
  CIOCriticalSection *v18; // [esp+18h] [ebp-18h]
  tagPOINT a5; // [esp+1Ch] [ebp-14h] BYREF
  int *_Keyval; // [esp+24h] [ebp-Ch]
  char v21[4]; // [esp+28h] [ebp-8h] BYREF
  CPlayer *v22; // [esp+2Ch] [ebp-4h]

  _Keyval = (int *)CSMap::FindSMap(a2);
  if ( _Keyval )
  {
    LODWORD(v14) = 0;
    if ( CSMap::IsValidTile((CSMap *)_Keyval, (const tagPOINT *)a3, v14) )
    {
      CIOCriticalSection::Enter(&unk_4E182C.m_critical_section);
      sub_44AE20(dword_4E1820, v21, &a1);
      v4 = sub_430C20(dword_4E1820, (int)v17);
      if ( (unsigned __int8)unknown_libname_8(v4)
        || (v18 = *(CIOCriticalSection **)(sub_420250(v21) + 4),
            ((int)v18[9].m_critical_section.LockSemaphore & (1 << SLOBYTE(stru_4E35B4.m_nRef))) == 0) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C);
      }
      else
      {
        v16 = (std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> > *)operator new(0x2A8u);
        if ( v16 )
          v15 = (CPlayer *)std::_Tree<std::_Tmap_traits<int,CAlliance *,std::less<int>,std::allocator<std::pair<int const,CAlliance *>>,0>>::find(
                             v16,
                             (std::_Tree<std::_Tmap_traits<int,stMember *,std::less<int>,std::allocator<std::pair<int const ,stMember *> >,0> >::iterator *)a2,
                             _Keyval,
                             a4,
                             (int)v18);
        else
          v15 = 0;
        v22 = v15;
        CChar::SetXY(v15, (const tagPOINT *)a3);
        ((void (__thiscall *)(CPlayer *, CIOCriticalSection *))v22->__vftable[1].~CIOObject)(v22, v18);
        CIOCriticalSection::Leave((int)&unk_4E182C);
        CChar::Lock(v22);
        a5.x = *(int *)a3 >> 5;
        a5.y = *(int *)(a3 + 4) >> 5;
        if ( CSMap::SetOnMap(v22->m_pMap, v22, &a5) )
        {
          ((void (__thiscall *)(CPlayer *, _DWORD))v22->__vftable[1].OnFree)(v22, 0);
          v5 = ((int (__thiscall *)(CPlayer *))v22->__vftable[1].SendMove)(v22);
          v13 = ((int (__thiscall *)(CPlayer *, _DWORD, _DWORD, int))v22->__vftable[1].OnLoad)(
                  v22,
                  *(_DWORD *)(v22->m_nSocketRef + 64),
                  *(_DWORD *)&v22->m_szGuildClassTitle[4],
                  v5);
          v12 = v22->m_nMState;
          v11 = v22->m_nGState;
          v10 = CChar::GetMaxHP(v22);
          v9 = v22->m_nCurHP;
          v8 = v22->m_nDir;
          v7 = v22->m_ptPixel;
          v6 = CBase::Id(v22);
          CChar::WriteInSight(
            v22,
            S2C_CREATEMONSTER,
            "wdddwdddIsbds",
            *(_DWORD *)(v22->m_nSocketRef + 60),
            v6,
            v7.x,
            v7.y,
            v8,
            v9,
            v10,
            v11,
            v12,
            v13);
          CChar::Unlock(v22);
        }
        else
        {
          CChar::Unlock(v22);
          if ( v22 )
            ((void (__thiscall *)(CPlayer *, int))v22->~CIOObject)(v22, 1);
        }
      }
    }
  }
  else
  {
    LOG_ERR("CMonsterGuildWar::Create() not find Map (map:%d)", a2);
  }
}
// 445127: inconsistent variable size for '^84.1(a2)'
// 445054: inconsistent variable size for '^84.1(a2)'
// 44503A: inconsistent variable size for '^84.1(a2)'
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1820: using guessed type int dword_4E1820[3];

//----- (004452B0) --------------------------------------------------------
void __thiscall CMonsterSiegeGunBall::Tick(CIOCriticalSection *this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::Lock(this);
    v2 = -1;
    v3 = GetTickCount();
    if ( this[20].m_dwEIP[0] <= v3 )
    {
      v2 = 36;
      this[20].m_dwEIP[0] = v3 + 12000;
      this[20].m_dwEIP[1] = v3 + 7000;
    }
    if ( this[20].m_dwEIP[1] <= v3 && this[20].m_dwEIP[1] )
    {
      CChar::WriteInSight((int)this, 61, "db", this->m_dwEIP[1], 9);
      this[15].m_critical_section.LockCount = 0;
      CChar::Unlock(this);
      CBase::Delete((CItem *)this);
    }
    else
    {
      if ( v2 >= 0 )
      {
        if ( CMonsterSkill::SetCurSkill(&this[15].m_critical_section.RecursionCount, v2) )
          this[15].m_critical_section.DebugInfo = (_RTL_CRITICAL_SECTION_DEBUG *)5;
      }
      CChar::Unlock(this);
    }
  }
}

//----- (004453B0) --------------------------------------------------------
void __thiscall CMonsterSiegeGunBall::AI(int *this)
{
  int v1; // [esp+0h] [ebp-8h]

  if ( !CNPC::IsRemoved(this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((CIOCriticalSection *)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    v1 = this[120];
    if ( v1 == 5 )
    {
      if ( CMonsterSkill::PreSkill(this + 122, this[116]) )
        this[120] = 6;
    }
    else if ( v1 == 6 )
    {
      CMonsterSkill::ExcuteSkill(this + 122, (volatile int *)this[116]);
      this[120] = 1;
    }
    CChar::Unlock((CIOCriticalSection *)this);
  }
}

//----- (004454A0) --------------------------------------------------------
void __thiscall CMonsterSiegeGunRuins::Tick(CIOCriticalSection *this)
{
  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::Lock(this);
    if ( this[20].m_dwEIP[0] > GetTickCount() )
    {
      CChar::Unlock(this);
    }
    else
    {
      CChar::WriteInSight((int)this, 61, "db", this->m_dwEIP[1], 9);
      CChar::Unlock(this);
      CBase::Delete((CItem *)this);
    }
  }
}

//----- (00445510) --------------------------------------------------------
void __thiscall CMonsterWithSkillOnly::Tick(int this)
{
  int v2; // [esp+4h] [ebp-Ch]
  DWORD v3; // [esp+8h] [ebp-8h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::RefreshBuff((std::locale::facet **)this);
    CChar::Lock((CIOCriticalSection *)this);
    v3 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 1) && v3 >= *(_DWORD *)(this + 468) )
    {
      CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock((CIOCriticalSection *)this);
      CBase::Delete((CItem *)this);
    }
    else
    {
      v2 = CChar::GetMaxHP((CPlayer *)this);
      if ( *(_DWORD *)(this + 272) < v2 && v3 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v2);
        CMonsterReal::ResetHostility((CIOCriticalSection *)this);
      }
      if ( !sub_40F5F0(this + 488) )
        CMonsterSkill::SetCurSkillDefault(this + 488);
      CChar::Unlock((CIOCriticalSection *)this);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00445610) --------------------------------------------------------
void __thiscall CMonsterWithSkillOnly::Attack(_DWORD *this)
{
  __int64 v2; // [esp+24h] [ebp-10h]

  if ( !CChar::IsMState(this, 268435712i64) && GetTickCount() >= this[117] )
  {
    v2 = PowDistance64(this + 83, (_DWORD *)(this[116] + 332));
    if ( this[79] == *(_DWORD *)(this[116] + 316) && v2 <= this[137] * this[137] )
    {
      if ( v2 <= this[78] * this[78] )
      {
        if ( this[116] == this[121] )
        {
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
          this[120] = 1;
        }
        else
        {
          CChar::SetDirection(this, *(_DWORD *)(this[116] + 332) - this[83], *(_DWORD *)(this[116] + 336) - this[84]);
        }
      }
      else if ( !CChar::IsMState(this, 512i64) )
      {
        this[163] = 1;
        this[120] = 2;
      }
    }
    else
    {
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
    }
  }
}

//----- (004457F0) --------------------------------------------------------
void __thiscall CMonsterInvaderBoss::AI(int *this)
{
  if ( !CNPC::IsRemoved(this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((CIOCriticalSection *)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    switch ( this[120] )
    {
      case 1:
        this[172] = 0;
        goto LABEL_9;
      case 2:
      case 3:
LABEL_9:
        (*(void (__thiscall **)(int *))(*this + 248))(this);
        break;
      case 4:
        (*(void (__thiscall **)(int *))(*this + 244))(this);
        break;
      case 5:
        if ( CMonsterSkill::PreSkill(this + 122, this[116]) )
          this[120] = 6;
        break;
      case 6:
        CMonsterSkill::ExcuteSkill(this + 122, (volatile int *)this[116]);
        this[120] = this[116] != 0 ? 4 : 1;
        break;
      default:
        break;
    }
    CChar::Unlock((CIOCriticalSection *)this);
  }
}

//----- (00445950) --------------------------------------------------------
void __thiscall CMonsterInvaderBoss::Tick(int this)
{
  int v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  DWORD v4; // [esp+Ch] [ebp-4h]

  if ( !CNPC::IsRemoved((volatile int *)this) )
  {
    CChar::RefreshBuff((std::locale::facet **)this);
    CChar::Lock((CIOCriticalSection *)this);
    v4 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 0x2000) && v4 >= *(_DWORD *)(this + 556) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 0x2000);
      CChar::Unlock((CIOCriticalSection *)this);
    }
    else
    {
      v2 = CChar::GetMaxHP((CPlayer *)this);
      if ( *(_DWORD *)(this + 272) < v2 && v4 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v2);
        CMonsterReal::ResetHostility((CIOCriticalSection *)this);
      }
      if ( *(_DWORD *)(this + 476) && !sub_40F5F0(this + 488) && !sub_446110((void *)(this + 560)) )
      {
        v3 = -1;
        if ( !*(_DWORD *)(this + 668) )
          *(_DWORD *)(this + 668) = v4 + 10000;
        if ( *(_DWORD *)(this + 672) <= v4 )
        {
          *(_DWORD *)(this + 672) = v4 + 15000;
          if ( Random(1, 100) <= 50 )
            v3 = 38;
        }
        if ( *(_DWORD *)(this + 668) <= v4 )
        {
          *(_DWORD *)(this + 668) = v4 + 10000;
          if ( v3 < 0 && Random(1, 100) <= 80 )
            v3 = 39;
        }
        if ( v3 >= 0 )
        {
          if ( CMonsterSkill::SetCurSkill((_DWORD *)(this + 488), v3) )
            *(_DWORD *)(this + 480) = 5;
        }
      }
      CChar::Unlock((CIOCriticalSection *)this);
    }
  }
}
// 445A8D: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00445B20) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__thiscall sub_445B20(std::vector<CIOSocket::CIOTimer> *this)
{
  return std::vector<CSyncPacket::CElement>::_Tidy(this);
}

//----- (00445B40) --------------------------------------------------------
int __thiscall sub_445B40(_DWORD *this, int a2)
{
  sub_446700((void *)a2, this[2]);
  return a2;
}

//----- (00445B60) --------------------------------------------------------
BOOL __thiscall sub_445B60(std::vector<CIOSocket::CIOTimer> *this)
{
  return std::vector<CIOSocket::CIOTimer>::size(this) == 0;
}

//----- (00445B80) --------------------------------------------------------
char *__thiscall sub_445B80(int this, int a2)
{
  unsigned int v2; // esi
  char *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
  if ( v2 >= std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (char *)sub_446200((std::vector<CIOSocket::CIOTimer> *)this, (int)v6, *v4, a2);
  }
  else
  {
    result = std::vector<CIOSocket::CIOTimer>::_Xlen(
               (std::vector<CIOSocket::CIOTimer> *)this,
               *(char **)(this + 8),
               1,
               a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00445BF0) --------------------------------------------------------
std::vector<IPAddrMask> *__thiscall sub_445BF0(std::vector<IPAddrMask> *this)
{
  return std::vector<IPAddrMask>::_Tidy(this);
}

//----- (00445C10) --------------------------------------------------------
XMessageQueue::XTimerElement *__thiscall sub_445C10(int this, const XMessageQueue::XTimerElement *a2)
{
  unsigned int v2; // esi
  XMessageQueue::XTimerElement *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
  if ( v2 >= std::vector<XMessageQueue::XElement>::capacity((std::vector<XMessageQueue::XTimerElement> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (XMessageQueue::XTimerElement *)sub_4462B0((std::vector<IPAddrMask> *)this, (int)v6, *v4, (int)a2);
  }
  else
  {
    result = std::vector<XMessageQueue::XElement>::_Ufill(
               (std::vector<XMessageQueue::XTimerElement> *)this,
               *(XMessageQueue::XTimerElement **)(this + 8),
               1u,
               a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00445C80) --------------------------------------------------------
void *__thiscall sub_445C80(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00445CB0) --------------------------------------------------------
int __thiscall sub_445CB0(void *this)
{
  return sub_4464B0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00445CD0) --------------------------------------------------------
unsigned int __thiscall sub_445CD0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> result; // [esp+8h] [ebp-Ch] BYREF
  unsigned int _Off; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::equal_range(
    this,
    &result,
    a2);
  _Off = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    (int)result.first._Ptr,
    (int)result.second._Ptr,
    &_Off);
  sub_446350(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    (int)result.first._Ptr,
    (char)result.second._Ptr);
  return _Off;
}

//----- (00445D30) --------------------------------------------------------
_DWORD *__thiscall sub_445D30(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_446430(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00445D90) --------------------------------------------------------
_DWORD *__thiscall sub_445D90(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_446560(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00445DF0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_445DF0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, const std::pair<int const ,CGame_Character::TargetInfo> *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)sub_474590((int)a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270(this, (int)v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(v20);
  }
  v11 = (_DWORD *)sub_474590((int)a3);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270(this, (int)v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00445FA0) --------------------------------------------------------
int __thiscall sub_445FA0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    (const int *)a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_4465E0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00446000) --------------------------------------------------------
_DWORD *__thiscall sub_446000(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_446680(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00446060) --------------------------------------------------------
_DWORD *__thiscall sub_446060(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_431390(this);
  *a2 = v4;
  return a2;
}

//----- (00446090) --------------------------------------------------------
_DWORD *__thiscall sub_446090(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_418860(this);
  *a2 = v4;
  return a2;
}

//----- (004460C0) --------------------------------------------------------
void *__thiscall sub_4460C0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004460F0) --------------------------------------------------------
int __thiscall sub_4460F0(void *this)
{
  return sub_446750((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00446110) --------------------------------------------------------
BOOL __thiscall sub_446110(void *this)
{
  return unknown_libname_10(this, this) == 0;
}

//----- (00446130) --------------------------------------------------------
_DWORD *__thiscall sub_446130(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_446720(this, v12, a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (_DWORD *)sub_473500(v4), sub_48D9E0((_DWORD *)a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004461C0) --------------------------------------------------------
int __thiscall std::vector<CIOSocket::CIOTimer>::capacity(std::vector<CIOSocket::CIOTimer> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) / 12;
  else
    v2 = 0;
  return v2;
}

//----- (00446200) --------------------------------------------------------
int __thiscall sub_446200(std::vector<CIOSocket::CIOTimer> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CIOSocket::CIOTimer>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_431D50(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_446820((int)this, (CIOSocket::CIOTimer *)a3, 1u, (int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_446FA0(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (00446280) --------------------------------------------------------
char *__thiscall std::vector<CIOSocket::CIOTimer>::_Xlen(std::vector<CIOSocket::CIOTimer> *this, char *a2, int a3, int a4)
{
  std::_Uninitialized_fill_n<IPAddrMask *,unsigned int,IPAddrMask,std::allocator<IPAddrMask>>(a2, a3, a4);
  return &a2[12 * a3];
}

//----- (004462B0) --------------------------------------------------------
int __thiscall sub_4462B0(std::vector<IPAddrMask> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<XMessageQueue::XElement>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_4470B0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_446B80((int)this, (XMessageQueue::XTimerElement *)a3, 1u, (int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_478710(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (00446350) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_446350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_445D30(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004463F0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::equal_range(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *result, const int *_Keyval)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_446E70(this, v8, _Keyval);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_446720(this, v7, (int)_Keyval);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    result,
    v3,
    v5);
  return result;
}

//----- (00446430) --------------------------------------------------------
int __stdcall sub_446430(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_446430(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004464B0) --------------------------------------------------------
int __thiscall sub_4464B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_446350(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00446560) --------------------------------------------------------
int __stdcall sub_446560(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_446560(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004465E0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4465E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_446F30(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00446680) --------------------------------------------------------
int __stdcall sub_446680(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_446680(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00446700) --------------------------------------------------------
void *__thiscall sub_446700(void *this, int a2)
{
  sub_446FD0(a2);
  return this;
}
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (00446720) --------------------------------------------------------
void *__thiscall sub_446720(_DWORD *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_446EA0(this, a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00446750) --------------------------------------------------------
int __thiscall sub_446750(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_447010(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00446800) --------------------------------------------------------
unsigned int __thiscall sub_446800(std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *this)
{
  return std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>::max_size(this);
}

//----- (00446820) --------------------------------------------------------
void __thiscall sub_446820(int this, CIOSocket::CIOTimer *a2, unsigned int a3, int *a4)
{
  unsigned int v4; // esi
  char *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-24h]
  CIOSocket::CIOTimer *_Dest; // [esp+Ch] [ebp-1Ch]
  CMemory **_First; // [esp+10h] [ebp-18h]
  char *_Last; // [esp+14h] [ebp-14h]
  unsigned int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+18h] [ebp-10h]
  CIOSocket::CIOTimer _Val; // [esp+1Ch] [ebp-Ch] BYREF
  int v14; // [esp+34h] [ebp+Ch]

  _Val.m_dwTime = *a4;
  _Val.m_pObject = (CIOObject *)a4[1];
  _Val.m_nId = a4[2];
  v11 = std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this);
  if ( a3 )
  {
    v4 = sub_446800((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)this);
    if ( v4 - std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) >= a3 )
    {
      if ( v11 >= a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) / 12 >= a3 )
        {
          _Dest = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = sub_4474B0((int)&_Dest[-a3], (int)_Dest, _Dest);
          std::copy_backward<IPAddrMask *,IPAddrMask *>(a2, &_Dest[-a3], _Dest);
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(a2, &a2[a3], &_Val);
        }
        else
        {
          sub_4474B0((int)a2, *(_DWORD *)(this + 8), &a2[a3]);
          std::vector<CIOSocket::CIOTimer>::_Xlen(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(char **)(this + 8),
            a3 - (*(_DWORD *)(this + 8) - (int)a2) / 12,
            (int)&_Val);
          *(_DWORD *)(this + 8) += 12 * a3;
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)(*(_DWORD *)(this + 8) - 12 * a3),
            &_Val);
        }
      }
      else
      {
        if ( sub_446800((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)this)
           - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
          v12 = a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        _First = sub_446B40(v12);
        v5 = sub_4474B0(*(_DWORD *)(this + 4), (int)a2, _First);
        _Last = std::vector<CIOSocket::CIOTimer>::_Xlen((std::vector<CIOSocket::CIOTimer> *)this, v5, a3, (int)&_Val);
        sub_4474B0((int)a2, *(_DWORD *)(this + 8), _Last);
        v14 = a3 + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          std::vector<IPAddrMask>::_Destroy(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 4),
            *(CIOSocket::CIOTimer **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12);
        }
        *(_DWORD *)(this + 12) = &_First[3 * v12];
        *(_DWORD *)(this + 8) = &_First[3 * v14];
        *(_DWORD *)(this + 4) = _First;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (00446B00) --------------------------------------------------------
void __thiscall std::vector<tagShowdownPaticipateInfo>::_Xran(std::vector<tagShowdownPaticipateInfo> *this)
{
  void *v1; // eax
  std::length_error that; // [esp+4h] [ebp-40h] BYREF

  std::string::string((std::vector<IPAddrMask> *)&that, "vector<T> too long");
  std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
  std::exception::_Raise(v1);
  sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
  sub_40F780(&that);
}
// 446B24: variable 'v1' is possibly undefined

//----- (00446B40) --------------------------------------------------------
CMemory **__stdcall sub_446B40(int a1)
{
  return sub_44CEC0(a1);
}

//----- (00446B60) --------------------------------------------------------
unsigned int __thiscall sub_446B60(std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *this)
{
  return std::allocator<std::pair<char const * const,int>>::max_size(this);
}

//----- (00446B80) --------------------------------------------------------
void __thiscall sub_446B80(int this, XMessageQueue::XTimerElement *a2, unsigned int a3, int *a4)
{
  int v4; // edx
  unsigned int v5; // esi
  char *v6; // eax
  unsigned int v7; // [esp+4h] [ebp-20h]
  _DWORD *v9; // [esp+Ch] [ebp-18h]
  CMemory **v10; // [esp+10h] [ebp-14h]
  XMessageQueue::XTimerElement *_Ptr; // [esp+14h] [ebp-10h]
  unsigned int v12; // [esp+18h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-Ch]
  int v14[2]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int _Count; // [esp+30h] [ebp+Ch]

  v4 = a4[1];
  v14[0] = *a4;
  v14[1] = v4;
  v12 = std::vector<XMessageQueue::XElement>::capacity((std::vector<XMessageQueue::XTimerElement> *)this);
  if ( a3 )
  {
    v5 = sub_446B60((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)this);
    if ( v5 - std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) >= a3 )
    {
      if ( v12 >= a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) >> 3 >= a3 )
        {
          v9 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E60((void *)this, (int)&v9[-2 * a3], (int)v9, v9);
          sub_47A3F0(a2, &v9[-2 * a3], v9);
          std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(
            a2,
            (XMessageQueue::XTimerElement *)((char *)a2 + 8 * a3),
            (const XMessageQueue::XTimerElement *)v14);
        }
        else
        {
          sub_431E60((void *)this, (int)a2, *(_DWORD *)(this + 8), (char *)a2 + 8 * a3);
          std::vector<XMessageQueue::XElement>::_Ufill(
            (std::vector<XMessageQueue::XTimerElement> *)this,
            *(XMessageQueue::XTimerElement **)(this + 8),
            a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3),
            (const XMessageQueue::XTimerElement *)v14);
          *(_DWORD *)(this + 8) += 8 * a3;
          std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(
            a2,
            (XMessageQueue::XTimerElement *)(*(_DWORD *)(this + 8) - 8 * a3),
            (const XMessageQueue::XTimerElement *)v14);
        }
      }
      else
      {
        if ( sub_446B60((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)this) - (v12 >> 1) >= v12 )
          v7 = v12 + (v12 >> 1);
        else
          v7 = 0;
        v13 = v7;
        if ( v7 < a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) )
          v13 = a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
        v10 = sub_446E50(v13);
        v6 = sub_431E60((void *)this, *(_DWORD *)(this + 4), (int)a2, v10);
        _Ptr = std::vector<XMessageQueue::XElement>::_Ufill(
                 (std::vector<XMessageQueue::XTimerElement> *)this,
                 (XMessageQueue::XTimerElement *)v6,
                 a3,
                 (const XMessageQueue::XTimerElement *)v14);
        sub_431E60((void *)this, (int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Count = a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4316C0((void *)this, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3);
        }
        *(_DWORD *)(this + 12) = &v10[2 * v13];
        *(_DWORD *)(this + 8) = &v10[2 * _Count];
        *(_DWORD *)(this + 4) = v10;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (00446E50) --------------------------------------------------------
CMemory **__stdcall sub_446E50(int a1)
{
  return sub_47A430(a1);
}

//----- (00446E70) --------------------------------------------------------
void *__thiscall sub_446E70(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, const int *a3)
{
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v3; // eax

  v3 = std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Ubound(
         this,
         a3);
  sub_446700(a2, (int)v3);
  return a2;
}

//----- (00446EA0) --------------------------------------------------------
int __thiscall sub_446EA0(_DWORD *this, int a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_48D9E0(v2, (_DWORD *)a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (00446F30) --------------------------------------------------------
_DWORD *__thiscall sub_446F30(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_4472D0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00446F90) --------------------------------------------------------
int __cdecl sub_446F90(int a1)
{
  return a1 + 20;
}

//----- (00446FA0) --------------------------------------------------------
_DWORD *__thiscall sub_446FA0(int *this, _DWORD *a1, int a2)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a1 = *std::_Destroy_range<CIOSocket::CIOTimer>(&v4, a2);
  return a1;
}

//----- (00446FF0) --------------------------------------------------------
int __cdecl sub_446FF0(int a1)
{
  return a1 + 4;
}

//----- (00447000) --------------------------------------------------------
int __cdecl sub_447000(int a1)
{
  return a1 + 12;
}

//----- (00447010) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447010(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_447370(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004470B0) --------------------------------------------------------
int __thiscall sub_4470B0(int *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *this;
  return sub_431DD0(&v3, a2);
}

//----- (004470E0) --------------------------------------------------------
int __cdecl sub_4470E0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_431110(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00447120) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Ubound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0((int *)this);
  v6 = this->_Myhead;
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_48D9E0(_Keyval, v2) )
    {
      v6 = (std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *)v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (004471B0) --------------------------------------------------------
CMemory **sub_4471B0()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_44CD20(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)sub_474590((int)v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_446F90((int)v7) = 1;
  *(_BYTE *)sub_431110((int)v7) = 0;
  return v7;
}

//----- (004472D0) --------------------------------------------------------
int __stdcall sub_4472D0(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_4472D0(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00447350) --------------------------------------------------------
_DWORD *__thiscall std::_Destroy_range<CIOSocket::CIOTimer>(_DWORD *this, int a2)
{
  *this += 12 * a2;
  return this;
}

//----- (00447370) --------------------------------------------------------
_DWORD *__thiscall sub_447370(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_4473F0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (004473D0) --------------------------------------------------------
// Microsoft VisualC 2-14/net runtime
std::vector<XMessageQueue::XTimerElement>::iterator *__thiscall std::vector<XMessageQueue::XElement>::iterator::operator+=(std::vector<XMessageQueue::XTimerElement>::iterator *this, int _Off)
{
  *(_DWORD *)this += 8 * _Off;
  return this;
}

//----- (004473F0) --------------------------------------------------------
int __stdcall sub_4473F0(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_4473F0(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00447470) --------------------------------------------------------
int __cdecl std::_Destroy_range<IPAddrMask>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last)
{
  unknown_libname_6(&_First, &_Last);
  return std::_Destroy_range<CSyncPacket::CElement>((int)_First, (int)_Last);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (004474B0) --------------------------------------------------------
char *__stdcall sub_4474B0(int a1, int a2, void *a3)
{
  return std::allocator<IPAddrMask>::construct((IPAddrMask *)a1, (const IPAddrMask *)a2, a3);
}

//----- (004474E0) --------------------------------------------------------
CIOSocket::CIOTimer *__cdecl std::copy_backward<IPAddrMask *,IPAddrMask *>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest)
{
  unknown_libname_6(&_First, &_Dest);
  return (CIOSocket::CIOTimer *)std::_Copy_backward_opt<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(
                                  _First,
                                  _Last,
                                  _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00447520) --------------------------------------------------------
char *__cdecl std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(XMessageQueue::XTimerElement *_First, XMessageQueue::XTimerElement *_Last, const XMessageQueue::XTimerElement *_Val)
{
  char *result; // eax
  int v4; // ecx

  while ( _First != _Last )
  {
    v4 = *((_DWORD *)_Val + 1);
    *(_DWORD *)_First = *(_DWORD *)_Val;
    *((_DWORD *)_First + 1) = v4;
    result = (char *)_First + 8;
    _First = (XMessageQueue::XTimerElement *)((char *)_First + 8);
  }
  return result;
}

//----- (00447570) --------------------------------------------------------
char *__cdecl std::_Uninit_fill_n<XMessageQueue::XTimerElement *,unsigned int,XMessageQueue::XTimerElement,std::allocator<XMessageQueue::XTimerElement>>(char *a1, int a2, int a3)
{
  char *result; // eax

  result = a1;
  while ( a2 )
  {
    result = (char *)sub_47A6D0(a1, a3);
    --a2;
    a1 += 8;
  }
  return result;
}

//----- (004475D0) --------------------------------------------------------
_DWORD *__stdcall sub_4475D0(void *a1, int a2)
{
  return std::_Construct<CIOSocket::CIOTimer,CIOSocket::CIOTimer>(
           (CIOSocket::CIOTimer *)a1,
           (const CIOSocket::CIOTimer *)a2);
}

//----- (004475F0) --------------------------------------------------------
char *__cdecl sub_4475F0(int a1, int a2, char *a3)
{
  while ( a1 != a2 )
  {
    sub_4475D0(a3, a1);
    a3 += 12;
    a1 += 12;
  }
  return a3;
}

//----- (00447660) --------------------------------------------------------
char *__cdecl std::_Uninit_copy<XMessageQueue::XTimerElement *,XMessageQueue::XTimerElement *,std::allocator<XMessageQueue::XTimerElement>>(int a1, int a2, char *a3)
{
  while ( a1 != a2 )
  {
    sub_47A6D0(a3, a1);
    a3 += 8;
    a1 += 8;
  }
  return a3;
}

//----- (004476D0) --------------------------------------------------------
_DWORD *__cdecl std::_Construct<CIOSocket::CIOTimer,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_Ptr, const CIOSocket::CIOTimer *_Val)
{
  _DWORD *result; // eax
  _DWORD *v3; // [esp+4h] [ebp-4h]

  result = operator new(0xCu, _Ptr);
  v3 = result;
  if ( result )
  {
    *result = *(_DWORD *)_Val;
    result = (_DWORD *)*((_DWORD *)_Val + 1);
    v3[1] = result;
    v3[2] = *((_DWORD *)_Val + 2);
  }
  return result;
}

//----- (00447720) --------------------------------------------------------
_DWORD *__cdecl std::map<int,std::string>::map<int,std::string>(void *a1, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // [esp+4h] [ebp-4h]

  result = operator new(8u, a1);
  v3 = result;
  if ( result )
  {
    result = (_DWORD *)a2[1];
    *v3 = *a2;
    v3[1] = result;
  }
  return result;
}

//----- (00447760) --------------------------------------------------------
void *__thiscall sub_447760(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00447790) --------------------------------------------------------
void *__thiscall sub_447790(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004477C0) --------------------------------------------------------
void *__thiscall sub_4477C0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004477F0) --------------------------------------------------------
int __thiscall sub_4477F0(void *this)
{
  return sub_447810(this);
}

//----- (00447810) --------------------------------------------------------
int __thiscall sub_447810(void *this)
{
  return sub_447830((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00447830) --------------------------------------------------------
int __thiscall sub_447830(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4478E0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (004478E0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4478E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_445D90(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00447980) --------------------------------------------------------
int __thiscall sub_447980(void *this)
{
  return sub_4479A0(this);
}

//----- (004479A0) --------------------------------------------------------
int __thiscall sub_4479A0(void *this)
{
  return sub_4479C0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (004479C0) --------------------------------------------------------
int __thiscall sub_4479C0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4465E0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00447A70) --------------------------------------------------------
int __thiscall sub_447A70(void *this)
{
  return sub_447A90(this);
}

//----- (00447A90) --------------------------------------------------------
int __thiscall sub_447A90(void *this)
{
  return sub_447AB0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00447AB0) --------------------------------------------------------
int __thiscall sub_447AB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_447B60(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00447B60) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447B60(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_446000(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00447C00) --------------------------------------------------------
CInitNPC *__thiscall CInitNPC::CInitNPC(CInitNPC *this)
{
  CBase::CBase();
  this->__vftable = (CInitNPC_vtbl *)&off_4B9680;
  this->m_nKind = 0;
  this->m_nMoveType = 0;
  return this;
}
// 4B9680: using guessed type int (__stdcall *off_4B9680)(int);

//----- (00447C40) --------------------------------------------------------
void *__thiscall CInitNPC::`scalar deleting destructor'(CInitNPC *this, char a2)
{
  CInitNPC::~CInitNPC(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00447C70) --------------------------------------------------------
void __thiscall CInitNPC::~CInitNPC(CInitNPC *this)
{
  this->__vftable = (CInitNPC_vtbl *)&off_4B9680;
  CBase::~CBase(this);
}
// 4B9680: using guessed type int (__stdcall *off_4B9680)(int);

//----- (00447C90) --------------------------------------------------------
void __cdecl CInitNPC::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v1)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v2[4]; // [esp+Ch] [ebp-Ch] BYREF
  int v3; // [esp+10h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v4; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1A9C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1A9C, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v4,
            v0) )
      break;
    v1 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&v4) + 4);
    if ( v1 )
      (**v1)(v1, 1);
    sub_446090((int *)&v4, &v3, 0);
  }
}
// 4E1A9C: using guessed type int dword_4E1A9C[3];

//----- (00447D10) --------------------------------------------------------
CBase *__thiscall CInitNPC::Copy(CInitNPC *this)
{
  CInitNPC *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0x28u);
  if ( v3 )
    v2 = CInitNPC::CInitNPC((CInitNPC *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (00447D50) --------------------------------------------------------
int __thiscall CInitNPC::Set(CInitNPC *this, enum Symbol symbol, struct lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var v6; // [esp-4h] [ebp-18h] BYREF
  enum Symbol v7; // [esp+0h] [ebp-14h]
  CInitNPC *v8; // [esp+4h] [ebp-10h]
  lisp::var v9; // [esp+Ch] [ebp-8h] BYREF
  lisp::var v10; // [esp+10h] [ebp-4h] BYREF

  v8 = this;
  v7 = symbol;
  if ( symbol == S_KIND )
  {
    v3 = lisp::var::pop(&value, &v10);
    v8->m_nKind = lisp::var::operator int(v3);
  }
  else
  {
    if ( v7 != S_MOVE )
    {
      v6.m_pObject = (lisp::_object *)this;
      lisp::var::var(&v6, &value);
      return CBase::Set(v8, symbol, v6);
    }
    v4 = lisp::var::pop(&value, &v9);
    v8->m_nMoveType = lisp::var::operator int(v4);
  }
  return 1;
}

//----- (00447DD0) --------------------------------------------------------
int __thiscall CInitNPC::OnLoad(CInitNPC *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v4[8]; // [esp+8h] [ebp-10h] BYREF
  char v5[8]; // [esp+10h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v4);
  sub_445DF0(
    (int)dword_4E1A9C,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v5,
    v1);
  if ( v5[4] )
    return 1;
  LOG_ERR("CInitNPC::OnLoad() Duplicated InitNPC.(Kind:%d)", this->m_nKind);
  return 0;
}
// 447DFC: variable 'v1' is possibly undefined
// 4E1A9C: using guessed type int dword_4E1A9C[3];

//----- (00447E30) --------------------------------------------------------
CGenNPC *__thiscall CGenNPC::CGenNPC(CGenNPC *this)
{
  CBase::CBase();
  this->__vftable = (CGenNPC_vtbl *)&off_4B96F8;
  this->m_nIndex = 0;
  this->m_nKind = 0;
  this->m_nShape = 0;
  this->m_nHtml = 0;
  this->m_dwQuestKey = 0;
  this->m_nMap = 0;
  this->m_pMap = 0;
  this->m_ptPixel.y = -1;
  this->m_ptPixel.x = -1;
  this->m_nZ = 0;
  this->m_ptPDir.y = -1;
  this->m_ptPDir.x = -1;
  this->m_nCID = 0;
  this->m_nWarRelation = 0;
  this->m_nMirror = 0;
  this->m_nItemIndex = 0;
  this->m_dwCountry = 0;
  for ( this->m_nTelCount = 0; this->m_nTelCount > 5; ++this->m_nTelCount )
  {
    this->m_nTelMap[this->m_nTelCount] = 0;
    this->m_ptPTel[this->m_nTelCount].y = 0;
    this->m_ptPTel[this->m_nTelCount].x = 0;
  }
  this->m_nTelCount = 0;
  return this;
}
// 4B96F8: using guessed type int (__stdcall *off_4B96F8)(int);

//----- (00447F60) --------------------------------------------------------
void *__thiscall CGenNPC::`scalar deleting destructor'(CGenNPC *this, char a2)
{
  CGenNPC::~CGenNPC(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00447F90) --------------------------------------------------------
void __thiscall CGenNPC::~CGenNPC(CGenNPC *this)
{
  this->__vftable = (CGenNPC_vtbl *)&off_4B96F8;
  CBase::~CBase(this);
}
// 4B96F8: using guessed type int (__stdcall *off_4B96F8)(int);

//----- (00447FB0) --------------------------------------------------------
void __cdecl CGenNPC::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v1)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v2[4]; // [esp+Ch] [ebp-Ch] BYREF
  int v3; // [esp+10h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1AA8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AA8, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(&it) + 4);
    if ( v1 )
      (**v1)(v1, 1);
    sub_446090((int *)&it, &v3, 0);
  }
}
// 4E1AA8: using guessed type int dword_4E1AA8[3];

//----- (00448030) --------------------------------------------------------
CBase *__thiscall CGenNPC::Copy(CGenNPC *this)
{
  CGenNPC *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+8h] [ebp-4h]

  v3 = operator new(0xB4u);
  if ( v3 )
    v2 = CGenNPC::CGenNPC((CGenNPC *)v3);
  else
    v2 = 0;
  return v2;
}

//----- (00448070) --------------------------------------------------------
int __thiscall CGenNPC::Set(CGenNPC *this, enum Symbol symbol, struct lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  int result; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  lisp::var *v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var v28[2]; // [esp-4h] [ebp-70h] BYREF
  CGenNPC *v29; // [esp+4h] [ebp-68h]
  lisp::var v30; // [esp+Ch] [ebp-60h] BYREF
  lisp::var v31; // [esp+10h] [ebp-5Ch] BYREF
  lisp::var v32; // [esp+14h] [ebp-58h] BYREF
  lisp::var v33; // [esp+18h] [ebp-54h] BYREF
  lisp::var v34; // [esp+1Ch] [ebp-50h] BYREF
  lisp::var v35; // [esp+20h] [ebp-4Ch] BYREF
  lisp::var v36; // [esp+24h] [ebp-48h] BYREF
  lisp::var v37; // [esp+28h] [ebp-44h] BYREF
  lisp::var v38; // [esp+2Ch] [ebp-40h] BYREF
  lisp::var v39; // [esp+30h] [ebp-3Ch] BYREF
  lisp::var v40; // [esp+34h] [ebp-38h] BYREF
  lisp::var v41; // [esp+38h] [ebp-34h] BYREF
  lisp::var v42; // [esp+3Ch] [ebp-30h] BYREF
  lisp::var v43; // [esp+40h] [ebp-2Ch] BYREF
  lisp::var v44; // [esp+44h] [ebp-28h] BYREF
  lisp::var v45; // [esp+48h] [ebp-24h] BYREF
  lisp::var v46; // [esp+4Ch] [ebp-20h] BYREF
  lisp::var v47; // [esp+50h] [ebp-1Ch] BYREF
  lisp::var v48; // [esp+54h] [ebp-18h] BYREF
  lisp::var v49; // [esp+58h] [ebp-14h] BYREF
  lisp::var v50; // [esp+5Ch] [ebp-10h] BYREF
  lisp::var v51; // [esp+60h] [ebp-Ch] BYREF
  lisp::var v52; // [esp+64h] [ebp-8h] BYREF
  lisp::var v53; // [esp+68h] [ebp-4h] BYREF

  v29 = this;
  v28[1].m_pObject = (lisp::_object *)(symbol - 2);
  switch ( symbol )
  {
    case S_INDEX:
      v3 = lisp::var::pop(&value, &v53);
      v29->m_nIndex = lisp::var::operator int(v3);
      goto LABEL_23;
    case S_MAP:
      v7 = lisp::var::pop(&value, &v49);
      v29->m_nMap = lisp::var::operator int(v7);
      v29->m_pMap = CSMap::FindSMap(v29->m_nMap);
      if ( v29->m_pMap )
        goto LABEL_23;
      LOG_ERR("CGenNPC::Set() Can't find the Map. (index:%d)", v29->m_nMap);
      result = 0;
      break;
    case S_KIND:
      v4 = lisp::var::pop(&value, &v52);
      v29->m_nKind = lisp::var::operator int(v4);
      goto LABEL_23;
    case S_XY:
      v9 = lisp::var::pop(&value, &v48);
      v29->m_ptPixel.x = lisp::var::operator int(v9);
      v10 = lisp::var::pop(&value, &v47);
      v29->m_ptPixel.y = lisp::var::operator int(v10);
      v11 = lisp::var::pop(&value, &v46);
      v29->m_nZ = lisp::var::operator int(v11);
      goto LABEL_23;
    case S_TELEPORT:
      if ( v29->m_nTelCount <= 5 )
      {
        v21 = lisp::var::pop(&value, &v36);
        v29->m_nTelMap[v29->m_nTelCount] = lisp::var::operator int(v21);
        v22 = lisp::var::pop(&value, &v35);
        v29->m_ptPTel[v29->m_nTelCount].x = lisp::var::operator int(v22);
        v23 = lisp::var::pop(&value, &v34);
        v29->m_ptPTel[v29->m_nTelCount++].y = lisp::var::operator int(v23);
      }
      goto LABEL_23;
    case S_HTML:
      v6 = lisp::var::pop(&value, &v50);
      v29->m_nHtml = lisp::var::operator int(v6);
      goto LABEL_23;
    case S_SHAPE:
      v5 = lisp::var::pop(&value, &v51);
      v29->m_nShape = lisp::var::operator int(v5);
      goto LABEL_23;
    case S_DIR:
      v12 = lisp::var::pop(&value, &v45);
      v29->m_ptPDir.x = lisp::var::operator int(v12) - v29->m_ptPixel.x;
      v13 = lisp::var::pop(&value, &v44);
      v29->m_ptPDir.y = lisp::var::operator int(v13) - v29->m_ptPixel.y;
      goto LABEL_23;
    case S_QUEST:
      v14 = lisp::var::pop(&value, &v43);
      v29->m_dwQuestKey |= lisp::var::operator int(v14) << 16;
      v15 = lisp::var::pop(&value, &v42);
      v29->m_dwQuestKey |= lisp::var::operator int(v15);
      goto LABEL_23;
    case S_CID:
      v16 = lisp::var::pop(&value, &v41);
      v29->m_nCID = lisp::var::operator int(v16);
      goto LABEL_23;
    case S_WARRELATION:
      v17 = lisp::var::pop(&value, &v40);
      v29->m_nWarRelation = lisp::var::operator int(v17);
      goto LABEL_23;
    case S_SCENARIO:
      v18 = lisp::var::pop(&value, &v39);
      v29->m_nMirror = lisp::var::operator int(v18);
      v19 = lisp::var::pop(&value, &v38);
      v29->m_nItemIndex = lisp::var::operator int(v19);
      goto LABEL_23;
    case S_COUNTRY:
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        v20 = lisp::var::pop(&value, &v37);
        v29->m_dwCountry |= 1 << lisp::var::operator int(v20);
      }
      goto LABEL_23;
    case S_SIEGEGUNPT:
      v24 = lisp::var::pop(&value, &v33);
      v29->m_ptSGXY.x = lisp::var::operator int(v24);
      v25 = lisp::var::pop(&value, &v32);
      v29->m_ptSGXY.y = lisp::var::operator int(v25);
      goto LABEL_23;
    case S_SIEGEGUNDIR:
      v26 = lisp::var::pop(&value, &v31);
      v29->m_ptSGDir.x = lisp::var::operator int(v26);
      v27 = lisp::var::pop(&value, &v30);
      v29->m_ptSGDir.y = lisp::var::operator int(v27);
LABEL_23:
      result = 1;
      break;
    default:
      v28[0].m_pObject = (lisp::_object *)(symbol - 2);
      lisp::var::var(v28, &value);
      result = CBase::Set(v29, symbol, v28[0]);
      break;
  }
  return result;
}

//----- (004484D0) --------------------------------------------------------
int __thiscall CGenNPC::OnLoad(CGenNPC *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v4[8]; // [esp+8h] [ebp-10h] BYREF
  char v5[8]; // [esp+10h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v4);
  sub_445DF0(
    (int)dword_4E1AA8,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v5,
    v1);
  if ( v5[4] )
    return 1;
  LOG_ERR("CGenNPC::OnLoad() Duplicated GenNPC.(Index:%d)", this->m_nIndex);
  return 0;
}
// 4484FC: variable 'v1' is possibly undefined
// 4E1AA8: using guessed type int dword_4E1AA8[3];

//----- (00448530) --------------------------------------------------------
int __thiscall CNPCObject::CNPCObject(CNPCObject *this)
{
  int n; // [esp+4h] [ebp-4h]

  CIOObject::CIOObject(this);
  this->__vftable = (CNPCObject_vtbl *)&off_4B97A0;
  `vector constructor iterator'(
    this->m_lockLink,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  for ( n = 0; n < 2; ++n )
    CLink::Initialize(&this->m_link[n]);
  return (int)this;
}
// 4B97A0: using guessed type int (__stdcall *off_4B97A0)(int);

//----- (00448590) --------------------------------------------------------
void __thiscall CNPCObject::~CNPCObject(CNPCObject *this)
{
  `vector destructor iterator'(
    this->m_lockLink,
    0x20u,
    2,
    (void (__thiscall *)(void *))CIOCriticalSection::~CIOCriticalSection);
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (004485C0) --------------------------------------------------------
void __thiscall CNPCObject::OnTimer(CNPCObject *this, int nId)
{
  CNPC *pNPC_; // [esp+8h] [ebp-18h]
  CLink *pLink_; // [esp+Ch] [ebp-14h]
  CNPC *pNPC; // [esp+10h] [ebp-10h]
  CLink *pLink; // [esp+14h] [ebp-Ch]
  DWORD dwAddTick; // [esp+18h] [ebp-8h]
  DWORD dwCurTick; // [esp+1Ch] [ebp-4h]

  if ( nId )
  {
    if ( nId == 1 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)this->m_lockLink);
      CIOCriticalSection::Enter(&this->m_lockLink[1].m_critical_section);
      CLink::MoveTo(&this->m_link[1], this->m_link);
      CIOCriticalSection::Leave((int)&this->m_lockLink[1]);
      pLink_ = this->m_link[0].m_pNext;
      while ( pLink_ != this->m_link )
      {
        pNPC_ = (CNPC *)&pLink_[-54].m_pPrev;
        pLink_ = pLink_->m_pNext;
        pNPC_->Tick(pNPC_);
      }
      CIOCriticalSection::Leave((int)this->m_lockLink);
      CIOObject::AddTimer(this, 0x3E8u, 1);
    }
  }
  else
  {
    dwCurTick = GetTickCount();
    do
    {
      dwAddTick = dwCurTick + 30;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)this->m_lockLink);
      CIOCriticalSection::Enter(&this->m_lockLink[1].m_critical_section);
      CLink::MoveTo(&this->m_link[1], this->m_link);
      CIOCriticalSection::Leave((int)&this->m_lockLink[1]);
      pLink = this->m_link[0].m_pNext;
      while ( pLink != this->m_link )
      {
        pNPC = (CNPC *)&pLink[-54].m_pPrev;
        pLink = pLink->m_pNext;
        pNPC->AI(pNPC);
      }
      CIOCriticalSection::Leave((int)this->m_lockLink);
      dwCurTick = GetTickCount();
    }
    while ( dwAddTick <= dwCurTick );
    CIOObject::AddTimer(this, dwAddTick - dwCurTick, 0);
  }
}

//----- (00448740) --------------------------------------------------------
void __thiscall CNPCObject::Insert(CNPCObject *this, CLink *pLink)
{
  InterlockedIncrement(&dword_4E1A98);
  CIOCriticalSection::Enter(&this->m_lockLink[1].m_critical_section);
  CLink::Insert(pLink, &this->m_link[1]);
  CIOCriticalSection::Leave((int)&this->m_lockLink[1]);
}

//----- (00448780) --------------------------------------------------------
CNPC *__thiscall CNPC::CNPC(CNPC *this, CGenNPC *pGen)
{
  CChar::CChar(this);
  this->__vftable = (CNPC_vtbl *)&off_4B97B8;
  this->m_dwAttr = 3;
  this->m_nMap = pGen->m_nMap;
  this->m_pMap = pGen->m_pMap;
  this->m_pInit = 0;
  this->m_nIndex = pGen->m_nIndex;
  this->m_nShape = pGen->m_nShape;
  this->m_nHtml = 0;
  this->m_nCID = pGen->m_nCID;
  this->m_nWarRelation = pGen->m_nWarRelation;
  return this;
}
// 4B97B8: using guessed type int (__stdcall *off_4B97B8)(int);

//----- (00448820) --------------------------------------------------------
BOOL __thiscall sub_448820(CNPC *this, const tagPOINT *a2)
{
  return Distance(&this->m_ptPixel, a2) <= 64 && this->m_nHtml > 0;// TODO: Something with CNPC::Reply  (Both use m_nHtml) -HighGamer
}

//----- (00448870) --------------------------------------------------------
int __cdecl Distance(const tagPOINT *ptP1, const tagPOINT *ptP2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int dx_; // [esp+4h] [ebp-8h]
  int dy_; // [esp+8h] [ebp-4h]

  dx_ = abs(ptP1->x - ptP2->x);
  dy_ = abs(ptP1->y - ptP2->y);
  if ( dx_ <= dy_ )
    v3 = dy_;
  else
    v3 = dx_;
  return v3;
}

//----- (004488D0) --------------------------------------------------------
void __stdcall sub_4488D0(int a1, int a2, int a3)
{
  ;
}

//----- (004488E0) --------------------------------------------------------
void *__thiscall CNPC::`scalar deleting destructor'(CNPC *this, char a2)
{
  CNPC::~CNPC(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00448910) --------------------------------------------------------
void __thiscall CNPC::~CNPC(_DWORD *this)
{
  *this = &off_4B97B8;
  CChar::~CChar((CChar *)this);
}
// 4B97B8: using guessed type int (__stdcall *off_4B97B8)(int);

//----- (00448930) --------------------------------------------------------
void __cdecl CNPC::Create(CGenNPC *pGen)
{
  int v1; // eax
  CNPCMerchant *v2; // [esp+0h] [ebp-5Ch]
  CNPCSiegeGunStone *v3; // [esp+4h] [ebp-58h]
  CNPCDoor *v4; // [esp+8h] [ebp-54h]
  CNPCTeleport *v5; // [esp+Ch] [ebp-50h]
  CNPCScenario *v6; // [esp+10h] [ebp-4Ch]
  CNPCInformant *v7; // [esp+14h] [ebp-48h]
  CNPCMerchant *v8; // [esp+18h] [ebp-44h]
  CNPCMerchant *v9; // [esp+1Ch] [ebp-40h]
  CNPCMerchant *v10; // [esp+20h] [ebp-3Ch]
  CNPCMerchant *v11; // [esp+28h] [ebp-34h]
  CNPCSiegeGunStone *v12; // [esp+2Ch] [ebp-30h]
  CMemory **v13; // [esp+30h] [ebp-2Ch]
  CMemory **v14; // [esp+34h] [ebp-28h]
  CMemory **v15; // [esp+38h] [ebp-24h]
  CMemory **v16; // [esp+3Ch] [ebp-20h]
  CNPCMerchant *v17; // [esp+40h] [ebp-1Ch]
  CNPCMerchant *v18; // [esp+44h] [ebp-18h]
  CNPCMerchant *v19; // [esp+48h] [ebp-14h]
  char v20[4]; // [esp+4Ch] [ebp-10h] BYREF
  CInitNPC *pInit; // [esp+50h] [ebp-Ch]
  CNPC *pNPC; // [esp+54h] [ebp-8h]
  int it; // [esp+58h] [ebp-4h] BYREF

  sub_44AE20(dword_4E1A9C, &it, &pGen->m_nKind);
  v1 = sub_430C20(dword_4E1A9C, (int)v20);
  if ( (unsigned __int8)unknown_libname_8(v1) )
  {
    LOG_ERR("CNPC::Create() Invalid InitNPC.(Index:%d)", pGen->m_nKind);
  }
  else
  {
    pInit = *(CInitNPC **)(sub_420250(&it) + 4);
    if ( (pGen->m_dwCountry & (1 << SLOBYTE(stru_4E35B4.m_nRef))) != 0 )
    {
      pNPC = 0;
      switch ( pInit->m_nKind )
      {
        case 0:
          v19 = (CNPCMerchant *)operator new(0x1D8u);
          if ( v19 )
            v10 = CNPCMerchant::CNPCMerchant(v19, pGen);
          else
            v10 = 0;
          pNPC = v10;
          goto LABEL_42;
        case 1:
          v18 = (CNPCMerchant *)operator new(0x1D8u);
          if ( v18 )
            v9 = CNPCMerchant::CNPCMerchant(v18, pGen);
          else
            v9 = 0;
          pNPC = v9;
          goto LABEL_42;
        case 2:
          v17 = (CNPCMerchant *)operator new(0x1D8u);
          if ( v17 )
            v8 = CNPCMerchant::CNPCMerchant(v17, pGen);
          else
            v8 = 0;
          pNPC = v8;
          goto LABEL_42;
        case 3:
          v16 = operator new(0x1D8u);
          if ( v16 )
            v7 = CNPCInformant::CNPCInformant((CNPCInformant *)v16, pGen);
          else
            v7 = 0;
          pNPC = v7;
          goto LABEL_42;
        case 4:
          v15 = operator new(0x1E8u);
          if ( v15 )
            v6 = CNPCScenario::CNPCScenario((CNPCScenario *)v15, pGen);
          else
            v6 = 0;
          pNPC = v6;
          goto LABEL_42;
        case 5:
          v14 = operator new(0x1E8u);
          if ( v14 )
            v5 = CNPCTeleport::CNPCTeleport((CNPCTeleport *)v14, pGen);
          else
            v5 = 0;
          pNPC = v5;
          goto LABEL_42;
        case 6:
          v13 = operator new(0x1E8u);
          if ( v13 )
            v4 = CNPCDoor::CNPCDoor((CNPCDoor *)v13, pGen);
          else
            v4 = 0;
          pNPC = v4;
          goto LABEL_42;
        case 7:
          v12 = (CNPCSiegeGunStone *)operator new(0x208u);
          if ( v12 )
            v3 = CNPCSiegeGunStone::CNPCSiegeGunStone(v12, pGen);
          else
            v3 = 0;
          pNPC = v3;
          goto LABEL_42;
        case 8:
          v11 = (CNPCMerchant *)operator new(0x1D8u);
          if ( v11 )
            v2 = CNPCMerchant::CNPCMerchant(v11, pGen);
          else
            v2 = 0;
          pNPC = v2;
LABEL_42:
          CChar::Lock(pNPC);
          pNPC->m_pGen = pGen;
          CChar::SetXY(pNPC, &pGen->m_ptPixel);
          CNPC::SetProperty(pNPC, pInit, pGen);
          pNPC->InitScenario(pNPC);
          if ( pNPC->m_nWarRelation != 2 )
            CSMap::SetOnMap(pNPC->m_pMap, pNPC, &pNPC->m_ptTile);
          CNPC::Add(pNPC);
          CChar::Unlock(pNPC);
          break;
        default:
          LOG_ERR("CNPC::Create() Invalid NPC kind. (Kind:%d)", pInit->m_nKind);
          break;
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E1A9C: using guessed type int dword_4E1A9C[3];

//----- (00448C80) --------------------------------------------------------
CNPCTeleport *__thiscall CNPCTeleport::CNPCTeleport(CNPCTeleport *this, CGenNPC *pGen)
{
  CNPC::CNPC(this, pGen);
  this->__vftable = (CNPCTeleport_vtbl *)&off_4B98F0;
  this->m_nTelMap = pGen->m_nTelMap;
  this->m_ptPTel = pGen->m_ptPTel;
  this->m_nTelCount = pGen->m_nTelCount;
  return this;
}
// 4B98F0: using guessed type int (__stdcall *off_4B98F0)(int);

//----- (00448CE0) --------------------------------------------------------
void __thiscall CNPCTeleport::~CNPCTeleport(CNPCTeleport *this)
{
  CNPC::~CNPC(this);
}

//----- (00448D00) --------------------------------------------------------
CNPCMerchant *__thiscall CNPCMerchant::CNPCMerchant(CNPCMerchant *this, CGenNPC *pGen)
{
  CNPC::CNPC(this, pGen);                       // This is 100% guess could be wrong but positions match 95% (If it's wrong replace it with CNPCInformant) -HighGamer
  this->__vftable = (CNPCMerchant_vtbl *)&off_4B99D0;
  return this;
}
// 4B99D0: using guessed type int (__stdcall *off_4B99D0)(int);

//----- (00448D30) --------------------------------------------------------
void __thiscall CNPCTeleport::`scalar deleting destructor'(_DWORD *this, char a2)
{
  CNPCTeleport::~CNPCTeleport((CNPCTeleport *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
}

//----- (00448D60) --------------------------------------------------------
CNPCInformant *__thiscall CNPCInformant::CNPCInformant(CNPCInformant *this, CGenNPC *pGen)
{
  CNPC::CNPC(this, pGen);                       // This is 100% guess could be wrong but positions match 95% (If it's wrong replace it with CNPCMerchant) -HighGamer
  this->__vftable = (CNPCInformant_vtbl *)&off_4B9AB0;
  return this;
}
// 4B9AB0: using guessed type int (__stdcall *off_4B9AB0)(int);

//----- (00448D90) --------------------------------------------------------
BOOL __thiscall CNPCQuest::CanReply(CNPCQuest *this, tagPOINT *a2)
{
  return Distance(&this->m_ptPixel, a2) <= 64;
}

//----- (00448DC0) --------------------------------------------------------
CNPCScenario *__thiscall CNPCScenario::CNPCScenario(CNPCScenario *this, CGenNPC *pGen)
{
  CNPC::CNPC(this, pGen);
  this->__vftable = (CNPCScenario_vtbl *)&off_4B9B90;
  this->m_dwTick = 0;
  this->m_nMirror = pGen->m_nMirror;
  this->m_nItemIndex = pGen->m_nItemIndex;
  return this;
}
// 4B9B90: using guessed type int (__stdcall *off_4B9B90)(int);

//----- (00448E10) --------------------------------------------------------
CNPCDoor *__thiscall CNPCDoor::CNPCDoor(CNPCDoor *this, CGenNPC *pGen)
{
  CNPC::CNPC(this, pGen);
  this->__vftable = (CNPCDoor_vtbl *)&off_4B9C70;
  this->m_dwTick = 0;
  this->m_nOpenPeriod = pGen->m_nMirror;
  this->m_nItemIndex = pGen->m_nItemIndex;
  return this;
}
// 4B9C70: using guessed type int (__stdcall *off_4B9C70)(int);

//----- (00448E60) --------------------------------------------------------
CNPCSiegeGunStone *__thiscall CNPCSiegeGunStone::CNPCSiegeGunStone(CNPCSiegeGunStone *this, CGenNPC *pGen)
{
  int v2; // ecx
  int v3; // edx

  CNPC::CNPC(this, pGen);
  this->__vftable = (CNPCSiegeGunStone_vtbl *)&off_4B9D50;
  this->m_dwTick = 0;
  this->m_nOperator = 0;
  this->m_nSiegeGun = 0;
  v2 = pGen->m_ptSGXY.y;
  this->m_ptSGXY.x = pGen->m_ptSGXY.x;
  this->m_ptSGXY.y = v2;
  v3 = pGen->m_ptSGDir.y;
  this->m_ptSGDir.x = pGen->m_ptSGDir.x;
  this->m_ptSGDir.y = v3;
  this->m_nStandard = 0;
  return this;
}
// 4B9D50: using guessed type int (__stdcall *off_4B9D50)(int);

//----- (00448F00) --------------------------------------------------------
int __cdecl CNPC::Size()
{
  return dword_4E1A98;
}

//----- (00448F10) --------------------------------------------------------
void __cdecl CNPC::Start()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  int v3; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1AA8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AA8, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = sub_420250(&it);
    CNPC::Create(*(CGenNPC **)(v1 + 4));
    sub_446090((int *)&it, &v3, 0);
  }
  CIOObject::AddTimer(&unk_4E1AD8, 0x3E8u, 1);
}
// 4E1AA8: using guessed type int dword_4E1AA8[3];

//----- (00448F80) --------------------------------------------------------
void __cdecl CNPC::Stop()
{
  CNPCScenario::ResetBossTower(1);
  CMonsterObject::Stop((CMonsterObject *)&unk_4E1AD8);
}

//----- (00448FA0) --------------------------------------------------------
CNPC *__cdecl CNPC::FindNPC(int nId)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  CNPC *pNPC; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  pNPC = 0;
  CRWLock::ReadLock(&unk_4E1AC0);
  sub_44AE20(dword_4E1AB4, &it, &nId);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AB4, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    pNPC = *(CNPC **)(sub_420250(&it) + 4);
    CIOObject::AddRef((int)pNPC);
  }
  CRWLock::ReadUnlock(&unk_4E1AC0);
  return pNPC;
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (00449010) --------------------------------------------------------
int __cdecl CNPC::CanReply(int nId, tagPOINT *ptP)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+0h] [ebp-10h] BYREF
  CNPC *pNPC; // [esp+4h] [ebp-Ch]
  int bReturn; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-4h] BYREF

  bReturn = 0;
  CRWLock::ReadLock(&unk_4E1AC0);
  sub_44AE20(dword_4E1AB4, &it, &nId);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AB4, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v2) )
  {
    pNPC = *(CNPC **)(sub_420250(&it) + 4);
    if ( pNPC->CanReply(pNPC, ptP) )
      bReturn = 1;
  }
  CRWLock::ReadUnlock(&unk_4E1AC0);
  return bReturn;
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (004490A0) --------------------------------------------------------
void __cdecl CNPC::Reply(int nId, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  CNPC *pNPC; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E1AC0);
  sub_44AE20(dword_4E1AB4, &it, &nId);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AB4, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v2) )
  {
    pNPC = *(CNPC **)(sub_420250(&it) + 4);
    if ( pNPC->CanReply(pNPC, &pPlayer->m_ptPixel) )
      pNPC->Reply(pNPC, pPlayer);
  }
  CRWLock::ReadUnlock(&unk_4E1AC0);
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (00449130) --------------------------------------------------------
void __thiscall CNPC::OnDelete(CNPC *this)
{
  CChar::Lock(this);
  CNPC::Remove(this);
  CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile);
  CChar::Unlock(this);
  sub_402180((int)this);
}

//----- (00449180) --------------------------------------------------------
void __thiscall CNPC::SendDelete(CNPC *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer)
{
  CPlayer::Write((CPlayer *)pPlayer, S2C_REMOVENPC, "d", this->m_nId);
}

//----- (004491B0) --------------------------------------------------------
void __thiscall CNPC::SendCreate(CNPC *this, CBase *pPlayer, CIOBuffer *pCreateBuffer)
{
  CPlayer::Write(
    (CPlayer *)pPlayer,
    S2C_CREATENPC,
    "dwbdddwdd",
    this->m_nId,
    this->m_nIndex,
    this->m_nShape,
    this->m_ptPixel.x,
    this->m_ptPixel.y,
    this->m_nZ,
    this->m_nDir,
    this->m_nGState,
    0);
}

//----- (00449220) --------------------------------------------------------
void __thiscall CNPC::AddGState(CNPC *this, int nGState)
{
  CChar::AddGState(this, nGState);
  CChar::WriteInSight(this, S2C_GSTATE, "dd", this->m_nId, this->m_nGState);
}

//----- (00449260) --------------------------------------------------------
void __thiscall CNPC::Reply(CNPC *this, CPlayer *pPlayer)
{
  if ( this->m_nHtml > 0 )
    CPlayer::Write(pPlayer, S2C_SENDHTML, "d", this->m_nHtml);
}

//----- (004492A0) --------------------------------------------------------
void __cdecl CNPC::WarRelationShow(int nCID, int bShow)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  int v4; // [esp+4h] [ebp-10h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-Ch] BYREF
  CBaseList *pList; // [esp+Ch] [ebp-8h]
  CNPC *pNPC; // [esp+10h] [ebp-4h]

  pList = 0;
  CRWLock::ReadLock(&unk_4E1AC0);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1AB4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AB4, (int)v3);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    pNPC = *(CNPC **)(sub_420250(&it) + 4);
    if ( pNPC->m_nCID == nCID )
      pList = (CBaseList *)CBaseList::Push(pList, pNPC);
    sub_446090((int *)&it, &v4, 0);
  }
  CRWLock::ReadUnlock(&unk_4E1AC0);
  while ( pList )
  {
    pNPC = (CNPC *)unknown_libname_7(pList);
    if ( pNPC->m_nWarRelation == 1 )
    {
      CNPC::Show(pNPC, bShow);
    }
    else if ( pNPC->m_nWarRelation == 2 )
    {
      CNPC::Show(pNPC, bShow == 0);
    }
    pList = CBaseList::Pop(pList);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (00449390) --------------------------------------------------------
void __thiscall CNPC::Add(CNPC *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v3[8]; // [esp+4h] [ebp-18h] BYREF
  int v4; // [esp+Ch] [ebp-10h]
  CNPC *v5; // [esp+10h] [ebp-Ch]
  char v6[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef((int)this);
  CNPCObject::Insert((CNPCObject *)&unk_4E1AD8, &this->m_link);
  CRWLock::WriteLock(&unk_4E1AC0);
  v5 = this;
  v4 = this->m_nId;
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v6);
  sub_445DF0(
    (int)dword_4E1AB4,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v3,
    v1);
  CRWLock::WriteUnlock(&unk_4E1AC0);
}
// 4493E7: variable 'v1' is possibly undefined
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (00449400) --------------------------------------------------------
void __thiscall CNPC::Remove(CNPC *this)
{
  int v2; // [esp+4h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E1AC0);
  v2 = this->m_nId;
  sub_44ADC0(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1AB4,
    (int)&v2);
  CRWLock::WriteUnlock(&unk_4E1AC0);
  InterlockedDecrement(&dword_4E1A98);
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (00449450) --------------------------------------------------------
int __thiscall CNPC::IsRemoved(CNPC *this)
{
  if ( !CBase::IsDeleted(this) )
    return 0;
  CLink::Remove(&this->m_link);
  CIOObject::Release(this);
  return 1;
}

//----- (00449490) --------------------------------------------------------
void __thiscall CNPC::SetProperty(CNPC *this, CInitNPC *pInit, CGenNPC *pGen)
{
  this->m_pInit = pInit;
  this->m_nHtml = pGen->m_nHtml;
  this->m_dwQuestKey = pGen->m_dwQuestKey;
  this->m_nZ = pGen->m_nZ;
  CChar::SetDirection(this, pGen->m_ptPDir.x, pGen->m_ptPDir.y);
}

//----- (004494F0) --------------------------------------------------------
void __thiscall CNPC::Show(CNPC *this, int bShow)
{
  CChar::Lock(this);
  if ( bShow )
  {
    CSMap::SetOnMap(this->m_pMap, this, &this->m_ptTile);
    CChar::WriteInSight(
      this,
      S2C_CREATENPC,
      "dwbdddwdd",
      this->m_nId,
      this->m_nIndex,
      this->m_nShape,
      this->m_ptPixel.x,
      this->m_ptPixel.y,
      this->m_nZ,
      this->m_nDir,
      this->m_nGState,
      0);
  }
  else
  {
    CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile);
    CChar::WriteInSight(this, S2C_REMOVENPC, "d", this->m_nId);
  }
  CChar::Unlock(this);
}

//----- (004495D0) --------------------------------------------------------
void __cdecl CNPC::GetNPCList(std::list<CNPC *> *list_npc, int nKind, int nMap)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v5[4]; // [esp+0h] [ebp-Ch] BYREF
  int v6; // [esp+4h] [ebp-8h] BYREF
  std::_Tree<std::_Tmap_traits<int,CNPC *,std::less<int>,std::allocator<std::pair<int const ,CNPC *> >,0> >::iterator *it; // [esp+8h] [ebp-4h] BYREF

  CRWLock::ReadLock(&unk_4E1AC0);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1AB4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AB4, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&it,
            v3) )
      break;                                    // TODO: Kinda looks bad needs more work -HighGamer
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&it) + 4) + 440) + 32) == nKind
      && *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(&it) + 4) + 444) + 52) == nMap )
    {
      v4 = sub_420250(&it);
      sub_47D000(list_npc, v4 + 4);
    }
    sub_446090((int *)&it, &v6, 0);
  }
  CRWLock::ReadUnlock(&unk_4E1AC0);
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (00449680) --------------------------------------------------------
void __thiscall CNPCQuest::Reply(CNPCQuest *this, CPlayer *pPlayer)
{
  CQuest::CallProcess(this->m_dwQuestKey, pPlayer);
}

//----- (004496B0) --------------------------------------------------------
void __cdecl CNPCScenario::MirrorGState(int bAdd, int nGState)
{
  int n_; // [esp+0h] [ebp-8h]
  int n; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&unk_4E1B38.m_critical_section);
  if ( bAdd )
  {
    for ( n = 0; n < 8; ++n )
    {
      if ( dword_4E1A70[n] )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A70[n] + 100))(dword_4E1A70[n], nGState);
    }
  }
  else
  {
    for ( n_ = 0; n_ < 8; ++n_ )
    {
      if ( dword_4E1A70[n_] )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A70[n_] + 112))(dword_4E1A70[n_], nGState);
    }
  }
  CIOCriticalSection::Leave((int)&unk_4E1B38);
}

//----- (00449770) --------------------------------------------------------
void __cdecl CNPCScenario::ThroneGState(int bAdd, int nGState)
{
  CIOCriticalSection::Enter(&unk_4E1B38.m_critical_section);
  if ( bAdd )
  {
    if ( dword_4E1A90 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A90 + 100))(dword_4E1A90, nGState);
  }
  else if ( dword_4E1A90 )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A90 + 112))(dword_4E1A90, nGState);
  }
  CIOCriticalSection::Leave((int)&unk_4E1B38);
}
// 4E1A90: using guessed type int dword_4E1A90;

//----- (004497D0) --------------------------------------------------------
void __cdecl CNPCScenario::ResetBossTower(int bResetNull)
{
  int n; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter(&unk_4E1B38.m_critical_section);
  if ( bResetNull )
  {
    for ( n = 0; n < 9; ++n )
      dword_4E1A70[n] = 0;
  }
  dword_4E1A94 = 0;
  CIOCriticalSection::Leave((int)&unk_4E1B38);
}
// 4E1A94: using guessed type int dword_4E1A94;

//----- (00449830) --------------------------------------------------------
void __thiscall CNPCScenario::Tick(CNPCScenario *this)
{
  unsigned int dwCurTick; // [esp+4h] [ebp-4h]

  if ( !CNPC::IsRemoved(this) )
  {
    CIOCriticalSection::Enter(&unk_4E1B38.m_critical_section);
    dwCurTick = GetTickCount();
    if ( dword_4E1A94 != 255 && CChar::IsGState(this, 1) && dwCurTick >= this->m_dwTick )
    {
      this->SubGState(this, 1);
      dword_4E1A94 &= ~(1 << this->m_nMirror);
      this->m_dwTick = 0;
      CPlayer::WriteInMap(this->m_nMap, S2C_MESSAGEV, "bw", 94, this->m_nItemIndex);
    }
    CIOCriticalSection::Leave((int)&unk_4E1B38);
  }
}
// 4E1A94: using guessed type int dword_4E1A94;

//----- (004498F0) --------------------------------------------------------
void __thiscall CNPCScenario::InitScenario(CNPCScenario *this)
{
  CIOCriticalSection::Enter(&unk_4E1B38.m_critical_section);
  if ( this->m_nMirror >= 0 && this->m_nMirror < 9 )
    dword_4E1A70[this->m_nMirror] = (int)this;
  CIOCriticalSection::Leave((int)&unk_4E1B38);
}

//----- (00449940) --------------------------------------------------------
void __thiscall CNPCScenario::Process(CNPCScenario *this, CPlayer *pPlayer, char *packet, char *end)
{
  char byAns; // [esp+7h] [ebp-1h] BYREF

  ScanPacket(packet, end, "b", &byAns);
  if ( byAns )
  {
    CIOCriticalSection::Enter(&unk_4E1B38.m_critical_section);
    if ( this->m_nMirror == 8 || !dword_4E1A70[this->m_nMirror] )
      goto LABEL_11;
    if ( (dword_4E1A94 & (1 << this->m_nMirror)) != 0 )
    {
      CIOCriticalSection::Leave((int)&unk_4E1B38);
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 91);
      return;
    }
    if ( !CPlayer::RemoveItem(pPlayer, 9, this->m_nItemIndex, 1) )
    {
      CIOCriticalSection::Leave((int)&unk_4E1B38);
      CPlayer::Write(pPlayer, S2C_MESSAGEV, "bw", 92, this->m_nItemIndex);
      return;
    }
    this->AddGState(this, 1);
    this->m_dwTick = GetTickCount() + 600000;
    CPlayer::WriteInMap(this->m_nMap, S2C_MESSAGEV, "bw", 93, this->m_nItemIndex);
    dword_4E1A94 |= 1 << this->m_nMirror;
    if ( dword_4E1A94 == 255 )
    {
      CIOCriticalSection::Leave((int)&unk_4E1B38);
      CMapObject::SetState((CMapObject *)&dword_4E2758[15 * this->m_nMap], this->m_nMap, 1);
    }
    else
    {
LABEL_11:
      CIOCriticalSection::Leave((int)&unk_4E1B38);
    }
  }
}
// 4E1A94: using guessed type int dword_4E1A94;

//----- (00449AE0) --------------------------------------------------------
void __thiscall CNPCTeleport::Process(CNPCTeleport *this, CPlayer *pPlayer, char *packet, char *end)
{
  tagPOINT ptP; // [esp+4h] [ebp-10h] BYREF
  int nRandomKey; // [esp+Ch] [ebp-8h]
  char byAns; // [esp+13h] [ebp-1h] BYREF

  nRandomKey = 0;
  ScanPacket(packet, end, "b", &byAns);
  if ( byAns )
  {
    nRandomKey = Random(0, this->m_nTelCount - 1);
    if ( this->m_ptPTel[nRandomKey].x >= 0 && this->m_ptPTel[nRandomKey].y >= 0 )
    {
      ptP.x = Random(this->m_ptPTel[nRandomKey].x - 32, this->m_ptPTel[nRandomKey].x + 32);
      ptP.y = Random(this->m_ptPTel[nRandomKey].y - 32, this->m_ptPTel[nRandomKey].y + 32);
      CPlayer::Teleport(pPlayer, this->m_nTelMap[nRandomKey], &ptP, 0, 0);
    }
  }
}

//----- (00449BF0) --------------------------------------------------------
void __thiscall CNPCDoor::Tick(CNPCDoor *this)
{
  unsigned int dwCurTick; // [esp+4h] [ebp-4h]

  if ( !CNPC::IsRemoved(this) )
  {
    CIOCriticalSection::Enter(&unk_4E1B58.m_critical_section);
    dwCurTick = GetTickCount();
    if ( CChar::IsGState(this, 16) )
    {
      if ( dwCurTick >= this->m_dwTick )
      {
        this->SubGState(this, 16);
        this->m_dwTick = 0;
        CPlayer::WriteInMap(this->m_nMap, S2C_MESSAGEV, "bw", 117, this->m_nId);
      }
    }
    CIOCriticalSection::Leave((int)&unk_4E1B58);
  }
}

//----- (00449C80) --------------------------------------------------------
void __thiscall CNPCDoor::Process(CNPCDoor *this, CPlayer *pPlayer, char *packet, char *end)
{
  char byAns; // [esp+7h] [ebp-1h] BYREF

  ScanPacket(packet, end, "b", &byAns);
  if ( byAns )
  {
    CIOCriticalSection::Enter(&unk_4E1B58.m_critical_section);
    if ( CChar::IsGState(this, 16) )
    {
      CIOCriticalSection::Leave((int)&unk_4E1B58);
    }
    else if ( CPlayer::RemoveItem(pPlayer, 9, this->m_nItemIndex, 1) )
    {
      this->AddGState(this, 16);
      this->m_dwTick = 1000 * this->m_nOpenPeriod + GetTickCount();
      CPlayer::WriteInMap(this->m_nMap, S2C_MESSAGEV, "bw", 116, this->m_nId);
      CIOCriticalSection::Leave((int)&unk_4E1B58);
    }
    else
    {
      CIOCriticalSection::Leave((int)&unk_4E1B58);
      CPlayer::Write(pPlayer, S2C_MESSAGEV, "bw", 115, this->m_nItemIndex);
    }
  }
}

//----- (00449D80) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::Reply(CNPCSiegeGunStone *this, CPlayer *pPlayer)
{
  if ( this->m_nHtml > 0 )
    CPlayer::Write(pPlayer, S2C_SIEGEGUNSET, "bdd", 0, this->m_nGState, this->m_nHtml);
}

//----- (00449DD0) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::Tick(CNPCSiegeGunStone *this)
{
  int v1; // eax
  int v2; // [esp+0h] [ebp-40h]
  CMonsterSiegeGun *pSiegeGun___; // [esp+8h] [ebp-38h]
  CMonsterSiegeGun *pSiegeGun__; // [esp+Ch] [ebp-34h]
  int nKeyID; // [esp+10h] [ebp-30h] BYREF
  int bParty; // [esp+14h] [ebp-2Ch] BYREF
  int nCount__; // [esp+1Ch] [ebp-24h]
  CItem *pItem; // [esp+20h] [ebp-20h]
  int nCount_; // [esp+24h] [ebp-1Ch]
  int nCount; // [esp+28h] [ebp-18h]
  CMonsterSiegeGun *pSiegeGun_; // [esp+2Ch] [ebp-14h]
  int nMaterial; // [esp+30h] [ebp-10h]
  CMonsterSiegeGun *pSiegeGun; // [esp+34h] [ebp-Ch]
  CPlayer *pPlayer; // [esp+38h] [ebp-8h]
  unsigned int dwCurTick; // [esp+3Ch] [ebp-4h]

  if ( CNPC::IsRemoved(this) || !this->m_nOperator )
    return;
  CIOCriticalSection::Enter(&unk_4E1B78.m_critical_section);
  pPlayer = (CPlayer *)CPlayer::FindPlayer(this->m_nOperator);
  if ( pPlayer )
  {
    dwCurTick = GetTickCount();
    if ( !CPlayer::IsEState(pPlayer, 2048) )
    {
      pSiegeGun___ = (CMonsterSiegeGun *)CMonster::FindMonster(this->m_nSiegeGun);
      if ( pSiegeGun___ )
      {
        CIOObject::Release(pSiegeGun___, &pSiegeGun___->m_nFindRef);
      }
      else
      {
        this->m_nOperator = 0;
        this->m_nSiegeGun = 0;
        this->m_nStandard = 0;
        this->SubGState(this, 32);
      }
      goto LABEL_63;
    }
    if ( CChar::IsGState(this, 32) )
    {
      if ( CChar::IsGState(this, 64) && dwCurTick >= this->m_dwTick )
      {
        pSiegeGun__ = (CMonsterSiegeGun *)CMonster::FindMonster(this->m_nSiegeGun);
        if ( !pSiegeGun__ )
        {
          CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
          CIOCriticalSection::Leave((int)&unk_4E1B78);
          return;
        }
        CPlayer::SubEState(pPlayer, 2048);
        sub_4021B0(this->m_nCID, 0);
        this->SubGState(this, 64);
        this->m_dwTick = 0;
        this->SubGState(this, 32);
        bParty = 0;
        nKeyID = 0;
        pSiegeGun__->Die(pSiegeGun__, pPlayer, 0, &bParty, &nKeyID);
        CChar::WriteInSight(pPlayer, S2C_SIEGEGUNSET, "bdd", 4, this->m_nId, this->m_nGState);
        CBase::Delete(pSiegeGun__);
        this->m_nStandard = 0;
        this->m_nSiegeGun = 0;
      }
      goto LABEL_63;
    }
    if ( !CChar::IsGState(this, 64) || dwCurTick < this->m_dwTick )
    {
LABEL_63:
      CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    if ( (dword_4E1174[0] & 2) == 0 && !sub_417450() )
    {
      CPlayer::SubEState(pPlayer, 2048);
      this->SubGState(this, 64);
      this->m_dwTick = 0;
      this->m_nOperator = 0;
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 118);
      CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    nMaterial = 0;
    v2 = this->m_nSiegegunIndex;
    switch ( v2 )
    {
      case 0:
        for ( nCount = 0; nCount < 8; ++nCount )
        {
          if ( !CPlayer::FindItem(pPlayer, nIndex[nCount], 1) )
            goto LABEL_45;
          CPlayer::RemoveItem(pPlayer, 9, nIndex[nCount], 1);
        }
        goto LABEL_52;
      case 1:
        for ( nCount_ = 0; nCount_ < 3 && dword_4D6310[nCount_]; ++nCount_ )
        {
          if ( CPlayer::FindItem(pPlayer, dword_4D6310[nCount_], 1) )
          {
            nMaterial = dword_4D6310[nCount_];
            break;
          }
        }
        if ( nMaterial )
        {
          if ( nMaterial == 882 )
          {
            CPlayer::RemoveItem(pPlayer, 9, 882, 1);
          }
          else
          {
            CPlayer::RemoveItem(pPlayer, 9, nMaterial, 1);
            pItem = CItem::CreateItem(nMaterial + 1, 0, 1, 0);
            if ( pItem )
            {
              CIOObject::AddRef((int)pItem);
              if ( CPlayer::InsertItem(pPlayer, 2, pItem) == 0 )
                CBase::Delete(pItem);
              CIOObject::Release(pItem);
            }
          }
          goto LABEL_52;
        }
        break;
      case 2:
        for ( nCount__ = 0; nCount__ < 4 && dword_4D6330[nCount__]; ++nCount__ )
        {
          if ( CPlayer::FindItem(pPlayer, dword_4D6330[nCount__], 1) )
          {
            nMaterial = dword_4D6330[nCount__];
            break;
          }
        }
        if ( nMaterial )
        {
          if ( nMaterial == 886 )
          {
            CPlayer::RemoveItem(pPlayer, 9, 886, 1);
          }
          else
          {
            CPlayer::RemoveItem(pPlayer, 9, nMaterial, 1);
            this = (CNPCSiegeGunStone *)CItem::CreateItem(nMaterial + 1, 0, 1, 0);
            if ( this )
            {
              CIOObject::AddRef((int)this);
              if ( CPlayer::InsertItem(pPlayer, 2, (CItem *)this) == 0 )
                CBase::Delete(this);
              CIOObject::Release(this);
            }
          }
          goto LABEL_52;
        }
        break;
      default:
LABEL_52:
        CPlayer::SubEState(pPlayer, 2048);
        sub_4021B0(this->m_nCID, 1);
        this->SubGState(this, 64);
        this->m_dwTick = 0;
        this->AddGState(this, 32);
        v1 = CBase::Id(this);
        pSiegeGun_ = (CMonsterSiegeGun *)CMonsterSiegeGun::Create(
                                           this->m_nSiegegunIndex + 319,
                                           this->m_nMap,
                                           (int)&this->m_ptSGXY,
                                           (int)&this->m_ptSGDir,
                                           pPlayer->m_nGID,
                                           pPlayer->m_szGuildName,
                                           v1);
        CChar::WriteInSight(pPlayer, S2C_SIEGEGUNSET, "bddd", 2, this->m_nId, this->m_nGState, pPlayer->m_nStandard);
        this->m_nStandard = pPlayer->m_nStandard;
        this->m_nSiegeGun = CBase::Id(pSiegeGun_);
        this->m_nOperator = 0;
        goto LABEL_63;
    }
LABEL_45:
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 123);
    CIOCriticalSection::Leave((int)&unk_4E1B78);
    CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
    return;
  }
  this->m_nOperator = 0;
  this->m_dwTick = 0;
  this->SubGState(this, 64);
  pSiegeGun = (CMonsterSiegeGun *)CMonster::FindMonster(this->m_nSiegeGun);
  if ( pSiegeGun )
  {
    CMonsterSiegeGun::SetOperator((CIOCriticalSection *)pSiegeGun, 0);
    CIOObject::Release(pSiegeGun, &pSiegeGun->m_nFindRef);
  }
  CIOCriticalSection::Leave((int)&unk_4E1B78);
}

//----- (0044A4E0) --------------------------------------------------------
void __thiscall CPlayer::SubEState(CPlayer *this, int dwEState)
{
  this->m_dwEState &= ~dwEState;
}

//----- (0044A510) --------------------------------------------------------
int __thiscall CPlayer::IsEState(CPlayer *this, int dwEState)
{
  return dwEState & this->m_dwEState;
}

//----- (0044A530) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SiegeGunSet(CNPCSiegeGunStone *this, CPlayer *pPlayer, int bSetting, int nIndex)
{
  int nCount__; // [esp+10h] [ebp-14h]
  int nCount_; // [esp+14h] [ebp-10h]
  int nCount; // [esp+18h] [ebp-Ch]
  int nSetTime; // [esp+1Ch] [ebp-8h]
  int nMaterial; // [esp+20h] [ebp-4h]

  CIOCriticalSection::Enter(&unk_4E1B78.m_critical_section);
  if ( bSetting )
  {
    if ( CChar::IsGState(this, 64) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 120);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    if ( CChar::IsGState(this, 32) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 129);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    if ( (dword_4E1174[0] & 2) == 0 && (!pPlayer->m_pGuild || !CCastle::IsAllCastleWarRelation((int)pPlayer->m_pGuild)) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 134);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    if ( !CChar::IsBState(pPlayer, 0x4000000000i64)
      && !CPlayerSkill::IsSkill(&pPlayer->m_skill, 80)
      && !CPlayerSkill::IsSkill(&pPlayer->m_skill, 81) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 130);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    nMaterial = 0;
    if ( nIndex )
    {
      if ( nIndex == 1 )
      {
        for ( nCount_ = 0; nCount_ < 3 && dword_4D6310[nCount_]; ++nCount_ )
        {
          if ( CPlayer::FindItem(pPlayer, dword_4D6310[nCount_], 1) )
          {
            nMaterial = dword_4D6310[nCount_];
            break;
          }
        }
        if ( !nMaterial )
          goto LABEL_39;
      }
      else if ( nIndex == 2 )
      {
        for ( nCount__ = 0; nCount__ < 4 && dword_4D6330[nCount__]; ++nCount__ )
        {
          if ( CPlayer::FindItem(pPlayer, dword_4D6330[nCount__], 1) )
          {
            nMaterial = dword_4D6330[nCount__];
            break;
          }
        }
        if ( !nMaterial )
        {
LABEL_39:
          CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 123);
          CIOCriticalSection::Leave((int)&unk_4E1B78);
          return;
        }
      }
    }
    else
    {
      for ( nCount = 0; nCount < 8; ++nCount )
      {
        if ( !CPlayer::FindItem(pPlayer, ::nIndex[nCount], 1) )
          goto LABEL_39;
      }
    }
    if ( sub_48F1F0(this->m_nCID) )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGEV, "bs", 131, pPlayer->m_szGuildName);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    this->m_nSiegegunIndex = nIndex;
    this->m_nOperator = CBase::Id(pPlayer);
    nSetTime = 30;
    if ( nIndex == 2 )
      nSetTime = 20;
    this->m_dwTick = 1000 * nSetTime + GetTickCount();
    CPlayer::AddEState(pPlayer, 2048);
    this->AddGState(this, 64);
    CPlayer::Write(pPlayer, S2C_SIEGEGUNSET, "bb", 1, nSetTime);
  }
  else
  {
    CPlayer::SubEState(pPlayer, 2048);
    this->SubGState(this, 64);
    this->m_dwTick = 0;
    this->m_nOperator = 0;
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 118);
  }
  CIOCriticalSection::Leave((int)&unk_4E1B78);
}

//----- (0044A940) --------------------------------------------------------
int __thiscall CPlayerSkill::IsSkill(CPlayerSkill *this, int nSkill)
{
  return (int)this->m_pSkill[nSkill];
}

//----- (0044A960) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SiegeGunUnSet(CNPCSiegeGunStone *this, CPlayer *pPlayer, int bSetting)
{
  int nIndex; // [esp+Ch] [ebp-Ch]
  CMonsterSiegeGun *pSiegeGun; // [esp+10h] [ebp-8h]
  int nSetTime; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&unk_4E1B78.m_critical_section);
  if ( !bSetting )
  {
    CPlayer::SubEState(pPlayer, 0x800);
    this->SubGState(this, 64);
    this->m_dwTick = 0;
    this->m_nOperator = 0;
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 128);
LABEL_19:
    CIOCriticalSection::Leave((int)&unk_4E1B78);
    return;
  }
  if ( CChar::IsGState(this, 64) )
  {
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 121);
    CIOCriticalSection::Leave((int)&unk_4E1B78);
    return;
  }
  if ( this->m_nOperator )
  {
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 127);
    CIOCriticalSection::Leave((int)&unk_4E1B78);
    return;
  }
  if ( !CChar::IsBState(pPlayer, 0x4000000000i64)
    && !CPlayerSkill::IsSkill(&pPlayer->m_skill, 80)
    && !CPlayerSkill::IsSkill(&pPlayer->m_skill, 81) )
  {
    CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 130);
    CIOCriticalSection::Leave((int)&unk_4E1B78);
    return;
  }
  pSiegeGun = (CMonsterSiegeGun *)CMonster::FindMonster(this->m_nSiegeGun);
  if ( pSiegeGun )
  {
    nIndex = pSiegeGun->m_nIndex - 319;
    if ( pSiegeGun->m_nGID != pPlayer->m_nGID )
    {
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 133);
      CIOObject::Release(pSiegeGun, &pSiegeGun->m_nFindRef);
      CIOCriticalSection::Leave((int)&unk_4E1B78);
      return;
    }
    CIOObject::Release(pSiegeGun, &pSiegeGun->m_nFindRef);
    this->m_nOperator = CBase::Id(pPlayer);
    nSetTime = 30;
    if ( nIndex == 2 )
      nSetTime = 20;
    if ( (dword_4E1174[0] & 2) != 0 )
      nSetTime = 5;
    this->m_dwTick = 1000 * nSetTime + GetTickCount();
    CPlayer::AddEState(pPlayer, 0x800);
    this->AddGState(this, 64);
    CPlayer::Write(pPlayer, S2C_SIEGEGUNSET, "bb", 3, nSetTime);
    goto LABEL_19;
  }
}

//----- (0044ABC0) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::Show(CNPCSiegeGunStone *this, int bShow)
{
  CChar::Lock(this);
  if ( bShow )
  {
    CSMap::SetOnMap(this->m_pMap, this, &this->m_ptTile);
    CChar::WriteInSight(
      this,
      S2C_CREATENPC,
      "dwbdddwdd",
      this->m_nId,
      this->m_nIndex,
      this->m_nShape,
      this->m_ptPixel.x,
      this->m_ptPixel.y,
      this->m_nZ,
      this->m_nDir,
      this->m_nGState,
      this->m_nStandard);
  }
  else
  {
    CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile);
    CChar::WriteInSight(this, S2C_REMOVENPC, "d", this->m_nId);
  }
  CChar::Unlock(this);
}

//----- (0044ACB0) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SendCreate(CNPCSiegeGunStone *this, CBase *a2, CIOBuffer *a3)
{
  CPlayer::Write(
    (CPlayer *)a2,
    S2C_CREATENPC,
    "dwbdddwdd",
    this->m_nId,
    this->m_nIndex,
    this->m_nShape,
    this->m_ptPixel.x,
    this->m_ptPixel.y,
    this->m_nZ,
    this->m_nDir,
    this->m_nGState,
    this->m_nStandard);
}

//----- (0044AD30) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SetOperator(CNPCSiegeGunStone *this, int nOperator)
{
  CChar::Lock(this);
  this->m_nOperator = nOperator;
  if ( !nOperator )
  {
    this->SubGState(this, 64);
    this->m_dwTick = 0;
  }
  CChar::Unlock(this);
}

//----- (0044AD80) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SetSiegeGun(CNPCSiegeGunStone *this, int nSiegeGun)
{
  CChar::Lock(this);
  this->m_nSiegeGun = nSiegeGun;
  if ( !nSiegeGun )
    this->SubGState(this, 32);
  CChar::Unlock(this);
}

//----- (0044ADC0) --------------------------------------------------------
int __thiscall sub_44ADC0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    (const int *)a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_44AEB0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (0044AE20) --------------------------------------------------------
_DWORD *__thiscall sub_44AE20(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_472A50(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)this,
    v12,
    a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044AEB0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44AEB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44B6E0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044AF50) --------------------------------------------------------
_DWORD *__thiscall sub_44AF50(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  char v52[36]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_431110(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0((std::logic_error *)v52, (const std::string *)v51);
    std::exception::_Raise(v4);
    sub_4111D0((std::logic_error *)v52);
    sub_40F780(v51);
  }
  v56 = (void *)unknown_libname_7(&a3);
  sub_418860(&a3);
  v54 = v56;
  v5 = (int *)sub_474590((int)v56);
  if ( *(_BYTE *)sub_431110(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_431110(*v6) )
    {
      v55 = *(void **)sub_474590((int)v54);
    }
    else
    {
      v54 = (void *)unknown_libname_7(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_431110((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)sub_474590((int)v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)sub_474590((int)v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_431110((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_42F920((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_431110((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_4470E0((int)v55);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)sub_474590((int)v56);
    *(_DWORD *)sub_474590((int)v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_431110((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)sub_474590((int)v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v56);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v56 )
      {
        v27 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_446F90((int)v56);
    v31 = (char *)sub_446F90((int)v54);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_446F90((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_446F90((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_446F90((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)sub_474590((int)v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)sub_474590((int)v53);
      if ( !*(_BYTE *)sub_446F90((int)v54) )
      {
        *(_BYTE *)sub_446F90((int)v54) = 1;
        *(_BYTE *)sub_446F90((int)v53) = 0;
        sub_44CAC0(this, (int)v53);
        v54 = *(void **)sub_474590((int)v53);
      }
      if ( !*(_BYTE *)sub_431110((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_446F90(*v40) != 1 || (v41 = (int *)sub_474590((int)v54), *(_BYTE *)sub_446F90(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v54);
          if ( *(_BYTE *)sub_446F90(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_446F90(*v43) = 1;
            *(_BYTE *)sub_446F90((int)v54) = 0;
            sub_44CBF0(this, (int)v54);
            v54 = *(void **)sub_474590((int)v53);
          }
          v44 = (_BYTE *)sub_446F90((int)v53);
          *(_BYTE *)sub_446F90((int)v54) = *v44;
          *(_BYTE *)sub_446F90((int)v53) = 1;
          v45 = (int *)sub_474590((int)v54);
          *(_BYTE *)sub_446F90(*v45) = 1;
          sub_44CAC0(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_446F90((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_446F90((int)v54) )
    {
      *(_BYTE *)sub_446F90((int)v54) = 1;
      *(_BYTE *)sub_446F90((int)v53) = 0;
      sub_44CBF0(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_431110((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v54);
    if ( *(_BYTE *)sub_446F90(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_446F90(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_446F90(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v54);
        *(_BYTE *)sub_446F90(*v37) = 1;
        *(_BYTE *)sub_446F90((int)v54) = 0;
        sub_44CAC0(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_446F90((int)v53);
      *(_BYTE *)sub_446F90((int)v54) = *v38;
      *(_BYTE *)sub_446F90((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_446F90(*v39) = 1;
      sub_44CBF0(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70((int)v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0044B6E0) --------------------------------------------------------
_DWORD *__thiscall sub_44B6E0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44B780(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0044B740) --------------------------------------------------------
void *__thiscall sub_44B740(void *this)
{
  sub_48DB20((int *)this);
  return this;
}

//----- (0044B760) --------------------------------------------------------
_DWORD *__thiscall sub_44B760(_DWORD *this)
{
  sub_42F840(this);
  return this;
}

//----- (0044B780) --------------------------------------------------------
int __stdcall sub_44B780(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_44B780(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0044B800) --------------------------------------------------------
unsigned int __thiscall sub_44B800(int this)
{
  return std::allocator<XSoundPtr>::max_size((std::allocator<tagPARTICLES *> *)(this + 2));
}

//----- (0044B820) --------------------------------------------------------
std::_List_nod<tagPARTICLES *>::_Node *__thiscall std::_List_nod<tagPARTICLES *>::_Node::_Node(std::_List_nod<tagPARTICLES *>::_Node *this, std::_List_nod<tagPARTICLES *>::_Node *_Nextarg, std::_List_nod<tagPARTICLES *>::_Node *_Prevarg, tagPARTICLES *const *_Myvalarg)
{
  *(_DWORD *)this = _Nextarg;
  *((_DWORD *)this + 1) = _Prevarg;
  *((tagPARTICLES **)this + 2) = *_Myvalarg;
  return this;
}

//----- (0044B850) --------------------------------------------------------
unsigned int __thiscall std::allocator<XSoundPtr>::max_size(std::allocator<tagPARTICLES *> *this)
{
  return 0x3FFFFFFF;
}

//----- (0044B880) --------------------------------------------------------
void *__thiscall sub_44B880(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0044B8B0) --------------------------------------------------------
void *__thiscall sub_44B8B0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0044B8E0) --------------------------------------------------------
void *__thiscall sub_44B8E0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0044B920) --------------------------------------------------------
int __thiscall sub_44B920(void *this)
{
  return sub_44B940(this);
}

//----- (0044B940) --------------------------------------------------------
int __thiscall sub_44B940(void *this)
{
  return sub_44B960((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0044B960) --------------------------------------------------------
int __thiscall sub_44B960(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44BA10(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0044BA10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BA10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44BAB0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044BAB0) --------------------------------------------------------
_DWORD *__thiscall sub_44BAB0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44BB10(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0044BB10) --------------------------------------------------------
int __stdcall sub_44BB10(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_44BB10(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0044BB90) --------------------------------------------------------
int __thiscall sub_44BB90(void *this)
{
  return sub_44BBB0(this);
}

//----- (0044BBB0) --------------------------------------------------------
int __thiscall sub_44BBB0(void *this)
{
  return sub_44BBD0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0044BBD0) --------------------------------------------------------
int __thiscall sub_44BBD0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44BC80(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0044BC80) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BC80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44BD20(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044BD20) --------------------------------------------------------
_DWORD *__thiscall sub_44BD20(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44BD80(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0044BD80) --------------------------------------------------------
int __stdcall sub_44BD80(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_44BD80(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0044BE00) --------------------------------------------------------
int __thiscall sub_44BE00(void *this)
{
  return sub_44BE20(this);
}

//----- (0044BE20) --------------------------------------------------------
int __thiscall sub_44BE20(void *this)
{
  return sub_44BE40((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0044BE40) --------------------------------------------------------
int __thiscall sub_44BE40(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44AEB0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0044BEF0) --------------------------------------------------------
int CObjectDB::Open()
{
  int result; // eax
  char v1[8]; // [esp+30h] [ebp-238h] BYREF
  char v2[8]; // [esp+38h] [ebp-230h] BYREF
  int size; // [esp+40h] [ebp-228h]
  int i; // [esp+44h] [ebp-224h]
  CObjectDB config; // [esp+48h] [ebp-220h] BYREF
  int v6; // [esp+264h] [ebp-4h]

  v6 = dword_4D9830;
  size = 114;
  for ( i = 0; i < size; ++i )
  {
    sub_420060(
      (int)dword_4E1B9C,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v2,
      8 * i + 5118888);
    if ( !v2[4] )
      LOG_ERR("CObjectDB::Open() Duplicate Key at Symbol Map %d", i);
  }
  size = 14;
  for ( i = 0; i < size; ++i )
  {
    sub_420060(
      (int)dword_4E1F38,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v1,
      8 * i + 5119816);
    if ( !v1[4] )
      LOG_ERR("CObjectDB::Open() Duplicate Key at Class Map %d", i);
  }
  CInitItem::Open();
  CPlayerSkill::Open();
  CMonsterSkill::Open();
  sub_425C20(&config);
  LOG_INFO("Reading [Map] . . .");
  if ( !CObjectDB::Open(&config, "Config\\InitMap.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [InitMonster] . . .");
  if ( !CObjectDB::Open(&config, "Config\\InitMonster.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [GenMonster] . . .");
  if ( !CObjectDB::Open(&config, "Config\\GenMonster.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [InitItem] . . .");
  if ( !CObjectDB::Open(&config, "Config\\InitItem.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [Prefix] . . .");
  if ( CObjectDB::Open(&config, "Config\\Prefix.txt")
    && (LOG_INFO("Reading [ItemGroup] . . ."), CObjectDB::Open(&config, "Config\\ItemGroup.txt"))
    && (LOG_INFO("Reading [Goods] . . ."), CObjectDB::Open(&config, "Config\\Goods.txt"))
    && (LOG_INFO("Reading [InitNPC] . . ."), CObjectDB::Open(&config, "Config\\InitNPC.txt"))
    && (LOG_INFO("Reading [InitSkill] . . ."), CObjectDB::Open(&config, "Config\\InitSkill.txt"))
    && (LOG_INFO("Reading [Quest] . . ."), CObjectDB::Open(&config, "Config\\Quest.txt"))
    && (LOG_INFO("Reading [Etc] . . ."), CObjectDB::Open(&config, "Config\\Etc.txt")) )
  {
    InterlockedExchange(&dword_4E1B98, 1);
    sub_425C40(&config);
    result = 1;
  }
  else
  {
LABEL_27:
    sub_425C40(&config);
    result = 0;
  }
  return result;
}
// 4D9830: using guessed type int dword_4D9830;
// 4E1F38: using guessed type int dword_4E1F38[4];

//----- (0044C300) --------------------------------------------------------
int __thiscall CObjectDB::Open(CObjectDB *this, char *szFileName)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  Token v6; // [esp+4h] [ebp-44h]
  char v8[4]; // [esp+14h] [ebp-34h] BYREF
  CObjectDB *v9; // [esp+18h] [ebp-30h] BYREF
  int a2; // [esp+1Ch] [ebp-2Ch]
  char v11[4]; // [esp+20h] [ebp-28h] BYREF
  std::string key; // [esp+24h] [ebp-24h] BYREF
  int v13; // [esp+40h] [ebp-8h]
  Token token; // [esp+44h] [ebp-4h]

  v13 = dword_4D9830;
  this->m_fp = fopen(szFileName, "rb");
  if ( this->m_fp )
  {
    std::string::string(&key);
    this->m_nLine = 1;
    this->m_pszFileName = szFileName;
    while ( 2 )
    {
      token = CConfig::GetToken(this);
      v6 = token;
      switch ( token )
      {
        case T_END:
          fclose(this->m_fp);
          this->m_fp = 0;
          sub_40F780(&key);
          return 1;
        case T_NEWLINE:
          continue;
        case T_OPEN:
          if ( CConfig::GetToken(this) != 1 )
            goto LABEL_13;
          v9 = this;
          sub_44C970((iless *)dword_4E1F38, v11, (const char **)&v9);
          v3 = sub_430C20(dword_4E1F38, (int)v8);
          if ( (unsigned __int8)unknown_libname_8(v3) )
            goto LABEL_13;                      // TODO: Check later when found function call -HighGamer
          v4 = sub_420250(v11);
          a2 = (*(int (__thiscall **)(_DWORD, _DWORD, Token))(**(_DWORD **)(v4 + 4) + 24))(
                 *(_DWORD *)(v4 + 4),
                 *(_DWORD *)(v4 + 4),
                 v6);
          if ( CObjectDB::Load(this, (CBase *)a2) )
            continue;
          v5 = sub_420250(v11);
          if ( a2 != *(_DWORD *)(v5 + 4) )
            (*(void (__thiscall **)(int))(*(_DWORD *)a2 + 4))(a2);
          fclose(this->m_fp);
          this->m_fp = 0;
          LOG_ERR("Invalid format %s(%d) at CObjectDB::Open(Load())", szFileName, this->m_nLine);
          sub_40F780(&key);
          result = 0;
          break;
        case T_CLOSE:
          LOG_ERR("Unmatched close parenthesis at CObjectDB::Open, %s(%d)", szFileName, this->m_nLine);
          continue;
        default:
LABEL_13:
          LOG_ERR("Invalid format %s(%d) at CObjectDB::Open", szFileName, this->m_nLine);
          do
            token = CConfig::GetToken(this);
          while ( token != T_NEWLINE && token );
          continue;
      }
      break;
    }
  }
  else
  {
    LOG_ERR("'%s' File open failed at CObjectDB::Open", szFileName);
    result = 0;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E1F38: using guessed type int dword_4E1F38[4];

//----- (0044C550) --------------------------------------------------------
enum Symbol __cdecl CObjectDB::FindSymbol(const char *szSymbol)
{
  int v1; // eax
  enum Symbol result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44C970((iless *)dword_4E1B9C, v4, &szSymbol);
  v1 = sub_430C20(dword_4E1B9C, (int)v3);
  if ( (unsigned __int8)unknown_libname_8(v1) )
    result = S_NULL;
  else
    result = *(_DWORD *)(sub_420250(v4) + 4);
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044C5A0) --------------------------------------------------------
int __thiscall CObjectDB::Load(CObjectDB *this, CBase *base)
{
  lisp::_object *v2; // ecx
  void *v3; // esp
  lisp::_object *v4; // ecx
  lisp::_object *v5; // ecx
  struct lisp::var *v6; // eax
  void *v7; // esp
  void *v8; // esp
  void *v9; // esp
  lisp::_object *v10; // ecx
  lisp::_object *v11; // ecx
  struct lisp::var *v12; // eax
  lisp::var v14; // [esp-1Ch] [ebp-7Ch] BYREF
  lisp::var v15; // [esp-18h] [ebp-78h] BYREF
  lisp::var v16; // [esp-14h] [ebp-74h] BYREF
  lisp::var v17; // [esp-10h] [ebp-70h] BYREF
  int v18; // [esp-Ch] [ebp-6Ch] BYREF
  int v19; // [esp-8h] [ebp-68h] BYREF
  lisp::var v20; // [esp-4h] [ebp-64h] BYREF
  int v21[2]; // [esp+0h] [ebp-60h] BYREF
  lisp::_string *v22; // [esp+8h] [ebp-58h]
  void *v23; // [esp+Ch] [ebp-54h]
  int *v24; // [esp+10h] [ebp-50h]
  std::ios_base *v25; // [esp+14h] [ebp-4Ch]
  void *v26; // [esp+18h] [ebp-48h]
  CObjectDB *v27; // [esp+1Ch] [ebp-44h]
  std::ios_base *v28; // [esp+2Ch] [ebp-34h]
  lisp::_string *v29; // [esp+34h] [ebp-2Ch]
  std::ios_base *v30; // [esp+40h] [ebp-20h]
  lisp::var v; // [esp+48h] [ebp-18h] BYREF
  size_t v32; // [esp+4Ch] [ebp-14h]
  char *str; // [esp+50h] [ebp-10h]
  lisp::var v34; // [esp+54h] [ebp-Ch] BYREF
  int v35; // [esp+58h] [ebp-8h]
  struct lisp::var *v36; // [esp+5Ch] [ebp-4h]

  v27 = this;
  lisp::var::var((std::ios_base *)&v34);
  v36 = 0;
  do
  {
    while ( 1 )
    {
      while ( 1 )
      {
        while ( 1 )
        {
          v35 = CConfig::GetToken(v27);
          if ( v35 != 8 )
            break;
          if ( !v36 )
          {
            v20.m_pObject = v2;
            lisp::var::var(&v20, &v34);
            if ( ((int (__thiscall *)(CBase *, _DWORD))base->Set)(base, 0) && base->OnLoad(base) )
              return 1;
            LOG_ERR("Invalid format %s line(%d) at CObjectDB::Load", v27->m_pszFileName, v27->m_nLine);
            return 0;
          }
          v36 = (struct lisp::var *)((char *)v36 - 1);
        }
        if ( v35 != 7 )
          break;
        v3 = alloca(12);
        v26 = &v18;
        v30 = (std::ios_base *)operator new(0xCu, &v18);
        if ( v30 )
        {
          v17.m_pObject = v4;
          lisp::var::var(&v17, &::v);
          v16.m_pObject = v5;
          lisp::var::var(&v16, &::v);
          v25 = lisp::_cons::_cons(v30, (int)v16.m_pObject, (int)v17.m_pObject);
        }
        else
        {
          v25 = 0;
        }
        v17.m_pObject = v4;
        sub_446FD0(v25);
        v6 = lisp::find_nil((lisp *)&v34, v36, (int)v17.m_pObject);
        lisp::var::operator=(v6, (int)v17.m_pObject);
        v36 = (struct lisp::var *)((char *)v36 + 1);
      }
      if ( v35 != 1 && v35 != 2 )
        break;
      v32 = strlen(v27->m_szSymbol);
      v7 = alloca(v32 + 1);
      v24 = v21;
      str = (char *)v21;
      memcpy(v21, v27, v32 + 1);
      v8 = alloca(8);
      v23 = &v19;
      v29 = (lisp::_string *)operator new(8u, &v19);
      if ( v29 )
        v22 = lisp::_string::_string(v29, str);
      else
        v22 = 0;
      sub_446FD0(v22);
      v9 = alloca(12);
      v21[1] = (int)&v16;
      v28 = (std::ios_base *)operator new(0xCu, &v16);
      if ( v28 )
      {
        v15.m_pObject = v10;
        lisp::var::var(&v15, &::v);
        v14.m_pObject = v11;
        lisp::var::var(&v14, &v);
        v21[0] = (int)lisp::_cons::_cons(v28, (int)v14.m_pObject, (int)v15.m_pObject);
      }
      else
      {
        v21[0] = 0;
      }
      v15.m_pObject = v10;
      sub_446FD0(v21[0]);
      v12 = lisp::find_nil((lisp *)&v34, v36, (int)v15.m_pObject);
      lisp::var::operator=(v12, (int)v15.m_pObject);
    }
  }
  while ( v35 == 3 );
  LOG_ERR("Invalid format %s line(%d) token(%d) at CObjectDB::Load", v27->m_pszFileName, v27->m_nLine, v35);
  while ( (int)v36 >= 0 )
  {
    switch ( v35 )
    {
      case 0:
        LOG_ERR("Unmatched open parenthesis at CObjectDB::Load");
        return 0;
      case 7:
        v36 = (struct lisp::var *)((char *)v36 + 1);
        break;
      case 8:
        v36 = (struct lisp::var *)((char *)v36 - 1);
        break;
    }
    v35 = CConfig::GetToken(v27);
  }
  return 0;
}
// 44C610: variable 'v4' is possibly undefined
// 44C61D: variable 'v5' is possibly undefined
// 44C725: variable 'v10' is possibly undefined
// 44C732: variable 'v11' is possibly undefined
// 44C781: variable 'v2' is possibly undefined
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0044C860) --------------------------------------------------------
struct lisp::var *__stdcall lisp::find_nil(lisp *this, struct lisp::var *a2, int a3)
{
  lisp::var *i; // [esp+0h] [ebp-8h]
  lisp::var *v5; // [esp+4h] [ebp-4h]

  v5 = (lisp::var *)this;
  for ( i = (lisp::var *)this; ; i = v5 )
  {
    while ( lisp::var::consp(v5) )
    {
      i = v5;
      v5 = lisp::var::cdr(v5);
    }
    if ( !a2 )
      break;
    a2 = (struct lisp::var *)((char *)a2 - 1);
    v5 = lisp::var::car(i);
  }
  return v5;
}

//----- (0044C8D0) --------------------------------------------------------
void __cdecl CObjectDB::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  int v3; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v4; // [esp+8h] [ebp-4h] BYREF

  InterlockedExchange(&dword_4E1B98, 0);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1F38,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1F38, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v4,
            v0) )
      break;
    v1 = sub_420250(&v4);
    CBase::Delete(*(CBase **)(v1 + 4));
    sub_446090((int *)&v4, &v3, 0);
  }
  CItem::Close();
  CInitNPC::Close();
  CGenNPC::Close();
  CPlayerSkill::Close();
  CMonsterSkill::Close();
  CQuest::Close();
}
// 4E1F38: using guessed type int dword_4E1F38[4];

//----- (0044C960) --------------------------------------------------------
LONG sub_44C960()
{
  return dword_4E1B98;
}

//----- (0044C970) --------------------------------------------------------
_DWORD *__thiscall sub_44C970(iless *this, _DWORD *a2, const char **a3)
{
  int v3; // eax
  int v4; // eax
  const char **v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_44CA00(this, v12, (int)a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (const char **)sub_473500(v4), mbstricmp::operator()(this, *a3, *v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044CA00) --------------------------------------------------------
void *__thiscall sub_44CA00(void *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_44CA30((int)this, (const char **)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (0044CA30) --------------------------------------------------------
int __thiscall sub_44CA30(int this, const char **a2)
{
  const char **v2; // eax
  const char *v4; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v6 = *(_DWORD *)sub_478AB0((int *)this);
  v7 = *(_DWORD *)(this + 4);
  while ( !*(_BYTE *)sub_431110(v6) )
  {
    v4 = *a2;
    v2 = (const char **)sub_473500(v6);
    if ( mbstricmp::operator()((iless *)this, *v2, v4) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)sub_474590(v6);
    }
  }
  return v7;
}

//----- (0044CAC0) --------------------------------------------------------
int *__thiscall sub_44CAC0(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_431110(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (0044CBF0) --------------------------------------------------------
int *__thiscall sub_44CBF0(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_431110(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (0044CD20) --------------------------------------------------------
CMemory **__stdcall sub_44CD20(int a1)
{
  return sub_420900(a1);
}

//----- (0044CD40) --------------------------------------------------------
void *__thiscall sub_44CD40(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0044CD70) --------------------------------------------------------
int __stdcall sub_44CD70(int a1)
{
  return _initp_misc_winxfltr();
}

//----- (0044CD90) --------------------------------------------------------
void *__thiscall sub_44CD90(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0044CDC0) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *__cdecl std::_Construct<std::_Tree_nod<std::_Tmap_traits<int,std::pair<std::string,std::string>,std::less<int>,std::allocator<std::pair<int const,std::pair<std::string,std::string>>>,1>>::_Node *,std::_Tree_nod<std::_Tmap_traits<int,std::pair<std::string,std::string>,std::less<int>,std::allocator<std::pair<int const,std::pair<std::string,std::string>>>,1>>::_Node *>(std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node **_Ptr, std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *const *_Val)
{
  std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *result; // eax
  std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node **v3; // [esp+4h] [ebp-4h]

  result = (std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node *)operator new(4u, _Ptr);
  v3 = (std::_Tree_nod<std::_Tmap_traits<unsigned long,KMacro::CJobSystem,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,KMacro::CJobSystem> >,0> >::_Node **)result;
  if ( result )
  {
    result = *_Val;
    *v3 = *_Val;
  }
  return result;
}

//----- (0044CE00) --------------------------------------------------------
CQuest *__thiscall CQuest::CQuest(CQuest *this)
{
  CBase::CBase((int)this);
  *(_DWORD *)this = &off_4BA5A0;
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 0;
  sub_47D030((char *)this + 44);
  return this;
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0044CE50) --------------------------------------------------------
void *__thiscall sub_44CE50(void *this, char a2)
{
  CQuest::_CQuest((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0044CE80) --------------------------------------------------------
void *__thiscall std::_List_ptr<evQuake_s *>::_List_ptr<evQuake_s *>(void *this, char a2)
{
  char v3; // [esp-4h] [ebp-Ch]

  v3 = (char)this;
  std::_Init_locks::operator=(&a2);
  sub_44F7C0(this, v3);
  std::_Init_locks::operator=(&a2);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (0044CEC0) --------------------------------------------------------
CMemory **__cdecl sub_44CEC0(int a1)
{
  return operator new(12 * a1);
}

//----- (0044CEE0) --------------------------------------------------------
int __thiscall sub_44CEE0(void *this)
{
  return sub_44CF00(this);
}

//----- (0044CF00) --------------------------------------------------------
int __thiscall sub_44CF00(void *this)
{
  return sub_44CF20((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0044CF20) --------------------------------------------------------
int __thiscall sub_44CF20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44CFD0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0044CFD0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44CFD0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44D070(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044D070) --------------------------------------------------------
_DWORD *__thiscall sub_44D070(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44D0D0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0044D0D0) --------------------------------------------------------
int __stdcall sub_44D0D0(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_44D0D0(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0044D150) --------------------------------------------------------
int __thiscall sub_44D150(void *this)
{
  return sub_44D170(this);
}

//----- (0044D170) --------------------------------------------------------
int __thiscall sub_44D170(void *this)
{
  return sub_44D190((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0044D190) --------------------------------------------------------
int __thiscall sub_44D190(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44D240(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0044D240) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44D240(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44D2E0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044D2E0) --------------------------------------------------------
_DWORD *__thiscall sub_44D2E0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44D340(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0044D340) --------------------------------------------------------
int __stdcall sub_44D340(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_44D340(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0044D3C0) --------------------------------------------------------
CParty *__thiscall CParty::CParty(void *this, int a2)
{
  CIOObject::CIOObject((CIOObject *)this);
  *(_DWORD *)this = &off_4BA5E8;
  std::vector<IPAddrMask>::vector<IPAddrMask>((std::vector<CIOSocket::CIOTimer> *)this + 2);
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)((char *)this + 48));
  *((_DWORD *)this + 4) = InterlockedIncrement(&dword_4E1FB8);
  *((_DWORD *)this + 5) = a2;
  *((_DWORD *)this + 6) = *(_DWORD *)(a2 + 60);
  *((_DWORD *)this + 7) = 0;
  CIOObject::AddRef((CIOObject *)a2, (volatile int *)(a2 + 444));
  *(_DWORD *)(a2 + 1016) = *((_DWORD *)this + 4);
  std::vector<IPAddrMask>::push_back((std::vector<CIOSocket::CIOTimer> *)this + 2, (const CIOSocket::CIOTimer *)&a2);
  *((_DWORD *)this + 20) = 0;
  CIOObject::AddTimer((CIOObject *)this, 0x3E8u, 0);
  return (CParty *)this;
}
// 4BA5E8: using guessed type int (__stdcall *off_4BA5E8)(int);

//----- (0044D470) --------------------------------------------------------
void *__thiscall sub_44D470(void *this, char a2)
{
  Party::_CParty(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0044D4A0) --------------------------------------------------------
void __thiscall Party::_CParty(void *this)
{
  *(_DWORD *)this = &off_4BA5E8;
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)((char *)this + 48));
  sub_44F580((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)((char *)this + 32));
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);
// 4BA5E8: using guessed type int (__stdcall *off_4BA5E8)(int);

//----- (0044D4E0) --------------------------------------------------------
volatile int *__cdecl sub_44D4E0(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v3; // [esp+0h] [ebp-Ch] BYREF
  int v4; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v5; // [esp+8h] [ebp-4h] BYREF

  v4 = 0;
  CIOCriticalSection::Enter(&unk_4E1FD0.m_critical_section);
  sub_44AE20(dword_4E1FC4, &v5, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1FC4, (int)&v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v5,
         v1) )
  {
    v4 = *(_DWORD *)(sub_420250(&v5) + 4);
    CIOObject::AddRef(v4);
  }
  CIOCriticalSection::Leave((int)&unk_4E1FD0);
  return (volatile int *)v4;
}

//----- (0044D550) --------------------------------------------------------
void __cdecl CParty::Accept(int a1, int a2)
{
  CParty *v2; // [esp+0h] [ebp-Ch]
  CMemory **v3; // [esp+4h] [ebp-8h]
  CIOCriticalSection *v4; // [esp+8h] [ebp-4h]

  BothLock((CPlayer *)a1, (CPlayer *)a2);
  if ( *(_DWORD *)(a2 + 1016) )
  {
    CPlayer::Write((CPlayer *)a1, S2C_MESSAGEV, "bs", 31, a2 + 32);
  }
  else
  {
    v4 = (CIOCriticalSection *)sub_44D4E0(*(_DWORD *)(a1 + 1016));
    if ( !v4 )
    {
      v3 = operator new(0x54u);
      if ( v3 )
        v2 = CParty::CParty(v3, a1);
      else
        v2 = 0;
      v4 = (CIOCriticalSection *)v2;
      CIOObject::AddRef((int)v2);
      CParty::Add((volatile int *)v2);
    }
    CParty::Join(v4, a1, a2);
    CIOObject::Release((CIOObject *)v4);
  }
  BothUnlock((CPlayer *)a1, (CPlayer *)a2);
}

//----- (0044D620) --------------------------------------------------------
void __cdecl BothUnlock(CPlayer *pA, CPlayer *pB)
{
  CChar::Unlock(pA);
  CChar::Unlock(pB);
}

//----- (0044D640) --------------------------------------------------------
void __thiscall CParty::OnFree(CIOObject *this)
{
  int v1; // eax

  if ( this[1].m_nGeneralRef )
  {
    CIOObject::OnFree(this);
  }
  else
  {
    ELOG("CParty::OnFree %p %d %d %d %d\n", (char)this);
    EBREAK(v1);
    this->m_nRef = 100;
  }
}
// 44D67D: variable 'v1' is possibly undefined

//----- (0044D6A0) --------------------------------------------------------
void __thiscall CParty::OnTimer(CIOCriticalSection *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // eax
  CIOCriticalSection *v5; // [esp+0h] [ebp-20h]
  CIOObject *v6; // [esp+0h] [ebp-20h]
  char v7[4]; // [esp+4h] [ebp-1Ch] BYREF
  int v8; // [esp+8h] [ebp-18h] BYREF
  _DWORD *v9; // [esp+Ch] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v10; // [esp+10h] [ebp-10h] BYREF
  unsigned __int16 *v11; // [esp+14h] [ebp-Ch]
  _DWORD *v12; // [esp+18h] [ebp-8h]
  void *v13; // [esp+1Ch] [ebp-4h]

  CIOCriticalSection::Enter(this);
  if ( v5->m_dwEIP[1] )
  {
    CIOCriticalSection::Leave(v5);
  }
  else
  {
    v13 = CIOBuffer::Alloc();
    v11 = (unsigned __int16 *)v13;
    *((_BYTE *)v13 + 2) = 83;
    v12 = v11 + 2;
    sub_430C20(&v5[1].m_critical_section.DebugInfo, (int)&v10);
    while ( 1 )
    {
      v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(
                                                                       &v5[1].m_critical_section.DebugInfo,
                                                                       (int)v7);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v10,
              v2) )
        break;
      v9 = *(_DWORD **)sub_420010(&v10);
      v3 = CBase::Id(v9);
      v12 = PutNumeric<int>(v12, v3);
      v12 = PutNumeric<int>(v12, v9[83]);
      v12 = PutNumeric<int>(v12, v9[84]);
      sub_420030((int *)&v10, &v8, 0);
    }
    v4 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)&v5[1]);
    WritePacket((char *)v11 + 3, "b", v4);
    *v11 = (_WORD)v12 - (_WORD)v11;
    *((_DWORD *)v13 + 2000) = *v11;
    CParty::_Broadcast(v5, v13, 0);
    CIOCriticalSection::Leave(v5);
    CIOObject::AddTimer(v6, 0x3E8u, 0);
  }
}
// 44D6B7: variable 'v5' is possibly undefined
// 44D7E3: variable 'v6' is possibly undefined

//----- (0044D7F0) --------------------------------------------------------
void __thiscall CParty::Add(volatile int *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  CIOCriticalSection *v3; // [esp+0h] [ebp-18h]
  char v4[8]; // [esp+4h] [ebp-14h] BYREF
  CIOCriticalSection *v5; // [esp+Ch] [ebp-Ch]
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  CIOObject::AddRef((int)this);
  CIOCriticalSection::Enter((CIOCriticalSection *)this);
  v5 = v3;
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v6);
  sub_445DF0(
    (int)dword_4E1FC4,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v4,
    v1);
  CIOCriticalSection::Leave(v3);
}
// 44D80E: variable 'v3' is possibly undefined
// 44D82E: variable 'v1' is possibly undefined

//----- (0044D850) --------------------------------------------------------
void __thiscall CParty::Remove(CIOCriticalSection *this)
{
  int *v1; // [esp+0h] [ebp-4h]
  int *v2; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  sub_44F600(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1FC4,
    (int)(v1 + 4));
  CIOCriticalSection::Leave((CIOCriticalSection *)v1);
  CIOObject::Release(v2);
}
// 44D867: variable 'v1' is possibly undefined
// 44D87F: variable 'v2' is possibly undefined

//----- (0044D890) --------------------------------------------------------
int __thiscall CParty::IsHead(CIOCriticalSection *this, int a2)
{
  CIOCriticalSection *v3; // [esp+0h] [ebp-8h]
  int v4; // [esp+4h] [ebp-4h]

  v4 = 1;
  CIOCriticalSection::Enter(this);
  if ( v3->m_dwEIP[1] || v3->m_critical_section.SpinCount != a2 )
    v4 = 0;
  CIOCriticalSection::Leave(v3);
  return v4;
}
// 44D8AE: variable 'v3' is possibly undefined

//----- (0044D8E0) --------------------------------------------------------
int __thiscall CParty::IsMember(_DWORD *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v5[4]; // [esp+4h] [ebp-Ch] BYREF
  int v6; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+Ch] [ebp-4h] BYREF

  sub_430C20(this + 8, (int)&v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v2) )
      break;
    if ( a2 == *(_DWORD *)sub_420010(&v7) )
      return 1;
    sub_420030((int *)&v7, &v6, 0);
  }
  return 0;
}

//----- (0044D950) --------------------------------------------------------
int __thiscall CParty::FindTopLevel(_DWORD *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+10h] [ebp-8h] BYREF
  int v8; // [esp+14h] [ebp-4h]

  v8 = 0;
  sub_430C20(this + 8, (int)&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v1) )
      break;
    v6 = *(_DWORD *)sub_420010(&v7);
    if ( *(_DWORD *)(v6 + 60) > v8 )
      v8 = *(_DWORD *)(v6 + 60);
    sub_420030((int *)&v7, &v5, 0);
  }
  return v8;
}

//----- (0044D9D0) --------------------------------------------------------
void __thiscall CParty::Join(CIOCriticalSection *this, int a2, int a3)
{
  int v3; // eax
  int v4; // [esp-14h] [ebp-20h]
  int v5; // [esp-10h] [ebp-1Ch]
  int v6; // [esp-Ch] [ebp-18h]
  int v7; // [esp-8h] [ebp-14h]
  int v8; // [esp-4h] [ebp-10h]
  _DWORD *v9; // [esp+0h] [ebp-Ch]
  CIOBuffer *a2a; // [esp+4h] [ebp-8h]
  int v11; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  if ( !v9[7] && a2 == v9[5] )
  {
    v11 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)(v9 + 8));
    if ( v11 >= 6 )
    {
      CPlayer::Write(a3, 67, "b", 30);
    }
    else
    {
      if ( v11 == 1 )
        CParty::SendPartyInfo(v9, v9[5]);
      CIOObject::AddRef((CIOObject *)a3, (volatile int *)(a3 + 444));
      *(_DWORD *)(a3 + 1016) = v9[4];
      CPlayer::Write(a3, 67, "b", 29);
      v8 = CChar::GetMaxHP((CPlayer *)a3);
      v7 = *(_DWORD *)(a3 + 272);
      v6 = *(_DWORD *)(a3 + 60);
      v5 = *(_DWORD *)(a3 + 460);
      v4 = a3 + 32;
      v3 = CBase::Id((_DWORD *)a3);
      a2a = MakePacket(68, "bdsbbww", 29, v3, v4, v5, v6, v7, v8);
      CParty::_Broadcast(v9, a2a, 0);
      std::vector<IPAddrMask>::push_back((std::vector<CIOSocket::CIOTimer> *)v9 + 2, (const CIOSocket::CIOTimer *)&a3);
      CParty::SendPartyInfo(v9, a3);
      if ( *(_DWORD *)(a3 + 60) > v9[6] )
        v9[6] = *(_DWORD *)(a3 + 60);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)v9);
}
// 44D9E7: variable 'v9' is possibly undefined

//----- (0044DB20) --------------------------------------------------------
void __thiscall CParty::Leave(void *this, int a2)
{
  int v2; // eax
  int v3; // eax
  void *v4; // eax
  CChar *v5; // eax
  int v6; // [esp-4h] [ebp-34h]
  CIOObject *v7; // [esp+0h] [ebp-30h]
  char v9[4]; // [esp+8h] [ebp-28h] BYREF
  int v10; // [esp+Ch] [ebp-24h] BYREF
  char v11[4]; // [esp+10h] [ebp-20h] BYREF
  int v12; // [esp+14h] [ebp-1Ch] BYREF
  enum S2C_PROTOCOL nType; // [esp+18h] [ebp-18h]
  void *v14; // [esp+1Ch] [ebp-14h] BYREF
  int v15; // [esp+20h] [ebp-10h]
  int nBuff; // [esp+24h] [ebp-Ch]
  CIOObject *v17; // [esp+28h] [ebp-8h]
  void *a2a; // [esp+2Ch] [ebp-4h]

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)this + 2);
  if ( *((_DWORD *)this + 7) )
  {
    CIOCriticalSection::Leave((int)this + 48);
  }
  else
  {
    sub_430C20((_DWORD *)this + 8, (int)&v14);
    while ( 1 )
    {
      v2 = sub_445B40((_DWORD *)this + 8, (int)v11);
      if ( (unsigned __int8)unknown_libname_8(v2) )
      {
        CIOCriticalSection::Leave((int)this + 48);
        LOG_ERR("CParty::Leave() Not this party member. (bit:%x)", *(_DWORD *)(a2 + 20));
        return;
      }
      if ( a2 == *(_DWORD *)sub_420010(&v14) )
        break;
      sub_420030((int *)&v14, &v12, 0);
    }
    std::vector<CControl *>::erase((char **)this + 8, (char **)&v10, (char *)v14);
    *(_DWORD *)(a2 + 1016) = 0;
    CPlayer::Write((CPlayer *)a2, S2C_MESSAGE, "b", 32);
    v3 = CBase::Id((CBase *)a2);
    a2a = MakePacket(S2C_MESSAGEV, "bd", 32, v3);
    CParty::_Broadcast(this, a2a, 0);
    if ( *(_DWORD *)(a2 + 60) >= *((_DWORD *)this + 6) )
      *((_DWORD *)this + 6) = CParty::FindTopLevel(this);
    nBuff = *(_DWORD *)(a2 + 584);
    if ( nBuff )
      v7 = (CIOObject *)CParty::_GetPlayerList(this);
    else
      v7 = 0;
    v17 = v7;
    v15 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)((char *)this + 32));
    if ( a2 == *((_DWORD *)this + 5) )
    {
      v4 = (void *)sub_430C20((_DWORD *)this + 8, (int)v9);
      *((_DWORD *)this + 5) = *(_DWORD *)sub_420010(v4);
      if ( v15 > 1 )
        CPlayer::Write(*((CPlayer **)this + 5), S2C_MESSAGE, "b", 35);
    }
    if ( v15 == 1 )
    {
      nType = *((_DWORD *)this + 5);
      *((_DWORD *)this + 5) = 0;
      CParty::Delete((int)this);
      CIOCriticalSection::Leave((int)this + 48);
      CParty::Remove((CIOCriticalSection *)this);
      *(_DWORD *)(nType + 1016) = 0;
      CPlayer::Write((CPlayer *)nType, S2C_MESSAGE, "b", 36);
      *(_DWORD *)(nType + 584) = 0;
      CChar::CancelBuffPrty((CChar *)nType, 24);
      CIOObject::Release((CIOObject *)nType, (volatile int *)(nType + 444));
    }
    else
    {
      CIOCriticalSection::Leave((int)this + 48);
    }
    while ( v17 )
    {
      v6 = nBuff;
      v5 = (CChar *)unknown_libname_7(v17);
      CChar::CancelBuff(v5, v6);
      v17 = (CIOObject *)CBaseList::Pop((CBaseList *)v17);
    }
    *(_DWORD *)(a2 + 584) = 0;
    CChar::CancelBuffPrty((CChar *)a2, 24);
    CIOObject::Release((CIOObject *)a2, (volatile int *)(a2 + 444));
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044DDA0) --------------------------------------------------------
void __thiscall CParty::Delete(int this)
{
  *(_DWORD *)(this + 28) = 1;
  CIOObject::Release((CIOObject *)this);
}

//----- (0044DDC0) --------------------------------------------------------
void __thiscall CParty::Exile(void *a1, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  int v6; // [esp-4h] [ebp-2Ch]
  CIOCriticalSection *v7; // [esp+0h] [ebp-28h]
  CIOCriticalSection *v8; // [esp+0h] [ebp-28h]
  CIOObject *v9; // [esp+0h] [ebp-28h]
  int v11; // [esp+8h] [ebp-20h] BYREF
  char v12[4]; // [esp+Ch] [ebp-1Ch] BYREF
  int v13; // [esp+10h] [ebp-18h] BYREF
  CIOObject *v14; // [esp+14h] [ebp-14h]
  void *v15; // [esp+18h] [ebp-10h] BYREF
  int v16; // [esp+1Ch] [ebp-Ch]
  CIOObject *v17; // [esp+20h] [ebp-8h]
  void *a2a; // [esp+24h] [ebp-4h]

  CIOCriticalSection::Enter(v7);
  if ( *((_DWORD *)a1 + 7) || a2 != *((_DWORD *)a1 + 5) )
  {
    CIOCriticalSection::Leave(v8);
  }
  else
  {
    sub_430C20((_DWORD *)a1 + 8, (int)&v15);
    while ( 1 )
    {
      v3 = sub_445B40((_DWORD *)a1 + 8, (int)v12);
      if ( (unsigned __int8)unknown_libname_8(v3) )
      {
        CIOCriticalSection::Leave(v8);
        LOG_ERR("CParty::Leave() Not this party member. (bit:%x)", *(_DWORD *)(a3 + 20));
        return;
      }
      if ( a3 == *(_DWORD *)sub_420010(&v15) )
        break;
      sub_420030((int *)&v15, &v13, 0);
    }
    std::vector<CControl *>::erase((char **)a1 + 8, (char **)&v11, (char *)v15);
    *(_DWORD *)(a3 + 1016) = 0;
    CPlayer::Write(a3, 67, "b", 33);
    v4 = CBase::Id((_DWORD *)a3);
    a2a = MakePacket(68, "bd", 33, v4);
    CParty::_Broadcast(a1, a2a, 0);
    if ( *(_DWORD *)(a3 + 60) >= *((_DWORD *)a1 + 6) )
      *((_DWORD *)a1 + 6) = CParty::FindTopLevel(a1);
    v16 = *(_DWORD *)(a3 + 584);
    if ( v16 )
      v9 = (CIOObject *)CParty::_GetPlayerList(a1);
    else
      v9 = 0;
    v17 = v9;
    if ( std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)((char *)a1 + 32)) == 1 )
    {
      v14 = (CIOObject *)*((_DWORD *)a1 + 5);
      *((_DWORD *)a1 + 5) = 0;
      CParty::Delete((int)a1);
      CIOCriticalSection::Leave((CIOCriticalSection *)v9);
      CParty::Remove((CIOCriticalSection *)a1);
      v14[63].m_nTimerRef = 0;
      CPlayer::Write((int)v14, 67, "b", 36);
      v14[36].m_nTimerRef = 0;
      CChar::CancelBuffPrty(v14, 24);
      CIOObject::Release(v14, &v14[27].m_nGeneralRef);
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)v9);
    }
    while ( v17 )
    {
      v6 = v16;
      v5 = (_DWORD *)unknown_libname_7(v17);
      CChar::CancelBuff(v5, v6);
      v17 = (CIOObject *)CBaseList::Pop(v17);
    }
    *(_DWORD *)(a3 + 584) = 0;
    CChar::CancelBuffPrty((_DWORD *)a3, 24);
    CIOObject::Release((CIOObject *)a3, (volatile int *)(a3 + 444));
  }
}
// 44DDCF: variable 'v7' is possibly undefined
// 44DDE3: variable 'v8' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044E020) --------------------------------------------------------
void __thiscall CParty::AllotExp(int a1, int *a2, int a3, _DWORD *a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v6; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  int v8; // [esp+2Ch] [ebp-78h]
  int v9; // [esp+30h] [ebp-74h]
  char v11[4]; // [esp+38h] [ebp-6Ch] BYREF
  int v12; // [esp+3Ch] [ebp-68h] BYREF
  char v13[8]; // [esp+40h] [ebp-64h] BYREF
  char v14[8]; // [esp+48h] [ebp-5Ch] BYREF
  char v15[4]; // [esp+50h] [ebp-54h] BYREF
  int v16; // [esp+54h] [ebp-50h] BYREF
  char v17[4]; // [esp+58h] [ebp-4Ch] BYREF
  int v18; // [esp+5Ch] [ebp-48h] BYREF
  int v19; // [esp+60h] [ebp-44h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v20; // [esp+64h] [ebp-40h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v21; // [esp+68h] [ebp-3Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v22; // [esp+6Ch] [ebp-38h] BYREF
  int v23; // [esp+70h] [ebp-34h]
  int v24; // [esp+74h] [ebp-30h]
  int v25; // [esp+78h] [ebp-2Ch]
  CIOSocket::CIOTimer _Val; // [esp+7Ch] [ebp-28h] BYREF
  int v27; // [esp+94h] [ebp-10h]
  _DWORD v28[3]; // [esp+98h] [ebp-Ch] BYREF

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48));
  v24 = a3 - *(_DWORD *)(a1 + 24);
  if ( v24 < 0 )
  {
    if ( abs(v24) >= 20 )
      v8 = 20;
    else
      v8 = abs(v24);
    *a2 = (unsigned __int64)((double)*a2
                           - (double)*a2 * ((double)dword_4D8870[21 * ((*(_DWORD *)(a1 + 24) - 1) / 10) + v8] / 100.0));
  }
  else
  {
    if ( v24 >= 20 )
      v9 = 20;
    else
      v9 = v24;
    *a2 = (unsigned __int64)((double)*a2 * ((double)dword_4D8528[21 * ((*(_DWORD *)(a1 + 24) - 1) / 10) + v9] / 100.0)
                           + (double)*a2);
  }
  if ( *a2 > 0 )
  {
    std::vector<IPAddrMask>::vector<IPAddrMask>((std::vector<CIOSocket::CIOTimer> *)&_Val.m_nId);
    _Val.m_pObject = 0;
    v23 = 0;
    sub_430C20((_DWORD *)(a1 + 32), (int)&v22);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(a1 + 32), (int)v17);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v22,
              v4) )
        break;
      _Val.m_dwTime = *(_DWORD *)sub_420010(&v22);
      if ( CChar::IsNormal((CChar *)_Val.m_dwTime)
        && Distance((const tagPOINT *)(_Val.m_dwTime + 332), (const tagPOINT *)a4) <= 640 )
      {
        if ( *(_DWORD *)(a1 + 24) - *(_DWORD *)(_Val.m_dwTime + 60) <= 20 )
          ++v23;
        _Val.m_pObject = (CIOObject *)((char *)_Val.m_pObject + *(_DWORD *)(_Val.m_dwTime + 60));
        std::vector<IPAddrMask>::push_back((std::vector<CIOSocket::CIOTimer> *)&_Val.m_nId, &_Val);
      }
      sub_420030((int *)&v22, &v18, 0);
    }
    if ( v23 > 1 )
      *a2 = (unsigned __int64)((double)*a2 * ((double)(v23 - 1) / 10.0) + (double)*a2);
    sub_445C80(v28);
    v25 = *(_DWORD *)(a1 + 24);
    sub_430C20(&_Val.m_nId, (int)&v21);
    while ( 1 )
    {
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&_Val.m_nId, (int)v15);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v21,
              v5) )
        break;
      _Val.m_dwTime = *(_DWORD *)sub_420010(&v21);
      v27 = (unsigned __int64)((double)*a2 * ((double)*(int *)(_Val.m_dwTime + 60) / (double)(int)_Val.m_pObject));
      v24 = v25 - *(_DWORD *)(_Val.m_dwTime + 60);
      if ( v24 <= 28 )
      {
        if ( v24 > 0 )
          v27 = (unsigned __int64)((double)v27 - (double)v27 * ((double)dword_4D8BB8[v24] / 100.0));
      }
      else
      {
        v27 = 0;
      }
      if ( v27 )
      {
        CIOObject::AddRef((CIOObject *)_Val.m_dwTime, (volatile int *)(_Val.m_dwTime + 352));
        std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v14);
        sub_48D6D0(
          v28,
          (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v13,
          v6);
      }
      sub_420030((int *)&v21, &v16, 0);
    }
    CIOCriticalSection::Leave(a1 + 48);
    *a2 = 0;
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)v28,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20);
    while ( 1 )
    {
      v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v28, (int)v11);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v20,
              v7) )
        break;
      _Val.m_dwTime = *(_DWORD *)sub_420250(&v20);
      v27 = *(_DWORD *)(sub_420250(&v20) + 4);
      *a2 += v27;
      v19 = (dword_4E1178 & 1) != 0 ? 0x64 : 0;
      if ( CChar::IsBState((CChar *)_Val.m_dwTime, 0x8000000000i64)
        || CChar::IsBState((CChar *)_Val.m_dwTime, 0x10000000000i64)
        || CChar::IsBState((CChar *)_Val.m_dwTime, 0x20000000000i64) )
      {
        v19 += 10;
      }
      if ( CChar::IsBState((CChar *)_Val.m_dwTime, 2i64) )
      {
        v19 += 30;
      }
      else if ( CChar::IsBState((CChar *)_Val.m_dwTime, 1i64) )
      {
        v19 += 30;
      }
      (*(void (__cdecl **)(unsigned int, int, int, int, int))(*(_DWORD *)_Val.m_dwTime + 88))(
        _Val.m_dwTime,
        25,
        1,
        v27 + v19 * v27 / 100,
        (v27 + v19 * v27 / 100) >> 31);
      CIOObject::Release((CIOObject *)_Val.m_dwTime, (volatile int *)(_Val.m_dwTime + 352));
      sub_446090((int *)&v20, &v12, 0);
    }
    sub_4398F0(v28);
    sub_44F580((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)&_Val.m_nId);
  }
  else
  {
    CIOCriticalSection::Leave(a1 + 48);
  }
}
// 44E2E1: variable 'v6' is possibly undefined
// 4B9304: using guessed type float flt_4B9304;
// 4BA658: using guessed type float flt_4BA658;
// 4E1178: using guessed type int dword_4E1178;

//----- (0044E4B0) --------------------------------------------------------
void __thiscall CParty::SendPartyInfo(_DWORD *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  __int16 v4; // ax
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-1Ch] BYREF
  int v8; // [esp+8h] [ebp-18h] BYREF
  CPlayer *v9; // [esp+Ch] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v10; // [esp+10h] [ebp-10h] BYREF
  char *v11; // [esp+14h] [ebp-Ch]
  char *v12; // [esp+18h] [ebp-8h]
  void *Src; // [esp+1Ch] [ebp-4h]

  Src = CIOBuffer::Alloc();
  v11 = (char *)Src;
  *((_BYTE *)Src + 2) = 84;
  v12 = v11 + 4;
  sub_430C20(this + 8, (int)&v10);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v7);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v10,
            v2) )
      break;
    v9 = *(CPlayer **)sub_420010(&v10);
    v3 = CBase::Id(v9);
    v12 = (char *)PutNumeric<int>(v12, v3);
    v12 = PutString(v12, v9->m_szName);
    v12 = PutNumeric<unsigned char>(v12, v9->m_nClass);
    v12 = PutNumeric<unsigned char>(v12, v9->m_nLevel);
    v12 = (char *)PutNumeric<short>(v12, v9->m_nCurHP);
    v4 = CChar::GetMaxHP(v9);
    v12 = (char *)PutNumeric<short>(v12, v4);
    sub_420030((int *)&v10, &v8, 0);
  }
  v5 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)(this + 8));
  WritePacket(v11 + 3, "b", v5);
  *(_WORD *)v11 = (_WORD)v12 - (_WORD)v11;
  *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v11;
  CPlayer::Send(Src);
  CIOBuffer::Release((CIOBuffer *)Src);
}

//----- (0044E610) --------------------------------------------------------
void __thiscall CParty::UpdateMemberHP(CIOCriticalSection *this, CPlayer *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  CIOCriticalSection *v5; // [esp+0h] [ebp-8h]
  CIOBuffer *v6; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  v4 = CChar::GetMaxHP(a2);
  v3 = a2->m_nCurHP;
  v2 = CBase::Id(a2);
  v6 = MakePacket(85, "dbdd", v2, 7, v3, v4);
  CParty::_Broadcast(v5, v6, 0);
  CIOCriticalSection::Leave(v5);
}
// 44E65D: variable 'v5' is possibly undefined

//----- (0044E680) --------------------------------------------------------
void __thiscall CParty::UpdateMemberLevel(CIOCriticalSection *this, int a2)
{
  int v2; // eax
  int v3; // [esp-4h] [ebp-Ch]
  CIOCriticalSection *v4; // [esp+0h] [ebp-8h]
  CIOBuffer *v5; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  if ( CParty::IsMember(v4, a2) )
  {
    v4->m_dwEIP[0] = CParty::FindTopLevel(v4);
    v3 = *(_DWORD *)(a2 + 60);
    v2 = CBase::Id((_DWORD *)a2);
    v5 = MakePacket(85, "dbd", v2, 26, v3);
    CParty::_Broadcast(v4, v5, 0);
  }
  CIOCriticalSection::Leave(v4);
}
// 44E69B: variable 'v4' is possibly undefined

//----- (0044E700) --------------------------------------------------------
void __thiscall CParty::Broadcast(CIOCriticalSection *this, void *a2, int a3)
{
  CIOCriticalSection *v3; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  CParty::_Broadcast(v3, a2, a3);
  CIOCriticalSection::Leave(v3);
}
// 44E71D: variable 'v3' is possibly undefined

//----- (0044E740) --------------------------------------------------------
void __thiscall CParty::_Broadcast(_DWORD *this, void *a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+10h] [ebp-4h] BYREF

  sub_430C20(this + 8, (int)&v8);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v3) )
      break;
    v7 = *(_DWORD *)sub_420010(&v8);
    if ( v7 != a3 )
      CPlayer::Send(a2);
    sub_420030((int *)&v8, &v6, 0);
  }
  CIOBuffer::Release((CIOBuffer *)a2);
}

//----- (0044E7C0) --------------------------------------------------------
volatile int *__thiscall CParty::GetRandomPlayer(CIOCriticalSection *a1)
{
  int v1; // eax
  int v3; // [esp+0h] [ebp-Ch]
  CIOObject *v4; // [esp+4h] [ebp-8h]
  int _Pos; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter(a1);
  v1 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)(v3 + 32));
  _Pos = Random(0, v1 - 1);
  v4 = *(CIOObject **)std::vector<Event::Section>::operator[]((std::vector<CItemInfo> *)(v3 + 32), _Pos);
  CIOObject::AddRef(v4, (volatile int *)&v4[22]);
  CIOCriticalSection::Leave((CIOCriticalSection *)v3);
  return (volatile int *)v4;
}
// 44E7D7: variable 'v3' is possibly undefined

//----- (0044E830) --------------------------------------------------------
int __thiscall CParty::Teleport(CIOCriticalSection *this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+4h] [ebp-20h] BYREF
  int v7; // [esp+8h] [ebp-1Ch] BYREF
  tagPOINT a3a; // [esp+Ch] [ebp-18h] BYREF
  CChar *v9; // [esp+14h] [ebp-10h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v10; // [esp+18h] [ebp-Ch] BYREF
  char *v11; // [esp+1Ch] [ebp-8h]
  int a2a; // [esp+20h] [ebp-4h]

  if ( !CParty::IsHead(this, a2) )
    return 0;
  a2a = dword_4D7900[4 * a3];
  v11 = &byte_4D7904[16 * a3];
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&this[1].m_critical_section.LockSemaphore);
  sub_430C20(&this[1].m_critical_section.DebugInfo, (int)&v10);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(
                                                                     &this[1].m_critical_section.DebugInfo,
                                                                     (int)v6);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v10,
            v4) )
      break;
    v9 = *(CChar **)sub_420010(&v10);
    if ( CChar::IsNormal(v9) )
    {
      a3a.x = Random(*(_DWORD *)v11 - 64, *(_DWORD *)v11 + 64);
      a3a.y = Random(*((_DWORD *)v11 + 1) - 64, *((_DWORD *)v11 + 1) + 64);
      CPlayer::Teleport((CPlayer *)v9, a2a, &a3a, 0, 0);
    }
    sub_420030((int *)&v10, &v7, 0);
  }
  CIOCriticalSection::Leave((int)&this[1].m_critical_section.LockSemaphore);
  return 1;
}
// 4D7900: using guessed type int dword_4D7900[];

//----- (0044E940) --------------------------------------------------------
CMemory *__thiscall CParty::StoreItem(CIOCriticalSection *this, CMemory *a2)
{
  CMemory *result; // eax
  int v3; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  *(_DWORD *)(v3 + 80) = CBaseList::Push(*(CMemory **)(v3 + 80), a2);
  CIOCriticalSection::Leave((CIOCriticalSection *)v3);
  a2[1].__sbh_sizeHeaderList = 0;
  a2[1].__sbh_cntHeaderList = 0;
  a2[1].__sbh_pHeaderScan = 0;
  result = a2;
  a2[1]._crtheap = 0;
  return result;
}
// 44E959: variable 'v3' is possibly undefined

//----- (0044E9A0) --------------------------------------------------------
void __thiscall CParty::DistributeItem(CIOCriticalSection *a1, _DWORD *a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  CBase *v7; // eax
  char v9[4]; // [esp+4h] [ebp-8Ch] BYREF
  int v10; // [esp+8h] [ebp-88h] BYREF
  char v11[4]; // [esp+Ch] [ebp-84h] BYREF
  int v12; // [esp+10h] [ebp-80h] BYREF
  char v13[4]; // [esp+14h] [ebp-7Ch] BYREF
  int v14; // [esp+18h] [ebp-78h] BYREF
  char v15[4]; // [esp+1Ch] [ebp-74h] BYREF
  int v16; // [esp+20h] [ebp-70h] BYREF
  char v17[4]; // [esp+24h] [ebp-6Ch] BYREF
  int v18; // [esp+28h] [ebp-68h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v19; // [esp+2Ch] [ebp-64h] BYREF
  char *v20; // [esp+30h] [ebp-60h]
  CPlayer *v21; // [esp+34h] [ebp-5Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v22; // [esp+38h] [ebp-58h] BYREF
  tagPOINT v23; // [esp+3Ch] [ebp-54h] BYREF
  CIOBuffer *v24; // [esp+44h] [ebp-4Ch]
  CPlayer *v25; // [esp+48h] [ebp-48h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v26; // [esp+4Ch] [ebp-44h] BYREF
  tagPOINT a2a; // [esp+50h] [ebp-40h] BYREF
  void *Src; // [esp+58h] [ebp-38h]
  unsigned int _Pos; // [esp+5Ch] [ebp-34h]
  CItem *item; // [esp+60h] [ebp-30h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v31; // [esp+64h] [ebp-2Ch] BYREF
  int a3; // [esp+68h] [ebp-28h]
  CItem *v33; // [esp+6Ch] [ebp-24h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v34; // [esp+70h] [ebp-20h] BYREF
  CIOObject *v35; // [esp+74h] [ebp-1Ch]
  CIOSocket::CIOTimer _Val; // [esp+78h] [ebp-18h] BYREF
  int v37; // [esp+8Ch] [ebp-4h]

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&a1[1].m_critical_section.LockSemaphore);
  std::vector<IPAddrMask>::vector<IPAddrMask>((std::vector<CIOSocket::CIOTimer> *)&_Val.m_pObject);
  sub_430C20(&a1[1].m_critical_section.DebugInfo, (int)&v34);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(
                                                                     &a1[1].m_critical_section.DebugInfo,
                                                                     (int)v17);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v34,
            v2) )
      break;
    _Val.m_dwTime = *(_DWORD *)sub_420010(&v34);
    if ( CChar::IsNormal((CChar *)_Val.m_dwTime) )
    {
      if ( Distance((const tagPOINT *)(_Val.m_dwTime + 332), (const tagPOINT *)a2) <= 640 )
      {
        CIOObject::AddRef((CIOObject *)_Val.m_dwTime, (volatile int *)(_Val.m_dwTime + 352));
        std::vector<IPAddrMask>::push_back((std::vector<CIOSocket::CIOTimer> *)&_Val.m_pObject, &_Val);
      }
    }
    sub_420030((int *)&v34, &v18, 0);
  }
  v35 = (CIOObject *)a1[2].m_critical_section.LockSemaphore;
  a1[2].m_critical_section.LockSemaphore = 0;
  CIOCriticalSection::Leave((int)&a1[1].m_critical_section.LockSemaphore);
  v37 = std::vector<CControl *>::size((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)&_Val.m_pObject);
  if ( v37 > 0 )
  {
    while ( 1 )
    {
      if ( !v35 )
      {
        sub_430C20(&_Val.m_pObject, (int)&v19);
        while ( 1 )
        {
          v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&_Val.m_pObject, (int)v9);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v19,
                  v6) )
            break;
          _Val.m_dwTime = *(_DWORD *)sub_420010(&v19);
          CIOObject::Release((CIOObject *)_Val.m_dwTime, (volatile int *)(_Val.m_dwTime + 352));
          sub_420030((int *)&v19, &v10, 0);
        }
        goto LABEL_58;
      }
      v33 = (CItem *)unknown_libname_7(v35);
      if ( v33->IsMoney(v33) )
        break;
      _Pos = Random(0, v37 - 1);
      _Val.m_dwTime = *(_DWORD *)std::vector<Event::Section>::operator[](
                                   (std::vector<CItemInfo> *)&_Val.m_pObject,
                                   _Pos);
      if ( CPlayer::InsertItem((CPlayer *)_Val.m_dwTime, 25, v33) != 1 )
        goto LABEL_51;
      if ( (v33->m_pInit->m_nIndex >= 665 && v33->m_pInit->m_nIndex <= 668
         || v33->m_pInit->m_nIndex >= 802 && v33->m_pInit->m_nIndex <= 825
         || v33->m_pInit->m_nIndex >= 856 && v33->m_pInit->m_nIndex <= 867
         || v33->m_pInit->m_nIndex == 688)
        && abs(*(_DWORD *)(_Val.m_dwTime + 332) - 57367) < 1000
        && abs(*(_DWORD *)(_Val.m_dwTime + 336) - 9077) < 1001 )
      {
        a2a.x = 1793;
        a2a.y = 284;
        Src = MakePacket(S2C_MESSAGEV, "bsw", 42, _Val.m_dwTime + 32, v33->m_pInit->m_nIndex);
        CSMap::SendPacketInRect(*(CSMap **)(_Val.m_dwTime + 320), &a2a, (CIOBuffer *)Src, 32);
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&a1[1].m_critical_section.LockSemaphore);
        sub_430C20(&a1[1].m_critical_section.DebugInfo, (int)&v26);
        while ( 1 )
        {
          v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(
                                                                           &a1[1].m_critical_section.DebugInfo,
                                                                           (int)v13);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v26,
                  v4) )
            break;
          v25 = *(CPlayer **)sub_420010(&v26);
          if ( v25 != (CPlayer *)_Val.m_dwTime
            && (abs(v25->m_ptPixel.x - 57376) > 1024 || abs(v25->m_ptPixel.y - 9088) > 1024) )
          {
            CPlayer::Send(v25, (CIOBuffer *)Src);
          }
          sub_420030((int *)&v26, &v14, 0);
        }
        CIOCriticalSection::Leave((int)&a1[1].m_critical_section.LockSemaphore);
        CIOBuffer::Release((CIOBuffer *)Src);
      }
      else if ( (v33->m_pInit->m_nIndex < 673 || v33->m_pInit->m_nIndex > 687)
             && (v33->m_pInit->m_nIndex < 826 || v33->m_pInit->m_nIndex > 855)
             || abs(*(_DWORD *)(_Val.m_dwTime + 332) - 20284) >= 1160
             || abs(*(_DWORD *)(_Val.m_dwTime + 336) - 67480) >= 1212 )
      {
        v20 = MakePacket(S2C_MESSAGEV, "bsw", 42, _Val.m_dwTime + 32, v33->m_pInit->m_nIndex);
        CParty::Broadcast(a1, v20, _Val.m_dwTime);
      }
      else
      {
        v23.x = 634;
        v23.y = 2109;
        v24 = (CIOBuffer *)MakePacket(S2C_MESSAGEV, "bsw", 42, _Val.m_dwTime + 32, v33->m_pInit->m_nIndex);
        CSMap::SendPacketInRect(*(CSMap **)(_Val.m_dwTime + 320), &v23, v24, 38);
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&a1[1].m_critical_section.LockSemaphore);
        sub_430C20(&a1[1].m_critical_section.DebugInfo, (int)&v22);
        while ( 1 )
        {
          v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(
                                                                           &a1[1].m_critical_section.DebugInfo,
                                                                           (int)v11);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v22,
                  v5) )
            break;
          v21 = *(CPlayer **)sub_420010(&v22);
          if ( v21 != (CPlayer *)_Val.m_dwTime
            && (abs(v21->m_ptPixel.x - 20284) < 1160 || abs(v21->m_ptPixel.y - 67480) < 1212) )
          {
            CPlayer::Send(v21, v24);
          }
          sub_420030((int *)&v22, &v12, 0);
        }
        CIOCriticalSection::Leave((int)&a1[1].m_critical_section.LockSemaphore);
        CIOBuffer::Release(v24);
      }
LABEL_9:
      v35 = (CIOObject *)CBaseList::Pop((CBaseList *)v35);
    }
    a3 = (v33->m_nNum + v37 - 1) / v37;
    sub_430C20(&_Val.m_pObject, (int)&v31);
    while ( 1 )
    {
      v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&_Val.m_pObject, (int)v15);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v31,
              v3) )
        break;
      _Val.m_dwTime = *(_DWORD *)sub_420010(&v31);
      item = CItem::CreateItem(31, 0, a3, -1);
      item->m_nFrom = 1;
      if ( CPlayer::InsertItem((CPlayer *)_Val.m_dwTime, 25, item) != 1 )
        CBase::Delete(item);
      sub_420030((int *)&v31, &v16, 0);
    }
LABEL_51:
    CBase::Delete(v33);
    goto LABEL_9;
  }
  while ( v35 )
  {
    v7 = (CBase *)unknown_libname_7(v35);
    CBase::Delete(v7);
    v35 = (CIOObject *)CBaseList::Pop((CBaseList *)v35);
  }
LABEL_58:
  sub_44F580((std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *)&_Val.m_pObject);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0044F000) --------------------------------------------------------
void __thiscall CParty::AllotTransformExp(_DWORD *this, int a2, _DWORD *a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  CIOCriticalSection *v5; // [esp+0h] [ebp-1Ch]
  CIOCriticalSection *v6; // [esp+0h] [ebp-1Ch]
  char v8[4]; // [esp+8h] [ebp-14h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v10; // [esp+10h] [ebp-Ch] BYREF
  CMemory *a2a; // [esp+14h] [ebp-8h]
  CMemory *v12; // [esp+18h] [ebp-4h]

  CIOCriticalSection::Enter(v5);
  if ( GetColorLevel(a2, this[6]) >= 3 )
  {
    v12 = 0;
    sub_430C20(this + 8, (int)&v10);
    while ( 1 )
    {
      v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v8);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v10,
              v3) )
        break;
      a2a = *(CMemory **)sub_420010(&v10);
      if ( CChar::IsNormal((int)a2a) )
      {
        if ( Distance(&a2a[5]._lock.SpinCount, a3) <= 640 )
          v12 = (CMemory *)CBaseList::Push(v12, a2a);
      }
      sub_420030((int *)&v10, &v9, 0);
    }
    CIOCriticalSection::Leave(v6);
    while ( v12 )
    {
      v4 = unknown_libname_7(v12);
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 188))(v4, 0);
      v12 = (CMemory *)CBaseList::Pop((CIOObject *)v12);
    }
  }
  else
  {
    CIOCriticalSection::Leave(v6);
  }
}
// 44F00F: variable 'v5' is possibly undefined
// 44F032: variable 'v6' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0044F110) --------------------------------------------------------
void __thiscall CParty::Healing(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  int v7; // [esp-10h] [ebp-30h]
  int v8; // [esp-Ch] [ebp-2Ch]
  CIOCriticalSection *v9; // [esp+0h] [ebp-20h]
  CIOCriticalSection *v10; // [esp+0h] [ebp-20h]
  int v11; // [esp+0h] [ebp-20h]
  int v12; // [esp+4h] [ebp-1Ch]
  char v14[4]; // [esp+Ch] [ebp-14h] BYREF
  int v15; // [esp+10h] [ebp-10h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v16; // [esp+14h] [ebp-Ch] BYREF
  CMemory *a2a; // [esp+18h] [ebp-8h]
  CMemory *v18; // [esp+1Ch] [ebp-4h]

  v18 = 0;
  a2a = 0;
  CIOCriticalSection::Enter(v9);
  sub_430C20(this + 8, (int)&v16);
  while ( 1 )
  {
    v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v14);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v16,
            v6) )
      break;
    a2a = *(CMemory **)sub_420010(&v16);
    if ( CChar::IsNormal((int)a2a) )
    {
      if ( Distance((_DWORD *)(a2 + 332), &a2a[5]._lock.SpinCount) <= 128 )
        v18 = (CMemory *)CBaseList::Push(v18, a2a);
    }
    sub_420030((int *)&v16, &v15, 0);
  }
  CIOCriticalSection::Leave(v10);
  while ( v18 )
  {
    a2a = (CMemory *)unknown_libname_7(v18);
    if ( a3 )
      v12 = a4 * CChar::GetMaxHP((CPlayer *)a2a) / 100;
    else
      v12 = a4;
    (*((void (__cdecl **)(CMemory *, int, int, int))a2a->_crtheap + 22))(a2a, 7, 1, v12);
    if ( a3 )
      v11 = a4 * CChar::GetMaxHP((CPlayer *)a2a) / 100;
    else
      v11 = a4;
    v8 = CBase::Id(a2a);
    v7 = CBase::Id((_DWORD *)a2);
    CChar::WriteInSight(a2, 10, "bbddww", a6, a5, v7, v8, v11, 0);
    v18 = (CMemory *)CBaseList::Pop((CIOObject *)v18);
  }
}
// 44F12D: variable 'v9' is possibly undefined
// 44F1C6: variable 'v10' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0044F290) --------------------------------------------------------
_DWORD *__thiscall CParty::Chant(void *this, _DWORD *a2, int *a3)
{
  int v3; // eax
  _DWORD *result; // eax
  _DWORD *v6; // [esp+4h] [ebp-8h]
  CMemory *i; // [esp+8h] [ebp-4h]

  for ( i = CParty::GetPlayerList((CIOCriticalSection *)this); i; i = (CMemory *)CBaseList::Pop((CIOObject *)i) )
  {
    v6 = (_DWORD *)unknown_libname_7(i);
    CChar::CancelBuff(v6, a3[1]);
    if ( v6 != a2 && v6[146] == a3[1] )
      v6[146] = 0;
    if ( a2[146] )
      CChar::CancelBuff(v6, a2[146]);
    if ( CChar::IsNormal((int)v6) )
    {
      if ( Distance(a2 + 83, v6 + 83) <= 64 )
      {
        v3 = (*(int (__thiscall **)(int *, void *))(*a3 + 20))(a3, this);
        (*(void (__thiscall **)(_DWORD *, int))(*v6 + 180))(v6, v3);
      }
    }
  }
  result = a2;
  a2[146] = a3[1];
  return result;
}
// 44F35A: variable 'this' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0044F390) --------------------------------------------------------
CMemory *__thiscall CParty::GetPlayerList(CIOCriticalSection *this)
{
  CIOCriticalSection *v2; // [esp+0h] [ebp-8h]
  CMemory *v3; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  v3 = CParty::_GetPlayerList(v2);
  CIOCriticalSection::Leave(v2);
  return v3;
}
// 44F3A7: variable 'v2' is possibly undefined

//----- (0044F3D0) --------------------------------------------------------
CMemory *__thiscall CParty::_GetPlayerList(_DWORD *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  CMemory **v2; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+Ch] [ebp-8h] BYREF
  CMemory *v8; // [esp+10h] [ebp-4h]

  v8 = 0;
  sub_430C20(this + 8, (int)&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v1) )
      break;
    v2 = (CMemory **)sub_420010(&v7);
    v8 = (CMemory *)CBaseList::Push(v8, *v2);
    sub_420030((int *)&v7, &v6, 0);
  }
  return v8;
}

//----- (0044F440) --------------------------------------------------------
int __thiscall CParty::GetLuckySize(_DWORD *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  _QWORD **v5; // eax
  CIOCriticalSection *v7; // [esp+0h] [ebp-34h]
  __int64 v8; // [esp+0h] [ebp-34h]
  char v10[4]; // [esp+14h] [ebp-20h] BYREF
  int v11; // [esp+18h] [ebp-1Ch] BYREF
  char v12[4]; // [esp+1Ch] [ebp-18h] BYREF
  int v13; // [esp+20h] [ebp-14h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v14; // [esp+24h] [ebp-10h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v15; // [esp+28h] [ebp-Ch] BYREF
  int a1; // [esp+2Ch] [ebp-8h]
  int v17; // [esp+30h] [ebp-4h]

  v17 = 0;
  CIOCriticalSection::Enter(v7);
  if ( a2 )
  {
    sub_430C20(this + 8, (int)&v15);
    while ( 1 )
    {
      v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v12);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v15,
              v2) )
        break;
      a1 = *(_DWORD *)sub_420010(&v15);
      if ( CChar::IsBState((_QWORD *)a1, 0x2000000i64) )
      {
        v3 = CBase::Id((_DWORD *)a1);
        CChar::WriteInRect(a1, 73, 15, "db", v3, 21);
        ++v17;
      }
      sub_420030((int *)&v15, &v13, 0);
    }
  }
  else
  {
    sub_430C20(this + 8, (int)&v14);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v10);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v14,
              v4) )
        break;
      v5 = (_QWORD **)sub_420010(&v14);
      v8 = CChar::IsBState(*v5, 0x2000000i64);
      if ( v8 )
        ++v17;
      sub_420030((int *)&v14, &v11, 0);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)v8);
  return v17;
}
// 44F456: variable 'v7' is possibly undefined
// 44F570: variable 'v8' is possibly undefined

//----- (0044F580) --------------------------------------------------------
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *__thiscall sub_44F580(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this)
{
  return std::vector<std::list<std::pair<int const,CSocketMsg *>>::iterator,std::allocator<std::list<std::pair<int const,CSocketMsg *>>::iterator>>::_Tidy(this);
}

//----- (0044F5A0) --------------------------------------------------------
char **__thiscall std::vector<CControl *>::erase(char **this, char **a2, char *a3)
{
  std::copy<char *,char *>(a3 + 4, this[2], a3);
  sub_44F720((std::allocator<int> *)this, (int *)this[2] - 1, (int *)this[2]);
  this[2] -= 4;
  *a2 = a3;
  return a2;
}

//----- (0044F600) --------------------------------------------------------
int __thiscall sub_44F600(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    (const int *)a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_44F810(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (0044F660) --------------------------------------------------------
int __thiscall std::vector<TSmartPointer<TriggerSystem::CEvent>>::capacity(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (0044F6A0) --------------------------------------------------------
char __thiscall std::vector<TSmartPointer<TriggerSystem::CEvent>>::_Buy(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_41CB60(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_41CE40(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 4 * _Capacity;
  }
  else
  {
    std::vector<tagShowdownPaticipateInfo>::_Xran(this);
  }
  return 1;
}

//----- (0044F720) --------------------------------------------------------
int __thiscall sub_44F720(std::allocator<int> *this, int *a2, int *a3)
{
  return std::_Destroy_range<int>(a2, a3);
}

//----- (0044F750) --------------------------------------------------------
std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *__thiscall std::vector<std::list<std::pair<int const,CSocketMsg *>>::iterator,std::allocator<std::list<std::pair<int const,CSocketMsg *>>::iterator>>::_Tidy(std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *this)
{
  std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> > *result; // eax

  if ( *((_DWORD *)this + 1) )
  {
    sub_44F720(this, *((int **)this + 1), *((int **)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 2);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  result = this;
  *((_DWORD *)this + 3) = 0;
  return result;
}

//----- (0044F7C0) --------------------------------------------------------
void *__thiscall sub_44F7C0(void *this, char a2)
{
  std::_Init_locks::operator=(&a2);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (0044F7E0) --------------------------------------------------------
_DWORD *__thiscall sub_44F7E0(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a2 = *(_DWORD *)std::vector<TriggerSystem::CTrigger *>::iterator::operator+=(
                     (std::vector<std::list<std::pair<std::string const ,int>>::iterator,std::allocator<std::list<std::pair<std::string const ,int>>::iterator> >::iterator *)&v4,
                     a3);
  return a2;
}

//----- (0044F810) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44F810(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44F8D0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044F8B0) --------------------------------------------------------
int __thiscall sub_44F8B0(_DWORD *this)
{
  return sub_433930(this);
}

//----- (0044F8D0) --------------------------------------------------------
_DWORD *__thiscall sub_44F8D0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44F930(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0044F930) --------------------------------------------------------
int __stdcall sub_44F930(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_44F930(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0044F9B0) --------------------------------------------------------
char *__cdecl PutNumeric<int>(char *a1, int Num)
{
  *(_DWORD *)a1 = Num;
  return a1 + 4;
}

//----- (0044F9D0) --------------------------------------------------------
char *__cdecl std::copy<char *,char *>(char *_First, char *_Last, char *_Dest)
{
  unknown_libname_6(_First, _Dest);
  return std::_Uninit_copy<Patch *,Patch *>(_First, (int)_Last, _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FA10) --------------------------------------------------------
int __cdecl std::_Destroy_range<int>(int *_First, int *_Last)
{
  unknown_libname_6(_First, _Last);
  return _initp_misc_winxfltr();
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FA50) --------------------------------------------------------
unsigned int __cdecl std::_Uninitialized_fill_n<char *,unsigned int,char,std::allocator<char>>(char *_First, unsigned int _Count, const char *_Val)
{
  unknown_libname_6(_First, _First);
  return sub_41CF60((unsigned int *)_First, _Count, (const unsigned int *)_Val);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FA90) --------------------------------------------------------
unsigned int *__cdecl std::fill<HyperElement::CElement * *,HyperElement::CElement *>(unsigned int *_First, unsigned int *_Last, const unsigned int *_Val)
{
  unsigned int *result; // eax

  while ( _First != _Last )
  {
    *_First = *_Val;
    result = ++_First;
  }
  return result;
}

//----- (0044FAC0) --------------------------------------------------------
void *__cdecl sub_44FAC0(void *a1, int a2, int a3)
{
  unknown_libname_6(a1, a3);
  return std::_Copy_backward_opt<CControl * *,CControl * *>(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FB00) --------------------------------------------------------
CMemory **__cdecl sub_44FB00(int a1)
{
  return operator new(4 * a1);
}

//----- (0044FB20) --------------------------------------------------------
char *__cdecl std::_Uninitialized_copy<Patch * *,Patch * *,std::allocator<Patch *>>(unsigned int *_First, unsigned int *_Last, unsigned int *_Dest)
{
  unknown_libname_6(_First, _Dest);
  return std::_Uninit_copy<Patch *,Patch *>(_First, (int)_Last, _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FB60) --------------------------------------------------------
unsigned int __cdecl std::fill_n<TriggerSystem::CTrigger * *,unsigned int,TriggerSystem::CTrigger *>(unsigned int *_First, unsigned int _Count, const unsigned int *_Val)
{
  unsigned int result; // eax

  while ( _Count )
  {
    *_First = *_Val;
    result = --_Count;
    ++_First;
  }
  return result;
}

//----- (0044FB90) --------------------------------------------------------
void *__thiscall sub_44FB90(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0044FBC0) --------------------------------------------------------
void *__thiscall std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const,std::string>>,0>>::_Tidy(void *this, int a2, char a3)
{
  void *v4; // [esp+0h] [ebp-4h]

  v4 = this;
  LOBYTE(this) = *(_BYTE *)a2;
  std::_Init_locks::operator=(this);
  std::_Init_locks::operator=(&a3);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (0044FBF0) --------------------------------------------------------
int __thiscall sub_44FBF0(void *this)
{
  return sub_44FC10(this);
}

//----- (0044FC10) --------------------------------------------------------
int __thiscall sub_44FC10(void *this)
{
  return sub_44FC30((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0044FC30) --------------------------------------------------------
int __thiscall sub_44FC30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44F810(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0044FCE0) --------------------------------------------------------
char *MakePacket(enum S2C_PROTOCOL nType, const char *format, ...)
{
  CIOBuffer *pBuffer; // [esp+0h] [ebp-10h]

  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&format) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  return pBuffer->m_buffer;
}

//----- (0044FD40) --------------------------------------------------------
int __cdecl GetColorLevel(int nMonsterLevel, int nPlayerLevel)
{
  int result; // eax
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+4h] [ebp-8h]
  int nDiffLevel; // [esp+8h] [ebp-4h]

  nDiffLevel = nMonsterLevel - nPlayerLevel;
  if ( nMonsterLevel - nPlayerLevel < 0 )
  {
    if ( abs(nDiffLevel) >= 20 )
      v3 = 20;
    else
      v3 = abs(nDiffLevel);
    result = dword_4E2F18[21 * ((nPlayerLevel - 1) / 10) + v3];
  }
  else
  {
    if ( nDiffLevel >= 20 )
      v4 = 20;
    else
      v4 = nMonsterLevel - nPlayerLevel;
    result = dword_4E3260[21 * ((nPlayerLevel - 1) / 10) + v4];
  }
  return result;
}

//----- (0044FDD0) --------------------------------------------------------
void __thiscall CPlayerObject::OnTimer(CPlayerObject *this, int nId)
{
  CPlayer *pPlayer_; // [esp+8h] [ebp-18h]
  CLink *pLink_; // [esp+Ch] [ebp-14h]
  CPlayer *pPlayer; // [esp+10h] [ebp-10h]
  CLink *pLink; // [esp+14h] [ebp-Ch]
  DWORD dwAddTick; // [esp+18h] [ebp-8h]
  DWORD dwCurTick; // [esp+1Ch] [ebp-4h]

  if ( nId )
  {
    if ( nId == 1 )
    {
      CIOCriticalSection::Enter(&stru_4E2078);
      CIOCriticalSection::Enter(&stru_4E2098);
      CLink::MoveTo(&unk_4E200C, &pTo);
      CIOCriticalSection::Leave((int)&stru_4E2098);
      pLink_ = pTo.m_pNext;
      while ( pLink_ != &pTo )
      {
        pPlayer_ = (CPlayer *)&pLink_[-54].m_pPrev;
        pLink_ = pLink_->m_pNext;
        CPlayer::Tick(pPlayer_);
      }
      CIOCriticalSection::Leave((int)&stru_4E2078);
      CIOObject::AddTimer(this, 0x3E8u, 1);
    }
  }
  else
  {
    dwCurTick = GetTickCount();
    do
    {
      dwAddTick = dwCurTick + 30;
      CIOCriticalSection::Enter(&stru_4E2078);
      CIOCriticalSection::Enter(&stru_4E2098);
      CLink::MoveTo(&unk_4E200C, &pTo);
      CIOCriticalSection::Leave((int)&stru_4E2098);
      pLink = pTo.m_pNext;
      while ( pLink != &pTo )
      {
        pPlayer = (CPlayer *)&pLink[-54].m_pPrev;
        pLink = pLink->m_pNext;
        CPlayer::AI(pPlayer);
      }
      CIOCriticalSection::Leave((int)&stru_4E2078);
      dwCurTick = GetTickCount();
    }
    while ( dwAddTick <= dwCurTick );
    CIOObject::AddTimer(this, dwAddTick - dwCurTick, 0);
  }
}

//----- (0044FF20) --------------------------------------------------------
CPlayer *__thiscall CPlayer::CPlayer(CPlayer *this, CSocket *pSocket, int nUID, int nPID)
{
  CChar::CChar(this);
  this->__vftable = (CPlayer_vtbl *)&off_4BA660;
  CPlayerSkill::CPlayerSkill(&this->m_skill);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockItem);
  sub_4706F0(&this->m_mapItem);
  sub_4707A0(&this->m_vecTrade);
  sub_470840(&this->m_mapStorage);
  sub_470AA0(&this->m_mapStall);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockQuest);
  sub_471580(&this->m_mapMyQuest);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockMlm);
  sub_4718D0(&this->m_mapFrd);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockFrd);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockMail);
  sub_471980(&this->m_mapMail);
  sub_471CD0(&this->m_mapTelPt);
  CIOCriticalSection::CIOCriticalSection(&this->m_lockGamble);
  this->m_nSocketRef = 0;
  this->m_nPartyRef = 0;
  this->m_dwAttr = 1;
  CIOObject::AddRef((int)pSocket);
  this->m_pSocket = pSocket;
  this->m_nUID = nUID;
  this->m_nPID = nPID;
  this->m_nAdmin = 0;
  this->m_nClass = 0;
  this->m_dwSpecialty = 0;
  this->m_nContribute = 0;
  this->m_nExp = 0i64;
  this->m_nGID = 0;
  this->m_pGuild = 0;
  this->m_nGuildLevel = 0;
  memset(this->m_szGuildName, 0, sizeof(this->m_szGuildName));
  this->m_nStandard = 0;
  this->m_nGuildClass = 0;
  memset(this->m_szGuildClassTitle, 0, sizeof(this->m_szGuildClassTitle));
  this->m_nGRole = 0;
  this->m_nMoney = 0;
  this->m_nPUPoint = 0;
  this->m_nSUPoint = 0;
  this->m_nKilled = 0;
  this->m_nFace = 0;
  this->m_nHair = 0;
  this->m_dwWearState = 0;
  this->m_dwEState = 0;
  this->m_nRvId = 0;
  this->m_nRestPoint = 0;
  this->m_nRage = 0;
  this->m_nChantBuff = 0;
  this->m_nRevivalHP = 0;
  this->m_nRevivalMP = 0;
  this->m_nUpgrLevel = 0;
  this->m_nCAttack = 0;
  this->m_nCMagic = 0;
  this->m_nWMinAttack = 0;
  this->m_nWMaxAttack = 0;
  this->m_nWMinMagic = 0;
  this->m_nWMaxMagic = 0;
  this->m_nParty = 0;
  memset(this->m_wWearItem, 0, sizeof(this->m_wWearItem));
  this->m_pMoney = 0;
  this->m_pTrade = 0;
  this->m_nQuestItem = 0;
  this->m_pTransform = 0;
  this->m_nTFlag = 0;
  this->m_pStandard = 0;
  this->m_nStBuff = -1;
  this->m_bMailSend = 0;
  memset(this->m_szStall, 0, sizeof(this->m_szStall));
  this->m_nStall = 0;
  this->m_dwAutoSave = 0;
  this->m_dwNextAutoRefreshLevelMP = GetTickCount();
  this->m_dwNextAutoRefreshLevelHP = this->m_dwNextAutoRefreshLevelMP;
  this->m_dwNextAction = this->m_dwNextAutoRefreshLevelHP;
  this->m_dwNextAutoRefresh = this->m_dwNextAction;
  this->m_dwNextRefresh = this->m_dwNextAutoRefresh;
  this->m_dwNextMsg = this->m_dwNextRefresh;
  this->m_dwNextDecRage = this->m_dwNextMsg;
  this->m_dwLastDamage = 0;
  this->m_dwQuestJobTick = 0;
  this->m_dwNextQuest = GetTickCount() + 1800000;
  this->m_nTeleMap = 0;
  this->m_ptTelePixel.y = -1;
  this->m_ptTelePixel.x = -1;
  this->m_nPvPId = 0;
  this->m_pOppo = 0;
  this->m_dwPvP = 0;
  this->m_nQuestJob = 0;
  this->m_pEventHead = 0;
  this->m_pTopMlm = 0;
  this->m_nMlmMoney = 0;
  this->m_nMlmFee = 0;
  this->m_bOverFee = 0;
  this->m_nSiegeGun = 0;
  this->m_nNPC = 0;
  CPlayer::InitGambleInfo(this);
  return this;
}
// 4BA660: using guessed type int (__stdcall *off_4BA660)(int);

//----- (00450460) --------------------------------------------------------
void __thiscall CPlayer::SendPacket(CPlayer *this, CIOBuffer *pBuffer)
{
  CPlayer::Send(this, pBuffer);
}

//----- (00450480) --------------------------------------------------------
void __thiscall CPlayer::SendMove(CPlayer *this, CBase *pPlayer, CIOBuffer *pMoveBuffer)
{
  if ( this != pPlayer )
    CPlayer::Send(this, pMoveBuffer);
}

//----- (004504B0) --------------------------------------------------------
void __thiscall CPlayer::InitGambleInfo(CPlayer *this)
{
  memset(this->m_nCardList, -1, sizeof(this->m_nCardList));
  this->m_nBetAmount = 0;
  memset(this->m_nGet1, -1, sizeof(this->m_nGet1));
  this->m_GambleState = 0;
}

//----- (00450500) --------------------------------------------------------
void *__thiscall CPlayer::`scalar deleting destructor'(CPlayer *this, char a2)
{
  CPlayer::~CPlayer(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00450530) --------------------------------------------------------
void __thiscall CPlayer::~CPlayer(CPlayer *this)
{
  this->__vftable = (CPlayer_vtbl *)&off_4BA660;
  CPlayer::EventRemoveAll(this);
  CPlayer::MLMDeleteAll((CIOCriticalSection *)this);
  if ( this->m_pSocket )
    CIOObject::Release(this->m_pSocket);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockGamble);
  sub_450710(&this->m_mapTelPt);
  sub_4506F0(&this->m_mapMail);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockMail);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockFrd);
  sub_4506D0(&this->m_mapFrd);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockMlm);
  sub_4506B0(&this->m_mapMyQuest);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockQuest);
  sub_450690(&this->m_mapStall);
  sub_450670(&this->m_mapStorage);
  sub_445BF0((std::vector<IPAddrMask> *)&this->m_vecTrade);
  sub_450650(&this->m_mapItem);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lockItem);
  CPlayerSkill::~CPlayerSkill(&this->m_skill);
  CChar::~CChar(this);
}
// 4BA660: using guessed type int (__stdcall *off_4BA660)(int);

//----- (00450650) --------------------------------------------------------
int __thiscall sub_450650(void *this)
{
  return sub_470720(this);
}

//----- (00450670) --------------------------------------------------------
int __thiscall sub_450670(void *this)
{
  return sub_470870(this);
}

//----- (00450690) --------------------------------------------------------
int __thiscall sub_450690(void *this)
{
  return sub_470AD0(this);
}

//----- (004506B0) --------------------------------------------------------
int __thiscall sub_4506B0(void *this)
{
  return sub_4715B0(this);
}

//----- (004506D0) --------------------------------------------------------
int __thiscall sub_4506D0(void *this)
{
  return sub_471900(this);
}

//----- (004506F0) --------------------------------------------------------
int __thiscall sub_4506F0(void *this)
{
  return sub_4719B0(this);
}

//----- (00450710) --------------------------------------------------------
int __thiscall sub_450710(void *this)
{
  return sub_471D00(this);
}

//----- (00450730) --------------------------------------------------------
void __cdecl CPlayer::Start()
{
  int i; // [esp+0h] [ebp-4h]

  for ( i = 0; i < 2; ++i )
    CLink::Initialize((CLink *)(8 * i + 0x4E2004));
  dword_4E2000 = 0;
  dword_4E1FF0 = 60;
  CIOObject::AddTimer(&unk_4E20F4, 1000u, 1);
}
// 4E1FF0: using guessed type int dword_4E1FF0;

//----- (00450790) --------------------------------------------------------
CPlayer *__cdecl CPlayer::ScanPlayer(int nPID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  CPlayer *pPlayer; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  pPlayer = 0;
  CRWLock::ReadLock(&unk_4E202C);
  sub_44AE20(dword_4E2068, &it, &nPID);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E2068, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    pPlayer = *(CPlayer **)(sub_420250(&it) + 4);
    CIOObject::AddRef(pPlayer, &pPlayer->m_nFindRef);
  }
  CRWLock::ReadUnlock(&unk_4E202C);
  return pPlayer;
}

//----- (00450810) --------------------------------------------------------
CIOObject *__cdecl CPlayer::FindPlayer(int nId)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  int v4; // [esp+4h] [ebp-Ch] BYREF
  CPlayer *pPlayer; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-4h] BYREF

  pPlayer = 0;
  CRWLock::ReadLock(&unk_4E202C);
  v4 = nId;
  sub_44AE20(dword_4E2020, &it, &v4);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E2020, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    pPlayer = *(CPlayer **)(sub_420250(&it) + 4);
    CIOObject::AddRef(pPlayer, &pPlayer->m_nFindRef);
  }
  CRWLock::ReadUnlock(&unk_4E202C);
  return pPlayer;
}

//----- (00450890) --------------------------------------------------------
CIOObject *__cdecl CPlayer::FindPlayer(char *szName)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  CPlayer *pPlayer; // [esp+4h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v5; // [esp+8h] [ebp-4h] BYREF

  pPlayer = 0;
  CRWLock::ReadLock(&unk_4E2050);
  sub_470660((iless *)dword_4E2044, &v5, (const char **)&szName);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E2044, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v5,
         v1) )
  {
    pPlayer = *(CPlayer **)(sub_420250(&v5) + 4);
    CIOObject::AddRef(pPlayer, &pPlayer->m_nFindRef);
  }
  CRWLock::ReadUnlock(&unk_4E2050);
  return pPlayer;
}

//----- (00450910) --------------------------------------------------------
void CPlayer::WriteAll(enum S2C_PROTOCOL nType, const char *format, ...)
{
  CLink *pLink; // [esp+4h] [ebp-14h]
  CIOBuffer *pBuffer; // [esp+14h] [ebp-4h]

  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&format) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  CIOCriticalSection::Enter(&stru_4E2078);
  CIOCriticalSection::Enter(&stru_4E2098);
  CLink::MoveTo(&unk_4E200C, &pTo);
  CIOCriticalSection::Leave((int)&stru_4E2098);
  for ( pLink = pTo.m_pNext; pLink != &pTo; pLink = pLink->m_pNext )
    CPlayer::Send((CPlayer *)&pLink[-54].m_pPrev, pBuffer);
  CIOCriticalSection::Leave((int)&stru_4E2078);
  CIOBuffer::Release(pBuffer);
}

//----- (004509F0) --------------------------------------------------------
void CPlayer::WriteInMap(int nMap, enum S2C_PROTOCOL nType, const char *format, ...)
{
  CLink *pLink; // [esp+4h] [ebp-14h]
  CIOBuffer *pBuffer; // [esp+14h] [ebp-4h]

  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&format) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  CIOCriticalSection::Enter(&stru_4E2078);
  CIOCriticalSection::Enter(&stru_4E2098);
  CLink::MoveTo(&unk_4E200C, &pTo);
  CIOCriticalSection::Leave((int)&stru_4E2098);
  for ( pLink = pTo.m_pNext; pLink != &pTo; pLink = pLink->m_pNext )
  {
    if ( pLink[-14].m_pNext == (CLink *)nMap )
      CPlayer::Send((CPlayer *)&pLink[-54].m_pPrev, pBuffer);
  }
  CIOCriticalSection::Leave((int)&stru_4E2078);
  CIOBuffer::Release(pBuffer);
}

//----- (00450AD0) --------------------------------------------------------
void __cdecl CPlayer::LogPlayerStatistic()
{
  int n; // [esp+4h] [ebp-118h]
  int nSection; // [esp+8h] [ebp-114h]
  CPlayer *pPlayer; // [esp+Ch] [ebp-110h]
  CLink *pLink; // [esp+10h] [ebp-10Ch]
  int nNum[66]; // [esp+14h] [ebp-108h] BYREF
                                                // TODO: find struct for nNum.. I know it's there but i can't find it. -HighGamer
                                                // 
                                                // (nvm struct probably doesn't exist)
  nNum[0] = 0;
  memset(&nNum[1], 0, 260u);
  CIOCriticalSection::Enter(&stru_4E2078);
  CIOCriticalSection::Enter(&stru_4E2098);
  CLink::MoveTo(&unk_4E200C, &pTo);
  CIOCriticalSection::Leave((int)&stru_4E2098);
  for ( pLink = pTo.m_pNext; pLink != &pTo; pLink = pLink->m_pNext )
  {
    pPlayer = (CPlayer *)&pLink[-54].m_pPrev;
    if ( (int)pLink[-46].m_pNext <= 100 )
    {
      nSection = (pPlayer->m_nLevel - 1) / 10;
      ++nNum[6 * nSection + pPlayer->m_nClass];
      ++nNum[6 * nSection + 3];
      if ( CChar::IsGState(pPlayer, 32) )
        ++nNum[6 * nSection + 4];
      if ( CChar::IsGState(pPlayer, 16) )
        ++nNum[6 * nSection + 5];
    }
  }
  CIOCriticalSection::Leave((int)&stru_4E2078);
  for ( n = 0; n < 10; ++n )
  {
    LOG_NORMAL(
      "##%02d ~ %02d : %d %d %d : %d",
      10 * n + 1,
      10 * n + 10,
      nNum[6 * n],
      nNum[6 * n + 1],
      nNum[6 * n + 2],
      nNum[6 * n + 3]);
    LOG_NORMAL("@@%02d ~ %02d : %d %d", 10 * n + 1, 10 * n + 10, nNum[6 * n + 4], nNum[6 * n + 5]);
    nNum[60] += nNum[6 * n];
    nNum[61] += nNum[6 * n + 1];
    nNum[62] += nNum[6 * n + 2];
    nNum[63] += nNum[6 * n + 3];
    nNum[64] += nNum[6 * n + 4];
    nNum[65] += nNum[6 * n + 5];
  }
  LOG_NORMAL("##Total Sum : %d %d %d : %d", nNum[60], nNum[61], nNum[62], nNum[63]);
  LOG_NORMAL("@@Total Sum : %d %d", nNum[64], nNum[65]);
  LOG_NORMAL("$$Currency Increment : %d", dword_4E2014);
  CDBSocket::Write(S2D_STATISTICS, "ddddddd", nNum[60], nNum[61], nNum[62], nNum[63], nNum[64], nNum[65], dword_4E2014);
}

//----- (00450E40) --------------------------------------------------------
void (__thiscall ***__thiscall CPlayer::OnFree(void (__thiscall ***CPlayer)(CPlayer *, int)))(CPlayer *, int)
{
  return (void (__thiscall ***)(CPlayer *, int))CBase::OnFree((CBase *)CPlayer);// TODO: This is one is too hard for me to fix -HighGamer
}

//----- (00450E60) --------------------------------------------------------
void __thiscall CPlayer::OnDelete(CPlayer *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  _DWORD *v2; // eax
  CBuffMoveSpeed *v3; // [esp-4h] [ebp-50h]
  CBuffMoveSpeed *v4; // [esp-4h] [ebp-50h]
  CBuffMoveSpeed *v5; // [esp-4h] [ebp-50h]
  CBuffMoveSpeed *v6; // [esp-4h] [ebp-50h]
  int v8; // [esp+Ch] [ebp-40h] BYREF
  char v9[4]; // [esp+10h] [ebp-3Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-38h] BYREF
  REVIVALLOC loc; // [esp+18h] [ebp-34h] BYREF
  CPlayer *pOppo; // [esp+34h] [ebp-18h]
  CParty *pParty; // [esp+38h] [ebp-14h]
  int nParty; // [esp+3Ch] [ebp-10h]
  CGuild *pGuild; // [esp+40h] [ebp-Ch]
  CItem *pItem; // [esp+44h] [ebp-8h]
  CItem *pTrade; // [esp+48h] [ebp-4h]

  CChar::Lock(this);
  if ( !CPlayer::IsPBit(this, 3) )
    goto LABEL_39;
  pTrade = (CItem *)this->m_pTrade;
  if ( pTrade )
  {
    CIOObject::AddRef((int)pTrade);
    CChar::Unlock(this);
    CBase::Delete(pTrade);
    CIOObject::Release(pTrade);
    CChar::Lock(this);
  }
  pGuild = this->m_pGuild;
  if ( pGuild )
  {
    CIOObject::AddRef(pGuild, &pGuild->m_nTempRef);
    CChar::Unlock(this);
    CGuild::Logout(pGuild, this);
    CIOObject::Release(pGuild, &pGuild->m_nTempRef);
    CChar::Lock(this);
  }
  nParty = this->m_nParty;
  if ( nParty )
  {
    this->m_nParty = 0;
    pParty = (CParty *)sub_44D4E0(nParty);
    if ( pParty )
    {
      CParty::Leave(pParty, (int)this);
      CIOObject::Release(pParty);
    }
  }
  if ( CChar::IsGState(this, 128) )
  {
    pOppo = this->m_pOppo;
    if ( !pOppo )
      EBREAK();
    CPlayer::EndPvP((int)this, (volatile int *)pOppo, 3, 2, 6);
    goto LABEL_33;
  }
  if ( !CPlayer::IsEState(this, 16) && CChar::IsGState(this, 2) )
  {
    if ( !CPlayer::IsEState(this, 256) )
    {
      v3 = CBuff::CreateBuff(65, 600);
      this->AddBuff(this, v3);
      if ( CPlayer::IsEState(this, 32) )
      {
        v4 = CBuff::CreateBuff(66, 600);
        this->AddBuff(this, v4);
      }
      else if ( CPlayer::IsEState(this, 64) )
      {
        v5 = CBuff::CreateBuff(67, 600);
        this->AddBuff(this, v5);
      }
      if ( CPlayer::IsEState(this, 128) )
      {
        v6 = CBuff::CreateBuff(68, 600);
        this->AddBuff(this, v6);
      }
      goto LABEL_33;
    }
    this->m_nCurHP = CChar::GetMaxHP(this);
    qmemcpy(&loc, (char *)&unk_4D77C8 + 28 * this->m_nRvId, sizeof(loc));
    if ( loc.nLinkedGate )
    {
      CChar::Unlock(this);
      if ( sub_417450() )
      {
        if ( !CCastle::IsGateAlive(loc.nCID, loc.nLinkedGate)
          && CPlayer::IsDefenseSide((CIOCriticalSection *)this, loc.nCID) )
        {
          this->m_nRvId = loc.nResetGate;
          qmemcpy(&loc, (char *)&unk_4D77C8 + 28 * this->m_nRvId, sizeof(loc));
        }
        goto LABEL_25;
      }
    }
    else
    {
      if ( !loc.nCID )
      {
LABEL_26:
        this->m_nMap = loc.nMap;
        this->m_ptPixel = loc.ptPLoc;
        this->m_nZ = loc.nZ;
        CPlayer::SubEState(this, 256);
        goto LABEL_33;
      }
      CChar::Unlock(this);
      if ( CPlayer::IsDefenseSide((CIOCriticalSection *)this, loc.nCID) )
      {
LABEL_25:
        CChar::Lock(this);
        goto LABEL_26;
      }
    }
    this->m_nRvId = 0;
    qmemcpy(&loc, (char *)&unk_4D77C8 + 28 * this->m_nRvId, sizeof(loc));
    goto LABEL_25;
  }
LABEL_33:
  CPlayer::SaveAllProperty(this, 0);
  CPlayer::EventSaveDB(this);
  CChar::SaveAllBuff(this);
  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapItem,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v9);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v1) )
      break;
    v2 = sub_446090((int *)&it, &v8, 0);
    pItem = *(CItem **)(sub_420250(v2) + 4);
    CPlayer::_OutofInven(this, pItem);
    CBase::Delete(pItem);
  }
  this->m_pMoney = 0;
  CIOCriticalSection::Leave((int)&this->m_lockItem);
  if ( !CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile) )
  {
    CIOObject::AddRef((int)this);
    LOG_ERR(
      "CPlayer::OnDelete() Removal of point from Map is failed. (%d %d) (PID: %d, UID: %d)",
      this->m_ptTile.x,
      this->m_ptTile.y,
      this->m_nPID,
      this->m_nUID);
  }
  CChar::WriteInSight(this, S2C_REMOVEPLAYER, "d", this->m_nId);
LABEL_39:
  if ( CPlayer::IsPBit(this, 2) )
    CPlayer::Remove(this);
  BitSet((volatile signed __int32 *)&this->m_bit, 4u);
  CChar::Unlock(this);
  sub_402180((int)this);
}

//----- (00451330) --------------------------------------------------------
int __thiscall CPlayer::IsPBit(CPlayer *this, int bit)
{
  return this->m_bit & (1 << bit);
}

//----- (00451350) --------------------------------------------------------
void __thiscall CPlayer::SendDelete(CPlayer *this, CBase *pPlayer, CIOBuffer *pDeleteBuffer)
{
  CPlayer::Send(this, pDeleteBuffer);
  CPlayer::Write((CPlayer *)pPlayer, S2C_REMOVEPLAYER, "d", this->m_nId);
}

//----- (00451390) --------------------------------------------------------
void __thiscall CPlayer::SendCreate(CPlayer *this, CBase *pPlayer, void *pCraeteBuffer)
{
  int *GuildClassTitle; // [esp-14h] [ebp-1Ch]
  int *GuildName; // [esp-10h] [ebp-18h]
  int m_nID; // [esp-Ch] [ebp-14h]
  int m_nGID; // [esp-Ch] [ebp-14h]
  int m_nTFlag; // [esp-8h] [ebp-10h]
  int v8; // [esp-4h] [ebp-Ch]
  int m_nStandard; // [esp-4h] [ebp-Ch]

  if ( this != pPlayer )
  {
    CPlayer::Send(this, (CIOBuffer *)pCraeteBuffer);
    if ( pPlayer[8].m_nRef )
    {
      v8 = pPlayer[8].m_nRef;
      m_nID = CBase::Id(pPlayer);
      CPlayer::Write(this, S2C_UPDATEMPROPERTY, "dbw", m_nID, 32, v8);
    }
    m_nStandard = this->m_nStandard;
    m_nTFlag = this->m_nTFlag;
    m_nGID = this->m_nGID;
    GuildName = CPlayer::GetGuildName((int *)this);
    GuildClassTitle = CPlayer::GetGuildClassTitle((int *)this);
    CPlayer::Write(
      (CPlayer *)pPlayer,
      S2C_CREATEPLAYER,
      "dsbdddwdmbbIssdbd",
      this->m_nId,
      this->m_szName,
      this->m_nClass,
      this->m_ptPixel.x,
      this->m_ptPixel.y,
      this->m_nZ,
      this->m_nDir,
      this->m_nGState,
      this->m_wWearItem,
      14,
      this->m_nFace,
      this->m_nHair,
      LODWORD(this->m_nMState),
      HIDWORD(this->m_nMState),
      GuildClassTitle,
      GuildName,
      m_nGID,
      m_nTFlag,
      m_nStandard);
    if ( this->m_prtyPer.nMSpeed )
      CPlayer::Write((CPlayer *)pPlayer, S2C_UPDATEMPROPERTY, "dbw", this->m_nId, 32, this->m_prtyPer.nMSpeed);
  }
}

//----- (004514F0) --------------------------------------------------------
void __thiscall CPlayer::AI(CPlayer *this)
{
  if ( CBase::IsDeleted(this) )
  {
    CLink::Remove(&this->m_link);
    CIOObject::Release(this, &this->m_nTimerRef);
  }
}

//----- (00451530) --------------------------------------------------------
int __thiscall CPlayer::Damage(CPlayer *this, CChar *pChar, int nAttack, int *nNetDamage, int *bFatal, int *nPalsyDamage, CSkill *pSkill)
{
  int result; // eax
  int v8; // eax
  int v9; // [esp+18h] [ebp-84h]
  int v10; // [esp+1Ch] [ebp-80h]
  int v11; // [esp+30h] [ebp-6Ch]
  int v12; // [esp+34h] [ebp-68h]
  int v13; // [esp+38h] [ebp-64h]
  int nDamage; // [esp+3Ch] [ebp-60h]
  int nAddFatal; // [esp+68h] [ebp-34h]
  int bPhysical; // [esp+6Ch] [ebp-30h]
  CPlayer *pOppo; // [esp+7Ch] [ebp-20h]
  CNPC *pNPC; // [esp+80h] [ebp-1Ch]
  CTrade *pTrade; // [esp+84h] [ebp-18h]
  int nDiffLevel; // [esp+88h] [ebp-14h]
  int nRevisePKLevelDamage; // [esp+94h] [ebp-8h]

  if ( CChar::IsMState(this, 0x4000000i64) )
  {
    *nPalsyDamage = 0;
    *nNetDamage = 0;
    result = 0;
  }
  else
  {
    if ( pSkill )
      bPhysical = pSkill->IsPhysical(pSkill);
    else
      bPhysical = 1;
    if ( pSkill )
      nAddFatal = pSkill->GetFatalRate(pSkill);
    else
      nAddFatal = 0;
    nRevisePKLevelDamage = CChar::GetFinalDamage(this, pChar, nAttack, bPhysical);
    if ( nRevisePKLevelDamage > 0 )
    {
      if ( CChar::IsMState(this, 0x200i64) )
        CChar::CancelBuff(this, 8);
      if ( CChar::IsMState(this, 0x10000000i64) )
        CChar::CancelBuff(this, 26);
      if ( CChar::IsMState(this, 0x8000i64) && pChar->GetAttackType(pChar) == 1 )
      {
        CChar::CancelBuff(this, 14);
        *nPalsyDamage = 0;
        *nNetDamage = 0;
        result = 0;
      }
      else if ( CChar::IsBState(this, 0x10000i64) && Random(1, 100) <= 10 )
      {
        CChar::UpdateBuff(this, 58);
        *nPalsyDamage = 0;
        *nNetDamage = 0;
        result = 0;
      }
      else
      {
        CChar::Lock(this);
        if ( CChar::IsNormal(this) )
        {
          this->m_dwLastDamage = GetTickCount();
          if ( pChar->IsPlayer(pChar) && CChar::IsGState(pChar, 256) && pChar[1].m_prtyPt.nPt[1] < 3 )
            pChar[1].m_prtyPt.nPt[1] = 3;
          if ( CChar::IsMState(this, 0x1000000i64) )
          {
            *nNetDamage = nAttack;
          }
          else
          {
            if ( pSkill && bPhysical )
              nDamage = nRevisePKLevelDamage >> 1;
            else
              nDamage = nRevisePKLevelDamage;
            *nNetDamage = nRevisePKLevelDamage + CChar::GetFatalDamage(pChar, nDamage, bFatal, nAddFatal);
            if ( pChar->IsPlayer(pChar) && !pChar[1].m_bit )
            {
              *nNetDamage += 30 * *nNetDamage / 100;
              nDiffLevel = pChar->m_nLevel - this->m_nLevel;
              if ( nDiffLevel < 0 )
              {
                if ( this->m_nLevel - pChar->m_nLevel <= 10 )
                  v11 = this->m_nLevel - pChar->m_nLevel;
                else
                  v11 = 10;
                v12 = -dword_4D91A4[v11];
              }
              else
              {
                if ( nDiffLevel <= 10 )
                  v13 = pChar->m_nLevel - this->m_nLevel;
                else
                  v13 = 10;
                v12 = dword_4D91A4[v13];
              }
              *nNetDamage += v12 * *nNetDamage / 100;
            }
          }
          if ( pChar->IsMonster(pChar) )
          {
            if ( CChar::IsBState(this, 0x400i64) )
            {
              *nNetDamage -= *nNetDamage / 10;
            }
            else if ( CChar::IsBState(this, 0x80000000i64) )
            {
              *nNetDamage -= 7 * *nNetDamage / 100;
            }
          }
          if ( *nNetDamage >= this->m_nCurHP )
            v10 = this->m_nCurHP;
          else
            v10 = *nNetDamage;
          *nNetDamage = v10;
          this->m_nCurHP -= *nNetDamage;
          if ( *nPalsyDamage )
          {
            if ( this->m_nCurHP <= 0 )
            {
              *nPalsyDamage = 0;
            }
            else
            {
              if ( *nPalsyDamage >= this->m_nCurHP )
                v9 = this->m_nCurHP;
              else
                v9 = *nPalsyDamage;
              *nPalsyDamage = v9;
              this->m_nCurHP -= *nPalsyDamage;
            }
          }
          if ( this->m_nCurHP > 0 )
          {
            CChar::Unlock(this);
            CPlayer::Rest(this, 0);
          }
          else
          {
            this->m_nCurHP = 0;
            if ( CChar::IsGState(this, 0x8000) )
              CPlayer::Write(this, S2C_MESSAGE, "b", 89);
            CChar::SubGState(this, 32772);
            CChar::SubMState(this, 1i64);
            CChar::AddGState(this, 2);
            if ( CPlayer::IsEState(this, 2048) )
            {
              CPlayer::SubEState(this, 2048);
              pNPC = CNPC::FindNPC(this->m_nNPC);
              if ( pNPC )
                CNPCSiegeGunStone::SetOperator((CNPCSiegeGunStone *)pNPC, 0);
              CPlayer::Write(this, S2C_MESSAGE, "b", 118);
            }
            if ( CChar::IsGState(this, 128) )
            {
              pOppo = this->m_pOppo;
              if ( !pOppo )
                EBREAK();                       // Force server into debug mode if Damage is missing Opponent. -HighGamer
              if ( pChar->IsPlayer(pChar) && pChar == pOppo )
              {
                CPlayer::AddEState(this, 16);
              }
              else if ( !CChar::IsBState(this, 256i64) )
              {
                ++this->m_nKilled;
              }
              CPlayer::EndPvP((int)this, (volatile int *)pOppo, 3, 2, 6);
            }
            else if ( pChar->IsMonster(pChar) && !CChar::IsBState(this, 256i64) )
            {
              ++this->m_nKilled;
            }
            if ( CChar::IsGState(this, 1024) )
            {
              this->SubGState(this, 1024);
              CChar::Unlock(this);
              v8 = CPlayer::GetGID((CIOCriticalSection *)this);
              CCastle::UnfurlStandardCancel(v8);
              CChar::Lock(this);
            }
            pTrade = this->m_pTrade;
            if ( pTrade )
            {
              CIOObject::AddRef((int)pTrade);
              CChar::Unlock(this);
              CBase::Delete(pTrade);
              CIOObject::Release(pTrade);
            }
            else
            {
              CChar::Unlock(this);
            }
            if ( CChar::IsBState(this, 128i64) )
              CPlayer::AddEState(this, 128);
            pChar->PKKill(pChar, this);
            CChar::CancelBuffPrty(this, -161);
            if ( CChar::IsGState(this, 16) )
              CPlayer::SwitchStall(this, 0);
            if ( CChar::IsGState(this, 512) )
              CPlayer::FreeTransform((CIOCriticalSection *)this);
            CPlayer::BreakStandard((CIOCriticalSection *)this);
            CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
            this->m_dwNextRevival = GetTickCount() + 600000;
            this->m_dwNextAction = GetTickCount() + 600000;
            pChar->RemoveHostility(pChar, this);
          }
          CPlayer::UpdatePartyMember(this, 7);
          result = 1;
        }
        else
        {
          CChar::Unlock(this);
          *nPalsyDamage = 0;
          *nNetDamage = 0;
          result = 1;
        }
      }
    }
    else
    {
      *nPalsyDamage = 0;
      *nNetDamage = 0;
      result = 0;
    }
  }
  return result;
}

//----- (00451CF0) --------------------------------------------------------
void __thiscall CPlayer::InfoDie(CPlayer *this, int nMonId, int bFatal)
{
  CPlayer::Write(this, S2C_INFODIE, "db", nMonId, bFatal);
}

//----- (00451D20) --------------------------------------------------------
void __thiscall CPlayer::ReviseProperty(CPlayer *this)
{
  int v2; // [esp+8h] [ebp-4h]

  CChar::ReviseProperty(this);
  v2 = this->m_prtyBase.nBase[3];
  this->m_prtyBase.nBase[5] += 2 * this->m_prtyBase.nBase[1] * this->m_prtyBase.nBase[1] / dword_4D6A10[this->m_nClass]
                             + 115;
  this->m_prtyBase.nBase[6] += v2 + 2 * v2 * v2 / dword_4D6A1C[this->m_nClass];
}

//----- (00451DA0) --------------------------------------------------------
void __thiscall CPlayer::AddMStateEx(CPlayer *this, int nMStateEx)
{
  CChar::AddMStateEx(this, nMStateEx);
  CPlayer::Write(this, S2C_MSTATEEX, "d", this->m_nMStateEx);
}

//----- (00451DE0) --------------------------------------------------------
void __thiscall CPlayer::AddBState(CPlayer *this, __int64 nBState, int nRemainTime)
{
  unsigned __int64 v3; // rax
  LONG v4; // eax
  __int64 *pBState; // [esp+4h] [ebp-4h]

  pBState = &this->m_nBState;
  InterlockedExchange((volatile LONG *)&this->m_nBState, nBState | LODWORD(this->m_nBState));
  HIDWORD(v3) = HIDWORD(nBState) | HIDWORD(this->m_nBState);
  LODWORD(v3) = 0;
  v4 = unknown_libname_15(v3, 0x20u);
  InterlockedExchange((volatile LONG *)pBState + 1, v4);
  CPlayer::Write(this, S2C_MESSAGEV, "bId", 74, nBState, nRemainTime);
}

//----- (00451E70) --------------------------------------------------------
void __thiscall CPlayer::SubMStateEx(CPlayer *this, int nMStateEx)
{
  CChar::SubMStateEx(this, nMStateEx);
  CPlayer::Write(this, S2C_MSTATEEX, "d", this->m_nMStateEx);
}

//----- (00451EB0) --------------------------------------------------------
void __thiscall CPlayer::SubBState(CPlayer *this, __int64 nBState)
{
  unsigned __int64 v2; // rax
  LONG v3; // eax
  __int64 *pBState; // [esp+4h] [ebp-4h]

  pBState = &this->m_nBState;
  InterlockedExchange((volatile LONG *)&this->m_nBState, this->m_nBState & ~(_DWORD)nBState);
  HIDWORD(v2) = HIDWORD(this->m_nBState) & ~HIDWORD(nBState);
  LODWORD(v2) = 0;
  v3 = unknown_libname_15(v2, 0x20u);
  InterlockedExchange((volatile LONG *)pBState + 1, v3);
  CPlayer::Write(this, S2C_MESSAGEV, "bI", 75, nBState);
}

//----- (00451F40) --------------------------------------------------------
int __thiscall CPlayer::GetFinalDefense(CPlayer *this, CChar *pAttacker)
{
  int v2; // eax
  int result; // eax
  int nType; // [esp+Ch] [ebp-4h]

  if ( pAttacker->IsMonster(pAttacker) )
  {
    v2 = pAttacker->GetAttackType(pAttacker);
    result = CChar::GetDefense(this, v2);
  }
  else
  {
    nType = pAttacker->GetAttackType(pAttacker);
    result = CChar::GetDefense(this, nType) + this->m_nLevel / dword_4D9180[3 * nType + this->m_nClass];
  }
  return result;
}

//----- (00451FC0) --------------------------------------------------------
int __thiscall CPlayer::GetFinalAbsorb(CPlayer *this, CChar *pAttacker)
{
  int result; // eax

  if ( pAttacker->IsMonster(pAttacker) )
    result = CChar::GetAbsorb(this);
  else
    result = CChar::GetAbsorb(this) + 15;
  return result;
}

//----- (00452000) --------------------------------------------------------
int __thiscall CPlayer::GetFinalResist(CPlayer *this, CChar *pAttacker, int nIndex)
{
  int result; // eax

  if ( pAttacker->IsMonster(pAttacker) )
    result = CChar::GetResist(this, nIndex) / 10;
  else
    result = CChar::GetResist(this, nIndex) / 10 + this->m_nLevel / dword_4D9198[this->m_nClass] + 25;
  return result;
}

//----- (00452070) --------------------------------------------------------
int __thiscall CPlayer::GetMSpeed(CPlayer *this, int nMoveType)
{
  int v3; // [esp+0h] [ebp-18h]
  int nMSpeed; // [esp+4h] [ebp-14h]

  if ( CChar::IsMState(this, 1i64) )
    nMSpeed = 533;
  else
    nMSpeed = 800;
  if ( !this->m_prtyPer.nMSpeed )
    return nMSpeed;
  if ( this->m_prtyPer.nMSpeed <= 0 )
    v3 = nMSpeed * (abs(this->m_prtyPer.nMSpeed) + 100) / 100;
  else
    v3 = 100 * nMSpeed / (this->m_prtyPer.nMSpeed + 100);
  return v3;
}

//----- (00452110) --------------------------------------------------------
BOOL __thiscall CPlayer::GetAttackType(CPlayer *this)
{
  return this->m_nClass == 2;
}

//----- (00452130) --------------------------------------------------------
BOOL __thiscall CPlayer::CheckBlock(CPlayer *this, CChar *pAttacker)
{
  int v3; // esi
  int v4; // esi
  int v5; // esi
  int v6; // [esp+4h] [ebp-14h]
  BOOL v8; // [esp+Ch] [ebp-Ch]
  int nBlock; // [esp+10h] [ebp-8h]
  int nColorLevel; // [esp+14h] [ebp-4h]

  nBlock = this->m_prtyPer.nBlock;
  if ( !nBlock || this->m_nClass == 1 )
    return 0;
  nColorLevel = GetColorLevel(pAttacker->m_nLevel, this->m_nLevel);
  if ( this->m_nClass )
  {
    if ( this->m_nClass == 2 )
    {
      if ( pAttacker->IsMonster(pAttacker) )
      {
        v5 = dword_4D9248[nColorLevel] + nBlock;
        return v5 >= Random(1, 100);
      }
      if ( pAttacker->IsPlayer(pAttacker) )
        return nBlock >= Random(1, 100);
    }
    return 0;
  }
  if ( !CPlayer::IsWState(this, 1) )
  {
    if ( (this->m_dwSpecialty & 4) == 0 )
      return 0;
    if ( !CPlayer::IsWState(this, 12) || !CPlayerSkill::IsSkill(&this->m_skill, 20) )
      return 0;
  }
  if ( !pAttacker->IsMonster(pAttacker) )
  {
    if ( pAttacker->IsPlayer(pAttacker) )
    {
      v4 = nBlock + this->m_nLevel / 3;
      return v4 > Random(1, 100);
    }
    return 0;
  }
  v8 = CPlayer::IsWState(this, 12) != 0;
  if ( pAttacker->GetAttackType(pAttacker) == 1 )
  {
    if ( v8 )
      v6 = (nBlock + 3) / 3;
    else
      v6 = nBlock + 3;
    nBlock = v6;
  }
  v3 = dword_4D9210[7 * v8 + nColorLevel] + nBlock;
  return v3 >= Random(1, 100);
}

//----- (00452310) --------------------------------------------------------
void __thiscall CPlayer::UpdateTransformExp(CPlayer *this, int bTimer)
{
  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  if ( this->m_pTransform )
    CItemTransform::UpdateExp(this->m_pTransform, this, bTimer);
  CIOCriticalSection::Leave((int)&this->m_lockItem);
}

//----- (00452360) --------------------------------------------------------
int __thiscall CPlayer::Add(CPlayer *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  int result; // eax
  char *v3; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v4; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v5; // eax
  char *v6; // [esp-Ch] [ebp-60h]
  int v7; // [esp-8h] [ebp-5Ch]
  int v8; // [esp-4h] [ebp-58h]
  char v10[8]; // [esp+4h] [ebp-50h] BYREF
  char *v11; // [esp+Ch] [ebp-48h]
  CPlayer *v12; // [esp+10h] [ebp-44h]
  char v13[8]; // [esp+14h] [ebp-40h] BYREF
  char v14[8]; // [esp+1Ch] [ebp-38h] BYREF
  int v15; // [esp+24h] [ebp-30h]
  CPlayer *v16; // [esp+28h] [ebp-2Ch]
  char v17[8]; // [esp+2Ch] [ebp-28h] BYREF
  CPlayer *v18; // [esp+34h] [ebp-20h]
  char v19[8]; // [esp+38h] [ebp-1Ch] BYREF
  struct in_addr addr1; // [esp+40h] [ebp-14h]
  CPlayer *pOther; // [esp+44h] [ebp-10h]
  struct in_addr addr2; // [esp+48h] [ebp-Ch]
  int v23; // [esp+4Ch] [ebp-8h] BYREF
  char v24; // [esp+50h] [ebp-4h]

  CIOObject::AddRef((int)this);
  CRWLock::WriteLock(&unk_4E202C);
  v18 = this;
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v19);
  sub_445DF0(
    (int)dword_4E2068,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)&v23,
    v1);
  if ( v24 )
  {
    v16 = this;
    v15 = this->m_nId;
    std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v17);
    sub_445DF0(
      (int)dword_4E2020,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v14,
      v4);
    CRWLock::WriteUnlock(&unk_4E202C);
    CRWLock::WriteLock(&unk_4E2050);
    v12 = this;
    v11 = this->m_szName;
    std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v13);
    sub_470440(
      (int)dword_4E2044,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v10,
      v5);
    CRWLock::WriteUnlock(&unk_4E2050);
    CIOObject::AddRef(this, &this->m_nTimerRef);
    InterlockedIncrement(&dword_4E2000);
    CIOCriticalSection::Enter(&stru_4E2098);
    CLink::Insert(&this->m_link, &unk_4E200C);
    CIOCriticalSection::Leave((int)&stru_4E2098);
    result = 1;
  }
  else
  {
    CIOObject::Release(this);
    pOther = *(CPlayer **)(sub_420250(&v23) + 4);
    if ( this == pOther )
    {
      EBREAK();
      CIOObject::AddRef((int)this);
      CRWLock::WriteUnlock(&unk_4E202C);
    }
    else
    {
      addr1 = (struct in_addr)this->m_pSocket->m_addr.S_un.S_addr;
      addr2 = (struct in_addr)pOther->m_pSocket->m_addr.S_un.S_addr;
      v8 = pOther->m_pSocket->m_nPort;
      v7 = this->m_pSocket->m_nPort;
      v6 = inet_ntoa(addr2);
      v3 = inet_ntoa(addr1);
      LOG_NORMAL("Same player on game : name(%s) addr(%s, %s) port(%d, %d)", this->m_szName, v3, v6, v7, v8);
      CPlayer::Write(this, S2C_MESSAGE, "b", 5);
      CIOObject::AddRef(pOther, &pOther->m_nFindRef);
      CRWLock::WriteUnlock(&unk_4E202C);
      CPlayer::Write(pOther, S2C_CLOSE, "b", 2);
      CSocket::Logout(pOther->m_pSocket, 2);
      CIOObject::Release(pOther, &pOther->m_nFindRef);
    }
    result = 0;
  }
  return result;
}
// 4523A1: variable 'v1' is possibly undefined
// 4524F4: variable 'v4' is possibly undefined
// 452536: variable 'v5' is possibly undefined

//----- (00452590) --------------------------------------------------------
void __thiscall CPlayer::Remove(CPlayer *this)
{
  char *v2; // [esp+4h] [ebp-8h] BYREF
  int v3; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E202C);
  v3 = this->m_nId;
  sub_4703E0(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E2020,
    (int)&v3);
  sub_4703E0(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E2068,
    (int)&this->m_nPID);
  CRWLock::WriteUnlock(&unk_4E202C);
  CRWLock::WriteLock(&unk_4E2050);
  v2 = this->m_szName;
  sub_470600(dword_4E2044, (int)&v2);
  CRWLock::WriteUnlock(&unk_4E2050);
  CIOObject::Release(this);
  InterlockedDecrement(&dword_4E2000);
}

//----- (00452620) --------------------------------------------------------
void __thiscall CPlayer::Tick(CPlayer *this)
{
  int v1; // eax
  int v2; // [esp-4h] [ebp-48h]
  int v3; // [esp+18h] [ebp-2Ch]
  int v4; // [esp+1Ch] [ebp-28h]
  CItem *pItem_; // [esp+24h] [ebp-20h]
  CGuild *pGuild; // [esp+28h] [ebp-1Ch]
  int nLevel; // [esp+2Ch] [ebp-18h]
  int dwNextTick; // [esp+30h] [ebp-14h]
  int nItemIndex; // [esp+34h] [ebp-10h]
  CItem *pItem; // [esp+38h] [ebp-Ch]
  int nRand; // [esp+3Ch] [ebp-8h]
  DWORD dwCurTick; // [esp+40h] [ebp-4h]

  if ( CBase::IsDeleted(this) )
  {
    CLink::Remove(&this->m_link);
    CIOObject::Release(this, &this->m_nTimerRef);
  }
  else
  {
    CChar::RefreshBuff(this);
    CPlayer::RefreshStandardBuff((int)this);
    dwCurTick = GetTickCount();
    CChar::Lock(this);
    if ( ++this->m_dwAutoSave >= 600 )
      CPlayer::SaveAllProperty(this, 0);
    if ( CChar::IsGState(this, 0x2000) && dwCurTick >= this->m_dwNextAction )
    {
      CChar::SubGState(this, 0x2000);
      this->m_dwNextAction = dwCurTick;
    }
    if ( CChar::IsGState(this, 2) )
    {
      if ( dwCurTick >= this->m_dwNextRevival )
        CPlayer::Revival(this);
    }
    else
    {
      if ( dwCurTick >= this->m_dwNextAutoRefreshLevelHP )
      {
        if ( this->m_nCurHP < CChar::GetMaxHP(this) )
        {
          if ( CChar::GetMaxHP(this) / 100 >= 40 )
            v4 = 40;
          else
            v4 = CChar::GetMaxHP(this) / 100;
          this->UpdateProperty(this, 7, 1, v4);
        }
        this->m_dwNextAutoRefreshLevelHP = dwCurTick + 6000;
      }
      if ( dwCurTick >= this->m_dwNextAutoRefreshLevelMP )
      {
        if ( this->m_nCurMP < CChar::GetMaxMP(this) )
        {
          if ( CChar::GetMaxMP(this) / 100 >= 20 )
            v3 = 20;
          else
            v3 = CChar::GetMaxMP(this) / 100;
          this->UpdateProperty(this, 8, 1, v3);
        }
        this->m_dwNextAutoRefreshLevelMP = dwCurTick + 12000;
      }
    }
    if ( CChar::IsGState(this, 4) && dwCurTick >= this->m_dwNextAutoRefresh )
    {
      if ( this->m_nCurHP < CChar::GetMaxHP(this) )
      {
        v1 = CPlayer::GetAutoRefreshHP(this);
        this->UpdateProperty(this, 7, 1, v1);
      }
      if ( this->m_nCurMP < CChar::GetMaxMP(this) )
      {
        v2 = CPlayer::GetAutoRefreshMP(this);
        this->UpdateProperty(this, 8, 1, v2);
      }
      this->m_dwNextAutoRefresh = dwCurTick + 4000;
    }
    if ( CChar::IsMState(this, 1i64) )
    {
      if ( this->m_nCurMP < 6 )
        ((void (__thiscall *)(CPlayer *, int, _DWORD))this->SubMState)(this, 1, 0);
      else
        this->UpdateProperty(this, 8, 0, 6);
    }
    if ( CChar::IsGState(this, 32) && dwCurTick >= this->m_dwQuestJobTick )
    {
      nRand = Random(1, 1000);
      if ( nRand > 5 )
      {
        if ( nRand > 15 )
        {
          if ( nRand > 40 )
          {
            if ( nRand > 360 )
              nItemIndex = 237;
            else
              nItemIndex = 239;
          }
          else
          {
            nItemIndex = 240;
          }
        }
        else
        {
          nItemIndex = 444;
        }
      }
      else
      {
        nItemIndex = 241;
      }
      pItem = CItem::CreateItem(nItemIndex, 0, 1, -1);
      if ( pItem && CPlayer::InsertItem(this, 2, pItem) != 1 )
        CBase::Delete(pItem);
      dwNextTick = 600000;
      if ( CChar::IsBState(this, 8i64) )
      {
        dwNextTick = 300000;
      }
      else if ( CChar::IsBState(this, 1i64) )
      {
        dwNextTick = 300000;
      }
      this->m_dwQuestJobTick = dwNextTick + dwCurTick;
      CPlayer::Write(this, S2C_MESSAGE, "b", 44);
    }
    if ( CChar::IsGState(this, 64) && dwCurTick >= this->m_dwQuestJobTick )
    {
      if ( !CPlayer::Cooking((CIOCriticalSection *)this, --this->m_nQuestJob) )
        CPlayer::Write(this, S2C_MESSAGEV, "bb", 51, this->m_nQuestJob);
      this->SubGState(this, 64);
    }
    if ( CChar::IsGState(this, 128) )
      CPlayer::OnPvP((int)this);
    if ( CChar::IsGState(this, 512) && dwCurTick >= this->m_dwNextDecRage )
    {
      if ( this->m_nRage <= 0 )
      {
        CPlayer::FreeTransform((CIOCriticalSection *)this);
      }
      else
      {
        nLevel = this->m_nTFlag & 0xF;
        if ( nLevel )
          this->UpdateProperty(this, 35, 0, dword_4D66AC[nLevel]);
        this->m_dwNextDecRage = dwCurTick + (this->m_nRage <= 0 ? 60000 : 5000);
      }
    }
    if ( CChar::IsGState(this, 1024) && dwCurTick >= this->m_dwQuestJobTick )
    {
      this->SubGState(this, 1024);
      CChar::Unlock(this);
      pGuild = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
      if ( pGuild )
      {
        CGuild::UnfurlStandard((int)pGuild, (int)this, this->m_nQuestJob);
        CIOObject::Release(pGuild, &pGuild->m_nTempRef);
      }
      CChar::Lock(this);
    }
    if ( (dword_4E1178 & 2) != 0 && dwCurTick >= this->m_dwNextQuest )
    {
      this->m_dwNextQuest = dwCurTick + 1800000;
      pItem_ = CItem::CreateItem(649, 0, 1, -1);
      if ( pItem_ )
      {
        if ( CPlayer::InsertItem(this, 16, pItem_) != 1 )
          CBase::Delete(pItem_);
      }
    }
    CChar::Unlock(this);
    this->UpdateTransformExp(this, 1);
    CPlayer::MLMPayMoney(this, 0);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00452C10) --------------------------------------------------------
int __thiscall CPlayer::GetAutoRefreshHP(CPlayer *this)
{
  int v1; // esi

  v1 = 7 * this->m_nRestPoint;
  return v1 + Random(0, 2 * this->m_nRestPoint) + 25;
}

//----- (00452C50) --------------------------------------------------------
int __thiscall CPlayer::GetAutoRefreshMP(CPlayer *this)
{
  int v1; // esi

  v1 = 6 * this->m_nRestPoint;
  return v1 + Random(0, 2 * this->m_nRestPoint) + 20;
}

//----- (00452C90) --------------------------------------------------------
void __cdecl CPlayer::WarPortalAll(int nCID, int nAID)
{
  int *v2; // [esp+0h] [ebp-18h]
  tagPOINT ptPLoc; // [esp+4h] [ebp-14h] BYREF
  CPlayer *pPlayer; // [esp+Ch] [ebp-Ch]
  CLink *pLink; // [esp+10h] [ebp-8h]
  int nRevivalPortal; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&stru_4E2078);
  CIOCriticalSection::Enter(&stru_4E2098);
  CLink::MoveTo(&unk_4E200C, &pTo);
  CIOCriticalSection::Leave((int)&stru_4E2098);
  for ( pLink = pTo.m_pNext; pLink != &pTo; pLink = pLink->m_pNext )
  {
    pPlayer = (CPlayer *)&pLink[-54].m_pPrev;
    if ( !pLink[7].m_pNext
      || pPlayer->m_nGID != nAID && (!pPlayer->m_pGuild->m_nAID || pPlayer->m_pGuild->m_nAID != nAID) )
    {
      nRevivalPortal = CCastle::WarPortal(nCID, pPlayer->m_nMap, pPlayer->m_ptPixel.x, pPlayer->m_ptPixel.y);
      if ( nRevivalPortal >= 0 )
      {
        v2 = (int *)((char *)&unk_4D77C8 + 28 * nRevivalPortal);
        ptPLoc.x = Random(v2[1] - 32, v2[1] + 32);
        ptPLoc.y = Random(v2[2] - 32, v2[2] + 32);
        if ( CChar::IsGState(pPlayer, 2) )
          CChar::AddGState(pPlayer, 8);
        CPlayer::Teleport(pPlayer, *v2, &ptPLoc, v2[3], 0);
      }
    }
  }
  CIOCriticalSection::Leave((int)&stru_4E2078);
}

//----- (00452E00) --------------------------------------------------------
void __thiscall CPlayer::Send(CPlayer *this, CIOBuffer *pBuffer)
{
  CIOBuffer *pNewBuffer; // [esp+4h] [ebp-4h]

  pNewBuffer = CIOBuffer::Alloc();
  memcpy(pNewBuffer, pBuffer, pBuffer->m_dwSize);
  pNewBuffer->m_dwSize = pBuffer->m_dwSize;
  CSocket::Send(this->m_pSocket, pNewBuffer);
}

//----- (00452E60) --------------------------------------------------------
void CPlayer::Write(CPlayer *pPlayer, enum S2C_PROTOCOL nType, const char *format, ...)
{
  CIOBuffer *pBuffer; // [esp+0h] [ebp-10h]
                                                // Something tells me this could be __thiscall
                                                // 
                                                // But i'll leave it __cdecl for now since that works.. 
                                                // 
                                                // (There is 2 ways to find out why it's a __thiscall first of all the first argument is the class as the class itself.. CPlayer:XXX is the first argument also CPlayer *.)
                                                // 
                                                // (Second way the function definition itself starts at S2C_PROTOCOL, meaning it's ignoring the first parameter thats 100% thiscall behavior)
                                                // 
                                                // -HighGamer
  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&format) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  CSocket::Send(pPlayer->m_pSocket, pBuffer);
}

//----- (00452ED0) --------------------------------------------------------
void __thiscall CPlayer::Process(CPlayer *this, enum C2S_PROTOCOL nType, const char *packet, int end)
{
  int v4; // eax
  char *v5; // eax
  char *m_UserIP; // [esp-Ch] [ebp-2E0h]
  int m_UserPort; // [esp-8h] [ebp-2DCh]
  int v9; // [esp+24h] [ebp-2B0h] BYREF
  int v10; // [esp+28h] [ebp-2ACh] BYREF
  int v11; // [esp+2Ch] [ebp-2A8h] BYREF
  int v12; // [esp+30h] [ebp-2A4h] BYREF
  int v13; // [esp+34h] [ebp-2A0h] BYREF
  int v14; // [esp+38h] [ebp-29Ch] BYREF
  int v15; // [esp+3Ch] [ebp-298h] BYREF
  int v16; // [esp+40h] [ebp-294h] BYREF
  int v17; // [esp+44h] [ebp-290h] BYREF
  int v18; // [esp+48h] [ebp-28Ch] BYREF
  int a6; // [esp+4Ch] [ebp-288h] BYREF
  int v20; // [esp+50h] [ebp-284h] BYREF
  int v21; // [esp+54h] [ebp-280h] BYREF
  int v22; // [esp+58h] [ebp-27Ch] BYREF
  char v23; // [esp+5Fh] [ebp-275h] BYREF
  char v24[4]; // [esp+60h] [ebp-274h] BYREF
  int v25; // [esp+64h] [ebp-270h] BYREF
  int v26; // [esp+68h] [ebp-26Ch] BYREF
  int v27; // [esp+6Ch] [ebp-268h] BYREF
  int a8; // [esp+70h] [ebp-264h] BYREF
  int a7; // [esp+74h] [ebp-260h] BYREF
  CItem *v30; // [esp+78h] [ebp-25Ch]
  unsigned __int8 v31; // [esp+7Fh] [ebp-255h] BYREF
  int a2a; // [esp+80h] [ebp-254h]
  unsigned __int8 nIndex; // [esp+87h] [ebp-24Dh] BYREF
  int v34; // [esp+88h] [ebp-24Ch] BYREF
  unsigned __int8 v35; // [esp+8Eh] [ebp-246h] BYREF
  unsigned __int8 v36; // [esp+8Fh] [ebp-245h] BYREF
  char *v37; // [esp+90h] [ebp-244h] BYREF
  char *Str; // [esp+94h] [ebp-240h] BYREF
  char v39[4]; // [esp+98h] [ebp-23Ch] BYREF
  DWORD v40; // [esp+9Ch] [ebp-238h] BYREF
  CMonster *v41; // [esp+A0h] [ebp-234h]
  char v42[4]; // [esp+A4h] [ebp-230h] BYREF
  DWORD v43; // [esp+A8h] [ebp-22Ch] BYREF
  CMonster *v44; // [esp+ACh] [ebp-228h]
  unsigned __int8 v45; // [esp+B0h] [ebp-224h] BYREF
  unsigned __int8 v46; // [esp+B1h] [ebp-223h] BYREF
  unsigned __int8 v47; // [esp+B2h] [ebp-222h] BYREF
  unsigned __int8 v48; // [esp+B3h] [ebp-221h] BYREF
  char v49; // [esp+B4h] [ebp-220h] BYREF
  unsigned __int8 v50; // [esp+B5h] [ebp-21Fh] BYREF
  unsigned __int8 v51; // [esp+B6h] [ebp-21Eh] BYREF
  unsigned __int8 v52; // [esp+B7h] [ebp-21Dh] BYREF
  CIOObject *v53; // [esp+B8h] [ebp-21Ch]
  int v54; // [esp+BCh] [ebp-218h] BYREF
  CIOObject *v55; // [esp+C0h] [ebp-214h]
  int nStandard; // [esp+C4h] [ebp-210h] BYREF
  CIOObject *v57; // [esp+C8h] [ebp-20Ch]
  char v58[4]; // [esp+CCh] [ebp-208h] BYREF
  CIOObject *v59; // [esp+D0h] [ebp-204h]
  unsigned __int8 v60; // [esp+D7h] [ebp-1FDh] BYREF
  char v61[4]; // [esp+D8h] [ebp-1FCh] BYREF
  CIOObject *v62; // [esp+DCh] [ebp-1F8h]
  CIOObject *v63; // [esp+E0h] [ebp-1F4h]
  char v64[4]; // [esp+E4h] [ebp-1F0h] BYREF
  CIOObject *v65; // [esp+E8h] [ebp-1ECh]
  CIOObject *v66; // [esp+ECh] [ebp-1E8h]
  char v67[4]; // [esp+F0h] [ebp-1E4h] BYREF
  CIOObject *v68; // [esp+F4h] [ebp-1E0h]
  unsigned __int8 v69; // [esp+FBh] [ebp-1D9h] BYREF
  CIOObject *v70; // [esp+FCh] [ebp-1D8h]
  char v71[4]; // [esp+100h] [ebp-1D4h] BYREF
  CIOObject *v72; // [esp+104h] [ebp-1D0h]
  CIOObject *v73; // [esp+108h] [ebp-1CCh]
  char v74[4]; // [esp+10Ch] [ebp-1C8h] BYREF
  CIOObject *v75; // [esp+110h] [ebp-1C4h]
  char v76[4]; // [esp+114h] [ebp-1C0h] BYREF
  CIOObject *v77; // [esp+118h] [ebp-1BCh]
  CIOObject *v78; // [esp+11Ch] [ebp-1B8h]
  CIOObject *v79; // [esp+120h] [ebp-1B4h]
  char v80[4]; // [esp+124h] [ebp-1B0h] BYREF
  int v81; // [esp+128h] [ebp-1ACh] BYREF
  CIOObject *v82; // [esp+12Ch] [ebp-1A8h]
  int a4; // [esp+130h] [ebp-1A4h] BYREF
  unsigned __int8 v84; // [esp+137h] [ebp-19Dh] BYREF
  CIOObject *v85; // [esp+138h] [ebp-19Ch]
  int nGID; // [esp+13Ch] [ebp-198h] BYREF
  int nPID; // [esp+140h] [ebp-194h] BYREF
  unsigned __int8 v88; // [esp+147h] [ebp-18Dh] BYREF
  int nRegularAble; // [esp+148h] [ebp-18Ch] BYREF
  CIOObject *v90; // [esp+14Ch] [ebp-188h]
  int nTempAble; // [esp+150h] [ebp-184h] BYREF
  int nSubLeaderAble; // [esp+154h] [ebp-180h] BYREF
  int nCenturionAble; // [esp+158h] [ebp-17Ch] BYREF
  int nTenAble; // [esp+15Ch] [ebp-178h] BYREF
  CIOObject *v95; // [esp+160h] [ebp-174h]
  unsigned __int8 v96; // [esp+167h] [ebp-16Dh] BYREF
  char *Source; // [esp+168h] [ebp-16Ch] BYREF
  CIOObject *v98; // [esp+16Ch] [ebp-168h]
  CIOObject *v99; // [esp+170h] [ebp-164h]
  CIOObject *v100; // [esp+174h] [ebp-160h]
  CIOObject *v101; // [esp+178h] [ebp-15Ch]
  CIOObject *v102; // [esp+17Ch] [ebp-158h]
  char *Str1; // [esp+180h] [ebp-154h] BYREF
  CIOObject *v104; // [esp+184h] [ebp-150h]
  unsigned __int8 v105; // [esp+18Bh] [ebp-149h] BYREF
  int v106; // [esp+18Ch] [ebp-148h]
  char v107; // [esp+193h] [ebp-141h] BYREF
  int v108; // [esp+194h] [ebp-140h] BYREF
  unsigned __int8 v109; // [esp+19Bh] [ebp-139h] BYREF
  int v110; // [esp+19Ch] [ebp-138h] BYREF
  unsigned __int8 v111; // [esp+1A3h] [ebp-131h] BYREF
  int v112; // [esp+1A4h] [ebp-130h]
  unsigned int v113; // [esp+1A8h] [ebp-12Ch]
  char v114; // [esp+1AEh] [ebp-126h] BYREF
  unsigned __int8 v115; // [esp+1AFh] [ebp-125h] BYREF
  char v116[7]; // [esp+1B0h] [ebp-124h] BYREF
  unsigned __int8 v117; // [esp+1B7h] [ebp-11Dh] BYREF
  int v118; // [esp+1B8h] [ebp-11Ch] BYREF
  int v119; // [esp+1BCh] [ebp-118h] BYREF
  unsigned __int8 v120; // [esp+1C3h] [ebp-111h] BYREF
  int v121; // [esp+1C4h] [ebp-110h] BYREF
  int v122; // [esp+1C8h] [ebp-10Ch] BYREF
  unsigned __int8 v123; // [esp+1CEh] [ebp-106h] BYREF
  unsigned __int8 v124; // [esp+1CFh] [ebp-105h] BYREF
  int v125; // [esp+1D0h] [ebp-104h]
  unsigned __int8 v126; // [esp+1D6h] [ebp-FEh] BYREF
  unsigned __int8 v127; // [esp+1D7h] [ebp-FDh] BYREF
  int m_nId_; // [esp+1D8h] [ebp-FCh] BYREF
  unsigned __int8 nMax_____; // [esp+1DFh] [ebp-F5h] BYREF
  int nStall; // [esp+1E0h] [ebp-F4h] BYREF
  CPlayer *v131; // [esp+1E4h] [ebp-F0h]
  unsigned __int8 bStart; // [esp+1EBh] [ebp-E9h] BYREF
  CIOObject *v133; // [esp+1ECh] [ebp-E8h]
  int m_nId; // [esp+1F0h] [ebp-E4h] BYREF
  unsigned __int8 nGetType; // [esp+1F5h] [ebp-DFh] BYREF
  unsigned __int8 nSetType; // [esp+1F6h] [ebp-DEh] BYREF
  unsigned __int8 nMax____; // [esp+1F7h] [ebp-DDh] BYREF
  int nNPCId___; // [esp+1F8h] [ebp-DCh] BYREF
  unsigned __int8 nMax___; // [esp+1FFh] [ebp-D5h] BYREF
  int nNPCId__; // [esp+200h] [ebp-D4h] BYREF
  unsigned __int8 byMax__; // [esp+207h] [ebp-CDh] BYREF
  int nId_____; // [esp+208h] [ebp-CCh] BYREF
  unsigned __int8 byAns; // [esp+20Fh] [ebp-C5h] BYREF
  int nId____; // [esp+210h] [ebp-C4h] BYREF
  unsigned __int8 nType_; // [esp+217h] [ebp-BDh] BYREF
  int nIID_____; // [esp+218h] [ebp-BCh] BYREF
  int nFromIID; // [esp+21Ch] [ebp-B8h] BYREF
  int nToIID; // [esp+220h] [ebp-B4h] BYREF
  int nIID____; // [esp+224h] [ebp-B0h] BYREF
  int nIID___; // [esp+228h] [ebp-ACh] BYREF
  int nIID__; // [esp+22Ch] [ebp-A8h] BYREF
  int nIID_; // [esp+230h] [ebp-A4h] BYREF
  int nId___; // [esp+234h] [ebp-A0h] BYREF
  tagPOINT ptT; // [esp+238h] [ebp-9Ch] BYREF
  int pNum; // [esp+240h] [ebp-94h] BYREF
  int nIID; // [esp+244h] [ebp-90h] BYREF
  unsigned __int8 byMax_; // [esp+24Bh] [ebp-89h] BYREF
  int nNPCId_; // [esp+24Ch] [ebp-88h] BYREF
  unsigned __int8 byMax; // [esp+253h] [ebp-81h] BYREF
  int nNPCId; // [esp+254h] [ebp-80h] BYREF
  unsigned __int8 byTaxRate; // [esp+25Bh] [ebp-79h] BYREF
  int nTaxRate; // [esp+25Ch] [ebp-78h]
  CCastle *pCastle; // [esp+260h] [ebp-74h]
  int nNPCid; // [esp+264h] [ebp-70h] BYREF
  CNPC *pNPC; // [esp+268h] [ebp-6Ch]
  int nId__; // [esp+26Ch] [ebp-68h] BYREF
  unsigned __int8 byType_; // [esp+273h] [ebp-61h] BYREF
  int nId_; // [esp+274h] [ebp-60h] BYREF
  unsigned __int16 wCook4; // [esp+278h] [ebp-5Ch] BYREF
  unsigned __int16 wCook5; // [esp+27Ch] [ebp-58h] BYREF
  unsigned __int8 byType; // [esp+283h] [ebp-51h] BYREF
  unsigned __int16 wCook1; // [esp+284h] [ebp-50h] BYREF
  unsigned __int16 wCook2; // [esp+288h] [ebp-4Ch] BYREF
  unsigned __int16 wCook6; // [esp+28Ch] [ebp-48h] BYREF
  unsigned __int16 wCook3; // [esp+290h] [ebp-44h] BYREF
  unsigned __int16 wCook7; // [esp+294h] [ebp-40h] BYREF
  int nGState; // [esp+298h] [ebp-3Ch] BYREF
  int a3; // [esp+29Ch] [ebp-38h] BYREF
  unsigned __int8 v179; // [esp+2A3h] [ebp-31h] BYREF
  char *szChat; // [esp+2A4h] [ebp-30h] BYREF
  unsigned __int8 v181; // [esp+2AAh] [ebp-2Ah] BYREF
  unsigned __int8 v182; // [esp+2ABh] [ebp-29h] BYREF
  CSkill *v183; // [esp+2ACh] [ebp-28h]
  unsigned __int8 v184; // [esp+2B3h] [ebp-21h] BYREF
  unsigned __int8 v185; // [esp+2B4h] [ebp-20h] BYREF
  unsigned __int8 v186; // [esp+2B5h] [ebp-1Fh] BYREF
  unsigned __int8 v187; // [esp+2B6h] [ebp-1Eh] BYREF
  unsigned __int8 nSkill; // [esp+2B7h] [ebp-1Dh] BYREF
  int nTargetId; // [esp+2B8h] [ebp-1Ch] BYREF
  unsigned __int8 v190; // [esp+2BFh] [ebp-15h] BYREF
  int nId; // [esp+2C0h] [ebp-14h] BYREF
  unsigned __int8 nKind; // [esp+2C7h] [ebp-Dh] BYREF
  char v193; // [esp+2C8h] [ebp-Ch] BYREF
  char v194; // [esp+2C9h] [ebp-Bh] BYREF
  char v195; // [esp+2CAh] [ebp-Ah] BYREF
  char v196; // [esp+2CBh] [ebp-9h] BYREF
  char v197; // [esp+2CCh] [ebp-8h] BYREF
  char v198; // [esp+2CDh] [ebp-7h] BYREF
  char v199; // [esp+2CEh] [ebp-6h] BYREF
  char byCode; // [esp+2CFh] [ebp-5h] BYREF
  int nZ; // [esp+2D0h] [ebp-4h] BYREF
  char *info_____; // [esp+2E0h] [ebp+Ch]
  char *Srck; // [esp+2E0h] [ebp+Ch]
  char *Srcb; // [esp+2E0h] [ebp+Ch]
  char *Srcl; // [esp+2E0h] [ebp+Ch]
  char *Srcm; // [esp+2E0h] [ebp+Ch]
  char *Srcn; // [esp+2E0h] [ebp+Ch]
  char *Srco; // [esp+2E0h] [ebp+Ch]
  char *info_; // [esp+2E0h] [ebp+Ch]
  char *info; // [esp+2E0h] [ebp+Ch]
  char *info__; // [esp+2E0h] [ebp+Ch]
  char *info____; // [esp+2E0h] [ebp+Ch]
  char *info___; // [esp+2E0h] [ebp+Ch]
  char *Srcd; // [esp+2E0h] [ebp+Ch]
  char *Srce; // [esp+2E0h] [ebp+Ch]
  char *Srct; // [esp+2E0h] [ebp+Ch]
  char *Srcu; // [esp+2E0h] [ebp+Ch]
  char *Srcv; // [esp+2E0h] [ebp+Ch]
  char *Srcf; // [esp+2E0h] [ebp+Ch]
  char *Srcg; // [esp+2E0h] [ebp+Ch]
  char *Srch; // [esp+2E0h] [ebp+Ch]
  char *Srci; // [esp+2E0h] [ebp+Ch]
  char *Srcj; // [esp+2E0h] [ebp+Ch]

  switch ( nType )
  {
    case C2S_START:
      if ( (this->m_bit & 0xB) == 2 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &byCode, &nZ);
        if ( byCode == 1 )
        {
          if ( !this->m_nZ )
            this->m_nZ = nZ;
          CPlayer::GameStart(this);
        }
        else
        {
          CPlayer::Write(this, S2C_CLOSE, "b", 0);
          CSocket::Logout(this->m_pSocket, 0);
        }
      }
      else
      {
        m_UserPort = this->m_pSocket->m_nPort;
        m_UserIP = inet_ntoa(this->m_pSocket->m_addr);
        LOG_NORMAL(
          "Invalid state at CPlayer::Process() Type(%d) UID(%d) Bit(%x) Addr(%s) Port(%d) Player(%p)",
          nType,
          this->m_nUID,
          this->m_bit,
          m_UserIP,
          m_UserPort,
          this);
      }
      return;
    case C2S_EX_GEUMJUN_JAMOJUN:
    case C2S_TOOJUN:
    case C2S_KAL21:
    case C2S_PET:
      return;
    case C2S_ATTACK:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &nKind, &nId);
        if ( CChar::IsGState(this, 0x2000) )
        {
          CChar::SubGState(this, 0x2000);
          this->m_dwNextAction = GetTickCount();
        }
        CPlayer::Attack(this, nKind, nId);
      }
      return;
    case C2S_SKILL:
      if ( (this->m_bit & 9) == 8 )
      {
        info_____ = ScanPacket((char *)packet, (char *)end, "b", &nSkill);
        if ( CChar::IsGState(this, 0x2000) )
        {
          CChar::SubGState(this, 0x2000);
          this->m_dwNextAction = GetTickCount();
        }
        CPlayerSkill::ExcuteSkill(&this->m_skill, nSkill, info_____, (char *)end);
      }
      return;
    case C2S_CHATTING:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "s", &szChat, 129);
        CPlayer::ProcessMsg(this, szChat);
      }
      return;
    case C2S_TELEPORT:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &v179, &a3);
        CPlayer::OnTeleport(this, v179, a3);
      }
      return;
    case C2S_RESTART:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v199);
        if ( v199 )
        {
          if ( GetTickCount() - this->m_dwLastDamage < 0x2710 || CChar::IsMState(this, 32i64) )
            CPlayer::Write(this, S2C_ANS_RESTART, "b", 0);
          else
            CPlayer::Write(this, S2C_ANS_RESTART, "b", 1);
        }
        else
        {
          CPlayer::GameRestart(this);
        }
      }
      return;
    case C2S_MOVE_ON:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bbb", &v196, &v198, &v197);
        CChar::Lock(this);
        if ( CPlayer::CanMove((int)this) )
          CSMap::MovePlayer(this->m_pMap, this, v196, v198, v197, 0, 0);
        CChar::Unlock(this);
      }
      return;
    case C2S_MOVE_END:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bbb", &v193, &v195, &v194);
        CChar::Lock(this);
        if ( CPlayer::CanMove((int)this) )
          CSMap::MovePlayer(this->m_pMap, this, v193, v195, v194, 1, 0);
        CChar::Unlock(this);
      }
      return;
    case C2S_ASKNPC:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nId_);
        CNPC::Reply(nId_, this);
      }
      return;
    case C2S_ITEMLIST:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nNPCid);
        pNPC = CNPC::FindNPC(nNPCid);
        if ( pNPC )
        {
          nTaxRate = 100;
          pCastle = (CCastle *)CCastle::GetCastle(pNPC->m_nCID);
          if ( pCastle )
            nTaxRate = CCastle::GetTaxRate(pCastle);
          CIOObject::Release(pNPC);
          CPlayer::Write(this, S2C_ITEMLIST, "b", (unsigned __int8)nTaxRate);
        }
      }
      return;
    case C2S_BUYITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcm = ScanPacket((char *)packet, (char *)end, "dbb", &nNPCId, &byTaxRate, &byMax);
        CPlayer::BuyItemEx(this, nNPCId, byTaxRate, byMax, Srcm, (char *)end);
      }
      return;
    case C2S_SELLITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcn = ScanPacket((char *)packet, (char *)end, "db", &nNPCId_, &byMax_);
        CPlayer::SellItem(this, nNPCId_, byMax_, Srcn, (char *)end);
      }
      return;
    case C2S_DROPITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "dd", &nIID, &pNum);
        CPlayer::DropItem(this, nIID, pNum);
      }
      return;
    case C2S_GAMEEXIT:
      if ( (this->m_bit & 9) == 8 )
      {
        if ( GetTickCount() - this->m_dwLastDamage < 0x2710 || CChar::IsMState(this, 32i64) )
          CPlayer::Write(this, S2C_ANS_GAMEEXIT, "b", 0);
        else
          CPlayer::Write(this, S2C_ANS_GAMEEXIT, "b", 1);
      }
      return;
    case C2S_SHOWOFFITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        Srco = ScanPacket((char *)packet, (char *)end, "b", &byMax__);
        CPlayer::ShowOffItem(this, byMax__, Srco, (char *)end);
      }
      return;
    case C2S_ACTION:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v127);
        CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, v127);
      }
      return;
    case C2S_UPDATEPROPERTY:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v126);
        if ( v126 <= 4u )
        {
          v125 = CPlayer::GetNeedPoint(this, v126);
          if ( v125 <= 0 || this->m_nPUPoint < v125 )
          {
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 26, v125);
          }
          else
          {
            this->UpdateProperty(this, 23, 0, v125);
            this->UpdateProperty(this, v126, 1, 1);
            CDBSocket::Write(
              S2D_UPDATEPROPERTY,
              "dbwbb",
              this->m_nPID,
              23,
              this->m_nPUPoint,
              v126,
              this->m_prtyBase.nBase[v126]);
          }
        }
      }
      return;
    case C2S_REST:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v124);
        CPlayer::Rest(this, v124);
      }
      return;
    case C2S_PICKUPITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "ddd", &nId___, &ptT, &ptT.y);
        CSMap::PickUpItem(this->m_pMap, this, nId___, &ptT);
      }
      return;
    case C2S_USEITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nIID____);
        CPlayer::UseItem(this, nIID____);
      }
      return;
    case C2S_ASKTRADE:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nId____);
        CPlayer::AskTrade(this, nId____);
      }
      return;
    case C2S_ANS_ASKTRADE:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &byAns, &nId_____);
        CPlayer::OnAskTrade(this, byAns, nId_____);
      }
      return;
    case C2S_CANCELTRADE:
      if ( (this->m_bit & 9) == 8 )
        CPlayer::CancelTrade(this);
      return;
    case C2S_REVIVAL:
      if ( (this->m_bit & 9) == 8 )
      {
        CChar::Lock(this);
        CPlayer::Revival(this);
        this->m_dwNextAction = GetTickCount();
        CChar::Unlock(this);
      }
      return;
    case C2S_SIEGEGUN:
      v27 = 0;
      a7 = 0;
      a8 = 0;
      Srch = ScanPacket((char *)packet, (char *)end, "db", &v27, &a7);
      if ( a7 == 1 )
        ScanPacket(Srch, (char *)end, "b", &a8);
      if ( (*(_WORD *)dword_4E1174 & 0x1000) != 0 )
        CPlayer::SiegeGunProcess((CIOCriticalSection *)this, 0, v27, a7, a8);
      return;
    case C2S_SIEGEGUNSET:
      v25 = 0;
      v26 = 0;
      ScanPacket((char *)packet, (char *)end, "db", &v25, &v26);
      if ( (*(_WORD *)dword_4E1174 & 0x1000) != 0 )
        CPlayer::SiegeGunProcess((CIOCriticalSection *)this, 1, v25, v26, 0);
      return;
    case C2S_SIEGEGUNCONTROL:
      *(_DWORD *)v24 = 0;
      Srci = ScanPacket((char *)packet, (char *)end, "b", v24);
      if ( (*(_WORD *)dword_4E1174 & 0x1000) != 0 )
        CPlayer::SiegeGunControl((CIOCriticalSection *)this, *(int *)v24, Srci, end);
      return;
    case C2S_LEARNSKILL:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v186);
        if ( this->m_nSUPoint > 0 )
          CPlayerSkill::LearnSkill(&this->m_skill, v186);
      }
      return;
    case C2S_SKILLUP:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v185);
        if ( this->m_nSUPoint > 0 )
          CPlayerSkill::SkillUp(&this->m_skill, v185);
      }
      return;
    case C2S_PRESKILL:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &v190, &nTargetId);
        if ( CChar::IsGState(this, 0x2000) )
        {
          CChar::SubGState(this, 0x2000);
          this->m_dwNextAction = GetTickCount();
        }
        if ( v190 < 0x5Du && CPlayerSkill::PreSkill(&this->m_skill, v190, nTargetId) )
          CChar::WriteInSight(this, S2C_ACTION, "dbbd", this->m_nId, 5, v190, nTargetId);
      }
      return;
    case C2S_ASKPARTY:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &v121);
        CPlayer::AskParty(this, v121);
      }
      return;
    case C2S_ANS_ASKPARTY:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &v120, &v119);
        CPlayer::OnAskParty(this, v120, v119);
      }
      return;
    case C2S_GUILD:
      if ( (this->m_bit & 9) == 8 )
      {
        Srce = ScanPacket((char *)packet, (char *)end, "b", &v107);
        v106 = 0;
        switch ( v107 )
        {
          case 1:
            v106 = CGuild::CreateTrial(this);
            break;
          case 3:
            ScanPacket(Srce, (char *)end, "b", &v105);
            v104 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v104 )
            {
              v106 = CGuild::CreateConsent((CGuild *)v104, this, v105);
              CIOObject::Release(v104, &v104[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 5:
            ScanPacket(Srce, (char *)end, "s", &Str1, 15);
            v102 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v102 )
            {
              v106 = CGuild::CreateGuildName((CGuild *)this, (CPlayer *)Str1);
              CIOObject::Release(v102, &v102[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 7:
            v101 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v101 )
            {
              v106 = CGuild::AdminInfo((CGuild *)v101, this);
              CIOObject::Release(v101, &v101[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 8:
            v100 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v100 )
            {
              v106 = CGuild::BasicInfo((CGuild *)v100, this);
              CIOObject::Release(v100, &v100[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 10:
            v99 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v99 )
            {
              v106 = CGuild::Secession((CGuild *)v99, this);
              CIOObject::Release(v99, &v99[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 11:
            ScanPacket(Srce, (char *)end, "s", &Source, 181);
            v98 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v98 )
            {
              v106 = CGuild::SetTodayMessage((CGuild *)v98, this, Source);
              CIOObject::Release(v98, &v98[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 12:
            ScanPacket(Srce, (char *)end, "b", &v96);
            v95 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v95 )
            {
              v106 = CGuild::SetExpADD((CGuild *)v95, this, v96);
              CIOObject::Release(v95, &v95[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 13:
            ScanPacket(
              Srce,
              (char *)end,
              "ddddd",
              &nSubLeaderAble,
              &nCenturionAble,
              &nTenAble,
              &nRegularAble,
              &nTempAble);
            v90 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v90 )
            {
              v106 = CGuild::SetSkillAble(
                       (CGuild *)v90,
                       this,
                       nSubLeaderAble,
                       nCenturionAble,
                       nTenAble,
                       nRegularAble,
                       nTempAble);
              CIOObject::Release(v90, &v90[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 15:
            ScanPacket(Srce, (char *)end, "ddb", &nGID, &nPID, &v88);
            v106 = CGuild::ConfluxAnswer(this, nGID, nPID, v88);
            break;
          case 16:
            v85 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v85 )
            {
              v106 = CGuild::Dissolution((CGuild *)v85, this);
              CIOObject::Release(v85, &v85[2].m_nTimerRef);
            }
            else
            {
              v106 = 1;
            }
            break;
          case 18:
            ScanPacket(Srce, (char *)end, "ddb", &v81, &a4, &v84);
            v82 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v82 )
            {
              v106 = CGuild::AllianceOfferAnswer((int)v82, (int)this, v81, a4, v84);
              CIOObject::Release(v82, &v82[2].m_nTimerRef);
            }
            break;
          case 19:
            ScanPacket(Srce, (char *)end, "d", v80);
            if ( stru_4E35B4.m_nRef && stru_4E35B4.m_nRef != 2 )
            {
              v106 = 70;
            }
            else
            {
              v79 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
              if ( v79 )
              {
                v78 = CNPC::FindNPC(*(int *)v80);
                if ( v78 )
                {
                  v106 = CGuild::WarDeclare((int)v79, (int)this, (int)v78[29].__vftable);
                  CIOObject::Release(v78);
                }
                CIOObject::Release(v79, &v79[2].m_nTimerRef);
              }
              else
              {
                v106 = 22;
              }
            }
            break;
          case 20:
            ScanPacket(Srce, (char *)end, "d", v76);
            v77 = CNPC::FindNPC(*(int *)v76);
            if ( v77 )
            {
              CGuild::WarDelcareList((int)this, (char)v77[29].__vftable);
              CIOObject::Release(v77);
            }
            break;
          case 21:
            ScanPacket(Srce, (char *)end, "d", v74);
            v75 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v75 )
            {
              v73 = CNPC::FindNPC(*(int *)v74);
              if ( v73 )
              {
                if ( v73[28].m_nRef == 16 && Distance(&this->m_ptPixel, (const tagPOINT *)&v73[20].m_nGeneralRef) <= 64 )
                  v106 = CGuild::TrialUnfurlStandard(v75, (int)this, (unsigned int)v73[29].__vftable);
                CIOObject::Release(v73);
              }
              CIOObject::Release(v75, &v75[2].m_nTimerRef);
            }
            break;
          case 22:
            if ( CChar::IsGState(this, 1024) )
            {
              this->SubGState(this, 1024);
              v4 = CPlayer::GetGID((CIOCriticalSection *)this);
              CCastle::UnfurlStandardCancel(v4);
            }
            break;
          case 23:
            ScanPacket(Srce, (char *)end, "d", v71);
            v72 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v72 )
            {
              v70 = CNPC::FindNPC(*(int *)v71);
              if ( v70 )
              {
                v106 = CGuild::CastleInfo(v72, (int)this, (unsigned int)v70[29].__vftable);
                CIOObject::Release(v70);
              }
              CIOObject::Release(v72, &v72[2].m_nTimerRef);
            }
            break;
          case 24:
            ScanPacket(Srce, (char *)end, "db", v67, &v69);
            v68 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v68 )
            {
              v66 = CNPC::FindNPC(*(int *)v67);
              if ( v66 )
              {
                v106 = CGuild::TaxRateControl((int)this, (unsigned int)v66[29].__vftable, v69);
                CIOObject::Release(v66);
              }
              CIOObject::Release(v68, &v68[2].m_nTimerRef);
            }
            break;
          case 25:
            ScanPacket(Srce, (char *)end, "d", v61);
            v62 = CNPC::FindNPC(*(int *)v61);
            if ( v62 )
            {
              v106 = CGuild::CastleGateNPC((int)this, (unsigned int)v62[29].__vftable, (int)v62[28].__vftable);
              CIOObject::Release(v62);
            }
            break;
          case 26:
            ScanPacket(Srce, (char *)end, "db", v58, &v60);
            v59 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v59 )
            {
              v57 = CNPC::FindNPC(*(int *)v58);
              if ( v57 )
              {
                v106 = CGuild::CastleSetGateLmit(this, v57[29].__vftable, v60);
                CIOObject::Release(v57);
              }
              CIOObject::Release(v59, &v59[2].m_nTimerRef);
            }
            break;
          case 27:
            ScanPacket(Srce, (char *)end, "d", v64);
            v65 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v65 )
            {
              v63 = CNPC::FindNPC(*(int *)v64);
              if ( v63 )
              {
                v106 = CGuild::TaxLevy(v65, (int)this, (unsigned int)v63[29].__vftable);
                CIOObject::Release(v63);
              }
              CIOObject::Release(v65, &v65[2].m_nTimerRef);
            }
            break;
          case 28:
            ScanPacket(Srce, (char *)end, "d", &nStandard);
            v55 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
            if ( v55 )
            {
              v106 = CGuild::CheckStandard((CGuild *)v55, this, nStandard);
              CIOObject::Release(v55, &v55[2].m_nTimerRef);
            }
            break;
          case 29:
            ScanPacket(Srce, (char *)end, "d", &v54);
            CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
            if ( this->m_pMoney && this->m_pMoney->m_nNum >= 500000 )
            {
              CIOCriticalSection::Leave((int)&this->m_lockItem);
              v53 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
              if ( v53 )
              {
                v106 = CGuild::SetStandard((CGuild *)v53, this, v54);
                CIOObject::Release(v53, &v53[2].m_nTimerRef);
              }
            }
            else
            {
              CIOCriticalSection::Leave((int)&this->m_lockItem);
            }
            break;
          default:
            break;
        }
        if ( v106 )
          CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)v106);
      }
      return;
    case C2S_LEAVEPARTY:
      if ( (this->m_bit & 9) == 8 )
        CPlayer::LeaveParty(this);
      return;
    case C2S_EXILEPARTY:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &v118);
        CPlayer::ExileParty((int)this, v118);
      }
      return;
    case C2S_PUTINSTORAGE:
      if ( (this->m_bit & 9) == 8 )
      {
        info_ = ScanPacket((char *)packet, (char *)end, "db", &nNPCId__, &nMax___);
        CPlayer::PutInStorage(this, nNPCId__, nMax___, info_, (char *)end);
      }
      return;
    case C2S_PUTOUTSTORAGE:
      if ( (this->m_bit & 9) == 8 )
      {
        info = ScanPacket((char *)packet, (char *)end, "db", &nNPCId___, &nMax____);
        CPlayer::PutOutStorage(this, nNPCId___, nMax____, info, (char *)end);
      }
      return;
    case C2S_QUEST:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nGState);
        if ( CChar::IsGState(this, 256) && nGState && nGState == 0x17710003 )
          CPlayer::Write(this, S2C_MESSAGEPK, "b", 9);
        else
          CQuest::CallProcess(nGState, this);
      }
      return;
    case C2S_STORAGEINFO:
      if ( (this->m_bit & 9) == 8 )
        CPlayer::StorageInfo(this);
      return;
    case C2S_ANNUALEVENTREST:
      if ( (dword_4E1178 & 0x100) != 0 )
      {
        CAuthSocket::Write(S2A_EVENT_NPC, "dd", this->m_nUID, this->m_nPID);
        CDBSocket::Write(S2D_EVENT_NPC, "dd", this->m_nPID, 0);
      }
      return;
    case C2S_SAVEREVIVALPT:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &v117, v116);
        CPlayer::SaveRevivalPt(this, v117, 0);
      }
      return;
    case C2S_ENCHANTITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "dd", &nFromIID, &nToIID);
        CPlayer::EnchantItem(this, nFromIID, nToIID);
      }
      return;
    case C2S_SETSTALLINFO:
      if ( (this->m_bit & 9) == 8 )
      {
        info__ = ScanPacket((char *)packet, (char *)end, "b", &nSetType);
        CPlayer::SetStallInfo(this, nSetType, info__, (char *)end);
      }
      return;
    case C2S_MOD2NDJOB:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v36);
        if ( this->m_nLevel >= 50
          && this->m_dwSpecialty >= 7
          && CPlayer::FindItem(this, 657, 1)
          && (this->m_nClass || v36 <= 1u)
          && (this->m_nClass != 1 || v36 >= 4u)
          && (this->m_nClass != 2 || v36 == 2 || v36 == 3) )
        {
          CChar::Lock(this);
          if ( CPlayer::RemoveItem(this, 9, 657, 1) )
          {
            v36 &= 1u;
            if ( v36 )
              this->m_dwSpecialty = 11;
            else
              this->m_dwSpecialty = 7;
            CPlayerSkill::Redis2ndJobSkill(&this->m_skill);
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 38, this->m_dwSpecialty);
            CDBSocket::Write(S2D_SAVESPECIALTY, "db", this->m_nPID, 1 << (v36 + 3));
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 106, 0);
            CChar::WriteInSight(this, S2C_EFFECT, "db", this->m_nId, 28);
          }
          else
          {
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 106, 1);
          }
          CChar::Unlock(this);
        }
        else
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 106, 1);
        }
      }
      return;
    case C2S_UPPER_CHANCE_STONE:
      if ( (this->m_bit & 9) == 8 )
      {
        if ( CPlayer::FindItem(this, 661, 1) )
        {
          CChar::Lock(this);
          if ( CPlayer::RemoveItem(this, 9, 661, 1) )
          {
            CPlayerSkill::UpperChanceStone(&this->m_skill);
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 110, 0);
            CChar::WriteInSight(this, S2C_EFFECT, "db", this->m_nId, 29);
          }
          else
          {
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 110, 1);
          }
          CChar::Unlock(this);
        }
        else
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 110, 1);
        }
      }
      return;
    case C2S_PLAYER_ANIMATION:
      if ( (this->m_bit & 9) == 8 )
      {
        v5 = ScanPacket((char *)packet, (char *)end, "d", &v34);
        ScanPacket(v5, (char *)end, "b", &v35);
        CChar::WriteInSight(this, S2C_PLAYER_ANIMATION, "db", v34, v35);
      }
      return;
    case C2S_TRADEITEM:
      if ( (this->m_bit & 9) == 8 )
        CPlayer::TradeAgreed(this);
      return;
    case C2S_TRASHITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nIID_);
        CPlayer::TrashItem(this, nIID_);
      }
      return;
    case C2S_FRD:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcf = ScanPacket((char *)packet, (char *)end, "b", &v46);
        if ( (dword_4E1174[0] & 0x40) != 0 )
        {
          if ( !v46 || v46 == 1 || v46 == 4 )
            CPlayer::FRDProcess((int)this, v46, Srcf, end);
          else
            LOG_ERR(
              "C2S_FRD wrong Type    PID(%d) Char(%s) UID(%d) Type(%d)",
              this->m_nPID,
              this->m_szName,
              this->m_nUID,
              v46);
        }
      }
      return;
    case C2S_PUTONITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nIID__);
        CPlayer::PutOnItem(this, nIID__);
      }
      return;
    case C2S_PUTOFFITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &nIID___);
        CPlayer::PutOffItem(this, nIID___);
      }
      return;
    case C2S_SWITCHSTALL:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &bStart);
        CPlayer::SwitchStall(this, bStart);
      }
      return;
    case C2S_EVENT:
      if ( (this->m_bit & 9) == 8 )
      {
        info___ = ScanPacket((char *)packet, (char *)end, "b", &v115);
        CPlayer::ProcessEvent((CIOCriticalSection *)this, v115, info___, end);
      }
      return;
    case C2S_QUESTJOB_END:
      if ( (this->m_bit & 9) == 8 )
        this->SubGState(this, 96);
      return;
    case C2S_GETSTALLINFO:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &nGetType, &m_nId);
        if ( this->m_nId == m_nId )
        {
          CPlayer::GetStallInfo(this, nGetType, this);
        }
        else
        {
          v133 = CPlayer::FindPlayer(m_nId);
          if ( v133 )
          {
            CPlayer::GetStallInfo((CPlayer *)v133, nGetType, this);
            CIOObject::Release(v133, (volatile int *)&v133[22]);
          }
        }
      }
      return;
    case C2S_BUYITEMATSTALL:
      if ( (this->m_bit & 9) == 8 )
      {
        info____ = ScanPacket((char *)packet, (char *)end, "ddb", &m_nId_, &nStall, &nMax_____);
        v131 = (CPlayer *)CPlayer::FindPlayer(m_nId_);
        if ( v131 )
        {
          if ( nMax_____ )
            CPlayer::BuyItemAtStall(v131, this, nStall, nMax_____, info____, (char *)end);
          CIOObject::Release(v131, &v131->m_nFindRef);
        }
      }
      return;
    case C2S_MORA:
      if ( (this->m_bit & 9) != 8 || (dword_4E1178 & 4) == 0 )
        return;
      Srcd = ScanPacket((char *)packet, (char *)end, "b", &v114);
      if ( v114 == 3 )
      {
        if ( this->m_nLevel >= 5 )
        {
          if ( CPlayer::EventIsMoraTime(this) )
            CPlayer::Write(this, S2C_MORA, "b", 5);
          else
            CPlayer::Write(this, S2C_MORA, "b", 6);
        }
        else
        {
          CPlayer::Write(this, S2C_MORA, "b", 8);
        }
        return;
      }
      if ( v114 == 4 && CPlayer::EventIsMoraTime(this) )
      {
        ScanPacket(Srcd, (char *)end, "b", &v111);
        v112 = Random(0, 2);
        v113 = 0;
        if ( v111 )
        {
          if ( v111 == 1 )
          {
            if ( v112 )
            {
              if ( v112 == 2 )
                v113 = CPlayer::EventSetMora((CIOCriticalSection *)this, 3);
              goto LABEL_200;
            }
          }
          else
          {
            if ( v111 != 2 )
            {
              v113 = CPlayer::EventSetMora((CIOCriticalSection *)this, 2);
              goto LABEL_200;
            }
            if ( v112 != 1 )
            {
              if ( !v112 )
                v113 = CPlayer::EventSetMora((CIOCriticalSection *)this, 3);
              goto LABEL_200;
            }
          }
        }
        else if ( v112 != 2 )
        {
          if ( v112 == 1 )
            v113 = CPlayer::EventSetMora((CIOCriticalSection *)this, 3);
          goto LABEL_200;
        }
        v113 = CPlayer::EventSetMora((CIOCriticalSection *)this, 1);
LABEL_200:
        CPlayer::Write(this, S2C_MORA, "bbbb", 7, v111, v112, v113);
      }
      return;
    case C2S_COOKING:
      if ( (this->m_bit & 9) == 8 )
      {
        wCook1 = 0;
        wCook2 = 0;
        wCook3 = 0;
        wCook4 = 0;
        wCook5 = 0;
        wCook6 = 0;
        wCook7 = 0;
        Srcb = ScanPacket((char *)packet, (char *)end, "b", &byType);
        if ( byType )
        {
          if ( byType == 1 )
          {
            ScanPacket(Srcb, (char *)end, "www", &wCook1, &wCook2, &wCook3);
          }
          else
          {
            LOG_ERR("Wrong Packet at C2S_COOKING PID :%d , UID :%d", this->m_nPID, this->m_nUID);
            CPlayer::Write(this, S2C_CLOSE, "b", 1);
            CSocket::Logout(this->m_pSocket, 1);
          }
        }
        else
        {
          ScanPacket(Srcb, (char *)end, "wwwwwww", &wCook1, &wCook2, &wCook3, &wCook4, &wCook5, &wCook6, &wCook7);
        }
        this->m_nCooking[0] = wCook1;
        this->m_nCooking[1] = wCook2;
        this->m_nCooking[2] = wCook3;
        this->m_nCooking[3] = wCook4;
        this->m_nCooking[4] = wCook5;
        this->m_nCooking[5] = wCook6;
        this->m_nCooking[6] = wCook7;
        if ( CChar::IsGState(this, 64) || !CPlayer::IsCooking((CIOCriticalSection *)this, byType) )
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 51, byType);
        }
        else
        {
          this->m_nQuestJob = byType + 1;
          this->m_dwQuestJobTick = GetTickCount() + 10000;
          this->AddGState(this, 64);
          CPlayer::Write(this, S2C_MESSAGE, "b", 49);
        }
      }
      return;
    case C2S_ANS_REVIVALSKILL:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &v123, &v122);
        CPlayer::RevivalSkill(this, v123, v122);
      }
      return;
    case C2S_SKILLREDISTRIBUTE:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v184);
        if ( v184 == 4 )
        {
          v183 = this->m_skill.m_pSkill[v184];
          if ( v183 && CPlayer::RemoveItem(this, 9, 362, 1) && v183->Redistribute(v183, this) )
            operator delete(v183);
        }
        else
        {
          CPlayerSkill::Redistribute(&this->m_skill, v184);
        }
      }
      return;
    case C2S_BOKJOOMUNY:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &nIndex);
        if ( nIndex == 2 )
        {
          CPlayer::AddEState(this, 512);
        }
        else if ( CPlayer::IsEState(this, 512) )
        {
          CPlayer::SubEState(this, 512);
          if ( CPlayer::GetInvenSize((char *)this) < 60 )
          {
            a2a = (int)CPlayer::_FindItem(this, (nIndex != 0) + 663, 1);
            if ( a2a )
              CPlayer::ExchangeBoddariToItem(nIndex, a2a);
          }
          else
          {
            CPlayer::Write(this, S2C_MESSAGE, "b", 40);
            CPlayer::Write(this, S2C_MESSAGE, "b", 17);
          }
        }
      }
      return;
    case C2S_DANJI:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v31);
        if ( v31 == 2 )
        {
          CPlayer::AddEState(this, 1024);
        }
        else if ( CPlayer::IsEState(this, 1024) )
        {
          CPlayer::SubEState(this, 1024);
          if ( CPlayer::GetInvenSize((char *)this) < 60 )
          {
            v30 = CPlayer::_FindItem(this, (v31 != 0) + 689, 1);
            if ( v30 )
              CPlayer::ExchangeDanjiToItem((CIOCriticalSection *)this, v31, (CPlayer *)v30);
          }
          else
          {
            CPlayer::Write(this, S2C_MESSAGE, "b", 40);
            CPlayer::Write(this, S2C_MESSAGE, "b", 17);
          }
        }
      }
      return;
    case C2S_INITSTAT:
      if ( (this->m_bit & 9) == 8 )
        CPlayer::InitStat(this);
      return;
    case C2S_PKBULLETININFO:
      if ( (this->m_bit & 9) == 8 && (dword_4E1174[0] & 1) != 0 )
        CPlayer::PKBulletinInfoSend(this);
      return;
    case C2S_ASKPVP:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &v110);
        CPlayer::AskPvP((CIOCriticalSection *)this, v110);
      }
      return;
    case C2S_ANS_ASKPVP:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &v109, &v108);
        CPlayer::OnAskPvP((CIOCriticalSection *)this, v109, v108);
      }
      return;
    case C2S_TRANSFORM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bb", &v51, &v52);
        CPlayer::Transform((int)this, v51, v52);
      }
      return;
    case C2S_BLESS:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bb", &v182, &v181);
        CPlayer::Bless(this, v182, v181);
      }
      return;
    case C2S_TRANSFORMSKILL:
      if ( (this->m_bit & 9) == 8 )
      {
        Srck = ScanPacket((char *)packet, (char *)end, "b", &v187);
        CPlayerSkill::ExcuteTransformSkill(&this->m_skill, v187, Srck, (char *)end);
      }
      return;
    case C2S_MLM:
      if ( (this->m_bit & 9) == 8 )
      {
        Srct = ScanPacket((char *)packet, (char *)end, "b", &v50);
        CPlayer::MLMProcess(this, v50, Srct, end);
      }
      return;
    case C2S_PKSTATUS:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "b", &v49);
        if ( v49 )
        {
          if ( !CChar::IsGState(this, 2048) )
            this->AddGState(this, 2048);
        }
        else if ( CChar::IsGState(this, 2048) )
        {
          this->SubGState(this, 2048);
        }
      }
      return;
    case C2S_SHORTCUT:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcu = ScanPacket((char *)packet, (char *)end, "b", &v48);
        CPlayer::Shortcut(this, v48, Srcu, end);
      }
      return;
    case C2S_SETMYTELPT:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcv = ScanPacket((char *)packet, (char *)end, "b", &v47);
        CPlayer::SetMyTelPt((int *)this, v47, Srcv, end);
      }
      return;
    case C2S_UPGRADEITEM:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "bd", &nType_, &nIID_____);
        CPlayer::UpgradeItem(this, nType_, nIID_____);
      }
      return;
    case C2S_MAIL:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcg = ScanPacket((char *)packet, (char *)end, "b", &v45);
        if ( (*(_WORD *)dword_4E1174 & 0x400) != 0 )
        {
          if ( !v45 || v45 == 2 || v45 == 6 || v45 == 8 || v45 == 9 || v45 == 10 )
            CPlayer::MAILProcess(this, v45, Srcg, end);
          else
            LOG_ERR(
              "C2S_MAIL wrong Type    PID(%d) Char(%s) UID(%d) Type(%d)",
              this->m_nPID,
              this->m_szName,
              this->m_nUID,
              v45);
        }
      }
      return;
    case C2S_CANCELITEMMONSTER:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &v40);
        v41 = CMonster::FindMonster(v40);
        if ( v41 )
        {
          v41->Damage(v41, this, 1, (int *)v39, (int *)v39, (int *)v39, 0);
          CIOObject::Release(v41, &v41->m_nFindRef);
        }
      }
      return;
    case C2S_GETITEMMONSTER:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "d", &v43);
        v44 = CMonster::FindMonster(v43);
        if ( v44 )
        {
          v44->Damage(v44, this, 0, (int *)v42, (int *)v42, (int *)v42, 0);
          CIOObject::Release(v44, &v44->m_nFindRef);
        }
      }
      return;
    case C2S_CHANGEGUILDNAME:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "s", &v37, 15);
        CPlayer::ChangeGuildName((int)this, v37);
      }
      return;
    case C2S_CHANGEPLAYERNAME:
      if ( (this->m_bit & 9) == 8 )
      {
        ScanPacket((char *)packet, (char *)end, "s", &Str, 15);
        CPlayer::ChangePlayerName((char *)this, Str);
      }
      return;
    case C2S_NPC:
      Srcl = ScanPacket((char *)packet, (char *)end, "db", &nId__, &byType_);
      CPlayer::NPCProcess(this, nId__, byType_, (int)Srcl, end);
      return;
    case C2S_MIXING:
      if ( (this->m_bit & 9) == 8 )
      {
        Srcj = ScanPacket((char *)packet, (char *)end, "b", &v23);
        if ( v23 )
        {
          if ( v23 == 1 )
          {
            ScanPacket(Srcj, (char *)end, "ddddd", &v15, &v18, &v16, &v14, &v17);
            CPlayer::MixItem(this, v15, v18, v16, v14, v17);
          }
          else if ( v23 == 2 )
          {
            ScanPacket(Srcj, (char *)end, "ddddd", &v10, &v13, &v11, &v9, &v12);
            CPlayer::EnforceItem((int)this, 1, v10, v13, v11, v9, v12);
          }
        }
        else
        {
          ScanPacket(Srcj, (char *)end, "dddd", &v20, &v22, &v21, &a6);
          CPlayer::EnforceItem((int)this, 0, v20, v22, v21, a6, 0);
        }
      }
      return;
    default:
      LOG_ERR("Invalid packet type at CPlayer::Process() Type(%d) UID(%d) bit(%x)", nType, this->m_nUID, this->m_bit);
      return;
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00456720) --------------------------------------------------------
int __thiscall CPlayer::GetInvenSize(char *this)
{
  int v1; // eax
  int v3; // [esp+0h] [ebp-4h]

  v1 = unknown_libname_10(this + 1068, this);
  return v1 - *(_DWORD *)(v3 + 1104);
}
// 456738: variable 'v3' is possibly undefined

//----- (00456750) --------------------------------------------------------
void __stdcall CPlayer::ExchangeBoddariToItem(int a1, int a2)
{
  CIOCriticalSection *v2; // ecx
  CIOCriticalSection *v3; // [esp+0h] [ebp-8h]
  int v4; // [esp+4h] [ebp-4h]

  v3 = v2;
  v4 = Random(1, 100000);
  if ( v4 > 94450 )
  {
    if ( a1 )
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 31, 10000);
    else
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 31, 20000);
    return;
  }
  if ( v4 > 74450 )
  {
    if ( a1 )
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 48, 10);
    else
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 48, 20);
    return;
  }
  if ( v4 <= 39450 )
  {
    if ( v4 > 24450 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 206, 1);
        return;
      }
      goto LABEL_15;
    }
    if ( v4 > 19450 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 207, 1);
        return;
      }
      goto LABEL_19;
    }
    if ( v4 > 4450 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 517, 1);
        return;
      }
LABEL_15:
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 447, 1);
      return;
    }
    if ( v4 > 450 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 638, 1);
        return;
      }
LABEL_19:
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 241, 1);
      return;
    }
    if ( v4 > 400 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 220, 1);
        return;
      }
LABEL_31:
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 221, 1);
      return;
    }
    if ( v4 > 300 )
    {
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 327, 1);
      return;
    }
    if ( v4 > 200 )
    {
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 331, 1);
      return;
    }
    if ( v4 > 120 )
    {
      CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 329, 1);
      return;
    }
    if ( v4 <= 50 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 523, 1);
        return;
      }
    }
    else if ( a1 )
    {
      goto LABEL_31;
    }
    CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 332, 1);
    return;
  }
  if ( a1 )
    CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 31, 1000);
  else
    CPlayer::ExchahgeItem(v3, (CPlayer *)a2, 1, 2, 31, 2000);
}
// 456756: variable 'v2' is possibly undefined

//----- (00456AD0) --------------------------------------------------------
void __thiscall CPlayer::ExchahgeItem(CIOCriticalSection *this, CPlayer *a2, int a3, int a4, int a5, int a6)
{
  CItem *item; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&this[31].m_dwEIP[1]);
  if ( !((int (__thiscall *)(CPlayer *, CIOCriticalSection *, int, int))a2->SubMStateEx)(a2, this, 9, -a3) )
    CPlayer::_OutofInven((CPlayer *)this, (CItem *)a2);
  for ( i = 0; i < 5; ++i )
  {
    item = CItem::CreateItem(a5, 0, a6, -1);
    if ( item )
    {
      if ( CPlayer::_InsertItem((CPlayer *)this, a4, item) != 1 )
      {
        CBase::Delete(item);
        LOG_ERR(
          "INSERT_FAIL at CPlayer::ExchahgeItem() While Creating Item PID(%d) NewItemIndex(%d) NewItemNum(%d) ",
          this[14].m_critical_section.LockCount,
          a5,
          a6);
      }
      break;
    }
    LOG_ERR(
      "Create Item Fail at CPlayer::ExchahgeItem() PID(%d) NewItemIndex(%d) NewItemNum(%d) ",
      this[14].m_critical_section.LockCount,
      a5,
      a6);
  }
  CIOCriticalSection::Leave((int)&this[31].m_dwEIP[1]);
}

//----- (00456BC0) --------------------------------------------------------
int __thiscall CPlayer::GetNeedPoint(CPlayer *this, int nProperty)
{
  int nCurPoint; // [esp+4h] [ebp-4h]

  nCurPoint = this->m_prtyBase.nBase[nProperty];
  if ( nCurPoint >= 250 )
    return 0;
  if ( !this->m_nClass && !nProperty || this->m_nClass == 1 && nProperty == 2 || this->m_nClass == 2 && nProperty == 4 )
    return dword_4D7D48[nCurPoint];             // Arrays of how much stats points used per Level -HighGamer
  return dword_4D7960[nCurPoint];               // Arrays of how much stats points used per Level -HighGamer
}

//----- (00456C40) --------------------------------------------------------
int __thiscall CPlayer::OnLoadPlayer(void *this, _BYTE *a2)
{
  int result; // eax
  char *v3; // eax
  _BYTE *v4; // eax
  _BYTE *v5; // eax
  _WORD *v6; // eax
  _WORD *v7; // eax
  _DWORD *v8; // eax
  _BYTE *v9; // eax
  _BYTE *v10; // eax
  _BYTE *v11; // eax
  _BYTE *v12; // eax
  _BYTE *v13; // eax
  _BYTE *v14; // eax
  _WORD *v15; // eax
  _WORD *v16; // eax
  _WORD *v17; // eax
  _WORD *v18; // eax
  _WORD *v19; // eax
  _BYTE *v20; // eax
  _DWORD *v21; // eax
  std::pair<int,CScriptToCookBoard::tBaseTable> *v22; // eax
  int v23; // ecx
  int v24; // eax
  _DWORD *v25; // [esp+0h] [ebp-B0h]
  _DWORD *v26; // [esp+4h] [ebp-ACh]
  unsigned int v27; // [esp+8h] [ebp-A8h]
  CMemory **v29; // [esp+10h] [ebp-A0h]
  CMemory **v30; // [esp+14h] [ebp-9Ch]
  char v31[12]; // [esp+18h] [ebp-98h] BYREF
  char v32[8]; // [esp+24h] [ebp-8Ch] BYREF
  int v33[8]; // [esp+2Ch] [ebp-84h] BYREF
  int a3; // [esp+4Ch] [ebp-64h] BYREF
  int a2a; // [esp+50h] [ebp-60h] BYREF
  int ii; // [esp+54h] [ebp-5Ch]
  _DWORD *v37; // [esp+58h] [ebp-58h]
  int n; // [esp+5Ch] [ebp-54h]
  _DWORD *v39; // [esp+60h] [ebp-50h]
  int m; // [esp+64h] [ebp-4Ch]
  char v41[4]; // [esp+68h] [ebp-48h] BYREF
  char v42; // [esp+6Ch] [ebp-44h]
  int _Val1; // [esp+70h] [ebp-40h] BYREF
  int v44; // [esp+74h] [ebp-3Ch] BYREF
  int v45; // [esp+78h] [ebp-38h] BYREF
  int l; // [esp+7Ch] [ebp-34h]
  LONG v47; // [esp+80h] [ebp-30h]
  int k; // [esp+84h] [ebp-2Ch]
  CItem *item; // [esp+88h] [ebp-28h]
  int j; // [esp+8Ch] [ebp-24h]
  int i; // [esp+90h] [ebp-20h]
  unsigned __int8 v52; // [esp+96h] [ebp-1Ah] BYREF
  unsigned __int8 v53; // [esp+97h] [ebp-19h] BYREF
  tagRECT ptP; // [esp+98h] [ebp-18h] BYREF
  int v55; // [esp+A8h] [ebp-8h] BYREF
  int nGID; // [esp+ACh] [ebp-4h] BYREF

  CChar::Lock((CChar *)this);
  if ( CPlayer::IsPBit((CPlayer *)this, 4) )
  {
    CChar::Unlock((CChar *)this);
    result = 0;
  }
  else
  {
    ptP.right = (LONG)GetNumeric<unsigned char>(a2, (_BYTE *)this + 456);
    if ( *((_DWORD *)this + 114) == 1 )
    {
      CPlayer::Write((CPlayer *)this, S2C_MESSAGE, "b", 6);
      CChar::Unlock((CChar *)this);
      result = 0;
    }
    else
    {
      v3 = GetString((char *)ptP.right, (char *)this + 32);
      v4 = GetNumeric<unsigned char>(v3, (_BYTE *)this + 460);
      v5 = GetNumeric<unsigned char>(v4, (_BYTE *)this + 464);
      v6 = GetNumeric<unsigned char>(v5, (_BYTE *)this + 60);
      v7 = GetNumeric<short>(v6, (_WORD *)this + 234);
      v8 = sub_47A220(v7, (_DWORD *)this + 118);
      v9 = GetNumeric<int>(v8, (_DWORD *)this + 120);
      v10 = GetNumeric<unsigned char>(v9, (_BYTE *)this + 536);
      v11 = GetNumeric<unsigned char>(v10, (_BYTE *)this + 64);
      v12 = GetNumeric<unsigned char>(v11, (_BYTE *)this + 68);
      v13 = GetNumeric<unsigned char>(v12, (_BYTE *)this + 72);
      v14 = GetNumeric<unsigned char>(v13, (_BYTE *)this + 76);
      v15 = GetNumeric<unsigned char>(v14, (_BYTE *)this + 80);
      v16 = GetNumeric<short>(v15, (_WORD *)this + 136);
      v17 = GetNumeric<short>(v16, (_WORD *)this + 138);
      v18 = GetNumeric<short>(v17, (_WORD *)this + 272);
      v19 = GetNumeric<short>(v18, (_WORD *)this + 274);
      v20 = GetNumeric<unsigned char>(v19, (_BYTE *)this + 552);
      ptP.right = (LONG)GetNumeric<unsigned char>(v20, (_BYTE *)this + 316);
      ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, &ptP);
      if ( ptP.left >= 0 )
      {
        ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, &ptP.top);
        ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, (_DWORD *)this + 85);
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, (_BYTE *)this + 556);
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, (_BYTE *)this + 560);
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, (_BYTE *)this + 572);
        ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, (_DWORD *)this + 145);
        CChar::SetXY((CChar *)this, (const tagPOINT *)&ptP);
        (*(void (__thiscall **)(void *))(*(_DWORD *)this + 84))(this);
        CPlayerSkill::Init((CPlayerSkill *)((char *)this + 624), (CPlayer *)this);
        v55 = 0;
        ptP.bottom = ptP.right;
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
        if ( v55 )
        {
          for ( i = 0; i < v55; ++i )
          {
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v53);
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v52);
            CPlayerSkill::SetSkill((CPlayerSkill *)((char *)this + 624), v53, v52);
          }
          CPlayerSkill::ExcutePassiveSkill((CPlayerSkill *)((char *)this + 624));
          CPlayer::Write((CPlayer *)this, S2C_SKILLINFO, "m", ptP.bottom, ptP.right - ptP.bottom);
        }
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
        if ( v55 )
        {
          CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)((char *)this + 1020));
          for ( j = 0; j < v55; ++j )
          {
            item = CItem::CreateItem(*((_DWORD *)this + 113), (char **)&ptP.right);
            if ( item )
            {
              if ( CItem::IsState(item, 1) && (item->m_dwInfo & 0x7FF00) != 0 )
              {
                if ( (item->m_dwInfo & 0x100000) != 0 )
                  CChar::AddGState((CChar *)this, 0x80000000);
                v27 = item->m_dwInfo & 0x7FF00;
                if ( v27 > 0x2000 )
                {
                  if ( v27 > 0x10000 )
                  {
                    if ( v27 == 0x20000 )
                    {
                      CChar::AddGState((CChar *)this, 0x20000000);
                      (*(void (__cdecl **)(void *, int, int, int, int))(*(_DWORD *)this + 92))(this, 27, 1, 50, 50);
                      (*(void (__cdecl **)(void *, int, int, int, int))(*(_DWORD *)this + 92))(this, 28, 1, 50, 50);
                    }
                    else if ( v27 == 0x40000 )
                    {
                      CChar::AddGState((CChar *)this, 0x40000000);
                      (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, 50);
                      (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, 50);
                      (*(void (__cdecl **)(void *, _DWORD, int, int))(*(_DWORD *)this + 92))(this, 0, 1, 6);
                      (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 2, 1, 6);
                      (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 4, 1, 6);
                      (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 3, 1, 10);
                      (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 1, 1, 10);
                    }
                  }
                  else
                  {
                    switch ( v27 )
                    {
                      case 0x10000u:
                        CChar::AddGState((CChar *)this, 0x10000000);
                        if ( (item->m_dwInfo & 0x80000) != 0 )
                        {
                          (*(void (__cdecl **)(void *, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 5, 0, 5);
                          (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 96))(this, 6, 1, 10);
                        }
                        else if ( (item->m_dwInfo & 0x100000) != 0 )
                        {
                          (*(void (__cdecl **)(void *, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 5, 0, 10);
                          (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 96))(this, 6, 1, 20);
                        }
                        break;
                      case 0x4000u:
                        CChar::AddGState((CChar *)this, 0x4000000);
                        break;
                      case 0x8000u:
                        CChar::AddGState((CChar *)this, 0x8000000);
                        if ( (item->m_dwInfo & 0x80000) != 0 )
                        {
                          (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 96))(this, 5, 1, 10);
                          (*(void (__cdecl **)(void *, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 6, 0, 5);
                        }
                        else if ( (item->m_dwInfo & 0x100000) != 0 )
                        {
                          (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 96))(this, 5, 1, 20);
                          (*(void (__cdecl **)(void *, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 6, 0, 10);
                        }
                        break;
                    }
                  }
                }
                else if ( v27 == 0x2000 )
                {
                  CChar::AddGState((CChar *)this, 0x2000000);
                }
                else if ( v27 > 0x400 )
                {
                  if ( v27 == 2048 )
                  {
                    CChar::AddGState((CChar *)this, 0x800000);
                  }
                  else if ( v27 == 4096 )
                  {
                    CChar::AddGState((CChar *)this, 0x1000000);
                  }
                }
                else
                {
                  switch ( v27 )
                  {
                    case 0x400u:
                      CChar::AddGState((CChar *)this, 0x400000);
                      break;
                    case 0x100u:
                      CChar::AddGState((CChar *)this, 0x100000);
                      if ( (item->m_dwInfo & 0x80000) != 0 )
                      {
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, 20);
                        (*(void (__cdecl **)(void *, _DWORD, int, int))(*(_DWORD *)this + 92))(this, 0, 1, 2);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 2, 1, 2);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 4, 1, 2);
                      }
                      else if ( (item->m_dwInfo & 0x100000) != 0 )
                      {
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, 50);
                        (*(void (__cdecl **)(void *, _DWORD, int, int))(*(_DWORD *)this + 92))(this, 0, 1, 3);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 2, 1, 3);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 4, 1, 3);
                      }
                      break;
                    case 0x200u:
                      CChar::AddGState((CChar *)this, 0x200000);
                      if ( (item->m_dwInfo & 0x80000) != 0 )
                      {
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, 20);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 3, 1, 2);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 1, 1, 2);
                      }
                      else if ( (item->m_dwInfo & 0x100000) != 0 )
                      {
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, 50);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 3, 1, 5);
                        (*(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)this + 92))(this, 1, 1, 5);
                      }
                      break;
                  }
                }
              }
              if ( item->CanMerge(item, item) || item->m_nNum <= 1 )
              {
                if ( CPlayer::_IntoInven((CPlayer *)this, item) )
                {
                  if ( item->IsMoney(item) )
                  {
                    *((_DWORD *)this + 274) = item;
                    if ( *(int *)(*((_DWORD *)this + 274) + 52) < 0 )
                    {
                      LOG_ERR(
                        "m_pMoney->m_nNum <0 :  UID(%d) PID(%d) IID(%d) Num(%d) ",
                        *((_DWORD *)this + 112),
                        *((_DWORD *)this + 113),
                        item->m_nIID,
                        *(_DWORD *)(*((_DWORD *)this + 274) + 52));
                      CDBSocket::Write(
                        S2D_UPDATEITEMNUM,
                        "ddwdb",
                        item->m_nIID,
                        *((_DWORD *)this + 113),
                        31,
                        1 - *(_DWORD *)(*((_DWORD *)this + 274) + 52),
                        54);
                      *(_DWORD *)(*((_DWORD *)this + 274) + 52) = 1;
                    }
                  }
                  else if ( item->IsQuestItem(item) )
                  {
                    ++*((_DWORD *)this + 276);
                  }
                }
                else
                {
                  LOG_ERR("CPlayer::OnLoadPlayer() Item insert error. (IID:%d)", item->m_nIID);
                  CBase::Delete(item);
                }
              }
              else
              {
                LOG_ERR(
                  "CPlayer::OnLoadPlayer()       . Name(%s) PID(%d) UID"
                  "(%d) Index(%d) Num(%d) ",
                  (const char *)this + 32,
                  *((_DWORD *)this + 113),
                  *((_DWORD *)this + 112),
                  item->m_pInit->m_nIndex,
                  item->m_nNum);
                CBase::Delete(item);
              }
            }
          }
          CIOCriticalSection::Leave((int)this + 1020);
        }
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
        if ( v55 )
        {
          CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)((char *)this + 1020));
          for ( k = 0; k < v55; ++k )
          {
            v47 = ptP.right;
            v21 = sub_472830(v33, (_DWORD *)(ptP.right + 2), (const void *)ptP.right);
            sub_470890(
              (int)this + 1128,
              (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v32,
              (int)v21);
            ptP.right += 26;
          }
          CIOCriticalSection::Leave((int)this + 1020);
        }
        ptP.bottom = ptP.right;
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
        if ( v55 )
        {
          for ( l = 0; l < v55; ++l )
          {
            _Val1 = 0;
            v44 = 0;
            v45 = 0;
            ptP.right = (LONG)GetNumeric<short>((_WORD *)ptP.right, &_Val1);
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v44);
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v45);
            v22 = std::pair<int,CScriptToCookBoard::tBaseTable>::pair<int,CScriptToCookBoard::tBaseTable>(
                    (std::pair<int,CScriptToCookBoard::tBaseTable> *)v31,
                    &_Val1,
                    (const CScriptToCookBoard::tBaseTable *)&v44);
            sub_4715D0(
              (int)this + 1256,
              (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v41,
              (int)v22);
            if ( !v42 )
              LOG_ERR("CPlayer::OnLoadPlayer() Duplicate Quest. (PID:%d, Quest:%d)", *((_DWORD *)this + 113), _Val1);
          }
          CPlayer::Write((CPlayer *)this, S2C_QUESTINFO, "m", ptP.bottom, ptP.right - ptP.bottom);
        }
        if ( (dword_4E1178 & 4) != 0 )
        {
          ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
          if ( v55 )
          {
            for ( m = 0; m < v55; ++m )
            {
              v30 = operator new(0x10u);
              if ( v30 )
                v26 = sub_457E30(v30);
              else
                v26 = 0;
              v39 = v26;
              ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, (_BYTE *)v26 + 4);
              ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, v39 + 2);
              CPlayer::EventInsert(this, (int)v39);
            }
          }
        }
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
        if ( v55 )
        {
          for ( n = 0; n < v55; ++n )
          {
            v29 = operator new(0x30u);
            if ( v29 )
              v25 = sub_457E60(v29);
            else
              v25 = 0;
            v37 = v25;
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, v25);
            ptP.right = (LONG)GetString((char *)ptP.right, (char *)v37 + 8);
            ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, v37 + 1);
            ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, v37 + 10);
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, (_BYTE *)v37 + 28);
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, (_BYTE *)v37 + 32);
            CPlayer::MLMLoad((CIOCriticalSection *)this, v37);
          }
        }
        ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &v55);
        if ( v55 )
        {
          for ( ii = 0; ii < v55; ++ii )
          {
            a2a = 0;
            a3 = 0;
            ptP.right = (LONG)GetNumeric<unsigned char>((_BYTE *)ptP.right, &a2a);
            ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, &a3);
            CChar::SetBuff((CChar *)this, a2a, a3);
          }
        }
        if ( CPlayer::IsPCBang(this) )
        {
          v23 = *((_DWORD *)this + 77);
          *((_DWORD *)this + 76) |= 1u;
          *((_DWORD *)this + 77) = v23;
        }
        ptP.right = (LONG)GetNumeric<int>((_DWORD *)ptP.right, &nGID);
        if ( nGID )
        {
          CChar::Unlock((CChar *)this);
          CGuild::Load(nGID, (char *)ptP.right, 0);
          CChar::Lock((CChar *)this);
          if ( CPlayer::IsPBit((CPlayer *)this, 4) )
            goto LABEL_122;
        }
        if ( *((_DWORD *)this + 120) )
        {
          CChar::Unlock((CChar *)this);
          CGuild::Login((CPlayer *)this);
          CChar::Lock((CChar *)this);
          if ( CPlayer::IsPBit((CPlayer *)this, 4) )
            goto LABEL_122;
        }
        if ( sub_417450()
          && (CChar::Unlock((CChar *)this),
              v24 = CPlayer::GetGID((CIOCriticalSection *)this),
              CGuild::LoginCastle((CPlayer *)this, v24),
              CChar::Lock((CChar *)this),
              CPlayer::IsPBit((CPlayer *)this, 4))
          || (BitSet((volatile signed __int32 *)this + 5, 1u), !CPlayer::_Create((CPlayer *)this)) )
        {
LABEL_122:
          CChar::Unlock((CChar *)this);
          result = 0;
        }
        else
        {
          CChar::Unlock((CChar *)this);
          result = 1;
        }
      }
      else
      {
        CChar::Unlock((CChar *)this);
        ELOG("CPlayer::OnLoadPlayer PID(%d) X(%d) Y(%d) \n", *((_DWORD *)this + 113), ptP.left, ptP.top);
        EBREAK();
        result = 0;
      }
    }
  }
  return result;
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00457E30) --------------------------------------------------------
_DWORD *__thiscall sub_457E30(_DWORD *this)
{
  this[1] = 0;
  *this = 0;
  this[3] = 0;
  return this;
}

//----- (00457E60) --------------------------------------------------------
_DWORD *__thiscall sub_457E60(_DWORD *this)
{
  this[10] = 0;
  this[9] = 0;
  this[8] = 0;
  this[7] = 0;
  this[1] = 0;
  *this = 0;
  memset(this + 2, 0, 0x11u);
  this[11] = 0;
  return this;
}

//----- (00457ED0) --------------------------------------------------------
int __thiscall CPlayer::_Create(CPlayer *a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  _DWORD *v2; // eax
  int v3; // eax
  int v4; // eax
  int m_nStr; // [esp-6Ch] [ebp-8Ch]
  int m_nHth; // [esp-68h] [ebp-88h]
  int m_nInt; // [esp-64h] [ebp-84h]
  int m_nWis; // [esp-60h] [ebp-80h]
  int m_nDex; // [esp-5Ch] [ebp-7Ch]
  int m_nCurHP; // [esp-58h] [ebp-78h]
  int m_nMaxHP; // [esp-54h] [ebp-74h]
  int m_nCurMP; // [esp-50h] [ebp-70h]
  int m_nMaxMP; // [esp-4Ch] [ebp-6Ch]
  int m_nHit; // [esp-48h] [ebp-68h]
  int m_nDodge; // [esp-44h] [ebp-64h]
  int m_nDefense; // [esp-40h] [ebp-60h]
  int m_nAbsorb; // [esp-3Ch] [ebp-5Ch]
  int v19; // [esp-38h] [ebp-58h]
  int v20; // [esp-34h] [ebp-54h]
  int m_nMinAttack; // [esp-30h] [ebp-50h]
  int m_nMaxAttack; // [esp-2Ch] [ebp-4Ch]
  int m_nMinMagic; // [esp-28h] [ebp-48h]
  int m_nMaxMagic; // [esp-24h] [ebp-44h]
  int m_nPUPoint; // [esp-20h] [ebp-40h]
  int m_nSUPoint; // [esp-1Ch] [ebp-3Ch]
  int v27; // [esp-18h] [ebp-38h]
  int v28; // [esp-14h] [ebp-34h]
  int v29; // [esp-10h] [ebp-30h]
  int v30; // [esp-Ch] [ebp-2Ch]
  int v31; // [esp-Ch] [ebp-2Ch]
  int v32; // [esp-8h] [ebp-28h]
  int v33; // [esp-8h] [ebp-28h]
  int v34; // [esp-4h] [ebp-24h]
  int v35; // [esp-4h] [ebp-24h]
  CPlayer *a1d; // [esp+0h] [ebp-20h]
  int v38; // [esp+4h] [ebp-1Ch] BYREF
  char v39[4]; // [esp+8h] [ebp-18h] BYREF
  CBase *v40; // [esp+Ch] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v41; // [esp+10h] [ebp-10h] BYREF
  char *v42; // [esp+14h] [ebp-Ch]
  unsigned __int16 *v43; // [esp+18h] [ebp-8h] BYREF
  void *a2; // [esp+1Ch] [ebp-4h]

  a1->m_pMap = CSMap::FindSMap(a1->m_nMap);
  if ( !a1->m_pMap )
  {
    LOG_ERR("CPlayer::_Create() Invalid Map or Tile. (map:%d)", a1->m_nMap);
LABEL_10:
    BitReset((volatile signed __int32 *)&a1->m_bit, 1u);
    return 0;
  }
  if ( !CPlayer::Add(a1) )
    goto LABEL_10;
  a2 = CIOBuffer::Alloc();
  v42 = (char *)a2;
  *((_BYTE *)a2 + 2) = 4;
  v43 = (unsigned __int16 *)(v42 + 4);
  CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&a1->m_mapItem,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v41);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v39);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v41,
            v1) )
      break;
    v2 = sub_446090((int *)&v41, &v38, 0);
    v40 = *(CBase **)(sub_420250(v2) + 4);
    CIOObject::AddRef((int)v40);
    v40->__vftable[1].OnTimerCallback(v40, (int)a1);
    if ( !CBase::IsDeleted(v40) )
      ((void (__thiscall *)(CBase *, unsigned __int16 **, _DWORD))v40->__vftable[1].~CIOObject)(v40, &v43, 0);
    CIOObject::Release(v40);
  }
  CIOCriticalSection::Leave((int)&a1->m_lockItem);
  v3 = unknown_libname_10(&a1->m_mapItem, a1);
  WritePacket(v42 + 3, "b", v3);
  *(_WORD *)v42 = (_WORD)v43 - (_WORD)v42;
  *((_DWORD *)a2 + 2000) = *(unsigned __int16 *)v42;
  CSocket::Send(a1d->m_pSocket, (CIOBuffer *)a2);
  v34 = a1d->m_nRage;
  v32 = CChar::GetResist(a1d, 4);
  v30 = CChar::GetResist(a1d, 3);
  v29 = CChar::GetResist(a1d, 2);
  v28 = CChar::GetResist(a1d, 1);
  v27 = CChar::GetResist(a1d, 0);
  m_nSUPoint = a1d->m_nSUPoint;
  m_nPUPoint = a1d->m_nPUPoint;
  m_nMaxMagic = CChar::GetMaxMagic(a1d);
  m_nMinMagic = CChar::GetMinMagic(a1d);
  m_nMaxAttack = CChar::GetMaxAttack(a1d);
  m_nMinAttack = CChar::GetMinAttack(a1d);
  v20 = HIDWORD(a1d->m_nExp);
  v19 = a1d->m_nExp;
  m_nAbsorb = CChar::GetAbsorb(a1d);
  m_nDefense = CChar::GetDefense(a1d, 0);
  m_nDodge = CChar::GetDodge(a1d);
  m_nHit = CChar::GetHit(a1d);
  m_nMaxMP = CChar::GetMaxMP(a1d);
  m_nCurMP = a1d->m_nCurMP;
  m_nMaxHP = CChar::GetMaxHP(a1d);
  m_nCurHP = a1d->m_nCurHP;
  m_nDex = CChar::GetDex(a1d);
  m_nWis = CChar::GetWis(a1d);
  m_nInt = CChar::GetInt(a1d);
  m_nHth = CChar::GetHth(a1d);
  m_nStr = CChar::GetStr(a1d);
  CPlayer::Write(
    a1d,
    S2C_PROPERTY,
    "bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd",
    a1d->m_dwSpecialty,
    &DefaultNullString,
    a1d->m_nGRole,
    a1d->m_nContribute,
    m_nStr,
    m_nHth,
    m_nInt,
    m_nWis,
    m_nDex,
    m_nCurHP,
    m_nMaxHP,
    m_nCurMP,
    m_nMaxMP,
    m_nHit,
    m_nDodge,
    m_nDefense,
    m_nAbsorb,
    v19,
    v20,
    m_nMinAttack,
    m_nMaxAttack,
    m_nMinMagic,
    m_nMaxMagic,
    m_nPUPoint,
    m_nSUPoint,
    v27,
    v28,
    v29,
    v30,
    v32,
    v34);
  BitSet((volatile signed __int32 *)&a1d->m_bit, 2u);
  v35 = a1d->m_ptPixel.y;
  v33 = a1d->m_ptPixel.x;
  v31 = CCalendar::GetTime();
  CPlayer::Write(a1d, S2C_ANS_LOAD, "wdd", v31, v33, v35);
  v4 = CMapObject::GetState((CMapObject *)&dword_4E2758[15 * a1d->m_nMap]);
  CPlayer::Write(a1d, S2C_MAPSTATE, "bb", v4, 0);
  return 1;
}
// 458039: variable 'a1d' is possibly undefined

//----- (00458210) --------------------------------------------------------
int __thiscall CChar::GetMinMagic(_DWORD *this)
{
  return this[34] + this[58] * this[34] / 100;
}

//----- (00458240) --------------------------------------------------------
int __thiscall CChar::GetMaxMagic(_DWORD *this)
{
  return this[35] + this[59] * this[35] / 100;
}

//----- (00458270) --------------------------------------------------------
void __thiscall CPlayer::GameStart(void *this)
{
  time_t v1; // eax
  int *v2; // [esp-14h] [ebp-1Ch]
  int *v3; // [esp-14h] [ebp-1Ch]
  int *v4; // [esp-10h] [ebp-18h]
  int *v5; // [esp-10h] [ebp-18h]
  int v6; // [esp-Ch] [ebp-14h]
  int v7; // [esp-Ch] [ebp-14h]
  int v8; // [esp-8h] [ebp-10h]
  int v9; // [esp-8h] [ebp-10h]
  int v10; // [esp-4h] [ebp-Ch]
  int v11; // [esp-4h] [ebp-Ch]
  BOOL v12; // [esp-4h] [ebp-Ch]
  CBuffMoveSpeed *v13; // [esp-4h] [ebp-Ch]
  CIOBuffer *pBuffer; // [esp+4h] [ebp-4h]

  CChar::Lock((CChar *)this);
  CSMap::SetOnMap(*((CSMap **)this + 80), (CBase *)this, (const tagPOINT *)((char *)this + 324));
  v10 = *((_DWORD *)this + 128);
  v8 = *((_DWORD *)this + 278);
  v6 = *((_DWORD *)this + 120);
  v4 = CPlayer::GetGuildName((int *)this);
  v2 = CPlayer::GetGuildClassTitle((int *)this);
  CPlayer::Write(
    (CPlayer *)this,
    S2C_CREATEPLAYER,
    "dsbdddwdmbbIssdbd",
    *((_DWORD *)this + 7),
    (char *)this + 32,
    *((_DWORD *)this + 115) + 128,
    *((_DWORD *)this + 83),
    *((_DWORD *)this + 84),
    *((_DWORD *)this + 85),
    *((_DWORD *)this + 87),
    *((_DWORD *)this + 70),
    (char *)this + 1052,
    14,
    *((_DWORD *)this + 139),
    *((_DWORD *)this + 140),
    *((_DWORD *)this + 72),
    *((_DWORD *)this + 73),
    v2,
    v4,
    v6,
    v8,
    v10);
  v11 = *((_DWORD *)this + 128);
  v9 = *((_DWORD *)this + 278);
  v7 = *((_DWORD *)this + 120);
  v5 = CPlayer::GetGuildName((int *)this);
  v3 = CPlayer::GetGuildClassTitle((int *)this);
  pBuffer = (CIOBuffer *)MakePacket(
                           S2C_CREATEPLAYER,
                           "dsbdddwdmbbIssdbd",
                           *((_DWORD *)this + 7),
                           (char *)this + 32,
                           *((_DWORD *)this + 115),
                           *((_DWORD *)this + 83),
                           *((_DWORD *)this + 84),
                           *((_DWORD *)this + 85),
                           *((_DWORD *)this + 87),
                           *((_DWORD *)this + 70),
                           (char *)this + 1052,
                           14,
                           *((_DWORD *)this + 139),
                           *((_DWORD *)this + 140),
                           *((_DWORD *)this + 72),
                           *((_DWORD *)this + 73),
                           v3,
                           v5,
                           v7,
                           v9,
                           v11);
  CSMap::SendCreateInSight(*((CSMap **)this + 80), (CPlayer *)this, (const tagPOINT *)((char *)this + 324), pBuffer);
  CIOBuffer::Release(pBuffer);
  BitSet((volatile signed __int32 *)this + 5, 3u);
  v12 = CPlayer::IsPCBang(this) != 0;
  CPlayer::Write((CPlayer *)this, S2C_ANS_START, "b", v12);
  CChar::Unlock((CChar *)this);
  if ( !CChar::IsGState((CChar *)this, 2) )
  {
    CChar::AddGState((CChar *)this, 0x2000);
    *((_DWORD *)this + 362) = GetTickCount() + 10000;
  }
  if ( (dword_4E1178 & 0x40) != 0 && dword_4E1FF4 > time(0) )
  {
    v1 = time(0);
    v13 = CBuff::CreateBuff(nBuff, dword_4E1FF4 - v1, 0);
    (*(void (__thiscall **)(void *, CBuffMoveSpeed *))(*(_DWORD *)this + 180))(this, v13);
  }
  CDBSocket::Write(S2D_GETMYTELPT, "dd", *((_DWORD *)this + 7), *((_DWORD *)this + 113));
  if ( (dword_4E1174[0] & 0x40) != 0 )
    CDBSocket::Write(S2D_FRD, "db", *((_DWORD *)this + 113), 3);
  if ( (*(_WORD *)dword_4E1174 & 0x400) != 0 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)((char *)this + 1396));
    sub_471BE0((_DWORD *)this + 357);
    CIOCriticalSection::Leave((int)this + 1396);
    CDBSocket::Write(S2D_MAIL, "dbd", *((_DWORD *)this + 113), 2, *((_DWORD *)this + 113));
  }
}
// 4E1178: using guessed type int dword_4E1178;
// 4E1FF4: using guessed type int dword_4E1FF4;

//----- (004585B0) --------------------------------------------------------
void __thiscall CPlayer::GameRestart(void *this)
{
  int v1; // eax
  int v2; // [esp-4h] [ebp-8h]

  CBase::Delete((CBase *)this);
  CScreen::Lock(*((CScreen **)this + 419));
  if ( *(void **)(*((_DWORD *)this + 419) + 120) != this )
    EBREAK();
  *(_DWORD *)(*((_DWORD *)this + 419) + 120) = 0;
  CScreen::Unlock(*((CScreen **)this + 419));
  BitReset((volatile signed __int32 *)(*((_DWORD *)this + 419) + 108), 4u);
  BitReset((volatile signed __int32 *)(*((_DWORD *)this + 419) + 108), 3u);
  v2 = *(_DWORD *)(*((_DWORD *)this + 419) + 152);
  v1 = CSocket::Id(*((CSocket **)this + 419));
  CDBSocket::Write(S2D_LOGIN, "dd", v1, v2);
  CIOObject::Release((CIOObject *)this, (volatile int *)this + 110);
}

//----- (00458680) --------------------------------------------------------
int __thiscall CSocket::Id(CSocket *this)
{
  return this->m_nId;
}

//----- (004586A0) --------------------------------------------------------
void __thiscall CPlayer::SaveAllProperty(CPlayer *this, int bLevelUp)
{
  int nMlmFee; // [esp+4h] [ebp-4h]

  this->m_dwAutoSave = 0;
  CDBSocket::Write(
    S2D_SAVEALLPROPERTY,
    "dbbwIbbbbbbwwwwbbddddb",
    this->m_nPID,
    this->m_nLevel,
    this->m_dwSpecialty,
    this->m_nContribute,
    LODWORD(this->m_nExp),
    HIDWORD(this->m_nExp),
    this->m_nGRole,
    this->m_prtyBase.nBase[0],
    this->m_prtyBase.nBase[1],
    this->m_prtyBase.nBase[2],
    this->m_prtyBase.nBase[3],
    this->m_prtyBase.nBase[4],
    this->m_nCurHP,
    this->m_nCurMP,
    this->m_nPUPoint,
    this->m_nSUPoint,
    this->m_nKilled,
    this->m_nMap,
    this->m_ptPixel.x,
    this->m_ptPixel.y,
    this->m_nZ,
    this->m_nRage,
    bLevelUp);
  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  if ( !bLevelUp && this->m_pTransform )
    CItemTransform::SaveInfo(this->m_pTransform, 0);
  nMlmFee = this->m_nMlmFee;
  this->m_nMlmFee = 0;
  CIOCriticalSection::Leave((int)&this->m_lockItem);
  if ( nMlmFee )
    CPlayer::MLMAccumFee(this, nMlmFee);
}

//----- (00458800) --------------------------------------------------------
void CPlayer::UpdateProperty(CPlayer *this, int bProperty, int bAdd, ...)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // ecx
  int v11; // ecx
  int v12; // eax
  int v13; // ecx
  int v14; // edx
  int v15; // [esp-14h] [ebp-ACh]
  int v16; // [esp-10h] [ebp-A8h]
  int v17; // [esp-10h] [ebp-A8h]
  int v18; // [esp-Ch] [ebp-A4h]
  int v19; // [esp-Ch] [ebp-A4h]
  int v20; // [esp-Ch] [ebp-A4h]
  int v21; // [esp-8h] [ebp-A0h]
  int v22; // [esp-8h] [ebp-A0h]
  int v23; // [esp-8h] [ebp-A0h]
  int v24; // [esp-4h] [ebp-9Ch]
  int v25; // [esp-4h] [ebp-9Ch]
  int v26; // [esp-4h] [ebp-9Ch]
  int v27; // [esp-4h] [ebp-9Ch]
  int v28; // [esp-4h] [ebp-9Ch]
  int v29; // [esp-4h] [ebp-9Ch]
  int v30; // [esp+0h] [ebp-98h]
  int v31; // [esp+4h] [ebp-94h]
  int v32; // [esp+14h] [ebp-84h]
  int v33; // [esp+18h] [ebp-80h]
  int v34; // [esp+1Ch] [ebp-7Ch]
  int v35; // [esp+20h] [ebp-78h]
  CIOObject *v36; // [esp+30h] [ebp-68h]
  CIOObject *v37; // [esp+38h] [ebp-60h]
  __int64 v38; // [esp+40h] [ebp-58h]
  int v39; // [esp+5Ch] [ebp-3Ch]
  int v40; // [esp+64h] [ebp-34h]
  int v41; // [esp+68h] [ebp-30h]
  int v42; // [esp+70h] [ebp-28h]
  int v43; // [esp+7Ch] [ebp-1Ch]
  int v44; // [esp+80h] [ebp-18h]
  int v45; // [esp+84h] [ebp-14h]
  int v46; // [esp+8Ch] [ebp-Ch]
  __int64 a4; // [esp+ACh] [ebp+14h]
  va_list va; // [esp+B4h] [ebp+1Ch] BYREF

  va_start(va, bAdd);
  a4 = va_arg(va, _QWORD);
  switch ( bProperty )
  {
    case 0:
      if ( bAdd )
      {
        v3 = CChar::GetStr(this);
        this->m_prtyPt.nHit -= 15 * v3 / 54;
        this->m_prtyPt.nMinAttack -= (11 * v3 - 80) / 30;
        this->m_prtyPt.nMaxAttack -= (8 * v3 - 25) / 15;
        this->m_prtyBase.nBase[0] += a4;
        v46 = CChar::GetStr(this);
        this->m_prtyPt.nHit += 15 * v46 / 54;
        this->m_prtyPt.nMinAttack += (11 * v46 - 80) / 30;
        this->m_prtyPt.nMaxAttack += (8 * v46 - 25) / 15;
        v24 = CChar::GetMaxAttack(this);
        v21 = CChar::GetMinAttack(this);
        v18 = CChar::GetHit(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 0, v46, v18, v21, v24);
      }
      break;
    case 1:
      if ( bAdd )
      {
        v43 = dword_4D6A10[this->m_nClass];
        v4 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] -= 2 * v4 * v4 / v43;
        this->m_prtyPt.nResist[4] -= v4 / 9;
        v45 = this->m_prtyBase.nBase[1];
        this->m_prtyBase.nBase[1] = a4 + v45;
        v44 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v44 * v44 / v43;
        this->m_prtyPt.nResist[4] += v44 / 9;
        CPlayerSkill::ExcutePassiveSkill(
          &this->m_skill,
          30,
          2 * v45 * v45 / v43,
          2 * this->m_prtyBase.nBase[1] * this->m_prtyBase.nBase[1] / v43);
        v25 = CChar::GetResist(this, 4);
        v5 = CChar::GetMaxHP(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 1, v44, this->m_nCurHP, v5, v25);
        CPlayer::UpdatePartyMember(this, 7);
      }
      break;
    case 2:
      if ( bAdd )
      {
        v6 = CChar::GetInt(this);
        this->m_prtyPt.nMinMagic -= (7 * v6 - 20) / 12;
        this->m_prtyPt.nMaxMagic -= 7 * v6 / 12;
        this->m_prtyPt.nResist[0] -= v6 / 9;
        this->m_prtyPt.nResist[1] -= v6 / 9;
        this->m_prtyPt.nResist[2] -= v6 / 9;
        this->m_prtyBase.nBase[2] += a4;
        v42 = CChar::GetInt(this);
        this->m_prtyPt.nMinMagic += (7 * v42 - 20) / 12;
        this->m_prtyPt.nMaxMagic += 7 * v42 / 12;
        this->m_prtyPt.nResist[0] += v42 / 9;
        this->m_prtyPt.nResist[1] += v42 / 9;
        this->m_prtyPt.nResist[2] += v42 / 9;
        v26 = CChar::GetResist(this, 2);
        v22 = CChar::GetResist(this, 1);
        v19 = CChar::GetResist(this, 0);
        v16 = CChar::GetMaxMagic(this);
        v15 = CChar::GetMinMagic(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwwwww", 2, v42, v15, v16, v19, v22, v26);
      }
      break;
    case 3:
      if ( bAdd )
      {
        v40 = dword_4D6A1C[this->m_nClass];
        v7 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] -= v7 + 2 * v7 * v7 / v40;
        this->m_prtyPt.nMinMagic -= v7 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v7 / 45;
        this->m_prtyPt.nResist[3] -= v7 / 9;
        this->m_prtyBase.nBase[3] += a4;
        v41 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v41 + 2 * v41 * v41 / v40;
        this->m_prtyPt.nMinMagic += v41 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v41 / 45;
        this->m_prtyPt.nResist[3] += v41 / 9;
        v27 = CChar::GetResist(this, 3);
        v8 = CChar::GetMaxMP(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 3, v41, this->m_nCurMP, v8, v27);
      }
      break;
    case 4:
      if ( bAdd )
      {
        v9 = CChar::GetDex(this);
        this->m_prtyPt.nHit -= v9 / 8;
        this->m_prtyPt.nDodge -= v9 / 3;
        this->m_prtyPt.nMinAttack -= (v9 - 5) / 11;
        this->m_prtyPt.nMaxAttack -= 18 * v9 / 77;
        this->m_prtyBase.nBase[4] += a4;
        v39 = CChar::GetDex(this);
        this->m_prtyPt.nHit += v39 / 8;
        this->m_prtyPt.nDodge += v39 / 3;
        this->m_prtyPt.nMinAttack += (v39 - 5) / 11;
        this->m_prtyPt.nMaxAttack += 18 * v39 / 77;
        v28 = CChar::GetMaxAttack(this);
        v23 = CChar::GetMinAttack(this);
        v20 = CChar::GetDodge(this);
        v17 = CChar::GetHit(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwwww", 4, v39, v17, v20, v23, v28);
      }
      break;
    case 7:
      if ( bAdd )
      {
        this->m_nCurHP += a4;
        if ( CChar::GetMaxHP(this) >= this->m_nCurHP )
          v35 = this->m_nCurHP;
        else
          v35 = CChar::GetMaxHP(this);
        this->m_nCurHP = v35;
      }
      else
      {
        this->m_nCurHP -= a4;
        if ( this->m_nCurHP >= 0 )
          v34 = this->m_nCurHP;
        else
          v34 = 0;
        this->m_nCurHP = v34;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 7, this->m_nCurHP);
      CPlayer::UpdatePartyMember(this, 7);
      break;
    case 8:
      if ( bAdd )
      {
        this->m_nCurMP += a4;
        if ( CChar::GetMaxMP(this) >= this->m_nCurMP )
          v33 = this->m_nCurMP;
        else
          v33 = CChar::GetMaxMP(this);
        this->m_nCurMP = v33;
      }
      else
      {
        this->m_nCurMP -= a4;
        if ( this->m_nCurMP >= 0 )
          v32 = this->m_nCurMP;
        else
          v32 = 0;
        this->m_nCurMP = v32;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 8, this->m_nCurMP);
      break;
    case 23:
      if ( bAdd )
        v10 = a4 + this->m_nPUPoint;
      else
        v10 = this->m_nPUPoint - a4;
      this->m_nPUPoint = v10;
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 23, this->m_nPUPoint);
      break;
    case 24:
      if ( bAdd )
        v11 = a4 + this->m_nSUPoint;
      else
        v11 = this->m_nSUPoint - a4;
      this->m_nSUPoint = v11;
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 24, this->m_nSUPoint);
      break;
    case 25:
      v38 = a4;
      if ( bAdd )
      {
        if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
          v38 = 2 * a4;
        this->m_nExp += v38;
        while ( this->m_nExp >= __SPAIR64__(dword_4D66F4[2 * this->m_nLevel], dword_4D66F0[2 * this->m_nLevel]) )
        {
          this->m_nExp -= __PAIR64__(dword_4D66F4[2 * this->m_nLevel], dword_4D66F0[2 * this->m_nLevel]);
          CPlayer::LevelUp(this);
        }
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bII", 25, LODWORD(this->m_nExp), HIDWORD(this->m_nExp), v38);
      }
      else
      {
        if ( this->m_nExp >= a4 )
        {
          this->m_nExp -= a4;
        }
        else
        {
          v38 = this->m_nExp;
          this->m_nExp = 0i64;
        }
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bII", 25, LODWORD(this->m_nExp), HIDWORD(this->m_nExp), -v38);
      }
      break;
    case 26:
      if ( bAdd )
      {
        this->m_prtyBase.nBase[5] -= 52 * this->m_nLevel / 3;
        this->m_prtyBase.nBase[6] -= 8 * this->m_nLevel + 140;
        this->m_prtyPt.nMinAttack -= 7 * this->m_nLevel / 10;
        this->m_prtyPt.nMaxAttack -= this->m_nLevel;
        this->m_nLevel += a4;
        this->m_prtyBase.nBase[5] += 52 * this->m_nLevel / 3;
        this->m_prtyBase.nBase[6] += 8 * this->m_nLevel + 140;
        this->m_prtyPt.nMinAttack += 7 * this->m_nLevel / 10;
        this->m_prtyPt.nMaxAttack += this->m_nLevel;
        this->m_nCurHP = CChar::GetMaxHP(this);
        this->m_nCurMP = CChar::GetMaxMP(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bb", 26, this->m_nLevel);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 5, this->m_nCurHP, this->m_nCurHP);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 6, this->m_nCurMP, this->m_nCurMP);
        v29 = CChar::GetMaxAttack(this);
        v12 = CChar::GetMinAttack(this);
        CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 27, v12, v29);
        CChar::WriteInSight(this, S2C_EFFECT, "db", this->m_nId, 3);
        CPlayer::UpdatePartyMember(this, 7);
        CPlayer::UpdatePartyMember(this, 26);
        v37 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
        if ( v37 )
        {
          CGuild::SetMemberLelvelUp((CGuild *)this->m_szName, (char *)this->m_nLevel);
          CIOObject::Release(v37, &v37[2].m_nTimerRef);
        }
      }
      break;
    case 30:
      if ( bAdd )
        v13 = a4 + this->m_nContribute;
      else
        v13 = this->m_nContribute - a4;
      this->m_nContribute = v13;
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 30, this->m_nContribute);
      v36 = (CIOObject *)CPlayer::GetGuild((CIOCriticalSection *)this);
      if ( v36 )
      {
        CGuild::SetPointADD(v36, (int)this, a4, bAdd);
        CIOObject::Release(v36, &v36[2].m_nTimerRef);
      }
      break;
    case 35:
      if ( bAdd )
      {
        this->m_nRage += a4;
        if ( this->m_nRage >= dword_4D66AC[0] )
          v31 = dword_4D66AC[0];
        else
          v31 = this->m_nRage;
        this->m_nRage = v31;
      }
      else
      {
        this->m_nRage -= a4;
        if ( this->m_nRage <= 0 )
          v30 = 0;
        else
          v30 = this->m_nRage;
        this->m_nRage = v30;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bd", 35, this->m_nRage);
      break;
    case 38:
      if ( bAdd )
        v14 = a4 + this->m_nRange;
      else
        v14 = this->m_nRange - a4;
      this->m_nRange = v14;
      break;
    default:
      return;
  }
}
// 4D66F0: using guessed type int dword_4D66F0[];

//----- (00459840) --------------------------------------------------------
void CPlayer::UpdatePrtyPt(CPlayer *this, int nProperty, int bAdd, ...)
{
  int v3; // eax
  int v4; // eax
  int v5; // ecx
  int v6; // edx
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // ecx
  int v11; // edx
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // ecx
  int v16; // edx
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // ecx
  int v21; // edx
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // ecx
  int v26; // edx
  int v27; // eax
  int v28; // eax
  int v29; // eax
  int v30; // ecx
  int v31; // edx
  int v32; // edx
  int v33; // [esp-14h] [ebp-D4h]
  int v34; // [esp-14h] [ebp-D4h]
  int v35; // [esp-10h] [ebp-D0h]
  int v36; // [esp-10h] [ebp-D0h]
  int v37; // [esp-10h] [ebp-D0h]
  int v38; // [esp-Ch] [ebp-CCh]
  int v39; // [esp-Ch] [ebp-CCh]
  int v40; // [esp-Ch] [ebp-CCh]
  int v41; // [esp-Ch] [ebp-CCh]
  int v42; // [esp-8h] [ebp-C8h]
  int v43; // [esp-8h] [ebp-C8h]
  int v44; // [esp-8h] [ebp-C8h]
  int v45; // [esp-8h] [ebp-C8h]
  int v46; // [esp-8h] [ebp-C8h]
  int v47; // [esp-8h] [ebp-C8h]
  int v48; // [esp-4h] [ebp-C4h]
  int v49; // [esp-4h] [ebp-C4h]
  int v50; // [esp-4h] [ebp-C4h]
  int v51; // [esp-4h] [ebp-C4h]
  int v52; // [esp-4h] [ebp-C4h]
  int v53; // [esp-4h] [ebp-C4h]
  int v54; // [esp-4h] [ebp-C4h]
  int v55; // [esp-4h] [ebp-C4h]
  int v56; // [esp-4h] [ebp-C4h]
  int v57; // [esp-4h] [ebp-C4h]
  int v58; // [esp-4h] [ebp-C4h]
  int v59; // [esp+0h] [ebp-C0h]
  int v60; // [esp+4h] [ebp-BCh]
  int v61; // [esp+8h] [ebp-B8h]
  int v62; // [esp+Ch] [ebp-B4h]
  int v63; // [esp+10h] [ebp-B0h]
  int v64; // [esp+14h] [ebp-ACh]
  int v65; // [esp+74h] [ebp-4Ch]
  int v66; // [esp+7Ch] [ebp-44h]
  int v67; // [esp+84h] [ebp-3Ch]
  int v68; // [esp+84h] [ebp-3Ch]
  int v69; // [esp+8Ch] [ebp-34h]
  int v70; // [esp+90h] [ebp-30h]
  int v71; // [esp+98h] [ebp-28h]
  int v72; // [esp+98h] [ebp-28h]
  int v73; // [esp+9Ch] [ebp-24h]
  int v74; // [esp+9Ch] [ebp-24h]
  int v75; // [esp+A4h] [ebp-1Ch]
  int v76; // [esp+A8h] [ebp-18h]
  int v77; // [esp+ACh] [ebp-14h]
  int v78; // [esp+ACh] [ebp-14h]
  int v79; // [esp+B4h] [ebp-Ch]
  int v80; // [esp+B4h] [ebp-Ch]
  int a4; // [esp+D4h] [ebp+14h]
  int a5; // [esp+D8h] [ebp+18h]
  va_list va; // [esp+DCh] [ebp+1Ch] BYREF

  va_start(va, bAdd);
  a4 = va_arg(va, _DWORD);
  a5 = va_arg(va, _DWORD);
  switch ( nProperty )
  {
    case 0:
      v79 = CChar::GetStr(this);
      this->m_prtyPt.nHit -= 15 * v79 / 54;
      this->m_prtyPt.nMinAttack -= (11 * v79 - 80) / 30;
      this->m_prtyPt.nMaxAttack -= (8 * v79 - 25) / 15;
      if ( bAdd )
        this->m_prtyPt.nPt[0] += a4;
      else
        this->m_prtyPt.nPt[0] -= a4;
      v80 = CChar::GetStr(this);
      this->m_prtyPt.nHit += 15 * v80 / 54;
      this->m_prtyPt.nMinAttack += (11 * v80 - 80) / 30;
      this->m_prtyPt.nMaxAttack += (8 * v80 - 25) / 15;
      v48 = CChar::GetMaxAttack(this);
      v42 = CChar::GetMinAttack(this);
      v38 = CChar::GetHit(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 0, v80, v38, v42, v48);
      break;
    case 1:
      v77 = CChar::GetHth(this);
      v76 = dword_4D6A10[this->m_nClass];
      if ( bAdd )
      {
        this->m_prtyBase.nBase[5] -= 2 * v77 * v77 / v76;
        this->m_prtyPt.nResist[4] -= v77 / 9;
        this->m_prtyPt.nPt[1] += a4;
        v78 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v78 * v78 / v76;
        this->m_prtyPt.nResist[4] += v78 / 9;
        v75 = CChar::GetMaxHP(this);
        if ( a4 < 0 )
        {
          if ( this->m_nCurHP >= v75 )
            v64 = v75;
          else
            v64 = this->m_nCurHP;
          this->m_nCurHP = v64;
        }
      }
      else
      {
        this->m_prtyBase.nBase[5] -= 2 * v77 * v77 / v76;
        this->m_prtyPt.nResist[4] -= v77 / 9;
        this->m_prtyPt.nPt[1] -= a4;
        v78 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v78 * v78 / v76;
        this->m_prtyPt.nResist[4] += v78 / 9;
        v75 = CChar::GetMaxHP(this);
        if ( a4 > 0 )
        {
          if ( this->m_nCurHP >= v75 )
            v63 = v75;
          else
            v63 = this->m_nCurHP;
          this->m_nCurHP = v63;
        }
      }
      v49 = CChar::GetResist(this, 4);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 1, v78, this->m_nCurHP, v75, v49);
      CPlayer::UpdatePartyMember(this, 7);
      break;
    case 2:
      v73 = CChar::GetInt(this);
      this->m_prtyPt.nMinMagic -= (7 * v73 - 20) / 12;
      this->m_prtyPt.nMaxMagic -= 7 * v73 / 12;
      this->m_prtyPt.nResist[0] -= v73 / 9;
      this->m_prtyPt.nResist[1] -= v73 / 9;
      this->m_prtyPt.nResist[2] -= v73 / 9;
      if ( bAdd )
        this->m_prtyPt.nPt[2] += a4;
      else
        this->m_prtyPt.nPt[2] -= a4;
      v74 = CChar::GetInt(this);
      this->m_prtyPt.nMinMagic += (7 * v74 - 20) / 12;
      this->m_prtyPt.nMaxMagic += 7 * v74 / 12;
      this->m_prtyPt.nResist[0] += v74 / 9;
      this->m_prtyPt.nResist[1] += v74 / 9;
      this->m_prtyPt.nResist[2] += v74 / 9;
      v50 = CChar::GetResist(this, 2);
      v43 = CChar::GetResist(this, 1);
      v39 = CChar::GetResist(this, 0);
      v35 = CChar::GetMaxMagic(this);
      v33 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwwwww", 2, v74, v33, v35, v39, v43, v50);
      break;
    case 3:
      v71 = CChar::GetWis(this);
      v69 = dword_4D6A1C[this->m_nClass];
      if ( bAdd )
      {
        this->m_prtyBase.nBase[6] -= v71 + 2 * v71 * v71 / v69;
        this->m_prtyPt.nMinMagic -= v71 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v71 / 45;
        this->m_prtyPt.nResist[3] -= v71 / 9;
        this->m_prtyPt.nPt[3] += a4;
        v72 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v72 + 2 * v72 * v72 / v69;
        this->m_prtyPt.nMinMagic += v72 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v72 / 45;
        this->m_prtyPt.nResist[3] += v72 / 9;
        v70 = CChar::GetMaxMP(this);
        if ( a4 < 0 )
        {
          if ( this->m_nCurMP >= v70 )
            v62 = v70;
          else
            v62 = this->m_nCurMP;
          this->m_nCurMP = v62;
        }
      }
      else
      {
        this->m_prtyBase.nBase[6] -= v71 + 2 * v71 * v71 / v69;
        this->m_prtyPt.nMinMagic -= v71 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v71 / 45;
        this->m_prtyPt.nResist[3] -= v71 / 9;
        this->m_prtyPt.nPt[3] -= a4;
        v72 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v72 + 2 * v72 * v72 / v69;
        this->m_prtyPt.nMinMagic += v72 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v72 / 45;
        this->m_prtyPt.nResist[3] += v72 / 9;
        v70 = CChar::GetMaxMP(this);
        if ( a4 > 0 )
        {
          if ( this->m_nCurMP >= v70 )
            v61 = v70;
          else
            v61 = this->m_nCurMP;
          this->m_nCurMP = v61;
        }
      }
      v51 = CChar::GetResist(this, 3);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 3, v72, this->m_nCurMP, v70, v51);
      break;
    case 4:
      v67 = CChar::GetDex(this);
      this->m_prtyPt.nHit -= v67 / 8;
      this->m_prtyPt.nDodge -= v67 / 3;
      this->m_prtyPt.nMinAttack -= (v67 - 5) / 11;
      this->m_prtyPt.nMaxAttack -= 18 * v67 / 77;
      if ( bAdd )
        this->m_prtyPt.nPt[4] += a4;
      else
        this->m_prtyPt.nPt[4] -= a4;
      v68 = CChar::GetDex(this);
      this->m_prtyPt.nHit += v68 / 8;
      this->m_prtyPt.nDodge += v68 / 3;
      this->m_prtyPt.nMinAttack += (v68 - 5) / 11;
      this->m_prtyPt.nMaxAttack += 18 * v68 / 77;
      v52 = CChar::GetMaxAttack(this);
      v44 = CChar::GetMinAttack(this);
      v40 = CChar::GetDodge(this);
      v36 = CChar::GetHit(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwwww", 4, v68, v36, v40, v44, v52);
      break;
    case 5:
      if ( bAdd )
      {
        this->m_prtyPt.nPt[5] += a4;
        v66 = CChar::GetMaxHP(this);
      }
      else
      {
        this->m_prtyPt.nPt[5] -= a4;
        v66 = CChar::GetMaxHP(this);
        if ( this->m_nCurHP >= v66 )
          v60 = v66;
        else
          v60 = this->m_nCurHP;
        this->m_nCurHP = v60;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 5, this->m_nCurHP, v66);
      CPlayer::UpdatePartyMember(this, 7);
      break;
    case 6:
      if ( bAdd )
      {
        this->m_prtyPt.nPt[6] += a4;
        v65 = CChar::GetMaxMP(this);
      }
      else
      {
        this->m_prtyPt.nPt[6] -= a4;
        v65 = CChar::GetMaxMP(this);
        if ( this->m_nCurMP >= v65 )
          v59 = v65;
        else
          v59 = this->m_nCurMP;
        this->m_nCurMP = v59;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 6, this->m_nCurMP, v65);
      break;
    case 9:
      if ( bAdd )
        v3 = a4 + this->m_prtyPt.nHit;
      else
        v3 = this->m_prtyPt.nHit - a4;
      this->m_prtyPt.nHit = v3;
      v4 = CChar::GetHit(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 9, v4);
      break;
    case 10:
      if ( bAdd )
        v5 = a4 + this->m_prtyPt.nDodge;
      else
        v5 = this->m_prtyPt.nDodge - a4;
      this->m_prtyPt.nDodge = v5;
      v53 = CChar::GetDodge(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 10, v53);
      break;
    case 11:
      if ( bAdd )
        v6 = a4 + this->m_prtyPt.nMinAttack;
      else
        v6 = this->m_prtyPt.nMinAttack - a4;
      this->m_prtyPt.nMinAttack = v6;
      v7 = CChar::GetMinAttack(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 11, v7);
      break;
    case 12:
      if ( bAdd )
        v8 = a4 + this->m_prtyPt.nMaxAttack;
      else
        v8 = this->m_prtyPt.nMaxAttack - a4;
      this->m_prtyPt.nMaxAttack = v8;
      v9 = CChar::GetMaxAttack(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 12, v9);
      break;
    case 13:
      if ( bAdd )
        v11 = a4 + this->m_prtyPt.nMinMagic;
      else
        v11 = this->m_prtyPt.nMinMagic - a4;
      this->m_prtyPt.nMinMagic = v11;
      v12 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 13, v12);
      break;
    case 14:
      if ( bAdd )
        v13 = a4 + this->m_prtyPt.nMaxMagic;
      else
        v13 = this->m_prtyPt.nMaxMagic - a4;
      this->m_prtyPt.nMaxMagic = v13;
      v14 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 13, v14);
      break;
    case 15:
      if ( bAdd )
      {
        this->m_prtyPt.nDefense[0] += a4;
        v16 = a5 + this->m_prtyPt.nDefense[1];
      }
      else
      {
        this->m_prtyPt.nDefense[0] -= a4;
        v16 = this->m_prtyPt.nDefense[1] - a5;
      }
      this->m_prtyPt.nDefense[1] = v16;
      v17 = CChar::GetDefense(this, 0);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 15, v17);
      break;
    case 16:
      if ( bAdd )
        v18 = a4 + this->m_prtyPt.nAbsorb;
      else
        v18 = this->m_prtyPt.nAbsorb - a4;
      this->m_prtyPt.nAbsorb = v18;
      v19 = CChar::GetAbsorb(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 16, v19);
      break;
    case 17:
      if ( bAdd )
        v20 = a4 + this->m_prtyPt.nASpeed;
      else
        v20 = this->m_prtyPt.nASpeed - a4;
      this->m_prtyPt.nASpeed = v20;
      v56 = CChar::GetASpeed(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 17, v56);
      break;
    case 18:
      if ( bAdd )
        v21 = a4 + this->m_prtyPt.nResist[0];
      else
        v21 = this->m_prtyPt.nResist[0] - a4;
      this->m_prtyPt.nResist[0] = v21;
      v22 = CChar::GetResist(this, 0);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 18, v22);
      break;
    case 19:
      if ( bAdd )
        v23 = a4 + this->m_prtyPt.nResist[1];
      else
        v23 = this->m_prtyPt.nResist[1] - a4;
      this->m_prtyPt.nResist[1] = v23;
      v24 = CChar::GetResist(this, 1);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 19, v24);
      break;
    case 20:
      if ( bAdd )
        v25 = a4 + this->m_prtyPt.nResist[2];
      else
        v25 = this->m_prtyPt.nResist[2] - a4;
      this->m_prtyPt.nResist[2] = v25;
      v57 = CChar::GetResist(this, 2);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 20, v57);
      break;
    case 21:
      if ( bAdd )
        v26 = a4 + this->m_prtyPt.nResist[3];
      else
        v26 = this->m_prtyPt.nResist[3] - a4;
      this->m_prtyPt.nResist[3] = v26;
      v27 = CChar::GetResist(this, 3);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 21, v27);
      break;
    case 22:
      if ( bAdd )
        v28 = a4 + this->m_prtyPt.nResist[4];
      else
        v28 = this->m_prtyPt.nResist[4] - a4;
      this->m_prtyPt.nResist[4] = v28;
      v29 = CChar::GetResist(this, 4);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 22, v29);
      break;
    case 27:
      if ( bAdd )
      {
        this->m_prtyPt.nMinAttack += a4;
        v10 = a5 + this->m_prtyPt.nMaxAttack;
      }
      else
      {
        this->m_prtyPt.nMinAttack -= a4;
        v10 = this->m_prtyPt.nMaxAttack - a5;
      }
      this->m_prtyPt.nMaxAttack = v10;
      v54 = CChar::GetMaxAttack(this);
      v45 = CChar::GetMinAttack(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 27, v45, v54);
      break;
    case 28:
      if ( bAdd )
      {
        this->m_prtyPt.nMinMagic += a4;
        v15 = a5 + this->m_prtyPt.nMaxMagic;
      }
      else
      {
        this->m_prtyPt.nMinMagic -= a4;
        v15 = this->m_prtyPt.nMaxMagic - a5;
      }
      this->m_prtyPt.nMaxMagic = v15;
      v55 = CChar::GetMaxMagic(this);
      v46 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 28, v46, v55);
      break;
    case 29:
      if ( bAdd )
      {
        this->m_prtyPt.nResist[0] += a4;
        this->m_prtyPt.nResist[1] += a4;
        this->m_prtyPt.nResist[2] += a4;
        this->m_prtyPt.nResist[3] += a4;
        v30 = a4 + this->m_prtyPt.nResist[4];
      }
      else
      {
        this->m_prtyPt.nResist[0] -= a4;
        this->m_prtyPt.nResist[1] -= a4;
        this->m_prtyPt.nResist[2] -= a4;
        this->m_prtyPt.nResist[3] -= a4;
        v30 = this->m_prtyPt.nResist[4] - a4;
      }
      this->m_prtyPt.nResist[4] = v30;
      v58 = CChar::GetResist(this, 4);
      v47 = CChar::GetResist(this, 3);
      v41 = CChar::GetResist(this, 2);
      v37 = CChar::GetResist(this, 1);
      v34 = CChar::GetResist(this, 0);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bwwwww", 29, v34, v37, v41, v47, v58);
      break;
    case 31:
      if ( bAdd )
        v31 = a4 + this->m_prtyPt.nFatal;
      else
        v31 = this->m_prtyPt.nFatal - a4;
      this->m_prtyPt.nFatal = v31;
      break;
    case 36:
      if ( bAdd )
        v32 = a4 + this->m_prtyPt.nMortal;
      else
        v32 = this->m_prtyPt.nMortal - a4;
      this->m_prtyPt.nMortal = v32;
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 36, this->m_prtyPt.nMortal);
      break;
    default:
      return;
  }
}

//----- (0045B100) --------------------------------------------------------
void __cdecl TODO_CPlayer::Attack(CPlayer *this, int a2, int a3, char a4, int a5)
{
  int v5; // eax
  int v6; // eax
  int v7; // ecx
  int v8; // edx
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // ecx
  int v13; // edx
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // ecx
  int v18; // edx
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // ecx
  int v23; // ecx
  int v24; // ecx
  int v25; // eax
  int v26; // eax
  int v27; // [esp-14h] [ebp-C4h]
  int v28; // [esp-10h] [ebp-C0h]
  int v29; // [esp-10h] [ebp-C0h]
  int v30; // [esp-Ch] [ebp-BCh]
  int v31; // [esp-Ch] [ebp-BCh]
  int v32; // [esp-Ch] [ebp-BCh]
  int v33; // [esp-8h] [ebp-B8h]
  int v34; // [esp-8h] [ebp-B8h]
  int v35; // [esp-8h] [ebp-B8h]
  int v36; // [esp-8h] [ebp-B8h]
  int v37; // [esp-8h] [ebp-B8h]
  int v38; // [esp-4h] [ebp-B4h]
  int v39; // [esp-4h] [ebp-B4h]
  int v40; // [esp-4h] [ebp-B4h]
  int v41; // [esp-4h] [ebp-B4h]
  int v42; // [esp-4h] [ebp-B4h]
  int v43; // [esp-4h] [ebp-B4h]
  int v44; // [esp-4h] [ebp-B4h]
  int v45; // [esp-4h] [ebp-B4h]
  int v46; // [esp+0h] [ebp-B0h]
  int v47; // [esp+4h] [ebp-ACh]
  int v48; // [esp+8h] [ebp-A8h]
  int v49; // [esp+Ch] [ebp-A4h]
  int v50; // [esp+10h] [ebp-A0h]
  int v51; // [esp+14h] [ebp-9Ch]
  int v52; // [esp+64h] [ebp-4Ch]
  int v53; // [esp+6Ch] [ebp-44h]
  int v54; // [esp+74h] [ebp-3Ch]
  int v55; // [esp+74h] [ebp-3Ch]
  int v56; // [esp+7Ch] [ebp-34h]
  int v57; // [esp+80h] [ebp-30h]
  int v58; // [esp+88h] [ebp-28h]
  int v59; // [esp+88h] [ebp-28h]
  int v60; // [esp+8Ch] [ebp-24h]
  int v61; // [esp+8Ch] [ebp-24h]
  int v62; // [esp+94h] [ebp-1Ch]
  int v63; // [esp+98h] [ebp-18h]
  int v64; // [esp+9Ch] [ebp-14h]
  int v65; // [esp+9Ch] [ebp-14h]
  int v66; // [esp+A4h] [ebp-Ch]
  int v67; // [esp+A4h] [ebp-Ch]

  switch ( a2 )
  {
    case 0:
      v66 = CChar::GetStr(this);
      this->m_prtyPt.nHit -= 15 * v66 / 54;
      this->m_prtyPt.nMinAttack -= (11 * v66 - 80) / 30;
      this->m_prtyPt.nMaxAttack -= (8 * v66 - 25) / 15;
      if ( a3 )
        this->m_prtyPer.nPer[0] += a4;
      else
        this->m_prtyPer.nPer[0] -= a4;
      v67 = CChar::GetStr(this);
      this->m_prtyPt.nHit += 15 * v67 / 54;
      this->m_prtyPt.nMinAttack += (11 * v67 - 80) / 30;
      this->m_prtyPt.nMaxAttack += (8 * v67 - 25) / 15;
      v38 = CChar::GetMaxAttack(this);
      v33 = CChar::GetMinAttack(this);
      v30 = CChar::GetHit(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 0, v67, v30, v33, v38);
      break;
    case 1:
      v64 = CChar::GetHth(this);
      v63 = dword_4D6A10[this->m_nClass];
      if ( a3 )
      {
        this->m_prtyBase.nBase[5] -= 2 * v64 * v64 / v63;
        this->m_prtyPt.nResist[4] -= v64 / 9;
        this->m_prtyPer.nPer[1] += a4;
        v65 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v65 * v65 / v63;
        this->m_prtyPt.nResist[4] += v65 / 9;
        v62 = CChar::GetMaxHP(this);
        if ( a4 < 0 )
        {
          if ( this->m_nCurHP >= v62 )
            v51 = v62;
          else
            v51 = this->m_nCurHP;
          this->m_nCurHP = v51;
        }
      }
      else
      {
        this->m_prtyBase.nBase[5] -= 2 * v64 * v64 / v63;
        this->m_prtyPt.nResist[4] -= v64 / 9;
        this->m_prtyPer.nPer[1] -= a4;
        v65 = CChar::GetHth(this);
        this->m_prtyBase.nBase[5] += 2 * v65 * v65 / v63;
        this->m_prtyPt.nResist[4] += v65 / 9;
        v62 = CChar::GetMaxHP(this);
        if ( a4 > 0 )
        {
          if ( this->m_nCurHP >= v62 )
            v50 = v62;
          else
            v50 = this->m_nCurHP;
          this->m_nCurHP = v50;
        }
      }
      v39 = CChar::GetResist(this, 4);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 1, v65, this->m_nCurHP, v62, v39);
      CPlayer::UpdatePartyMember(this, 7);
      break;
    case 2:
      v60 = CChar::GetInt(this);
      this->m_prtyPt.nMinMagic -= (7 * v60 - 20) / 12;
      this->m_prtyPt.nMaxMagic -= 7 * v60 / 12;
      this->m_prtyPt.nResist[0] -= v60 / 9;
      this->m_prtyPt.nResist[1] -= v60 / 9;
      this->m_prtyPt.nResist[2] -= v60 / 9;
      if ( a3 )
        this->m_prtyPer.nPer[2] += a4;
      else
        this->m_prtyPer.nPer[2] -= a4;
      v61 = CChar::GetInt(this);
      this->m_prtyPt.nMinMagic += (7 * v61 - 20) / 12;
      this->m_prtyPt.nMaxMagic += 7 * v61 / 12;
      this->m_prtyPt.nResist[0] += v61 / 9;
      this->m_prtyPt.nResist[1] += v61 / 9;
      this->m_prtyPt.nResist[2] += v61 / 9;
      v40 = CChar::GetResist(this, 2);
      v34 = CChar::GetResist(this, 1);
      v31 = CChar::GetResist(this, 0);
      v28 = CChar::GetMaxMagic(this);
      v27 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwwwww", 2, v61, v27, v28, v31, v34, v40);
      break;
    case 3:
      v58 = CChar::GetWis(this);
      v56 = dword_4D6A1C[this->m_nClass];
      if ( a3 )
      {
        this->m_prtyBase.nBase[6] -= v58 + 2 * v58 * v58 / v56;
        this->m_prtyPt.nMinMagic -= v58 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v58 / 45;
        this->m_prtyPt.nResist[3] -= v58 / 9;
        this->m_prtyPer.nPer[3] += a4;
        v59 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v59 + 2 * v59 * v59 / v56;
        this->m_prtyPt.nMinMagic += v59 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v59 / 45;
        this->m_prtyPt.nResist[3] += v59 / 9;
        v57 = CChar::GetMaxMP(this);
        if ( a4 < 0 )
        {
          if ( this->m_nCurMP >= v57 )
            v49 = v57;
          else
            v49 = this->m_nCurMP;
          this->m_nCurMP = v49;
        }
      }
      else
      {
        this->m_prtyBase.nBase[6] -= v58 + 2 * v58 * v58 / v56;
        this->m_prtyPt.nMinMagic -= v58 / 7;
        this->m_prtyPt.nMaxMagic -= 14 * v58 / 45;
        this->m_prtyPt.nResist[3] -= v58 / 9;
        this->m_prtyPer.nPer[3] -= a4;
        v59 = CChar::GetWis(this);
        this->m_prtyBase.nBase[6] += v59 + 2 * v59 * v59 / v56;
        this->m_prtyPt.nMinMagic += v59 / 7;
        this->m_prtyPt.nMaxMagic += 14 * v59 / 45;
        this->m_prtyPt.nResist[3] += v59 / 9;
        v57 = CChar::GetMaxMP(this);
        if ( a4 > 0 )
        {
          if ( this->m_nCurMP >= v57 )
            v48 = v57;
          else
            v48 = this->m_nCurMP;
          this->m_nCurMP = v48;
        }
      }
      v41 = CChar::GetResist(this, 3);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwww", 3, v59, this->m_nCurMP, v57, v41);
      break;
    case 4:
      v54 = CChar::GetDex(this);
      this->m_prtyPt.nHit -= v54 / 8;
      this->m_prtyPt.nDodge -= v54 / 3;
      this->m_prtyPt.nMinAttack -= (v54 - 5) / 11;
      this->m_prtyPt.nMaxAttack -= 18 * v54 / 77;
      if ( a3 )
        this->m_prtyPer.nPer[4] += a4;
      else
        this->m_prtyPer.nPer[4] -= a4;
      v55 = CChar::GetDex(this);
      this->m_prtyPt.nHit += v55 / 8;
      this->m_prtyPt.nDodge += v55 / 3;
      this->m_prtyPt.nMinAttack += (v55 - 5) / 11;
      this->m_prtyPt.nMaxAttack += 18 * v55 / 77;
      v42 = CChar::GetMaxAttack(this);
      v35 = CChar::GetMinAttack(this);
      v32 = CChar::GetDodge(this);
      v29 = CChar::GetHit(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bbwwww", 4, v55, v29, v32, v35, v42);
      break;
    case 5:
      if ( a3 )
      {
        this->m_prtyPer.nPer[5] += a4;
        v53 = CChar::GetMaxHP(this);
      }
      else
      {
        this->m_prtyPer.nPer[5] -= a4;
        v53 = CChar::GetMaxHP(this);
        if ( this->m_nCurHP >= v53 )
          v47 = v53;
        else
          v47 = this->m_nCurHP;
        this->m_nCurHP = v47;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 5, this->m_nCurHP, v53);
      CPlayer::UpdatePartyMember(this, 7);
      break;
    case 6:
      if ( a3 )
      {
        this->m_prtyPer.nPer[6] += a4;
        v52 = CChar::GetMaxMP(this);
      }
      else
      {
        this->m_prtyPer.nPer[6] -= a4;
        v52 = CChar::GetMaxMP(this);
        if ( this->m_nCurMP >= v52 )
          v46 = v52;
        else
          v46 = this->m_nCurMP;
        this->m_nCurMP = v46;
      }
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 6, this->m_nCurMP, v52);
      CPlayer::UpdatePartyMember(this, 8);
      break;
    case 9:
      if ( a3 )
        v5 = a4 + this->m_prtyPer.nHit;
      else
        v5 = this->m_prtyPer.nHit - a4;
      this->m_prtyPer.nHit = v5;
      v6 = CChar::GetHit(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 9, v6);
      break;
    case 10:
      if ( a3 )
        v7 = a4 + this->m_prtyPer.nDodge;
      else
        v7 = this->m_prtyPer.nDodge - a4;
      this->m_prtyPer.nDodge = v7;
      v43 = CChar::GetDodge(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 10, v43);
      break;
    case 11:
      if ( a3 )
        v8 = a4 + this->m_prtyPer.nMinAttack;
      else
        v8 = this->m_prtyPer.nMinAttack - a4;
      this->m_prtyPer.nMinAttack = v8;
      v9 = CChar::GetMinAttack(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 11, v9);
      break;
    case 12:
      if ( a3 )
        v10 = a4 + this->m_prtyPer.nMaxAttack;
      else
        v10 = this->m_prtyPer.nMaxAttack - a4;
      this->m_prtyPer.nMaxAttack = v10;
      v11 = CChar::GetMaxAttack(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 12, v11);
      break;
    case 13:
      if ( a3 )
        v13 = a4 + this->m_prtyPer.nMinMagic;
      else
        v13 = this->m_prtyPer.nMinMagic - a4;
      this->m_prtyPer.nMinMagic = v13;
      v14 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 13, v14);
      break;
    case 14:
      if ( a3 )
        v15 = a4 + this->m_prtyPer.nMaxMagic;
      else
        v15 = this->m_prtyPer.nMaxMagic - a4;
      this->m_prtyPer.nMaxMagic = v15;
      v16 = CChar::GetMaxMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 14, v16);
      break;
    case 15:
      if ( a3 )
      {
        this->m_prtyPer.nDefense[0] += a4;
        v18 = a5 + this->m_prtyPer.nDefense[1];
      }
      else
      {
        this->m_prtyPer.nDefense[0] -= a4;
        v18 = this->m_prtyPer.nDefense[1] - a5;
      }
      this->m_prtyPer.nDefense[1] = v18;
      v19 = CChar::GetDefense(this, 0);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 15, v19);
      break;
    case 16:
      if ( a3 )
        v20 = a4 + this->m_prtyPer.nAbsorb;
      else
        v20 = this->m_prtyPer.nAbsorb - a4;
      this->m_prtyPer.nAbsorb = v20;
      v21 = CChar::GetAbsorb(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 16, v21);
      break;
    case 17:
      if ( a3 )
        v22 = a4 + this->m_prtyPer.nASpeed;
      else
        v22 = this->m_prtyPer.nASpeed - a4;
      this->m_prtyPer.nASpeed = v22;
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bw", 17, this->m_prtyPer.nASpeed);
      break;
    case 27:
      if ( a3 )
      {
        this->m_prtyPer.nMinAttack += a4;
        v12 = a5 + this->m_prtyPer.nMaxAttack;
      }
      else
      {
        this->m_prtyPer.nMinAttack -= a4;
        v12 = this->m_prtyPer.nMaxAttack - a5;
      }
      this->m_prtyPer.nMaxAttack = v12;
      v44 = CChar::GetMaxAttack(this);
      v36 = CChar::GetMinAttack(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 27, v36, v44);
      break;
    case 28:
      if ( a3 )
      {
        this->m_prtyPer.nMinMagic += a4;
        v17 = a5 + this->m_prtyPer.nMaxMagic;
      }
      else
      {
        this->m_prtyPer.nMinMagic -= a4;
        v17 = this->m_prtyPer.nMaxMagic - a5;
      }
      this->m_prtyPer.nMaxMagic = v17;
      v45 = CChar::GetMaxMagic(this);
      v37 = CChar::GetMinMagic(this);
      CPlayer::Write(this, S2C_UPDATEPROPERTY, "bww", 28, v37, v45);
      break;
    case 31:
      if ( a3 )
        v23 = a4 + this->m_prtyPer.nFatal;
      else
        v23 = this->m_prtyPer.nFatal - a4;
      this->m_prtyPer.nFatal = v23;
      break;
    case 32:
      if ( a3 )
        v24 = a4 + this->m_prtyPer.nMSpeed;
      else
        v24 = this->m_prtyPer.nMSpeed - a4;
      this->m_prtyPer.nMSpeed = v24;
      CChar::WriteInSight(this, S2C_UPDATEMPROPERTY, "dbw", this->m_nId, 32, this->m_prtyPer.nMSpeed);
      break;
    case 33:
      if ( a3 )
        v25 = a4 + this->m_prtyPer.nBlock;
      else
        v25 = this->m_prtyPer.nBlock - a4;
      this->m_prtyPer.nBlock = v25;
      break;
    case 37:
      if ( a3 )
        v26 = a4 + this->m_prtyPer.nHost;
      else
        v26 = this->m_prtyPer.nHost - a4;
      this->m_prtyPer.nHost = v26;
      break;
    default:
      return;
  }
}

//----- (0045C740) --------------------------------------------------------
void __thiscall CPlayer::Attack(CPlayer *this, int nKind, int nId)
{
  int v3; // eax
  int v4; // esi
  CBuffMoveSpeed *v5; // eax
  CBuffMoveSpeed *v6; // eax
  CBuffMoveSpeed *v7; // eax
  CBuffMoveSpeed *v8; // eax
  CBuffMoveSpeed *v9; // eax
  CBuffMoveSpeed *v10; // eax
  CBuffMoveSpeed *v11; // eax
  int v12; // [esp-10h] [ebp-48h]
  int v13; // [esp-Ch] [ebp-44h]
  int v14; // [esp-8h] [ebp-40h]
  int v15; // [esp-4h] [ebp-3Ch]
  unsigned int v16; // [esp+4h] [ebp-34h]
  unsigned int v17; // [esp+8h] [ebp-30h]
  int bFatal; // [esp+14h] [ebp-24h] BYREF
  int nPalsyDamage; // [esp+18h] [ebp-20h] BYREF
  int nNetDamage; // [esp+1Ch] [ebp-1Ch] BYREF
  int bBlock; // [esp+20h] [ebp-18h]
  int bSuccess; // [esp+24h] [ebp-14h]
  unsigned int nASpeed; // [esp+28h] [ebp-10h]
  unsigned int dwCurTick; // [esp+2Ch] [ebp-Ch]
  CChar *pChar; // [esp+30h] [ebp-8h]
  unsigned int dwReviseTick; // [esp+34h] [ebp-4h]

  if ( CChar::IsNormal(this) && !CChar::IsGState(this, 4) && CPlayer::IsWState(this, 0) )
  {
    pChar = 0;
    if ( nKind )
    {
      if ( nKind == 1 )
        pChar = CMonster::FindMonster(nId);
    }
    else
    {
      pChar = (CChar *)CPlayer::FindPlayer(nId);
    }
    if ( pChar )
    {
      if ( this->CanAttack(this, pChar, 0) )
      {
        nASpeed = CChar::GetASpeed(this);
        dwReviseTick = nASpeed;
        dwCurTick = GetTickCount();
        if ( dwCurTick < this->m_dwNextAction )
          dwReviseTick -= this->m_dwNextAction - dwCurTick;
        if ( this->m_nMap == pChar->m_nMap && CChar::IsNormal(pChar) )
        {
          this->m_dwNextAction = nASpeed + dwCurTick;
          CChar::SetDirection(this, pChar->m_ptPixel.x - this->m_ptPixel.x, pChar->m_ptPixel.y - this->m_ptPixel.y);
          nNetDamage = 0;
          nPalsyDamage = 0;
          bFatal = 0;
          bSuccess = 0;
          bBlock = 0;
          bBlock = pChar->CheckBlock(pChar, this);
          if ( !bBlock )
          {
            if ( CChar::CheckHit(this, pChar, 0) )
            {
              if ( this->m_nClass == 1 )
                v17 = 0;
              else
                v17 = dwReviseTick * this->GetPalsyDamage(this, pChar) / nASpeed;
              nPalsyDamage = v17;
              v3 = CChar::GetAttack(this);
              bSuccess = pChar->Damage(pChar, this, dwReviseTick * v3 / nASpeed, &nNetDamage, &bFatal, &nPalsyDamage, 0);
              if ( bSuccess )
              {
                if ( (this->m_nGState & 0x7FF00000) != 0 )
                {
                  v4 = this->m_nGState < 0 ? 10 : 5;
                  if ( v4 > Random(0, 99) )
                  {
                    v16 = this->m_nGState & 0x7FF00000;
                    if ( v16 > 0x1000000 )
                    {
                      if ( v16 == 0x2000000 )
                      {
                        v10 = CBuff::CreateBuff(116, 1, 5, nNetDamage / 10);
                        pChar->AddBuff(pChar, v10);
                        CChar::WriteInSight(this, S2C_EFFECT, "db", nId, 34);
                      }
                      else if ( v16 == 0x4000000 )
                      {
                        v11 = CBuff::CreateBuff(7, 2);
                        pChar->AddBuff(pChar, v11);
                        CChar::WriteInSight(this, S2C_EFFECT, "db", nId, 35);
                      }
                    }
                    else
                    {
                      switch ( v16 )
                      {
                        case 0x1000000u:
                          v8 = CBuff::CreateBuff(116, 1, 5, 7 * nNetDamage / 100);
                          pChar->AddBuff(pChar, v8);
                          v9 = CBuff::CreateBuff(117, 5, -10, -10);
                          pChar->AddBuff(pChar, v9);
                          CChar::WriteInSight(this, S2C_EFFECT, "db", nId, 33);
                          break;
                        case 0x400000u:
                          v5 = CBuff::CreateBuff(116, 1, 5, nNetDamage / 10);
                          pChar->AddBuff(pChar, v5);
                          CChar::WriteInSight(this, S2C_EFFECT, "db", nId, 31);
                          break;
                        case 0x800000u:
                          v6 = CBuff::CreateBuff(116, 1, 5, 7 * nNetDamage / 100);
                          pChar->AddBuff(pChar, v6);
                          v7 = CBuff::CreateBuff(118, 5, -50);
                          pChar->AddBuff(pChar, v7);
                          CChar::WriteInSight(this, S2C_EFFECT, "db", nId, 32);
                          break;
                      }
                    }
                  }
                }
              }
              else
              {
                pChar->Defense(pChar, this);
              }
            }
            else
            {
              pChar->Defense(pChar, this);
            }
          }
          v15 = bSuccess | (2 * bFatal) | (4 * bBlock);
          v14 = nPalsyDamage;
          v13 = nNetDamage;
          v12 = CBase::Id(pChar);
          CChar::WriteInSight(this, S2C_ATTACK, "ddwwb", this->m_nId, v12, v13, v14, v15);
        }
        CIOObject::Release(pChar, &pChar->m_nFindRef);
      }
      else
      {
        CIOObject::Release(pChar, &pChar->m_nFindRef);
      }
    }
  }
}
// 45C740: inconsistent function type and number of purged bytes

//----- (0045CC00) --------------------------------------------------------
void __thiscall CPlayer::LevelUp(CPlayer *this)
{
  this->UpdateProperty(this, 26, 1, 1);
  this->UpdateProperty(this, 23, 1, 5);
  this->UpdateProperty(this, 24, 1, 1);
  this->m_nKilled = 0;
  CPlayer::SaveAllProperty(this, 1);
  CPlayerSkill::LevelUpAutoLearnSkill(&this->m_skill, 0);
  CPlayer::MLMPayMoney(this, 2);
  CPlayer::MLMLevelUp((CIOCriticalSection *)this);
}

//----- (0045CC90) --------------------------------------------------------
void __thiscall CPlayer::Teleport(CPlayer *this, int nMap, const tagPOINT *ptPDest, int nZ, int bCheat)
{
  int v5; // ecx
  int v6; // eax
  __int64 v7; // [esp-4h] [ebp-Ch]
  _DWORD *a1; // [esp+0h] [ebp-8h]
  CSMap *pMap; // [esp+4h] [ebp-4h]

  HIDWORD(v7) = this;
  if ( nMap == -1 )
  {
    LOG_ERR("Map# Is -1. (PID:%d  UID :%d)", this->m_nPID, this->m_nUID);
  }
  else
  {
    pMap = CSMap::FindSMap(nMap);
    if ( pMap )
    {
      LODWORD(v7) = 0;
      if ( CSMap::IsOnTile(pMap, ptPDest, v7) )
      {
        CChar::SubMState(0, 1i64);
        a1[372] = nMap;
        v5 = ptPDest->y;
        a1[373] = ptPDest->x;
        a1[374] = v5;
        CPlayer::Write((CPlayer *)bCheat, S2C_TELEPORT, "bdddb", nMap, ptPDest->x, ptPDest->y, nZ, bCheat);
        v6 = CMapObject::GetState((CMapObject *)&dword_4E2758[15 * nMap]);
        CPlayer::Write(0, S2C_MAPSTATE, "bb", v6);
      }
    }
  }
}
// 45CD03: variable 'a1' is possibly undefined

//----- (0045CD80) --------------------------------------------------------
int __thiscall CSMap::IsOnTile(CSMap *this, const tagPOINT *ptP, __int64 dwAttr)
{
  CCellMap *v4; // eax
  __int64 v5; // [esp-4h] [ebp-10h]
  tagPOINT ptT; // [esp+4h] [ebp-8h] BYREF

  HIDWORD(v5) = this;
  ptT.x = ptP->x >> 5;
  ptT.y = ptP->y >> 5;
  if ( ptT.x < 0 || ptT.x >> 8 >= 64 || ptT.y < 0 || ptT.y >> 8 >= 64 )
    return 0;
  LODWORD(v5) = dwAttr;
  v4 = CSMap::_GetCellMap(this, &ptT);
  return CCellMap::IsOnTile(v4, &ptT, v5);
}

//----- (0045CDF0) --------------------------------------------------------
int __thiscall CCellMap::IsOnTile(CCellMap *this, const tagPOINT *ptT, __int64 dwAttr)
{
  tagPOINT _ptT; // [esp+4h] [ebp-8h] BYREF

  if ( !this )
    return 0;
  if ( !(_DWORD)dwAttr )
    return 1;
  _ptT.x = (unsigned __int8)ptT->x;
  _ptT.y = (unsigned __int8)ptT->y;
  return dwAttr & CCellMap::GetTile(this, &_ptT)->m_dwAttr;
}

//----- (0045CE50) --------------------------------------------------------
void __thiscall CPlayer::OnTeleport(CPlayer *this, int bAns, int nZ)
{
  int *GuildClassTitle; // eax
  int *GuildName; // [esp-10h] [ebp-1Ch]
  int m_nGID; // [esp-Ch] [ebp-18h]
  int m_nTFlag; // [esp-8h] [ebp-14h]
  int m_nStandard; // [esp-4h] [ebp-10h]
  CSMap *pMap; // [esp+4h] [ebp-8h]
  CIOBuffer *pBuffer; // [esp+8h] [ebp-4h]

  if ( bAns )
  {
    CChar::Lock(this);
    pMap = CSMap::FindSMap(this->m_nTeleMap);
    if ( pMap )
    {
      if ( CSMap::RemoveFromMap(this->m_pMap, this, &this->m_ptTile) )
      {
        CChar::WriteInSight(this, S2C_REMOVEPLAYER, "d", this->m_nId);
        if ( CChar::IsGState(this, 8) )
        {
          CChar::SubGState(this, 10);
          CPlayer::Write(this, S2C_GSTATE, "dd", this->m_nId, this->m_nGState);
          CPlayer::SubEState(this, 8);
        }
        if ( CChar::IsGState(this, 4096) )
          CChar::SubGState(this, 4096);
        this->m_nMap = this->m_nTeleMap;
        this->m_pMap = pMap;
        CChar::SetXY(this, &this->m_ptTelePixel);
        this->m_nZ = nZ;
        CSMap::SetOnMap(this->m_pMap, this, &this->m_ptTile);
        m_nStandard = this->m_nStandard;
        m_nTFlag = this->m_nTFlag;
        m_nGID = this->m_nGID;
        GuildName = CPlayer::GetGuildName((int *)this);
        GuildClassTitle = CPlayer::GetGuildClassTitle((int *)this);
        pBuffer = (CIOBuffer *)MakePacket(
                                 S2C_CREATEPLAYER,
                                 "dsbdddwdmbbIssdbd",
                                 this->m_nId,
                                 this->m_szName,
                                 this->m_nClass,
                                 this->m_ptPixel.x,
                                 this->m_ptPixel.y,
                                 this->m_nZ,
                                 this->m_nDir,
                                 this->m_nGState,
                                 this->m_wWearItem,
                                 14,
                                 this->m_nFace,
                                 this->m_nHair,
                                 LODWORD(this->m_nMState),
                                 HIDWORD(this->m_nMState),
                                 GuildClassTitle,
                                 GuildName,
                                 m_nGID,
                                 m_nTFlag,
                                 m_nStandard);
        CSMap::SendCreateInSight(this->m_pMap, this, &this->m_ptTile, pBuffer);
        CIOBuffer::Release(pBuffer);
        CChar::Unlock(this);
      }
      else
      {
        CChar::Unlock(this);
        LOG_ERR(
          "CPlayer::OnTeleport() Can't remove player pointer. (%d, %d, %d) (PID:%d, UID: %d) ",
          this->m_nMap,
          this->m_ptTile.x,
          this->m_ptTile.y,
          this->m_nPID,
          this->m_nUID);
      }
    }
    else
    {
      CChar::Unlock(this);
    }
  }
}

//----- (0045D0D0) --------------------------------------------------------
int __thiscall CPlayer::_IntoInven(CPlayer *this, CItem *pItem)
{
  std::pair<std::_Tree<std::_Tmap_traits<int,CItem *,std::less<int>,std::allocator<std::pair<int const ,CItem *> >,0> >::iterator,bool> *r; // eax
  char v5[8]; // [esp+4h] [ebp-10h] BYREF
  char v6[8]; // [esp+Ch] [ebp-8h] BYREF

  CIOObject::AddRef(pItem, &pItem->m_nMapRef);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v5);
  sub_445DF0(
    (int)&this->m_mapItem,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v6,
    (const std::pair<int const ,CGame_Character::TargetInfo> *)r);
  if ( v6[4] )
    return 1;
  CIOObject::Release(pItem, &pItem->m_nMapRef);
  return 0;
}
// 45D109: variable 'r' is possibly undefined

//----- (0045D140) --------------------------------------------------------
void __thiscall CPlayer::_OutofInven(CPlayer *this, CItem *pItem)
{
  if ( sub_470740(
         (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&this->m_mapItem,
         (int)&pItem->m_nIID) )
  {
    CIOObject::Release(pItem, &pItem->m_nMapRef);
  }
  else
  {
    ELOG("CPlayer()::_OutofInven() Not in ItemMap. (IID:%d)", pItem->m_nIID);
  }
}

//----- (0045D190) --------------------------------------------------------
CItem *__thiscall CPlayer::FindItem(CPlayer *this, int nIndex, int nNum)
{
  CItem *pItem; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  pItem = CPlayer::_FindItem(this, nIndex, nNum);
  CIOCriticalSection::Leave((int)&this->m_lockItem);
  return pItem;
}

//----- (0045D1E0) --------------------------------------------------------
CItem *__thiscall CPlayer::_FindItem(CPlayer *this, int nIndex, int nNum)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-8h] BYREF
  CItem *pItem; // [esp+10h] [ebp-4h]

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapItem,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v6);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v3) )
      break;
    pItem = *(CItem **)(sub_420250(&it) + 4);
    if ( nIndex == pItem->m_pInit->m_nIndex && pItem->m_nNum >= nNum )
      return pItem;
    sub_446090((int *)&it, &v7, 0);
  }
  return 0;
}

//----- (0045D270) --------------------------------------------------------
CItem *__thiscall CPlayer::_FindMergeItem(CPlayer *this, CItem *pConvItem)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-8h] BYREF
  CItem *pItem; // [esp+10h] [ebp-4h]

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapItem,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    pItem = *(CItem **)(sub_420250(&it) + 4);
    if ( pItem->CanMerge(pItem, pConvItem) )
      return pItem;
    sub_446090((int *)&it, &v6, 0);
  }
  return 0;
}

//----- (0045D2F0) --------------------------------------------------------
void __thiscall CPlayer::BuyItemEx(CPlayer *this, int nNPCId, int nTaxRatePrev, int nMax, char *info, char *end)
{
  CItemMoney *pMoney; // [esp+4h] [ebp-3Ch]
  int nReturn; // [esp+8h] [ebp-38h]
  int nTotalMoney; // [esp+Ch] [ebp-34h]
  CItem *pItem; // [esp+10h] [ebp-30h]
  int n; // [esp+14h] [ebp-2Ch]
  int nTaxRate; // [esp+18h] [ebp-28h]
  int nIndex; // [esp+1Ch] [ebp-24h]
  unsigned __int16 wIndex; // [esp+20h] [ebp-20h] BYREF
  BOOL bPayment; // [esp+24h] [ebp-1Ch]
  int nTax; // [esp+28h] [ebp-18h]
  int nNum; // [esp+2Ch] [ebp-14h]
  CCastle *v19; // [esp+30h] [ebp-10h]
  CTrade *v20; // [esp+34h] [ebp-Ch]
  CIOObject *v21; // [esp+38h] [ebp-8h]
  unsigned __int16 v22; // [esp+3Ch] [ebp-4h] BYREF

  CChar::Lock(this);
  v20 = this->m_pTrade;
  CChar::Unlock(this);
  if ( !v20 )
  {
    v21 = CNPC::FindNPC(nNPCId);
    if ( v21 )
    {
      if ( !((int (__thiscall *)(CIOObject *, tagPOINT *))v21->__vftable[7].OnIOCallback)(v21, &this->m_ptPixel) )
      {
        CIOObject::Release(v21);
        return;
      }
      bPayment = 0;
      nTaxRate = 100;
      v19 = (CCastle *)CCastle::GetCastle((unsigned int)v21[29].__vftable);
      CIOObject::Release(v21);
      if ( v19 )
      {
        nTaxRate = CCastle::GetTaxRate(v19);
        if ( nTaxRatePrev != nTaxRate )
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 69, (unsigned __int8)nTaxRate);
          return;
        }
        bPayment = CCastle::IsPayment(v19);
      }
      CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
      for ( n = 0; this->m_pMoney && n < nMax; ++n )
      {
        info = ScanPacket(info, end, "ww", &wIndex, &v22);
        nIndex = wIndex;
        nNum = v22;
        if ( v22 )
        {
          pItem = CItem::CreateItem(wIndex, 0, nNum, -1);
          if ( pItem )
          {
            nTotalMoney = nNum * (nTaxRate * pItem->m_pInit->m_nBuy / 100);
            if ( nTotalMoney <= 0 )
            {
              CBase::Delete(pItem);
              if ( !nTotalMoney )
              {
                CIOCriticalSection::Leave((int)&this->m_lockItem);
                LOG_ERR(
                  "    (HACK USER ^^) -- PID :%d , UID :%d, ItemIndex : %d ",
                  this->m_nPID,
                  this->m_nUID,
                  nIndex);
                LOG_NORMAL(
                  "[Kickout] At BuyItemEx() '%s' (PID:%d) %p %x %x %x",
                  this->m_szName,
                  this->m_nPID,
                  this->m_pSocket->m_pPlayer,
                  this->m_bit,
                  this->m_pSocket->m_bit,
                  this);
                CPlayer::Write(this, S2C_CLOSE, "b", 1);
                CSocket::Logout(this->m_pSocket, 1);
                return;
              }
            }
            else
            {
              if ( this->m_pMoney && this->m_pMoney->m_nNum < nTotalMoney )
              {
                CBase::Delete(pItem);
                break;
              }
              CIOObject::AddRef((int)pItem);
              nReturn = CPlayer::_InsertItem(this, 7, pItem);
              if ( nReturn == 1 )
              {
                pMoney = this->m_pMoney;
                if ( !pMoney->UpdateNum(pMoney, this, 7, -nTotalMoney) )
                  CPlayer::_OutofInven(this, pMoney);
                if ( bPayment )
                {
                  nTax = 3 * (nTotalMoney - nNum * (85 * pItem->m_pInit->m_nBuy / 100)) / 10;
                  CCastle::AddTax(v19, nTax);
                }
              }
              else
              {
                CBase::Delete(pItem);
              }
              CIOObject::Release(pItem);
              if ( nReturn == 2 )
                break;
            }
          }
        }
      }
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
  }
}
// 45D5F7: variable 'this' is possibly undefined

//----- (0045D630) --------------------------------------------------------
void __thiscall CPlayer::SellItem(CPlayer *this, int nNPCId, int nMax, char *info, char *nNum)
{
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-28h] BYREF
  CItem *pMoney; // [esp+8h] [ebp-24h]
  int nSellMoney; // [esp+Ch] [ebp-20h]
  CItem *pItem; // [esp+10h] [ebp-1Ch]
  int it; // [esp+14h] [ebp-18h] BYREF
  int n; // [esp+18h] [ebp-14h]
  int v13; // [esp+1Ch] [ebp-10h]
  CTrade *pTrade; // [esp+20h] [ebp-Ch]
  unsigned __int16 wNum; // [esp+24h] [ebp-8h] BYREF
  int nIID; // [esp+28h] [ebp-4h] BYREF

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  CChar::Unlock(this);
  if ( !pTrade && CNPC::CanReply(nNPCId, &this->m_ptPixel) )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    for ( n = 0; n < nMax; ++n )
    {
      info = ScanPacket(info, nNum, "dw", &nIID, &wNum);
      v13 = wNum;
      if ( wNum )
      {
        sub_44AE20(&this->m_mapItem, &it, &nIID);
        v5 = sub_430C20(&this->m_mapItem, (int)v7);
        if ( !(unsigned __int8)unknown_libname_8(v5) )
        {
          pItem = *(CItem **)(sub_420250(&it) + 4);
          if ( pItem->CanSell(pItem, v13) )
          {
            nSellMoney = pItem->GetSellMoney(pItem, v13);
            if ( !pItem->UpdateNum(pItem, this, 8, -v13) )
              CPlayer::_OutofInven(this, pItem);
            pMoney = CItem::CreateItem(31, 0, nSellMoney, -1);
            if ( pMoney )
            {
              if ( !CPlayer::_InsertItem(this, 8, pMoney) )
              {
                LOG_ERR("CPlayer::SellItem() Fail to insert money(%d).", nSellMoney);
                CBase::Delete(pMoney);
              }
            }
          }
        }
      }
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045D7E0) --------------------------------------------------------
void __thiscall CPlayer::DropItem(CPlayer *this, int nIID, int pNum)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+10h] [ebp-24h] BYREF
  CItem *pNewItem; // [esp+14h] [ebp-20h]
  tagPOINT ptP; // [esp+18h] [ebp-1Ch] BYREF
  tagPOINT ptT; // [esp+20h] [ebp-14h] BYREF
  CItem *pItem; // [esp+28h] [ebp-Ch]
  CItem *v10; // [esp+2Ch] [ebp-8h]
  std::_Tree<std::_Tmap_traits<int,CItem *,std::less<int>,std::allocator<std::pair<int const ,CItem *> >,0> >::iterator *v11; // [esp+30h] [ebp-4h] BYREF

  CChar::Lock(this);
  v10 = (CItem *)this->m_pTrade;
  CChar::Unlock(this);
  if ( !v10 && pNum > 0 )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    sub_44AE20(&this->m_mapItem, &v11, &nIID);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v5);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v11,
           v3) )
    {
      pItem = *(CItem **)(sub_420250(&v11) + 4);
      if ( pItem->CanDrop(pItem, pNum, this) )
      {
        CChar::GetDropPt(this, &ptP);
        ptT.x = ptP.x >> 5;
        ptT.y = ptP.y >> 5;
        if ( pItem->m_nNum <= pNum )
        {
          if ( CSMap::SetOnMap(this->m_pMap, pItem, &ptT) )
          {
            pItem->Drop(pItem, this, &ptP, &ptT, 1, 0, 0);
            CPlayer::_OutofInven(this, pItem);
          }
        }
        else
        {
          pNewItem = CItem::CreateItem(pItem->m_pInit->m_nIndex, 0, pNum, pItem->m_nVer);
          if ( pNewItem )
          {
            if ( CSMap::SetOnMap(this->m_pMap, pNewItem, &ptT) )
            {
              pNewItem->Drop(pNewItem, this, &ptP, &ptT, 0, 0, 0);
              pItem->UpdateNum(pItem, this, 11, -pNum);
            }
            else if ( pNewItem )
            {
              ((void (__thiscall *)(CItem *, int))pNewItem->~CIOObject)(pNewItem, 1);
            }
          }
        }
      }
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
}

//----- (0045D9C0) --------------------------------------------------------
void __thiscall CPlayer::TrashItem(CPlayer *this, int nIID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  CItem *pItem; // [esp+8h] [ebp-Ch]
  CTrade *pTrade; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  CChar::Unlock(this);
  if ( !pTrade )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    sub_44AE20(&this->m_mapItem, &it, &nIID);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v4);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &it,
           v2) )
    {
      pItem = *(CItem **)(sub_420250(&it) + 4);
      if ( !pItem->m_pInit->m_bPay )
      {
        if ( pItem->Trash(pItem, this, 4) )
          CPlayer::_OutofInven(this, pItem);
      }
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
}

//----- (0045DA90) --------------------------------------------------------
int __thiscall CPlayer::RemoveItem(CPlayer *this, int nLogType, int nIndex, int nNum)
{
  int result; // eax
  CItem *pItem; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  pItem = CPlayer::_FindItem(this, nIndex, nNum);
  if ( pItem )
  {
    if ( !pItem->UpdateNum(pItem, this, nLogType, -nNum) )
    {
      if ( pItem->IsQuestItem(pItem) )
        --this->m_nQuestItem;
      CPlayer::_OutofInven(this, pItem);
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    result = 1;
  }
  else
  {
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    result = 0;
  }
  return result;
}

//----- (0045DB40) --------------------------------------------------------
void __thiscall CPlayer::PutOnItem(CPlayer *this, int nIID)
{
  std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // [esp-4h] [ebp-20h]
  int v5; // [esp+0h] [ebp-1Ch]
  char v7[4]; // [esp+8h] [ebp-14h] BYREF
  char v8[4]; // [esp+Ch] [ebp-10h] BYREF
  char v9[4]; // [esp+10h] [ebp-Ch] BYREF
  CTrade *pTrade; // [esp+14h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+18h] [ebp-4h] BYREF

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  CChar::Unlock(this);
  if ( !pTrade )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapStall, (int)v8);
    v2 = (std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_4714F0(&this->m_mapStall, v9, &nIID);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           v2,
           v4) )
    {
      CPlayer::Write(this, S2C_MESSAGE, "b", 52);
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
    else
    {
      sub_44AE20(&this->m_mapItem, &it, &nIID);
      v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v7);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &it,
             v3) )
      {
        v5 = *(_DWORD *)(sub_420250(&it) + 4);
        (*(void (__thiscall **)(int, CPlayer *))(*(_DWORD *)v5 + 96))(v5, this);
      }
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
  }
}

//----- (0045DC50) --------------------------------------------------------
void __thiscall CPlayer::PutOffItem(CPlayer *this, int nIID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  CTrade *pTrade; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  CChar::Unlock(this);
  if ( !pTrade )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    sub_44AE20(&this->m_mapItem, &it, &nIID);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v5);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &it,
           v2) )
    {
      v3 = sub_420250(&it);
      (*(void (__thiscall **)(_DWORD, CPlayer *))(**(_DWORD **)(v3 + 4) + 100))(*(_DWORD *)(v3 + 4), this);
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
}

//----- (0045DD00) --------------------------------------------------------
void __thiscall CPlayer::UseItem(CPlayer *this, int nIID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  CItem *pItem; // [esp+8h] [ebp-Ch]
  CTrade *pTrade; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  CChar::Unlock(this);
  if ( !pTrade )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    sub_44AE20(&this->m_mapItem, &it, &nIID);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v4);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &it,
           v2) )
    {
      pItem = *(CItem **)(sub_420250(&it) + 4);
      if ( !pItem->Use(pItem, this) )
        CPlayer::_OutofInven(this, pItem);
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
}

//----- (0045DDC0) --------------------------------------------------------
int __thiscall CPlayer::InsertItem(CPlayer *this, int nType, CItem *pAddItem)
{
  int nReturn; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  nReturn = CPlayer::_InsertItem(this, nType, pAddItem);
  CIOCriticalSection::Leave((int)&this->m_lockItem);
  return nReturn;
}

//----- (0045DE10) --------------------------------------------------------
int __thiscall CPlayer::_InsertItem(CPlayer *this, int nType, CItem *pAddItem)
{
  int bOldItem; // [esp+4h] [ebp-8h]
  CItem *pItem; // [esp+8h] [ebp-4h]
                                                // CItem is a bit outdated missing 1 function (gap70) on bottom -HighGamer
  if ( pAddItem->m_pInit->m_bPlural && (pItem = CPlayer::_FindMergeItem(this, pAddItem)) != 0 )
  {
    pItem->UpdateNum(pItem, this, nType, pAddItem->m_nNum);
    pAddItem->SetEtc(pAddItem, this);
    pAddItem->Erase(pAddItem, nType);
  }
  else
  {
    if ( CPlayer::GetInvenSize((char *)this) >= 60
      && nType != 10
      && nType != 8
      && nType != 25
      && nType != 16
      && nType != 24
      && nType != 2
      && nType != 45
      && nType != 21
      && nType != 27 )
    {
      CPlayer::Write(this, S2C_MESSAGE, "b", 40);
      return 2;
    }
    bOldItem = pAddItem->m_nIID;
    if ( !bOldItem )
      pAddItem->m_nIID = CItem::NewIID();
    if ( !pAddItem->m_pInit->m_bPlural && pAddItem->m_nNum > 1 )
    {
      LOG_ERR(
        "_InsertItem()     Name(%s) PID(%d) UID(%d) Index(%d) Num(%d) LogType(%d)",
        this->m_szName,
        this->m_nPID,
        this->m_nUID,
        pAddItem->m_pInit->m_nIndex,
        pAddItem->m_nNum,
        nType);
      return 0;
    }
    if ( !CPlayer::_IntoInven(this, pAddItem) )
      return 0;
    ((void (__thiscall *)(CItem *, CPlayer *, int, int))pAddItem->Use_)(pAddItem, this, nType, bOldItem);
    pAddItem->m_nFrom = 0;
  }
  return 1;
}

//----- (0045DF90) --------------------------------------------------------
void __thiscall CPlayer::EnchantItem(CPlayer *this, int nFromIID, int nToIID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+4h] [ebp-18h] BYREF
  char v7[4]; // [esp+8h] [ebp-14h] BYREF
  CItem *pToItem; // [esp+Ch] [ebp-10h]
  CItem *pFromItem; // [esp+10h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator itTo; // [esp+14h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator itFrom; // [esp+18h] [ebp-4h] BYREF

  if ( nFromIID != nToIID )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    sub_44AE20(&this->m_mapItem, &itFrom, &nFromIID);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v7);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &itFrom,
           v3) )
    {
      pFromItem = *(CItem **)(sub_420250(&itFrom) + 4);
      sub_44AE20(&this->m_mapItem, &itTo, &nToIID);
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v6);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &itTo,
             v4) )
      {
        pToItem = *(CItem **)(sub_420250(&itTo) + 4);
        if ( !pFromItem->Enchant(pFromItem, this, pToItem) )
          CPlayer::_OutofInven(this, pFromItem);
        if ( pToItem->IsBroken(pToItem) )
          CPlayer::_OutofInven(this, pToItem);
      }
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
}

//----- (0045E0A0) --------------------------------------------------------
void __thiscall CPlayer::UpgradeItem(CPlayer *this, int nType, int nIID)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  CItem *pItem; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  sub_44AE20(&this->m_mapItem, &it, &nIID);
  v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v5);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v3) )
  {
    pItem = *(CItem **)(sub_420250(&it) + 4);
    if ( nType )
    {
      if ( nType == 1 )
      {
        pItem->UpgradeRateUp(pItem, this);
      }
      else if ( nType == 2 )
      {
        pItem->UpgradeLevel(pItem, this);
      }
    }
    else
    {
      pItem->UpgradeDestroy(pItem, this);
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockItem);
}

//----- (0045E170) --------------------------------------------------------
void __thiscall CPlayer::AskTrade(CPlayer *this, int nId)
{
  CPlayer *pOther; // [esp+4h] [ebp-4h]

  if ( this->m_nId != nId )
  {
    if ( CChar::IsGState(this, 256) )
    {
      CPlayer::Write(this, S2C_MESSAGEPK, "b", 7);
    }
    else
    {
      pOther = (CPlayer *)CPlayer::FindPlayer(nId);
      if ( pOther )
      {
        if ( CChar::IsGState(pOther, 256) )
        {
          CPlayer::Write(this, S2C_MESSAGEPK, "b", 8);
        }
        else if ( !CBase::IsDeleted(this)
               && !CChar::IsGState(this, 176)
               && !CBase::IsDeleted(pOther)
               && !CChar::IsGState(pOther, 176)
               && Distance(&this->m_ptPixel, &pOther->m_ptPixel) <= 64 )
        {
          CChar::Lock(pOther);
          if ( pOther->m_pTrade || CPlayer::IsEState(pOther, 1) )
          {
            CPlayer::Write(this, S2C_MESSAGE, "b", 19);
          }
          else
          {
            CPlayer::AddEState(pOther, 1);
            CPlayer::Write(pOther, S2C_ASKTRADE, "d", this->m_nId);
          }
          CChar::Unlock(pOther);
        }
        CIOObject::Release(pOther, &pOther->m_nFindRef);
      }
    }
  }
}

//----- (0045E2F0) --------------------------------------------------------
void __thiscall CPlayer::OnAskTrade(CPlayer *this, int bAns, int nId)
{
  CPlayer *pAsker; // [esp+4h] [ebp-4h]

  if ( this->m_nId != nId )
  {
    if ( !CChar::IsGState(this, 176) )
    {
      pAsker = (CPlayer *)CPlayer::FindPlayer(nId);
      if ( pAsker )
      {
        if ( CChar::IsGState(pAsker, 176) )
        {
          CPlayer::Write(this, S2C_MESSAGE, "b", 60);
        }
        else if ( bAns )
        {
          CTrade::CreateTrade(pAsker, this);
        }
        else
        {
          CPlayer::Write(pAsker, S2C_OPENTRADE, "bd", 0, this->m_nId);
        }
        CIOObject::Release(pAsker, &pAsker->m_nFindRef);
      }
    }
    CPlayer::SubEState(this, 1);
  }
}

//----- (0045E3B0) --------------------------------------------------------
void __thiscall CPlayer::CancelTrade(CPlayer *this)
{
  CTrade *pTrade; // [esp+4h] [ebp-4h]

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  if ( pTrade )
  {
    CIOObject::AddRef((int)pTrade);
    CChar::Unlock(this);
    CTrade::Cancel((CIOCriticalSection **)pTrade, (int)this);
    CIOObject::Release(pTrade);
  }
  else
  {
    CChar::Unlock(this);
  }
}

//----- (0045E410) --------------------------------------------------------
void __thiscall CPlayer::_EndTrade(CPlayer *this, int nEndType)
{
  CPlayer::Write(this, S2C_CLOSETRADE, "b", nEndType);
  sub_445BF0((std::vector<IPAddrMask> *)&this->m_vecTrade);
  this->m_pTrade = 0;
  CPlayer::SubEState(this, 6);
}

//----- (0045E460) --------------------------------------------------------
void __thiscall CPlayer::ShowOffItem(CPlayer *this, int nMax, char *info, char *end)
{
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-28h] BYREF
  CItem *pItem; // [esp+8h] [ebp-24h]
  int it; // [esp+Ch] [ebp-20h] BYREF
  int n; // [esp+10h] [ebp-1Ch]
  PACKET *pBuffer; // [esp+14h] [ebp-18h]
  TRADEITEM titem; // [esp+18h] [ebp-14h] BYREF
  CPlayer *pOther; // [esp+20h] [ebp-Ch] BYREF
  char *endpacket; // [esp+24h] [ebp-8h] BYREF
  PACKET *packet; // [esp+28h] [ebp-4h]
                                                // Little buggy needs some work -HighGamer
  if ( nMax > 0 )
  {
    CChar::Lock(this);
    if ( this->m_pTrade && !CTrade::IsEnd(this->m_pTrade) && !CPlayer::IsEState(this, 6) )
    {
      titem.nNum = (int)CTrade::GetOther(this->m_pTrade, this);
      if ( nMax + CPlayer::GetInvenSize((char *)titem.nNum) > 60 )
      {
        CPlayer::Write(this, S2C_MESSAGE, "b", 20);
        CChar::Unlock(this);
        return;
      }
      packet = (PACKET *)CIOBuffer::Alloc();
      pBuffer = packet;
      packet->byType = 79;
      titem.nIID = (int)&pBuffer->data[1];
      CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
      for ( n = 0; ; ++n )
      {
        if ( n >= nMax )
        {
          CIOCriticalSection::Leave((int)&this->m_lockItem);
          WritePacket(pBuffer->data, "b", nMax);
          pBuffer->wSize = LOWORD(titem.nIID) - (_WORD)pBuffer;
          *(_DWORD *)&packet->data[7997] = pBuffer->wSize;
          CSocket::Send(*(CSocket **)(titem.nNum + 1676), (CIOBuffer *)packet);
          CChar::Unlock(this);
          return;
        }
        info = ScanPacket(info, end, "dd", &pOther, &endpacket);
        if ( !pOther )
          break;
        if ( (int)endpacket <= 0 )
          break;
        sub_44AE20(&this->m_mapItem, &it, &pOther);
        v4 = sub_430C20(&this->m_mapItem, (int)v6);
        if ( (unsigned __int8)unknown_libname_8(v4) )
          break;
        pItem = *(CItem **)(sub_420250(&it) + 4);
        if ( !pItem->CanTrade(pItem, (int)endpacket, this, (CPlayer *)titem.nNum) )
          break;
        pItem->PutInfo(pItem, (char **)&titem, (int)endpacket);
        sub_4707D0((int)&this->m_vecTrade, (const XMessageQueue::XTimerElement *)&pOther);
      }
      sub_445BF0((std::vector<IPAddrMask> *)&this->m_vecTrade);
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      CPlayer::Write(this, S2C_MESSAGE, "b", 21);
      CIOBuffer::Release((CIOBuffer *)packet);
    }
    CChar::Unlock(this);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045E6C0) --------------------------------------------------------
int __thiscall CTrade::IsEnd(CTrade *this)
{
  return this->m_bit & 0x10;
}

//----- (0045E6E0) --------------------------------------------------------
CPlayer *__thiscall CTrade::GetOther(CTrade *this, CPlayer *pPlayer)
{
  CPlayer *v3; // [esp+0h] [ebp-8h]

  if ( pPlayer == this->m_pCaller )
    v3 = this->m_pAcc;
  else
    v3 = this->m_pCaller;
  return v3;
}

//----- (0045E720) --------------------------------------------------------
void __thiscall CPlayer::TradeAgreed(CPlayer *this)
{
  CTrade *pTrade; // [esp+4h] [ebp-4h]

  CChar::Lock(this);
  pTrade = this->m_pTrade;
  if ( pTrade )
  {
    CIOObject::AddRef((int)pTrade);
    CChar::Unlock(this);
    CTrade::TradeAgreed(pTrade, this);
    CIOObject::Release(pTrade);
  }
  else
  {
    CChar::Unlock(this);
  }
}

//----- (0045E780) --------------------------------------------------------
int __thiscall CPlayer::_CheckTrade(CPlayer *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int *v3; // eax
  int v4; // edx
  int v5; // eax
  int v6; // eax
  char v8[4]; // [esp+4h] [ebp-1Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-18h] BYREF
  int v10; // [esp+Ch] [ebp-14h] BYREF
  int v11; // [esp+10h] [ebp-10h] BYREF
  int itor; // [esp+14h] [ebp-Ch]
  int ti; // [esp+18h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+1Ch] [ebp-4h] BYREF

  if ( !this->m_pTrade || CBase::IsDeleted(this->m_pTrade) )
    return 0;
  sub_430C20(&this->m_vecTrade, (int)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecTrade, (int)v9);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    v3 = (int *)sub_420010(&it);
    v4 = v3[1];
    v11 = *v3;
    itor = v4;
    sub_44AE20(&this->m_mapItem, &ti, &v11);
    if ( itor < 0 )
    {
      LOG_ERR(aOX, this->m_nPID, v11, itor);
      return 0;
    }
    v5 = sub_430C20(&this->m_mapItem, (int)v8);
    if ( (unsigned __int8)unknown_libname_8(v5) )
      return 0;
    v6 = sub_420250(&ti);
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 4) + 52) < itor )
      return 0;
    sub_430E30((int *)&it, &v10, 0);
  }
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045E890) --------------------------------------------------------
void __thiscall CPlayer::_TradeItem(CPlayer *this, CPlayer *pOther)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int *v3; // eax
  int v4; // edx
  int v5; // eax
  int nPrefix; // [esp+0h] [ebp-30h]
  char v8[4]; // [esp+8h] [ebp-28h] BYREF
  _DWORD v10[2]; // [esp+10h] [ebp-20h] BYREF
  int itor; // [esp+18h] [ebp-18h] BYREF
  int ti; // [esp+1Ch] [ebp-14h]
  CItem *pAddItem; // [esp+20h] [ebp-10h]
  CItem *pItem; // [esp+24h] [ebp-Ch]
  int v15; // [esp+28h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v16; // [esp+2Ch] [ebp-4h] BYREF

  sub_430C20(&this->m_vecTrade, (int)&v16);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecTrade, (int)&this);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v16,
            v2) )
      break;
    v3 = (int *)sub_420010(&v16);
    v4 = v3[1];
    itor = *v3;
    ti = v4;
    pAddItem = 0;
    sub_44AE20(&this->m_mapItem, &v15, &itor);
    v5 = sub_430C20(&this->m_mapItem, (int)v8);
    if ( !(unsigned __int8)unknown_libname_8(v5) )
    {
      pItem = *(CItem **)(sub_420250(&v15) + 4);
      pAddItem = pItem->Trade(pItem, this, 10, ti);
      if ( pAddItem == pItem )
        CPlayer::_OutofInven(this, pItem);
      if ( pAddItem )
      {
        CIOObject::AddRef((int)pAddItem);
        if ( CPlayer::_InsertItem(pOther, 10, pAddItem) != 1 )
        {
          if ( pAddItem->m_pPrefix )
            nPrefix = pAddItem->m_pPrefix->m_nPrefix;
          else
            nPrefix = 0;
          v10[1] = nPrefix;
          LOG_ERR(
            "Fail to insert trade item.(iid:%d, index:%d, prefix:%d, num:%d)",
            pAddItem->m_nIID,
            pAddItem->m_pInit->m_nIndex,
            nPrefix,
            pAddItem->m_nNum);
          CBase::Delete(pAddItem);
        }
        CIOObject::Release(pAddItem);
      }
    }
    sub_430E30((int *)&v16, v10, 0);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045EA00) --------------------------------------------------------
void __thiscall CPlayer::_StorageIn(CPlayer *this, ITEMINFO *iteminfo, int nUpdateIID, int nUpdateNum)
{
  int v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // [esp+0h] [ebp-38h]
  char v8[8]; // [esp+8h] [ebp-30h] BYREF
  int v9[8]; // [esp+10h] [ebp-28h] BYREF
  char v10[4]; // [esp+30h] [ebp-8h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator it; // [esp+34h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&this->m_mapStorage,
    &it,
    &iteminfo->nIID);
  v4 = sub_430C20(&this->m_mapStorage, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    v5 = sub_472830(v9, &iteminfo->nIID, iteminfo);
    sub_470890(
      (int)&this->m_mapStorage,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v8,
      (int)v5);
  }
  else
  {
    v6 = (_DWORD *)(sub_420250(&it) + 15);
    *v6 += iteminfo->nNum;
  }
  CPlayer::Write(this, S2C_UPDATEITEMNUM, "ddb", nUpdateIID, nUpdateNum, 15);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045EAB0) --------------------------------------------------------
int __thiscall CPlayer::_StorageOut(CPlayer *this, int nStorIID, int nStorNum)
{
  int result; // eax

  if ( !nStorNum )
    result = sub_470A40((int *)&this->m_mapStorage, (int)&nStorIID);
  return result;
}

//----- (0045EAE0) --------------------------------------------------------
int __thiscall CPlayer::_FindStorageItem(CPlayer *this, int nIndex, _DWORD *nIID, int dwInfo, int nVer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  char v8[4]; // [esp+Ch] [ebp-28h] BYREF
  int v9; // [esp+10h] [ebp-24h] BYREF
  ITEMINFO iteminfo; // [esp+14h] [ebp-20h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v11; // [esp+30h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapStorage,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v11);
  while ( 1 )
  {
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapStorage, (int)v8);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v11,
            v5) )
      break;
    qmemcpy(&iteminfo, (const void *)(sub_420250(&v11) + 4), sizeof(iteminfo));
    if ( nIndex == iteminfo.wIndex
      && dwInfo == (iteminfo.dwInfo & 0x88)
      && (stru_4E35B4.m_nRef != 2 || nVer == iteminfo.byVer) )
    {
      *nIID = iteminfo.nIID;
      return 1;
    }
    sub_434510((int *)&v11, &v9, 0);
  }
  return 0;
}

//----- (0045EB90) --------------------------------------------------------
void __thiscall CPlayer::StorageInfo(CPlayer *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  _WORD *v2; // eax
  char *v3; // edi
  int v4; // [esp+0h] [ebp-28h]
  char v6[4]; // [esp+Ch] [ebp-1Ch] BYREF
  int v7; // [esp+10h] [ebp-18h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+14h] [ebp-14h] BYREF
  PACKET *packet; // [esp+18h] [ebp-10h]
  int nNum; // [esp+1Ch] [ebp-Ch]
  char *end; // [esp+20h] [ebp-8h]
  CIOBuffer *pBuffer; // [esp+24h] [ebp-4h]

  pBuffer = CIOBuffer::Alloc();
  packet = (PACKET *)pBuffer;
  pBuffer->m_buffer[2] = 88;
  end = &packet->data[1];
  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
  nNum = unknown_libname_10(&this->m_mapStorage, v4);
  if ( nNum > 0 )
  {
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapStorage,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapStorage, (int)v6);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &it,
              v1) )
        break;
      v2 = (_WORD *)(sub_420250(&it) + 4);
      v3 = end;
      qmemcpy(end, v2, 0x18u);
      *((_WORD *)v3 + 12) = v2[12];
      end += 26;
      sub_434510((int *)&it, &v7, 0);
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockItem);
  WritePacket(packet->data, "b", nNum);
  packet->wSize = (_WORD)end - (_WORD)packet;
  pBuffer->m_dwSize = packet->wSize;
  CSocket::Send(this->m_pSocket, pBuffer);
}
// 45EBD0: variable 'v4' is possibly undefined

//----- (0045ECA0) --------------------------------------------------------
void __thiscall CPlayer::PutInStorage(CPlayer *this, int nNPCId, int nMax, char *info, char *end)
{
  int v5; // eax
  char v8[4]; // [esp+4h] [ebp-24h] BYREF
  CItem *pItem; // [esp+8h] [ebp-20h]
  int it; // [esp+Ch] [ebp-1Ch] BYREF
  int n; // [esp+10h] [ebp-18h]
  int nNeedMoney; // [esp+14h] [ebp-14h]
  int nNum; // [esp+18h] [ebp-10h] BYREF
  CItemMoney *pMoney; // [esp+1Ch] [ebp-Ch]
  char *temp; // [esp+20h] [ebp-8h]
  int nIID; // [esp+24h] [ebp-4h] BYREF
  char *Srca; // [esp+38h] [ebp+10h]
                                                // ;) -HighGamer
  if ( nMax > 0 && CNPC::CanReply(
                     nNPCId,
                     &this->m_ptPixel) )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    if ( (unsigned int)(nMax + unknown_libname_10(&this->m_mapStorage, this)) <= 0x64 )
    {
      pMoney = this->m_pMoney;
      if ( pMoney )
      {
        temp = info;
        Srca = ScanPacket(info, end, "dd", &nIID, &nNum);
        nNeedMoney = 0;
        if ( nIID )
        {
          if ( nNum > 0 && pMoney->m_nIID == nIID )
          {
            nNeedMoney += nNum;
            Srca = temp;
          }
          else
          {
            --nMax;
          }
        }
        nNeedMoney += 60 * nMax;
        if ( pMoney->m_nNum >= nNeedMoney )
        {
          nNeedMoney = 0;
          for ( n = 0; n < nMax; ++n )
          {
            Srca = ScanPacket(Srca, end, "dd", &nIID, &nNum);
            if ( nNum > 0 )
            {
              sub_44AE20(&this->m_mapItem, &it, &nIID);
              v5 = sub_430C20(&this->m_mapItem, (int)v8);
              if ( !(unsigned __int8)unknown_libname_8(v5) )
              {
                pItem = *(CItem **)(sub_420250(&it) + 4);
                if ( pItem->StorageIn(pItem, this, nNum) )
                  CPlayer::_OutofInven(this, pItem);
                nNeedMoney += 60;
              }
            }
          }
          if ( !CBase::IsDeleted(pMoney) && !pMoney->UpdateNum(pMoney, this, 15, -nNeedMoney) )
            CPlayer::_OutofInven(this, pMoney);
        }
      }
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
    else
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      CPlayer::Write(this, S2C_MESSAGE, "b", 39);
    }
  }
}
// 45ECF4: variable 'this' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045EEC0) --------------------------------------------------------
void __thiscall CPlayer::PutOutStorage(CPlayer *this, int nNPCId, int nMax, char *info, char *end)
{
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-20h] BYREF
  ITEMINFO *iteminfo; // [esp+8h] [ebp-1Ch]
  CItem *pPopItem; // [esp+Ch] [ebp-18h]
  char *buff; // [esp+10h] [ebp-14h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator it; // [esp+14h] [ebp-10h] BYREF
  int n; // [esp+18h] [ebp-Ch]
  int v13; // [esp+1Ch] [ebp-8h] BYREF
  int _Keyval; // [esp+20h] [ebp-4h] BYREF

  if ( nMax > 0 && CNPC::CanReply(nNPCId, &this->m_ptPixel) )
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    if ( nMax + CPlayer::GetInvenSize((char *)this) <= 60 )
    {
      for ( n = 0; n < nMax; ++n )
      {
        info = ScanPacket(info, end, "dd", &_Keyval, &v13);
        if ( v13 > 0 )
        {
          std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&this->m_mapStorage,
            &it,
            &_Keyval);
          v5 = sub_430C20(&this->m_mapStorage, (int)v7);
          if ( !(unsigned __int8)unknown_libname_8(v5) )
          {
            iteminfo = (ITEMINFO *)(sub_420250(&it) + 4);
            buff = (char *)iteminfo;
            pPopItem = CItem::CreateItem(this->m_nPID, &buff);
            if ( pPopItem )
            {
              if ( pPopItem->StorageOut(pPopItem, this, v13, iteminfo->wIndex, &iteminfo->nNum) )
                CPlayer::_IntoInven(this, pPopItem);
            }
          }
        }
      }
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
    else
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      CPlayer::Write(this, S2C_MESSAGE, "b", 40);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045F040) --------------------------------------------------------
void __thiscall CPlayer::SetStallInfo(CPlayer *this, int nSetType, char *packet, char *end)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  _DWORD *v5; // eax
  __int64 v6; // [esp-4h] [ebp-7Ch]
  char v9[8]; // [esp+8h] [ebp-70h] BYREF
  int v10[9]; // [esp+10h] [ebp-68h] BYREF
  char v11[4]; // [esp+34h] [ebp-44h] BYREF
  char *szStall; // [esp+38h] [ebp-40h] BYREF
  int nIID; // [esp+3Ch] [ebp-3Ch] BYREF
  char *info; // [esp+40h] [ebp-38h] BYREF
  CItem *pItem; // [esp+44h] [ebp-34h]
  STALLITEMINFO stall; // [esp+48h] [ebp-30h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+68h] [ebp-10h] BYREF
  int nNum; // [esp+6Ch] [ebp-Ch] BYREF
  int nPrice; // [esp+70h] [ebp-8h] BYREF
  int nIID_; // [esp+74h] [ebp-4h] BYREF

  if ( CChar::IsGState(this, 0x100) )
  {
    CPlayer::Write(this, S2C_MESSAGEPK, "b", 10);
    return;
  }
  LODWORD(v6) = 0x100000;
  if ( CSMap::IsOnTile(this->m_pMap, &this->m_ptPixel, v6) )
  {
    CPlayer::Write(this, S2C_MESSAGE, "b", 84);
    return;
  }
  if ( nSetType )
  {
    if ( nSetType == 1 )
    {
      ScanPacket(packet, end, "d", &nIID);
      if ( CChar::IsGState(this, 16) )
        InterlockedIncrement(&this->m_nStall);
      CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
      sub_471430((int *)&this->m_mapStall, (int)&nIID);
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
    else if ( nSetType == 2 )
    {
      ScanPacket(packet, end, "s", &szStall, 65);
      strcpy(this->m_szStall, szStall);
      if ( CChar::IsGState(this, 16) )
        CChar::WriteInSight(this, S2C_GETSTALLINFO, "bds", 1, this->m_nId, this->m_szStall);
    }
  }
  else
  {
    ScanPacket(packet, end, "ddd", &nIID_, &nNum, &nPrice);
    if ( nNum > 0 && nPrice > 0 )
    {
      if ( CChar::IsGState(this, 16) )
        InterlockedIncrement(&this->m_nStall);
      CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
      if ( (unsigned int)unknown_libname_10(&this->m_mapStall, this) < 0x10 )
      {
        sub_44AE20(&this->m_mapItem, &it, &nIID_);
        v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v11);
        if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               &it,
               v4) )
        {
          pItem = *(CItem **)(sub_420250(&it) + 4);
          if ( !pItem->CanTrade(pItem, nNum, this, 0) )
          {
            CIOCriticalSection::Leave((int)&this->m_lockItem);
            CPlayer::GetStallInfo(this, 0, this);
            return;
          }
          STALLITEMINFO::STALLITEMINFO(&stall, nPrice);
          info = (char *)&stall;
          pItem->PutInfo(pItem, &info, nNum);
          v5 = sub_4728C0(v10, &nIID_, &stall);
          sub_470AF0(
            (int)&this->m_mapStall,
            (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v9,
            (int)v5);
        }
      }
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
  }
}
// 45F08C: variable 'v6' is possibly undefined
// 45F154: variable 'this' is possibly undefined

//----- (0045F300) --------------------------------------------------------
STALLITEMINFO *__thiscall STALLITEMINFO::STALLITEMINFO(STALLITEMINFO *this, int price)
{
  this->byUpgrRate = 0;
  this->byUpgrLevel = 0;
  this->byProtect = 0;
  this->byXDodge = 0;
  this->byXHit = 0;
  this->byXDefense = 0;
  this->byXMagic = 0;
  this->byXAttack = 0;
  this->byVer = 0;
  this->byCurEnd = 0;
  this->byMaxEnd = 0;
  this->nNum = 0;
  this->dwInfo = 0;
  this->byPrefix = 0;
  this->wIndex = 0;
  this->nIID = 0;
  this->nPrice = price;
  return this;
}

//----- (0045F3A0) --------------------------------------------------------
void __thiscall CPlayer::GetStallInfo(CPlayer *this, int nGetType, CPlayer *pBuyer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  _WORD *v4; // eax
  char *v5; // edi
  int v6; // [esp+0h] [ebp-2Ch]
  char v8[4]; // [esp+10h] [ebp-1Ch] BYREF
  char v9[4]; // [esp+14h] [ebp-18h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+18h] [ebp-14h] BYREF
  PACKET *packet; // [esp+1Ch] [ebp-10h]
  int nNum; // [esp+20h] [ebp-Ch]
  char *end; // [esp+24h] [ebp-8h]
  CIOBuffer *pBuffer; // [esp+28h] [ebp-4h]

  if ( CChar::IsGState(this, 256) )
  {
    CPlayer::Write(this, S2C_MESSAGEPK, "b", 10);
  }
  else if ( nGetType )
  {
    if ( nGetType == 1 )
      CPlayer::Write(pBuyer, S2C_GETSTALLINFO, "bds", 1, this->m_nId, this->m_szStall);
  }
  else
  {
    pBuffer = CIOBuffer::Alloc();
    packet = (PACKET *)pBuffer;
    pBuffer->m_buffer[2] = 13;
    end = &packet->data[10];
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    nNum = unknown_libname_10(&this->m_mapStall, v6);
    if ( nNum > 0 )
    {
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapStall,
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
      while ( 1 )
      {
        v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapStall, (int)v8);
        if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                &it,
                v3) )
          break;
        v4 = (_WORD *)(sub_420250(&it) + 4);
        v5 = end;
        qmemcpy(end, v4, 0x1Cu);
        *((_WORD *)v5 + 14) = v4[14];
        end += 30;
        sub_472890((int *)&it, v9, 0);
      }
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    WritePacket(packet->data, "bddb", 0, this->m_nId, this->m_nStall, nNum);
    packet->wSize = (_WORD)end - (_WORD)packet;
    pBuffer->m_dwSize = packet->wSize;
    CPlayer::Send(pBuyer, pBuffer);
    CIOBuffer::Release(pBuffer);
  }
}
// 45F426: variable 'v6' is possibly undefined

//----- (0045F540) --------------------------------------------------------
void __thiscall CPlayer::SwitchStall(CPlayer *this, int bStart)
{
  char *v2; // [esp+0h] [ebp-Ch]
  CTrade *pTrade; // [esp+8h] [ebp-4h]

  if ( bStart )
  {
    CChar::Lock(this);
    pTrade = this->m_pTrade;
    CChar::Unlock(this);
    if ( CChar::IsGStateExcept(this, 0x7FF02000) || this->m_nParty || pTrade || CPlayer::IsEState(this, 7) )
      return;
    CChar::AddGState(this, 20);
  }
  else
  {
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    sub_471490(&this->m_mapStall);
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    if ( !CChar::IsGState(this, 16) )
      return;
    CChar::SubGState(this, 20);
  }
  if ( bStart )
    v2 = this->m_szStall;
  else
    v2 = &DefaultNullString;
  CChar::WriteInSight(this, S2C_ACTION, "dbbs", this->m_nId, 11, bStart, v2);
}

//----- (0045F640) --------------------------------------------------------
int __thiscall CChar::IsGStateExcept(CChar *this, int nExcept)
{
  return this->m_nGState & ~nExcept;
}

//----- (0045F660) --------------------------------------------------------
void __thiscall CPlayer::BuyItemAtStall(CPlayer *this, CPlayer *pBuyer, int nStall, int nMax, char *packet, char *end)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // esi
  CItem *Item; // [esp+4h] [ebp-40h]
  char v12[4]; // [esp+Ch] [ebp-38h] BYREF
  char v13[4]; // [esp+10h] [ebp-34h] BYREF
  char v14[4]; // [esp+14h] [ebp-30h] BYREF
  int nNeedMoney; // [esp+18h] [ebp-2Ch]
  STALLITEMINFO *sinfo; // [esp+1Ch] [ebp-28h]
  CItem *pBuyItem; // [esp+20h] [ebp-24h]
  CItem *pBuyerMoney; // [esp+24h] [ebp-20h]
  int nNum; // [esp+28h] [ebp-1Ch] BYREF
  CItem *pItem; // [esp+2Ch] [ebp-18h]
  int itItem; // [esp+30h] [ebp-14h] BYREF
  int itStall; // [esp+34h] [ebp-10h] BYREF
  int nIID; // [esp+38h] [ebp-Ch] BYREF
  CItem *pPayMoney; // [esp+3Ch] [ebp-8h]
  int n; // [esp+40h] [ebp-4h]

  Item = (CItem *)this;
  if ( CChar::IsGState(this, 16) )
  {
    if ( Item[13].m_dwAttr == nStall )
    {
      if ( nMax + CPlayer::GetInvenSize((char *)pBuyer) <= 60 )
      {
        ItemLock((CPlayer *)Item, pBuyer);
        for ( n = 0; n < nMax; ++n )
        {
          packet = ScanPacket(packet, end, "dd", &nIID, &nNum);
          if ( nNum > 0 )
          {
            sub_4714F0(&Item[12].m_nIID, &itStall, &nIID);
            v6 = sub_430C20(&Item[12].m_nIID, (int)v14);
            if ( (unsigned __int8)unknown_libname_8(v6) )
            {
              CPlayer::Write(pBuyer, S2C_MESSAGEV, "bd", 45, nIID);
            }
            else
            {
              sinfo = (STALLITEMINFO *)(sub_420250(&itStall) + 4);
              v7 = STALLITEMINFO::Num(sinfo);
              if ( nNum <= v7 )
              {
                sub_44AE20(&Item[11].m_pMap, &itItem, &nIID);
                v8 = sub_430C20(&Item[11].m_pMap, (int)v13);
                if ( (unsigned __int8)unknown_libname_8(v8)
                  || (v9 = STALLITEMINFO::Num(sinfo), v9 > *(_DWORD *)(*(_DWORD *)(sub_420250(&itItem) + 4) + 52)) )
                {
                  CPlayer::Write(pBuyer, S2C_MESSAGE, "b", 47);
                  sub_470CA0(&Item[12].m_nIID, v12, itStall);
                }
                else
                {
                  nNeedMoney = sinfo->nPrice * nNum;
                  if ( nNeedMoney <= 0 )
                    break;
                  pBuyerMoney = pBuyer->m_pMoney;
                  if ( !pBuyerMoney || nNeedMoney > pBuyerMoney->m_nNum )
                    break;
                  pItem = *(CItem **)(sub_420250(&itItem) + 4);
                  pBuyItem = pItem->Trade(pItem, Item, 26, nNum);
                  if ( pBuyItem == pItem )
                    CPlayer::_OutofInven((CPlayer *)Item, pItem);
                  if ( CPlayer::_InsertItem(pBuyer, 26, pBuyItem) != 1 )
                    CBase::Delete(pBuyItem);
                  pPayMoney = pBuyerMoney->Trade(pBuyerMoney, pBuyer, 26, nNeedMoney);
                  if ( pPayMoney == pBuyerMoney )
                    CPlayer::_OutofInven(pBuyer, pBuyerMoney);
                  if ( CPlayer::_InsertItem((CPlayer *)Item, 26, pPayMoney) != 1 )
                    CBase::Delete(pPayMoney);
                  if ( !STALLITEMINFO::Minus(sinfo, nNum) )
                    sub_470CA0(&Item[12].m_nIID, &this, itStall);
                }
              }
              else
              {
                CPlayer::Write(pBuyer, S2C_MESSAGEV, "bd", 46, nIID);
              }
            }
          }
        }
        ItemUnlock((CPlayer *)Item, pBuyer);
        CPlayer::GetStallInfo((CPlayer *)Item, 0, pBuyer);
        CPlayer::GetStallInfo((CPlayer *)Item, 0, (CPlayer *)Item);
      }
      else
      {
        CPlayer::Write(pBuyer, S2C_MESSAGE, "b", 40);
      }
    }
    else
    {
      CPlayer::GetStallInfo((CPlayer *)Item, 0, pBuyer);
      CPlayer::Write(pBuyer, S2C_MESSAGE, "b", 48);
    }
  }
  else
  {
    CPlayer::Write(pBuyer, S2C_MESSAGE, "b", 50);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045F9A0) --------------------------------------------------------
int __thiscall STALLITEMINFO::Num(STALLITEMINFO *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( (this->dwInfo & 0x20) != 0 )
    v2 = 1;
  else
    v2 = this->nNum;
  return v2;
}

//----- (0045F9D0) --------------------------------------------------------
int __thiscall STALLITEMINFO::Minus(STALLITEMINFO *this, int num)
{
  if ( (this->dwInfo & 0x20) != 0 )
    return 0;
  this->nNum -= num;
  return this->nNum;
}

//----- (0045FA10) --------------------------------------------------------
void __cdecl ItemLock(CPlayer *pA, CPlayer *pB)
{
  if ( pA >= pB )
  {
    CIOCriticalSection::Enter(&pB->m_lockItem.m_critical_section);
    CIOCriticalSection::Enter(&pA->m_lockItem.m_critical_section);
  }
  else
  {
    CIOCriticalSection::Enter(&pA->m_lockItem.m_critical_section);
    CIOCriticalSection::Enter(&pB->m_lockItem.m_critical_section);
  }
}

//----- (0045FA60) --------------------------------------------------------
void __cdecl ItemUnlock(CPlayer *pA, CPlayer *pB)
{
  CIOCriticalSection::Leave((int)&pA->m_lockItem);
  CIOCriticalSection::Leave((int)&pB->m_lockItem);
}

//----- (0045FA90) --------------------------------------------------------
void __thiscall CPlayer::AskParty(CPlayer *this, int nId)
{
  CParty *pParty; // [esp+4h] [ebp-Ch]
  int nParty; // [esp+8h] [ebp-8h]
  CPlayer *pOther; // [esp+Ch] [ebp-4h]

  if ( this->m_nId != nId && !CChar::IsGState(this, 144) )
  {
    CChar::Lock(this);
    nParty = this->m_nParty;
    if ( nParty )
    {
      pParty = (CParty *)sub_44D4E0(nParty);
      if ( pParty )
      {
        if ( !CParty::IsHead((CIOCriticalSection *)pParty, (int)this) )
        {
          CChar::Unlock(this);
          CPlayer::Write(this, S2C_MESSAGE, "b", 27);
          CIOObject::Release(pParty);
          return;
        }
        CIOObject::Release(pParty);
      }
    }
    CChar::Unlock(this);
    if ( CChar::IsGState(this, 256) )
    {
      CPlayer::Write(this, S2C_MESSAGEPK, "b", 12);
    }
    else
    {
      pOther = (CPlayer *)CPlayer::FindPlayer(nId);
      if ( pOther )
      {
        if ( CChar::IsGState(pOther, 256) )
        {
          CPlayer::Write(this, S2C_MESSAGEPK, "b", 13);
          CIOObject::Release(pOther, &pOther->m_nFindRef);
        }
        else
        {
          if ( !CChar::IsGState(pOther, 144) )
          {
            if ( pOther->m_nParty )
            {
              CPlayer::Write(this, S2C_MESSAGEV, "bs", 31, pOther->m_szName);
            }
            else
            {
              CPlayer::Write(pOther, S2C_ASKPARTY, "d", this->m_nId);
              CPlayer::Write(this, S2C_MESSAGEV, "bs", 28, pOther->m_szName);
            }
          }
          CIOObject::Release(pOther, &pOther->m_nFindRef);
        }
      }
      else
      {
        CPlayer::Write(this, S2C_MESSAGE, "b", 37);
      }
    }
  }
}

//----- (0045FC60) --------------------------------------------------------
void __thiscall CPlayer::OnAskParty(CPlayer *this, int bAns, int nId)
{
  CPlayer *pAsker; // [esp+4h] [ebp-4h]

  if ( this->m_nId != nId && !CChar::IsGState(this, 144) )
  {
    pAsker = (CPlayer *)CPlayer::FindPlayer(nId);
    if ( pAsker )
    {
      if ( CChar::IsGState(pAsker, 128) )
      {
        CPlayer::Write(this, S2C_MESSAGE, "b", 61);
      }
      else if ( Distance(&pAsker->m_ptPixel, &this->m_ptPixel) > 320 )
      {
        CPlayer::Write(this, S2C_MESSAGE, "b", 37);
      }
      else if ( bAns )
      {
        CParty::Accept((int)pAsker, (int)this);
      }
      else
      {
        CPlayer::Write(pAsker, S2C_MESSAGEV, "bs", 34, this->m_szName);
      }
      CIOObject::Release(pAsker, &pAsker->m_nFindRef);
    }
    else
    {
      CPlayer::Write(this, S2C_MESSAGE, "b", 37);
    }
  }
}

//----- (0045FD70) --------------------------------------------------------
void __thiscall CPlayer::LeaveParty(CPlayer *this)
{
  CIOObject *a1; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  v3 = this->m_nParty;
  if ( v3 )
  {
    a1 = (CIOObject *)sub_44D4E0(v3);
    if ( a1 )
    {
      CParty::Leave(a1, (int)this);
      CIOObject::Release(a1);
    }
  }
}

//----- (0045FDC0) --------------------------------------------------------
void __thiscall CPlayer::ExileParty(CPlayer *a1, int a2)
{
  CPlayer *v3; // [esp+4h] [ebp-Ch]
  CIOObject *a1a; // [esp+8h] [ebp-8h]
  int v5; // [esp+Ch] [ebp-4h]

  if ( a1->m_nId != a2 )
  {
    v5 = a1->m_nParty;
    if ( v5 )
    {
      a1a = (CIOObject *)sub_44D4E0(v5);
      if ( a1a )
      {
        v3 = (CPlayer *)CPlayer::FindPlayer(a2);
        if ( v3 )
        {
          CParty::Exile(a1a, (int)a1, (int)v3);
          CIOObject::Release(v3, &v3->m_nFindRef);
        }
        CIOObject::Release(a1a);
      }
    }
  }
}

//----- (0045FE50) --------------------------------------------------------
unsigned int __thiscall CPlayer::GetPartySize(CPlayer *this)
{
  CParty *v2; // [esp+4h] [ebp-Ch]
  int a1; // [esp+8h] [ebp-8h]
  unsigned int v4; // [esp+Ch] [ebp-4h]

  v4 = 0;
  a1 = this->m_nParty;
  if ( a1 )
  {
    v2 = (CParty *)sub_44D4E0(a1);
    if ( v2 )
    {
      v4 = CParty::GetSize(v2);
      CIOObject::Release(v2);
    }
  }
  return v4;
}

//----- (0045FEB0) --------------------------------------------------------
void __thiscall CPlayer::UpdatePartyMember(CPlayer *this, int a2)
{
  CIOCriticalSection *v3; // [esp+8h] [ebp-8h]
  int a1; // [esp+Ch] [ebp-4h]

  a1 = this->m_nParty;
  if ( a1 )
  {
    v3 = (CIOCriticalSection *)sub_44D4E0(a1);
    if ( v3 )
    {
      if ( a2 == 7 )
      {
        CParty::UpdateMemberHP(v3, this);
      }
      else if ( a2 == 26 )
      {
        CParty::UpdateMemberLevel(v3, (int)this);
      }
      CIOObject::Release((CIOObject *)v3);
    }
  }
}

//----- (0045FF20) --------------------------------------------------------
void __thiscall CPlayer::SaveQuestFlag(CPlayer *this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  std::pair<int,CScriptToCookBoard::tBaseTable> *v6; // eax
  char v8[12]; // [esp+4h] [ebp-2Ch] BYREF
  char v9[4]; // [esp+10h] [ebp-20h] BYREF
  char v10[8]; // [esp+14h] [ebp-1Ch] BYREF
  int v11[2]; // [esp+1Ch] [ebp-14h] BYREF
  int _Val1; // [esp+24h] [ebp-Ch] BYREF
  int v13; // [esp+28h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v14; // [esp+2Ch] [ebp-4h] BYREF

  _Val1 = a2 >> 16;
  v13 = (unsigned __int16)a2;
  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
  sub_471840(&this->m_mapMyQuest, &v14, &_Val1);
  v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapMyQuest, (int)v9);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v14,
         v3) )
  {
    v4 = sub_420250(&v14);
    if ( v13 <= *(_DWORD *)(v4 + 4) )
    {
      LOG_ERR(
        "CPlayer::SaveQuestFlag() Already saved quest flag. (pid:%d, quest:%d, flag:%d)",
        this->m_nPID,
        _Val1,
        v13);
    }
    else
    {
      v5 = sub_420250(&v14);
      *(_DWORD *)(v5 + 4) = v13;
      *(_DWORD *)(sub_420250(&v14) + 8) = a3;
      CPlayer::Write(this, S2C_SAVEQUEST, "wbb", _Val1, v13, a3);
      CDBSocket::Write(S2D_UPDATEQUESTFLAG, "dwbb", this->m_nPID, _Val1, v13, a3);
    }
  }
  else
  {
    v11[0] = v13;
    v11[1] = a3;
    v6 = std::pair<int,CScriptToCookBoard::tBaseTable>::pair<int,CScriptToCookBoard::tBaseTable>(
           (std::pair<int,CScriptToCookBoard::tBaseTable> *)v8,
           &_Val1,
           (const CScriptToCookBoard::tBaseTable *)v11);
    sub_4715D0(
      (int)&this->m_mapMyQuest,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v10,
      (int)v6);
    if ( !v10[4] )
      LOG_ERR(
        "CPlayer::SaveQuestFlag() Failed to save quest flag. (pid:%d, quest:%d, flag:%d)",
        this->m_nPID,
        _Val1,
        v13);
    CPlayer::Write(this, S2C_SAVEQUEST, "wbb", _Val1, v13, a3);
    CDBSocket::Write(S2D_INSERTQUESTFLAG, "dwbb", this->m_nPID, _Val1, v13, a3);
  }
  CIOCriticalSection::Leave((int)&this->m_lockQuest);
}

//----- (004600D0) --------------------------------------------------------
BOOL __thiscall CPlayer::CheckQuestFlag(CPlayer *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // edx
  char v7[4]; // [esp+4h] [ebp-18h] BYREF
  int v8; // [esp+8h] [ebp-14h] BYREF
  int v9; // [esp+Ch] [ebp-10h]
  int v10; // [esp+10h] [ebp-Ch]
  int v11; // [esp+14h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v12; // [esp+18h] [ebp-4h] BYREF

  v8 = a2 >> 16;
  v11 = (unsigned __int16)a2;
  v9 = 0;
  v10 = 0;
  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
  sub_471840(&this->m_mapMyQuest, &v12, &v8);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapMyQuest, (int)v7);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v12,
         v2) )
  {
    v3 = sub_420250(&v12);
    v4 = *(_DWORD *)(v3 + 8);
    v9 = *(_DWORD *)(v3 + 4);
    v10 = v4;
  }
  CIOCriticalSection::Leave((int)&this->m_lockQuest);
  return v9 == v11;
}

//----- (00460180) --------------------------------------------------------
int __thiscall CPlayer::CheckQuestClear(CPlayer *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // edx
  char v7[4]; // [esp+4h] [ebp-10h] BYREF
  int v8; // [esp+8h] [ebp-Ch]
  int v9; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v10; // [esp+10h] [ebp-4h] BYREF

  v8 = 0;
  v9 = 0;
  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
  sub_471840(&this->m_mapMyQuest, &v10, &a2);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapMyQuest, (int)v7);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v10,
         v2) )
  {
    v3 = sub_420250(&v10);
    v4 = *(_DWORD *)(v3 + 8);
    v8 = *(_DWORD *)(v3 + 4);
    v9 = v4;
  }
  CIOCriticalSection::Leave((int)&this->m_lockQuest);
  return v9;
}

//----- (00460210) --------------------------------------------------------
void __thiscall CPlayer::QuestGuide(CPlayer *this, int a2)
{
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-18h] BYREF
  char v5[4]; // [esp+8h] [ebp-14h] BYREF
  int i; // [esp+Ch] [ebp-10h]
  int v7; // [esp+10h] [ebp-Ch]
  int v8; // [esp+14h] [ebp-8h] BYREF
  int v9; // [esp+18h] [ebp-4h]

  v9 = 200046;
  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
  for ( i = 0; i < dword_4E1FF0; ++i )
  {
    v7 = dword_4D63D4[3 * i];
    if ( this->m_nLevel < v7 )
    {
      v9 = 200035;
      break;
    }
    v8 = dword_4D63D0[3 * i];
    sub_471840(&this->m_mapMyQuest, v5, &v8);
    v2 = sub_430C20(&this->m_mapMyQuest, (int)v4);
    if ( (unsigned __int8)unknown_libname_8(v2) )
    {
      v9 = dword_4D63D8[3 * i];
      break;
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockQuest);
  CPlayer::Write(this, S2C_SENDHTML, "d", v9);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D63D0: using guessed type int dword_4D63D0[];
// 4D63D4: using guessed type int dword_4D63D4[];
// 4E1FF0: using guessed type int dword_4E1FF0;

//----- (00460300) --------------------------------------------------------
void __thiscall CPlayer::AskPvP(CPlayer *a1, int a2)
{
  CPlayer *nType; // [esp+4h] [ebp-4h]

  if ( a1->m_nId != a2 )
  {
    nType = (CPlayer *)CPlayer::FindPlayer(a2);
    if ( nType )
    {
      BothLock(a1, nType);
      if ( !CChar::IsNormal(a1) || CPlayer::IsEState(a1, 1) || a1->m_pTrade || CChar::IsGState(a1, 144) || a1->m_pOppo )
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bb", 62, 0);
      }
      else if ( !CChar::IsNormal(nType)
             || CPlayer::IsEState(nType, 1)
             || nType->m_pTrade
             || CChar::IsGState(nType, 144)
             || a1->m_pOppo )
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bb", 62, 1);
      }
      else if ( Distance(&a1->m_ptPixel, &nType->m_ptPixel) <= 160 )
      {
        CPlayer::Write(nType, S2C_ASKPVP, "d", a1->m_nId);
      }
      else
      {
        CPlayer::Write(a1, S2C_MESSAGE, "b", 63);
      }
      BothUnlock(a1, nType);
      CIOObject::Release(nType, &nType->m_nFindRef);
    }
    else
    {
      CPlayer::Write(a1, S2C_MESSAGE, "b", 63);
    }
  }
}

//----- (00460490) --------------------------------------------------------
void __cdecl BothLock(CPlayer *pA, CPlayer *pB)
{
  if ( pA >= pB )
  {
    CChar::Lock(pB);
    CChar::Lock(pA);
  }
  else
  {
    CChar::Lock(pA);
    CChar::Lock(pB);
  }
}

//----- (004604C0) --------------------------------------------------------
void __thiscall CPlayer::OnAskPvP(CPlayer *a1, int a2, int a3)
{
  CPlayer *v3; // eax
  int v4; // [esp-8h] [ebp-14h]
  int v5; // [esp-4h] [ebp-10h]
  CBaseList *i; // [esp+4h] [ebp-8h]
  CPlayer *nType; // [esp+8h] [ebp-4h]

  if ( a1->m_nId != a3 )
  {
    nType = (CPlayer *)CPlayer::FindPlayer(a3);
    if ( nType )
    {
      BothLock(a1, nType);
      if ( !CChar::IsNormal(a1) || CPlayer::IsEState(a1, 1) || a1->m_pTrade || CChar::IsGState(a1, 144) || a1->m_pOppo )
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bb", 62, 0);
      }
      else if ( !CChar::IsNormal(nType)
             || CPlayer::IsEState(nType, 1)
             || nType->m_pTrade
             || CChar::IsGState(nType, 144)
             || a1->m_pOppo )
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bb", 62, 1);
      }
      else if ( Distance(&a1->m_ptPixel, &nType->m_ptPixel) <= 160 )
      {
        if ( a2 )
        {
          CIOObject::AddRef((int)a1);
          CChar::AddGState(a1, 128);
          CPlayer::Write(a1, S2C_GSTATE, "dd", a1->m_nId, a1->m_nGState);
          a1->m_pOppo = nType;
          CIOObject::AddRef((int)nType);
          CChar::AddGState(nType, 128);
          v5 = nType->m_nGState;
          v4 = CBase::Id(nType);
          CPlayer::Write(nType, S2C_GSTATE, "dd", v4, v5);
          nType->m_pOppo = a1;
          nType->m_nPvPId = InterlockedIncrement(&dword_4E1FFC);
          a1->m_nPvPId = nType->m_nPvPId;
          for ( i = CSMap::GetPlayerListInRect(a1->m_pMap, &a1->m_ptTile, 5); i; i = CBaseList::Pop(i) )
          {
            v3 = (CPlayer *)unknown_libname_7(i);
            CPlayer::Write(v3, S2C_MESSAGEV, "bbss", 65, 5, nType->m_szName, a1->m_szName);
          }
        }
        else
        {
          CPlayer::Write(nType, S2C_MESSAGEV, "bs", 64, a1->m_szName);
        }
      }
      else
      {
        CPlayer::Write(a1, S2C_MESSAGE, "b", 63);
      }
      BothUnlock(a1, nType);
      CIOObject::Release(nType, &nType->m_nFindRef);
    }
    else
    {
      CPlayer::Write(a1, S2C_MESSAGE, "b", 63);
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00460770) --------------------------------------------------------
void __thiscall CPlayer::OnPvP(CPlayer *a1)
{
  int v1; // eax
  CPlayer *a2; // [esp+4h] [ebp-4h]

  a2 = a1->m_pOppo;
  if ( !a2 )
    EBREAK();
  if ( CChar::IsNormal(a2) && a1->m_nPvPId == a2->m_nPvPId )
  {
    if ( a1->m_dwPvP < 4 )
    {
      if ( a1->m_nId >= CBase::Id(a2) )
      {
        if ( ++a1->m_dwPvP >= 4 )
        {
          v1 = CBase::Id(a2);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 65, 1, v1);
          CPlayer::Write(a2, S2C_MESSAGEV, "bbd", 65, 1, a1->m_nId);
        }
        else
        {
          CPlayer::Write(a1, S2C_MESSAGEV, "bbsb", 65, 0, a2->m_szName, 4 - a1->m_dwPvP);
          CPlayer::Write(a2, S2C_MESSAGEV, "bbsb", 65, 0, a1->m_szName, 4 - a1->m_dwPvP);
        }
      }
    }
    else if ( ++a1->m_dwPvP >= 0x258 )
    {
      CPlayer::EndPvP(a1, (volatile int *)a2, 4, 4, 7);
    }
  }
  else
  {
    a1->m_nPvPId = 0;
    a1->m_pOppo = 0;
    a1->m_dwPvP = 0;
    CChar::SubGState(a1, 128);
    CPlayer::Write(a1, S2C_GSTATE, "dd", a1->m_nId, a1->m_nGState);
    CIOObject::Release(a2);
  }
}

//----- (00460940) --------------------------------------------------------
void __thiscall CPlayer::EndPvP(CPlayer *this, volatile int *a2, int a3, int a4, int a5)
{
  CPlayer *v5; // eax
  CBaseList *i; // [esp+4h] [ebp-4h]

  CPlayer::Write(this, S2C_MESSAGEV, "bbs", 65, a3, a2 + 8);
  CPlayer::Write((CPlayer *)a2, S2C_MESSAGEV, "bbs", 65, a4, this->m_szName);
  for ( i = CSMap::GetPlayerListInRect(this->m_pMap, &this->m_ptTile, 5); i; i = CBaseList::Pop(i) )
  {
    v5 = (CPlayer *)unknown_libname_7(i);
    CPlayer::Write(v5, S2C_MESSAGEV, "bbss", 65, a5, this->m_szName, a2 + 8);
  }
  this->m_nPvPId = 0;
  this->m_pOppo = 0;
  this->m_dwPvP = 0;
  CChar::SubGState(this, 128);
  CPlayer::Write(this, S2C_GSTATE, "dd", this->m_nId, this->m_nGState);
  CIOObject::Release((CIOObject *)a2);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00460A50) --------------------------------------------------------
void __thiscall CPlayer::ProcessMsg(CPlayer *this, char *message)
{
  CPlayer *v2; // eax
  CPlayer *v3; // eax
  CPlayer *v4; // eax
  CPlayer *v5; // eax
  CPlayer *v6; // eax
  CIOBuffer *v7; // [esp-4h] [ebp-70h]
  CIOBuffer *v8; // [esp-4h] [ebp-70h]
  CIOBuffer *v9; // [esp-4h] [ebp-70h]
  CBaseList *pList___; // [esp+8h] [ebp-64h]
  CIOBuffer *pBuffer______; // [esp+Ch] [ebp-60h]
  CBaseList *pList__; // [esp+10h] [ebp-5Ch] BYREF
  CIOBuffer *pBuffer; // [esp+14h] [ebp-58h]
  CBaseList *pList_; // [esp+18h] [ebp-54h] BYREF
  CIOBuffer *pBuffer_; // [esp+1Ch] [ebp-50h]
  CIOBuffer *pBuffer_____; // [esp+20h] [ebp-4Ch]
  CGuild *pGuild_; // [esp+24h] [ebp-48h]
  CIOBuffer *pBuffer____; // [esp+28h] [ebp-44h]
  CGuild *pGuild; // [esp+2Ch] [ebp-40h]
  CIOBuffer *pBuffer___; // [esp+30h] [ebp-3Ch]
  CParty *pParty; // [esp+34h] [ebp-38h]
  int nParty; // [esp+38h] [ebp-34h]
  char *msg; // [esp+3Ch] [ebp-30h]
  char nameto; // [esp+40h] [ebp-2Ch] BYREF
  int v26; // [esp+41h] [ebp-2Bh]
  int v27; // [esp+45h] [ebp-27h]
  int v28; // [esp+49h] [ebp-23h]
  int v29; // [esp+4Dh] [ebp-1Fh]
  int v30; // [esp+54h] [ebp-18h]
  CPlayer *pPlayer; // [esp+58h] [ebp-14h]
  size_t n; // [esp+5Ch] [ebp-10h]
  CBaseList *pList; // [esp+60h] [ebp-Ch]
  CIOBuffer *pBuffer__; // [esp+64h] [ebp-8h]
  unsigned int dwCurTick; // [esp+68h] [ebp-4h]

  v30 = dword_4D9830;
  dwCurTick = GetTickCount();
  if ( this->m_dwNextMsg <= dwCurTick )
  {
    this->m_dwNextMsg = dwCurTick + 1000;
    switch ( *message )
    {
      case '#':
        nParty = this->m_nParty;
        if ( nParty )
        {
          pParty = (CParty *)sub_44D4E0(nParty);
          if ( pParty )
          {
            pBuffer___ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
            CParty::Broadcast((CIOCriticalSection *)pParty, pBuffer___, 0);
            CIOObject::Release(pParty);
          }
        }
        break;
      case '$':
        pGuild = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
        if ( pGuild )
        {
          pBuffer____ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
          CGuild::BroadcastLock(pBuffer____, 0);
          CIOBuffer::Release(pBuffer____);
          CIOObject::Release(pGuild, &pGuild->m_nTempRef);
        }
        break;
      case '&':
        CPlayer::Write(this, S2C_CHATTING, "ss", this->m_szName, message);
        CIOCriticalSection::Enter(&this->m_lockMlm.m_critical_section);
        pList_ = 0;
        CPlayer::_MLMGet((CMemory **)&pList_, 3);
        pBuffer_ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
        while ( pList_ )
        {
          v7 = pBuffer_;
          v3 = (CPlayer *)unknown_libname_7(pList_);
          CPlayer::Send(v3, v7);
          pList_ = CBaseList::Pop(pList_);
        }
        CIOBuffer::Release(pBuffer_);
        CPlayer::_MLMGet((CMemory **)&pList_, 2);
        *message = 42;
        pBuffer_ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
        while ( pList_ )
        {
          v8 = pBuffer_;
          v4 = (CPlayer *)unknown_libname_7(pList_);
          CPlayer::Send(v4, v8);
          pList_ = CBaseList::Pop(pList_);
        }
        CIOBuffer::Release(pBuffer_);
        CIOCriticalSection::Leave((int)&this->m_lockMlm);
        break;
      case '*':
        CPlayer::Write(this, S2C_CHATTING, "ss", this->m_szName, message);
        CIOCriticalSection::Enter(&this->m_lockMlm.m_critical_section);
        pList__ = 0;
        CPlayer::_MLMGet((CMemory **)&pList__, 4);
        *message = 38;
        pBuffer = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
        while ( pList__ )
        {
          v9 = pBuffer;
          v5 = (CPlayer *)unknown_libname_7(pList__);
          CPlayer::Send(v5, v9);
          pList__ = CBaseList::Pop(pList__);
        }
        CIOBuffer::Release(pBuffer);
        CIOCriticalSection::Leave((int)&this->m_lockMlm);
        break;
      case '/':
        if ( message[1] == 'y' && message[2] == ' ' )
        {
          if ( CPlayer::RemoveItem(this, 9, 513, 1) || CPlayer::RemoveItem(this, 9, 514, 1) )
          {
            pBuffer__ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
            for ( pList = CSMap::GetPlayerListInRect(this->m_pMap, &this->m_ptTile, 50);
                  pList;
                  pList = CBaseList::Pop(pList) )
            {
              v2 = (CPlayer *)unknown_libname_7(pList);
              CPlayer::Send(v2, pBuffer__);
            }
            CIOBuffer::Release(pBuffer__);
          }
        }
        else if ( message[1] == 's' && message[2] == ' ' )
        {
          if ( CPlayer::RemoveItem(this, 9, 515, 1) || CPlayer::RemoveItem(this, 9, 516, 1) )
            CPlayer::WriteAll(S2C_CHATTING, "ss", this->m_szName, message);
        }
        else
        {
          CPlayer::ChatCommand(this, message);
        }
        break;
      case '@':
        msg = message + 1;
        nameto = 0;
        v26 = 0;
        v27 = 0;
        v28 = 0;
        v29 = 0;
        n = strcspn(message + 1, " ");
        if ( (int)n <= 16 )
        {
          memcpy(&nameto, msg, n);
          if ( IsValidAdminName(&nameto) )
          {
            pPlayer = (CPlayer *)CPlayer::FindPlayer(&nameto);
            if ( pPlayer )
            {
              if ( pPlayer != this )
              {
                CPlayer::Write(this, S2C_CHATTING, "ss", this->m_szName, message);
                CPlayer::Write(pPlayer, S2C_CHATTING, "ss", this->m_szName, message);
              }
              CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
            }
            else
            {
              CPlayer::Write(this, S2C_MESSAGE, "b", 25);
            }
          }
        }
        break;
      case '~':
        pGuild_ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
        if ( pGuild_ )
        {
          pBuffer_____ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
          CGuild::AllianceBroadcast(pGuild_, (int)pBuffer_____);
          CIOBuffer::Release(pBuffer_____);
          CIOObject::Release(pGuild_, &pGuild_->m_nTempRef);
        }
        break;
      default:
        pBuffer______ = (CIOBuffer *)MakePacket(S2C_CHATTING, "ss", this->m_szName, message);
        for ( pList___ = CSMap::GetPlayerListInRect(this->m_pMap, &this->m_ptTile, 25);
              pList___;
              pList___ = CBaseList::Pop(pList___) )
        {
          v6 = (CPlayer *)unknown_libname_7(pList___);
          CPlayer::Send(v6, pBuffer______);
        }
        CIOBuffer::Release(pBuffer______);
        break;
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00461080) --------------------------------------------------------
void __thiscall CPlayer::ChatCommand(CPlayer *this, char *command)
{
  char *v2; // eax
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v14; // eax
  __int64 v15; // rax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v16; // eax
  int v17; // eax
  std::pair<int,CScriptToCookBoard::tBaseTable> *v18; // eax
  int v19; // eax
  int v20; // eax
  std::pair<int,CScriptToCookBoard::tBaseTable> *v21; // eax
  int v22; // [esp-6Ch] [ebp-54Ch]
  int v23; // [esp-68h] [ebp-548h]
  int v24; // [esp-64h] [ebp-544h]
  int v25; // [esp-60h] [ebp-540h]
  int v26; // [esp-5Ch] [ebp-53Ch]
  int v27; // [esp-54h] [ebp-534h]
  int v28; // [esp-4Ch] [ebp-52Ch]
  int v29; // [esp-48h] [ebp-528h]
  int v30; // [esp-44h] [ebp-524h]
  int v31; // [esp-40h] [ebp-520h]
  int v32; // [esp-3Ch] [ebp-51Ch]
  __int64 v33; // [esp-38h] [ebp-518h]
  int v34; // [esp-30h] [ebp-510h]
  int v35; // [esp-2Ch] [ebp-50Ch]
  int v36; // [esp-28h] [ebp-508h]
  int v37; // [esp-24h] [ebp-504h]
  int v38; // [esp-20h] [ebp-500h]
  int v39; // [esp-1Ch] [ebp-4FCh]
  int v40; // [esp-18h] [ebp-4F8h]
  int v41; // [esp-14h] [ebp-4F4h]
  int v42; // [esp-10h] [ebp-4F0h]
  int v43; // [esp-Ch] [ebp-4ECh]
  int v44; // [esp-8h] [ebp-4E8h]
  char *v45; // [esp-4h] [ebp-4E4h]
  char *v46; // [esp-4h] [ebp-4E4h]
  char *v47; // [esp-4h] [ebp-4E4h]
  char *v48; // [esp-4h] [ebp-4E4h]
  char *v49; // [esp-4h] [ebp-4E4h]
  char *v50; // [esp-4h] [ebp-4E4h]
  int v51; // [esp-4h] [ebp-4E4h]
  int v52; // [esp-4h] [ebp-4E4h]
  int v53; // [esp-4h] [ebp-4E4h]
  int v54; // [esp-4h] [ebp-4E4h]
  int v55; // [esp-4h] [ebp-4E4h]
  int v56; // [esp+0h] [ebp-4E0h]
  unsigned int v57; // [esp+4h] [ebp-4DCh]
  const char *v58; // [esp+8h] [ebp-4D8h]
  char v59; // [esp+Ch] [ebp-4D4h]
  int v61; // [esp+14h] [ebp-4CCh] BYREF
  char v62[12]; // [esp+1Ch] [ebp-4C4h] BYREF
  char v63[4]; // [esp+28h] [ebp-4B8h] BYREF
  char v64[8]; // [esp+2Ch] [ebp-4B4h] BYREF
  char v65[12]; // [esp+34h] [ebp-4ACh] BYREF
  char v66[4]; // [esp+40h] [ebp-4A0h] BYREF
  char v67[4]; // [esp+44h] [ebp-49Ch] BYREF
  int v68; // [esp+48h] [ebp-498h] BYREF
  char v69[4]; // [esp+4Ch] [ebp-494h] BYREF
  int v70; // [esp+50h] [ebp-490h]
  int v71; // [esp+54h] [ebp-48Ch]
  int v72; // [esp+58h] [ebp-488h]
  int v73; // [esp+5Ch] [ebp-484h]
  int v74; // [esp+60h] [ebp-480h]
  int v75; // [esp+64h] [ebp-47Ch]
  int v76; // [esp+68h] [ebp-478h]
  int v77; // [esp+6Ch] [ebp-474h]
  int v78; // [esp+70h] [ebp-470h] BYREF
  char v79[4]; // [esp+74h] [ebp-46Ch] BYREF
  int i; // [esp+78h] [ebp-468h] BYREF
  int v81; // [esp+7Ch] [ebp-464h]
  int v82[2]; // [esp+80h] [ebp-460h] BYREF
  char v83[4]; // [esp+88h] [ebp-458h] BYREF
  int _Val1; // [esp+8Ch] [ebp-454h] BYREF
  int v85; // [esp+90h] [ebp-450h] BYREF
  int v86; // [esp+94h] [ebp-44Ch] BYREF
  int v87; // [esp+98h] [ebp-448h]
  int v88; // [esp+9Ch] [ebp-444h]
  int v89; // [esp+A0h] [ebp-440h]
  int v90; // [esp+A4h] [ebp-43Ch]
  int v91; // [esp+A8h] [ebp-438h]
  CItem *v92; // [esp+ACh] [ebp-434h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v93; // [esp+B0h] [ebp-430h] BYREF
  int v94; // [esp+B4h] [ebp-42Ch]
  int v95; // [esp+B8h] [ebp-428h]
  int v96; // [esp+BCh] [ebp-424h]
  __int64 v97; // [esp+C0h] [ebp-420h]
  int v98; // [esp+C8h] [ebp-418h]
  unsigned int SkillId; // [esp+CCh] [ebp-414h]
  int nLevel; // [esp+D0h] [ebp-410h] BYREF
  int nSkill; // [esp+D4h] [ebp-40Ch] BYREF
  CItem *v102; // [esp+D8h] [ebp-408h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v103; // [esp+DCh] [ebp-404h] BYREF
  int v104; // [esp+E0h] [ebp-400h] BYREF
  int v105; // [esp+E4h] [ebp-3FCh] BYREF
  int v106; // [esp+E8h] [ebp-3F8h] BYREF
  int v107; // [esp+ECh] [ebp-3F4h]
  CItem *v108; // [esp+F0h] [ebp-3F0h]
  char *name; // [esp+F4h] [ebp-3ECh]
  char v110[4]; // [esp+F8h] [ebp-3E8h]
  int v111; // [esp+FCh] [ebp-3E4h]
  int v112; // [esp+100h] [ebp-3E0h]
  int v113; // [esp+104h] [ebp-3DCh]
  int v114; // [esp+108h] [ebp-3D8h]
  CItem *pAddItem; // [esp+10Ch] [ebp-3D4h]
  char v116[4]; // [esp+110h] [ebp-3D0h]
  int a2; // [esp+114h] [ebp-3CCh]
  int a3; // [esp+118h] [ebp-3C8h]
  int a4; // [esp+11Ch] [ebp-3C4h]
  int v120; // [esp+120h] [ebp-3C0h]
  CItem *pAddCheatItem; // [esp+124h] [ebp-3BCh]
  char nIndex[4]; // [esp+128h] [ebp-3B8h]
  int nPrefix; // [esp+12Ch] [ebp-3B4h]
  int nNum; // [esp+130h] [ebp-3B0h]
  int nVer; // [esp+134h] [ebp-3ACh]
  tagPOINT pt__; // [esp+138h] [ebp-3A8h] BYREF
  CPlayer *pPlayer____; // [esp+140h] [ebp-3A0h]
  int n____; // [esp+144h] [ebp-39Ch]
  char buf____[132]; // [esp+148h] [ebp-398h] BYREF
  int nPer2; // [esp+1CCh] [ebp-314h] BYREF
  char buf___[128]; // [esp+1D0h] [ebp-310h] BYREF
  int n___; // [esp+250h] [ebp-290h] BYREF
  int nPer1; // [esp+254h] [ebp-28Ch] BYREF
  int nMax; // [esp+258h] [ebp-288h] BYREF
  GOTO _goto_; // [esp+25Ch] [ebp-284h] BYREF
  size_t len_; // [esp+26Ch] [ebp-274h]
  CPlayer *pPlayer___; // [esp+270h] [ebp-270h]
  int nMinute; // [esp+274h] [ebp-26Ch]
  char buf__[132]; // [esp+278h] [ebp-268h] BYREF
  int nMaxUser; // [esp+2FCh] [ebp-1E4h]
  int n__; // [esp+300h] [ebp-1E0h]
  int n_; // [esp+304h] [ebp-1DCh]
  char buf_[128]; // [esp+308h] [ebp-1D8h] BYREF
  int nInfo; // [esp+388h] [ebp-158h]
  int nEvent_; // [esp+38Ch] [ebp-154h]
  int nEvent; // [esp+390h] [ebp-150h]
  int nSys_; // [esp+394h] [ebp-14Ch]
  int nSys; // [esp+398h] [ebp-148h]
  char *szName__; // [esp+39Ch] [ebp-144h]
  int nExp; // [esp+3A0h] [ebp-140h]
  int nSvrId; // [esp+3A4h] [ebp-13Ch]
  tagPOINT pt_; // [esp+3A8h] [ebp-138h] BYREF
  int nMonIndex; // [esp+3B0h] [ebp-130h]
  CMonster *pMonster; // [esp+3B4h] [ebp-12Ch]
  char buf[136]; // [esp+3B8h] [ebp-128h] BYREF
  CPlayer *pPlayer__; // [esp+440h] [ebp-A0h]
  tagPOINT pt; // [esp+444h] [ebp-9Ch] BYREF
  int nMap; // [esp+44Ch] [ebp-94h] BYREF
  CPlayer *pPlayer_; // [esp+450h] [ebp-90h]
  REVIVALLOC *loc; // [esp+454h] [ebp-8Ch]
  int n; // [esp+458h] [ebp-88h]
  GOTO _goto; // [esp+45Ch] [ebp-84h] BYREF
  unsigned int dwBit; // [esp+46Ch] [ebp-74h]
  CPlayer *pPlayer; // [esp+470h] [ebp-70h]
  CPlayer *pOppo_; // [esp+478h] [ebp-68h]
  CPlayer *pOppo; // [esp+47Ch] [ebp-64h]
  int nAnswer_______; // [esp+480h] [ebp-60h]
  CGuild *pGuild________; // [esp+484h] [ebp-5Ch]
  int nDate; // [esp+488h] [ebp-58h]
  char *szName_; // [esp+48Ch] [ebp-54h]
  CGuild *pGuild_______; // [esp+490h] [ebp-50h]
  int nAnswer______; // [esp+494h] [ebp-4Ch]
  CGuild *pGuild______; // [esp+498h] [ebp-48h]
  int nAnswer_____; // [esp+49Ch] [ebp-44h]
  CGuild *pGuild_____; // [esp+4A0h] [ebp-40h]
  int nAnswer____; // [esp+4A4h] [ebp-3Ch]
  char *szNewTitle; // [esp+4A8h] [ebp-38h]
  CGuild *pGuild____; // [esp+4ACh] [ebp-34h]
  char *szTitle; // [esp+4B0h] [ebp-30h]
  int nAnswer___; // [esp+4B4h] [ebp-2Ch]
  CGuild *pGuild___; // [esp+4B8h] [ebp-28h]
  int nAnswer__; // [esp+4BCh] [ebp-24h]
  CGuild *pGuild__; // [esp+4C0h] [ebp-20h]
  char *szTitle_; // [esp+4C4h] [ebp-1Ch]
  char *szName; // [esp+4C8h] [ebp-18h]
  int nAnswer_; // [esp+4CCh] [ebp-14h]
  CGuild *pGuild_; // [esp+4D0h] [ebp-10h]
  int nAnswer; // [esp+4D4h] [ebp-Ch]
  CGuild *pGuild; // [esp+4D8h] [ebp-8h]
  size_t len; // [esp+4DCh] [ebp-4h]
  char *commanda; // [esp+4E8h] [ebp+8h]
  char *commandb; // [esp+4E8h] [ebp+8h]
  char *commandc; // [esp+4E8h] [ebp+8h]
  char *commandd; // [esp+4E8h] [ebp+8h]
  char *commande; // [esp+4E8h] [ebp+8h]
  char *commandf; // [esp+4E8h] [ebp+8h]

  *(_DWORD *)&buf[132] = dword_4D9830;
  if ( stru_4E35B4.m_nRef == 1 && this->m_nAdmin >= 3 )
    LOG_NORMAL("[GM Command] %s(PID:%d, Admin:%d) : %s", this->m_szName, this->m_nPID, this->m_nAdmin, command);
  len = strcspn(command, " ");
  if ( command[len] )
    command[len++] = 0;
  v45 = GetStr(903);
  if ( !strcmp(command, v45) )
  {
    pGuild = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
    if ( pGuild )
    {
      nAnswer = CGuild::Conflux(pGuild, this, &command[len]);
      CIOObject::Release(pGuild, &pGuild->m_nTempRef);
      if ( nAnswer )
        CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer);
    }
  }
  else
  {
    v46 = GetStr(904);
    if ( !strcmp(command, v46) )
    {
      pGuild_ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
      if ( pGuild_ )
      {
        nAnswer_ = CGuild::Banish(pGuild_, this, &command[len]);
        CIOObject::Release(pGuild_, &pGuild_->m_nTempRef);
        if ( nAnswer_ )
          CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer_);
      }
    }
    else
    {
      v47 = GetStr(905);
      if ( !strcmp(command, v47) )
      {
        szName = &command[len];
        len = strcspn(&command[len], " ");
        if ( szName[len] )
          szName[len++] = 0;
        szTitle_ = &szName[len];
        pGuild__ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
        if ( pGuild__ )
        {
          nAnswer__ = CGuild::Appointment(pGuild__, this, szName, szTitle_);
          CIOObject::Release(pGuild__, &pGuild__->m_nTempRef);
          if ( nAnswer__ )
            CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer__);
        }
      }
      else
      {
        v2 = GetStr(906);
        if ( !strcmp(command, v2) )
        {
          pGuild___ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
          if ( pGuild___ )
          {
            nAnswer___ = CGuild::Dissolution(pGuild___, this);
            CIOObject::Release(pGuild___, &pGuild___->m_nTempRef);
            if ( nAnswer___ )
              CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer___);
          }
        }
        else
        {
          v3 = GetStr(907);
          if ( !strcmp(command, v3) )
          {
            szTitle = &command[len];
            len = strcspn(&command[len], " ");
            if ( szTitle[len] )
              szTitle[len++] = 0;
            szNewTitle = &szTitle[len];
            if ( strlen(&szTitle[len]) <= 0xE && IsValidName(szNewTitle) )
            {
              pGuild____ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
              if ( pGuild____ )
              {
                nAnswer____ = CGuild::TitleChange(pGuild____, this, szTitle, szNewTitle);
                CIOObject::Release(pGuild____, &pGuild____->m_nTempRef);
                if ( nAnswer____ )
                  CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer____);
              }
            }
            else
            {
              CPlayer::Write(this, S2C_GUILD, "bb", 0, 45);
            }
          }
          else
          {
            v48 = GetStr(908);
            if ( !strcmp(command, v48) )
            {
              pGuild_____ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
              if ( pGuild_____ )
              {
                nAnswer_____ = CGuild::SetConnectTell(this, 1);
                CIOObject::Release(pGuild_____, &pGuild_____->m_nTempRef);
                if ( nAnswer_____ )
                  CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer_____);
              }
            }
            else
            {
              v4 = GetStr(909);
              if ( !strcmp(command, v4) )
              {
                pGuild______ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
                if ( pGuild______ )
                {
                  nAnswer______ = CGuild::SetConnectTell(this, 0);
                  CIOObject::Release(pGuild______, &pGuild______->m_nTempRef);
                  if ( nAnswer______ )
                    CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer______);
                }
              }
              else
              {
                v5 = GetStr(910);
                if ( !strcmp(command, v5) )
                {
                  pGuild_______ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
                  if ( pGuild_______ )
                  {
                    CGuild::GetTodayMessage(pGuild_______, this);
                    CIOObject::Release(pGuild_______, &pGuild_______->m_nTempRef);
                  }
                }
                else
                {
                  v6 = GetStr(918);
                  if ( !strcmp(command, v6) )
                  {
                    szName_ = &command[len];
                    len = strcspn(&command[len], " ");
                    if ( szName_[len] )
                      szName_[len++] = 0;
                    nDate = j__atol(&szName_[len]);
                    pGuild________ = (CGuild *)CPlayer::GetGuild((CIOCriticalSection *)this);
                    if ( pGuild________ )
                    {
                      nAnswer_______ = CGuild::AllianceOffer((int *)pGuild________, (int)this, szName_, nDate);
                      CIOObject::Release(pGuild________, &pGuild________->m_nTempRef);
                      if ( nAnswer_______ )
                        CPlayer::Write(this, S2C_GUILD, "bb", 0, (unsigned __int8)nAnswer_______);
                    }
                  }
                  else
                  {
                    v49 = GetStr(911);
                    if ( !strcmp(command, v49) )
                    {
                      CChar::Lock(this);
                      if ( CChar::IsGState(this, 128) )
                      {
                        pOppo = this->m_pOppo;
                        if ( !pOppo )
                          EBREAK();
                        CPlayer::EndPvP((int)this, (volatile int *)pOppo, 3, 2, 6);
                      }
                      CChar::Unlock(this);
                    }
                    else
                    {
                      v7 = GetStr(900);
                      if ( !strcmp(command, v7) )
                      {
                        if ( CChar::IsGState(this, 256) )
                        {
                          CPlayer::Write(this, S2C_MESSAGEPK, "b", 15);
                        }
                        else
                        {
                          CChar::Lock(this);
                          this->m_nCurHP = 0;
                          if ( CChar::IsGState(this, 0x8000) )
                            CPlayer::Write(this, S2C_MESSAGE, "b", 89);
                          CChar::SubGState(this, 32772);
                          CChar::SubMState(this, 1i64);
                          CChar::AddGState(this, 2);
                          if ( CChar::IsGState(this, 128) )
                          {
                            pOppo_ = this->m_pOppo;
                            if ( !pOppo_ )
                              EBREAK();
                            CPlayer::EndPvP((int)this, (volatile int *)pOppo_, 3, 2, 6);
                            CPlayer::AddEState(this, 16);
                          }
                          CChar::Unlock(this);
                          if ( CChar::IsGState(this, 1024) )
                          {
                            this->SubGState(this, 1024);
                            v8 = CPlayer::GetGID((CIOCriticalSection *)this);
                            CCastle::UnfurlStandardCancel(v8);
                          }
                          CChar::CancelBuffPrty(this, -161);
                          if ( CChar::IsGState(this, 16) )
                            CPlayer::SwitchStall(this, 0);
                          if ( CChar::IsGState(this, 512) )
                            CPlayer::FreeTransform((CIOCriticalSection *)this);
                          CPlayer::BreakStandard((CIOCriticalSection *)this);
                          CChar::WriteInSight(this, S2C_ACTION, "db", this->m_nId, 9);
                          this->m_dwNextAction = GetTickCount() + 20000;
                          this->m_dwNextRevival = GetTickCount() + 20000;
                          CPlayer::UpdatePartyMember(this, 7);
                        }
                      }
                      else
                      {
                        v50 = GetStr(902);
                        if ( !strcmp(command, v50) )
                        {
                          CPlayer::Write(this, S2C_MESSAGEV, "bb", 41, this->m_nRvId);
                        }
                        else if ( this->m_nAdmin >= 3 )
                        {
                          if ( !strcmp(command, "/hide") )
                          {
                            if ( j__atol(&command[len]) )
                              ((void (__thiscall *)(CPlayer *, int, _DWORD))this->AddMState)(this, 0x80000, 0);
                            else
                              ((void (__thiscall *)(CPlayer *, int, _DWORD))this->SubMState)(this, 0x80000, 0);
                          }
                          else if ( !strcmp(command, "/kick") )
                          {
                            pPlayer = (CPlayer *)CPlayer::FindPlayer(&command[len]);
                            if ( pPlayer )
                            {
                              CPlayer::Write(pPlayer, S2C_CLOSE, "b", 1);
                              dwBit = pPlayer->m_bit;
                              CSocket::Logout(pPlayer->m_pSocket, 1);
                              LOG_NORMAL(
                                "[Kickout] At  '%s' (PID:%d) %p %p %x %x %x",
                                pPlayer->m_szName,
                                pPlayer->m_nPID,
                                pPlayer,
                                pPlayer->m_pSocket->m_pPlayer,
                                dwBit,
                                pPlayer->m_bit,
                                pPlayer->m_pSocket->m_bit);
                              CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
                            }
                          }
                          else if ( !strcmp(command, "/dlehd") )
                          {
                            if ( !CChar::IsGStateExcept(this, -1040384) )
                            {
                              commanda = &command[len];
                              v59 = *commanda;
                              if ( *commanda == 35 )
                              {
                                n = j__atol(commanda + 1);
                                if ( n >= 0 && n < dword_4E35AC )
                                {
                                  loc = (REVIVALLOC *)((char *)&unk_4D77C8 + 28 * n);
                                  CPlayer::Teleport(this, loc->nMap, &loc->ptPLoc, loc->nZ, 1);
                                }
                              }
                              else if ( v59 == 36 )
                              {
                                pPlayer_ = (CPlayer *)CPlayer::FindPlayer(commanda + 1);
                                if ( pPlayer_ )
                                {
                                  CPlayer::Teleport(this, pPlayer_->m_nMap, &pPlayer_->m_ptPixel, pPlayer_->m_nZ, 1);
                                  CIOObject::Release(pPlayer_, &pPlayer_->m_nFindRef);
                                }
                              }
                              else if ( v59 == 64 )
                              {
                                if ( CGoto::FindGoto(commanda + 1, &_goto) )
                                  CPlayer::Teleport(this, _goto.nMap, &_goto.pt, _goto.nZ, 1);
                              }
                              else if ( sscanf(commanda, "%d %d %d", &nMap, &pt, &pt.y) == 3 )
                              {
                                pt.x += 32;
                                pt.y += 32;
                                CPlayer::Teleport(this, nMap, &pt, 0, 1);
                              }
                            }
                          }
                          else if ( !strcmp(command, "/info") )
                          {
                            pPlayer__ = (CPlayer *)CPlayer::FindPlayer(&command[len]);
                            if ( pPlayer__ )
                            {
                              sprintf(
                                buf,
                                "[%s] (uid:%d, pid:%d, class:%d, level:%d)",
                                pPlayer__->m_szName,
                                pPlayer__->m_nUID,
                                pPlayer__->m_nPID,
                                pPlayer__->m_nClass,
                                pPlayer__->m_nLevel);
                              CIOObject::Release(pPlayer__, &pPlayer__->m_nFindRef);
                            }
                            else
                            {
                              sprintf(buf, "[%s] isn't in player list", &command[len]);
                            }
                            CPlayer::Write(this, S2C_NOTICE, "s", buf);
                          }
                          else if ( !strcmp(command, "/move") )
                          {
                            nMonIndex = j__atol(&command[len]);
                            pMonster = CMonster::ScanMonster(nMonIndex);
                            if ( pMonster )
                            {
                              pt_.x = pMonster->m_ptPixel.x + 32;
                              pt_.y = pMonster->m_ptPixel.y + 32;
                              CPlayer::Teleport(this, pMonster->m_nMap, &pt_, 0, 1);
                              CIOObject::Release(pMonster);
                            }
                          }
                          else if ( !strcmp(command, "/useral") )
                          {
                            nSvrId = j__atol(&command[len]);
                            if ( nSvrId )
                            {
                              v10 = CSocket::Id(this->m_pSocket);
                              CAuthSocket::Write(S2A_USER, "db", v10, nSvrId);
                            }
                            else
                            {
                              v51 = CServer::MaxSize();
                              v9 = CServer::Size();
                              CPlayer::Write(this, S2C_MESSAGEV, "bbww", 15, dword_4E1188, v9, v51);
                            }
                          }
                          else if ( !strcmp(command, "/active") )
                          {
                            v11 = CSocket::Id(this->m_pSocket);
                            CAuthSocket::Write(S2A_USERALL, "d", v11);
                          }
                          else if ( !strcmp(command, "/money") )
                          {
                            CPlayer::Write(this, S2C_MESSAGEV, "bd", 18, dword_4E2014);
                          }
                          else if ( this->m_nAdmin >= 4 )
                          {
                            if ( !strcmp(command, "/guildexp") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && stru_4E35B4.m_nRef == 1 )
                              {
                                szName__ = &command[len];
                                len = strcspn(&command[len], " ");
                                if ( szName__[len] )
                                  szName__[len++] = 0;
                                nExp = j__atol(&szName__[len]);
                                if ( CGuild::SetExp(szName__, nExp) )
                                  v58 = "OK";
                                else
                                  v58 = "ERROR";
                                CPlayer::Write(this, S2C_CHATTING, "ss", "guildexp", v58);
                              }
                            }
                            else if ( !strcmp(command, "/syson") )
                            {
                              nSys = j__atol(&command[len]);
                              CPlayer::SetSystemCode(nSys, 1);
                            }
                            else if ( !strcmp(command, "/sysoff") )
                            {
                              nSys_ = j__atol(&command[len]);
                              CPlayer::SetSystemCode(nSys_, 0);
                            }
                            else if ( !strcmp(command, "/eventon") )
                            {
                              nEvent = j__atol(&command[len]);
                              CPlayer::SetEventCode(nEvent, 1);
                            }
                            else if ( !strcmp(command, "/eventoff") )
                            {
                              nEvent_ = j__atol(&command[len]);
                              CPlayer::SetEventCode(nEvent_, 0);
                            }
                            else if ( !strcmp(command, "/infosys") )
                            {
                              if ( stru_4E35B4.m_nRef != 1 )
                              {
                                nInfo = *(_DWORD *)dword_4E1174;
                                len = sprintf(buf_, "system : ");
                                n_ = 0;
                                while ( nInfo > 0 )
                                {
                                  if ( (nInfo & 1) != 0 )
                                  {
                                    v12 = sprintf(&buf_[len], "%d ", n_);
                                    len += v12;
                                  }
                                  nInfo >>= 1;
                                  ++n_;
                                }
                                CPlayer::Write(this, S2C_NOTICE, "s", buf_);
                                nInfo = dword_4E1178;
                                len = sprintf(buf_, "event : ");
                                n__ = 0;
                                while ( nInfo > 0 )
                                {
                                  if ( (nInfo & 1) != 0 )
                                  {
                                    v13 = sprintf(&buf_[len], "%d ", n__);
                                    len += v13;
                                  }
                                  nInfo >>= 1;
                                  ++n__;
                                }
                                CPlayer::Write(this, S2C_NOTICE, "s", buf_);
                              }
                            }
                            else if ( !strcmp(command, "/maxuser") )
                            {
                              nMaxUser = j__atol(&command[len]);
                              if ( nMaxUser > 1000 && nMaxUser <= 20000 )
                              {
                                dword_4E118C = nMaxUser;
                                sprintf(buf__, "Max User : %d", nMaxUser);
                                CPlayer::Write(this, S2C_NOTICE, "s", buf__);
                                if ( stru_4E35B4.m_nRef != 1 )
                                  LOG_ERR("Reset maximum user number. (pid:%d, number:%d)", this->m_nPID, nMaxUser);
                              }
                            }
                            else if ( !strcmp(command, "/shutdown") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && stru_4E35B4.m_nRef != 1 )
                              {
                                nMinute = j__atol(&command[len]);
                                dword_4E17B8 = 60000 * nMinute;
                                if ( 60000 * nMinute <= 0 )
                                {
                                  KillTimer(hWnd, 2u);
                                  CPlayer::Write(this, S2C_MESSAGE, "b", 3);
                                  LOG_NORMAL("Shutdown Canceled. (PID:%d)", this->m_nPID);
                                }
                                else
                                {
                                  SetTimer(hWnd, 2u, 0x2710u, 0);
                                  CPlayer::Write(this, S2C_MESSAGEV, "bb", 0, nMinute);
                                  LOG_NORMAL("Shutdown Started. (PID:%d, Min:%d)", this->m_nPID, nMinute);
                                }
                              }
                            }
                            else if ( !strcmp(command, "/shutdownoff") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && stru_4E35B4.m_nRef != 1 )
                                CAuthSocket::Write(S2A_CLEARLOGIN, &DefaultNullString);
                            }
                            else if ( !strcmp(command, "/location") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && stru_4E35B4.m_nRef != 1 )
                              {
                                commandb = &command[len];
                                len_ = strcspn(commandb, " ");
                                if ( commandb[len_] )
                                  commandb[len_++] = 0;
                                pPlayer___ = (CPlayer *)CPlayer::FindPlayer(commandb);
                                if ( pPlayer___ )
                                {
                                  if ( CGoto::FindGoto(&commandb[len_], &_goto_) )
                                    CPlayer::Teleport(pPlayer___, _goto_.nMap, &_goto_.pt, _goto_.nZ, 1);
                                  CIOObject::Release(pPlayer___, &pPlayer___->m_nFindRef);
                                }
                              }
                            }
                            else if ( !strcmp(command, "/dpadpfdpatpt") )
                            {
                              if ( sscanf(&command[len], "%d %d %d %d", &n___, &nPer1, &nPer2, &nMax) == 4
                                && n___ >= 0
                                && n___ <= 3
                                && nPer1 >= 0
                                && nPer2 <= 100
                                && nMax >= 0
                                && nMax <= 50 )
                              {
                                dword_4D66BC[3 * n___] = nPer1;
                                dword_4D66C0[3 * n___] = nPer2;
                                dword_4D66C4[3 * n___] = nMax;
                                if ( n___ >= 3 )
                                  sprintf(
                                    buf___,
                                    "Changed~! (%02d ~ ) (gm:%d, m:%d, max:%d)",
                                    10 * n___ + 1,
                                    nPer1,
                                    nPer2,
                                    nMax);
                                else
                                  sprintf(
                                    buf___,
                                    "Changed~! (%02d ~ %02d) (gm:%d, m:%d, max:%d)",
                                    10 * n___ + 1,
                                    10 * (n___ + 1),
                                    nPer1,
                                    nPer2,
                                    nMax);
                                CPlayer::Write(this, S2C_NOTICE, "s", buf___);
                              }
                            }
                            else if ( !strcmp(command, "/dpadpfdpatmxpdlxjtm") )
                            {
                              for ( n____ = 0; n____ < 4; ++n____ )
                              {
                                if ( n____ >= 3 )
                                  sprintf(
                                    buf____,
                                    "(%02d ~ ) (gm:%d, m:%d, max:%d)",
                                    10 * n____ + 1,
                                    dword_4D66BC[3 * n____],
                                    dword_4D66C0[3 * n____],
                                    dword_4D66C4[3 * n____]);
                                else
                                  sprintf(
                                    buf____,
                                    "(%02d ~ %02d) (gm:%d, m:%d, max:%d)",
                                    10 * n____ + 1,
                                    10 * (n____ + 1),
                                    dword_4D66BC[3 * n____],
                                    dword_4D66C0[3 * n____],
                                    dword_4D66C4[3 * n____]);
                                CPlayer::Write(this, S2C_NOTICE, "s", buf____);
                              }
                            }
                            else if ( !strcmp(command, "/notice") )
                            {
                              CPlayer::WriteAll(S2C_NOTICE, "s", &command[len]);
                            }
                            else if ( !strcmp(command, "/portuser") || !strcmp(command, "/test") )
                            {
                              pPlayer____ = (CPlayer *)CPlayer::FindPlayer(&command[len]);
                              if ( pPlayer____ )
                              {
                                pt__.x = this->m_ptPixel.x + 32;
                                pt__.y = this->m_ptPixel.y + 32;
                                CPlayer::Teleport(pPlayer____, this->m_nMap, &pt__, 0, 1);
                                CIOObject::Release(pPlayer____, &pPlayer____->m_nFindRef);
                              }
                            }
                            else if ( strcmp(command, "/block") )
                            {
                              strcmp(command, "/unblock");
                              if ( this->m_nAdmin >= 5 )
                              {
                                if ( !strcmp(command, "/get") )
                                {
                                  commandc = &command[len];
                                  *(_DWORD *)nIndex = 0;
                                  nPrefix = 0;
                                  nNum = 1;
                                  nVer = -1;
                                  v120 = 0;
                                  while ( *commandc )
                                  {
                                    len = strcspn(commandc, " ");
                                    if ( commandc[len] )
                                      commandc[len++] = 0;
                                    *(_DWORD *)&nIndex[4 * v120] = j__atol(commandc);
                                    commandc += len;
                                    ++v120;
                                  }
                                  if ( (dword_4E1174[0] & 2) != 0 || *(_DWORD *)nIndex != 31 )
                                  {
                                    pAddCheatItem = CItem::CreateCheatItem(*(int *)nIndex, nPrefix, nNum, nVer);
                                    if ( pAddCheatItem )
                                    {
                                      CIOObject::AddRef((int)pAddCheatItem);
                                      if ( CPlayer::InsertItem(this, 3, pAddCheatItem) == 1 )
                                        LOG_NORMAL(
                                          "Create Cheat Item. (%s, %s, %d)",
                                          this->m_szName,
                                          pAddCheatItem->m_pInit->m_szName,
                                          pAddCheatItem->m_nNum);
                                      else
                                        CBase::Delete(pAddCheatItem);
                                      CIOObject::Release(pAddCheatItem);
                                    }
                                  }
                                }
                                else if ( !strcmp(command, "/rnlthrdkdlxpa") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && stru_4E35B4.m_nRef != 1 )
                                  {
                                    commandd = &command[len];
                                    *(_DWORD *)v116 = 0;
                                    a2 = 0;
                                    a3 = 1;
                                    a4 = -1;
                                    v114 = 0;
                                    while ( *commandd )
                                    {
                                      len = strcspn(commandd, " ");
                                      if ( commandd[len] )
                                        commandd[len++] = 0;
                                      *(_DWORD *)&v116[4 * v114] = j__atol(commandd);
                                      commandd += len;
                                      ++v114;
                                    }
                                    if ( (dword_4E1174[0] & 2) != 0 || *(_DWORD *)v116 != 31 )
                                    {
                                      pAddItem = CItem::CreateOwnItem(*(int *)v116, a2, a3, a4);
                                      if ( pAddItem )
                                      {
                                        CIOObject::AddRef((int)pAddItem);
                                        if ( CPlayer::InsertItem(this, 3, pAddItem) == 1 )
                                          LOG_NORMAL(
                                            "Create Cheat Item. (%s, %s, %d)",
                                            this->m_szName,
                                            pAddItem->m_pInit->m_szName,
                                            pAddItem->m_nNum);
                                        else
                                          CBase::Delete(pAddItem);
                                        CIOObject::Release(pAddItem);
                                      }
                                    }
                                  }
                                }
                                else if ( !strcmp(command, "/dkdlxpadmfckdrhfh") )
                                {
                                  commande = &command[len];
                                  len = strcspn(commande, " ");
                                  if ( commande[len] )
                                    commande[len++] = 0;
                                  name = commande;
                                  if ( strlen(commande) <= 0x10 && IsValidAdminName(name) )
                                  {
                                    commandf = &commande[len];
                                    *(_DWORD *)v110 = 0;
                                    v111 = 0;
                                    v112 = 1;
                                    v113 = -1;
                                    v107 = 0;
                                    while ( *commandf )
                                    {
                                      len = strcspn(commandf, " ");
                                      if ( commandf[len] )
                                        commandf[len++] = 0;
                                      *(_DWORD *)&v110[4 * v107] = j__atol(commandf);
                                      commandf += len;
                                      ++v107;
                                    }
                                    if ( (dword_4E1174[0] & 2) != 0 || *(_DWORD *)v110 != 31 )
                                    {
                                      v108 = CItem::CreateItem(*(int *)v110, v111, v112, -1);
                                      if ( v108 )
                                      {
                                        v108->ForcedStorageIn(v108, 40, 0, name, 0);
                                        CBase::Delete(v108);
                                      }
                                    }
                                  }
                                }
                                else if ( !strcmp(command, "/dkdlxpathrtjdqnxdlrl") )
                                {
                                  if ( sscanf(&command[len], "%d %d %d", &v104, &v106, &v105) == 3
                                    && v105 >= 0
                                    && v105 <= 19 )
                                  {
                                    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
                                    v102 = 0;
                                    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapItem,
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v103);
                                    while ( 1 )
                                    {
                                      v14 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v69);
                                      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                                              &v103,
                                              v14) )
                                        break;
                                      v102 = *(CItem **)(sub_420250(&v103) + 4);
                                      if ( (dword_4E1174[0] & 2) != 0 )
                                        v57 = 1;
                                      else
                                        v57 = CItem::IsState(v102, 8);
                                      if ( v57 && CItem::IsState(v102, 1) && v102->m_pInit->m_nSubClass == v104 )
                                      {
                                        v102->PutOff(v102, this);
                                        if ( v102->CharmingCheat(v102, this, v106, v105) )
                                          LOG_NORMAL(
                                            "Charming Cheat Item. (%s, %s, %d, %d, %d)",
                                            this->m_szName,
                                            v102->m_pInit->m_szName,
                                            v102->m_nIID,
                                            v106,
                                            v105);
                                        v102->PutOn(v102, this);
                                        break;
                                      }
                                      sub_418860(&v103);
                                    }
                                    CIOCriticalSection::Leave((int)&this->m_lockItem);
                                  }
                                }
                                else if ( !strcmp(command, "/skill") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0
                                    && stru_4E35B4.m_nRef != 1
                                    && sscanf(&command[len], "%d %d", &nSkill, &nLevel) == 2
                                    && (nSkill > 0 && nSkill < 63 || nSkill == 80 || nSkill == 81)
                                    && nLevel > 0
                                    && nLevel <= 20 )
                                  {
                                    CPlayerSkill::CheatSkill(&this->m_skill, nSkill, nLevel);
                                  }
                                }
                                else if ( !strcmp(command, "/skillredit") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && stru_4E35B4.m_nRef != 1 )
                                  {
                                    SkillId = j__atol(&command[len]);
                                    switch ( SkillId )
                                    {
                                      case 0xFFu:
                                        CPlayerSkill::RedistributeAll(&this->m_skill);
                                        break;
                                      case 0xFEu:
                                        CPlayerSkill::Redis2ndJobSkill(&this->m_skill);
                                        break;
                                      case 0xFDu:
                                        CPlayerSkill::UpperChanceStone(&this->m_skill);
                                        break;
                                      default:
                                        CPlayerSkill::Redistribute(&this->m_skill, SkillId);
                                        break;
                                    }
                                  }
                                }
                                else if ( !strcmp(command, "/pktime") )
                                {
                                  v98 = j__atol(&command[len]);
                                  if ( CChar::IsGState(this, 256) )
                                  {
                                    if ( v98 >= 180 )
                                      v56 = 180;
                                    else
                                      v56 = v98;
                                    this->m_nGRole = v56;
                                  }
                                }
                                else if ( !strcmp(command, "/getexp") )
                                {
                                  v15 = j__atol(&command[len]);
                                  v97 = v15;
                                  if ( (int)v15 >> 31 >= 0
                                    && ((int)v15 >> 31 >= 0 && (int)v15 < 0 || (_DWORD)v97)
                                    && v97 < qword_4D6948
                                    && this->m_nLevel < 99 )
                                  {
                                    this->UpdateProperty(this, 25, 1, v97, HIDWORD(v97));
                                  }
                                }
                                else if ( !strcmp(command, "/snow") )
                                {
                                  if ( (dword_4E1178 & 0x40) != 0 )
                                  {
                                    v96 = j__atol(&command[len]);
                                    if ( v96 >= 0 && v96 <= 4 )
                                      CPlayer::EventBuff(v96);
                                  }
                                }
                                else if ( !strcmp(command, "/levelup") )
                                {
                                  if ( this->m_nLevel < 100 )
                                  {
                                    CPlayer::Write(
                                      this,
                                      S2C_UPDATEPROPERTY,
                                      "bII",
                                      25,
                                      0,
                                      0,
                                      __PAIR64__(dword_4D66F4[2 * this->m_nLevel], dword_4D66F0[2 * this->m_nLevel])
                                    - this->m_nExp);
                                    this->UpdateProperty(this, 26, 1, 1);
                                    this->UpdateProperty(this, 23, 1, 5);
                                    this->UpdateProperty(this, 24, 1, 1);
                                    this->m_nExp = 0i64;
                                    this->m_nKilled = 0;
                                    CPlayerSkill::LevelUpAutoLearnSkill(&this->m_skill, 0);
                                    CPlayer::MLMPayMoney(this, 2);
                                    CPlayer::MLMLevelUp((CIOCriticalSection *)this);
                                  }
                                }
                                else if ( !strcmp(command, "/resetlevel") )
                                {
                                  v95 = j__atol(&command[len]);
                                  if ( v95 >= 1 && v95 <= 100 )
                                  {
                                    CChar::CancelBuffPrty(this, -225);
                                    v94 = v95 - 1;
                                    this->m_nLevel = v95;
                                    this->m_nExp = 0i64;
                                    memset(&this->m_prtyBase, 0, sizeof(this->m_prtyBase));
                                    memset(&this->m_prtyPt, 0, sizeof(this->m_prtyPt));
                                    memset(&this->m_prtyPer, 0, sizeof(this->m_prtyPer));
                                    memcpy(&this->m_prtyBase, (char *)&unk_4D6A28 + 28 * this->m_nClass, 0x14u);
                                    this->m_nSUPoint = 0;
                                    this->m_nPUPoint = 0;
                                    this->m_nKilled = 0;
                                    this->m_nWMaxMagic = 0;
                                    this->m_nWMinMagic = 0;
                                    this->m_nWMaxAttack = 0;
                                    this->m_nWMinAttack = 0;
                                    this->m_nCMagic = 0;
                                    this->m_nCAttack = 0;
                                    this->m_nUpgrLevel = 0;
                                    CChar::ResetAllBuff(this);
                                    CPlayerSkill::LevelUpAutoLearnSkill(&this->m_skill, 0);
                                    this->ReviseProperty(this);
                                    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
                                    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapItem,
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v93);
                                    while ( 1 )
                                    {
                                      v16 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v67);
                                      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                                              &v93,
                                              v16) )
                                        break;
                                      v92 = *(CItem **)(sub_420250(&v93) + 4);
                                      if ( CItem::IsState(v92, 1) )
                                        v92->ApplySpec(v92, this);
                                      sub_446090((int *)&v93, &v68, 0);
                                    }
                                    CIOCriticalSection::Leave((int)&this->m_lockItem);
                                    CPlayerSkill::ExcutePassiveSkill(&this->m_skill);
                                    CPlayer::Write(this, S2C_UPDATEPROPERTY, "bb", 26, this->m_nLevel);
                                    CChar::WriteInSight(this, S2C_EFFECT, "db", this->m_nId, 3);
                                    CPlayer::UpdatePartyMember(this, 26);
                                    this->UpdateProperty(this, 23, 1, 5 * this->m_nLevel);
                                    if ( v94 > 0 )
                                      this->UpdateProperty(this, 24, 1, v94);
                                    this->m_nCurMP = CChar::GetMaxMP(this);
                                    this->m_nCurHP = CChar::GetMaxHP(this);
                                    v52 = this->m_nRage;
                                    v44 = CChar::GetResist(this, 4);
                                    v43 = CChar::GetResist(this, 3);
                                    v42 = CChar::GetResist(this, 2);
                                    v41 = CChar::GetResist(this, 1);
                                    v40 = CChar::GetResist(this, 0);
                                    v39 = this->m_nSUPoint;
                                    v38 = this->m_nPUPoint;
                                    v37 = CChar::GetMaxMagic(this);
                                    v36 = CChar::GetMinMagic(this);
                                    v35 = CChar::GetMaxAttack(this);
                                    v34 = CChar::GetMinAttack(this);
                                    v33 = this->m_nExp;
                                    v32 = CChar::GetAbsorb(this);
                                    v31 = CChar::GetDefense(this, 0);
                                    v30 = CChar::GetDodge(this);
                                    v29 = CChar::GetHit(this);
                                    v28 = this->m_nCurMP;
                                    v27 = this->m_nCurHP;
                                    v26 = CChar::GetDex(this);
                                    v25 = CChar::GetWis(this);
                                    v24 = CChar::GetInt(this);
                                    v23 = CChar::GetHth(this);
                                    v22 = CChar::GetStr(this);
                                    CPlayer::Write(
                                      this,
                                      S2C_PROPERTY,
                                      "bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd",
                                      this->m_dwSpecialty,
                                      &DefaultNullString,
                                      this->m_nGRole,
                                      this->m_nContribute,
                                      v22,
                                      v23,
                                      v24,
                                      v25,
                                      v26,
                                      v27,
                                      v27,
                                      v28,
                                      v28,
                                      v29,
                                      v30,
                                      v31,
                                      v32,
                                      v33,
                                      v34,
                                      v35,
                                      v36,
                                      v37,
                                      v38,
                                      v39,
                                      v40,
                                      v41,
                                      v42,
                                      v43,
                                      v44,
                                      v52);
                                  }
                                }
                                else if ( !strcmp(command, "/addhp") )
                                {
                                  v90 = j__atol(&command[len]);
                                  v91 = v90 + CChar::GetMaxHP(this);
                                  if ( v91 >= 0 && v91 <= 0x7FFF )
                                  {
                                    this->UpdatePrtyPt(this, 5, 1, v90);
                                    v53 = CChar::GetMaxHP(this);
                                    this->UpdateProperty(this, 7, 1, v53);
                                  }
                                }
                                else if ( !strcmp(command, "/addmp") )
                                {
                                  v88 = j__atol(&command[len]);
                                  v89 = v88 + CChar::GetMaxMP(this);
                                  if ( v89 >= 0 && v89 <= 0x7FFF )
                                  {
                                    this->UpdatePrtyPt(this, 6, 1, v88);
                                    v54 = CChar::GetMaxMP(this);
                                    this->UpdateProperty(this, 8, 1, v54);
                                  }
                                }
                                else if ( !strcmp(command, "/addcp") )
                                {
                                  v87 = j__atol(&command[len]);
                                  if ( v87 + this->m_nContribute <= 0x7FFF )
                                    this->UpdateProperty(this, 30, 1, v87);
                                }
                                else if ( !strcmp(command, "/addquest") )
                                {
                                  if ( sscanf(&command[len], "%d %d %d", &_Val1, &v85, &v86) == 3 )
                                  {
                                    CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
                                    sub_471840(&this->m_mapMyQuest, v83, &_Val1);
                                    v17 = sub_430C20(&this->m_mapMyQuest, (int)v66);
                                    if ( (unsigned __int8)unknown_libname_8(v17) )
                                    {
                                      v18 = std::pair<int,CScriptToCookBoard::tBaseTable>::pair<int,CScriptToCookBoard::tBaseTable>(
                                              (std::pair<int,CScriptToCookBoard::tBaseTable> *)v65,
                                              &_Val1,
                                              (const CScriptToCookBoard::tBaseTable *)&v85);
                                      sub_4715D0(
                                        (int)&this->m_mapMyQuest,
                                        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v64,
                                        (int)v18);
                                    }
                                    else
                                    {
                                      v19 = sub_420250(v83);
                                      *(_DWORD *)(v19 + 4) = v85;
                                      *(_DWORD *)(v19 + 8) = v86;
                                    }
                                    CIOCriticalSection::Leave((int)&this->m_lockQuest);
                                  }
                                }
                                else if ( !strcmp(command, "/finishquest") )
                                {
                                  v81 = j__atol(&command[len]);
                                  v82[0] = 0;
                                  v82[1] = 1;
                                  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
                                  for ( i = 1; i <= v81; ++i )
                                  {
                                    sub_471840(&this->m_mapMyQuest, v79, &i);
                                    v20 = sub_430C20(&this->m_mapMyQuest, (int)v63);
                                    if ( (unsigned __int8)unknown_libname_8(v20) )
                                    {
                                      v21 = std::pair<int,CScriptToCookBoard::tBaseTable>::pair<int,CScriptToCookBoard::tBaseTable>(
                                              (std::pair<int,CScriptToCookBoard::tBaseTable> *)v62,
                                              &i,
                                              (const CScriptToCookBoard::tBaseTable *)v82);
                                      sub_4715D0(
                                        (int)&this->m_mapMyQuest,
                                        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)&v61,
                                        (int)v21);
                                    }
                                    else
                                    {
                                      *(_DWORD *)(sub_420250(v79) + 8) = 1;
                                    }
                                  }
                                  CIOCriticalSection::Leave((int)&this->m_lockQuest);
                                }
                                else if ( !strcmp(command, "/resetquest") )
                                {
                                  v78 = j__atol(&command[len]);
                                  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
                                  sub_471780((int *)&this->m_mapMyQuest, (int)&v78);
                                  CIOCriticalSection::Leave((int)&this->m_lockQuest);
                                }
                                else if ( !strcmp(command, "/rageadd") )
                                {
                                  CIOCriticalSection::Enter(&this->m_lockQuest.m_critical_section);
                                  sub_4717E0(&this->m_mapMyQuest);
                                  CIOCriticalSection::Leave((int)&this->m_lockQuest);
                                }
                                else if ( !strcmp(command, "/rage") )
                                {
                                  v77 = j__atol(&command[len]);
                                  this->UpdateProperty(this, 35, 1, v77);
                                }
                                else if ( !strcmp(command, "/egggrade") )
                                {
                                  v76 = j__atol(&command[len]);
                                  CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
                                  if ( this->m_pTransform )
                                    CItemTransform::CheatLevelUp(this->m_pTransform, this, v76);
                                  CIOCriticalSection::Leave((int)&this->m_lockItem);
                                }
                                else if ( !strcmp(command, "/addatk") )
                                {
                                  v75 = j__atol(&command[len]);
                                  this->UpdatePrtyPt(this, 27, 1, v75, v75);
                                  this->UpdatePrtyPt(this, 28, 1, v75, v75);
                                }
                                else if ( !strcmp(command, "/adddef") )
                                {
                                  v74 = j__atol(&command[len]);
                                  this->UpdatePrtyPt(this, 15, 1, v74, v74);
                                }
                                else if ( !strcmp(command, "/gposition") )
                                {
                                  v73 = j__atol(&command[len]);
                                  if ( v73 >= 0 && v73 <= 5 && (this->m_dwSpecialty & (1 << v73)) == 0 )
                                  {
                                    this->m_dwSpecialty |= 1 << v73;
                                    CPlayer::Write(this, S2C_MESSAGEV, "bb", 38, this->m_dwSpecialty);
                                    CDBSocket::Write(S2D_SAVESPECIALTY, "db", this->m_nPID, 1 << v73);
                                    CPlayerSkill::ChangeOccupationAutoLearnSkill(&this->m_skill);
                                  }
                                }
                                else if ( !strcmp(command, "/lord") )
                                {
                                  CMonsterTowerBoss::Create();
                                }
                                else if ( !strcmp(command, "/nest") )
                                {
                                  if ( stru_4E35B4.m_nRef != 1 )
                                    CMonsterBigBirdMother::Create();
                                }
                                else if ( !strcmp(command, "/queen") )
                                {
                                  if ( stru_4E35B4.m_nRef != 1 )
                                    CMonsterBigBirdMaster::Create(0);
                                }
                                else if ( !strcmp(command, "/event") )
                                {
                                  v72 = j__atol(&command[len]);
                                  if ( (dword_4E1178 & 0x100) != 0 )
                                    CDBSocket::Write(S2D_EVENT_NPC, "dd", this->m_nPID, v72);
                                }
                                else if ( !strcmp(command, "/luxury") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
                                  {
                                    this->UpdatePrtyPt(this, 27, 1, 30000, 30000);
                                    this->UpdatePrtyPt(this, 28, 1, 30000, 30000);
                                    this->UpdatePrtyPt(this, 15, 1, 30000, 30000);
                                    v70 = 30000;
                                    v71 = CChar::GetMaxHP(this) + 30000;
                                    if ( v71 >= 0 && v71 <= 0x7FFF )
                                    {
                                      this->UpdatePrtyPt(this, 5, 1, 30000);
                                      v55 = CChar::GetMaxHP(this);
                                      this->UpdateProperty(this, 7, 1, v55);
                                    }
                                  }
                                }
                                else if ( !strcmp(command, "/return") )
                                {
                                  CPlayer::ReturnToPoint(this, 8);
                                }
                                else if ( !strcmp(command, "/castleinfo") )
                                {
                                  CPlayer::CountWarrelationPlayer();
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
// 462617: conditional instruction was optimized away because of '%nPer1.4>=0'
// 462620: conditional instruction was optimized away because of '%nPer2.4<65'
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D66BC: using guessed type int dword_4D66BC[];
// 4D66C0: using guessed type int dword_4D66C0[];
// 4D66F0: using guessed type int dword_4D66F0[];
// 4D6948: using guessed type __int64 qword_4D6948;
// 4D9830: using guessed type int dword_4D9830;
// 4E1178: using guessed type int dword_4E1178;
// 4E1188: using guessed type int dword_4E1188;
// 4E118C: using guessed type int dword_4E118C;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35AC: using guessed type int dword_4E35AC;

//----- (004642B0) --------------------------------------------------------
void __thiscall CPlayer::Rest(CPlayer *this, int a2)
{
  if ( a2 )
  {
    if ( CChar::IsGState(this, 4) )
      return;
    CChar::AddGState(this, 4);
    ((void (__thiscall *)(CPlayer *, int, _DWORD))this->SubMState)(this, 1, 0);
    this->m_dwNextAutoRefresh = GetTickCount() + 5000;
    goto LABEL_11;
  }
  if ( CChar::IsGState(this, 4) && !CChar::IsGState(this, 16) )
  {
    CChar::SubGState(this, 4);
    if ( CChar::IsMState(this, 0x100000i64) )
      CChar::CancelBuff(this, 18);
    if ( CChar::IsMState(this, 0x200000i64) )
      CChar::CancelBuff(this, 19);
LABEL_11:
    CChar::WriteInSight(this, S2C_ACTION, "dbb", this->m_nId, 3, a2);
  }
}

//----- (004643A0) --------------------------------------------------------
int __thiscall CPlayer::CutdownExp(CPlayer *this, int a2)
{
  int result; // eax
  int v3; // ecx
  __int64 v4; // [esp-10h] [ebp-24h]
  __int64 v5; // [esp-4h] [ebp-18h]
  int v6; // [esp+4h] [ebp-10h]
  __int64 v8; // [esp+Ch] [ebp-8h]

  result = (int)this;
  if ( this->m_nLevel > 5 )
  {
    if ( CPlayer::IsEState(this, 256) )
    {
      CPlayer::SubEState(this, 256);
    }
    else
    {
      if ( this->m_nKilled >= 20 )
        v6 = 20;
      else
        v6 = this->m_nKilled;
      v3 = this->m_nLevel;
      HIDWORD(v4) = dword_4D66F4[2 * v3];
      LODWORD(v4) = dword_4D66F0[2 * v3];
      v8 = v4 * (v6 / 5 + 2) / 100;
      LODWORD(v5) = 0x100000;
      result = CSMap::IsOnTile(this->m_pMap, &this->m_ptPixel, v5);
      if ( !result )
      {
        if ( CPlayer::IsEState(this, 128) )
        {
          v8 >>= 1;
          CPlayer::SubEState(this, 128);
        }
        if ( CPlayer::IsEState(this, 32) )
        {
          v8 >>= 1;
          CPlayer::SubEState(this, 32);
        }
        else
        {
          result = CPlayer::IsEState(this, 64);
          if ( result )
          {
            v8 /= 10i64;
            CPlayer::SubEState(this, 64);
          }
        }
        if ( a2 < 100 )
        {
          if ( a2 > 0 )
            v8 -= v8 * a2 / 100;
          result = ((int (__cdecl *)(CPlayer *, int, _DWORD, _DWORD, _DWORD))this->UpdateProperty)(
                     this,
                     25,
                     0,
                     v8,
                     HIDWORD(v8));
        }
      }
    }
  }
  return result;
}
// 464442: variable 'v5' is possibly undefined
// 4D66F0: using guessed type int dword_4D66F0[];

//----- (00464550) --------------------------------------------------------
void __thiscall CPlayer::Revival(CPlayer *this)
{
  int v1; // [esp-4h] [ebp-34h]
  int v2; // [esp-4h] [ebp-34h]
  int v4[7]; // [esp+Ch] [ebp-24h] BYREF
  tagPOINT a3; // [esp+28h] [ebp-8h] BYREF

  if ( CPlayer::IsEState(this, 16) )
  {
    this->SubGState(this, 2);
    CPlayer::SubEState(this, 16);
    return;
  }
  if ( !CChar::IsGState(this, 8) )
  {
    v1 = CChar::GetMaxHP(this);
    this->UpdateProperty(this, 7, 1, v1);
    v2 = CChar::GetMaxMP(this);
    this->UpdateProperty(this, 8, 1, v2);
    CChar::AddGState(this, 8);
    CPlayer::CutdownExp(this, 0);
    CChar::CancelBuffPrty(this, 256);
    qmemcpy(v4, (char *)&unk_4D77C8 + 28 * this->m_nRvId, sizeof(v4));
    if ( v4[5] )
    {
      if ( sub_417450() )
      {
        if ( CCastle::IsGateAlive(v4[4], v4[5]) )
        {
LABEL_16:
          a3.x = Random(v4[1] - 32, v4[1] + 32);
          a3.y = Random(v4[2] - 32, v4[2] + 32);
          CPlayer::Teleport(this, v4[0], &a3, v4[3], 0);
          return;
        }
        CChar::Unlock(this);
        if ( !CPlayer::IsDefenseSide(this, v4[4]) )
        {
LABEL_8:
          CChar::Lock(this);
          goto LABEL_16;
        }
        CChar::Lock(this);
        this->m_nRvId = v4[6];
      }
      else
      {
        this->m_nRvId = 0;
      }
    }
    else
    {
      if ( !v4[4] )
        goto LABEL_16;
      CChar::Unlock(this);
      if ( CPlayer::IsDefenseSide(this, v4[4]) )
        goto LABEL_8;
      CChar::Lock(this);
      this->m_nRvId = 0;
    }
    CDBSocket::Write(S2D_SAVEREVIVALPT, "db", this->m_nPID, this->m_nRvId);
    qmemcpy(v4, (char *)&unk_4D77C8 + 28 * this->m_nRvId, sizeof(v4));
    goto LABEL_16;
  }
}

//----- (00464750) --------------------------------------------------------
void __thiscall CPlayer::RevivalSkill(CPlayer *a1, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax
  CIOObject *v5; // [esp+4h] [ebp-4h]

  if ( CPlayer::IsEState(a1, 8) )
  {
    CPlayer::SubEState(a1, 8);
    if ( CPlayer::IsEState(a1, 16) )
    {
      a1->SubGState(a1, 2);
      CPlayer::SubEState(a1, 16);
      return;
    }
    if ( !CChar::IsNormal(a1) && !CChar::IsGState(a1, 8) && a2 )
    {
      v5 = 0;
      if ( !a3 )
        goto LABEL_13;
      v5 = CPlayer::FindPlayer(a3);
      if ( !v5 )
      {
        CPlayer::Write(a1, S2C_MESSAGE, "b", 71);
        return;
      }
      if ( Distance(&a1->m_ptTile, (const tagPOINT *)&v5[20].m_nRef) > 10 )
      {
        CPlayer::Write(a1, S2C_MESSAGE, "b", 71);
        CIOObject::Release(v5, (volatile int *)&v5[22]);
      }
      else
      {
LABEL_13:
        CPlayer::CutdownExp(a1, 50);
        CChar::CancelBuffPrty(a1, 256);
        a1->m_nCurMP = 0;
        a1->UpdateProperty(a1, 7, 1, a1->m_nRevivalHP);
        a1->UpdateProperty(a1, 8, 1, a1->m_nRevivalMP);
        v3 = CBuff::CreateBuff(4, 60, -50);
        a1->AddBuff(a1, v3);
        if ( a3 )
        {
          CChar::AddGState(a1, 8);
          CPlayer::Teleport(a1, v5[19].m_nGeneralRef, (const tagPOINT *)&v5[20].m_nGeneralRef, v5[21].m_nRef, 0);
          CIOObject::Release(v5, (volatile int *)&v5[22]);
        }
        else
        {
          a1->SubGState(a1, 2);
        }
        CChar::AddGState(a1, 0x2000);
        a1->m_dwNextAction = GetTickCount() + 10000;
      }
    }
  }
}

//----- (00464950) --------------------------------------------------------
int __thiscall CPlayer::RevivalItem(CPlayer *this, int a2)
{
  int v3; // eax
  int v4; // eax

  if ( CChar::IsNormal(this) || CPlayer::IsEState(this, 16) || CChar::IsGState(this, 8) )
    return 0;
  if ( CPlayer::IsEState(this, 8) )
    CPlayer::SubEState(this, 8);
  CPlayer::CutdownExp(this, a2);
  CChar::CancelBuffPrty(this, 256);
  this->m_nCurMP = 0;
  v3 = CChar::GetMaxHP(this);
  this->UpdateProperty(this, 7, 1, 30 * v3 / 100);
  v4 = CChar::GetMaxMP(this);
  this->UpdateProperty(this, 8, 1, 30 * v4 / 100);
  this->SubGState(this, 2);
  CChar::AddGState(this, 0x2000);
  this->m_dwNextAction = GetTickCount() + 10000;
  return 1;
}

//----- (00464A50) --------------------------------------------------------
void __thiscall CPlayer::SaveRevivalPt(CPlayer *this, int a2, int a3)
{
  char *v4; // [esp+4h] [ebp-4h]

  if ( a2 >= 0 && a2 <= dword_4E35AC )
  {
    v4 = (char *)&unk_4D77C8 + 28 * a2;
    if ( *((_DWORD *)v4 + 5) )
    {
      if ( sub_417450()
        && (CCastle::IsGateAlive(*((_DWORD *)v4 + 4), *((_DWORD *)v4 + 5))
         || !CPlayer::IsDefenseSide(this, *((_DWORD *)v4 + 4))) )
      {
LABEL_15:
        this->m_nRvId = a2;
        CPlayer::Write(this, S2C_MESSAGE, "b", 41);
        CDBSocket::Write(S2D_SAVEREVIVALPT, "db", this->m_nPID, a2);
        return;
      }
    }
    else if ( !*((_DWORD *)v4 + 4) || CPlayer::IsDefenseSide(this, *((_DWORD *)v4 + 4)) )
    {
      goto LABEL_15;
    }
    CPlayer::Write(this, S2C_MESSAGE, "b", 76);
  }
}
// 4E35AC: using guessed type int dword_4E35AC;

//----- (00464B40) --------------------------------------------------------
void __thiscall CPlayer::ProcessEvent(CPlayer *a1, int a2, void *Src, int a4)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // eax
  CBuffMoveSpeed *v6; // eax
  int nMax; // [esp+4h] [ebp-4Ch]
  CItem *pAddItem; // [esp+24h] [ebp-2Ch]
  CItem *a3; // [esp+28h] [ebp-28h]
  int v11; // [esp+2Ch] [ebp-24h]
  unsigned __int8 v12; // [esp+32h] [ebp-1Eh] BYREF
  unsigned __int8 v13; // [esp+33h] [ebp-1Dh] BYREF
  int v14; // [esp+34h] [ebp-1Ch]
  unsigned __int8 v15; // [esp+3Ah] [ebp-16h] BYREF
  unsigned __int8 v16; // [esp+3Bh] [ebp-15h] BYREF
  CItem *item; // [esp+3Ch] [ebp-14h]
  int v18; // [esp+40h] [ebp-10h]
  int v19; // [esp+44h] [ebp-Ch]
  char *name; // [esp+48h] [ebp-8h] BYREF
  CPlayer *v21; // [esp+4Ch] [ebp-4h]

  switch ( a2 )
  {
    case 1:
      if ( (dword_4E1178 & 2) != 0 )
      {
        if ( a1->m_nLevel >= 10 )
        {
          ScanPacket((char *)Src, (char *)a4, "bb", &v15, &v16);
          if ( v15 <= 3u && v16 <= 0xAu )
          {
            if ( CPlayer::RemoveItem(a1, 9, 649, v16) )
            {
              v18 = Random(1, 6);
              v19 = Random(1, 6);
              v14 = v19 + v18;
              switch ( v15 )
              {
                case 0u:
                  if ( v14 <= 6 )
                    goto LABEL_34;
                  goto LABEL_33;
                case 1u:
                  if ( v14 <= 6 )
                    goto LABEL_33;
                  goto LABEL_34;
                case 2u:
                  if ( v14 != 7 )
                    goto LABEL_33;
                  goto LABEL_34;
                case 3u:
                  if ( v14 != 2 && v14 != 12 )
                    goto LABEL_33;
LABEL_34:
                  item = CItem::CreateItem(31, 0, dword_4D6A88[v15] * v16, -1);
                  if ( CPlayer::InsertItem(a1, 24, item) != 1 )
                    CBase::Delete(item);
                  CPlayer::Write(a1, S2C_MESSAGEV, "bbbbb", 43, 26, 1, v18, v19);
                  break;
                default:
LABEL_33:
                  CPlayer::Write(a1, S2C_MESSAGEV, "bbbbb", 43, 26, 0, v18, v19);
                  break;
              }
            }
            else
            {
              CPlayer::Write(a1, S2C_MESSAGEV, "bb", 43, 25);
              LOG_ERR("ProcessEvent() RemoveItem Error (%d)", 649);
            }
          }
        }
        else
        {
          CPlayer::Write(a1, S2C_MESSAGEV, "bb", 43, 24);
        }
      }
      break;
    case 3:
      if ( (dword_4E1178 & 8) != 0 && a1->m_nLevel >= 5 )
      {
        if ( a1->m_nUID >= 439941 )
        {
          ScanPacket((char *)Src, (char *)a4, "s", &name, 17);
          if ( IsValidAdminName(name) )
          {
            v21 = (CPlayer *)CPlayer::FindPlayer(name);
            if ( v21 )
            {
              if ( a1 == v21 )
                CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 8, 0);
              else
                CAuthSocket::Write(S2A_EVENT, "bddd", a2, a1->m_nId, a1->m_nUID, v21->m_nUID);
              CIOObject::Release(v21, &v21->m_nFindRef);
            }
            else
            {
              CDBSocket::Write(S2D_EVENT, "dbs", a1->m_nId, a2, name);
            }
          }
          else
          {
            CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 6, 0);
          }
        }
        else
        {
          CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 7, 0);
        }
      }
      break;
    case 4:
      if ( stru_4E35B4.m_nRef != 1 && (dword_4E1178 & 0x10) != 0 )
      {
        if ( CChar::IsBState(a1, 0x10000000i64) )
        {
          CPlayer::Write(a1, S2C_MESSAGE, "b", 102);
        }
        else
        {
          ScanPacket((char *)Src, (char *)a4, "bb", &v13, &v12);
          a1->m_nFace = v13;
          a1->m_nHair = v12;
          v4 = CBuff::CreateBuff(102, 1814400, 0);
          a1->AddBuff(a1, v4);
          CChar::WriteInSight(a1, S2C_CHANGEFACE, "dbb", a1->m_nId, a1->m_nFace, a1->m_nHair);
          CDBSocket::Write(S2D_CHANGEFACE, "dbb", a1->m_nPID, a1->m_nFace, a1->m_nHair);
        }
      }
      break;
    case 7:
      if ( stru_4E35B4.m_nRef == 1 && (dword_4E1178 & 0x80) != 0 )
      {
        if ( CPlayer::FindItem(a1, 653, 1) )
        {
          if ( CChar::IsBState(a1, 256i64) )
            nMax = 2;
          else
            nMax = 3;
          v11 = Random(1, nMax);
          if ( v11 == 3 || CPlayer::GetInvenSize((char *)a1) < 60 )
          {
            switch ( v11 )
            {
              case 1:
                v5 = Random(0, 2);
                a3 = CItem::CreateItem(dword_4D6A7C[v5], 0, 1, -1);
                if ( a3 && CPlayer::InsertItem(a1, 24, a3) != 1 )
                  CBase::Delete(a3);
                break;
              case 2:
                pAddItem = CItem::CreateItem(31, 0, 500, -1);
                if ( pAddItem && CPlayer::InsertItem(a1, 24, pAddItem) != 1 )
                  CBase::Delete(pAddItem);
                break;
              case 3:
                v6 = CBuff::CreateBuff(17, 3600);
                a1->AddBuff(a1, v6);
                break;
            }
            if ( !CPlayer::RemoveItem(a1, 24, 653, 1) )
              LOG_ERR("CPlayer::ProcessEvent() Failed to remove item(%d) on Event(%d)", 653, 7);
          }
          else
          {
            CPlayer::Write(a1, S2C_MESSAGE, "b", 17);
          }
        }
        else
        {
          CPlayer::Write(a1, S2C_MESSAGEV, "bwd", 104, 653, 1);
        }
      }
      break;
    default:
      return;
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00465120) --------------------------------------------------------
void __thiscall CPlayer::OnProcessEvent(CPlayer *this, int a2, void *Src)
{
  unsigned __int8 v4; // [esp+Bh] [ebp-9h] BYREF
  int v5; // [esp+Ch] [ebp-8h] BYREF
  char v6; // [esp+12h] [ebp-2h] BYREF
  unsigned __int8 v7; // [esp+13h] [ebp-1h] BYREF
  char *Srca; // [esp+20h] [ebp+Ch]
  void *Srcb; // [esp+20h] [ebp+Ch]

  if ( a2 == 3 )
  {
    Srca = (char *)ReadPacket((char *)Src, "bb", &v6, &v7);
    if ( v6 )
    {
      CPlayer::Write(this, S2C_MESSAGEV, "bbb", 43, v7, 0);
    }
    else
    {
      ReadPacket(Srca, "d", &v5);
      if ( v7 == 9 )
      {
        if ( this->m_nUID == v5 )
          CPlayer::Write(this, S2C_MESSAGEV, "bbb", 43, 8, 0);
        else
          CAuthSocket::Write(S2A_EVENT, "bddd", 3, this->m_nId, this->m_nUID, v5);
      }
      else
      {
        CPlayer::Write(this, S2C_MESSAGEV, "bbb", 43, v7, 0);
      }
    }
  }
  else if ( a2 == 5 )
  {
    Srcb = ReadPacket((char *)Src, "b", &v4);
    CPlayer::MLMProcess(this, v4, Srcb, (int)Srcb);
  }
}

//----- (00465250) --------------------------------------------------------
void __thiscall CPlayer::InitStat(CPlayer *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  int v3; // [esp-68h] [ebp-7Ch]
  int v4; // [esp-64h] [ebp-78h]
  int v5; // [esp-60h] [ebp-74h]
  int v6; // [esp-5Ch] [ebp-70h]
  int v7; // [esp-54h] [ebp-68h]
  int v8; // [esp-4Ch] [ebp-60h]
  int v9; // [esp-48h] [ebp-5Ch]
  int v10; // [esp-44h] [ebp-58h]
  int v11; // [esp-40h] [ebp-54h]
  int v12; // [esp-3Ch] [ebp-50h]
  __int64 v13; // [esp-38h] [ebp-4Ch]
  int v14; // [esp-30h] [ebp-44h]
  int v15; // [esp-2Ch] [ebp-40h]
  int v16; // [esp-28h] [ebp-3Ch]
  int v17; // [esp-24h] [ebp-38h]
  int v18; // [esp-20h] [ebp-34h]
  int v19; // [esp-1Ch] [ebp-30h]
  int v20; // [esp-18h] [ebp-2Ch]
  int v21; // [esp-14h] [ebp-28h]
  int v22; // [esp-10h] [ebp-24h]
  int v23; // [esp-Ch] [ebp-20h]
  int v24; // [esp-8h] [ebp-1Ch]
  int v25; // [esp-4h] [ebp-18h]
  char v27[4]; // [esp+4h] [ebp-10h] BYREF
  int v28; // [esp+8h] [ebp-Ch] BYREF
  CItem *v29; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v30; // [esp+10h] [ebp-4h] BYREF

  if ( CPlayer::RemoveItem(this, 16, 361, 1) || CPlayer::RemoveItem(this, 16, 501, 1) )
  {
    CChar::CancelBuffPrty(this, -225);
    memset(&this->m_prtyBase, 0, sizeof(this->m_prtyBase));
    memset(&this->m_prtyPt, 0, sizeof(this->m_prtyPt));
    memset(&this->m_prtyPer, 0, sizeof(this->m_prtyPer));
    memcpy(&this->m_prtyBase, (char *)&unk_4D6A28 + 28 * this->m_nClass, 0x14u);
    this->m_nPUPoint = 0;
    this->m_nWMaxMagic = 0;
    this->m_nWMinMagic = 0;
    this->m_nWMaxAttack = 0;
    this->m_nWMinAttack = 0;
    this->m_nCMagic = 0;
    this->m_nCAttack = 0;
    this->m_nUpgrLevel = 0;
    CChar::ResetAllBuff(this);
    this->ReviseProperty(this);
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapItem,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v30);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapItem, (int)v27);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v30,
              v1) )
        break;
      v29 = *(CItem **)(sub_420250(&v30) + 4);
      if ( CItem::IsState(v29, 1) )
        v29->ApplySpec(v29, this);
      sub_446090((int *)&v30, &v28, 0);
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    CPlayerSkill::ExcutePassiveSkill(&this->m_skill);
    this->UpdateProperty(this, 23, 1, 5 * this->m_nLevel);
    this->m_nCurMP = CChar::GetMaxMP(this);
    this->m_nCurHP = CChar::GetMaxHP(this);
    v25 = this->m_nRage;
    v24 = CChar::GetResist(this, 4);
    v23 = CChar::GetResist(this, 3);
    v22 = CChar::GetResist(this, 2);
    v21 = CChar::GetResist(this, 1);
    v20 = CChar::GetResist(this, 0);
    v19 = this->m_nSUPoint;
    v18 = this->m_nPUPoint;
    v17 = CChar::GetMaxMagic(this);
    v16 = CChar::GetMinMagic(this);
    v15 = CChar::GetMaxAttack(this);
    v14 = CChar::GetMinAttack(this);
    v13 = this->m_nExp;
    v12 = CChar::GetAbsorb(this);
    v11 = CChar::GetDefense(this, 0);
    v10 = CChar::GetDodge(this);
    v9 = CChar::GetHit(this);
    v8 = this->m_nCurMP;
    v7 = this->m_nCurHP;
    v6 = CChar::GetDex(this);
    v5 = CChar::GetWis(this);
    v4 = CChar::GetInt(this);
    v3 = CChar::GetHth(this);
    v2 = CChar::GetStr(this);
    CPlayer::Write(
      this,
      S2C_PROPERTY,
      "bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd",
      this->m_dwSpecialty,
      &DefaultNullString,
      this->m_nGRole,
      this->m_nContribute,
      v2,
      v3,
      v4,
      v5,
      v6,
      v7,
      v7,
      v8,
      v8,
      v9,
      v10,
      v11,
      v12,
      v13,
      v14,
      v15,
      v16,
      v17,
      v18,
      v19,
      v20,
      v21,
      v22,
      v23,
      v24,
      v25);
    CPlayer::Write(this, S2C_MESSAGE, "b", 59);
    CPlayer::SaveAllProperty(this, 0);
  }
}

//----- (004655B0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::EventInsert(CPlayer *this, int a2)
{
  _DWORD *result; // eax

  *(_DWORD *)(a2 + 12) = this->m_pEventHead;
  result = &this->__vftable;
  this->m_pEventHead = (EVENTLIST *)a2;
  return result;
}

//----- (004655E0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::EventRemoveAll(CPlayer *this)
{
  _DWORD *result; // eax
  EVENTLIST *v3; // [esp+8h] [ebp-4h]

  while ( 1 )
  {
    result = &this->__vftable;
    if ( !this->m_pEventHead )
      break;
    v3 = this->m_pEventHead;
    this->m_pEventHead = v3->pNext;
    operator delete(v3);
  }
  return result;
}

//----- (00465630) --------------------------------------------------------
BOOL __thiscall CPlayer::EventIsMoraTime(CPlayer *this)
{
  _DWORD *v2; // [esp+0h] [ebp-10h]
  CMemory **v4; // [esp+8h] [ebp-8h]
  EVENTLIST *i; // [esp+Ch] [ebp-4h]

  for ( i = this->m_pEventHead; i; i = i->pNext )
  {
    if ( !i->nType )
      return GetTickCount() - i->nF1 >= 0x36EE80;
  }
  v4 = operator new(0x10u);
  if ( v4 )
    v2 = sub_457E30(v4);
  else
    v2 = 0;
  v2[1] = 0;
  v2[2] = GetTickCount() - 3600000;
  CPlayer::EventInsert(this, (int)v2);
  return 1;
}

//----- (004656E0) --------------------------------------------------------
unsigned int __thiscall CPlayer::EventSetMora(CPlayer *this, int a2)
{
  CItem *v4; // [esp+8h] [ebp-20h]
  CItem *item; // [esp+Ch] [ebp-1Ch]
  int v6; // [esp+10h] [ebp-18h]
  int v7; // [esp+14h] [ebp-14h]
  int a3; // [esp+18h] [ebp-10h]
  int a1; // [esp+1Ch] [ebp-Ch]
  EVENTLIST *i; // [esp+20h] [ebp-8h]
  unsigned int v11; // [esp+24h] [ebp-4h]

  for ( i = this->m_pEventHead; ; i = i->pNext )
  {
    if ( !i )
      return 0;
    if ( !i->nType )
      break;
  }
  v6 = 0;
  v7 = 0;
  a1 = 0;
  a3 = 0;
  i->nCurState = a2 | i->nCurState & 0xFFFF0000;
  if ( a2 == 1 )
  {
    i->nCurState += 0x10000;
    if ( (i->nCurState & 0xFFFF0000) >> 16 >= 5 )
    {
      v6 = 5000;
      a1 = 274;
      v7 = 1;
      a3 = 1;
    }
  }
  else if ( a2 == 3 )
  {
    switch ( (i->nCurState & 0xFFFF0000) >> 16 )
    {
      case 1u:
        v6 = 200;
        break;
      case 2u:
        v6 = 500;
        break;
      case 3u:
        v6 = 1000;
        break;
      case 4u:
        v6 = 2000;
        a1 = 273;
        a3 = 1;
        break;
      default:
        break;
    }
    v7 = 1;
  }
  v11 = (i->nCurState & 0xFFFF0000) >> 16;
  if ( v7 )
  {
    i->nF1 = GetTickCount();
    i->nCurState = 0;
    if ( v6 )
    {
      item = CItem::CreateItem(31, 0, v6, -1);
      if ( item )
      {
        if ( !CPlayer::InsertItem(this, 24, item) )
        {
          LOG_ERR("CPlayer::EventSetMora() Fail to insert money(%d).", v6);
          CBase::Delete(item);
        }
      }
    }
    if ( a1 )
    {
      v4 = CItem::CreateItem(a1, 0, a3, -1);
      if ( v4 )
      {
        if ( CPlayer::InsertItem(this, 2, v4) != 1 )
          CBase::Delete(v4);
      }
    }
  }
  return v11;
}

//----- (004658E0) --------------------------------------------------------
void __thiscall CPlayer::EventSaveDB(CPlayer *this)
{
  char *v1; // eax
  EVENTLIST *v3; // [esp+8h] [ebp-1010h]
  char *v4; // [esp+Ch] [ebp-100Ch]
  char v5; // [esp+10h] [ebp-1008h] BYREF
  char v6[4092]; // [esp+11h] [ebp-1007h] BYREF
  __int16 v7; // [esp+100Dh] [ebp-Bh]
  char v8; // [esp+100Fh] [ebp-9h]
  int v9; // [esp+1010h] [ebp-8h]
  int v10; // [esp+1014h] [ebp-4h]

  v9 = dword_4D9830;
  v5 = 0;
  memset(v6, 0, sizeof(v6));
  v7 = 0;
  v8 = 0;
  v4 = &v5;
  v10 = 0;
  v3 = this->m_pEventHead;
  while ( v3 )
  {
    v1 = PutNumeric<unsigned char>(v4, v3->nType);
    v4 = PutNumeric<int>(v1, v3->nF1);
    v3 = v3->pNext;
    ++v10;
  }
  if ( v10 )
    CDBSocket::Write(S2D_EVENTSAVE, "dbm", this->m_nPID, v10, &v5, v4 - &v5);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004659F0) --------------------------------------------------------
void __thiscall CPlayer::MLMProcess(CPlayer *a1, int a2, void *Src, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  CPlayer *v7; // eax
  CPlayer *v8; // eax
  char *v9; // eax
  int v10; // [esp-Ch] [ebp-D8h]
  int v11; // [esp-4h] [ebp-D0h]
  int v12; // [esp-4h] [ebp-D0h]
  int v13; // [esp-4h] [ebp-D0h]
  int v14; // [esp+0h] [ebp-CCh]
  int *v15; // [esp+4h] [ebp-C8h]
  int *v16; // [esp+8h] [ebp-C4h]
  int *v17; // [esp+Ch] [ebp-C0h]
  int *v18; // [esp+10h] [ebp-BCh]
  int *v19; // [esp+14h] [ebp-B8h]
  int *v21; // [esp+20h] [ebp-ACh]
  int *v22; // [esp+24h] [ebp-A8h]
  int *v23; // [esp+28h] [ebp-A4h]
  int *v24; // [esp+2Ch] [ebp-A0h]
  int *v25; // [esp+30h] [ebp-9Ch]
  unsigned __int8 v26; // [esp+37h] [ebp-95h] BYREF
  int v27; // [esp+38h] [ebp-94h] BYREF
  MLMLIST *v28; // [esp+3Ch] [ebp-90h]
  unsigned __int8 v29; // [esp+43h] [ebp-89h] BYREF
  int v30; // [esp+44h] [ebp-88h]
  int v31; // [esp+48h] [ebp-84h]
  char *str; // [esp+4Ch] [ebp-80h] BYREF
  enum S2C_PROTOCOL v33; // [esp+50h] [ebp-7Ch]
  int v34; // [esp+54h] [ebp-78h] BYREF
  char v35; // [esp+5Ah] [ebp-72h] BYREF
  char v36; // [esp+5Bh] [ebp-71h] BYREF
  char *v37; // [esp+5Ch] [ebp-70h]
  char *v38; // [esp+60h] [ebp-6Ch]
  MLMLIST *v39; // [esp+64h] [ebp-68h]
  int v40; // [esp+68h] [ebp-64h]
  void *v41; // [esp+6Ch] [ebp-60h]
  enum S2C_PROTOCOL v42; // [esp+70h] [ebp-5Ch]
  MLMLIST *v43; // [esp+74h] [ebp-58h]
  CIOObject *v44; // [esp+78h] [ebp-54h] BYREF
  int v45; // [esp+7Ch] [ebp-50h]
  enum S2C_PROTOCOL v46; // [esp+80h] [ebp-4Ch]
  CIOObject *v47; // [esp+84h] [ebp-48h] BYREF
  int a3; // [esp+88h] [ebp-44h] BYREF
  MLMLIST *k; // [esp+8Ch] [ebp-40h]
  CItem *item; // [esp+90h] [ebp-3Ch]
  int j; // [esp+94h] [ebp-38h]
  _DWORD **v52; // [esp+98h] [ebp-34h]
  CMemory *a2a; // [esp+9Ch] [ebp-30h]
  int *v54; // [esp+A0h] [ebp-2Ch]
  MLMLIST *i; // [esp+A4h] [ebp-28h]
  CMemory *v56; // [esp+A8h] [ebp-24h]
  int v57; // [esp+ACh] [ebp-20h] BYREF
  char v58; // [esp+B3h] [ebp-19h] BYREF
  enum S2C_PROTOCOL v59; // [esp+B4h] [ebp-18h]
  int v60; // [esp+B8h] [ebp-14h] BYREF
  char v61; // [esp+BFh] [ebp-Dh] BYREF
  enum S2C_PROTOCOL nType; // [esp+C0h] [ebp-Ch]
  CIOObject *v63; // [esp+C4h] [ebp-8h]
  char *v64; // [esp+C8h] [ebp-4h] BYREF

  switch ( a2 )
  {
    case 0:
      if ( a1->m_nLevel <= 15 )
      {
        CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
        if ( CPlayer::_MLMFind(a1, 2, 0) )
        {
          CIOCriticalSection::Leave((int)&a1->m_lockMlm);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 13, 0);
        }
        else
        {
          CIOCriticalSection::Leave((int)&a1->m_lockMlm);
          ScanPacket((char *)Src, (char *)a4, "s", &v64, 17);
          v63 = CPlayer::FindPlayer(v64);
          if ( v63 )
          {
            if ( v63[3].m_nGeneralRef < 16 )
            {
              CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 11, 0);
            }
            else if ( CPlayer::MLMPupilNum((CPlayer *)v63) < 20 )
            {
              v4 = CBase::Id((CBase *)v63);
              CAuthSocket::Write(S2A_EVENT, "bddbd", 5, a1->m_nId, a1->m_nUID, 1, v4);
            }
            else
            {
              CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 12, 0);
            }
            CIOObject::Release(v63, (volatile int *)&v63[22]);
          }
          else
          {
            CPlayer::Write(a1, S2C_MESSAGE, "b", 25);
          }
        }
      }
      else
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 10, 0);
      }
      break;
    case 1:
      ScanPacket((char *)Src, (char *)a4, "db", &v60, &v61);
      nType = (enum S2C_PROTOCOL)CPlayer::FindPlayer(v60);
      if ( nType )
      {
        if ( v61 )
        {
          v11 = a1->m_nId;
          v10 = *(_DWORD *)(nType + 448);
          v5 = CBase::Id((CBase *)nType);
          CAuthSocket::Write(S2A_EVENT, "bddbd", 5, v5, v10, 0, v11);
        }
        else
        {
          CPlayer::Write((CPlayer *)nType, S2C_MESSAGEV, "bbb", 43, 14, 0);
        }
        CIOObject::Release((CIOObject *)nType, (volatile int *)(nType + 352));
      }
      break;
    case 2:
      ReadPacket((char *)Src, "bd", &v58, &v57);
      v59 = (enum S2C_PROTOCOL)CPlayer::FindPlayer(v57);
      if ( v59 )
      {
        if ( v58 )
        {
          sub_466B20((unsigned int)a1, v59);
          if ( CPlayer::_MLMFind(a1, 2, 0) )
          {
            sub_466B70((int)a1, v59);
            CAuthSocket::Write(S2A_EVENT, "bddbd", 5, 0, a1->m_nUID, 3, 0);
            return;
          }
          i = CPlayer::_MLMFind((CPlayer *)v59, 2, 0);
          if ( i )
          {
            v25 = (int *)operator new(0x30u);
            if ( v25 )
              v19 = sub_466AB0(v25, 1, i->nPID, i->szName, i->nClass, i->nLevel, 0, i->nUID);
            else
              v19 = 0;
            v54 = v19;
            CPlayer::_MLMInsert(a1, v19);
            CDBSocket::Write(S2D_MLM, "dbddbsbb", a1->m_nPID, 0, i->nPID, i->nUID, 1, i->szName, i->nClass, i->nLevel);
          }
          v24 = (int *)operator new(0x30u);
          if ( v24 )
            v18 = sub_466AB0(
                    v24,
                    2,
                    *(_DWORD *)(v59 + 452),
                    (void *)(v59 + 32),
                    *(_DWORD *)(v59 + 460),
                    *(_DWORD *)(v59 + 60),
                    1,
                    *(_DWORD *)(v59 + 448));
          else
            v18 = 0;
          v54 = v18;
          CPlayer::_MLMInsert(a1, v18);
          CDBSocket::Write(
            S2D_MLM,
            "dbddbsbb",
            a1->m_nPID,
            0,
            *(_DWORD *)(v59 + 452),
            *(_DWORD *)(v59 + 448),
            2,
            v59 + 32,
            *(_DWORD *)(v59 + 460),
            *(_DWORD *)(v59 + 60));
          v56 = 0;
          for ( i = CPlayer::_MLMFind((CPlayer *)v59, 4, 0); i && i->nRelation == 4; i = i->pNext )
          {
            v23 = (int *)operator new(0x30u);
            if ( v23 )
              v17 = sub_466AB0(v23, 3, i->nPID, i->szName, i->nClass, i->nLevel, i->bLogin, i->nUID);
            else
              v17 = 0;
            v54 = v17;
            CPlayer::_MLMInsert(a1, v17);
            CDBSocket::Write(S2D_MLM, "dbddbsbb", a1->m_nPID, 0, i->nPID, i->nUID, 3, i->szName, i->nClass, i->nLevel);
            CDBSocket::Write(
              S2D_MLM,
              "dbddbsbb",
              i->nPID,
              0,
              a1->m_nPID,
              a1->m_nUID,
              3,
              a1->m_szName,
              a1->m_nClass,
              a1->m_nLevel);
            if ( i->bLogin )
            {
              a2a = (CMemory *)CPlayer::ScanPlayer(i->nPID);
              if ( a2a )
              {
                v56 = (CMemory *)CBaseList::Push((CBaseList *)v56, (CBase *)a2a);
                CIOObject::Release((CIOObject *)a2a, &a2a[6].__sbh_sizeHeaderList);
              }
            }
          }
          v22 = (int *)operator new(0x30u);
          if ( v22 )
            v16 = sub_466AB0(v22, 4, a1->m_nPID, a1->m_szName, a1->m_nClass, a1->m_nLevel, 1, a1->m_nUID);
          else
            v16 = 0;
          v54 = v16;
          CPlayer::_MLMInsert((_DWORD **)v59, v16);
          CDBSocket::Write(
            S2D_MLM,
            "dbddbsbb",
            *(_DWORD *)(v59 + 452),
            0,
            a1->m_nPID,
            a1->m_nUID,
            4,
            a1->m_szName,
            a1->m_nClass,
            a1->m_nLevel);
          sub_466B70((int)a1, v59);
          while ( v56 )
          {
            v52 = (_DWORD **)unknown_libname_7(v56);
            v21 = (int *)operator new(0x30u);
            if ( v21 )
              v15 = sub_466AB0(v21, 3, a1->m_nPID, a1->m_szName, a1->m_nClass, a1->m_nLevel, 1, a1->m_nUID);
            else
              v15 = 0;
            v54 = v15;
            CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v52 + 327));
            CPlayer::_MLMInsert(v52, v15);
            CIOCriticalSection::Leave((int)(v52 + 327));
            v56 = (CMemory *)CBaseList::Pop((CBaseList *)v56);
          }
          if ( v58 == 1 )
          {
            for ( j = 0; j < 5; ++j )
            {
              item = CItem::CreateItem(dword_4D91D0[5 * a1->m_nClass + j], 0, 1, -1);
              if ( item && CPlayer::InsertItem(a1, 41, item) != 1 )
                CBase::Delete(item);
            }
          }
          v6 = CPlayer::MLMPupilNum((CPlayer *)v59);
          CPlayer::Write((CPlayer *)v59, S2C_MESSAGEV, "bbbs", 43, 17, v6, a1->m_szName);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbbs", 43, 18, 0, v59 + 32);
        }
        else
        {
          CPlayer::Write((CPlayer *)v59, S2C_MESSAGEV, "bbb", 43, 15, 0);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 13, 0);
        }
        CIOObject::Release((CIOObject *)v59, (volatile int *)(v59 + 352));
      }
      else if ( v58 )
      {
        CAuthSocket::Write(S2A_EVENT, "bddbd", 5, 0, a1->m_nUID, 3, 0);
      }
      break;
    case 3:
      ScanPacket((char *)Src, (char *)a4, "d", &a3);
      CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
      for ( k = a1->m_pTopMlm; k && (k->nRelation != 2 && k->nRelation != 4 || k->nPID != a3); k = k->pNext )
        ;
      if ( k )
      {
        if ( k->nRelation == 2 )
        {
          if ( a1->m_nLevel >= 16 )
          {
            CPlayer::Write(a1, S2C_MESSAGEV, "bbbs", 43, 21, 0, k->szName);
            v47 = 0;
            CPlayer::_MLMGet((CMemory **)&v47, 3);
            CPlayer::_MLMDelete(a1, 1, 0);
            CPlayer::_MLMDelete(a1, 2, 0);
            CPlayer::_MLMDelete(a1, 3, 0);
            CIOCriticalSection::Leave((int)&a1->m_lockMlm);
            while ( v47 )
            {
              v12 = a1->m_nPID;
              v7 = (CPlayer *)unknown_libname_7(v47);
              CPlayer::MLMDelete(v7, 3, v12);
              v47 = (CIOObject *)CBaseList::Pop((CBaseList *)v47);
            }
            CDBSocket::Write(S2D_MLM, "db", a1->m_nPID, 2);
            v46 = (enum S2C_PROTOCOL)CPlayer::ScanPlayer(a3);
            if ( v46 )
            {
              CPlayer::MLMDelete((CPlayer *)v46, 4, a1->m_nPID);
              CPlayer::Write((CPlayer *)v46, S2C_MESSAGEV, "bbbs", 43, 21, 0, a1->m_szName);
              CIOObject::Release((CIOObject *)v46, (volatile int *)(v46 + 352));
            }
            CDBSocket::Write(S2D_MLM, "dbd", a3, 1, a1->m_nPID);
            CAuthSocket::Write(S2A_EVENT, "bddbd", 5, 0, a1->m_nUID, 4, 0);
          }
          else
          {
            CIOCriticalSection::Leave((int)&a1->m_lockMlm);
            CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 16, 0);
          }
        }
        else
        {
          v45 = 0;
          v43 = CPlayer::_MLMFind(a1, 4, a3);
          if ( v43 )
          {
            CPlayer::Write(a1, S2C_MESSAGEV, "bbbs", 43, 21, 0, v43->szName);
            v45 = v43->nUID;
          }
          CPlayer::_MLMDelete(a1, 4, a3);
          v44 = 0;
          CPlayer::_MLMGet((CMemory **)&v44, 4);
          CIOCriticalSection::Leave((int)&a1->m_lockMlm);
          CDBSocket::Write(S2D_MLM, "dbd", a1->m_nPID, 1, a3);
          while ( v44 )
          {
            v13 = a3;
            v8 = (CPlayer *)unknown_libname_7(v44);
            CPlayer::MLMDelete(v8, 3, v13);
            v44 = (CIOObject *)CBaseList::Pop((CBaseList *)v44);
          }
          v42 = (enum S2C_PROTOCOL)CPlayer::ScanPlayer(a3);
          if ( v42 )
          {
            CPlayer::MLMDelete((CPlayer *)v42, 1, 0);
            CPlayer::MLMDelete((CPlayer *)v42, 2, 0);
            CPlayer::MLMDelete((CPlayer *)v42, 3, 0);
            CPlayer::Write((CPlayer *)v42, S2C_MESSAGEV, "bbbs", 43, 21, 0, a1->m_szName);
            CIOObject::Release((CIOObject *)v42, (volatile int *)(v42 + 352));
          }
          CDBSocket::Write(S2D_MLM, "db", a3, 2);
          CAuthSocket::Write(S2A_EVENT, "bddbd", 5, 0, v45, 4, 0);
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&a1->m_lockMlm);
      }
      break;
    case 4:
      v41 = CIOBuffer::Alloc();
      v37 = (char *)v41;
      *((_BYTE *)v41 + 2) = 100;
      v38 = v37 + 5;
      v40 = 0;
      CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
      v39 = a1->m_pTopMlm;
      while ( v39 )
      {
        v38 = PutNumeric<unsigned char>(v38, v39->nRelation);
        v9 = PutNumeric<int>(v38, v39->nPID);
        v38 = PutString(v9, v39->szName);
        v38 = PutNumeric<unsigned char>(v38, v39->bLogin);
        v38 = PutNumeric<unsigned char>(v38, v39->nClass);
        v38 = PutNumeric<unsigned char>(v38, v39->nLevel);
        v39 = v39->pNext;
        ++v40;
      }
      CIOCriticalSection::Leave((int)&a1->m_lockMlm);
      WritePacket(v37 + 3, "bb", 1, v40);
      *(_WORD *)v37 = (_WORD)v38 - (_WORD)v37;
      *((_DWORD *)v41 + 2000) = *(unsigned __int16 *)v37;
      CSocket::Send(a1->m_pSocket, (CIOBuffer *)v41);
      break;
    case 5:
      ReadPacket((char *)Src, "bbd", &v35, &v36, &v34);
      if ( v35 == 1 )
      {
        v33 = (enum S2C_PROTOCOL)CPlayer::FindPlayer(v34);
        if ( v33 )
        {
          CPlayer::Write((CPlayer *)v33, S2C_MLM, "bds", (v36 & 4) != 0 ? 2 : 0, a1->m_nId, a1->m_szName);
          CIOObject::Release((CIOObject *)v33, (volatile int *)(v33 + 352));
        }
        else
        {
          CPlayer::Write(a1, S2C_MESSAGE, "b", 25);
        }
      }
      else if ( (v36 & 4) == 0 )
      {
        CPlayer::MLMPayMoney(a1, 1);
      }
      break;
    case 6:
      ScanPacket((char *)Src, (char *)a4, "s", &str, 181);
      if ( CPlayer::MLMPupilNum(a1) > 0 )
      {
        v31 = 22;
        if ( IsValidString(str) )
        {
          CDBSocket::Write(S2D_MLM, "dbs", a1->m_nPID, 4, str);
          v31 = 23;
        }
        CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, v31, 0);
      }
      break;
    case 7:
      ScanPacket((char *)Src, (char *)a4, "b", &v29);
      v30 = a1->m_nPID;
      if ( v29 )
      {
        CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
        v28 = CPlayer::_MLMFind(a1, 2, 0);
        if ( v28 )
          v14 = v28->nPID;
        else
          v14 = 0;
        v30 = v14;
        CIOCriticalSection::Leave((int)&a1->m_lockMlm);
      }
      if ( v30 )
        CDBSocket::Write(S2D_MLM, "dbbd", v30, 5, v29, a1->m_nId);
      break;
    case 8:
      ReadPacket((char *)Src, "bs", &v26, &v27);
      CPlayer::Write(a1, S2C_MLM, "bbs", 3, v26, v27);
      break;
    default:
      return;
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00466AB0) --------------------------------------------------------
int *__thiscall sub_466AB0(int *this, int a2, int a3, void *a4, int a5, int a6, int a7, int a8)
{
  *this = a2;
  this[1] = a3;
  memcpy(this + 2, a4, 0x11u);
  this[7] = a5;
  this[8] = a6;
  this[9] = a7;
  this[10] = a8;
  this[11] = 0;
  return this;
}

//----- (00466B20) --------------------------------------------------------
void __cdecl sub_466B20(unsigned int a1, unsigned int a2)
{
  if ( a1 >= a2 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a2 + 1308));
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308));
  }
  else
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308));
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a2 + 1308));
  }
}

//----- (00466B70) --------------------------------------------------------
void __cdecl sub_466B70(int a1, int a2)
{
  CIOCriticalSection::Leave(a1 + 1308);
  CIOCriticalSection::Leave(a2 + 1308);
}

//----- (00466BA0) --------------------------------------------------------
void __thiscall CPlayer::MLMLoad(CPlayer *a1, _DWORD *a2)
{
  CPlayer *v3; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
  CPlayer::_MLMInsert(a1, a2);
  if ( *a2 == 2 || *a2 == 3 || *a2 == 4 )
  {
    v3 = CPlayer::ScanPlayer(a2[1]);
    if ( v3 )
    {
      a2[9] = 1;
      CIOCriticalSection::Leave((int)&a1->m_lockMlm);
      CPlayer::MLMUpdate(v3, a1->m_nPID, 0, 1);
      CIOObject::Release(v3, &v3->m_nFindRef);
      return;
    }
  }
  else if ( !*a2 && (int)a2[1] > 20000000 )
  {
    a1->m_bOverFee = 1;
  }
  CIOCriticalSection::Leave((int)&a1->m_lockMlm);
}

//----- (00466C70) --------------------------------------------------------
_DWORD *__thiscall CPlayer::_MLMInsert(_DWORD **this, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD **i; // [esp+8h] [ebp-8h]
  _DWORD *v4; // [esp+Ch] [ebp-4h]

  for ( i = this + 326; ; i = (_DWORD **)(v4 + 11) )
  {
    v4 = *i;
    if ( !*i || *v4 >= *a2 )
      break;
  }
  result = a2;
  *i = a2;
  a2[11] = v4;
  return result;
}

//----- (00466CD0) --------------------------------------------------------
void __thiscall CPlayer::MLMDelete(CPlayer *this, int a2, int a3)
{
  CIOCriticalSection::Enter(&this->m_lockMlm.m_critical_section);
  CPlayer::_MLMDelete(this, a2, a3);
  CIOCriticalSection::Leave((int)&this->m_lockMlm);
}

//----- (00466D10) --------------------------------------------------------
void __thiscall CPlayer::_MLMDelete(_DWORD **this, int a2, int a3)
{
  _DWORD **v3; // [esp+8h] [ebp-8h]
  _DWORD *v4; // [esp+Ch] [ebp-4h]

  if ( a2 )
  {
    v3 = this + 326;
    while ( 1 )
    {
      v4 = *v3;
      if ( !*v3 )
        break;
      if ( *v4 == a2 && (!a3 || v4[1] == a3) )
      {
        *v3 = (_DWORD *)v4[11];
        operator delete(v4);
        if ( a2 != 3 || a3 )
          return;
      }
      else
      {
        v3 = (_DWORD **)(v4 + 11);
      }
    }
  }
}

//----- (00466DA0) --------------------------------------------------------
void __thiscall CPlayer::MLMDeleteAll(CPlayer *a1)
{
  CPlayer *v2; // [esp+8h] [ebp-Ch]
  MLMLIST *v3; // [esp+Ch] [ebp-8h]
  MLMLIST *v4; // [esp+10h] [ebp-4h]

  CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
  v3 = a1->m_pTopMlm;
  a1->m_pTopMlm = 0;
  CIOCriticalSection::Leave((int)&a1->m_lockMlm);
  while ( v3 )
  {
    if ( v3->nRelation == 2 || v3->nRelation == 3 || v3->nRelation == 4 )
    {
      v2 = CPlayer::ScanPlayer(v3->nPID);
      if ( v2 )
      {
        CPlayer::MLMUpdate(v2, a1->m_nPID, 0, 0);
        CIOObject::Release(v2, &v2->m_nFindRef);
      }
    }
    v4 = v3;
    v3 = v3->pNext;
    operator delete(v4);
  }
}

//----- (00466E70) --------------------------------------------------------
void __thiscall CPlayer::MLMUpdate(CPlayer *this, int a2, int a3, int a4)
{
  MLMLIST *i; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockMlm.m_critical_section);
  for ( i = this->m_pTopMlm; i && (!i->nRelation || i->nPID != a2); i = i->pNext )
    ;
  if ( i )
  {
    if ( a3 )
    {
      if ( a3 == 1 )
        i->nLevel = a4;
    }
    else
    {
      i->bLogin = a4;
      if ( a4 )
        CPlayer::Write(this, S2C_MESSAGEV, "bbs", 73, i->nRelation, i->szName);
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockMlm);
}

//----- (00466F20) --------------------------------------------------------
MLMLIST *__thiscall CPlayer::_MLMFind(CPlayer *this, int a2, int a3)
{
  MLMLIST *i; // [esp+4h] [ebp-4h]

  for ( i = this->m_pTopMlm; i && i->nRelation <= a2; i = i->pNext )
  {
    if ( i->nRelation == a2 && (!a3 || i->nPID == a3) )
      return i;
  }
  return 0;
}

//----- (00466F80) --------------------------------------------------------
void __stdcall CPlayer::_MLMGet(CMemory **a5, int a6)
{
  CPlayer *v2; // ecx
  CPlayer *a2; // [esp+4h] [ebp-8h]
  MLMLIST *i; // [esp+8h] [ebp-4h]

  for ( i = CPlayer::_MLMFind(v2, a6, 0); i && i->nRelation == a6; i = i->pNext )
  {
    if ( i->bLogin )
    {
      a2 = CPlayer::ScanPlayer(i->nPID);
      if ( a2 )
      {
        *a5 = (CMemory *)CBaseList::Push((CBaseList *)*a5, a2);
        CIOObject::Release(a2, &a2->m_nFindRef);
      }
    }
  }
}
// 466F92: variable 'v2' is possibly undefined

//----- (00467010) --------------------------------------------------------
int __thiscall CPlayer::MLMPupilNum(CPlayer *this)
{
  MLMLIST *i; // [esp+4h] [ebp-8h]
  int v4; // [esp+8h] [ebp-4h]

  v4 = 0;
  CIOCriticalSection::Enter(&this->m_lockMlm.m_critical_section);
  for ( i = this->m_pTopMlm; i; i = i->pNext )
  {
    if ( i->nRelation == 4 )
      ++v4;
  }
  CIOCriticalSection::Leave((int)&this->m_lockMlm);
  return v4;
}

//----- (00467080) --------------------------------------------------------
void __thiscall CPlayer::MLMPayMoney(CPlayer *a1, int a2)
{
  int a3c; // [esp+0h] [ebp-44h]
  int v3; // [esp+4h] [ebp-40h]
  CItem *v5; // [esp+Ch] [ebp-38h]
  CPlayer *nType; // [esp+10h] [ebp-34h]
  int v7; // [esp+14h] [ebp-30h]
  int v8; // [esp+18h] [ebp-2Ch]
  MLMLIST *v9; // [esp+1Ch] [ebp-28h]
  CItem *item; // [esp+24h] [ebp-20h]
  CPlayer *v11; // [esp+2Ch] [ebp-18h]
  int j; // [esp+30h] [ebp-14h]
  MLMLIST *i; // [esp+34h] [ebp-10h]
  int v14; // [esp+38h] [ebp-Ch]
  int v15[2]; // [esp+3Ch] [ebp-8h]

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
      v9 = CPlayer::_MLMFind(a1, 2, 0);
      if ( v9 )
      {
        v7 = v9->nPID;
        v8 = v9->nUID;
        CIOCriticalSection::Leave((int)&a1->m_lockMlm);
        v5 = CItem::CreateItem(31, 0, a1->m_nLevel != 16 ? 50000 : 20000, -1);
        if ( v5 )
        {
          v5->ForcedStorageIn(v5, 40, a1->m_nUID, 0, 0);
          v5->ForcedStorageIn(v5, 40, v8, 0, 0);
          CBase::Delete(v5);
        }
        CPlayer::Write(a1, S2C_MESSAGEV, "bbb", 43, 19, a1->m_nLevel);
        nType = CPlayer::ScanPlayer(v7);
        if ( nType )
        {
          CPlayer::Write(nType, S2C_MESSAGEV, "bbbs", 43, 20, a1->m_nLevel, a1->m_szName);
          CIOObject::Release(nType, &nType->m_nFindRef);
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&a1->m_lockMlm);
      }
    }
    else if ( a1->m_nLevel == 16 || a1->m_nLevel == 30 )
    {
      CAuthSocket::Write(S2A_EVENT, "bddbd", 5, a1->m_nId, a1->m_nUID, 2, 0);
    }
  }
  else
  {
    CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
    if ( a1->m_nMlmMoney < 100 )
    {
      CIOCriticalSection::Leave((int)&a1->m_lockItem);
    }
    else
    {
      v14 = a1->m_nMlmMoney;
      a1->m_nMlmMoney = 0;
      CIOCriticalSection::Leave((int)&a1->m_lockItem);
      v15[0] = 0;
      v15[1] = 0;
      CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
      if ( a1->m_pTopMlm )
      {
        for ( i = a1->m_pTopMlm; i && (i->nRelation == 1 || i->nRelation == 2); i = i->pNext )
          *(&v14 + i->nRelation) = i->nPID;
      }
      CIOCriticalSection::Leave((int)&a1->m_lockMlm);
      for ( j = 0; j < 2; ++j )
      {
        if ( v15[j] )
        {
          v11 = CPlayer::ScanPlayer(v15[j]);
          if ( v11 )
          {
            if ( !v11->m_bOverFee )
            {
              if ( (a1->m_nLevel - 1) / 10 <= 3 )
                v3 = (a1->m_nLevel - 1) / 10;
              else
                v3 = 3;
              if ( dword_4D66BC[3 * v3 + j] * v14 / 100 >= dword_4D66C4[3 * v3] )
                a3c = dword_4D66C4[3 * v3];
              else
                a3c = dword_4D66BC[3 * v3 + j] * v14 / 100;
              item = CItem::CreateItem(31, 0, a3c, -1);
              item->m_nFrom = 2;
              if ( CPlayer::InsertItem(v11, 41, item) != 1 )
                CBase::Delete(item);
            }
            CIOObject::Release(v11, &v11->m_nFindRef);
          }
        }
      }
    }
  }
}
// 4D66BC: using guessed type int dword_4D66BC[];

//----- (00467400) --------------------------------------------------------
void __thiscall CPlayer::MLMAccumFee(CPlayer *this, int a2)
{
  int *v2; // [esp+0h] [ebp-10h]
  int *v4; // [esp+8h] [ebp-8h]
  MLMLIST *v5; // [esp+Ch] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lockMlm.m_critical_section);
  v5 = CPlayer::_MLMFind(this, 0, 0);
  if ( v5 )
  {
    v5->nPID += a2;
    if ( v5->nPID > 20000000 )
      this->m_bOverFee = 1;
  }
  else
  {
    v4 = (int *)operator new(0x30u);
    if ( v4 )
    {
      v2 = sub_466AB0(v4, 0, a2, &DefaultNullString, 0, 0, 0, 0);
      CPlayer::_MLMInsert(this, v2);
    }
    else
    {
      CPlayer::_MLMInsert(this, 0);
    }
  }
  CIOCriticalSection::Leave((int)&this->m_lockMlm);
  CDBSocket::Write(S2D_MLM, "dbd", this->m_nPID, 3, a2);
}

//----- (004674D0) --------------------------------------------------------
void __thiscall CPlayer::MLMLevelUp(CPlayer *a1)
{
  CPlayer *v1; // eax
  int v2; // [esp-Ch] [ebp-1Ch]
  int v3; // [esp-4h] [ebp-14h]
  CPlayer *a2; // [esp+4h] [ebp-Ch]
  CBaseList *v6; // [esp+8h] [ebp-8h]
  MLMLIST *i; // [esp+Ch] [ebp-4h]

  CIOCriticalSection::Enter(&a1->m_lockMlm.m_critical_section);
  v6 = 0;
  for ( i = a1->m_pTopMlm; i; i = i->pNext )
  {
    if ( i->nRelation == 2 || i->nRelation == 3 || i->nRelation == 4 )
    {
      a2 = CPlayer::ScanPlayer(i->nPID);
      if ( a2 )
      {
        v6 = (CBaseList *)CBaseList::Push(v6, a2);
        CIOObject::Release(a2, &a2->m_nFindRef);
      }
    }
  }
  CIOCriticalSection::Leave((int)&a1->m_lockMlm);
  while ( v6 )
  {
    v3 = a1->m_nLevel;
    v2 = a1->m_nPID;
    v1 = (CPlayer *)unknown_libname_7(v6);
    CPlayer::MLMUpdate(v1, v2, 1, v3);
    v6 = CBaseList::Pop(v6);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (004675B0) --------------------------------------------------------
void __thiscall CPlayer::FRDProcess(CPlayer *a1, int a2, void *a3, int a4)
{
  int v4; // eax
  _DWORD *v5; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  int v7; // eax
  _DWORD *v8; // eax
  char *v9; // eax
  _DWORD *v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // [esp+0h] [ebp-56Ch]
  char v17[4]; // [esp+Ch] [ebp-560h] BYREF
  int v18[8]; // [esp+10h] [ebp-55Ch] BYREF
  char v19[8]; // [esp+30h] [ebp-53Ch] BYREF
  int v20[8]; // [esp+38h] [ebp-534h] BYREF
  char v21[4]; // [esp+58h] [ebp-514h] BYREF
  char v22[4]; // [esp+5Ch] [ebp-510h] BYREF
  char v23[8]; // [esp+60h] [ebp-50Ch] BYREF
  int v24[8]; // [esp+68h] [ebp-504h] BYREF
  char v25[4]; // [esp+88h] [ebp-4E4h] BYREF
  CIOObject *v26; // [esp+8Ch] [ebp-4E0h]
  char *v27; // [esp+90h] [ebp-4DCh]
  char *v28; // [esp+94h] [ebp-4D8h]
  int v29; // [esp+98h] [ebp-4D4h]
  void *a2a; // [esp+9Ch] [ebp-4D0h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v31; // [esp+A0h] [ebp-4CCh] BYREF
  char v32[8]; // [esp+A4h] [ebp-4C8h] BYREF
  char v33[4]; // [esp+ACh] [ebp-4C0h] BYREF
  char v34[24]; // [esp+B0h] [ebp-4BCh] BYREF
  int j; // [esp+C8h] [ebp-4A4h]
  char str[20]; // [esp+CCh] [ebp-4A0h] BYREF
  CIOBuffer *v37; // [esp+E0h] [ebp-48Ch]
  unsigned __int8 v38; // [esp+E7h] [ebp-485h] BYREF
  char *v39; // [esp+E8h] [ebp-484h]
  CIOBuffer *v40; // [esp+ECh] [ebp-480h]
  CIOObject *v41; // [esp+F0h] [ebp-47Ch]
  int v42; // [esp+F4h] [ebp-478h] BYREF
  char v43[20]; // [esp+F8h] [ebp-474h] BYREF
  int v44; // [esp+10Ch] [ebp-460h]
  char *v45; // [esp+110h] [ebp-45Ch] BYREF
  int v46; // [esp+114h] [ebp-458h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator v47; // [esp+118h] [ebp-454h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator v48; // [esp+11Ch] [ebp-450h] BYREF
  int i; // [esp+120h] [ebp-44Ch]
  CIOBuffer *v50; // [esp+124h] [ebp-448h]
  unsigned __int8 v51; // [esp+12Bh] [ebp-441h]
  int _Keyval; // [esp+12Ch] [ebp-440h] BYREF
  unsigned __int8 v53; // [esp+133h] [ebp-439h] BYREF
  char v54; // [esp+134h] [ebp-438h] BYREF
  DWORD a3a[255]; // [esp+135h] [ebp-437h] BYREF
  __int16 v56; // [esp+531h] [ebp-3Bh]
  char v57; // [esp+533h] [ebp-39h]
  char *v58; // [esp+534h] [ebp-38h]
  CIOBuffer *v59; // [esp+538h] [ebp-34h]
  char *v60; // [esp+53Ch] [ebp-30h]
  int v61; // [esp+540h] [ebp-2Ch] BYREF
  char v62[20]; // [esp+544h] [ebp-28h] BYREF
  int v63; // [esp+558h] [ebp-14h]
  int v64; // [esp+55Ch] [ebp-10h]
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator result; // [esp+560h] [ebp-Ch] BYREF
  CIOObject *v66; // [esp+564h] [ebp-8h]
  char *name; // [esp+568h] [ebp-4h] BYREF
  char *Src; // [esp+578h] [ebp+Ch]
  char *Srca; // [esp+578h] [ebp+Ch]

  v64 = dword_4D9830;
  switch ( a2 )
  {
    case 0:
      ScanPacket((char *)a3, (char *)a4, "s", &name, 17);
      if ( IsValidAdminName(name) && strcmp(a1->m_szName, name) )
      {
        v66 = CPlayer::FindPlayer(name);
        if ( v66 )
        {
          CIOCriticalSection::Enter(&a1->m_lockFrd.m_critical_section);
          if ( (unsigned int)unknown_libname_10(&a1->m_mapFrd, v15) < 0x1E )
          {
            std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
              (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&a1->m_mapFrd,
              &result,
              &v66[28].m_nRef);
            v4 = sub_430C20(&a1->m_mapFrd, (int)v25);
            if ( (unsigned __int8)unknown_libname_8(v4) )
            {
              sub_468240(&v61, v66[28].m_nRef, &v66[2], 1);
              v5 = sub_4728F0(v24, &v61, &v61);
              sub_470890(
                (int)&a1->m_mapFrd,
                (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v23,
                (int)v5);
              CDBSocket::Write(S2D_FRD, "dbds", a1->m_nPID, 0, v61, v62);
              CPlayer::Write(a1, S2C_FRD, "bdsb", 0, v61, v62, v63);
            }
            else
            {
              CPlayer::Write(a1, S2C_MESSAGEV, "bbs", 83, 1, name);
            }
            CIOCriticalSection::Leave((int)&a1->m_lockFrd);
            CIOObject::Release(v66, (volatile int *)&v66[22]);
          }
          else
          {
            CIOCriticalSection::Leave((int)&a1->m_lockFrd);
            CPlayer::Write(a1, S2C_MESSAGEV, "bbs", 83, 0, name);
            CIOObject::Release(v66, (volatile int *)&v66[22]);
          }
        }
        else
        {
          CDBSocket::Write(S2D_FRD, "dbs", a1->m_nPID, 2, name);
        }
      }
      break;
    case 1:
      Src = ScanPacket((char *)a3, (char *)a4, "b", &v53);
      if ( v53 && v53 <= 0x1Eu )
      {
        v59 = CIOBuffer::Alloc();
        v50 = v59;
        v59->m_buffer[2] = 18;
        v58 = &v50->m_buffer[5];
        v54 = 0;
        memset(a3a, 0, sizeof(a3a));
        v56 = 0;
        v57 = 0;
        v60 = &v54;
        v51 = 0;
        CIOCriticalSection::Enter(&a1->m_lockFrd.m_critical_section);
        for ( i = 0; i < v53; ++i )
        {
          Src = ScanPacket(Src, (char *)a4, "d", &_Keyval);
          std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&a1->m_mapFrd,
            &v48,
            &_Keyval);
          v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapFrd, (int)v22);
          if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                 (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v48,
                 v6) )
          {
            ++v51;
            v58 = PutNumeric<int>(v58, _Keyval);
            v60 = PutNumeric<int>(v60, _Keyval);
            sub_471920((int *)&a1->m_mapFrd, (int)&_Keyval);
          }
        }
        CIOCriticalSection::Leave((int)&a1->m_lockFrd);
        if ( v51 )
        {
          CDBSocket::Write(S2D_FRD, "dbbm", a1->m_nPID, 1, v51, &v54, v60 - &v54);
          WritePacket(&v50->m_buffer[3], "bb", 1, v51);
          *(_WORD *)v50->m_buffer = (_WORD)v58 - (_WORD)v50;
          v59->m_dwSize = *(unsigned __int16 *)v50->m_buffer;
          CSocket::Send(a1->m_pSocket, v59);
        }
        else
        {
          CIOBuffer::Release(v59);
        }
      }
      break;
    case 2:
      ReadPacket((char *)a3, "ds", &v46, &v45);
      if ( v46 )
      {
        CIOCriticalSection::Enter(&a1->m_lockFrd.m_critical_section);
        if ( (unsigned int)unknown_libname_10(&a1->m_mapFrd, v15) < 0x1E )
        {
          std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&a1->m_mapFrd,
            &v47,
            &v46);
          v7 = sub_430C20(&a1->m_mapFrd, (int)v21);
          if ( (unsigned __int8)unknown_libname_8(v7) )
          {
            sub_468240(&v42, v46, v45, 0);
            v8 = sub_4728F0(v20, &v42, &v42);
            sub_470890(
              (int)&a1->m_mapFrd,
              (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v19,
              (int)v8);
            CDBSocket::Write(S2D_FRD, "dbds", a1->m_nPID, 0, v42, v43);
            v41 = CPlayer::FindPlayer(v45);
            if ( v41 )
            {
              CIOObject::Release(v41, (volatile int *)&v41[22]);
              v44 = 1;
            }
            CPlayer::Write(a1, S2C_FRD, "bdsb", 0, v42, v43, v44);
          }
          else
          {
            CPlayer::Write(a1, S2C_MESSAGEV, "bbs", 83, 1, v45);
          }
          CIOCriticalSection::Leave((int)&a1->m_lockFrd);
        }
        else
        {
          CIOCriticalSection::Leave((int)&a1->m_lockFrd);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbs", 83, 0, v45);
        }
      }
      else
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bbs", 83, 2, v45);
      }
      break;
    case 3:
      Srca = (char *)ReadPacket((char *)a3, "b", &v38);
      if ( v38 )
      {
        if ( v38 > 30u )
        {
          Srca = GetString(Srca, str);
          LOG_ERR(
            "byCount > MAX_FRD at FRD_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) Name(%s)",
            a1->m_nPID,
            a1->m_szName,
            a1->m_nUID,
            v38,
            str);
        }
        v40 = CIOBuffer::Alloc();
        v37 = v40;
        v40->m_buffer[2] = 18;
        v39 = &v37->m_buffer[5];
        CIOCriticalSection::Enter(&a1->m_lockFrd.m_critical_section);
        for ( j = 0; j < v38; ++j )
        {
          sub_468200(v33);
          v9 = (char *)GetNumeric<int>(Srca, v33);
          Srca = GetString(v9, v34);
          v34[16] = 0;
          v39 = PutNumeric<int>(v39, *(int *)v33);
          v39 = PutString(v39, v34);
          if ( (unsigned int)unknown_libname_10(&a1->m_mapFrd, v15) >= 30 )
          {
            CIOBuffer::Free(v40);
            CIOCriticalSection::Leave((int)&a1->m_lockFrd);
            LOG_ERR(
              "m_mapFrd.size() < MAX_FRD at FRD_M_LOAD  (%d, %s)  PID(%d) UID(%d)  ",
              *(_DWORD *)v33,
              v34,
              a1->m_nPID,
              a1->m_nUID);
            CPlayer::Write(a1, S2C_CLOSE, "b", 1);
            CSocket::Logout(a1->m_pSocket, 1);
            return;
          }
          v10 = sub_4728F0(v18, v33, v33);
          sub_470890(
            (int)&a1->m_mapFrd,
            (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v32,
            (int)v10);
          if ( !v32[4] )
          {
            CIOBuffer::Free(v40);
            CIOCriticalSection::Leave((int)&a1->m_lockFrd);
            LOG_ERR("!r.second at FRD_M_LOAD  (%d, %s)  PID(%d) UID(%d)  ", *(_DWORD *)v33, v34, a1->m_nPID, a1->m_nUID);
            CPlayer::Write(a1, S2C_CLOSE, "b", 1);
            CSocket::Logout(a1->m_pSocket, 1);
            return;
          }
        }
        CIOCriticalSection::Leave((int)&a1->m_lockFrd);
        WritePacket(&v37->m_buffer[3], "bb", 2, v38);
        *(_WORD *)v37->m_buffer = (_WORD)v39 - (_WORD)v37;
        v40->m_dwSize = *(unsigned __int16 *)v37->m_buffer;
        CSocket::Send(a1->m_pSocket, v40);
      }
      else
      {
        LOG_ERR("byCount <= 0 at FRD_M_LOAD  PID(%d) UID(%d) Count(%d) ", a1->m_nPID, a1->m_nUID, 0);
      }
      break;
    case 4:
      CIOCriticalSection::Enter(&a1->m_lockFrd.m_critical_section);
      if ( unknown_libname_10(&a1->m_mapFrd, v15) )
      {
        a2a = CIOBuffer::Alloc();
        v27 = (char *)a2a;
        *((_BYTE *)a2a + 2) = 18;
        v28 = v27 + 5;
        v29 = 0;
        std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&a1->m_mapFrd,
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v31);
        while ( 1 )
        {
          v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapFrd, (int)v17);
          if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                  &v31,
                  v11) )
            break;
          v12 = sub_420250(&v31);
          v26 = CPlayer::ScanPlayer(*(_DWORD *)(v12 + 4));
          *(_DWORD *)(sub_420250(&v31) + 28) = 0;
          if ( v26 )
          {
            *(_DWORD *)(sub_420250(&v31) + 28) = 1;
            CIOObject::Release(v26, (volatile int *)&v26[22]);
          }
          v13 = sub_420250(&v31);
          v28 = PutNumeric<int>(v28, *(_DWORD *)(v13 + 4));
          v14 = sub_420250(&v31);
          v28 = PutNumeric<unsigned char>(v28, *(_BYTE *)(v14 + 28));
          sub_475880(&v31);
          ++v29;
        }
        CIOCriticalSection::Leave((int)&a1->m_lockFrd);
        WritePacket(v27 + 3, "bb", 3, v29);
        *(_WORD *)v27 = (_WORD)v28 - (_WORD)v27;
        *((_DWORD *)a2a + 2000) = *(unsigned __int16 *)v27;
        CSocket::Send(a1->m_pSocket, (CIOBuffer *)a2a);
      }
      else
      {
        CIOCriticalSection::Leave((int)&a1->m_lockFrd);
      }
      break;
    default:
      return;
  }
}
// 467668: variable 'v15' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00468200) --------------------------------------------------------
_DWORD *__thiscall sub_468200(_DWORD *this)
{
  *this = 0;
  memset(this + 1, 0, 0x11u);
  this[6] = 0;
  return this;
}

//----- (00468240) --------------------------------------------------------
int *__thiscall sub_468240(int *this, int a2, void *a3, int a4)
{
  *this = a2;
  memcpy(this + 1, a3, 0x11u);
  this[6] = a4;
  return this;
}

//----- (00468280) --------------------------------------------------------
int __thiscall CPlayer::MailSend(CPlayer *this, int a2, int a3, char *Str2, int a5, int a6, int a7, int a8, int a9, int a10, int a11)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  int v14; // [esp+0h] [ebp-28h]
  int v15; // [esp+4h] [ebp-24h]
  char v17[4]; // [esp+10h] [ebp-18h] BYREF
  char v18[4]; // [esp+14h] [ebp-14h] BYREF
  _DWORD *v19; // [esp+18h] [ebp-10h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v20; // [esp+1Ch] [ebp-Ch] BYREF
  int v21; // [esp+20h] [ebp-8h] BYREF
  int v22; // [esp+24h] [ebp-4h]

  if ( !IsValidAdminName(Str2) || !strcmp(this->m_szName, Str2) )
    return 0;
  if ( a6 )
  {
    if ( a3 == 1 && a8 == 31 )
      a6 += a10;
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    if ( !this->m_pMoney || this->m_pMoney->m_nNum < a6 )
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      CPlayer::Write(this, S2C_MESSAGEV, "bbd", 85, 6, 0);
      return 0;
    }
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
  v22 = 0;
  if ( a3 == 1 )
  {
    if ( a10 <= 0 )
      return 0;
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    if ( this->m_bMailSend )
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      CPlayer::Write(this, S2C_MESSAGEV, "bbd", 85, 3, 0);
      return 0;
    }
    sub_4714F0(&this->m_mapStall, &v20, &a7);
    v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapStall, (int)v18);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &v20,
           v12) )
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      CPlayer::Write(this, S2C_MESSAGEV, "bbd", 85, 9, 0);
      return 0;
    }
    sub_44AE20(&this->m_mapItem, &v21, &a7);
    v13 = sub_430C20(&this->m_mapItem, (int)v17);
    if ( (unsigned __int8)unknown_libname_8(v13)
      || ((v19 = *(_DWORD **)(sub_420250(&v21) + 4), a8 != 31) ? (v15 = a10) : (v15 = a6),
          !(*(int (__thiscall **)(_DWORD *, int, CPlayer *, _DWORD))(*v19 + 140))(v19, v15, this, 0)) )
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      return 0;
    }
    this->m_bMailSend = 1;
    if ( v19[13] <= a10 )
      v14 = 0;
    else
      v14 = *(_DWORD *)(v19[10] + 64);
    a8 = v14;
    v22 = v19[21];
    if ( v19[11] )
      a9 = *(_DWORD *)(v19[11] + 32);
    CIOCriticalSection::Leave((int)&this->m_lockItem);
  }
  CDBSocket::Write(
    S2D_MAIL,
    "dbdbbssdbwbdds",
    this->m_nPID,
    0,
    this->m_nPID,
    a2,
    a3,
    this->m_szName,
    Str2,
    a7,
    v22,
    a8,
    a9,
    a10,
    a11,
    a5);
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00468570) --------------------------------------------------------
void __thiscall CPlayer::MailSendResult(CPlayer *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  char v15[4]; // [esp+4h] [ebp-14h] BYREF
  enum S2C_PROTOCOL nType; // [esp+8h] [ebp-10h]
  CPlayer *v17; // [esp+Ch] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v18; // [esp+10h] [ebp-8h] BYREF
  CPlayer *a1b; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
  if ( a3 == 1 )
    a1->m_bMailSend = 0;
  CIOCriticalSection::Leave((int)&a1->m_lockItem);
  if ( !a4 )
  {
    if ( !a3 )
    {
      CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
      a1b = (CPlayer *)a1->m_pMoney;
      if ( a1b && ((int (__thiscall *)(CPlayer *, int, CPlayer *, _DWORD))a1b->GetFinalAbsorb)(a1b, 5, a1, 0) )
      {
        if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))a1b->SubMStateEx)(a1b, a1, 49, -5) )
          CPlayer::_OutofInven(a1, (CItem *)a1b);
      }
      else
      {
        a4 = 3;
        LOG_NORMAL("CPlayer::MailSendResult()  not enough money (PID:%d), (SRType:%d)", a1->m_nPID, 3);
      }
      CIOCriticalSection::Leave((int)&a1->m_lockItem);
      goto LABEL_28;
    }
    if ( a3 != 1 )
    {
LABEL_28:
      CDBSocket::Write(S2D_MAIL, "dbddbbddwdd", a2, 1, a1->m_nPID, a2, a4, a3, a5, a7, a9, a11, a12);
      goto LABEL_29;
    }
    CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
    sub_44AE20(&a1->m_mapItem, &v18, &a7);
    v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v15);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &v18,
           v12) )
    {
      a1b = (CPlayer *)a1->m_pMoney;
      v17 = *(CPlayer **)(sub_420250(&v18) + 4);
      if ( !a1b
        || (v13 = ((int (__thiscall *)(CPlayer *, CPlayer *, _DWORD))v17->GetDropItemMask)(v17, a1, 0),
            !a1b->GetFinalAbsorb(a1b, (CChar *)(v13 != 0 ? a11 + 100 : 100))) )
      {
        a4 = 3;
        LOG_NORMAL("CPlayer::MailSendResult()  not enough money (PID:%d), (SRType:%d)", a1->m_nPID, 3);
LABEL_27:
        CIOCriticalSection::Leave((int)&a1->m_lockItem);
        goto LABEL_28;
      }
      if ( v17->GetDropItemMask(v17)
        || ((int (__thiscall *)(CPlayer *, int, CPlayer *, _DWORD))v17->GetFinalAbsorb)(v17, a11, a1, 0) )
      {
        if ( ((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v17->SubMStateEx)(v17, a1, 50, -a11) )
          a9 = *(_DWORD *)(*(_DWORD *)&v17->m_szName[8] + 64);
        else
          CPlayer::_OutofInven(a1, (CItem *)v17);
        if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))a1b->SubMStateEx)(a1b, a1, 49, -100) )
          CPlayer::_OutofInven(a1, (CItem *)a1b);
        goto LABEL_27;
      }
    }
    LOG_NORMAL("CPlayer::MailSendResult()  not exist item(PID:%d), (index:%d) ", a1->m_nPID, a9);
    a4 = 4;
    goto LABEL_27;
  }
LABEL_29:
  CPlayer::Write(a1, S2C_MAIL, "bbs", 0, a4, a6);
  if ( !a4 )
  {
    nType = (enum S2C_PROTOCOL)CPlayer::ScanPlayer(a5);
    if ( nType )
    {
      CPlayer::Write((CPlayer *)nType, S2C_MESSAGEV, "bbs", 85, 0, a1->m_szName);
      CIOObject::Release((CIOObject *)nType, (volatile int *)(nType + 352));
    }
  }
}

//----- (00468890) --------------------------------------------------------
void __thiscall CPlayer::MAILProcess(CPlayer *this, int a2, void *Src, int a4)
{
  _DWORD *v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  _DWORD *v6; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v9; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v13; // eax
  int v14; // [esp+0h] [ebp-560h]
  CPlayer *a1; // [esp+Ch] [ebp-554h]
  char v16[4]; // [esp+10h] [ebp-550h] BYREF
  char v18[4]; // [esp+18h] [ebp-548h] BYREF
  char v19[4]; // [esp+1Ch] [ebp-544h] BYREF
  char v20[4]; // [esp+20h] [ebp-540h] BYREF
  char v21[4]; // [esp+24h] [ebp-53Ch] BYREF
  char v22[4]; // [esp+28h] [ebp-538h] BYREF
  char v23[4]; // [esp+2Ch] [ebp-534h] BYREF
  char v24[8]; // [esp+30h] [ebp-530h] BYREF
  int v25[25]; // [esp+38h] [ebp-528h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v26; // [esp+9Ch] [ebp-4C4h] BYREF
  int v27; // [esp+A0h] [ebp-4C0h]
  CItem *item; // [esp+A4h] [ebp-4BCh]
  DWORD v29[24]; // [esp+A8h] [ebp-4B8h] BYREF
  int v30; // [esp+108h] [ebp-458h]
  int v31; // [esp+10Ch] [ebp-454h] BYREF
  CPlayer *player; // [esp+110h] [ebp-450h]
  int v33; // [esp+114h] [ebp-44Ch]
  int v34; // [esp+118h] [ebp-448h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v35; // [esp+11Ch] [ebp-444h] BYREF
  int v36[24]; // [esp+120h] [ebp-440h] BYREF
  char v37[4]; // [esp+180h] [ebp-3E0h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v38; // [esp+184h] [ebp-3DCh] BYREF
  int v39[24]; // [esp+188h] [ebp-3D8h] BYREF
  char v40[4]; // [esp+1E8h] [ebp-378h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v41; // [esp+1ECh] [ebp-374h] BYREF
  int v42[25]; // [esp+1F0h] [ebp-370h] BYREF
  char v43[4]; // [esp+254h] [ebp-30Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v44; // [esp+258h] [ebp-308h] BYREF
  unsigned __int16 v45; // [esp+25Ch] [ebp-304h] BYREF
  int v46; // [esp+260h] [ebp-300h] BYREF
  unsigned __int8 v47; // [esp+267h] [ebp-2F9h] BYREF
  char v48; // [esp+268h] [ebp-2F8h] BYREF
  char v49[512]; // [esp+269h] [ebp-2F7h] BYREF
  int v50; // [esp+470h] [ebp-F0h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v51; // [esp+474h] [ebp-ECh] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v52; // [esp+478h] [ebp-E8h] BYREF
  char v53; // [esp+47Fh] [ebp-E1h] BYREF
  int v54[2]; // [esp+480h] [ebp-E0h] BYREF
  char v55[4]; // [esp+488h] [ebp-D8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v56; // [esp+48Ch] [ebp-D4h] BYREF
  int v57; // [esp+490h] [ebp-D0h] BYREF
  char v58[4]; // [esp+494h] [ebp-CCh] BYREF
  char v59[4]; // [esp+498h] [ebp-C8h] BYREF
  char v60[4]; // [esp+49Ch] [ebp-C4h] BYREF
  int v61; // [esp+4A0h] [ebp-C0h] BYREF
  char str[20]; // [esp+4A4h] [ebp-BCh] BYREF
  int v63; // [esp+4B8h] [ebp-A8h] BYREF
  char v64[20]; // [esp+4BCh] [ebp-A4h] BYREF
  int v65; // [esp+4D0h] [ebp-90h] BYREF
  int v66; // [esp+4D4h] [ebp-8Ch] BYREF
  int v67; // [esp+4D8h] [ebp-88h] BYREF
  char v68[4]; // [esp+4DCh] [ebp-84h] BYREF
  __int16 v69; // [esp+4E0h] [ebp-80h] BYREF
  char v70[4]; // [esp+4E4h] [ebp-7Ch] BYREF
  int v71; // [esp+4E8h] [ebp-78h] BYREF
  int v72[3]; // [esp+4ECh] [ebp-74h] BYREF
  int v73; // [esp+4F8h] [ebp-68h]
  CIOBuffer *v74; // [esp+4FCh] [ebp-64h]
  unsigned __int8 v75; // [esp+503h] [ebp-5Dh] BYREF
  char *v76; // [esp+504h] [ebp-5Ch]
  CIOBuffer *pBuffer; // [esp+508h] [ebp-58h]
  unsigned __int16 v78; // [esp+50Ch] [ebp-54h] BYREF
  int a14; // [esp+510h] [ebp-50h] BYREF
  unsigned __int8 v80; // [esp+516h] [ebp-4Ah] BYREF
  unsigned __int8 v81; // [esp+517h] [ebp-49h] BYREF
  int v82; // [esp+518h] [ebp-48h] BYREF
  int a9; // [esp+51Ch] [ebp-44h] BYREF
  int a8; // [esp+520h] [ebp-40h] BYREF
  int a15; // [esp+524h] [ebp-3Ch] BYREF
  unsigned __int8 v86; // [esp+52Ah] [ebp-36h] BYREF
  unsigned __int8 v87; // [esp+52Bh] [ebp-35h] BYREF
  int v88; // [esp+52Ch] [ebp-34h] BYREF
  int i; // [esp+530h] [ebp-30h]
  int a6; // [esp+534h] [ebp-2Ch]
  unsigned __int8 v91; // [esp+53Bh] [ebp-25h] BYREF
  unsigned __int16 v92; // [esp+53Ch] [ebp-24h] BYREF
  int a10; // [esp+540h] [ebp-20h] BYREF
  unsigned __int8 v94; // [esp+547h] [ebp-19h] BYREF
  int a2a; // [esp+548h] [ebp-18h]
  int a11; // [esp+54Ch] [ebp-14h] BYREF
  char *v97; // [esp+550h] [ebp-10h] BYREF
  unsigned __int8 v98; // [esp+557h] [ebp-9h] BYREF
  int Str2; // [esp+558h] [ebp-8h] BYREF
  int a7; // [esp+55Ch] [ebp-4h] BYREF

  v72[2] = dword_4D9830;
  a1 = this;
  switch ( a2 )
  {
    case 0:
      a2a = 0;
      Src = ScanPacket((char *)Src, (char *)a4, "bs", &v98, &Str2, 513);
      if ( v98 )
      {
        if ( v98 == 1 )
        {
          Src = ScanPacket((char *)Src, (char *)a4, "sdwbdd", &v97, 17, &a7, &v92, &v94, &a10, &a11);
          if ( a10 >= 0 && a11 >= 0 )
          {
            CPlayer::MailSend(a1, a2a, v98, v97, Str2, 100, a7, v92, v94, a10, a11);
          }
          else
          {
            LOG_ERR(
              "  (MAIL_T_PARCEL)\tUID:\t%d\tName:%s\tPID:\t%d\tIndex:\t%d\tNum:\t%d,\tPay:\t%d",
              a1->m_nUID,
              a1->m_szName,
              a1->m_nPID,
              v92,
              a10,
              a11);
            CPlayer::Write(a1, S2C_CLOSE, "b", 1);
            CSocket::Logout(a1->m_pSocket, 1);
          }
        }
      }
      else
      {
        Src = ScanPacket((char *)Src, (char *)a4, "b", &v91);
        a6 = 5 * v91;
        for ( i = 0; i < v91; ++i )
        {
          Src = ScanPacket((char *)Src, (char *)a4, "s", &v97, 17);
          if ( !CPlayer::MailSend(a1, a2a, v98, v97, Str2, a6, 0, 0, 0, 0, 0) )
            break;
        }
      }
      return;
    case 1:
      Src = ReadPacket((char *)Src, "dbbdsdbwbdd", &v82, &v87, &v80, &a8, &a9, &v88, &v86, &v78, &v81, &a14, &a15);
      CPlayer::MailSendResult(a1, v82, v87, v80, a8, a9, v88, v86, v78, v81, a14, a15);
      return;
    case 2:
      CIOCriticalSection::Enter(&this->m_lockMail.m_critical_section);
      sub_471BE0(&a1->m_mapMail);
      CIOCriticalSection::Leave((int)&a1->m_lockMail);
      CDBSocket::Write(S2D_MAIL, "dbd", a1->m_nPID, 2, a1->m_nPID);
      return;
    case 3:
      Src = ReadPacket((char *)Src, "b", &v75);
      if ( !v75 )
        return;
      if ( v75 > 0x32u )
        LOG_ERR(
          "byCount > MAIL_MAX_LOAD at FRD_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) ",
          a1->m_nPID,
          a1->m_szName,
          a1->m_nUID,
          v75);
      pBuffer = CIOBuffer::Alloc();
      v74 = pBuffer;
      pBuffer->m_buffer[2] = 19;
      v76 = &v74->m_buffer[5];
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      v73 = 0;
      while ( 2 )
      {
        if ( v73 >= v75 )
        {
          CIOCriticalSection::Leave((int)&a1->m_lockMail);
          WritePacket(&v74->m_buffer[3], "bb", 1, v75);
          *(_WORD *)v74->m_buffer = (_WORD)v76 - (_WORD)v74;
          pBuffer->m_dwSize = *(unsigned __int16 *)v74->m_buffer;
          CSocket::Send(a1->m_pSocket, pBuffer);
        }
        else
        {
          sub_469C80(&v57);
          Src = GetNumeric<int>(Src, &v57);
          Src = GetNumeric<unsigned char>(Src, v58);
          Src = GetNumeric<unsigned char>(Src, v59);
          Src = GetNumeric<unsigned char>(Src, v60);
          Src = GetNumeric<int>(Src, &v61);
          Src = GetString((char *)Src, str);
          Src = GetNumeric<int>(Src, &v63);
          Src = GetString((char *)Src, v64);
          Src = GetNumeric<int>(Src, &v65);
          Src = GetNumeric<int>(Src, &v66);
          Src = GetNumeric<int>(Src, &v67);
          Src = GetNumeric<unsigned char>(Src, v68);
          Src = GetNumeric<short>(Src, &v69);
          Src = GetNumeric<unsigned char>(Src, v70);
          Src = GetNumeric<int>(Src, &v71);
          Src = GetNumeric<int>(Src, v72);
          if ( v67 <= dword_4E10B0 + 100 || !v67 )
          {
            v76 = PutNumeric<int>(v76, v57);
            v76 = PutNumeric<unsigned char>(v76, v58[0]);
            v76 = PutNumeric<unsigned char>(v76, v59[0]);
            v76 = PutNumeric<unsigned char>(v76, v60[0]);
            v76 = PutNumeric<int>(v76, v61);
            v76 = PutString(v76, str);
            v76 = PutNumeric<int>(v76, v63);
            v76 = PutString(v76, v64);
            v76 = PutNumeric<int>(v76, v65);
            v76 = PutNumeric<int>(v76, v66);
            v76 = PutNumeric<int>(v76, v67);
            v76 = (char *)PutNumeric<short>(v76, v69);
            v76 = PutNumeric<unsigned char>(v76, v70[0]);
            v76 = PutNumeric<int>(v76, v71);
            v76 = PutNumeric<int>(v76, v72[0]);
            v4 = sub_472920(v25, &v57, &v57);
            sub_4719D0(
              (int)&a1->m_mapMail,
              (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v24,
              (int)v4);
            ++v73;
            continue;
          }
          CIOCriticalSection::Leave((int)&a1->m_lockMail);
          CIOBuffer::Free(pBuffer);
          LOG_ERR(
            "CPlayer::MAILProcess()  :MAIL_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) MID (%d) ",
            a1->m_nPID,
            a1->m_szName,
            a1->m_nUID,
            v75,
            v57);
          LOG_NORMAL(
            "[Kickout] At MAIL_M_LOAD '%s' (PID:%d) %p %x %x %x",
            a1->m_szName,
            a1->m_nPID,
            a1->m_pSocket->m_pPlayer,
            a1->m_bit,
            a1->m_pSocket->m_bit,
            v14);
          CPlayer::Write(a1, S2C_CLOSE, "b", 1);
          CSocket::Logout(a1->m_pSocket, 1);
        }
        break;
      }
      return;
    case 5:
      Src = ReadPacket((char *)Src, "db", v54, &v53);
      if ( v53 == 1 )
      {
        CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 4, v54[0]);
      }
      else
      {
        CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
        sub_471C40(&a1->m_mapMail, &v52, v54);
        v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v22);
        if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               &v52,
               v7) )
        {
          sub_471B80((int *)&a1->m_mapMail, (int)v54);
        }
        CIOCriticalSection::Leave((int)&a1->m_lockMail);
        CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 5, v54[0]);
      }
      return;
    case 6:
      Src = ScanPacket((char *)Src, (char *)a4, "d", v55);
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      sub_471C40(&a1->m_mapMail, &v56, v55);
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v23);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &v56,
             v5) )
      {
        v6 = (_DWORD *)sub_420250(&v56);
        v54[1] = (int)(v6 + 1);
        CDBSocket::Write(S2D_MAIL, "dbddbd", v6[1], 4, a1->m_nPID, v6[1], v6[3], v6[19]);
      }
      CIOCriticalSection::Leave((int)&a1->m_lockMail);
      return;
    case 7:
      v48 = 0;
      memset(v49, 0, sizeof(v49));
      Src = ReadPacket((char *)Src, "dbdw", &v46, &v47, &v50, &v45);
      Src = ReadPacket((char *)Src, "m", &v48, v45);
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      sub_471C40(&a1->m_mapMail, &v51, &v46);
      v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v21);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &v51,
             v8) )
      {
        if ( v50 )
          CPlayer::Write(a1, S2C_MAIL, "bdbdwmm", 2, v46, v47, v50, v45, &v48, v45, Src, 22);
        else
          CPlayer::Write(a1, S2C_MAIL, "bdbdwm", 2, v46, v47, 0, v45, &v48, v45);
      }
      CIOCriticalSection::Leave((int)&a1->m_lockMail);
      return;
    case 8:
      Src = ScanPacket((char *)Src, (char *)a4, "d", v43);
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      sub_471C40(&a1->m_mapMail, &v44, v43);
      v9 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v20);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &v44,
             v9) )
      {
        qmemcpy(v42, (const void *)(sub_420250(&v44) + 4), 0x60u);
        if ( v42[2] == 1 )
        {
          CDBSocket::Write(S2D_MAIL, "dbdd", v42[0], 3, a1->m_nPID, v42[0]);
          sub_471B80((int *)&a1->m_mapMail, (int)v42);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 1, v42[0]);
        }
      }
      CIOCriticalSection::Leave((int)&a1->m_lockMail);
      return;
    case 9:
      Src = ScanPacket((char *)Src, (char *)a4, "d", v40);
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      sub_471C40(&a1->m_mapMail, &v41, v40);
      v10 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v19);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &v41,
             v10) )
      {
        qmemcpy(v39, (const void *)(sub_420250(&v41) + 4), sizeof(v39));
        if ( !v39[2] || v39[2] == 4 )
        {
          sub_471B80((int *)&a1->m_mapMail, (int)v39);
          CDBSocket::Write(S2D_MAIL, "dbdd", v39[0], 6, a1->m_nPID, v39[0]);
          CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 2, v39[0]);
        }
      }
      CIOCriticalSection::Leave((int)&a1->m_lockMail);
      goto LABEL_48;
    case 10:
LABEL_48:
      Src = ScanPacket((char *)Src, (char *)a4, "d", v37);
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      sub_469C80(v36);
      sub_471C40(&a1->m_mapMail, &v38, v37);
      v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v18);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v38,
              v11) )
      {
        CIOCriticalSection::Leave((int)&a1->m_lockMail);
        return;
      }
      qmemcpy(v36, (const void *)(sub_420250(&v38) + 4), sizeof(v36));
      CIOCriticalSection::Leave((int)&a1->m_lockMail);
      CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
      if ( v36[2] != 1 && v36[2] != 2 && v36[2] != 3 )
        goto LABEL_62;
      if ( v36[2] == 1 && v36[23] && (!a1->m_pMoney || a1->m_pMoney->m_nNum < v36[23]) )
      {
        CIOCriticalSection::Leave((int)&a1->m_lockItem);
        CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 6, v36[0]);
      }
      else if ( CPlayer::GetInvenSize((char *)a1) < 60 )
      {
        CDBSocket::Write(S2D_MAIL, "dbddd", v36[0], 7, a1->m_nPID, v36[0], v36[18]);
LABEL_62:
        CIOCriticalSection::Leave((int)&a1->m_lockItem);
      }
      else
      {
        CIOCriticalSection::Leave((int)&a1->m_lockItem);
        CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 8, v36[0]);
      }
      return;
    case 11:
      Src = ReadPacket((char *)Src, "dd", &v31, &v34);
      CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
      sub_469C80(v29);
      sub_471C40(&a1->m_mapMail, &v35, &v31);
      v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)&this);
      if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
             &v35,
             v12) )
      {
        qmemcpy(v29, (const void *)(sub_420250(&v35) + 4), sizeof(v29));
        CIOCriticalSection::Leave((int)&a1->m_lockMail);
        v30 = 1;
        v33 = 0;
        CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
        player = (CPlayer *)a1->m_pMoney;
        if ( (!player || *(_DWORD *)&player->m_szName[20] < (int)v29[23]) && v29[23] )
        {
          CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 6, v29[0]);
        }
        else
        {
          item = 0;
          if ( v34 )
            item = CItem::CreateItem(a1->m_nPID, (char **)&Src);
          else
            item = CItem::CreateItem(v29[20], v29[21], v29[22], v29[19]);
          if ( item )
          {
            v27 = CPlayer::_InsertItem(a1, 51, item);
            if ( v27 == 1 )
            {
              if ( v29[23]
                && !((int (__thiscall *)(CPlayer *, CPlayer *, int, DWORD))player->SubMStateEx)(
                      player,
                      a1,
                      51,
                      -v29[23]) )
              {
                v33 = *(_DWORD *)&player->m_szName[4];
                CPlayer::_OutofInven(a1, (CItem *)player);
              }
              v30 = 0;
            }
            else
            {
              CBase::Delete(item);
              if ( v27 == 2 )
                CPlayer::Write(a1, S2C_MESSAGEV, "bbd", 85, 8, v29[0]);
            }
          }
        }
        CIOCriticalSection::Leave((int)&a1->m_lockItem);
        if ( !v30 )
        {
          CPlayer::Write(a1, S2C_MAIL, "bdbb", 3, v29[0], 0, v29[3]);
          if ( (int)v29[23] > 0 )
            CPlayer::MailSend(
              a1,
              0,
              3,
              (char *)&v29[5],
              (int)&DefaultNullString,
              0,
              v33,
              v33 != 0 ? 0 : 31,
              0,
              v29[23],
              0);
          CIOCriticalSection::Enter(&a1->m_lockMail.m_critical_section);
          sub_471C40(&a1->m_mapMail, &v26, v29);
          v13 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapMail, (int)v16);
          if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                 &v26,
                 v13) )
          {
            *(_DWORD *)(sub_420250(&v26) + 12) = 0;
            *(_DWORD *)(sub_420250(&v26) + 76) = 0;
            *(_DWORD *)(sub_420250(&v26) + 84) = 0;
            *(_DWORD *)(sub_420250(&v26) + 88) = 0;
            *(_DWORD *)(sub_420250(&v26) + 92) = 0;
            *(_DWORD *)(sub_420250(&v26) + 96) = 0;
          }
          CIOCriticalSection::Leave((int)&a1->m_lockMail);
        }
        CDBSocket::Write(
          S2D_MAIL,
          "dbddbbddwbd",
          v31,
          8,
          a1->m_nPID,
          v29[0],
          v30,
          v29[2],
          v29[4],
          v29[18],
          v29[20],
          v29[21],
          v29[22]);
      }
      else
      {
        CDBSocket::Write(S2D_MAIL, "dbddb", v31, 8, a1->m_nPID, v31, 1);
        CIOCriticalSection::Leave((int)&a1->m_lockMail);
      }
      return;
    default:
      return;
  }
}
// 468E38: variable 'v14' is possibly undefined
// 4D9830: using guessed type int dword_4D9830;

//----- (00469C80) --------------------------------------------------------
_DWORD *__thiscall sub_469C80(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  this[2] = 0;
  this[3] = 0;
  this[4] = 0;
  memset(this + 5, 0, 0x11u);
  this[10] = 0;
  memset(this + 11, 0, 0x11u);
  this[16] = 0;
  this[17] = 0;
  this[18] = 0;
  this[19] = 0;
  this[20] = 0;
  this[21] = 0;
  this[22] = 0;
  this[23] = 0;
  return this;
}

//----- (00469D40) --------------------------------------------------------
int __thiscall CPlayer::IsCooking(CPlayer *this, int a2)
{
  int v4; // [esp+4h] [ebp-24h]
  int v5; // [esp+8h] [ebp-20h]
  CItem *v6; // [esp+10h] [ebp-18h]
  CItem *v7; // [esp+10h] [ebp-18h]
  CItem *v8; // [esp+10h] [ebp-18h]
  CItem *v9; // [esp+10h] [ebp-18h]
  int v10; // [esp+14h] [ebp-14h]
  int nNum; // [esp+18h] [ebp-10h]
  int a3; // [esp+1Ch] [ebp-Ch]
  int v13; // [esp+20h] [ebp-8h]
  CItem *v14; // [esp+24h] [ebp-4h]
  CItem *v15; // [esp+24h] [ebp-4h]
  CItem *v16; // [esp+24h] [ebp-4h]

  if ( !a2 )
  {
    a3 = this->m_nCooking[2] + this->m_nCooking[1] + this->m_nCooking[0];
    nNum = this->m_nCooking[4] + this->m_nCooking[3];
    v13 = this->m_nCooking[6] + this->m_nCooking[5];
    if ( !(v13 + nNum + a3) )
      return 0;
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    v14 = CPlayer::_FindItem(this, 239, a3);
    if ( !a3 || v14 )
    {
      v15 = CPlayer::_FindItem(this, 240, nNum);
      if ( !nNum || v15 )
      {
        v16 = CPlayer::_FindItem(this, 241, v13);
        if ( (!v13 || v16)
          && this->m_pMoney
          && this->m_pMoney->m_nNum >= 1000 * v13 + 200 * this->m_nCooking[4] + 100 * this->m_nCooking[3] + 10 * a3 )
        {
          goto LABEL_12;
        }
      }
    }
LABEL_27:
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    return 0;
  }
  if ( a2 == 1 )
  {
    v4 = 4 * this->m_nCooking[2] + 4 * this->m_nCooking[0];
    v5 = this->m_nCooking[2] + this->m_nCooking[0];
    v10 = this->m_nCooking[1];
    if ( !(this->m_nCooking[2] + v10 + this->m_nCooking[0]) )
      return 0;
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    v6 = CPlayer::_FindItem(this, 443, v4);
    if ( !v4 || v6 )
    {
      v7 = CPlayer::_FindItem(this, 444, v5);
      if ( !v5 || v7 )
      {
        v8 = CPlayer::_FindItem(this, 445, v5);
        if ( !v5 || v8 )
        {
          v9 = CPlayer::_FindItem(this, 446, v10);
          if ( (!v10 || v9)
            && this->m_pMoney
            && this->m_pMoney->m_nNum >= 500 * this->m_nCooking[2] + 500 * this->m_nCooking[1] )
          {
LABEL_12:
            CIOCriticalSection::Leave((int)&this->m_lockItem);
            return 1;
          }
        }
      }
    }
    goto LABEL_27;
  }
  return 0;
}

//----- (0046A020) --------------------------------------------------------
int __thiscall CPlayer::Cooking(CPlayer *this, int a2)
{
  CItemMoney *v4; // [esp+4h] [ebp-2Ch]
  int v5; // [esp+8h] [ebp-28h]
  int v6; // [esp+Ch] [ebp-24h]
  CItem *item; // [esp+14h] [ebp-1Ch]
  CItem *itema; // [esp+14h] [ebp-1Ch]
  CItem *itemb; // [esp+14h] [ebp-1Ch]
  CItem *itemc; // [esp+14h] [ebp-1Ch]
  CItem *itemd; // [esp+14h] [ebp-1Ch]
  CItem *iteme; // [esp+14h] [ebp-1Ch]
  CItem *itemf; // [esp+14h] [ebp-1Ch]
  CItem *itemg; // [esp+14h] [ebp-1Ch]
  CItem *itemh; // [esp+14h] [ebp-1Ch]
  CItem *itemi; // [esp+14h] [ebp-1Ch]
  int v17; // [esp+18h] [ebp-18h]
  CItemMoney *v18; // [esp+1Ch] [ebp-14h]
  int nNum; // [esp+20h] [ebp-10h]
  int a3; // [esp+24h] [ebp-Ch]
  int v21; // [esp+28h] [ebp-8h]
  CItem *player; // [esp+2Ch] [ebp-4h]
  CItem *playera; // [esp+2Ch] [ebp-4h]
  CItem *playerb; // [esp+2Ch] [ebp-4h]
  CItem *playerc; // [esp+2Ch] [ebp-4h]
  CItem *playerd; // [esp+2Ch] [ebp-4h]
  CItem *playere; // [esp+2Ch] [ebp-4h]
  CItem *playerf; // [esp+2Ch] [ebp-4h]
  CItem *playerg; // [esp+2Ch] [ebp-4h]
  CItem *playerh; // [esp+2Ch] [ebp-4h]
  CItem *playeri; // [esp+2Ch] [ebp-4h]
  CItem *playerj; // [esp+2Ch] [ebp-4h]
  CItem *playerk; // [esp+2Ch] [ebp-4h]
  CItem *playerl; // [esp+2Ch] [ebp-4h]

  if ( !a2 )
  {
    a3 = this->m_nCooking[2] + this->m_nCooking[1] + this->m_nCooking[0];
    nNum = this->m_nCooking[4] + this->m_nCooking[3];
    v21 = this->m_nCooking[6] + this->m_nCooking[5];
    if ( !(v21 + nNum + a3) )
      return 0;
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    player = CPlayer::_FindItem(this, 239, a3);
    if ( !a3 || player )
    {
      playera = CPlayer::_FindItem(this, 240, nNum);
      if ( !nNum || playera )
      {
        playerb = CPlayer::_FindItem(this, 241, v21);
        if ( (!v21 || playerb)
          && this->m_pMoney
          && this->m_pMoney->m_nNum >= 1000 * v21 + 200 * this->m_nCooking[4] + 100 * this->m_nCooking[3] + 10 * a3 )
        {
          if ( a3 )
          {
            playerc = CPlayer::_FindItem(this, 239, a3);
            if ( !playerc->UpdateNum(playerc, this, 16, -a3) )
              CPlayer::_OutofInven(this, playerc);
          }
          if ( nNum )
          {
            playerd = CPlayer::_FindItem(this, 240, nNum);
            if ( !playerd->UpdateNum(playerd, this, 16, -nNum) )
              CPlayer::_OutofInven(this, playerd);
          }
          if ( v21 )
          {
            playere = CPlayer::_FindItem(this, 241, v21);
            if ( !playere->UpdateNum(playere, this, 16, -v21) )
              CPlayer::_OutofInven(this, playere);
          }
          v18 = this->m_pMoney;
          if ( !v18->UpdateNum(
                  v18,
                  this,
                  16,
                  -(1000 * v21 + 200 * this->m_nCooking[4] + 100 * this->m_nCooking[3] + 10 * a3)) )
            CPlayer::_OutofInven(this, v18);
          playerf = CItem::CreateItem(266, 0, 5 * this->m_nCooking[0], -1);
          if ( playerf && CPlayer::_InsertItem(this, 2, playerf) != 1 )
          {
            CBase::Delete(playerf);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 11(%d), 2(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
              this->m_nPID,
              this->m_nCooking[0],
              this->m_nCooking[1],
              this->m_nCooking[2],
              this->m_nCooking[3],
              this->m_nCooking[4],
              this->m_nCooking[5],
              this->m_nCooking[6]);
          }
          playerg = CItem::CreateItem(267, 0, 2 * this->m_nCooking[1], -1);
          if ( playerg && CPlayer::_InsertItem(this, 2, playerg) != 1 )
          {
            CBase::Delete(playerg);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 22(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
              this->m_nPID,
              this->m_nCooking[0],
              this->m_nCooking[1],
              this->m_nCooking[2],
              this->m_nCooking[3],
              this->m_nCooking[4],
              this->m_nCooking[5],
              this->m_nCooking[6]);
          }
          playerh = CItem::CreateItem(268, 0, this->m_nCooking[2], -1);
          if ( playerh && CPlayer::_InsertItem(this, 2, playerh) != 1 )
          {
            CBase::Delete(playerh);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 33(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
              this->m_nPID,
              this->m_nCooking[0],
              this->m_nCooking[1],
              this->m_nCooking[2],
              this->m_nCooking[3],
              this->m_nCooking[4],
              this->m_nCooking[5],
              this->m_nCooking[6]);
          }
          playeri = CItem::CreateItem(269, 0, this->m_nCooking[3], -1);
          if ( playeri && CPlayer::_InsertItem(this, 2, playeri) != 1 )
          {
            CBase::Delete(playeri);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 44(%d), 5(%d), 6(%d), 7(%d)",
              this->m_nPID,
              this->m_nCooking[0],
              this->m_nCooking[1],
              this->m_nCooking[2],
              this->m_nCooking[3],
              this->m_nCooking[4],
              this->m_nCooking[5],
              this->m_nCooking[6]);
          }
          playerj = CItem::CreateItem(270, 0, this->m_nCooking[4], -1);
          if ( playerj && CPlayer::_InsertItem(this, 2, playerj) != 1 )
          {
            CBase::Delete(playerj);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 55(%d), 6(%d), 7(%d)",
              this->m_nPID,
              this->m_nCooking[0],
              this->m_nCooking[1],
              this->m_nCooking[2],
              this->m_nCooking[3],
              this->m_nCooking[4],
              this->m_nCooking[5],
              this->m_nCooking[6]);
          }
          playerk = CItem::CreateItem(271, 0, this->m_nCooking[5], -1);
          if ( playerk && CPlayer::_InsertItem(this, 2, playerk) != 1 )
          {
            CBase::Delete(playerk);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 5(%d), 66(%d), 77(%d)",
              this->m_nPID,
              this->m_nCooking[0],
              this->m_nCooking[1],
              this->m_nCooking[2],
              this->m_nCooking[3],
              this->m_nCooking[4],
              this->m_nCooking[5],
              this->m_nCooking[6]);
          }
          playerl = CItem::CreateItem(272, 0, this->m_nCooking[6], -1);
          if ( playerl )
          {
            if ( CPlayer::_InsertItem(this, 2, playerl) != 1 )
            {
              CBase::Delete(playerl);
              LOG_ERR(
                "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
                this->m_nPID,
                this->m_nCooking[0],
                this->m_nCooking[1],
                this->m_nCooking[2],
                this->m_nCooking[3],
                this->m_nCooking[4],
                this->m_nCooking[5],
                this->m_nCooking[6]);
            }
          }
LABEL_44:
          CIOCriticalSection::Leave((int)&this->m_lockItem);
          return 1;
        }
      }
    }
LABEL_83:
    CIOCriticalSection::Leave((int)&this->m_lockItem);
    return 0;
  }
  if ( a2 == 1 )
  {
    v5 = 4 * this->m_nCooking[2] + 4 * this->m_nCooking[0];
    v6 = this->m_nCooking[2] + this->m_nCooking[0];
    v17 = this->m_nCooking[1];
    if ( !(this->m_nCooking[2] + v17 + this->m_nCooking[0]) )
      return 0;
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    item = CPlayer::_FindItem(this, 443, v5);
    if ( !v5 || item )
    {
      itema = CPlayer::_FindItem(this, 444, v6);
      if ( !v6 || itema )
      {
        itemb = CPlayer::_FindItem(this, 445, v6);
        if ( !v6 || itemb )
        {
          itemc = CPlayer::_FindItem(this, 446, v17);
          if ( (!v17 || itemc)
            && this->m_pMoney
            && this->m_pMoney->m_nNum >= 500 * this->m_nCooking[2] + 500 * this->m_nCooking[1] )
          {
            if ( v5 )
            {
              itemd = CPlayer::_FindItem(this, 443, v5);
              if ( !itemd || !itemd->UpdateNum(itemd, this, 16, -v5) )
                CPlayer::_OutofInven(this, itemd);
            }
            if ( v6 )
            {
              iteme = CPlayer::_FindItem(this, 444, v6);
              if ( !iteme->UpdateNum(iteme, this, 16, -v6) )
                CPlayer::_OutofInven(this, iteme);
            }
            if ( v6 )
            {
              itemf = CPlayer::_FindItem(this, 445, v6);
              if ( !itemf || !itemf->UpdateNum(itemf, this, 16, -v6) )
                CPlayer::_OutofInven(this, itemf);
            }
            if ( v17 )
            {
              itemg = CPlayer::_FindItem(this, 446, v17);
              if ( !itemg || !itemg->UpdateNum(itemg, this, 16, -v17) )
                CPlayer::_OutofInven(this, itemg);
            }
            v4 = this->m_pMoney;
            if ( !v4->UpdateNum(v4, this, 16, -(500 * this->m_nCooking[2] + 500 * this->m_nCooking[1])) )
              CPlayer::_OutofInven(this, v4);
            itemh = CItem::CreateItem(446, 0, this->m_nCooking[0], -1);
            if ( itemh && CPlayer::_InsertItem(this, 2, itemh) != 1 )
            {
              CBase::Delete(itemh);
              LOG_ERR(
                "Cooking() item insert error (PID (%d), 11(%d), 2(%d)",
                this->m_nPID,
                this->m_nCooking[0],
                this->m_nCooking[2] + this->m_nCooking[1]);
            }
            itemi = CItem::CreateItem(447, 0, this->m_nCooking[2] + this->m_nCooking[1], -1);
            if ( itemi && CPlayer::_InsertItem(this, 2, itemi) != 1 )
            {
              CBase::Delete(itemi);
              LOG_ERR(
                "Cooking() item insert error (PID (%d), 1(%d), 22(%d)",
                this->m_nPID,
                this->m_nCooking[0],
                this->m_nCooking[2] + this->m_nCooking[1]);
            }
            goto LABEL_44;
          }
        }
      }
    }
    goto LABEL_83;
  }
  return 0;
}

//----- (0046AAD0) --------------------------------------------------------
volatile int *__thiscall CPlayer::GetGuild(CPlayer *a1)
{
  CGuild *v3; // [esp+4h] [ebp-4h]

  CChar::Lock(a1);
  v3 = a1->m_pGuild;
  if ( v3 )
    CIOObject::AddRef(v3, &v3->m_nTempRef);
  CChar::Unlock(a1);
  return (volatile int *)v3;
}

//----- (0046AB20) --------------------------------------------------------
void __thiscall CPlayer::SetGuild(CIOObject **this, int a2)
{
  CChar::Lock((CChar *)this);
  if ( this[121] )
    CIOObject::Release(this[121], &this[121][2].m_nRef);
  if ( a2 )
    CIOObject::AddRef((CIOObject *)a2, (volatile int *)(a2 + 36));
  this[121] = (CIOObject *)a2;
  CChar::Unlock((CChar *)this);
}

//----- (0046AB90) --------------------------------------------------------
int __thiscall CPlayer::GetGID(CPlayer *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CChar::Lock(this);
  v3 = this->m_nGID;
  CChar::Unlock(this);
  return v3;
}

//----- (0046ABC0) --------------------------------------------------------
void __thiscall CPlayer::SetGID(CPlayer *this, int a2)
{
  CChar::Lock(this);
  this->m_nGID = a2;
  CChar::Unlock(this);
}

//----- (0046ABF0) --------------------------------------------------------
void __thiscall CPlayer::SetGuildLevel(CPlayer *this, int a2)
{
  CChar::Lock(this);
  this->m_nGuildLevel = a2;
  CChar::Unlock(this);
}

//----- (0046AC20) --------------------------------------------------------
void __thiscall CPlayer::SetGuildName(CPlayer *this, char *Source)
{
  CChar::Lock(this);
  strcpy(this->m_szGuildName, Source);
  CChar::Unlock(this);
}

//----- (0046AC60) --------------------------------------------------------
void __thiscall CPlayer::SetGuildStandard(CPlayer *this, int a2)
{
  CChar::Lock(this);
  this->m_nStandard = a2;
  CChar::Unlock(this);
}

//----- (0046AC90) --------------------------------------------------------
void __thiscall CPlayer::SetGuildClass(CPlayer *this, int a2, char *Source)
{
  CChar::Lock(this);
  this->m_nGuildClass = a2;
  strcpy(this->m_szGuildClassTitle, Source);
  CChar::Unlock(this);
}

//----- (0046ACD0) --------------------------------------------------------
char *__thiscall CPlayer::GetGuildName(CPlayer *this)
{
  char *v2; // [esp+0h] [ebp-8h]

  if ( this->m_nGuildClass < 6 && (CGuild::GetGuildSkill(this->m_nGuildLevel) & 1) != 0 )
    v2 = this->m_szGuildName;
  else
    v2 = 0;
  return v2;
}

//----- (0046AD20) --------------------------------------------------------
int __thiscall CPlayer::GetGuildStandard(CPlayer *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( this->m_nGuildClass < 6 && (CGuild::GetGuildSkill(this->m_nGuildLevel) & 2) != 0 )
    v2 = this->m_nStandard;
  else
    v2 = 0;
  return v2;
}

//----- (0046AD70) --------------------------------------------------------
char *__thiscall CPlayer::GetGuildClassTitle(CPlayer *this)
{
  char *v2; // [esp+0h] [ebp-8h]

  if ( this->m_nGuildClass < 6 && (CGuild::GetGuildSkill(this->m_nGuildLevel) & 1) != 0 )
    v2 = this->m_szGuildClassTitle;
  else
    v2 = 0;
  return v2;
}

//----- (0046ADC0) --------------------------------------------------------
int __thiscall CPlayer::IsDefenseSide(CPlayer *a1, unsigned int a5)
{
  int result; // eax
  int v3; // eax
  CIOObject *v5; // [esp+4h] [ebp-8h]
  XBaseModel *a2; // [esp+8h] [ebp-4h]

  v5 = CGuild::FindGuild(a1->m_nGID);
  if ( !v5 )
    return 0;
  a2 = CCastle::GetCastle(a5);
  if ( a2 && ((v3 = CPlayer::GetGID(a1), CCastle::IsLord(a2, v3)) || CGuild::IsAlliancePeriod(v5, (int)a2)) )
  {
    CIOObject::Release(v5, &v5[2].m_nTimerRef);
    result = 1;
  }
  else
  {
    CIOObject::Release(v5, &v5[2].m_nTimerRef);
    result = 0;
  }
  return result;
}

//----- (0046AE50) --------------------------------------------------------
int __thiscall CPlayer::CanAttack(CPlayer *this, void *a2, int a3)
{
  int result; // eax
  int v4; // esi
  int v5; // eax
  volatile int *v6; // eax
  volatile int *v7; // eax
  __int64 v8; // [esp-4h] [ebp-28h]
  _BYTE v9[12]; // [esp+0h] [ebp-24h]
  CIOObject *v10; // [esp+0h] [ebp-24h]
  volatile int *v11; // [esp+8h] [ebp-1Ch]
  __int64 v12; // [esp+Ch] [ebp-18h]

  if ( !a3 )
  {
    v12 = CChar::IsMState(this, 0x200010000100i64);
    if ( v12 )
      return 0;
  }
  *(_QWORD *)&v9[4] = CChar::IsMState((CChar *)a2, 0x80000i64);
  if ( *(_QWORD *)&v9[4] )
    return 0;
  if ( (*(int (__thiscall **)(void *))(*(_DWORD *)a2 + 64))(a2) )
  {
    LODWORD(v8) = 0x100000;
    if ( CSMap::IsOnTile(*((CSMap **)a2 + 80), (const tagPOINT *)((char *)a2 + 332), v8) )
    {
      if ( sub_417450()
        && CPlayer::GetGID(this)
        && (v4 = (*(int (__thiscall **)(void *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 220))(
                   a2,
                   0,
                   0,
                   v12,
                   HIDWORD(v12)),
            v4 != CPlayer::GetGID(this)) )
      {
        v5 = (*(int (__thiscall **)(void *))(*(_DWORD *)a2 + 220))(a2);
        v10 = CGuild::FindGuild(v5);
        v6 = CPlayer::GetGuild(this);
        result = CGuild::CanAttack((int)v6, (int)v10);
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    if ( !(*(int (__thiscall **)(void *))(*(_DWORD *)a2 + 60))(a2) )
      goto LABEL_30;
    if ( this == a2 )
      return 0;
    if ( CChar::IsGState(this, 128) && CChar::IsGState((CChar *)a2, 128) && this->m_nPvPId == *((_DWORD *)a2 + 378) )
      return 1;
    if ( CChar::IsGState(this, 256) || CChar::IsGState((CChar *)a2, 256) )
    {
      LODWORD(v8) = CChar::IsGState(this, 256) != 0 ? 0x20000 : 393216;
      if ( !CSMap::IsOnTile(this->m_pMap, &this->m_ptPixel, v8) )
      {
        *(_DWORD *)v9 = CChar::IsGState((CChar *)a2, 256) != 0 ? 0x20000 : 393216;
        if ( !CSMap::IsOnTile(*((CSMap **)a2 + 80), (const tagPOINT *)((char *)a2 + 332), *(__int64 *)v9) )
          return 1;
      }
    }
    if ( sub_417450()
      && (*(_DWORD *)&v9[4] = 0x100000,
          CSMap::IsOnTile(*((CSMap **)a2 + 80), (const tagPOINT *)((char *)a2 + 332), *(__int64 *)&v9[4]))
      && (v11 = CPlayer::GetGuild((CPlayer *)a2), v7 = CPlayer::GetGuild(this), CGuild::CanAttack((int)v7, (int)v11)) )
    {
      result = 1;
    }
    else
    {
LABEL_30:
      result = 0;
    }
  }
  return result;
}
// 46AEDC: variable 'v8' is possibly undefined
// 46AF0C: variable 'v12' is possibly undefined

//----- (0046B0C0) --------------------------------------------------------
void __thiscall CPlayer::PKKill(CPlayer *this, int a2)
{
  int v2; // eax
  int *v3; // eax
  int v4; // [esp-4h] [ebp-50h]
  enum S2C_PROTOCOL nType; // [esp+0h] [ebp-4Ch]
  char v7[4]; // [esp+4h] [ebp-48h] BYREF
  char v8[4]; // [esp+8h] [ebp-44h] BYREF
  int v9; // [esp+Ch] [ebp-40h]
  CIOObject *v10; // [esp+10h] [ebp-3Ch]
  char v11[17]; // [esp+14h] [ebp-38h] BYREF
  char v12[17]; // [esp+25h] [ebp-27h] BYREF
  char v13[18]; // [esp+36h] [ebp-16h] BYREF
  int v14; // [esp+48h] [ebp-4h]

  v14 = dword_4D9830;
  if ( (dword_4E1174[0] & 1) != 0 && !CPlayer::IsEState((CPlayer *)a2, 16) )
  {
    if ( CChar::IsGState((CChar *)a2, 256) )
    {
      CPlayer::AddEState((CPlayer *)a2, 32);
      CPlayer::DropItemONPKDie((CIOCriticalSection *)a2);
      CPlayer::Write((CPlayer *)a2, S2C_MESSAGEPK, "b", 2);
      if ( !CChar::IsGState(this, 256) )
      {
        v2 = CBase::Id((CBase *)a2);
        CPlayer::Write(this, S2C_MESSAGEPK, "bd", 5, v2);
        sub_46B2C0((int)v11);
        strncpy(v11, this->m_szGuildName, 0x11u);
        strncpy(v12, this->m_szName, 0x11u);
        strncpy(v13, (const char *)(a2 + 32), 0x11u);
        CRWLock::WriteLock(&unk_4E20DC);
        v3 = (int *)std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
                      (std::list<tagPARTICLES *> *)dword_4E20D0,
                      (std::list<tagPARTICLES *>::iterator *)v8);
        std::list<std::pair<std::string const,int>>::insert(dword_4E20D0, v7, *v3, (int)v11);
        if ( (unsigned int)unknown_libname_10(dword_4E20D0, this) > 0x14 )
          sub_4727D0(dword_4E20D0);
        CRWLock::WriteUnlock(&unk_4E20DC);
        CDBSocket::Write(S2D_PK_BULLETIN_INSERT, "sss", nType + 492, nType + 32, a2 + 32);
      }
    }
    else
    {
      v9 = 0;
      v10 = (CIOObject *)CPlayer::GetGuild((CPlayer *)a2);
      if ( v10 )
      {
        v9 = CCastle::IsAllCastleWarRelation((int)v10);
        CIOObject::Release(v10, &v10[2].m_nTimerRef);
      }
      if ( v9 )
      {
        CPlayer::AddEState((CPlayer *)a2, 256);
      }
      else if ( CChar::IsGState(this, 256) )
      {
        CPlayer::AddEState((CPlayer *)a2, 64);
        v4 = CBase::Id(this);
        CPlayer::Write((CPlayer *)a2, S2C_MESSAGEPK, "bd", 3, v4);
      }
    }
  }
}
// 46B211: variable 'nType' is possibly undefined
// 4D9830: using guessed type int dword_4D9830;
// 4E20D0: using guessed type int dword_4E20D0[3];

//----- (0046B2C0) --------------------------------------------------------
int __thiscall sub_46B2C0(int this)
{
  memset((void *)this, 0, 0x11u);
  memset((void *)(this + 17), 0, 0x11u);
  memset((void *)(this + 34), 0, 0x11u);
  return this;
}

//----- (0046B310) --------------------------------------------------------
int __thiscall CPlayer::GetDropItemMask(CPlayer *this)
{
  if ( CChar::IsBState(this, 16i64) )
    return 3328;
  if ( CChar::IsBState(this, 32i64) )
    return 3584;
  if ( CChar::IsBState(this, 64i64) )
    return 3072;
  return 0;
}

//----- (0046B390) --------------------------------------------------------
int __thiscall CPlayer::AddBuff(CPlayer *this, std::locale::facet *a2)
{
  if ( !a2 )
    return 0;
  if ( !CChar::IsMState(this, 0x80000i64) && (!CChar::IsMStateEx(this, 0x20000) || !CBuff::IsPrty((CBuff *)a2, 4)) )
    return CChar::AddBuff(this, (CBuff *)a2);
  CBuff::`scalar deleting destructor'((CBuff *)a2, 1);
  return 0;
}
// 46B3EF: conditional instruction was optimized away because of '%a2.4!=0'

//----- (0046B420) --------------------------------------------------------
void __thiscall CPlayer::PKBulletinInfoSend(CPlayer *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v3; // [esp-34h] [ebp-54h] BYREF
  int v4; // [esp-30h] [ebp-50h]
  int v5; // [esp-2Ch] [ebp-4Ch]
  int v6; // [esp-28h] [ebp-48h]
  int v7; // [esp-24h] [ebp-44h]
  int v8; // [esp-20h] [ebp-40h]
  int v9; // [esp-1Ch] [ebp-3Ch]
  int v10; // [esp-18h] [ebp-38h]
  int v11; // [esp-14h] [ebp-34h]
  int v12; // [esp-10h] [ebp-30h]
  int v13; // [esp-Ch] [ebp-2Ch]
  int v14; // [esp-8h] [ebp-28h]
  int v15; // [esp-4h] [ebp-24h]
  int v16; // [esp+0h] [ebp-20h]
  CPlayer *v17; // [esp+8h] [ebp-18h]
  char v18[4]; // [esp+Ch] [ebp-14h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v19; // [esp+10h] [ebp-10h] BYREF
  char *v20; // [esp+14h] [ebp-Ch]
  unsigned __int16 *v21; // [esp+18h] [ebp-8h]
  void *a2; // [esp+1Ch] [ebp-4h]

  v17 = this;
  CRWLock::ReadLock(&unk_4E20DC);
  if ( !sub_472780(dword_4E20D0) )
  {
    a2 = CIOBuffer::Alloc();
    v20 = (char *)a2;
    *((_BYTE *)a2 + 2) = 12;
    v21 = (unsigned __int16 *)(v20 + 4);
    std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
      (std::list<tagPARTICLES *> *)dword_4E20D0,
      (std::list<tagPARTICLES *>::iterator *)&v19);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E20D0, (int)v18);
      if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              &v19,
              v1) )
        break;
      qmemcpy(&v3, (const void *)sub_40F040(&v19), 0x33u);
      v21 = (unsigned __int16 *)sub_47A260((int)v21, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15);
      sub_41CAB0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v19);
    }
    v2 = unknown_libname_10(dword_4E20D0, v16);
    WritePacket(v20 + 3, "b", v2);
    *(_WORD *)v20 = (_WORD)v21 - (_WORD)v20;
    *((_DWORD *)a2 + 2000) = *(unsigned __int16 *)v20;
    CSocket::Send(v17->m_pSocket, (CIOBuffer *)a2);
  }
  CRWLock::ReadUnlock(&unk_4E20DC);
}
// 4E20D0: using guessed type int dword_4E20D0[3];

//----- (0046B530) --------------------------------------------------------
void __cdecl CPlayer::PKBulletinLoad(_BYTE *a1)
{
  char *v1; // eax
  char *v2; // eax
  int i; // [esp+0h] [ebp-44h]
  char *packet; // [esp+4h] [ebp-40h]
  char str[17]; // [esp+8h] [ebp-3Ch] BYREF
  char v6[17]; // [esp+19h] [ebp-2Bh] BYREF
  char v7[18]; // [esp+2Ah] [ebp-1Ah] BYREF
  int v8; // [esp+3Ch] [ebp-8h]
  int v9; // [esp+40h] [ebp-4h] BYREF

  v8 = dword_4D9830;
  v9 = 0;
  packet = GetNumeric<unsigned char>(a1, &v9);
  if ( v9 > 0 )
  {
    sub_46B2C0((int)str);
    CRWLock::WriteLock(&unk_4E20DC);
    for ( i = 0; i < v9; ++i )
    {
      v1 = GetString(packet, str);
      v2 = GetString(v1, v6);
      packet = GetString(v2, v7);
      sub_4727A0(dword_4E20D0, (int)str);
    }
    CRWLock::WriteUnlock(&unk_4E20DC);
  }
}
// 4D9830: using guessed type int dword_4D9830;
// 4E20D0: using guessed type int dword_4E20D0[3];

//----- (0046B5F0) --------------------------------------------------------
void __cdecl CPlayer::ScanONPKPlayer()
{
  __int64 v0; // [esp-4h] [ebp-18h]
  int v1; // [esp+0h] [ebp-14h]
  CPlayer *a1; // [esp+4h] [ebp-10h]
  CBaseList *i; // [esp+8h] [ebp-Ch]
  CChar *v4; // [esp+Ch] [ebp-8h]
  CLink *v5; // [esp+10h] [ebp-4h]

  if ( (dword_4E1174[0] & 1) != 0 )
  {
    CIOCriticalSection::Enter(&stru_4E2078);
    CIOCriticalSection::Enter(&stru_4E2098);
    CLink::MoveTo(&unk_4E200C, &pTo);
    CIOCriticalSection::Leave((int)&stru_4E2098);
    v5 = pTo.m_pNext;
    while ( v5 != &pTo )
    {
      v4 = (CChar *)&v5[-54].m_pPrev;
      v5 = v5->m_pNext;
      if ( CChar::IsGState(v4, 256) )
      {
        if ( v4[1].m_prtyPt.nPt[1] > 0 )
        {
          LODWORD(v0) = 393216;
          if ( CSMap::IsOnTile(v4->m_pMap, &v4->m_ptPixel, v0) )
          {
            --v4[1].m_prtyPt.nPt[1];
          }
          else
          {
            if ( v4[1].m_prtyPt.nPt[1] <= 3 )
              v1 = v4[1].m_prtyPt.nPt[1];
            else
              v1 = 3;
            v4[1].m_prtyPt.nPt[1] -= v1;
          }
        }
        for ( i = CSMap::GetPlayerListInRect(v4->m_pMap, &v4->m_ptTile, 10); i; i = CBaseList::Pop(i) )
        {
          a1 = (CPlayer *)unknown_libname_7(i);
          if ( !CChar::IsGState(a1, 48) && v4 != a1 )
            CPlayer::Write(a1, S2C_MESSAGEPK, "b", 14);
        }
      }
    }
    CIOCriticalSection::Leave((int)&stru_4E2078);
  }
}
// 46B694: variable 'v0' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0046B770) --------------------------------------------------------
void __cdecl CPlayer::EventBuff(int a1)
{
  CBuffMoveSpeed *v1; // eax
  CIOCriticalSection *v2; // [esp+0h] [ebp-1Ch]
  CIOCriticalSection *v3; // [esp+0h] [ebp-1Ch]
  CIOCriticalSection *v4; // [esp+0h] [ebp-1Ch]
  CIOCriticalSection *v5; // [esp+0h] [ebp-1Ch]
  CLink *v6; // [esp+4h] [ebp-18h]
  int v7; // [esp+8h] [ebp-14h]
  time_t v8; // [esp+Ch] [ebp-10h]
  int v9[3]; // [esp+10h] [ebp-Ch]

  v9[0] = 112;
  v9[1] = 113;
  v9[2] = 114;
  v8 = time(0);
  if ( a1 != 4 )
  {
    if ( a1 )
      v7 = a1 - 1;
    else
      v7 = Random(0, 2);
    nBuff = v9[v7];
    dword_4E1FF4 = v8 + ((dword_4E1174[0] & 2) != 0 ? 300 : 1800);
  }
  CIOCriticalSection::Enter(v2);
  CIOCriticalSection::Enter(v3);
  CLink::MoveTo(&unk_4E200C, &pTo);
  CIOCriticalSection::Leave(v4);
  v6 = pTo.m_pNext;
  while ( v6 != &pTo )
  {
    v5 = (CIOCriticalSection *)&v6[-54].m_pPrev;
    v6 = v6->m_pNext;
    CChar::CancelBuffPrty(v5, 128);
    if ( a1 != 4 )
    {
      v1 = CBuff::CreateBuff(nBuff, dword_4E1FF4 - v8, 0, (int)v5);
      ((void (__thiscall *)(CIOCriticalSection *, CBuffMoveSpeed *))v5->m_critical_section.DebugInfo[5].ContentionCount)(
        v5,
        v1);
    }
  }
  CIOCriticalSection::Leave(v5);
}
// 46B7F5: variable 'v2' is possibly undefined
// 46B7FF: variable 'v3' is possibly undefined
// 46B818: variable 'v4' is possibly undefined
// 46B874: variable 'v5' is possibly undefined
// 4E1FF4: using guessed type int dword_4E1FF4;

//----- (0046B890) --------------------------------------------------------
void __thiscall CPlayer::DropItemONPKDie(CIOCriticalSection *this)
{
  int v1; // eax
  CItem *Itema; // [esp+0h] [ebp-28h]
  int v4; // [esp+4h] [ebp-24h] BYREF
  tagPOINT a2; // [esp+8h] [ebp-20h] BYREF
  tagPOINT a5; // [esp+10h] [ebp-18h] BYREF
  int v7; // [esp+18h] [ebp-10h]
  int v8; // [esp+1Ch] [ebp-Ch]
  CPlayer *player; // [esp+20h] [ebp-8h]
  int v10; // [esp+24h] [ebp-4h] BYREF

  if ( Random(1, 100) <= 10 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&this[31].m_dwEIP[1]);
    if ( sub_446110(&this[33].m_critical_section.OwningThread) )
    {
      CIOCriticalSection::Leave((int)&this[31].m_dwEIP[1]);
    }
    else
    {
      v1 = unknown_libname_10(&this[33].m_critical_section.OwningThread, this);
      v8 = Random(0, v1 - 1);
      std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&Itema[11].m_pMap,
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v10);
      v7 = 0;
      while ( v7 < v8 )
      {
        ++v7;
        sub_446090(&v10, &v4, 0);
      }
      player = *(CPlayer **)(sub_420250(&v10) + 4);
      if ( *(_DWORD *)(*(_DWORD *)&player->m_szName[8] + 72) != 20 || !CItem::IsState((CItem *)player, 1) )
      {
        if ( CItem::IsState((CItem *)player, 1) )
          player->AddGState(player, (int)Itema);
        if ( player->GetFinalResist(player, *(CChar **)&player->m_szName[20], (int)Itema) )
        {
          CChar::GetDropPt((CChar *)Itema, &a2);
          a5.x = a2.x >> 5;
          a5.y = a2.y >> 5;
          if ( CSMap::SetOnMap((CSMap *)Itema[3].m_pPrefix, player, &a5) )
          {
            ((void (__thiscall *)(CPlayer *, CItem *, tagPOINT *, tagPOINT *, int, _DWORD, _DWORD))player->SubMState)(
              player,
              Itema,
              &a2,
              &a5,
              1,
              0,
              0);
            CPlayer::_OutofInven((CPlayer *)Itema, (CItem *)player);
          }
        }
      }
      CIOCriticalSection::Leave((int)&Itema[11].m_nTimerRef);
    }
  }
}
// 46B90B: variable 'Itema' is possibly undefined

//----- (0046BA30) --------------------------------------------------------
void __thiscall CPlayer::Transform(int this, int a2, int a3)
{
  __int64 v3; // [esp-4h] [ebp-8h]
  int a1; // [esp+0h] [ebp-4h]
  int a1a; // [esp+0h] [ebp-4h]

  HIDWORD(v3) = this;
  if ( a2 == 2 )
  {
    CPlayer::FreeTransform((CIOCriticalSection *)this);
  }
  else if ( a3 >= 1 && a3 <= 3 && !CChar::IsGState((CChar *)this, 48) )
  {
    LODWORD(v3) = 0x20000;
    if ( CSMap::IsOnTile(*(CSMap **)(HIDWORD(v3) + 320), (const tagPOINT *)(HIDWORD(v3) + 332), v3) )
    {
      CPlayer::Write((CPlayer *)0x43, S2C_MESSAGE, "b", 67);
    }
    else if ( *(_DWORD *)(a1 + 580) >= dword_4D669C[a3] )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020));
      if ( !CChar::IsGState((CChar *)0x200, 512) )
      {
        if ( a2 == 1 )
        {
          if ( !*(_DWORD *)(a1a + 1116) )
          {
            if ( *(_DWORD *)(a1a + 1108) )
              CItemTransform::ApplyTransform(*(CItemTransform **)(a3 + 1108), (CPlayer *)a3, a3);
          }
        }
        else if ( !a2 )
        {
          if ( *(_DWORD *)(a1a + 1116) )
            CPlayer::Write((CPlayer *)0x4D, S2C_MESSAGE, "b", 77);
          else
            CChar::WriteInSight((CChar *)a3, S2C_ACTION, "dbb", *(_DWORD *)(a3 + 28), 12, a3);
        }
      }
      CIOCriticalSection::Leave(a1a + 1020);
    }
    else
    {
      CPlayer::Write((CPlayer *)0x42, S2C_MESSAGE, "b", 66);
    }
  }
}
// 46BAA0: variable 'a1' is possibly undefined
// 46BAF1: variable 'a1a' is possibly undefined

//----- (0046BB90) --------------------------------------------------------
void __thiscall CPlayer::FreeTransform(CIOCriticalSection *this)
{
  int v1; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  if ( CChar::IsGState((_DWORD *)v1, 512) && *(_DWORD *)(v1 + 1108) )
    CItemTransform::FreeTransform(*(_DWORD **)(v1 + 1108), (_DWORD *)v1);
  CIOCriticalSection::Leave((CIOCriticalSection *)v1);
}
// 46BBAD: variable 'v1' is possibly undefined

//----- (0046BBF0) --------------------------------------------------------
void __thiscall CPlayer::BreakStandard(CIOCriticalSection *this)
{
  CIOCriticalSection *a2; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter(this);
  if ( a2[34].m_dwEIP[1] )
    CItemStandard::Broken((CPlayer *)a2[34].m_dwEIP[1], a2, 1);
  CIOCriticalSection::Leave(a2);
}
// 46BC08: variable 'a2' is possibly undefined

//----- (0046BC40) --------------------------------------------------------
void __thiscall CPlayer::RefreshStandardBuff(CPlayer *this)
{
  __int64 v1; // [esp-4h] [ebp-1Ch]
  CPlayer *v2; // [esp+0h] [ebp-18h]
  CPlayer *v3; // [esp+0h] [ebp-18h]
  CPlayer *v4; // [esp+0h] [ebp-18h]
  CPlayer *pPlayer; // [esp+4h] [ebp-14h]
  int nStBuff; // [esp+8h] [ebp-10h]
  int nStBuffValue; // [esp+Ch] [ebp-Ch]
  CBaseList *pList; // [esp+10h] [ebp-8h]
  CItemStandard *pStandard; // [esp+14h] [ebp-4h]

  HIDWORD(v1) = this;
  if ( CPlayer::IsWearBuffStandard(this) )
  {
    if ( sub_417450() )
    {
      LODWORD(v1) = 0x100000;
      if ( CSMap::IsOnTile(*(CSMap **)(HIDWORD(v1) + 320), (const tagPOINT *)(HIDWORD(v1) + 332), v1) )
      {
        CIOCriticalSection::Enter(&v2->m_lockItem.m_critical_section);
        pStandard = v2->m_pStandard;
        if ( pStandard )
        {
          nStBuff = pStandard->m_pInit->m_nStBuff;
          nStBuffValue = pStandard->m_pInit->m_nStBuffValue;
          CIOCriticalSection::Leave((int)&v2->m_lockItem);
          for ( pList = CSMap::GetPlayerListInRect(MEMORY[0x14A], (const tagPOINT *)0x14E, 10);
                pList;
                pList = CBaseList::Pop(pList) )
          {
            pPlayer = (CPlayer *)unknown_libname_7(pList);
            if ( pPlayer != v3
              && CChar::IsNormal(pPlayer)
              && v3->m_nGID == pPlayer->m_nGID
              && !CPlayer::IsWearBuffStandard(pPlayer) )
            {
              v4 = (CPlayer *)CBuff::CreateBuff(nStBuff, 2, nStBuffValue);
              pPlayer->AddBuff(pPlayer, (CBuff *)v4);
            }
          }
        }
        else
        {
          CIOCriticalSection::Leave((int)&v2->m_lockItem);
        }
      }
    }
  }
}
// 46BC86: variable 'v2' is possibly undefined
// 46BD14: variable 'v3' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0046BD80) --------------------------------------------------------
BOOL __thiscall CPlayer::IsWearBuffStandard(CPlayer *this)
{
  return this->m_nStBuff >= 0 && CPlayer::IsWState(this, 13);
}

//----- (0046BDC0) --------------------------------------------------------
void __thiscall CPlayer::Bless(CPlayer *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // [esp-4h] [ebp-20h]
  int v5; // [esp+14h] [ebp-8h]
  CItemMoney *player; // [esp+18h] [ebp-4h]

  if ( this->m_nLevel >= 6
    && a2 >= 0
    && a2 <= 1
    && a3 >= 1
    && a3 <= 5
    && (a3 & 0x80000001) != 0
    && (a2 || !CChar::IsBState(this, 128i64))
    && (a2 != 1 || !CChar::IsBState(this, 256i64)) )
  {
    v5 = a3 * ((a2 != 0 ? 6 : 11) * this->m_nLevel * this->m_nLevel / 2);
    if ( a3 == 3 )
    {
      v5 = 9 * v5 / 10;
    }
    else if ( a3 == 5 )
    {
      v5 = 8 * v5 / 10;
    }
    CIOCriticalSection::Enter(&this->m_lockItem.m_critical_section);
    if ( this->m_pMoney && this->m_pMoney->m_nNum >= v5 )
    {
      player = this->m_pMoney;
      if ( !player->UpdateNum(player, this, 39, -v5) )
        CPlayer::_OutofInven(this, player);
      CIOCriticalSection::Leave((int)&this->m_lockItem);
      v3 = CBuff::CreateBuff((a2 != 0) + 16, 3600 * a3);
      this->AddBuff(this, v3);
    }
    else
    {
      CIOCriticalSection::Leave((int)&this->m_lockItem);
    }
  }
}
// 46BDF3: conditional instruction was optimized away because of '%a3.4 in (1..5)'

//----- (0046BF60) --------------------------------------------------------
void __stdcall CPlayer::SetSystemCode(int a1, int a2)
{
  if ( a1 >= 0 && a1 < 15 )
  {
    if ( a2 )
      *(_DWORD *)dword_4E1174 |= 1 << a1;
    else
      *(_DWORD *)dword_4E1174 &= ~(1 << a1);
    CPlayer::WriteAll(S2C_MESSAGEV, "bdd", 70, *(_DWORD *)dword_4E1174, dword_4E1178);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046BFD0) --------------------------------------------------------
void __stdcall CPlayer::SetEventCode(int a1, int a2)
{
  if ( a1 >= 0 && a1 < 9 )
  {
    if ( a2 )
      dword_4E1178 |= 1 << a1;
    else
      dword_4E1178 &= ~(1 << a1);
    CPlayer::WriteAll(S2C_MESSAGEV, "bdd", 70, *(_DWORD *)dword_4E1174, dword_4E1178);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046C040) --------------------------------------------------------
int __thiscall CPlayer::IsPCBang(CPlayer *this)
{
  int result; // eax

  if ( stru_4E35B4.m_nRef )
    result = 0;
  else
    result = this->m_pSocket->m_nAuthType & 0x200;
  return result;
}

//----- (0046C070) --------------------------------------------------------
void __thiscall CPlayer::Shortcut(CPlayer *this, int a2, void *Src, int a4)
{
  char v5[40]; // [esp+4h] [ebp-2Ch] BYREF
  int v6; // [esp+2Ch] [ebp-4h]

  v6 = dword_4D9830;
  if ( a2 )
  {
    if ( ScanPacket((char *)Src, (char *)a4, "m", v5, 40) != Src )
      CDBSocket::Write(S2D_SHORTCUT, "bdm", a2, this->m_nPID, v5, 40);
  }
  else
  {
    CDBSocket::Write(S2D_SHORTCUT, "bdd", 0, this->m_nPID, this->m_nId);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0046C100) --------------------------------------------------------
void __thiscall CPlayer::OnGetMyTelPt(CPlayer *this, int a2, int a3)
{
  char *v3; // eax
  _BYTE *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  int v7; // eax
  char v9[8]; // [esp+4h] [ebp-8Ch] BYREF
  std::string v10; // [esp+Ch] [ebp-84h] BYREF
  char v11[44]; // [esp+28h] [ebp-68h] BYREF
  int i; // [esp+54h] [ebp-3Ch]
  char *v13; // [esp+58h] [ebp-38h]
  char str[24]; // [esp+5Ch] [ebp-34h] BYREF
  int v15; // [esp+74h] [ebp-1Ch]
  char *v16; // [esp+78h] [ebp-18h]
  void *a2a; // [esp+7Ch] [ebp-14h]
  char v18[4]; // [esp+80h] [ebp-10h] BYREF
  char v19[4]; // [esp+84h] [ebp-Ch] BYREF
  char v20[4]; // [esp+88h] [ebp-8h] BYREF
  char v21[4]; // [esp+8Ch] [ebp-4h] BYREF

  v15 = dword_4D9830;
  a2a = CIOBuffer::Alloc();
  v13 = (char *)a2a;
  *((_BYTE *)a2a + 2) = 31;
  v16 = v13 + 4;
  CChar::Lock(this);
  sub_46C290(v18);
  for ( i = 0; i < a2; ++i )
  {
    v3 = GetString((char *)a3, str);
    v4 = GetNumeric<unsigned char>(v3, v18);
    v5 = GetNumeric<int>(v4, v19);
    v6 = GetNumeric<int>(v5, v20);
    a3 = (int)GetNumeric<int>(v6, v21);
    v16 = PutString(v16, str);
    std::string::string((std::vector<IPAddrMask> *)&v10, str);
    v7 = sub_472950((int)v11, &v10, v18);
    sub_471D20(
      (int)&this->m_mapTelPt,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v9,
      v7);
    sub_46C2D0(v11);
    sub_40F780(&v10);
  }
  CChar::Unlock(this);
  WritePacket(v13 + 3, "b", a2);
  *(_WORD *)v13 = (_WORD)v16 - (_WORD)v13;
  *((_DWORD *)a2a + 2000) = *(unsigned __int16 *)v13;
  CSocket::Send(this->m_pSocket, (CIOBuffer *)a2a);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0046C290) --------------------------------------------------------
_DWORD *__thiscall sub_46C290(_DWORD *this)
{
  this[3] = 0;
  this[2] = 0;
  this[1] = 0;
  *this = 0;
  return this;
}

//----- (0046C2D0) --------------------------------------------------------
void __thiscall sub_46C2D0(void *this)
{
  sub_40F780(this);
}

//----- (0046C2F0) --------------------------------------------------------
void __thiscall CPlayer::SetMyTelPt(CPlayer *this, int a2, void *Src, int a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  const tagPOINT *v11; // eax
  __int64 v12; // [esp-4h] [ebp-17Ch]
  char v14[4]; // [esp+8h] [ebp-170h] BYREF
  char v15[28]; // [esp+Ch] [ebp-16Ch] BYREF
  char v16[4]; // [esp+28h] [ebp-150h] BYREF
  char v17[8]; // [esp+2Ch] [ebp-14Ch] BYREF
  std::string v18; // [esp+34h] [ebp-144h] BYREF
  char v19[44]; // [esp+50h] [ebp-128h] BYREF
  char v20[4]; // [esp+7Ch] [ebp-FCh] BYREF
  char v21[4]; // [esp+80h] [ebp-F8h] BYREF
  char v22[28]; // [esp+84h] [ebp-F4h] BYREF
  char v23[4]; // [esp+A0h] [ebp-D8h] BYREF
  char v24[28]; // [esp+A4h] [ebp-D4h] BYREF
  char v25[31]; // [esp+C0h] [ebp-B8h] BYREF
  bool v26; // [esp+DFh] [ebp-99h]
  char v27[8]; // [esp+E0h] [ebp-98h] BYREF
  std::string v28; // [esp+E8h] [ebp-90h] BYREF
  char v29[44]; // [esp+104h] [ebp-74h] BYREF
  char v30[4]; // [esp+130h] [ebp-48h] BYREF
  char v31[28]; // [esp+134h] [ebp-44h] BYREF
  char v32[4]; // [esp+150h] [ebp-28h] BYREF
  int *v33; // [esp+154h] [ebp-24h]
  char *Str; // [esp+158h] [ebp-20h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v35; // [esp+15Ch] [ebp-1Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v36; // [esp+160h] [ebp-18h] BYREF
  char v37[16]; // [esp+164h] [ebp-14h] BYREF
  char *name; // [esp+174h] [ebp-4h] BYREF
  char *Srca; // [esp+184h] [ebp+Ch]

  Srca = ScanPacket((char *)Src, (char *)a4, "s", &name, 21);
  if ( IsValidName(name) )
  {
    CChar::Lock(this);
    HIDWORD(v12) = a2;
    switch ( a2 )
    {
      case 0:
        LODWORD(v12) = 1179648;
        if ( CSMap::IsValidTile(this->m_pMap, &this->m_ptPixel, v12)
          && (this->m_ptPixel.x <= 17000
           || this->m_ptPixel.x >= 23000
           || this->m_ptPixel.y <= 64000
           || this->m_ptPixel.y >= 70000) )
        {
          std::string::string((std::vector<IPAddrMask> *)v31, name);
          sub_4726F0(&this->m_mapTelPt, &v36, v31);
          sub_40F780(v31);
          v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapTelPt, (int)v30);
          if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                 &v36,
                 v4) )
          {
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 80, 2);
          }
          else if ( CPlayer::RemoveItem(this, 9, 509, 1) || CPlayer::RemoveItem(this, 9, 510, 1) )
          {
            sub_46C920(v37, this->m_nMap, &this->m_ptPixel.x, this->m_nZ);
            std::string::string((std::vector<IPAddrMask> *)&v28, name);
            v5 = sub_472950((int)v29, &v28, v37);
            sub_471D20(
              (int)&this->m_mapTelPt,
              (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v27,
              v5);
            sub_46C2D0(v29);
            sub_40F780(&v28);
            CDBSocket::Write(
              S2D_SETMYTELPT,
              "dbsbddd",
              this->m_nPID,
              a2,
              name,
              this->m_nMap,
              this->m_ptPixel.x,
              this->m_ptPixel.y,
              this->m_nZ);
          }
        }
        else
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 80, 1);
        }
        break;
      case 1:
        std::string::string((std::vector<IPAddrMask> *)v25, name);
        v26 = sub_472690((int *)&this->m_mapTelPt, (int)v25) == 0;
        sub_40F780(v25);
        if ( !v26 )
          CDBSocket::Write(S2D_SETMYTELPT, "dbs", this->m_nPID, a2, name);
        break;
      case 2:
        ScanPacket(Srca, (char *)a4, "s", &Str, 21);
        if ( IsValidName(Str) )
        {
          std::string::string((std::vector<IPAddrMask> *)v24, Str);
          sub_4726F0(&this->m_mapTelPt, &v35, v24);
          sub_40F780(v24);
          v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapTelPt, (int)v23);
          if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
                 &v35,
                 v6) )
          {
            CPlayer::Write(this, S2C_MESSAGEV, "bb", 80, 2);
          }
          else
          {
            std::string::string((std::vector<IPAddrMask> *)v22, name);
            v35._Myptr = (CIOSocket::CIOTimer *)*sub_4726F0(&this->m_mapTelPt, v21, v22);
            sub_40F780(v22);
            v7 = sub_430C20(&this->m_mapTelPt, (int)v20);
            if ( !(unsigned __int8)unknown_libname_8(v7) )
            {
              std::string::string((std::vector<IPAddrMask> *)&v18, Str);
              v8 = sub_420250(&v35);
              v9 = sub_472950((int)v19, &v18, (_DWORD *)(v8 + 28));
              sub_471D20(
                (int)&this->m_mapTelPt,
                (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v17,
                v9);
              sub_46C2D0(v19);
              sub_40F780(&v18);
              sub_471F00(&this->m_mapTelPt, v16, (int)v35._Myptr);
              CDBSocket::Write(S2D_SETMYTELPT, "dbss", this->m_nPID, a2, name, Str);
            }
          }
        }
        else
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 80, 0);
        }
        break;
      case 3:
        if ( !CChar::IsGState(this, 256)
          && (this->m_ptPixel.x <= 17000
           || this->m_ptPixel.x >= 23000
           || this->m_ptPixel.y <= 64000
           || this->m_ptPixel.y >= 70000) )
        {
          std::string::string((std::vector<IPAddrMask> *)v15, name);
          sub_4726F0(&this->m_mapTelPt, v32, v15);
          sub_40F780(v15);
          v10 = sub_430C20(&this->m_mapTelPt, (int)v14);
          if ( !(unsigned __int8)unknown_libname_8(v10)
            && (CPlayer::RemoveItem(this, 9, 511, 1) || CPlayer::RemoveItem(this, 9, 512, 1)) )
          {
            v11 = (const tagPOINT *)sub_420250(v32);
            v33 = &v11[3].y;
            CPlayer::Teleport(this, v11[3].y, v11 + 4, v11[5].x, 0);
          }
        }
        break;
      default:
        break;
    }
    CChar::Unlock(this);
  }
  else
  {
    CPlayer::Write(this, S2C_MESSAGEV, "bb", 80, 0);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0046C920) --------------------------------------------------------
_DWORD *__thiscall sub_46C920(_DWORD *this, int a2, _DWORD *a3, int a4)
{
  int v4; // ecx

  *this = a2;
  v4 = a3[1];
  this[1] = *a3;
  this[2] = v4;
  this[3] = a4;
  return this;
}

//----- (0046C960) --------------------------------------------------------
void __thiscall CPlayer::OnSetMyTelPt(CPlayer *this, int a2, void *Src)
{
  const char *v4; // [esp+4h] [ebp-8h] BYREF
  char v5; // [esp+Bh] [ebp-1h] BYREF

  if ( !a2 )
  {
    ReadPacket((char *)Src, "bs", &v5, &v4);
    if ( v5 )
    {
      CPlayer::Write(this, S2C_SETMYTELPT, "bs", 0, v4);
    }
    else
    {
      CPlayer::Write(this, S2C_MESSAGEV, "bb", 80, 3);
      LOG_ERR("CPlayer::OnSetMyTelPt() save myteleport point error.(PID:%d, Lod:%s)", this->m_nPID, v4);
    }
  }
}

//----- (0046C9F0) --------------------------------------------------------
int __thiscall CPlayer::GetPalsyDamage(CPlayer *this, int a2)
{
  int v3; // [esp+0h] [ebp-4Ch]
  int v4; // [esp+4h] [ebp-48h]
  int v5; // [esp+20h] [ebp-2Ch]
  int v6; // [esp+24h] [ebp-28h]
  int v7; // [esp+28h] [ebp-24h]
  int v8; // [esp+2Ch] [ebp-20h]
  int v10; // [esp+38h] [ebp-14h]
  int v11; // [esp+3Ch] [ebp-10h]
  int v12; // [esp+40h] [ebp-Ch]
  int v13; // [esp+44h] [ebp-8h]

  if ( !this->m_nUpgrLevel )
    return 0;
  v11 = this->m_nLevel - *(_DWORD *)(a2 + 60);
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
  {
    if ( v11 < 0 )
    {
      if ( abs(v11) >= 7 )
        v7 = 7;
      else
        v7 = abs(v11);
      v10 = dword_4D92DC[v7] * dword_4D9268[this->m_nUpgrLevel] / 100;
    }
    else
    {
      if ( v11 >= 7 )
        v8 = 7;
      else
        v8 = v11;
      v10 = dword_4D92BC[v8] * dword_4D9268[this->m_nUpgrLevel] / 100;
    }
  }
  else
  {
    if ( v11 < 0 )
    {
      if ( abs(v11) >= 30 )
        v5 = 30;
      else
        v5 = abs(v11);
      v10 = dword_4D9320[v5] * dword_4D9268[this->m_nUpgrLevel] / 100;
    }
    else
    {
      if ( v11 >= 7 )
        v6 = 7;
      else
        v6 = v11;
      v10 = dword_4D92FC[v6] * dword_4D9268[this->m_nUpgrLevel] / 100;
    }
    if ( CChar::IsBState((CChar *)a2, 2048i64) )
    {
      v10 += 3;
    }
    else if ( CChar::IsBState((CChar *)a2, 4096i64) )
    {
      v10 += 5;
    }
    else if ( CChar::IsBState((CChar *)a2, 0x100000000i64) )
    {
      v10 += 3;
    }
  }
  if ( v10 < Random(1, 100) )
    return 0;
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    v4 = CChar::GetResist((CChar *)a2, 4) / 10;
  else
    v4 = CChar::GetResist((CChar *)a2, 4);
  v13 = v4 < 0 ? 0 : v4;
  if ( v13 >= 100 )
    v3 = 0;
  else
    v3 = 100 - v13;
  if ( this->m_nClass == 1 )
    v12 = v3
        * (3 * this->m_nCMagic
         + Random(
             this->m_nWMinMagic + this->m_nUpgrLevel * this->m_nWMinMagic / 20,
             this->m_nWMaxMagic + this->m_nUpgrLevel * this->m_nWMaxMagic / 10))
        / 100;
  else
    v12 = v3
        * (3 * this->m_nCAttack
         + Random(
             this->m_nWMinAttack + this->m_nUpgrLevel * this->m_nWMinAttack / 20,
             this->m_nWMaxAttack + this->m_nUpgrLevel * this->m_nWMaxAttack / 10))
        / 100;
  return v12;
}

//----- (0046CD70) --------------------------------------------------------
int __thiscall CPlayer::CanMove(CPlayer *this)
{
  int result; // eax

  if ( CChar::IsGState(this, 38) )
  {
    CPlayer::Write(
      this,
      S2C_MOVEBEFORE,
      "ddddw",
      this->m_nId,
      this->m_ptPixel.x,
      this->m_ptPixel.y,
      this->m_nZ,
      this->m_nDir);
    result = 0;
  }
  else if ( CChar::IsGState(this, 4096) )
  {
    result = 0;
  }
  else
  {
    if ( CChar::IsGState(this, 0x2000) )
    {
      CChar::SubGState(this, 0x2000);
      this->m_dwNextAction = GetTickCount();
    }
    result = 1;
  }
  return result;
}

//----- (0046CE20) --------------------------------------------------------
void __thiscall CPlayer::NPCProcess(CPlayer *this, char a2, int a3, int a4, int a5)
{
  CNPC *v6; // [esp+8h] [ebp-4h]

  v6 = CNPC::FindNPC(a2);
  if ( v6 )
  {
    if ( v6->CanReply(v6, &this->m_ptPixel) )
    {
      if ( !a3 )
        v6->Process(v6, this, (char *)a4, (char *)a5);
    }
    CIOObject::Release(v6);
  }
}

//----- (0046CEA0) --------------------------------------------------------
void __thiscall CPlayer::ChangePlayerName(CPlayer *this, char *Str)
{
  CBuffMoveSpeed *v2; // [esp-4h] [ebp-10h]

  if ( CChar::IsBState(this, 0x800000i64) )
  {
    CPlayer::Write(this, S2C_MESSAGEV, "bb", 100, 9);
  }
  else if ( IsValidName(Str) && strlen(Str) <= 14 && strcmp(this->m_szName, Str) )
  {
    if ( CPlayer::FindItem(this, 639, 1) )
    {
      v2 = CBuff::CreateBuff(97, 1814400, 0);
      this->AddBuff(this, v2);
      CDBSocket::Write(S2D_CHANGEPLAYERNAME, "ddss", this->m_nId, this->m_nPID, this->m_szName, Str);
    }
    else
    {
      CPlayer::Write(this, S2C_MESSAGEV, "bb", 100, 10);
    }
  }
  else
  {
    CPlayer::Write(this, S2C_MESSAGEV, "bbs", 100, 1, Str);
  }
}

//----- (0046CFC0) --------------------------------------------------------
void __thiscall CPlayer::OnChangePlayerName(CPlayer *this, int a2, char *Source)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v3; // eax
  char v5[8]; // [esp+4h] [ebp-24h] BYREF
  char *v6; // [esp+Ch] [ebp-1Ch]
  CPlayer *v7; // [esp+10h] [ebp-18h]
  char v8[8]; // [esp+14h] [ebp-14h] BYREF
  char *v9; // [esp+1Ch] [ebp-Ch] BYREF
  int v10; // [esp+20h] [ebp-8h]
  int v11; // [esp+24h] [ebp-4h]

  if ( a2 )
  {
    CChar::Lock(this);
    if ( !CBase::IsDeleted(this) )
    {
      CRWLock::WriteLock(&unk_4E2050);
      v9 = this->m_szName;
      sub_470600(dword_4E2044, (int)&v9);
      strcpy(this->m_szName, Source);
      v7 = this;
      v6 = this->m_szName;
      std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v8);
      sub_470440(
        (int)dword_4E2044,
        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v5,
        v3);
      CRWLock::WriteUnlock(&unk_4E2050);
    }
    v10 = this->m_nGID;
    v11 = this->m_nPID;
    CChar::Unlock(this);
    if ( !CPlayer::RemoveItem(this, 9, 639, 1) )
      LOG_ERR("OnChangePlayerName() RemoveItem Error (%d)", 639);
    CGuild::ChangePlayerName(v10, v11, Source);
    CPlayer::Write(this, S2C_MESSAGEV, "bbs", 100, 3, Source);
  }
  else
  {
    CChar::CancelBuff(this, 97);
    CPlayer::Write(this, S2C_MESSAGEV, "bbs", 100, 2, Source);
  }
}
// 46D06A: variable 'v3' is possibly undefined

//----- (0046D100) --------------------------------------------------------
void __thiscall CPlayer::ChangeGuildName(CPlayer *this, char *Str)
{
  CBuffMoveSpeed *v2; // [esp-4h] [ebp-14h]
  int v4; // [esp+Ch] [ebp-4h]

  if ( CChar::IsBState(this, 0x1000000i64) )
  {
    CPlayer::Write(this, S2C_MESSAGEV, "bb", 100, 9);
  }
  else
  {
    v4 = CPlayer::GetGID(this);
    if ( v4 && this->m_nPID == v4 )
    {
      if ( IsValidName(Str) && strlen(Str) <= 0xE && strcmp(this->m_szGuildName, Str) )
      {
        if ( CPlayer::FindItem(this, 640, 1) )
        {
          v2 = CBuff::CreateBuff(98, 1814400, 0);
          this->AddBuff(this, v2);
          CDBSocket::Write(S2D_CHANGEGUILDNAME, "ddss", this->m_nId, this->m_nPID, this->m_szGuildName, Str);
        }
        else
        {
          CPlayer::Write(this, S2C_MESSAGEV, "bb", 100, 11);
        }
      }
      else
      {
        CPlayer::Write(this, S2C_MESSAGEV, "bbs", 100, 5, Str);
      }
    }
    else
    {
      CPlayer::Write(this, S2C_MESSAGEV, "bb", 100, 4);
    }
  }
}

//----- (0046D260) --------------------------------------------------------
void __thiscall CPlayer::OnChangeGuildName(CPlayer *this, int a2, char *Source)
{
  int v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  if ( a2 )
  {
    CChar::Lock(this);
    strcpy(this->m_szGuildName, Source);
    v4 = this->m_nGID;
    v5 = this->m_nPID;
    CChar::Unlock(this);
    if ( !CPlayer::RemoveItem(this, 9, 640, 1) )
      LOG_ERR("OnChangeGuildName() RemoveItem Error (%d)", 640);
    CGuild::ChangeGuildName(v4, v5, Source);
    CPlayer::Write(this, S2C_MESSAGEV, "bbs", 100, 7, Source);
  }
  else
  {
    CChar::CancelBuff(this, 98);
    CPlayer::Write(this, S2C_MESSAGEV, "bbs", 100, 6, Source);
  }
}

//----- (0046D340) --------------------------------------------------------
void __thiscall CPlayer::EventProcessNPC(CPlayer *this, int a2, int a3, int a4)
{
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v6 = 0;
  if ( (dword_4E1178 & 0x100) != 0 )
  {
    if ( sub_46D4B0(a2, 1) && a3 > 0 )
    {
      if ( a3 < 650 )
      {
        if ( a3 < 600 )
        {
          if ( a3 < 150 )
          {
            if ( CPlayer::InsertOwnItem(this, 759, 1) != 1 )
              return;
            v5 = 759;
          }
          else
          {
            if ( CPlayer::InsertOwnItem(this, 473, 1) != 1 )
              return;
            v5 = 473;
          }
        }
        else
        {
          if ( CPlayer::InsertOwnItem(this, 362, 1) != 1 )
            return;
          v5 = 362;
        }
      }
      else
      {
        if ( CPlayer::InsertOwnItem(this, 469, 1) != 1 )
          return;
        v5 = 469;
      }
      v6 = 1;
      sub_46D490(&a2, 1);
      CAuthSocket::Write(S2A_EVENT_CHANGE_FLAG, "dddd", this->m_nUID, a2, a3, v5);
    }
    else
    {
      a3 = 0;
    }
    if ( !v6 )
      CPlayer::Write(this, S2C_MESSAGEV, "b", 112);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046D490) --------------------------------------------------------
int __stdcall sub_46D490(int *a1, int a2)
{
  int result; // eax

  result = *a1 & ~a2;
  *a1 = result;
  return result;
}

//----- (0046D4B0) --------------------------------------------------------
int __stdcall sub_46D4B0(int a1, int a2)
{
  return a2 & a1;
}

//----- (0046D4D0) --------------------------------------------------------
int __thiscall CPlayer::InsertOwnItem(CPlayer *this, int a2, int a3)
{
  int result; // eax
  CItem *item; // [esp+4h] [ebp-14h]

  if ( a2 == 31 )
    return 0;
  item = CItem::CreateOwnItem(a2, 0, a3, -1);
  if ( !item )
    return 0;
  CIOObject::AddRef((int)item);
  if ( CPlayer::InsertItem(this, 3, item) == 0 )
  {
    CBase::Delete(item);
    result = 2;
  }
  else
  {
    CIOObject::Release(item);
    result = 1;
  }
  return result;
}

//----- (0046D570) --------------------------------------------------------
void __thiscall CPlayer::ExchangeDanjiToItem(CPlayer *this, int a2, CPlayer *a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = Random(1, 1000);
  if ( v4 <= 200 )
  {
    if ( a2 )
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 48, 100);
    else
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 48, 150);
    return;
  }
  if ( v4 > 550 )
  {
    if ( v4 <= 700 )
    {
      if ( a2 )
      {
        CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 206, 1);
        return;
      }
      goto LABEL_11;
    }
    if ( v4 <= 750 )
    {
      if ( a2 )
      {
        CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 207, 1);
        return;
      }
      goto LABEL_15;
    }
    if ( v4 <= 900 )
    {
      if ( !a2 )
      {
        CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 517, 10);
        return;
      }
LABEL_11:
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 447, 10);
      return;
    }
    if ( v4 <= 940 )
    {
      if ( !a2 )
      {
        CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 638, 1);
        return;
      }
LABEL_15:
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 241, 10);
      return;
    }
    if ( v4 <= 955 )
    {
      if ( a2 )
      {
        CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 220, 1);
        return;
      }
LABEL_27:
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 327, 1);
      return;
    }
    if ( v4 <= 970 )
    {
      if ( a2 )
        goto LABEL_27;
LABEL_31:
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 331, 1);
      return;
    }
    if ( v4 <= 980 )
    {
      if ( a2 )
        goto LABEL_31;
LABEL_35:
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 329, 1);
      return;
    }
    if ( v4 <= 990 )
    {
      if ( a2 )
        goto LABEL_35;
LABEL_39:
      CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 332, 1);
      return;
    }
    if ( v4 > 995 )
    {
      if ( !a2 )
      {
        CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 221, 1);
        return;
      }
    }
    else if ( a2 )
    {
      goto LABEL_39;
    }
    CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 523, 1);
    return;
  }
  if ( a2 )
    CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 31, 10000);
  else
    CPlayer::ExchahgeItem((CIOCriticalSection *)this, a3, 1, 2, 31, 20000);
}

//----- (0046D8B0) --------------------------------------------------------
void __thiscall CPlayer::SiegeGunProcess(CPlayer *this, int a2, int a3, int a4, int a5)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-10h] [ebp-30h]
  int v9; // [esp-Ch] [ebp-2Ch]
  int v10; // [esp-8h] [ebp-28h]
  CIOObject *v12; // [esp+14h] [ebp-Ch]
  CMonster *v13; // [esp+18h] [ebp-8h]
  CNPCSiegeGunStone *v14; // [esp+1Ch] [ebp-4h]

  v14 = (CNPCSiegeGunStone *)CNPC::FindNPC(a3);
  if ( v14 )
  {
    CChar::Lock(this);
    if ( (*(int (__thiscall **)(CNPCSiegeGunStone *, tagPOINT *))v14->gapBC)(v14, &this->m_ptPixel) )
    {
      if ( a2 )
      {
        switch ( a4 )
        {
          case 0:
            v13 = CMonster::FindMonster(v14->m_nSiegeGun);
            if ( v13 )
            {
              if ( CChar::IsBState(this, 0x4000000000i64)
                || CPlayerSkill::IsSkill(&this->m_skill, 80)
                || CPlayerSkill::IsSkill(&this->m_skill, 81) )
              {
                if ( v13->m_nOperator )
                {
                  v12 = CPlayer::FindPlayer(v13->m_nOperator);
                  CPlayer::Write(this, S2C_MESSAGEV, "bs", 125, &v12[2]);
                  CIOObject::Release(v13, &v13->m_nFindRef);
                  CIOObject::Release(v12, (volatile int *)&v12[22]);
                }
                else if ( v13->m_nGID == this->m_nGID )
                {
                  if ( CChar::IsGState(v14, 64) )
                  {
                    CPlayer::Write(this, S2C_MESSAGE, "b", 120);
                  }
                  else
                  {
                    ((void (__thiscall *)(CPlayer *, int, int))this->AddMState)(this, 0x80000, 0x10000);
                    v10 = v13->m_nDir;
                    v9 = v13[1].m_prtyPt.nResist[2];
                    v8 = CBase::Id(v13);
                    CPlayer::Write(this, S2C_SIEGEGUNCONTROL, "bdwws", 0, v8, v9, v10, this->m_szName);
                    v5 = CBase::Id(v13);
                    CChar::WriteInSight(this, S2C_SIEGEGUNCONTROL, "bds", 6, v5, this->m_szName);
                    v6 = CBase::Id(this);
                    CNPCSiegeGunStone::SetOperator(v14, v6);
                    this->m_nSiegeGun = CBase::Id(v13);
                    v7 = CBase::Id(this);
                    CMonsterSiegeGun::SetOperator((CIOCriticalSection *)v13, v7);
                    this->m_nNPC = a3;
                    CIOObject::Release(v13, &v13->m_nFindRef);
                  }
                }
                else
                {
                  CPlayer::Write(this, S2C_MESSAGE, "b", 124);
                  CIOObject::Release(v13, &v13->m_nFindRef);
                }
              }
              else
              {
                CPlayer::Write(this, S2C_MESSAGE, "b", 130);
                CIOObject::Release(v13, &v13->m_nFindRef);
              }
            }
            goto LABEL_30;
          case 1:
            this->m_nNPC = a3;
            v14->SiegeGunUnSet(v14, this, 1);
            goto LABEL_30;
          case 2:
            this->m_nNPC = 0;
            v14->SiegeGunUnSet(v14, this, 0);
            goto LABEL_30;
        }
      }
      else
      {
        switch ( a4 )
        {
          case 0:
            CNPC::Reply(a3, this);
            goto LABEL_30;
          case 1:
            this->m_nNPC = a3;
            v14->SiegeGunSet(v14, this, 1, a5);
            goto LABEL_30;
          case 2:
            this->m_nNPC = 0;
            v14->SiegeGunSet(v14, this, 0, 0);
            goto LABEL_30;
        }
      }
      LOG_ERR("SiegeGunProcess Unknown Sequence : ", a4);
    }
LABEL_30:
    CIOObject::Release(v14);
    CChar::Unlock(this);
  }
}

//----- (0046DC50) --------------------------------------------------------
void __thiscall CPlayer::SiegeGunControl(CPlayer *this, int a2, void *src, int a4)
{
  int v4; // eax
  int v5; // [esp-Ch] [ebp-2Ch]
  int v6; // [esp-8h] [ebp-28h]
  int v7; // [esp-4h] [ebp-24h]
  int v8; // [esp-4h] [ebp-24h]
  CNPCSiegeGunStone *v10; // [esp+8h] [ebp-18h]
  int v11; // [esp+Ch] [ebp-14h] BYREF
  _DWORD a2a[2]; // [esp+10h] [ebp-10h] BYREF
  CIOObject *v13; // [esp+18h] [ebp-8h]
  unsigned __int8 v14; // [esp+1Fh] [ebp-1h] BYREF

  v13 = CMonster::FindMonster(this->m_nSiegeGun);
  if ( v13 )
  {
    v14 = 0;
    v11 = 0;
    CChar::Lock(this);
    switch ( a2 )
    {
      case 0:
      case 1:
        ReadPacket((char *)src, "d", &v11);
        v10 = (CNPCSiegeGunStone *)CNPC::FindNPC(this->m_nNPC);
        if ( v10 )
        {
          CNPCSiegeGunStone::SetOperator(v10, 0);
          CIOObject::Release(v10);
        }
        CMonsterSiegeGun::SetOperator((CIOCriticalSection *)v13, 0);
        this->m_nSiegeGun = 0;
        ((void (__thiscall *)(CPlayer *, int, int))this->SubMState)(this, 0x80000, 0x10000);
        v7 = CBase::Id((CBase *)v13);
        CPlayer::Write(this, S2C_SIEGEGUNCONTROL, "bd", 1, v7);
        this->m_nNPC = 0;
        break;
      case 2:
        ReadPacket((char *)src, "ddb", &dword_4E2104, &dword_4E2108, &v14);
        CChar::SetDirection((CChar *)v13, dword_4E2104 - this->m_ptPixel.x, dword_4E2108 - this->m_ptPixel.y);
        v8 = v14;
        v6 = dword_4E2108;
        v5 = dword_4E2104;
        v4 = CBase::Id((CBase *)v13);
        CChar::WriteInSight(this, S2C_SIEGEGUNCONTROL, "bdddb", 2, v4, v5, v6, v8);
        break;
      case 3:
        break;
      case 4:
        ReadPacket((char *)src, "dd", &dword_4E2104, &dword_4E2108);
        a2a[0] = dword_4E2104;
        a2a[1] = dword_4E2108;
        CMonsterSiegeGun::SetFire((CIOCriticalSection *)v13, a2a);
        break;
      default:
        LOG_ERR("SiegeGunControl Unknown Sequence : ", a2);
        break;
    }
    CChar::Unlock(this);
    CIOObject::Release(v13, (volatile int *)&v13[22]);
  }
}
// 4E2104: using guessed type int dword_4E2104;
// 4E2108: using guessed type int dword_4E2108;

//----- (0046DE50) --------------------------------------------------------
void __thiscall CPlayer::SiegeGunUnset(CPlayer *this, int a2)
{
  CNPCSiegeGunStone *v3; // [esp+8h] [ebp-4h]

  CChar::Lock(this);
  if ( a2 == 1 )
  {
    ((void (__thiscall *)(CPlayer *, int, int))this->SubMState)(this, 0x80000, 0x10000);
    CChar::WriteInSight(this, S2C_SIEGEGUNSET, "bdd", 4, this->m_nNPC, this->m_nGState);
    this->m_nSiegeGun = 0;
    v3 = (CNPCSiegeGunStone *)CNPC::FindNPC(this->m_nNPC);
    if ( v3 )
    {
      sub_4021B0(v3->m_nCID, 0);
      CNPCSiegeGunStone::SetOperator(v3, 0);
      CNPCSiegeGunStone::SetSiegeGun(v3, 0);
      this->m_nNPC = 0;
    }
    CIOObject::Release(v3);
  }
  CChar::Unlock(this);
}

//----- (0046DF30) --------------------------------------------------------
int __thiscall CPlayer::ReturnToPoint(CPlayer *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  __int64 v3; // rax
  __int64 v5; // [esp+0h] [ebp-54h]
  char v7[4]; // [esp+14h] [ebp-40h] BYREF
  char v8[4]; // [esp+18h] [ebp-3Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v9; // [esp+1Ch] [ebp-38h] BYREF
  _DWORD v10[3]; // [esp+20h] [ebp-34h] BYREF
  tagPOINT a3; // [esp+2Ch] [ebp-28h] BYREF
  __int64 v12; // [esp+34h] [ebp-20h]
  int v13; // [esp+40h] [ebp-14h]
  __int64 v14; // [esp+44h] [ebp-10h]
  int v15; // [esp+50h] [ebp-4h]

  sub_47D030(v10);
  CNPC::GetNPCList((std::list<CNPC *> *)v10, a2, this->m_nMap);
  v15 = 0;
  v13 = 0;
  v14 = 0x7FFFFFFFFFFFFFFFi64;
  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)v10,
    (std::list<tagPARTICLES *>::iterator *)&v9);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v10, (int)v7);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v9,
            v2) )
      break;
    v15 = *(_DWORD *)sub_40F040(&v9);
    v12 = v14;
    v3 = PowDistance64(&this->m_ptPixel, (const tagPOINT *)(v15 + 332));
    if ( v14 >= v3 )
      v5 = PowDistance64(&this->m_ptPixel, (const tagPOINT *)(v15 + 332));
    else
      v5 = v14;
    v14 = v5;
    if ( v12 != v5 )
      v13 = v15;
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v9, v8, 0);
  }
  a3.x = Random(*(_DWORD *)(*(_DWORD *)(v13 + 444) + 60), *(_DWORD *)(*(_DWORD *)(v13 + 444) + 60) + 32);
  a3.y = Random(*(_DWORD *)(*(_DWORD *)(v13 + 444) + 64), *(_DWORD *)(*(_DWORD *)(v13 + 444) + 64) + 32);
  CPlayer::Teleport(this, *(_DWORD *)(*(_DWORD *)(v13 + 444) + 52), &a3, 0, 0);
  return (int)sub_472990((std::list<std::pair<std::string const ,int>> *)v10);
}

//----- (0046E0D0) --------------------------------------------------------
int __cdecl CPlayer::CountWarrelationPlayer()
{
  CLink *i; // [esp+4h] [ebp-10h]
  XBaseModel *v2; // [esp+8h] [ebp-Ch]
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h]

  v4 = 0;
  v3 = 0;
  v2 = CCastle::GetCastle(1u);
  if ( v2 )
    v3 = CCastle::GetWarSize(v2);
  CIOCriticalSection::Enter(&stru_4E2078);
  CIOCriticalSection::Enter(&stru_4E2098);
  CLink::MoveTo(&unk_4E200C, &pTo);
  CIOCriticalSection::Leave((int)&stru_4E2098);
  for ( i = pTo.m_pNext; i != &pTo; i = i->m_pNext )
  {
    if ( i[7].m_pNext )
    {
      if ( CCastle::IsAllCastleWarRelation((int)i[7].m_pNext) )
        ++v4;
    }
  }
  LOG_NORMAL(asc_4BBD80, v3, v4);
  CIOCriticalSection::Leave((int)&stru_4E2078);
  return v4;
}

//----- (0046E1B0) --------------------------------------------------------
void __thiscall CPlayer::EnforceItem(CPlayer *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v13; // eax
  int v14; // [esp+0h] [ebp-78h]
  int v15; // [esp+4h] [ebp-74h]
  int v16; // [esp+10h] [ebp-68h]
  CPlayer *a1; // [esp+1Ch] [ebp-5Ch]
  char v18[4]; // [esp+20h] [ebp-58h] BYREF
  int v19; // [esp+24h] [ebp-54h] BYREF
  int v21; // [esp+2Ch] [ebp-4Ch] BYREF
  char v22[4]; // [esp+30h] [ebp-48h] BYREF
  int v23; // [esp+34h] [ebp-44h] BYREF
  char v24[4]; // [esp+38h] [ebp-40h] BYREF
  int v25; // [esp+3Ch] [ebp-3Ch] BYREF
  char v26[4]; // [esp+40h] [ebp-38h] BYREF
  int v27; // [esp+44h] [ebp-34h] BYREF
  int v28; // [esp+48h] [ebp-30h]
  int v29; // [esp+4Ch] [ebp-2Ch]
  int v30; // [esp+50h] [ebp-28h]
  CItem *v31; // [esp+54h] [ebp-24h]
  int v32; // [esp+58h] [ebp-20h]
  int v33; // [esp+5Ch] [ebp-1Ch]
  CItem *item; // [esp+60h] [ebp-18h]
  CPlayer *player; // [esp+64h] [ebp-14h]
  CPlayer *v36; // [esp+68h] [ebp-10h]
  CPlayer *v37; // [esp+6Ch] [ebp-Ch]
  CPlayer *v38; // [esp+70h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v39; // [esp+74h] [ebp-4h] BYREF

  a1 = this;
  std::_String_base::_String_base((std::_String_base *)&v39);
  CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
  if ( !a1->m_pMoney || a1->m_pMoney->m_nNum < 30000 )
  {
    LOG_ERR("EnforceItem() PID(%d) Not Enough Money ", a1->m_nPID);
LABEL_139:
    CIOCriticalSection::Leave((int)&a1->m_lockItem);
    CPlayer::Write(a1, S2C_MESSAGEV, "bb", 138, 0);
    return;
  }
  v39._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v27, &a3);
  v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v26);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v39,
          v7) )
  {
    LOG_ERR("EnforceItem() PID(%d) ItemIndex(%d) ", a1->m_nPID, a3);
    goto LABEL_139;
  }
  item = *(CItem **)(sub_420250(&v39) + 4);
  v39._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v25, &a4);
  v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v24);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v39,
          v8) )
  {
LABEL_31:
    LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a4);
    goto LABEL_139;
  }
  player = *(CPlayer **)(sub_420250(&v39) + 4);
  if ( *(_DWORD *)(*(_DWORD *)&player->m_szName[8] + 64) == 906 )
  {
    switch ( item->m_pInit->m_nLevel )
    {
      case '(':
        if ( *(int *)&player->m_szName[20] < 1 )
          goto LABEL_31;
        break;
      case '-':
        if ( *(int *)&player->m_szName[20] >= 2 )
          break;
        goto LABEL_31;
      case '0':
        if ( *(int *)&player->m_szName[20] >= 4 )
          break;
        goto LABEL_31;
      case '2':
        if ( *(int *)&player->m_szName[20] < 6 )
          goto LABEL_31;
        break;
      case '5':
        if ( *(int *)&player->m_szName[20] >= 6 )
          break;
        goto LABEL_31;
      case '8':
        if ( *(int *)&player->m_szName[20] < 20 )
          goto LABEL_31;
        break;
      case ';':
        if ( *(int *)&player->m_szName[20] >= 20 )
          break;
        goto LABEL_31;
      case '>':
        if ( *(int *)&player->m_szName[20] < 75 )
          goto LABEL_31;
        break;
      case 'A':
        if ( *(int *)&player->m_szName[20] < 450 )
          goto LABEL_31;
        break;
      default:
        break;
    }
  }
  v39._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v23, &a5);
  v10 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v22);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v39,
          v10) )
  {
    LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a5);
    goto LABEL_139;
  }
  v37 = *(CPlayer **)(sub_420250(&v39) + 4);
  v39._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v21, &a6);
  v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)&this);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v39,
          v11) )
  {
    LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a6);
    goto LABEL_139;
  }
  v36 = *(CPlayer **)(sub_420250(&v39) + 4);
  if ( a2 )
  {
    v39._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v19, &a7);
    v13 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v18);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v39,
            v13) )
    {
      LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a6);
      goto LABEL_139;
    }
    v38 = *(CPlayer **)(sub_420250(&v39) + 4);
  }
  if ( !CItem::ChkWeaponUpgrade((int)item, (int)player, (int)v37)
    || a2
    && sub_46EF70((CItem *)v36) != 904
    && sub_46EF70((CItem *)v36) != 905
    && sub_46EF70((CItem *)v38) != 904
    && sub_46EF70((CItem *)v38) != 905
    && !CItem::IsState(item, 0x100000) )
  {
    goto LABEL_139;
  }
  switch ( item->m_pInit->m_nLevel )
  {
    case '(':
    case '-':
      if ( Random(0, 99) > 10 )
        goto LABEL_128;
      goto LABEL_61;
    case '0':
    case '2':
      if ( Random(0, 99) <= 7 )
        goto LABEL_61;
      goto LABEL_128;
    case '5':
      if ( Random(0, 99) <= 5 )
        goto LABEL_61;
      goto LABEL_128;
    case '8':
      if ( Random(0, 99) <= 4 )
        goto LABEL_61;
      goto LABEL_128;
    case ';':
    case '>':
    case 'A':
      if ( Random(0, 99) <= 3 )
        goto LABEL_61;
LABEL_128:
      if ( !a1->m_pMoney->UpdateNum(a1->m_pMoney, a1, 9, -30000) )
        CPlayer::_OutofInven(a1, a1->m_pMoney);
      CItem::RemoveItem(a1, (CItem *)v36);
      if ( a2 )
        CItem::RemoveItem(a1, (CItem *)v38);
      CPlayer::Write(a1, S2C_MESSAGEV, "bb", 138, 1);
      item[1].m_nRef -= Random(5, 10);
      if ( item[1].m_nRef > 0 )
      {
        CPlayer::Write(a1, S2C_UPDATEITEMEND, "db", item->m_nIID, item[1].m_nRef);
        CDBSocket::Write(S2D_UPDATEITEMEND, "ddb", item->m_nIID, a1->m_nPID, item[1].m_nRef);
      }
      else
      {
        CPlayer::Write(a1, S2C_UPDATEITEMEND, "db", item->m_nIID, 0);
        if ( item->m_pPrefix )
          v14 = item->m_pPrefix->m_nPrefix;
        else
          v14 = 0;
        v28 = (unsigned __int8)item[1].m_nTimerRef | ((unsigned __int8)item->m_nVer << 8) | ((unsigned __int8)item[1].__vftable << 16) | (v14 << 24);
        v29 = ((unsigned __int8)item[1].m_bit << 8) | ((unsigned __int8)item[1].m_nGeneralRef << 24);
        v30 = ((unsigned __int8)item[1].m_nIID << 8) | ((unsigned __int8)item[1].m_nPID << 16) | ((unsigned __int8)item[1].m_nId << 24);
        CDBSocket::Write(
          S2D_DELETEITEM,
          "ddwdbddd",
          item->m_nIID,
          a1->m_nPID,
          item->m_pInit->m_nIndex,
          item->m_nNum,
          9,
          v28,
          v29,
          v30);
        CBase::Delete(item);
      }
      CIOCriticalSection::Leave((int)&a1->m_lockItem);
      return;
    default:
LABEL_61:
      CDBSocket::Write(S2D_UPDATEITEMINFO, "dddbb", item->m_nIID, a1->m_nPID, 524032, 0, 39);
      CItem::SubState(item, 524032);
      if ( a2 )
      {
        if ( sub_46EF70((CItem *)v36) == 904 || sub_46EF70((CItem *)v36) == 905 )
          v31 = (CItem *)v36;
        else
          v31 = (CItem *)v38;
        v16 = sub_46EF70(v31);
        if ( v16 == 904 )
        {
          if ( !CItem::IsState(item, 0x100000) )
          {
            LOG_ERR(aEnforceItem, a1->m_nPID);
            goto LABEL_139;
          }
          CItem::AddState(item, 0x20000);
        }
        else if ( v16 == 905 )
        {
          if ( !CItem::IsState(item, 0x100000) )
          {
            LOG_ERR(aEnforceItem_0, a1->m_nPID);
            goto LABEL_139;
          }
          CItem::AddState(item, 0x40000);
        }
      }
      else
      {
        switch ( *(_DWORD *)(*(_DWORD *)&v36->m_szName[8] + 64) )
        {
          case 0x37F:
            CItem::AddState(item, 256);
            break;
          case 0x380:
            CItem::AddState(item, 512);
            break;
          case 0x381:
            CItem::AddState(item, 1024);
            break;
          case 0x382:
            CItem::AddState(item, 2048);
            break;
          case 0x383:
            CItem::AddState(item, 4096);
            break;
          case 0x384:
            CItem::AddState(item, 0x2000);
            break;
          case 0x385:
            CItem::AddState(item, 0x4000);
            break;
          case 0x386:
            CItem::AddState(item, 0x8000);
            break;
          case 0x387:
            CItem::AddState(item, 0x10000);
            break;
          default:
            break;
        }
      }
      if ( CItem::IsState(item, 0x80000) || CItem::IsState(item, 0x100000) )
      {
        if ( CItem::IsState(item, 0x80000) )
        {
          CDBSocket::Write(S2D_UPDATEITEMINFO, "dddbb", item->m_nIID, a1->m_nPID, 0x80000, 0, 39);
          CItem::SubState(item, 0x80000);
          CItem::AddState(item, 0x100000);
        }
      }
      else
      {
        CItem::AddState(item, 0x80000);
      }
      if ( *(_DWORD *)(*(_DWORD *)&player->m_szName[8] + 64) == 906 )
      {
        switch ( item->m_pInit->m_nLevel )
        {
          case '(':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -1) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case '-':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -2) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case '0':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -4) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case '2':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -6) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case '5':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -6) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case '8':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -20) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case ';':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -20) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case '>':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -75) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          case 'A':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))player->SubMStateEx)(player, a1, 9, -450) )
              CPlayer::_OutofInven(a1, (CItem *)player);
            break;
          default:
            break;
        }
      }
      else
      {
        CItem::RemoveItem(a1, (CItem *)player);
      }
      CItem::RemoveItem(a1, (CItem *)v37);
      if ( !a1->m_pMoney->UpdateNum(a1->m_pMoney, a1, 9, -30000) )
        CPlayer::_OutofInven(a1, a1->m_pMoney);
      CItem::RemoveItem(a1, (CItem *)v36);
      if ( a2 )
        CItem::RemoveItem(a1, (CItem *)v38);
      if ( item->m_pPrefix )
        v15 = item->m_pPrefix->m_nPrefix;
      else
        v15 = 0;
      v32 = (unsigned __int8)item[1].m_nTimerRef | ((unsigned __int8)item->m_nVer << 8) | ((unsigned __int8)item[1].__vftable << 16) | (v15 << 24);
      v33 = ((unsigned __int8)item[1].m_bit << 8) | ((unsigned __int8)item[1].m_nGeneralRef << 24);
      CDBSocket::Write(
        S2D_UPDATEITEMINFO,
        "dddbwddb",
        item->m_nIID,
        a1->m_nPID,
        item->m_dwInfo,
        1,
        item->m_pInit->m_nIndex,
        v32,
        v33,
        item[1].m_nId);
      CItem::SendItemInfo(item, a1, S2C_UPDATEITEMINFO);
      CIOCriticalSection::Leave((int)&a1->m_lockItem);
      break;
  }
}

//----- (0046EF70) --------------------------------------------------------
int __thiscall sub_46EF70(CItem *this)
{
  return this->m_pInit->m_nIndex;
}

//----- (0046EF90) --------------------------------------------------------
signed int __stdcall CItem::ChkWeaponUpgrade(int nItem_1, int nItem, int nItem_2)
{
  signed int result; // eax

  switch ( *(_DWORD *)(*(_DWORD *)(nItem_1 + 40) + 80) )
  {
    case 0x28:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 40
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 1)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 42
        || !CItem::CheckSubClass((CItem *)nItem_2) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x2D:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 45
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 5)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 42
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x30:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 48
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 10)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 46
        || !CItem::CheckSubClass((CItem *)nItem_2) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x32:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 50
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 15)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 46
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x35:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 50
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 20)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 50
        || !CItem::CheckSubClass((CItem *)nItem_2) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x38:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 53
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 25)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 50
        || !CItem::CheckSubClass((CItem *)nItem_2) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x3B:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 53
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 30)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 50
        || !CItem::CheckSubClass((CItem *)nItem_2) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x3E:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 56
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 35)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 50
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 0x41:
      if ( *(_DWORD *)(*(_DWORD *)(nItem + 40) + 80) != 59
        && (*(_DWORD *)(*(_DWORD *)(nItem + 40) + 64) != 906 || *(int *)(nItem + 52) < 40)
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 80) != 50
        || *(_DWORD *)(*(_DWORD *)(nItem_2 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    default:
LABEL_64:
      result = 0;
      break;
  }
  return result;
}

//----- (0046F2C0) --------------------------------------------------------
BOOL __stdcall CItem::CheckSubClass(CItem *a1)
{
  return a1->m_pInit->m_nSubClass == 4
      || a1->m_pInit->m_nSubClass == 5
      || a1->m_pInit->m_nSubClass == 6
      || a1->m_pInit->m_nSubClass == 7
      || a1->m_pInit->m_nSubClass == 8;
}

//----- (0046F320) --------------------------------------------------------
void __thiscall CItem::RemoveItem(CPlayer *Player, CItem *Item)
{
  if ( !Item->UpdateNum(Item, Player, 9, -1) )
    CPlayer::_OutofInven(Player, Item);
}

//----- (0046F350) --------------------------------------------------------
void __thiscall CPlayer::MixItem(CPlayer *this, int a2, int a3, int a4, int a5, int a6)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v9; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  int v13; // [esp+0h] [ebp-78h]
  int v14; // [esp+4h] [ebp-74h]
  CPlayer *a1; // [esp+18h] [ebp-60h]
  char v16[4]; // [esp+1Ch] [ebp-5Ch] BYREF
  int v17; // [esp+20h] [ebp-58h] BYREF
  int v19; // [esp+28h] [ebp-50h] BYREF
  char v20[4]; // [esp+2Ch] [ebp-4Ch] BYREF
  int v21; // [esp+30h] [ebp-48h] BYREF
  char v22[4]; // [esp+34h] [ebp-44h] BYREF
  int v23; // [esp+38h] [ebp-40h] BYREF
  char v24[4]; // [esp+3Ch] [ebp-3Ch] BYREF
  int v25; // [esp+40h] [ebp-38h] BYREF
  int v26; // [esp+44h] [ebp-34h]
  int v27; // [esp+48h] [ebp-30h]
  int v28; // [esp+4Ch] [ebp-2Ch]
  int v29; // [esp+50h] [ebp-28h]
  int v30; // [esp+54h] [ebp-24h]
  CItem *item; // [esp+58h] [ebp-20h]
  char v32[4]; // [esp+5Ch] [ebp-1Ch]
  CPlayer *v33; // [esp+60h] [ebp-18h]
  CPlayer *v34; // [esp+64h] [ebp-14h]
  CPlayer *player; // [esp+68h] [ebp-10h]
  CPlayer *Player; // [esp+6Ch] [ebp-Ch]
  CPlayer *v37; // [esp+70h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v38; // [esp+74h] [ebp-4h] BYREF

  a1 = this;
  std::_String_base::_String_base((std::_String_base *)&v38);
  CIOCriticalSection::Enter(&a1->m_lockItem.m_critical_section);
  if ( !a1->m_pMoney || a1->m_pMoney->m_nNum < 70000 )
  {
    LOG_ERR("MixItem() PID(%d) Not Enough Money ", a1->m_nPID);
LABEL_170:
    CPlayer::Write(a1, S2C_MESSAGEV, "bb", 138, 0);
    CIOCriticalSection::Leave((int)&a1->m_lockItem);
    return;
  }
  if ( a5 == a6 )
    goto LABEL_170;
  v38._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v25, &a2);
  v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v24);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v38,
          v6) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIndex(%d) ", a1->m_nPID, a2);
    goto LABEL_170;
  }
  v33 = *(CPlayer **)(sub_420250(&v38) + 4);
  if ( *(int *)(*(_DWORD *)&v33->m_szName[8] + 64) >= 769 && *(int *)(*(_DWORD *)&v33->m_szName[8] + 64) <= 801 )
    goto LABEL_170;
  v38._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v23, &a3);
  v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v22);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v38,
          v7) )
  {
LABEL_34:
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a3);
    goto LABEL_170;
  }
  v34 = *(CPlayer **)(sub_420250(&v38) + 4);
  if ( *(_DWORD *)(*(_DWORD *)&v34->m_szName[8] + 64) == 906 )
  {
    switch ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 80) )
    {
      case 40:
        if ( *(int *)&v34->m_szName[20] < 1 )
          goto LABEL_34;
        break;
      case 45:
        if ( *(int *)&v34->m_szName[20] >= 2 )
          break;
        goto LABEL_34;
      case 48:
        if ( *(int *)&v34->m_szName[20] >= 4 )
          break;
        goto LABEL_34;
      case 50:
        if ( *(int *)&v34->m_szName[20] < 6 )
          goto LABEL_34;
        break;
      case 53:
        if ( *(int *)&v34->m_szName[20] >= 6 )
          break;
        goto LABEL_34;
      case 56:
        if ( *(int *)&v34->m_szName[20] < 20 )
          goto LABEL_34;
        break;
      case 59:
        if ( *(int *)&v34->m_szName[20] >= 20 )
          break;
        goto LABEL_34;
      case 62:
        if ( *(int *)&v34->m_szName[20] < 75 )
          goto LABEL_34;
        break;
      case 65:
        if ( *(int *)&v34->m_szName[20] < 450 )
          goto LABEL_34;
        break;
      default:
        break;
    }
  }
  v38._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v21, &a4);
  v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v20);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v38,
          v8) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a4);
    goto LABEL_170;
  }
  Player = *(CPlayer **)(sub_420250(&v38) + 4);
  v38._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v19, &a5);
  v9 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)&this);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v38,
          v9) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a5);
    goto LABEL_170;
  }
  player = *(CPlayer **)(sub_420250(&v38) + 4);
  v38._Myptr = (CIOSocket::CIOTimer *)*sub_44AE20(&a1->m_mapItem, &v17, &a6);
  v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&a1->m_mapItem, (int)v16);
  if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
          &v38,
          v11) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", a1->m_nPID, a6);
    goto LABEL_170;
  }
  v37 = *(CPlayer **)(sub_420250(&v38) + 4);
  if ( !CItem::ChkWeaponUpgrade((int)v33, (int)v34, (int)Player) )
    goto LABEL_170;
  switch ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 80) )
  {
    case 40:
    case 45:
      if ( Random(0, 99) > 10 )
        goto LABEL_161;
      goto LABEL_57;
    case 48:
    case 50:
      if ( Random(0, 99) <= 7 )
        goto LABEL_57;
      goto LABEL_161;
    case 53:
      if ( Random(0, 99) <= 5 )
        goto LABEL_57;
      goto LABEL_161;
    case 56:
      if ( Random(0, 99) <= 4 )
        goto LABEL_57;
      goto LABEL_161;
    case 59:
    case 62:
    case 65:
      if ( Random(0, 99) <= 3 )
        goto LABEL_57;
LABEL_161:
      if ( !a1->m_pMoney->UpdateNum(a1->m_pMoney, a1, 9, -70000) )
        CPlayer::_OutofInven(a1, a1->m_pMoney);
      CItem::RemoveItem(a1, (CItem *)player);
      CItem::RemoveItem(a1, (CItem *)v37);
      v33->m_prtyPt.nPt[1] -= Random(5, 10);
      if ( v33->m_prtyPt.nPt[1] > 0 )
      {
        CPlayer::Write(a1, S2C_UPDATEITEMEND, "db", *(_DWORD *)&v33->m_szName[4], v33->m_prtyPt.nPt[1]);
        CDBSocket::Write(S2D_UPDATEITEMEND, "ddb", *(_DWORD *)&v33->m_szName[4], a1->m_nPID, v33->m_prtyPt.nPt[1]);
      }
      else
      {
        CPlayer::Write(a1, S2C_UPDATEITEMEND, "db", *(_DWORD *)&v33->m_szName[4], 0);
        if ( *(_DWORD *)&v33->m_szName[12] )
          v13 = *(_DWORD *)(*(_DWORD *)&v33->m_szName[12] + 32);
        else
          v13 = 0;
        v26 = (unsigned __int8)v33->m_prtyPt.nPt[2] | ((unsigned __int8)v33->m_prtyBase.nBase[5] << 8) | ((unsigned __int8)v33->m_prtyPt.nPt[0] << 16) | (v13 << 24);
        v27 = ((unsigned __int8)v33->m_prtyPt.nPt[5] << 8) | ((unsigned __int8)v33->m_prtyPt.nPt[3] << 24);
        v28 = ((unsigned __int8)v33->m_prtyPt.nMinAttack << 8) | ((unsigned __int8)v33->m_prtyPt.nDodge << 16) | ((unsigned __int8)v33->m_prtyPt.nHit << 24);
        CDBSocket::Write(
          S2D_DELETEITEM,
          "ddwdbddd",
          *(_DWORD *)&v33->m_szName[4],
          a1->m_nPID,
          *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 64),
          *(_DWORD *)&v33->m_szName[20],
          9,
          v26,
          v27,
          v28);
        CBase::Delete(v33);
      }
      CIOCriticalSection::Leave((int)&a1->m_lockItem);
      CPlayer::Write(a1, S2C_MESSAGEV, "bb", 138, 1);
      break;
    default:
LABEL_57:
      if ( *(_DWORD *)(*(_DWORD *)&v34->m_szName[8] + 64) == 906 )
      {
        switch ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 80) )
        {
          case '(':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -1) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case '-':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -2) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case '0':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -4) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case '2':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -6) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case '5':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -6) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case '8':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -20) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case ';':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -20) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case '>':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -75) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          case 'A':
            if ( !((int (__thiscall *)(CPlayer *, CPlayer *, int, int))v34->SubMStateEx)(v34, a1, 9, -450) )
              CPlayer::_OutofInven(a1, (CItem *)v34);
            break;
          default:
            break;
        }
      }
      else
      {
        CItem::RemoveItem(a1, (CItem *)v34);
      }
      CItem::RemoveItem(a1, (CItem *)Player);
      CItem::RemoveItem(a1, (CItem *)player);
      CItem::RemoveItem(a1, (CItem *)v37);
      if ( !a1->m_pMoney->UpdateNum(a1->m_pMoney, a1, 9, -70000) )
        CPlayer::_OutofInven(a1, a1->m_pMoney);
      item = 0;
      *(_DWORD *)v32 = 0;
      switch ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 80) )
      {
        case 40:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 771;
            else
              *(_DWORD *)v32 = 770;
          }
          else
          {
            *(_DWORD *)v32 = 769;
          }
          break;
        case 45:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 774;
            else
              *(_DWORD *)v32 = 773;
          }
          else
          {
            *(_DWORD *)v32 = 772;
          }
          break;
        case 48:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 777;
            else
              *(_DWORD *)v32 = 776;
          }
          else
          {
            *(_DWORD *)v32 = 775;
          }
          break;
        case 50:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 781;
            else
              *(_DWORD *)v32 = 780;
          }
          else
          {
            *(_DWORD *)v32 = (*(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 72) != 0) + 778;
          }
          break;
        case 53:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 785;
            else
              *(_DWORD *)v32 = 784;
          }
          else
          {
            *(_DWORD *)v32 = (*(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 72) != 0) + 782;
          }
          break;
        case 56:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 789;
            else
              *(_DWORD *)v32 = 788;
          }
          else
          {
            *(_DWORD *)v32 = (*(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 72) != 0) + 786;
          }
          break;
        case 59:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 793;
            else
              *(_DWORD *)v32 = 792;
          }
          else
          {
            *(_DWORD *)v32 = (*(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 72) != 0) + 790;
          }
          break;
        case 62:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 774;
            else
              *(_DWORD *)v32 = 773;
          }
          else
          {
            *(_DWORD *)v32 = (*(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 72) != 0) + 794;
          }
          break;
        case 65:
          if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 96) == 1 )
              *(_DWORD *)v32 = 801;
            else
              *(_DWORD *)v32 = 800;
          }
          else
          {
            *(_DWORD *)v32 = (*(_DWORD *)(*(_DWORD *)&v33->m_szName[8] + 72) != 0) + 798;
          }
          break;
        default:
          break;
      }
      item = CItem::CreateItem(*(int *)v32, 0, 1, -1);
      if ( item )
      {
        if ( item->m_pPrefix != *(CPrefix **)&v33->m_szName[12] )
        {
          item->m_pPrefix = *(CPrefix **)&v33->m_szName[12];
          CDBSocket::Write(S2D_UPDATEITEMPREFIX, "ddbb", item->m_nIID, a1->m_nPID, item->m_pPrefix, 0);
        }
        if ( item[1].m_nPID != v33->m_prtyPt.nDodge )
        {
          item[1].m_nPID = v33->m_prtyPt.nDodge;
          CDBSocket::Write(S2D_UPDATEITEMUPGRADE, "ddbb", item->m_nIID, a1->m_nPID, 2, item[1].m_nPID);
        }
        if ( item[1].m_nIID != v33->m_prtyPt.nMinAttack )
        {
          item[1].m_nIID = v33->m_prtyPt.nMinAttack;
          CDBSocket::Write(S2D_UPDATEITEMUPGRADE, "ddbb", item->m_nIID, a1->m_nPID, 1, item[1].m_nIID);
        }
        if ( item[1].m_nTimerRef != v33->m_prtyPt.nPt[2] )
        {
          item[1].m_nTimerRef = v33->m_prtyPt.nPt[2];
          CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", item->m_nIID, a1->m_nPID, 27, item[1].m_nTimerRef, 0);
        }
        if ( item[1].m_pNext != (CBase *)v33->m_prtyPt.nPt[4] )
        {
          item[1].m_pNext = (CBase *)v33->m_prtyPt.nPt[4];
          CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", item->m_nIID, a1->m_nPID, 15, item[1].m_pNext, 0);
        }
        if ( item[1].m_bit != v33->m_prtyPt.nPt[5] )
        {
          item[1].m_bit = v33->m_prtyPt.nPt[5];
          CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", item->m_nIID, a1->m_nPID, 9, item[1].m_bit, 0);
        }
        if ( item[1].m_nGeneralRef != v33->m_prtyPt.nPt[3] )
        {
          item[1].m_nGeneralRef = v33->m_prtyPt.nPt[3];
          CDBSocket::Write(S2D_UPDATEITEMXVALUE, "ddbbb", item->m_nIID, a1->m_nPID, 28, item[1].m_nGeneralRef, 0);
        }
        if ( item->m_dwInfo != *(_DWORD *)&v33->m_szName[16] )
          item->m_dwInfo = *(_DWORD *)&v33->m_szName[16];
        if ( CPlayer::_InsertItem(a1, 2, item) == 1 )
        {
          if ( item->m_dwInfo != *(_DWORD *)&v33->m_szName[16] )
          {
            if ( item->m_pPrefix )
              v14 = item->m_pPrefix->m_nPrefix;
            else
              v14 = 0;
            v29 = (unsigned __int8)item[1].m_nTimerRef | ((unsigned __int8)item->m_nVer << 8) | ((unsigned __int8)item[1].__vftable << 16) | (v14 << 24);
            v30 = ((unsigned __int8)item[1].m_bit << 8) | ((unsigned __int8)item[1].m_nGeneralRef << 24);
            CDBSocket::Write(
              S2D_UPDATEITEMINFO,
              "dddbwddb",
              item->m_nIID,
              a1->m_nPID,
              item->m_dwInfo,
              1,
              item->m_pInit->m_nIndex,
              v29,
              v30,
              item[1].m_nId);
          }
          CItem::RemoveItem(a1, (CItem *)v33);
          CIOCriticalSection::Leave((int)&a1->m_lockItem);
        }
        else
        {
          LOG_ERR("MixItem() item insert error [PID (%d)] [Index (%d)]", a1->m_nPID, item->m_pInit->m_nIndex);
          CBase::Delete(item);
          CIOCriticalSection::Leave((int)&a1->m_lockItem);
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&a1->m_lockItem);
        LOG_ERR("MixItem() insert item Null error [PID (%d)] ", a1->m_nPID);
      }
      break;
  }
}

//----- (004703E0) --------------------------------------------------------
unsigned int __thiscall sub_4703E0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator _First; // [esp+8h] [ebp-Ch] BYREF
  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator _Last; // [esp+Ch] [ebp-8h]
  unsigned int _Off; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&_First,
    (const int *)a1);
  _Off = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    (int)_First._Ptr,
    (int)_Last._Ptr,
    &_Off);
  sub_4729B0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    (int)_First._Ptr,
    (char)_Last._Ptr);
  return _Off;
}

//----- (00470440) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_470440(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, const std::pair<int const ,CGame_Character::TargetInfo> *a3)
{
  const char **v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  const char **v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  const char *v10; // [esp-4h] [ebp-3Ch]
  const char *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = *(const char **)sub_473500((int)v21);
    v3 = (const char **)sub_474590((int)a3);
    v23 = StrCmp::operator()((StrCmp *)this, *v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270(this, (int)v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(v20);
  }
  v11 = *(const char **)sub_474590((int)a3);
  v7 = unknown_libname_7(v20);
  v8 = (const char **)sub_473500(v7);
  if ( StrCmp::operator()((StrCmp *)this, *v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270(this, (int)v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00470600) --------------------------------------------------------
int __thiscall sub_470600(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472B50(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_472A80(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00470660) --------------------------------------------------------
_DWORD *__thiscall sub_470660(iless *this, _DWORD *a2, const char **a3)
{
  int v3; // eax
  int v4; // eax
  const char **v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_472B20(this, v12, (int)a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (const char **)sub_473500(v4), StrCmp::operator()(this, *a3, *v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004706F0) --------------------------------------------------------
void *__thiscall sub_4706F0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00470720) --------------------------------------------------------
int __thiscall sub_470720(void *this)
{
  return sub_472C70((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00470740) --------------------------------------------------------
int __thiscall sub_470740(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    (const int *)a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_472B90(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (004707A0) --------------------------------------------------------
std::vector<IPAddrMask> *__thiscall sub_4707A0(void *this)
{
  void *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<IPAddrMask> *v3; // [esp+0h] [ebp-8h]

  v3 = (std::vector<IPAddrMask> *)this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  sub_44F7C0(v3, (char)v2);
  std::vector<IPAddrMask>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004707D0) --------------------------------------------------------
XMessageQueue::XTimerElement *__thiscall sub_4707D0(int this, const XMessageQueue::XTimerElement *a2)
{
  unsigned int v2; // esi
  XMessageQueue::XTimerElement *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
  if ( v2 >= std::vector<XMessageQueue::XElement>::capacity((std::vector<XMessageQueue::XTimerElement> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (XMessageQueue::XTimerElement *)sub_472DA0((std::vector<IPAddrMask> *)this, (int)v6, *v4, (int)a2);
  }
  else
  {
    result = std::vector<XMessageQueue::XElement>::_Ufill(
               (std::vector<XMessageQueue::XTimerElement> *)this,
               *(XMessageQueue::XTimerElement **)(this + 8),
               1u,
               a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00470840) --------------------------------------------------------
void *__thiscall sub_470840(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_472ED0(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00470870) --------------------------------------------------------
int __thiscall sub_470870(void *this)
{
  return sub_473430((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00470890) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_470890(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0((int *)this);
  v22 = *(_DWORD *)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_433230(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)sub_474590(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_472FF0((_DWORD *)this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_475900(v20);
  }
  v11 = (_DWORD *)sub_474590(a3);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_472FF0((_DWORD *)this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00470A40) --------------------------------------------------------
int __thiscall sub_470A40(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472FB0(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  sub_47A310(v5, v6, (int)&v7);
  sub_472F10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00470AA0) --------------------------------------------------------
void *__thiscall sub_470AA0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_473520(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00470AD0) --------------------------------------------------------
int __thiscall sub_470AD0(void *this)
{
  return sub_473E10((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00470AF0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_470AF0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_4734F0((int)v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)sub_474590(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4736F0(this, v17, 1, v22, (const std::pair<int const ,KMacro::CShinsu_Ability> *)a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_4758E0(v20);
  }
  v11 = (_DWORD *)sub_474590(a3);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4736F0(this, v15, v23, v22, (const std::pair<int const ,KMacro::CShinsu_Ability> *)a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00470CA0) --------------------------------------------------------
_DWORD *__thiscall sub_470CA0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  unsigned int *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  unsigned int *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  unsigned int v48; // [esp+4h] [ebp-5Ch]
  unsigned int v49; // [esp+8h] [ebp-58h]
  std::string v51; // [esp+10h] [ebp-50h] BYREF
  std::logic_error v52; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+54h] [ebp-Ch]
  int v54; // [esp+58h] [ebp-8h]
  void *v55; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_4734F0(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)&v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v52, &v51);
    std::exception::_Raise(v4);
    sub_4111D0(&v52);
    sub_40F780(&v51);
  }
  v55 = (void *)unknown_libname_7(&a3);
  sub_4758C0(&a3);
  v53 = v55;
  v5 = (int *)sub_474590((int)v55);
  if ( *(_BYTE *)sub_4734F0(*v5) )
  {
    v54 = *(_DWORD *)sub_430F90((int)v53);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v53);
    if ( *(_BYTE *)sub_4734F0(*v6) )
    {
      v54 = *(_DWORD *)sub_474590((int)v53);
    }
    else
    {
      v53 = (void *)unknown_libname_7(&a3);
      v54 = *(_DWORD *)sub_430F90((int)v53);
    }
  }
  if ( v53 == v55 )
  {
    v52._Str._Myres = *(_DWORD *)sub_446FF0((int)v55);
    if ( !*(_BYTE *)sub_4734F0(v54) )
    {
      v7 = (unsigned int *)sub_446FF0(v54);
      *v7 = v52._Str._Myres;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v55 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v54;
    }
    else
    {
      v10 = (void **)sub_474590(v52._Str._Myres);
      if ( *v10 == v55 )
        v11 = (_DWORD *)sub_474590(v52._Str._Myres);
      else
        v11 = (_DWORD *)sub_430F90(v52._Str._Myres);
      *v11 = v54;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v55 )
    {
      if ( *(_BYTE *)sub_4734F0(v54) )
        v49 = v52._Str._Myres;
      else
        v49 = sub_473CA0(v54);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v55 )
    {
      if ( *(_BYTE *)sub_4734F0(v54) )
        v48 = v52._Str._Myres;
      else
        v48 = sub_473C60(v54);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v55);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v53;
    v16 = (_DWORD *)sub_474590((int)v55);
    *(_DWORD *)sub_474590((int)v53) = *v16;
    v17 = (void **)sub_430F90((int)v55);
    if ( v53 == *v17 )
    {
      v52._Str._Myres = (unsigned int)v53;
    }
    else
    {
      v52._Str._Myres = *(_DWORD *)sub_446FF0((int)v53);
      if ( !*(_BYTE *)sub_4734F0(v54) )
      {
        v18 = (unsigned int *)sub_446FF0(v54);
        *v18 = v52._Str._Myres;
      }
      v19 = (_DWORD *)sub_474590(v52._Str._Myres);
      *v19 = v54;
      v20 = (_DWORD *)sub_430F90((int)v55);
      *(_DWORD *)sub_430F90((int)v53) = *v20;
      v21 = (int *)sub_430F90((int)v55);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v53;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v55 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v53;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v55);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v55 )
      {
        v27 = (int *)sub_446FF0((int)v55);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v55);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v53;
    }
    v30 = (_DWORD *)sub_446FF0((int)v55);
    *(_DWORD *)sub_446FF0((int)v53) = *v30;
    v47 = (char *)sub_4734E0((int)v55);
    v31 = (char *)sub_4734E0((int)v53);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_4734E0((int)v55) == 1 )
  {
    while ( 1 )
    {
      v32 = (_DWORD *)sub_478AB0(this);
      if ( v54 == *v32 || *(_BYTE *)sub_4734E0(v54) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_4734E0(v54) = 1;
        goto LABEL_66;
      }
      v33 = (_DWORD *)sub_474590(v52._Str._Myres);
      if ( v54 == *v33 )
        break;
      v53 = *(void **)sub_474590(v52._Str._Myres);
      if ( !*(_BYTE *)sub_4734E0((int)v53) )
      {
        *(_BYTE *)sub_4734E0((int)v53) = 1;
        *(_BYTE *)sub_4734E0(v52._Str._Myres) = 0;
        sub_473CE0(this, v52._Str._Myres);
        v53 = *(void **)sub_474590(v52._Str._Myres);
      }
      if ( !*(_BYTE *)sub_4734F0((int)v53) )
      {
        v40 = (int *)sub_430F90((int)v53);
        if ( *(_BYTE *)sub_4734E0(*v40) != 1 || (v41 = (int *)sub_474590((int)v53), *(_BYTE *)sub_4734E0(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v53);
          if ( *(_BYTE *)sub_4734E0(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v53);
            *(_BYTE *)sub_4734E0(*v43) = 1;
            *(_BYTE *)sub_4734E0((int)v53) = 0;
            sub_473B30(this, (int)v53);
            v53 = *(void **)sub_474590(v52._Str._Myres);
          }
          v44 = (_BYTE *)sub_4734E0(v52._Str._Myres);
          *(_BYTE *)sub_4734E0((int)v53) = *v44;
          *(_BYTE *)sub_4734E0(v52._Str._Myres) = 1;
          v45 = (int *)sub_474590((int)v53);
          *(_BYTE *)sub_4734E0(*v45) = 1;
          sub_473CE0(this, v52._Str._Myres);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_4734E0((int)v53) = 0;
        v54 = v52._Str._Myres;
        goto LABEL_42;
      }
      v54 = v52._Str._Myres;
LABEL_42:
      v52._Str._Myres = *(_DWORD *)sub_446FF0(v54);
    }
    v53 = *(void **)sub_430F90(v52._Str._Myres);
    if ( !*(_BYTE *)sub_4734E0((int)v53) )
    {
      *(_BYTE *)sub_4734E0((int)v53) = 1;
      *(_BYTE *)sub_4734E0(v52._Str._Myres) = 0;
      sub_473B30(this, v52._Str._Myres);
      v53 = *(void **)sub_430F90(v52._Str._Myres);
    }
    if ( *(_BYTE *)sub_4734F0((int)v53) )
    {
      v54 = v52._Str._Myres;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v53);
    if ( *(_BYTE *)sub_4734E0(*v34) != 1 || (v35 = (int *)sub_430F90((int)v53), *(_BYTE *)sub_4734E0(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v53);
      if ( *(_BYTE *)sub_4734E0(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v53);
        *(_BYTE *)sub_4734E0(*v37) = 1;
        *(_BYTE *)sub_4734E0((int)v53) = 0;
        sub_473CE0(this, (int)v53);
        v53 = *(void **)sub_430F90(v52._Str._Myres);
      }
      v38 = (_BYTE *)sub_4734E0(v52._Str._Myres);
      *(_BYTE *)sub_4734E0((int)v53) = *v38;
      *(_BYTE *)sub_4734E0(v52._Str._Myres) = 1;
      v39 = (int *)sub_430F90((int)v53);
      *(_BYTE *)sub_4734E0(*v39) = 1;
      sub_473B30(this, v52._Str._Myres);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70((int)v55);
  sub_4338F0(v55, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00471430) --------------------------------------------------------
int __thiscall sub_471430(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_473630(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  sub_47A2B0(v5, v6, (int)&v7);
  sub_473560(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00471490) --------------------------------------------------------
_DWORD *__thiscall sub_471490(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_473670(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (004714F0) --------------------------------------------------------
_DWORD *__thiscall sub_4714F0(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_473600(this, v12, (int)a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471580) --------------------------------------------------------
void *__thiscall sub_471580(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_473ED0(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004715B0) --------------------------------------------------------
int __thiscall sub_4715B0(void *this)
{
  return sub_4744E0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (004715D0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_4715D0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_473EC0((int)v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)sub_474590(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4740A0(this, v17, 1, v22, (const std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> *)a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_4758A0(v20);
  }
  v11 = (_DWORD *)sub_474590(a3);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4740A0(this, v15, v23, v22, (const std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> *)a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471780) --------------------------------------------------------
int __thiscall sub_471780(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_473FE0(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  sub_47A2E0(v5, v6, (int)&v7);
  sub_473F10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (004717E0) --------------------------------------------------------
_DWORD *__thiscall sub_4717E0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_474020(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00471840) --------------------------------------------------------
_DWORD *__thiscall sub_471840(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_473FB0(this, v12, (int)a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004718D0) --------------------------------------------------------
void *__thiscall sub_4718D0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_472ED0(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00471900) --------------------------------------------------------
int __thiscall sub_471900(void *this)
{
  return sub_474640((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00471920) --------------------------------------------------------
int __thiscall sub_471920(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472FB0(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  sub_47A310(v5, v6, (int)&v7);
  sub_4745A0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00471980) --------------------------------------------------------
void *__thiscall sub_471980(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_474700(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (004719B0) --------------------------------------------------------
int __thiscall sub_4719B0(void *this)
{
  return sub_474D10((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (004719D0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_4719D0(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0((int *)this);
  v22 = *(_DWORD *)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_4746F0(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)sub_474590(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4748D0((_DWORD *)this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_475920(v20);
  }
  v11 = (_DWORD *)sub_474590(a3);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_4748D0((_DWORD *)this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471B80) --------------------------------------------------------
int __thiscall sub_471B80(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_474810(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  sub_47A340(v5, v6, (int)&v7);
  sub_474740(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00471BE0) --------------------------------------------------------
_DWORD *__thiscall sub_471BE0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_474850(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00471C40) --------------------------------------------------------
_DWORD *__thiscall sub_471C40(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_4747E0(this, v12, (int)a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471CD0) --------------------------------------------------------
void *__thiscall sub_471CD0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_474DE0(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00471D00) --------------------------------------------------------
int __thiscall sub_471D00(void *this)
{
  return sub_475650((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00471D20) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_471D20(int this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, int a3)
{
  void *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  void *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  void *v10; // [esp-4h] [ebp-3Ch]
  void *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  bool v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0((int *)this);
  v22 = *(_DWORD *)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_474DD0(v21) )
  {
    v22 = v21;
    v10 = (void *)sub_473500(v21);
    v3 = (void *)sub_474590(a3);
    v23 = sub_471ED0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_474F30((_DWORD *)this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_4759A0(v20);
  }
  v11 = (void *)sub_474590(a3);
  v7 = unknown_libname_7(v20);
  v8 = (void *)sub_473500(v7);
  if ( sub_471ED0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_474F30((_DWORD *)this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471ED0) --------------------------------------------------------
bool __stdcall sub_471ED0(void *a1, void *a2)
{
  const char *v2; // eax
  const char *v4; // [esp-4h] [ebp-8h]

  v4 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(a2);
  v2 = (const char *)std::basic_string_char_std::char_traits_char__std::allocator_char___::c_str_(a1);
  return mbstricmp(v2, v4) < 0;
}

//----- (00471F00) --------------------------------------------------------
_DWORD *__thiscall sub_471F00(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  char v52[36]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_474DD0(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0((std::logic_error *)v52, (const std::string *)v51);
    std::exception::_Raise(v4);
    sub_4111D0((std::logic_error *)v52);
    sub_40F780(v51);
  }
  v56 = (void *)unknown_libname_7(&a3);
  sub_475980(&a3);
  v54 = v56;
  v5 = (int *)sub_474590((int)v56);
  if ( *(_BYTE *)sub_474DD0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_474DD0(*v6) )
    {
      v55 = *(void **)sub_474590((int)v54);
    }
    else
    {
      v54 = (void *)unknown_libname_7(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_474DD0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)sub_474590((int)v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)sub_474590((int)v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_474DD0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_4754E0((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_474DD0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_4754A0((int)v55);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)sub_474590((int)v56);
    *(_DWORD *)sub_474590((int)v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_474DD0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)sub_474590((int)v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v56);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v56 )
      {
        v27 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_474DC0((int)v56);
    v31 = (char *)sub_474DC0((int)v54);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_474DC0((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_474DC0((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_474DC0((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)sub_474590((int)v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)sub_474590((int)v53);
      if ( !*(_BYTE *)sub_474DC0((int)v54) )
      {
        *(_BYTE *)sub_474DC0((int)v54) = 1;
        *(_BYTE *)sub_474DC0((int)v53) = 0;
        sub_475520(this, (int)v53);
        v54 = *(void **)sub_474590((int)v53);
      }
      if ( !*(_BYTE *)sub_474DD0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_474DC0(*v40) != 1 || (v41 = (int *)sub_474590((int)v54), *(_BYTE *)sub_474DC0(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v54);
          if ( *(_BYTE *)sub_474DC0(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_474DC0(*v43) = 1;
            *(_BYTE *)sub_474DC0((int)v54) = 0;
            sub_475370(this, (int)v54);
            v54 = *(void **)sub_474590((int)v53);
          }
          v44 = (_BYTE *)sub_474DC0((int)v53);
          *(_BYTE *)sub_474DC0((int)v54) = *v44;
          *(_BYTE *)sub_474DC0((int)v53) = 1;
          v45 = (int *)sub_474590((int)v54);
          *(_BYTE *)sub_474DC0(*v45) = 1;
          sub_475520(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_474DC0((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_474DC0((int)v54) )
    {
      *(_BYTE *)sub_474DC0((int)v54) = 1;
      *(_BYTE *)sub_474DC0((int)v53) = 0;
      sub_475370(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_474DD0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v54);
    if ( *(_BYTE *)sub_474DC0(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_474DC0(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_474DC0(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v54);
        *(_BYTE *)sub_474DC0(*v37) = 1;
        *(_BYTE *)sub_474DC0((int)v54) = 0;
        sub_475520(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_474DC0((int)v53);
      *(_BYTE *)sub_474DC0((int)v54) = *v38;
      *(_BYTE *)sub_474DC0((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_474DC0(*v39) = 1;
      sub_475370(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_475700((int)v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00472690) --------------------------------------------------------
int __thiscall sub_472690(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_474EF0(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a1);
  v7 = 0;
  sub_47A370(v5, v6, (int)&v7);
  sub_474E20(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (004726F0) --------------------------------------------------------
_DWORD *__thiscall sub_4726F0(_DWORD *this, _DWORD *a2, void *a3)
{
  int v3; // eax
  int v4; // eax
  void *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_474EC0(this, v12, (int)a3);
  v3 = sub_430C20(this, (int)v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(v12), v5 = (void *)sub_473500(v4), sub_471ED0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, (int)v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00472780) --------------------------------------------------------
bool __thiscall sub_472780(_DWORD *this)
{
  return this[2] == 0;
}

//----- (004727A0) --------------------------------------------------------
CMemory ***__thiscall sub_4727A0(_DWORD *this, int a2)
{
  int *v2; // eax
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = (int *)sub_430C20(this, (int)v5);
  return sub_475720(this, *v2, a2);
}

//----- (004727D0) --------------------------------------------------------
_DWORD *__thiscall sub_4727D0(_DWORD *this)
{
  void *v1; // eax
  int *v2; // eax
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v1 = (void *)sub_430C20(this, (int)v6);
  v2 = (int *)sub_475940(v1);
  return std::list<std::pair<std::string const,int>>::erase((int)this, v5, *v2);
}

//----- (00472800) --------------------------------------------------------
_DWORD *__thiscall std::list<std::pair<std::string const,int>>::insert(_DWORD *this, _DWORD *a1, int a2, int a3)
{
  sub_475720(this, a2, a3);
  *a1 = *(_DWORD *)sub_475940(&a2);
  return a1;
}

//----- (00472830) --------------------------------------------------------
_DWORD *__thiscall sub_472830(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x1Au);
  return this;
}

//----- (00472860) --------------------------------------------------------
std::pair<int,CScriptToCookBoard::tBaseTable> *__thiscall std::pair<int,CScriptToCookBoard::tBaseTable>::pair<int,CScriptToCookBoard::tBaseTable>(std::pair<int,CScriptToCookBoard::tBaseTable> *this, const int *_Val1, const CScriptToCookBoard::tBaseTable *_Val2)
{
  int v3; // edx

  *(_DWORD *)this = *_Val1;
  v3 = *((_DWORD *)_Val2 + 1);
  *((_DWORD *)this + 1) = *(_DWORD *)_Val2;
  *((_DWORD *)this + 2) = v3;
  return this;
}

//----- (00472890) --------------------------------------------------------
_DWORD *__thiscall sub_472890(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_4758C0(this);
  *a2 = v4;
  return a2;
}

//----- (004728C0) --------------------------------------------------------
_DWORD *__thiscall sub_4728C0(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x1Eu);
  return this;
}

//----- (004728F0) --------------------------------------------------------
_DWORD *__thiscall sub_4728F0(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x1Cu);
  return this;
}

//----- (00472920) --------------------------------------------------------
_DWORD *__thiscall sub_472920(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x60u);
  return this;
}

//----- (00472950) --------------------------------------------------------
int __thiscall sub_472950(int this, const std::string *a2, _DWORD *a3)
{
  std::string::string((std::string *)this, a2);
  *(_DWORD *)(this + 28) = *a3;
  *(_DWORD *)(this + 32) = a3[1];
  *(_DWORD *)(this + 36) = a3[2];
  *(_DWORD *)(this + 40) = a3[3];
  return this;
}

//----- (00472990) --------------------------------------------------------
std::list<std::pair<std::string const ,int>> *__thiscall sub_472990(std::list<std::pair<std::string const ,int>> *this)
{
  return std::list<std::pair<std::string const,int>>::_Tidy(this);
}

//----- (004729B0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4729B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_4759C0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00472A50) --------------------------------------------------------
void *__thiscall sub_472A50(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, const int *a3)
{
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v3; // eax

  v3 = std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Lbound(
         this,
         a3);
  sub_446700(a2, (int)v3);
  return a2;
}

//----- (00472A80) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472A80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_475A20(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00472B20) --------------------------------------------------------
void *__thiscall sub_472B20(void *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_475AB0((int)this, (const char **)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00472B50) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_472B50(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_475A80(this, v8, a2);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_472B20(this, v7, a2);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a1,
    v3,
    v5);
  return a1;
}

//----- (00472B90) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472B90(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_475B40(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00472C30) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_472C30(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a2, const int *a3)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_47EB10(this, v8, a3);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_472A50(this, v7, a3);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00472C70) --------------------------------------------------------
int __thiscall sub_472C70(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_472B90(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00472D20) --------------------------------------------------------
int __thiscall std::vector<XMessageQueue::XElement>::capacity(std::vector<XMessageQueue::XTimerElement> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00472D60) --------------------------------------------------------
int __thiscall std::vector<XMessageQueue::XElement>::size(std::vector<IPAddrMask> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00472DA0) --------------------------------------------------------
int __thiscall sub_472DA0(std::vector<IPAddrMask> *this, int a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<XMessageQueue::XElement>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_4470B0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_475BA0((int)this, (XMessageQueue::XTimerElement *)a3, 1u, (int *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_478710(v5, (_DWORD *)a2, v7);
  return a2;
}

//----- (00472E20) --------------------------------------------------------
char __thiscall std::vector<IPAddrMask>::_Buy(std::vector<IPAddrMask> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_446B60(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_446E50(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 8 * _Capacity;
  }
  else
  {
    std::vector<tagShowdownPaticipateInfo>::_Xran(this);
  }
  return 1;
}

//----- (00472EA0) --------------------------------------------------------
XMessageQueue::XTimerElement *__thiscall std::vector<XMessageQueue::XElement>::_Ufill(std::vector<XMessageQueue::XTimerElement> *this, XMessageQueue::XTimerElement *_Ptr, unsigned int _Count, const XMessageQueue::XTimerElement *_Val)
{
  sub_431DF0(_Ptr, _Count, (int)_Val);
  return (XMessageQueue::XTimerElement *)((char *)_Ptr + 8 * _Count);
}

//----- (00472ED0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_472ED0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(a3);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    this,
    a2,
    v4);
  sub_4776F0(this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (00472F10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_476600(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_434510(&a3, &v10, 0);
      sub_475E70(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00472FB0) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_472FB0(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_4776C0(this, v8, a2);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_433240(this, (int)v7, a2);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a1,
    v3,
    v5);
  return a1;
}

//----- (00472FF0) --------------------------------------------------------
void *__thiscall sub_472FF0(_DWORD *this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  CMemory **v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  int v45; // [esp+60h] [ebp+10h]

  if ( sub_477640((int)this) - 1 <= this[2] )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = sub_476820(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40(this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)sub_474590(a4);
    *v9 = v44;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v44;
    if ( a4 == *(_DWORD *)sub_47EB40(this) )
    {
      v12 = (CMemory ***)sub_47EB40(this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_433730(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      v45 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_433730(v45) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(CMemory ***)sub_446FF0((int)v43);
        sub_4766F0(this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_433730(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_433730(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_433740(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      v45 = *(_DWORD *)sub_474590(*v31);
      if ( *(_BYTE *)sub_433730(v45) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (CMemory ***)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(CMemory ***)sub_446FF0((int)v43);
          sub_433740(this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_433730(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_433730(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_4766F0(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_433730(*v19) = 1;
        *(_BYTE *)sub_433730(v45) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_433730(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_433730(*v39) = 1;
  sub_446700(a2, (int)v44);
  return a2;
}
// 473028: variable 'v5' is possibly undefined

//----- (00473430) --------------------------------------------------------
int __thiscall sub_473430(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_472F10(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (004734E0) --------------------------------------------------------
int __cdecl sub_4734E0(int a1)
{
  return a1 + 48;
}

//----- (004734F0) --------------------------------------------------------
int __cdecl sub_4734F0(int a1)
{
  return a1 + 49;
}

//----- (00473500) --------------------------------------------------------
int __cdecl sub_473500(int a1)
{
  int v1; // eax

  v1 = sub_447000(a1);
  return sub_474590(v1);
}

//----- (00473520) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_473520(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(a3);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    this,
    a2,
    v4);
  sub_4768F0(this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (00473560) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473560(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_471490(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_472890(&a3, &v10, 0);
      sub_470CA0(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00473600) --------------------------------------------------------
void *__thiscall sub_473600(_DWORD *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_476960(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00473630) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_473630(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_4768C0(this, v8, a2);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_473600(this, v7, a2);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a1,
    v3,
    v5);
  return a1;
}

//----- (00473670) --------------------------------------------------------
int __stdcall sub_473670(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_4734F0((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_473670(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004736F0) --------------------------------------------------------
void *__thiscall sub_4736F0(int this, void *a2, char a3, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *a4, const std::pair<int const ,KMacro::CShinsu_Ability> *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  CMemory **v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Parg; // [esp+60h] [ebp+10h]

  if ( sub_4768A0(this) - 1 <= *(_DWORD *)(this + 8) )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = std::_Tree<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const,KMacro::CShinsu_Ability>>,0>>::_Buynode(
          (std::_Tree<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> > *)this,
          *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)(this + 4),
          a4,
          *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)(this + 4),
          a5,
          0);
  ++*(_DWORD *)(this + 8);
  if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)(this + 4) )
  {
    v6 = (CMemory ***)sub_478AB0((int *)this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790((_DWORD *)this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40((int *)this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)sub_474590((int)a4);
    *v9 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_418790((_DWORD *)this) )
    {
      v10 = (CMemory ***)sub_418790((_DWORD *)this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90((int)a4);
    *v11 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_47EB40((int *)this) )
    {
      v12 = (CMemory ***)sub_47EB40((int *)this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_4734E0(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_4734E0((int)_Parg) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(CMemory ***)sub_446FF0((int)v43);
        sub_473B30((void *)this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_4734E0(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_4734E0(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_473CE0((void *)this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node **)sub_474590(*v31);
      if ( *(_BYTE *)sub_4734E0((int)_Parg) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (CMemory ***)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(CMemory ***)sub_446FF0((int)v43);
          sub_473CE0((void *)this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_4734E0(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_4734E0(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_473B30((void *)this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_4734E0(*v19) = 1;
        *(_BYTE *)sub_4734E0((int)_Parg) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_4734E0(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0((int *)this);
  *(_BYTE *)sub_4734E0(*v39) = 1;
  sub_446700(a2, (int)v44);
  return a2;
}
// 473728: variable 'v5' is possibly undefined

//----- (00473B30) --------------------------------------------------------
int *__thiscall sub_473B30(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_4734F0(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00473C60) --------------------------------------------------------
int __cdecl sub_473C60(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_4734F0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00473CA0) --------------------------------------------------------
int __cdecl sub_473CA0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_4734F0(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00473CE0) --------------------------------------------------------
int *__thiscall sub_473CE0(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_4734F0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00473E10) --------------------------------------------------------
int __thiscall sub_473E10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_473560(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00473EC0) --------------------------------------------------------
int __cdecl sub_473EC0(int a1)
{
  return a1 + 25;
}

//----- (00473ED0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_473ED0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(a3);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    this,
    a2,
    v4);
  sub_477260(this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (00473F10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_4717E0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_478680(&a3, v10, 0);
      sub_476AA0(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00473FB0) --------------------------------------------------------
void *__thiscall sub_473FB0(_DWORD *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_4772D0(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00473FE0) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_473FE0(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_477230(this, v8, a2);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_473FB0(this, v7, a2);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a1,
    v3,
    v5);
  return a1;
}

//----- (00474020) --------------------------------------------------------
int __stdcall sub_474020(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_473EC0((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_474020(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004740A0) --------------------------------------------------------
void *__thiscall sub_4740A0(int this, void *a2, char a3, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *a4, const std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  CMemory **v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Parg; // [esp+60h] [ebp+10h]

  if ( sub_476A80(this) - 1 <= *(_DWORD *)(this + 8) )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = std::_Tree<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>,0>>::_Buynode(
          (std::_Tree<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> > *)this,
          *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)(this + 4),
          a4,
          *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)(this + 4),
          a5,
          0);
  ++*(_DWORD *)(this + 8);
  if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)(this + 4) )
  {
    v6 = (CMemory ***)sub_478AB0((int *)this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790((_DWORD *)this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40((int *)this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)sub_474590((int)a4);
    *v9 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_418790((_DWORD *)this) )
    {
      v10 = (CMemory ***)sub_418790((_DWORD *)this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90((int)a4);
    *v11 = v44;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_47EB40((int *)this) )
    {
      v12 = (CMemory ***)sub_47EB40((int *)this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_476A70(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_476A70((int)_Parg) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(CMemory ***)sub_446FF0((int)v43);
        sub_477360((void *)this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_476A70(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_476A70(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_477490((void *)this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      _Parg = *(std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node **)sub_474590(*v31);
      if ( *(_BYTE *)sub_476A70((int)_Parg) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (CMemory ***)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(CMemory ***)sub_446FF0((int)v43);
          sub_477490((void *)this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_476A70(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_476A70(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_477360((void *)this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_476A70(*v19) = 1;
        *(_BYTE *)sub_476A70((int)_Parg) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_476A70(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0((int *)this);
  *(_BYTE *)sub_476A70(*v39) = 1;
  sub_446700(a2, (int)v44);
  return a2;
}
// 4740D8: variable 'v5' is possibly undefined

//----- (004744E0) --------------------------------------------------------
int __thiscall sub_4744E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_473F10(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00474590) --------------------------------------------------------
int __cdecl sub_474590(int a1)
{
  return a1;
}

//----- (004745A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4745A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_477660(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_434510(&a3, &v10, 0);
      sub_475E70(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00474640) --------------------------------------------------------
int __thiscall sub_474640(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4745A0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (004746F0) --------------------------------------------------------
int __cdecl sub_4746F0(int a1)
{
  return a1 + 113;
}

//----- (00474700) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_474700(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(a3);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    this,
    a2,
    v4);
  sub_477F50(this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (00474740) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474740(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_471BE0(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_478760(&a3, v10, 0);
      sub_477790(this, v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004747E0) --------------------------------------------------------
void *__thiscall sub_4747E0(_DWORD *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_477FC0(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00474810) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_474810(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_477F20(this, v8, a2);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_4747E0(this, v7, a2);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a1,
    v3,
    v5);
  return a1;
}

//----- (00474850) --------------------------------------------------------
int __stdcall sub_474850(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_4746F0((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_474850(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004748D0) --------------------------------------------------------
void *__thiscall sub_4748D0(_DWORD *this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  CMemory **v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  int v45; // [esp+60h] [ebp+10h]

  if ( sub_477770((int)this) - 1 <= this[2] )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = sub_4782B0(
          (std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *)this[1],
          (std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *)a4,
          (std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *)this[1],
          (const std::pair<int const ,KMacro::BoneInfo> *)a5,
          0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40(this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)sub_474590(a4);
    *v9 = v44;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v44;
    if ( a4 == *(_DWORD *)sub_47EB40(this) )
    {
      v12 = (CMemory ***)sub_47EB40(this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_477760(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      v45 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_477760(v45) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(CMemory ***)sub_446FF0((int)v43);
        sub_478050(this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_477760(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_477760(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_478180(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      v45 = *(_DWORD *)sub_474590(*v31);
      if ( *(_BYTE *)sub_477760(v45) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (CMemory ***)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(CMemory ***)sub_446FF0((int)v43);
          sub_478180(this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_477760(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_477760(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_478050(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_477760(*v19) = 1;
        *(_BYTE *)sub_477760(v45) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_477760(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_477760(*v39) = 1;
  sub_446700(a2, (int)v44);
  return a2;
}
// 474908: variable 'v5' is possibly undefined

//----- (00474D10) --------------------------------------------------------
int __thiscall sub_474D10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_474740(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00474DC0) --------------------------------------------------------
int __cdecl sub_474DC0(int a1)
{
  return a1 + 56;
}

//----- (00474DD0) --------------------------------------------------------
int __cdecl sub_474DD0(int a1)
{
  return a1 + 57;
}

//----- (00474DE0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_474DE0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(a3);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    this,
    a2,
    v4);
  sub_4783E0(this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (00474E20) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474E20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_478350(this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_4787E0(&a3, v10, 0);
      sub_471F00(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00474EC0) --------------------------------------------------------
void *__thiscall sub_474EC0(_DWORD *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_478450(this, (void *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00474EF0) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall sub_474EF0(int *this, std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *a1, int a2)
{
  const std::vector<KMailSystem::CMailinfo>::iterator *v3; // eax
  const std::vector<KMailSystem::CMailinfo>::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_4783B0(this, v8, a2);
  v3 = (const std::vector<KMailSystem::CMailinfo>::iterator *)sub_474EC0(this, v7, a2);
  std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(
    a1,
    v3,
    v5);
  return a1;
}

//----- (00474F30) --------------------------------------------------------
void *__thiscall sub_474F30(_DWORD *this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  int *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  int *v31; // eax
  int *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  std::length_error that; // [esp+8h] [ebp-48h] BYREF
  CMemory **v43; // [esp+48h] [ebp-8h]
  CMemory **v44; // [esp+4Ch] [ebp-4h]
  int v45; // [esp+60h] [ebp+10h]

  if ( sub_478330((int)this) - 1 <= this[2] )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v5);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  v44 = sub_4784E0(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v44;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v44;
    v8 = (CMemory ***)sub_47EB40(this);
    *v8 = v44;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)sub_474590(a4);
    *v9 = v44;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v44;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v44;
    if ( a4 == *(_DWORD *)sub_47EB40(this) )
    {
      v12 = (CMemory ***)sub_47EB40(this);
      *v12 = v44;
    }
  }
  v43 = v44;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v43);
    if ( *(_BYTE *)sub_474DC0(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v43);
    v15 = (int *)sub_446FF0((int)v43);
    v16 = (int *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)sub_474590(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v43);
      v18 = (int *)sub_446FF0(*v17);
      v45 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_474DC0(v45) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v43);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v43 == *v24 )
      {
        v43 = *(CMemory ***)sub_446FF0((int)v43);
        sub_475370(this, (int)v43);
      }
      v25 = (int *)sub_446FF0((int)v43);
      *(_BYTE *)sub_474DC0(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v43);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_474DC0(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v43);
      v29 = (int *)sub_446FF0(*v28);
      sub_475520(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v43);
      v31 = (int *)sub_446FF0(*v30);
      v45 = *(_DWORD *)sub_474590(*v31);
      if ( *(_BYTE *)sub_474DC0(v45) )
      {
        v32 = (int *)sub_446FF0((int)v43);
        v33 = (CMemory ***)sub_474590(*v32);
        if ( v43 == *v33 )
        {
          v43 = *(CMemory ***)sub_446FF0((int)v43);
          sub_475520(this, (int)v43);
        }
        v34 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_474DC0(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v43);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_474DC0(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v43);
        v38 = (int *)sub_446FF0(*v37);
        sub_475370(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v43);
        *(_BYTE *)sub_474DC0(*v19) = 1;
        *(_BYTE *)sub_474DC0(v45) = 1;
        v20 = (int *)sub_446FF0((int)v43);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_474DC0(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v43);
        v43 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_474DC0(*v39) = 1;
  sub_446700(a2, (int)v44);
  return a2;
}
// 474F68: variable 'v5' is possibly undefined

//----- (00475370) --------------------------------------------------------
int *__thiscall sub_475370(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_474DD0(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (004754A0) --------------------------------------------------------
int __cdecl sub_4754A0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_474DD0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (004754E0) --------------------------------------------------------
int __cdecl sub_4754E0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_474DD0(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00475520) --------------------------------------------------------
int *__thiscall sub_475520(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_474DD0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00475650) --------------------------------------------------------
int __thiscall sub_475650(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_474E20(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (00475700) --------------------------------------------------------
void *__stdcall sub_475700(int a1)
{
  return sub_47A3A0((void *)a1);
}

//----- (00475720) --------------------------------------------------------
CMemory ***__thiscall sub_475720(_DWORD *this, int a1, int a2)
{
  int *v3; // eax
  int *v4; // eax
  CMemory ***result; // eax
  int v6; // [esp-4h] [ebp-10h]
  int v8; // [esp+4h] [ebp-8h]
  CMemory **v9; // [esp+8h] [ebp-4h]

  v8 = unknown_libname_7(&a1);
  v6 = a2;
  v3 = (int *)sub_446FF0(v8);
  v9 = sub_478560(v8, *v3, v6);
  sub_4785D0(this, 1u);
  *(_DWORD *)sub_446FF0(v8) = v9;
  v4 = (int *)sub_446FF0((int)v9);
  result = (CMemory ***)sub_474590(*v4);
  *result = v9;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (004757A0) --------------------------------------------------------
_DWORD *__thiscall std::list<std::pair<std::string const,int>>::erase(int this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax
  _DWORD *v4; // esi
  int *v5; // eax
  _DWORD *v6; // esi
  int *v7; // eax
  char v10[4]; // [esp+8h] [ebp-8h] BYREF
  void *v11; // [esp+Ch] [ebp-4h]

  v3 = sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&a3, v10, 0);
  v11 = (void *)unknown_libname_7(v3);
  if ( v11 != *(void **)(this + 4) )
  {
    v4 = (_DWORD *)sub_474590((int)v11);
    v5 = (int *)sub_446FF0((int)v11);
    *(_DWORD *)sub_474590(*v5) = *v4;
    v6 = (_DWORD *)sub_446FF0((int)v11);
    v7 = (int *)sub_474590((int)v11);
    *(_DWORD *)sub_446FF0(*v7) = *v6;
    sub_44CD70((int)v11);
    sub_4338F0(v11, 1);
    --*(_DWORD *)(this + 8);
  }
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00475880) --------------------------------------------------------
void *__thiscall sub_475880(void *this)
{
  sub_478660((int *)this);
  return this;
}

//----- (004758A0) --------------------------------------------------------
void *__thiscall sub_4758A0(void *this)
{
  sub_4786B0(this);
  return this;
}

//----- (004758C0) --------------------------------------------------------
void *__thiscall sub_4758C0(void *this)
{
  sub_4786D0(this);
  return this;
}

//----- (004758E0) --------------------------------------------------------
void *__thiscall sub_4758E0(void *this)
{
  sub_4786F0(this);
  return this;
}

//----- (00475900) --------------------------------------------------------
void *__thiscall sub_475900(void *this)
{
  sub_478740((int *)this);
  return this;
}

//----- (00475920) --------------------------------------------------------
void *__thiscall sub_475920(void *this)
{
  sub_478790(this);
  return this;
}

//----- (00475940) --------------------------------------------------------
void *__thiscall sub_475940(void *this)
{
  sub_4787B0((int *)this);
  return this;
}

//----- (00475960) --------------------------------------------------------
int __thiscall sub_475960(int *this)
{
  return sub_430F90(*this);
}

//----- (00475980) --------------------------------------------------------
void *__thiscall sub_475980(void *this)
{
  sub_478810(this);
  return this;
}

//----- (004759A0) --------------------------------------------------------
void *__thiscall sub_4759A0(void *this)
{
  sub_478830(this);
  return this;
}

//----- (004759C0) --------------------------------------------------------
_DWORD *__thiscall sub_4759C0(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478920(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00475A20) --------------------------------------------------------
_DWORD *__thiscall sub_475A20(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478A30(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00475A80) --------------------------------------------------------
void *__thiscall sub_475A80(int *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_478AD0(this, (const char **)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00475AB0) --------------------------------------------------------
int __thiscall sub_475AB0(int this, const char **a2)
{
  const char **v2; // eax
  const char *v4; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v6 = *(_DWORD *)sub_478AB0((int *)this);
  v7 = *(_DWORD *)(this + 4);
  while ( !*(_BYTE *)sub_431110(v6) )
  {
    v4 = *a2;
    v2 = (const char **)sub_473500(v6);
    if ( StrCmp::operator()((iless *)this, *v2, v4) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)sub_474590(v6);
    }
  }
  return v7;
}

//----- (00475B40) --------------------------------------------------------
_DWORD *__thiscall sub_475B40(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478B60(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00475BA0) --------------------------------------------------------
void __thiscall sub_475BA0(int this, XMessageQueue::XTimerElement *a2, unsigned int a3, int *a4)
{
  int v4; // edx
  unsigned int v5; // esi
  char *v6; // eax
  unsigned int v7; // [esp+4h] [ebp-20h]
  _DWORD *v9; // [esp+Ch] [ebp-18h]
  CMemory **v10; // [esp+10h] [ebp-14h]
  XMessageQueue::XTimerElement *_Ptr; // [esp+14h] [ebp-10h]
  unsigned int v12; // [esp+18h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-Ch]
  int v14[2]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int _Count; // [esp+30h] [ebp+Ch]

  v4 = a4[1];
  v14[0] = *a4;
  v14[1] = v4;
  v12 = std::vector<XMessageQueue::XElement>::capacity((std::vector<XMessageQueue::XTimerElement> *)this);
  if ( a3 )
  {
    v5 = sub_446B60((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)this);
    if ( v5 - std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) >= a3 )
    {
      if ( v12 >= a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) >> 3 >= a3 )
        {
          v9 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E60((void *)this, (int)&v9[-2 * a3], (int)v9, v9);
          sub_47A3F0(a2, &v9[-2 * a3], v9);
          std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(
            a2,
            (XMessageQueue::XTimerElement *)((char *)a2 + 8 * a3),
            (const XMessageQueue::XTimerElement *)v14);
        }
        else
        {
          sub_431E60((void *)this, (int)a2, *(_DWORD *)(this + 8), (char *)a2 + 8 * a3);
          std::vector<XMessageQueue::XElement>::_Ufill(
            (std::vector<XMessageQueue::XTimerElement> *)this,
            *(XMessageQueue::XTimerElement **)(this + 8),
            a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3),
            (const XMessageQueue::XTimerElement *)v14);
          *(_DWORD *)(this + 8) += 8 * a3;
          std::fill<XMessageQueue::XElement *,XMessageQueue::XElement>(
            a2,
            (XMessageQueue::XTimerElement *)(*(_DWORD *)(this + 8) - 8 * a3),
            (const XMessageQueue::XTimerElement *)v14);
        }
      }
      else
      {
        if ( sub_446B60((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)this) - (v12 >> 1) >= v12 )
          v7 = v12 + (v12 >> 1);
        else
          v7 = 0;
        v13 = v7;
        if ( v7 < a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this) )
          v13 = a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
        v10 = sub_446E50(v13);
        v6 = sub_431E60((void *)this, *(_DWORD *)(this + 4), (int)a2, v10);
        _Ptr = std::vector<XMessageQueue::XElement>::_Ufill(
                 (std::vector<XMessageQueue::XTimerElement> *)this,
                 (XMessageQueue::XTimerElement *)v6,
                 a3,
                 (const XMessageQueue::XTimerElement *)v14);
        sub_431E60((void *)this, (int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Count = a3 + std::vector<XMessageQueue::XElement>::size((std::vector<IPAddrMask> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4316C0((void *)this, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3);
        }
        *(_DWORD *)(this + 12) = &v10[2 * v13];
        *(_DWORD *)(this + 8) = &v10[2 * _Count];
        *(_DWORD *)(this + 4) = v10;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (00475E70) --------------------------------------------------------
_DWORD *__thiscall sub_475E70(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  char v52[36]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_433230(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0((std::logic_error *)v52, (const std::string *)v51);
    std::exception::_Raise(v4);
    sub_4111D0((std::logic_error *)v52);
    sub_40F780(v51);
  }
  v56 = (void *)unknown_libname_7(&a3);
  sub_475880(&a3);
  v54 = v56;
  v5 = (int *)sub_474590((int)v56);
  if ( *(_BYTE *)sub_433230(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_433230(*v6) )
    {
      v55 = *(void **)sub_474590((int)v54);
    }
    else
    {
      v54 = (void *)unknown_libname_7(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_433230((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)sub_474590((int)v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)sub_474590((int)v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_479190((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_433AB0((int)v55);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)sub_474590((int)v56);
    *(_DWORD *)sub_474590((int)v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_433230((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)sub_474590((int)v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v56);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v56 )
      {
        v27 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_433730((int)v56);
    v31 = (char *)sub_433730((int)v54);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_433730((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_433730((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_433730((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)sub_474590((int)v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)sub_474590((int)v53);
      if ( !*(_BYTE *)sub_433730((int)v54) )
      {
        *(_BYTE *)sub_433730((int)v54) = 1;
        *(_BYTE *)sub_433730((int)v53) = 0;
        sub_433740(this, (int)v53);
        v54 = *(void **)sub_474590((int)v53);
      }
      if ( !*(_BYTE *)sub_433230((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_433730(*v40) != 1 || (v41 = (int *)sub_474590((int)v54), *(_BYTE *)sub_433730(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v54);
          if ( *(_BYTE *)sub_433730(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_433730(*v43) = 1;
            *(_BYTE *)sub_433730((int)v54) = 0;
            sub_4766F0(this, (int)v54);
            v54 = *(void **)sub_474590((int)v53);
          }
          v44 = (_BYTE *)sub_433730((int)v53);
          *(_BYTE *)sub_433730((int)v54) = *v44;
          *(_BYTE *)sub_433730((int)v53) = 1;
          v45 = (int *)sub_474590((int)v54);
          *(_BYTE *)sub_433730(*v45) = 1;
          sub_433740(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_433730((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_433730((int)v54) )
    {
      *(_BYTE *)sub_433730((int)v54) = 1;
      *(_BYTE *)sub_433730((int)v53) = 0;
      sub_4766F0(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_433230((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v54);
    if ( *(_BYTE *)sub_433730(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_433730(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_433730(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v54);
        *(_BYTE *)sub_433730(*v37) = 1;
        *(_BYTE *)sub_433730((int)v54) = 0;
        sub_433740(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_433730((int)v53);
      *(_BYTE *)sub_433730((int)v54) = *v38;
      *(_BYTE *)sub_433730((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_433730(*v39) = 1;
      sub_4766F0(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70((int)v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00476600) --------------------------------------------------------
_DWORD *__thiscall sub_476600(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478C10(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (00476660) --------------------------------------------------------
int __thiscall sub_476660(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_433230(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (004766F0) --------------------------------------------------------
int *__thiscall sub_4766F0(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_433230(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00476820) --------------------------------------------------------
CMemory **__stdcall sub_476820(int a1, int a2, int a3, int a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_4793B0(1);
  v6 = operator new(0x30u, v7);
  if ( v6 )
    sub_479E10(v6, a1, a2, a3, (const void *)a4, a5);
  return v7;
}

//----- (004768A0) --------------------------------------------------------
unsigned int __thiscall sub_4768A0(int this)
{
  return std::allocator<LayerInfo>::max_size((std::allocator<KGuildSystem::CGuildMember> *)(this + 3));
}

//----- (004768C0) --------------------------------------------------------
void *__thiscall sub_4768C0(int *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_478C90(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (004768F0) --------------------------------------------------------
_DWORD *__thiscall sub_4768F0(_DWORD *this)
{
  _DWORD *result; // eax

  this[1] = sub_478D20();
  *(_BYTE *)sub_4734F0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00476960) --------------------------------------------------------
int __thiscall sub_476960(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4734F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (004769F0) --------------------------------------------------------
CMemory **__thiscall std::_Tree<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const,KMacro::CShinsu_Ability>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::CShinsu_Ability,std::less<int>,std::allocator<std::pair<int const ,KMacro::CShinsu_Ability> >,0> >::_Node *_Rarg, const std::pair<int const ,KMacro::CShinsu_Ability> *_Val, char _Carg)
{
  _DWORD *v7; // [esp+8h] [ebp-8h]
  CMemory **v8; // [esp+Ch] [ebp-4h]

  v8 = sub_478E70(1);
  v7 = operator new(0x34u, v8);
  if ( v7 )
    sub_479E60(v7, (int)_Larg, (int)_Parg, (int)_Rarg, _Val, _Carg);
  return v8;
}

//----- (00476A70) --------------------------------------------------------
int __cdecl sub_476A70(int a1)
{
  return a1 + 24;
}

//----- (00476A80) --------------------------------------------------------
unsigned int __thiscall sub_476A80(int this)
{
  return std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>::max_size((std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *)(this + 3));
}

//----- (00476AA0) --------------------------------------------------------
_DWORD *__thiscall sub_476AA0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  char v52[36]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_473EC0(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0((std::logic_error *)v52, (const std::string *)v51);
    std::exception::_Raise(v4);
    sub_4111D0((std::logic_error *)v52);
    sub_40F780(v51);
  }
  v56 = (void *)unknown_libname_7(&a3);
  sub_4798D0(&a3);
  v54 = v56;
  v5 = (int *)sub_474590((int)v56);
  if ( *(_BYTE *)sub_473EC0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_473EC0(*v6) )
    {
      v55 = *(void **)sub_474590((int)v54);
    }
    else
    {
      v54 = (void *)unknown_libname_7(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_473EC0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)sub_474590((int)v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)sub_474590((int)v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_473EC0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_478ED0((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_473EC0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_478E90((int)v55);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)sub_474590((int)v56);
    *(_DWORD *)sub_474590((int)v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_473EC0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)sub_474590((int)v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v56);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v56 )
      {
        v27 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_476A70((int)v56);
    v31 = (char *)sub_476A70((int)v54);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_476A70((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_476A70((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_476A70((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)sub_474590((int)v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)sub_474590((int)v53);
      if ( !*(_BYTE *)sub_476A70((int)v54) )
      {
        *(_BYTE *)sub_476A70((int)v54) = 1;
        *(_BYTE *)sub_476A70((int)v53) = 0;
        sub_477490(this, (int)v53);
        v54 = *(void **)sub_474590((int)v53);
      }
      if ( !*(_BYTE *)sub_473EC0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_476A70(*v40) != 1 || (v41 = (int *)sub_474590((int)v54), *(_BYTE *)sub_476A70(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v54);
          if ( *(_BYTE *)sub_476A70(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_476A70(*v43) = 1;
            *(_BYTE *)sub_476A70((int)v54) = 0;
            sub_477360(this, (int)v54);
            v54 = *(void **)sub_474590((int)v53);
          }
          v44 = (_BYTE *)sub_476A70((int)v53);
          *(_BYTE *)sub_476A70((int)v54) = *v44;
          *(_BYTE *)sub_476A70((int)v53) = 1;
          v45 = (int *)sub_474590((int)v54);
          *(_BYTE *)sub_476A70(*v45) = 1;
          sub_477490(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_476A70((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_476A70((int)v54) )
    {
      *(_BYTE *)sub_476A70((int)v54) = 1;
      *(_BYTE *)sub_476A70((int)v53) = 0;
      sub_477360(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_473EC0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v54);
    if ( *(_BYTE *)sub_476A70(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_476A70(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_476A70(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v54);
        *(_BYTE *)sub_476A70(*v37) = 1;
        *(_BYTE *)sub_476A70((int)v54) = 0;
        sub_477490(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_476A70((int)v53);
      *(_BYTE *)sub_476A70((int)v54) = *v38;
      *(_BYTE *)sub_476A70((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_476A70(*v39) = 1;
      sub_477360(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70((int)v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00477230) --------------------------------------------------------
void *__thiscall sub_477230(int *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_478F10(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00477260) --------------------------------------------------------
_DWORD *__thiscall sub_477260(_DWORD *this)
{
  _DWORD *result; // eax

  this[1] = sub_478FA0();
  *(_BYTE *)sub_473EC0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (004772D0) --------------------------------------------------------
int __thiscall sub_4772D0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_473EC0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (00477360) --------------------------------------------------------
int *__thiscall sub_477360(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_473EC0(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00477490) --------------------------------------------------------
int *__thiscall sub_477490(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_473EC0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (004775C0) --------------------------------------------------------
CMemory **__thiscall std::_Tree<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>,0>>::_Buynode(std::_Tree<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<unsigned int,TriggerSystem::CTrigger::ACTION_INFO,std::less<unsigned int>,std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> >,0> >::_Node *_Rarg, const std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> *_Val, char _Carg)
{
  std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *v7; // [esp+8h] [ebp-8h]
  CMemory **v8; // [esp+Ch] [ebp-4h]

  v8 = sub_4790F0(1);
  v7 = (std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *)operator new(0x1Cu, v8);
  if ( v7 )
    std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const,CScriptToCookBoard::tBaseTable>>,0>>::_Node::_Node(
      v7,
      _Larg,
      _Parg,
      _Rarg,
      _Val,
      _Carg);
  return v8;
}

//----- (00477640) --------------------------------------------------------
unsigned int __thiscall sub_477640(int this)
{
  return std::allocator<View_ARMY_ADD_RAIDER_TEAM::RAIDERS_MASTER_INFO>::max_size((std::allocator<std::pair<unsigned long const ,std::string > > *)(this + 3));
}

//----- (00477660) --------------------------------------------------------
_DWORD *__thiscall sub_477660(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_479110(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (004776C0) --------------------------------------------------------
void *__thiscall sub_4776C0(int *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_4791D0(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (004776F0) --------------------------------------------------------
_DWORD *__thiscall sub_4776F0(_DWORD *this)
{
  _DWORD *result; // eax

  this[1] = sub_479260();
  *(_BYTE *)sub_433230(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00477760) --------------------------------------------------------
int __cdecl sub_477760(int a1)
{
  return a1 + 112;
}

//----- (00477770) --------------------------------------------------------
unsigned int __thiscall sub_477770(int this)
{
  return std::allocator<KMailSystem::CMailinfo>::max_size((std::allocator<KMailSystem::CMailinfo> *)(this + 3));
}

//----- (00477790) --------------------------------------------------------
_DWORD *__thiscall sub_477790(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  std::logic_error *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  int *v25; // eax
  void **v26; // eax
  int *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  char v52[36]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_7(&a3);
  if ( *(_BYTE *)sub_4746F0(v3) )
  {
    std::string::string((std::vector<IPAddrMask> *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0((std::logic_error *)v52, (const std::string *)v51);
    std::exception::_Raise(v4);
    sub_4111D0((std::logic_error *)v52);
    sub_40F780(v51);
  }
  v56 = (void *)unknown_libname_7(&a3);
  sub_479B70(&a3);
  v54 = v56;
  v5 = (int *)sub_474590((int)v56);
  if ( *(_BYTE *)sub_4746F0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_4746F0(*v6) )
    {
      v55 = *(void **)sub_474590((int)v54);
    }
    else
    {
      v54 = (void *)unknown_libname_7(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_4746F0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)sub_474590((int)v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)sub_474590((int)v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_4746F0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_479410((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)sub_47EB40(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_4746F0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_4793D0((int)v55);
      *(_DWORD *)sub_47EB40(this) = v48;
    }
  }
  else
  {
    v14 = (int *)sub_474590((int)v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)sub_474590((int)v56);
    *(_DWORD *)sub_474590((int)v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_4746F0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)sub_474590((int)v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (int *)sub_446FF0((int)v56);
      v26 = (void **)sub_474590(*v25);
      if ( *v26 == v56 )
      {
        v27 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_474590(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_477760((int)v56);
    v31 = (char *)sub_477760((int)v54);
    std::swap<unsigned char>(v31, v47);
  }
  if ( *(_BYTE *)sub_477760((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_477760((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_477760((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)sub_474590((int)v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)sub_474590((int)v53);
      if ( !*(_BYTE *)sub_477760((int)v54) )
      {
        *(_BYTE *)sub_477760((int)v54) = 1;
        *(_BYTE *)sub_477760((int)v53) = 0;
        sub_478180(this, (int)v53);
        v54 = *(void **)sub_474590((int)v53);
      }
      if ( !*(_BYTE *)sub_4746F0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_477760(*v40) != 1 || (v41 = (int *)sub_474590((int)v54), *(_BYTE *)sub_477760(*v41) != 1) )
        {
          v42 = (int *)sub_474590((int)v54);
          if ( *(_BYTE *)sub_477760(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_477760(*v43) = 1;
            *(_BYTE *)sub_477760((int)v54) = 0;
            sub_478050(this, (int)v54);
            v54 = *(void **)sub_474590((int)v53);
          }
          v44 = (_BYTE *)sub_477760((int)v53);
          *(_BYTE *)sub_477760((int)v54) = *v44;
          *(_BYTE *)sub_477760((int)v53) = 1;
          v45 = (int *)sub_474590((int)v54);
          *(_BYTE *)sub_477760(*v45) = 1;
          sub_478180(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_477760((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_477760((int)v54) )
    {
      *(_BYTE *)sub_477760((int)v54) = 1;
      *(_BYTE *)sub_477760((int)v53) = 0;
      sub_478050(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_4746F0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)sub_474590((int)v54);
    if ( *(_BYTE *)sub_477760(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_477760(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_477760(*v36) == 1 )
      {
        v37 = (int *)sub_474590((int)v54);
        *(_BYTE *)sub_477760(*v37) = 1;
        *(_BYTE *)sub_477760((int)v54) = 0;
        sub_478180(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_477760((int)v53);
      *(_BYTE *)sub_477760((int)v54) = *v38;
      *(_BYTE *)sub_477760((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_477760(*v39) = 1;
      sub_478050(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70((int)v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00477F20) --------------------------------------------------------
void *__thiscall sub_477F20(int *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_479450(this, (_DWORD *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (00477F50) --------------------------------------------------------
_DWORD *__thiscall sub_477F50(_DWORD *this)
{
  _DWORD *result; // eax

  this[1] = sub_4794E0();
  *(_BYTE *)sub_4746F0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00477FC0) --------------------------------------------------------
int __thiscall sub_477FC0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4746F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (00478050) --------------------------------------------------------
int *__thiscall sub_478050(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)sub_474590(v11);
  if ( !*(_BYTE *)sub_4746F0(*v3) )
  {
    v4 = (int *)sub_474590(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (00478180) --------------------------------------------------------
int *__thiscall sub_478180(void *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_474590(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_4746F0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_474590(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}

//----- (004782B0) --------------------------------------------------------
CMemory **__stdcall sub_4782B0(std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *a1, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *a2, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *a3, const std::pair<int const ,KMacro::BoneInfo> *a4, char a5)
{
  std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_479630(1);
  v6 = (std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *)operator new(0x74u, v7);
  if ( v6 )
    std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const,KMacro::BoneInfo>>,0>>::_Node::_Node(
      v6,
      a1,
      a2,
      a3,
      a4,
      a5);
  return v7;
}

//----- (00478330) --------------------------------------------------------
unsigned int __thiscall sub_478330(int this)
{
  return std::allocator<MixingForItemList>::max_size((std::allocator<MixingForItemList> *)(this + 3));
}

//----- (00478350) --------------------------------------------------------
_DWORD *__thiscall sub_478350(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_479650(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (004783B0) --------------------------------------------------------
void *__thiscall sub_4783B0(int *this, void *a1, int a2)
{
  int v3; // eax

  v3 = sub_4796D0(this, (void *)a2);
  sub_446700(a1, v3);
  return a1;
}

//----- (004783E0) --------------------------------------------------------
_DWORD *__thiscall sub_4783E0(_DWORD *this)
{
  _DWORD *result; // eax

  this[1] = sub_479760();
  *(_BYTE *)sub_474DD0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00478450) --------------------------------------------------------
int __thiscall sub_478450(_DWORD *this, void *a2)
{
  void *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_474DD0(v5) )
  {
    v2 = (void *)sub_473500(v5);
    if ( sub_471ED0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (004784E0) --------------------------------------------------------
CMemory **__stdcall sub_4784E0(int a1, int a2, int a3, int a4, char a5)
{
  char *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_478640(1);
  v6 = (char *)operator new(0x3Cu, v7);
  if ( v6 )
    sub_479F60(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00478560) --------------------------------------------------------
CMemory **__stdcall sub_478560(int a1, int a2, int a3)
{
  _DWORD *v4; // [esp+8h] [ebp-8h]
  CMemory **v5; // [esp+Ch] [ebp-4h]

  v5 = sub_478640(1);
  v4 = operator new(0x3Cu, v5);
  if ( v4 )
    sub_479FB0(v4, a1, a2, (const void *)a3);
  return v5;
}

//----- (004785D0) --------------------------------------------------------
_DWORD *__thiscall sub_4785D0(_DWORD *this, unsigned int a2)
{
  void *v2; // eax
  _DWORD *result; // eax
  std::length_error that; // [esp+4h] [ebp-40h] BYREF

  if ( sub_4798B0((char *)this) - this[2] < a2 )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "list<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v2);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  result = this;
  this[2] += a2;
  return result;
}
// 478607: variable 'v2' is possibly undefined

//----- (00478640) --------------------------------------------------------
CMemory **__stdcall sub_478640(int a1)
{
  return sub_47A4B0(a1);
}

//----- (00478660) --------------------------------------------------------
int *__thiscall sub_478660(int *this)
{
  sub_434540(this);
  return this;
}

//----- (00478680) --------------------------------------------------------
_DWORD *__thiscall sub_478680(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_4798D0(this);
  *a2 = v4;
  return a2;
}

//----- (004786B0) --------------------------------------------------------
void *__thiscall sub_4786B0(void *this)
{
  sub_4798F0((int *)this);
  return this;
}

//----- (004786D0) --------------------------------------------------------
void *__thiscall sub_4786D0(void *this)
{
  sub_479AB0((int *)this);
  return this;
}

//----- (004786F0) --------------------------------------------------------
void *__thiscall sub_4786F0(void *this)
{
  sub_4799D0((int *)this);
  return this;
}

//----- (00478710) --------------------------------------------------------
_DWORD *__thiscall sub_478710(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a2 = *(_DWORD *)std::vector<XMessageQueue::XElement>::iterator::operator+=(
                     (std::vector<XMessageQueue::XTimerElement>::iterator *)&v4,
                     a3);
  return a2;
}

//----- (00478740) --------------------------------------------------------
int *__thiscall sub_478740(int *this)
{
  sub_433950(this);
  return this;
}

//----- (00478760) --------------------------------------------------------
_DWORD *__thiscall sub_478760(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_479B70(this);
  *a2 = v4;
  return a2;
}

//----- (00478790) --------------------------------------------------------
void *__thiscall sub_478790(void *this)
{
  sub_479B90((int *)this);
  return this;
}

//----- (004787B0) --------------------------------------------------------
int *__thiscall sub_4787B0(int *this)
{
  *this = *(_DWORD *)sub_446FF0(*this);
  return this;
}

//----- (004787E0) --------------------------------------------------------
_DWORD *__thiscall sub_4787E0(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_475980(this);
  *a2 = v4;
  return a2;
}

//----- (00478810) --------------------------------------------------------
void *__thiscall sub_478810(void *this)
{
  sub_479D50((int *)this);
  return this;
}

//----- (00478830) --------------------------------------------------------
void *__thiscall sub_478830(void *this)
{
  sub_479C70((int *)this);
  return this;
}

//----- (00478850) --------------------------------------------------------
void *__thiscall std::list<std::pair<std::string const,int>>::clear(std::list<std::pair<std::string const ,int>> *this)
{
  void *result; // eax
  void *v3; // [esp+4h] [ebp-8h]
  void *v4; // [esp+8h] [ebp-4h]

  v4 = *(void **)sub_474590(*((_DWORD *)this + 1));
  *(_DWORD *)sub_474590(*((_DWORD *)this + 1)) = *((_DWORD *)this + 1);
  *(_DWORD *)sub_446FF0(*((_DWORD *)this + 1)) = *((_DWORD *)this + 1);
  *((_DWORD *)this + 2) = 0;
  while ( 1 )
  {
    result = v4;
    if ( v4 == *((void **)this + 1) )
      break;
    v3 = *(void **)sub_474590((int)v4);
    sub_44CD70((int)v4);
    sub_4338F0(v4, 1);
    v4 = v3;
  }
  return result;
}

//----- (004788F0) --------------------------------------------------------
std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *__thiscall std::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>::pair<std::vector<KScenario3System::CPersonList>::iterator,std::vector<KScenario3System::CPersonList>::iterator>(std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *this, const std::vector<KMailSystem::CMailinfo>::iterator *_Val1, const std::vector<KMailSystem::CMailinfo>::iterator *_Val2)
{
  *(_DWORD *)this = *(_DWORD *)_Val1;
  *((_DWORD *)this + 1) = *(_DWORD *)_Val2;
  return this;
}

//----- (00478920) --------------------------------------------------------
int __stdcall sub_478920(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_478920(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004789A0) --------------------------------------------------------
int __thiscall sub_4789A0(_DWORD *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478A30) --------------------------------------------------------
int __stdcall sub_478A30(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_478A30(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00478AB0) --------------------------------------------------------
int __thiscall sub_478AB0(int *this)
{
  return sub_446FF0(this[1]);
}

//----- (00478AD0) --------------------------------------------------------
int __thiscall sub_478AD0(int *this, const char **a2)
{
  const char **v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (const char **)sub_473500(v5);
    if ( StrCmp::operator()((iless *)this, *a2, *v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478B60) --------------------------------------------------------
int __stdcall sub_478B60(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_478B60(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00478BE0) --------------------------------------------------------
unsigned int __thiscall std::allocator<std::pair<char const * const,int>>::max_size(std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *this)
{
  return 0x1FFFFFFF;
}

//----- (00478C10) --------------------------------------------------------
int __stdcall sub_478C10(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_433230((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_478C10(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00478C90) --------------------------------------------------------
int __thiscall sub_478C90(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4734F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478D20) --------------------------------------------------------
CMemory **sub_478D20()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_478E70(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)sub_474590((int)v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_4734E0((int)v7) = 1;
  *(_BYTE *)sub_4734F0((int)v7) = 0;
  return v7;
}

//----- (00478E40) --------------------------------------------------------
unsigned int __thiscall std::allocator<LayerInfo>::max_size(std::allocator<KGuildSystem::CGuildMember> *this)
{
  return 119304647;
}

//----- (00478E70) --------------------------------------------------------
CMemory **__stdcall sub_478E70(int a1)
{
  return sub_47A450(a1);
}

//----- (00478E90) --------------------------------------------------------
int __cdecl sub_478E90(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_473EC0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00478ED0) --------------------------------------------------------
int __cdecl sub_478ED0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_473EC0(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00478F10) --------------------------------------------------------
int __thiscall sub_478F10(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_473EC0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478FA0) --------------------------------------------------------
CMemory **sub_478FA0()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_4790F0(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)sub_474590((int)v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_476A70((int)v7) = 1;
  *(_BYTE *)sub_473EC0((int)v7) = 0;
  return v7;
}

//----- (004790C0) --------------------------------------------------------
unsigned int __thiscall std::allocator<std::pair<unsigned int const,TriggerSystem::CTrigger::ACTION_INFO>>::max_size(std::allocator<std::pair<unsigned int const ,TriggerSystem::CTrigger::ACTION_INFO> > *this)
{
  return 357913941;
}

//----- (004790F0) --------------------------------------------------------
CMemory **__stdcall sub_4790F0(int a1)
{
  return sub_47A470(a1);
}

//----- (00479110) --------------------------------------------------------
int __stdcall sub_479110(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_433230((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_479110(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00479190) --------------------------------------------------------
int __cdecl sub_479190(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_433230(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (004791D0) --------------------------------------------------------
int __thiscall sub_4791D0(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_433230(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00479260) --------------------------------------------------------
CMemory **sub_479260()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_4793B0(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)sub_474590((int)v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_433730((int)v7) = 1;
  *(_BYTE *)sub_433230((int)v7) = 0;
  return v7;
}

//----- (00479380) --------------------------------------------------------
unsigned int __thiscall std::allocator<View_ARMY_ADD_RAIDER_TEAM::RAIDERS_MASTER_INFO>::max_size(std::allocator<std::pair<unsigned long const ,std::string > > *this)
{
  return 0x7FFFFFF;
}

//----- (004793B0) --------------------------------------------------------
CMemory **__stdcall sub_4793B0(int a1)
{
  return sub_433B00(a1);
}

//----- (004793D0) --------------------------------------------------------
int __cdecl sub_4793D0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_4746F0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00479410) --------------------------------------------------------
int __cdecl sub_479410(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_474590(a1);
    if ( *(_BYTE *)sub_4746F0(*v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00479450) --------------------------------------------------------
int __thiscall sub_479450(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4746F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (004794E0) --------------------------------------------------------
CMemory **sub_4794E0()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_479630(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)sub_474590((int)v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_477760((int)v7) = 1;
  *(_BYTE *)sub_4746F0((int)v7) = 0;
  return v7;
}

//----- (00479600) --------------------------------------------------------
unsigned int __thiscall std::allocator<KMailSystem::CMailinfo>::max_size(std::allocator<KMailSystem::CMailinfo> *this)
{
  return 42949672;
}

//----- (00479630) --------------------------------------------------------
CMemory **__stdcall sub_479630(int a1)
{
  return sub_47A490(a1);
}

//----- (00479650) --------------------------------------------------------
int __stdcall sub_479650(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_474DD0((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_479650(*v2);
    i = *(void **)sub_474590((int)i);
    sub_475700((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (004796D0) --------------------------------------------------------
int __thiscall sub_4796D0(int *this, void *a2)
{
  void *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_474DD0(v5) )
  {
    v2 = (void *)sub_473500(v5);
    if ( sub_471ED0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00479760) --------------------------------------------------------
CMemory **sub_479760()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_478640(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)sub_474590((int)v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_474DC0((int)v7) = 1;
  *(_BYTE *)sub_474DD0((int)v7) = 0;
  return v7;
}

//----- (00479880) --------------------------------------------------------
unsigned int __thiscall std::allocator<MixingForItemList>::max_size(std::allocator<MixingForItemList> *this)
{
  return 97612893;
}

//----- (004798B0) --------------------------------------------------------
int __thiscall sub_4798B0(char *this)
{
  return sub_47A030();
}

//----- (004798D0) --------------------------------------------------------
void *__thiscall sub_4798D0(void *this)
{
  sub_47A060(this);
  return this;
}

//----- (004798F0) --------------------------------------------------------
int __thiscall sub_4798F0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_473EC0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*this);
    if ( *(_BYTE *)sub_473EC0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_473EC0(v5) || *this != *(_DWORD *)sub_474590(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_473EC0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*this);
      result = sub_478E90(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (004799D0) --------------------------------------------------------
int __thiscall sub_4799D0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_4734F0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*this);
    if ( *(_BYTE *)sub_4734F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_4734F0(v5) || *this != *(_DWORD *)sub_474590(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_4734F0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*this);
      result = sub_473C60(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479AB0) --------------------------------------------------------
int __thiscall sub_479AB0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_4734F0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_4734F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_4734F0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_473CA0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479B70) --------------------------------------------------------
void *__thiscall sub_479B70(void *this)
{
  sub_47A080(this);
  return this;
}

//----- (00479B90) --------------------------------------------------------
int __thiscall sub_479B90(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_4746F0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*this);
    if ( *(_BYTE *)sub_4746F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_4746F0(v5) || *this != *(_DWORD *)sub_474590(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_4746F0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*this);
      result = sub_4793D0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479C70) --------------------------------------------------------
int __thiscall sub_479C70(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_474DD0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)sub_474590(*this);
    if ( *(_BYTE *)sub_474DD0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_474DD0(v5) || *this != *(_DWORD *)sub_474590(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_474DD0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)sub_474590(*this);
      result = sub_4754A0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479D50) --------------------------------------------------------
int __thiscall sub_479D50(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_474DD0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_474DD0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_474DD0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_4754E0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479E10) --------------------------------------------------------
_DWORD *__thiscall sub_479E10(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6)
{
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  qmemcpy(this + 3, a5, 0x20u);
  *((_BYTE *)this + 44) = a6;
  *((_BYTE *)this + 45) = 0;
  return this;
}

//----- (00479E60) --------------------------------------------------------
_DWORD *__thiscall sub_479E60(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6)
{
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  qmemcpy(this + 3, a5, 0x24u);
  *((_BYTE *)this + 48) = a6;
  *((_BYTE *)this + 49) = 0;
  return this;
}

//----- (00479EB0) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const,CScriptToCookBoard::tBaseTable>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CScriptToCookBoard::tBaseTable,std::less<int>,std::allocator<std::pair<int const ,CScriptToCookBoard::tBaseTable> >,0> >::_Node *_Rarg, const std::pair<int const ,CScriptToCookBoard::tBaseTable> *_Val, char _Carg)
{
  _DWORD *v6; // ecx

  *(_DWORD *)this = _Larg;
  *((_DWORD *)this + 1) = _Parg;
  *((_DWORD *)this + 2) = _Rarg;
  v6 = (_DWORD *)((char *)this + 12);
  *v6 = *(_DWORD *)_Val;
  v6[1] = *((_DWORD *)_Val + 1);
  v6[2] = *((_DWORD *)_Val + 2);
  *((_BYTE *)this + 24) = _Carg;
  *((_BYTE *)this + 25) = 0;
  return this;
}

//----- (00479F10) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const,KMacro::BoneInfo>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,KMacro::BoneInfo,std::less<int>,std::allocator<std::pair<int const ,KMacro::BoneInfo> >,0> >::_Node *_Rarg, const std::pair<int const ,KMacro::BoneInfo> *_Val, char _Carg)
{
  *(_DWORD *)this = _Larg;
  *((_DWORD *)this + 1) = _Parg;
  *((_DWORD *)this + 2) = _Rarg;
  qmemcpy((char *)this + 12, _Val, 0x64u);
  *((_BYTE *)this + 112) = _Carg;
  *((_BYTE *)this + 113) = 0;
  return this;
}

//----- (00479F60) --------------------------------------------------------
char *__thiscall sub_479F60(char *this, int a2, int a3, int a4, int a5, char a6)
{
  *(_DWORD *)this = a2;
  *((_DWORD *)this + 1) = a3;
  *((_DWORD *)this + 2) = a4;
  CQuest::~CQuest((CQuest *)(this + 12), a5);
  this[56] = a6;
  this[57] = 0;
  return this;
}

//----- (00479FB0) --------------------------------------------------------
_DWORD *__thiscall sub_479FB0(_DWORD *this, int a2, int a3, const void *a4)
{
  *this = a2;
  this[1] = a3;
  qmemcpy(this + 2, a4, 0x33u);
  return this;
}

//----- (00479FF0) --------------------------------------------------------
CQuest *__thiscall CQuest::~CQuest(CQuest *this, int a2)
{
  std::string::string((std::string *)this, (const std::string *)a2);
  this->m_nId = *(_DWORD *)(a2 + 28);
  this->m_dwKey = *(_DWORD *)(a2 + 32);
  this->m_pClone = *(CQuest **)(a2 + 36);
  this->m_bLinked = *(_DWORD *)(a2 + 40);
  return this;
}

//----- (0047A030) --------------------------------------------------------
int sub_47A030()
{
  return 84215045;
}

//----- (0047A060) --------------------------------------------------------
void *__thiscall sub_47A060(void *this)
{
  sub_47A0A0((int *)this);
  return this;
}

//----- (0047A080) --------------------------------------------------------
void *__thiscall sub_47A080(void *this)
{
  sub_47A160((int *)this);
  return this;
}

//----- (0047A0A0) --------------------------------------------------------
int __thiscall sub_47A0A0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_473EC0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_473EC0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_473EC0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_478ED0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0047A160) --------------------------------------------------------
int __thiscall sub_47A160(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_4746F0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_4746F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_4746F0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_479410(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0047A220) --------------------------------------------------------
_DWORD *__cdecl sub_47A220(_DWORD *a1, _DWORD *a2)
{
  *a2 = *a1;
  a2[1] = a1[1];
  return a1 + 2;
}

//----- (0047A240) --------------------------------------------------------
_DWORD *__cdecl GetNumeric<int>(_DWORD *a1, _DWORD *a2)
{
  *a2 = *a1;
  return a1 + 1;
}

//----- (0047A260) --------------------------------------------------------
int __cdecl sub_47A260(int a1, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14)
{
  qmemcpy((void *)a1, &a2, 0x30u);
  *(_WORD *)(a1 + 48) = a14;
  *(_BYTE *)(a1 + 50) = BYTE2(a14);
  return a1 + 51;
}

//----- (0047A280) --------------------------------------------------------
BOOL __cdecl std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, int a2, _DWORD *a3)
{
  char v4; // [esp+3h] [ebp-1h] BYREF

  unknown_libname_11(&v4);
  return std::_Distance2<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
           a1,
           a2,
           a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A2B0) --------------------------------------------------------
BOOL __cdecl sub_47A2B0(int a1, int a2, int a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_11(&v5);
  return sub_47A520(a1, a2, (_DWORD *)a3);
}
// 47A2B3: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A2E0) --------------------------------------------------------
BOOL __cdecl sub_47A2E0(int a1, int a2, int a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_11(&v5);
  return sub_47A560(a1, a2, (_DWORD *)a3);
}
// 47A2E3: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A310) --------------------------------------------------------
BOOL __cdecl sub_47A310(int a1, int a2, int a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_11(&v5);
  return sub_47A5A0(a1, a2, (_DWORD *)a3);
}
// 47A313: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A340) --------------------------------------------------------
BOOL __cdecl sub_47A340(int a1, int a2, int a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_11(&v5);
  return sub_47A5E0(a1, a2, (_DWORD *)a3);
}
// 47A343: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A370) --------------------------------------------------------
BOOL __cdecl sub_47A370(int a1, int a2, int a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_11(&v5);
  return sub_47A620(a1, a2, (_DWORD *)a3);
}
// 47A373: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A3A0) --------------------------------------------------------
void *__cdecl sub_47A3A0(void *a1)
{
  return sub_47A4D0(a1, 0);
}

//----- (0047A3B0) --------------------------------------------------------
int __cdecl sub_47A3B0(int a1, int a2)
{
  unknown_libname_6(&a1, &a2);
  return std::_Destroy_range<IPAddrMask>(a1, a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047A3F0) --------------------------------------------------------
_DWORD *__cdecl sub_47A3F0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  unknown_libname_6(&a1, &a3);
  return std::_Copy_backward_opt<XMessageQueue::XTimerElement *,XMessageQueue::XTimerElement *>(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047A430) --------------------------------------------------------
CMemory **__cdecl sub_47A430(int a1)
{
  return operator new(8 * a1);
}

//----- (0047A450) --------------------------------------------------------
CMemory **__cdecl sub_47A450(int a1)
{
  return operator new(52 * a1);
}

//----- (0047A470) --------------------------------------------------------
CMemory **__cdecl sub_47A470(int a1)
{
  return operator new(28 * a1);
}

//----- (0047A490) --------------------------------------------------------
CMemory **__cdecl sub_47A490(int a1)
{
  return operator new(116 * a1);
}

//----- (0047A4B0) --------------------------------------------------------
CMemory **__cdecl sub_47A4B0(int a1)
{
  return operator new(60 * a1);
}

//----- (0047A4D0) --------------------------------------------------------
void *__thiscall sub_47A4D0(void *this, char a2)
{
  sub_47A500(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 47A500: using guessed type int __thiscall sub_47A500(_DWORD);

//----- (0047A520) --------------------------------------------------------
BOOL __cdecl sub_47A520(int a1, int a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_4758C0(&a1);
  }
  return result;
}

//----- (0047A560) --------------------------------------------------------
BOOL __cdecl sub_47A560(int a1, int a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_4798D0(&a1);
  }
  return result;
}

//----- (0047A5A0) --------------------------------------------------------
BOOL __cdecl sub_47A5A0(int a1, int a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_475880(&a1);
  }
  return result;
}

//----- (0047A5E0) --------------------------------------------------------
BOOL __cdecl sub_47A5E0(int a1, int a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_479B70(&a1);
  }
  return result;
}

//----- (0047A620) --------------------------------------------------------
BOOL __cdecl sub_47A620(int a1, int a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_475980(&a1);
  }
  return result;
}

//----- (0047A660) --------------------------------------------------------
int __cdecl std::_Destroy_range<IPAddrMask>(int a1, int a2)
{
  int result; // eax

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (0047A690) --------------------------------------------------------
char *__cdecl sub_47A690(int a1, int a2, void *a3)
{
  unknown_libname_6(&a1, &a3);
  return std::_Uninit_copy<XMessageQueue::XTimerElement *,XMessageQueue::XTimerElement *,std::allocator<XMessageQueue::XTimerElement>>(
           a1,
           a2,
           (char *)a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047A6D0) --------------------------------------------------------
_DWORD *__stdcall sub_47A6D0(void *a1, int a2)
{
  return std::map<int,std::string>::map<int,std::string>(a1, (_DWORD *)a2);
}

//----- (0047A6F0) --------------------------------------------------------
void *__thiscall sub_47A6F0(void *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(
    (std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)this,
    (int)&v4,
    (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047A720) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47A720(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this, int a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std::_Init_locks::operator=(a3);
  std::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Tree_val<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>(
    this,
    a2,
    v4);
  sub_47EC10((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (0047A760) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47A760(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(this, (int)&v4, (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047A790) --------------------------------------------------------
_DWORD *__thiscall sub_47A790(_DWORD *this)
{
  _DWORD *v2; // [esp-4h] [ebp-Ch] BYREF
  _DWORD *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  std::_List_val<std::pair<int const,IDirect3DTexture9 *>>::_List_val<std::pair<int const,IDirect3DTexture9 *>>(
    v3,
    (char)v2);
  v3[1] = sub_47A7D0();
  v3[2] = 0;
  return v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047A7D0) --------------------------------------------------------
int sub_47A7D0()
{
  void *v0; // eax
  void *v1; // eax
  int v3; // [esp+4h] [ebp-8h] BYREF
  int v4; // [esp+8h] [ebp-4h]

  v3 = (int)sub_478640(1);
  v4 = 0;
  v0 = (void *)sub_474590(v3);
  sub_42F9B0(v0, (int)&v3);
  ++v4;
  v1 = (void *)sub_446FF0(v3);
  sub_42F9B0(v1, (int)&v3);
  return v3;
}

//----- (0047A870) --------------------------------------------------------
void *__thiscall std::_List_val<std::pair<int const,IDirect3DTexture9 *>>::_List_val<std::pair<int const,IDirect3DTexture9 *>>(void *this, char a2)
{
  char v3; // [esp-4h] [ebp-Ch]

  v3 = (char)this;
  std::_Init_locks::operator=(&a2);
  std::_List_ptr<evQuake_s *>::_List_ptr<evQuake_s *>(this, v3);
  std::_Init_locks::operator=(&a2);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std::_Init_locks::operator=(_DWORD);

//----- (0047A8B0) --------------------------------------------------------
CIOObject *__thiscall sub_47A8B0(CIOObject *this)
{
  CIOObject::CIOObject(this);
  this->__vftable = (CIOObject_vtbl *)&off_4BBF54;
  return this;
}
// 4BBF54: using guessed type int (__stdcall *off_4BBF54)(int);

//----- (0047A8D0) --------------------------------------------------------
int __thiscall sub_47A8D0(void *this)
{
  return sub_47A8F0(this);
}

//----- (0047A8F0) --------------------------------------------------------
int __thiscall sub_47A8F0(void *this)
{
  return sub_47A910((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0047A910) --------------------------------------------------------
int __thiscall sub_47A910(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4729B0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0047A9C0) --------------------------------------------------------
int __thiscall sub_47A9C0(void *this)
{
  return sub_47A9E0(this);
}

//----- (0047A9E0) --------------------------------------------------------
int __thiscall sub_47A9E0(void *this)
{
  return sub_47AA00((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0047AA00) --------------------------------------------------------
int __thiscall sub_47AA00(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_472A80(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0047AAB0) --------------------------------------------------------
BOOL __thiscall CCondClass::IsMeet(CCondClass *this, CPlayer *pPlayer)
{
  return this->m_nValue == pPlayer->m_nClass;
}

//----- (0047AAE0) --------------------------------------------------------
BOOL __thiscall CCondLevel::IsMeet(CCondLevel *this, CPlayer *pPlayer)
{
  return pPlayer->m_nLevel >= this->m_nValue;
}

//----- (0047AB00) --------------------------------------------------------
BOOL __thiscall CCondSpecialty::IsMeet(CCondSpecialty *this, CPlayer *pPlayer)
{
  return pPlayer->m_nClass == this->m_nValue >> 16 && ((unsigned __int16)this->m_nValue & pPlayer->m_dwSpecialty) != 0;
}

//----- (0047AB60) --------------------------------------------------------
BOOL __thiscall CCondContribute::IsMeet(CCondContribute *this, CPlayer *pPlayer)
{
  return pPlayer->m_nContribute >= this->m_nValue;
}

//----- (0047AB90) --------------------------------------------------------
int __thiscall CCondItem::IsMeet(CCondItem *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v5[4]; // [esp+4h] [ebp-1Ch] BYREF
  int v6; // [esp+8h] [ebp-18h] BYREF
  QUESTITEM item; // [esp+Ch] [ebp-14h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+1Ch] [ebp-4h] BYREF

  CIOCriticalSection::Enter(&pPlayer->m_lockItem.m_critical_section);
  sub_430C20(&this->m_vecQItem, (int)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecQItem, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    item = *(QUESTITEM *)sub_420010(&it);
    if ( !CPlayer::_FindItem(pPlayer, item.nIndex, item.nNum) )
    {
      CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
      return 0;
    }
    sub_430E00((int *)&it, &v6, 0);
  }
  CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
  return 1;
}

//----- (0047AC50) --------------------------------------------------------
BOOL __thiscall CCondParty::IsMeet(CCondParty *this, CPlayer *pPlayer)
{
  return (int)CPlayer::GetPartySize(pPlayer) >= this->m_nValue;
}

//----- (0047AC80) --------------------------------------------------------
BOOL __thiscall CCondQuest::IsMeet(CCondQuest *this, CPlayer *pPlayer)
{
  return CPlayer::CheckQuestFlag(pPlayer, this->m_nValue);
}

//----- (0047ACA0) --------------------------------------------------------
BOOL __thiscall CCondClear::IsMeet(CCondClear *this, CPlayer *pPlayer)
{
  return CPlayer::CheckQuestClear(pPlayer, this->m_nValue);
}

//----- (0047ACC0) --------------------------------------------------------
BOOL __thiscall CCondNotClear::IsMeet(CCondNotClear *this, CPlayer *pPlayer)
{
  return CPlayer::CheckQuestClear(pPlayer, this->m_nValue) == 0;
}

//----- (0047ACF0) --------------------------------------------------------
BOOL __thiscall CCondGState::IsMeet(CCondGState *this, CPlayer *pPlayer)
{
  int v3; // [esp+0h] [ebp-8h]

  if ( (unsigned __int16)this->m_nValue )
    v3 = CChar::IsGState(pPlayer, 1 << BYTE2(this->m_nValue));
  else
    v3 = CChar::IsGState(pPlayer, 1 << BYTE2(this->m_nValue)) == 0;
  return v3;
}

//----- (0047AD50) --------------------------------------------------------
void __thiscall CActionHtml::Action(CActionHtml *nCondHtml, CPlayer *nPlayer)
{
  CPlayer::Write(nPlayer, S2C_SENDHTML, "d", nCondHtml->m_nValue);
}

//----- (0047AD80) --------------------------------------------------------
void __thiscall CActionLink::Action(CActionLink *this, CPlayer *pPlayer)
{
  CQuest::Process(this->m_pLink, pPlayer);
}

//----- (0047ADA0) --------------------------------------------------------
void __thiscall CActionSpecialty::Action(CActionSpecialty *this, CPlayer *pPlayer)
{
  pPlayer->m_dwSpecialty |= this->m_nValue;
  CPlayer::Write(pPlayer, S2C_MESSAGEV, "bb", 38, pPlayer->m_dwSpecialty);
  CDBSocket::Write(S2D_SAVESPECIALTY, "db", pPlayer->m_nPID, this->m_nValue);
  CPlayerSkill::ChangeOccupationAutoLearnSkill(&pPlayer->m_skill);
}

//----- (0047AE20) --------------------------------------------------------
void __thiscall CActionExp::Action(CActionExp *this, CPlayer *pPlayer)
{
  pPlayer->UpdateProperty(pPlayer, 25, 1, this->m_nValue, this->m_nValue >> 31);
}

//----- (0047AE50) --------------------------------------------------------
void __thiscall CActionItem::Action(CActionItem *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int *v3; // eax
  char v5[4]; // [esp+4h] [ebp-20h] BYREF
  int v6; // [esp+8h] [ebp-1Ch] BYREF
  CItem *pItem; // [esp+Ch] [ebp-18h]
  int nIndex; // [esp+10h] [ebp-14h]
  int nPrefix; // [esp+14h] [ebp-10h]
  int Index; // [esp+18h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+20h] [ebp-4h] BYREF

  sub_430C20(&this->m_vecQItem, (int)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(&this->m_vecQItem, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    v3 = (int *)sub_420010(&it);
    nIndex = *v3;
    nPrefix = v3[1];
    Index = v3[2];
    if ( v3[3] )
    {
      pItem = CItem::CreateItem(nIndex, nPrefix, Index, -1);
      if ( pItem )
      {
        CIOObject::AddRef((int)pItem);
        if ( CPlayer::InsertItem(pPlayer, 16, pItem) == 1 )
        {
          if ( pItem->IsQuestItem(pItem) )
            ++pPlayer->m_nQuestItem;
        }
        else
        {
          CBase::Delete(pItem);
        }
        CIOObject::Release(pItem);
      }
    }
    else if ( !CPlayer::RemoveItem(pPlayer, 16, nIndex, Index) )
    {
      LOG_ERR(
        "CActionItem::Action() Can't remove Quest Item. (pid:%d, index:%d, num:%d)",
        pPlayer->m_nPID,
        nIndex,
        Index);
    }
    sub_430E00((int *)&it, &v6, 0);
  }
}

//----- (0047AF80) --------------------------------------------------------
void __thiscall CActionItemRand::Action(CActionItemRand *this, CPlayer *pPlayer)
{
  CItem *pItem; // [esp+4h] [ebp-4h]

  pItem = CItem::CreateQuestItem(this->m_nValue);
  if ( pItem )
  {
    CIOObject::AddRef((int)pItem);
    if ( CPlayer::InsertItem(pPlayer, 16, pItem) == 1 )
    {
      if ( ((int (__thiscall *)(CItem *, CActionItemRand *))pItem->IsQuestItem)(pItem, this) )
        ++pPlayer->m_nQuestItem;
    }
    else
    {
      CBase::Delete(pItem);
    }
    CIOObject::Release(pItem);
  }
}

//----- (0047B000) --------------------------------------------------------
void __thiscall CActionCon::Action(CActionCon *this, CPlayer *pPlayer)
{
  pPlayer->UpdateProperty(pPlayer, 30, 1, this->m_nValue);
  CDBSocket::Write(S2D_UPDATEPROPERTY, "dbw", pPlayer->m_nPID, 30, pPlayer->m_nContribute);
}

//----- (0047B050) --------------------------------------------------------
void __thiscall CActionSUP::Action(CActionSUP *this, CPlayer *pPlayer)
{
  pPlayer->UpdateProperty(pPlayer, 24, 1, this->m_nValue);
  CDBSocket::Write(S2D_UPDATEPROPERTY, "dbw", pPlayer->m_nPID, 24, pPlayer->m_nSUPoint);
}

//----- (0047B0A0) --------------------------------------------------------
void __thiscall CActionSaveFlag::Action(CActionSaveFlag *this, CPlayer *pPlayer)
{
  CPlayer::SaveQuestFlag(pPlayer, this->m_nValue, 0);
}

//----- (0047B0C0) --------------------------------------------------------
void __thiscall CActionClear::Action(CActionClear *this, CPlayer *pPlayer)
{
  CPlayer::SaveQuestFlag(pPlayer, this->m_nValue, 1);
}

//----- (0047B0E0) --------------------------------------------------------
void __thiscall CActionGState::Action(CActionGState *this, CPlayer *pPlayer)
{
  int dwNextTick; // [esp+14h] [ebp-8h]
  int nGState; // [esp+18h] [ebp-4h]

  nGState = 1 << BYTE2(this->m_nValue);
  if ( (unsigned __int16)this->m_nValue )
  {
    if ( nGState == 32 )
    {
      dwNextTick = 600000;
      if ( CChar::IsBState(pPlayer, 8i64) )
      {
        dwNextTick = 300000;
      }
      else if ( CChar::IsBState(pPlayer, 1i64) )
      {
        dwNextTick = 300000;
      }
      pPlayer->m_dwQuestJobTick = dwNextTick + GetTickCount();
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 44);
    }
    pPlayer->AddGState(pPlayer, nGState);
  }
  else
  {
    pPlayer->SubGState(pPlayer, nGState);
  }
}

//----- (0047B1B0) --------------------------------------------------------
void __thiscall CActionGuide::Action(CActionGuide *this, CPlayer *pPlayer)
{
  CPlayer::QuestGuide(pPlayer, this->m_nValue);
}

//----- (0047B1D0) --------------------------------------------------------
void __thiscall CActionRedistribute::Action(CActionRedistribute *this, CPlayer *pPlayer)
{
  CPlayerSkill::RedistributeAll(&pPlayer->m_skill);
}

//----- (0047B1F0) --------------------------------------------------------
void __thiscall CActionTeleport::Action(CActionTeleport *this, CPlayer *pPlayer)
{
  tagPOINT ptPTel; // [esp+4h] [ebp-8h] BYREF

  ptPTel.x = this->m_nTelX + 32;
  ptPTel.y = this->m_nTelY + 32;
  CPlayer::Teleport(pPlayer, this->m_nTelMap, &ptPTel, 0, 0);
}

//----- (0047B230) --------------------------------------------------------
void __thiscall CCase::~CCase(CCase *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  void (__thiscall ***v4)(_DWORD, int); // [esp+10h] [ebp-24h]
  char v5[4]; // [esp+14h] [ebp-20h] BYREF
  char v6[4]; // [esp+18h] [ebp-1Ch] BYREF
  void (__thiscall ***v7)(_DWORD, int); // [esp+1Ch] [ebp-18h]
  void (__thiscall ***v8)(_DWORD, int); // [esp+20h] [ebp-14h]
  char v9[4]; // [esp+24h] [ebp-10h] BYREF
  char v10[4]; // [esp+28h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v11; // [esp+2Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v12; // [esp+30h] [ebp-4h] BYREF

  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)this,
    (std::list<tagPARTICLES *>::iterator *)&v12);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this, (int)v9);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v12,
            v1) )
      break;
    v7 = *(void (__thiscall ****)(_DWORD, int))sub_40F040(&v12);
    v8 = v7;
    if ( v7 )
      (**v8)(v8, 1);
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v12, v10, 0);
  }
  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)&this->m_listAction,
    (std::list<tagPARTICLES *>::iterator *)&v11);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_listAction, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v11,
            v2) )
      break;
    v4 = *(void (__thiscall ****)(_DWORD, int))sub_40F040(&v11);
    if ( v4 )
      (**v4)(v4, 1);
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v11, v6, 0);
  }
  sub_472990((std::list<std::pair<std::string const ,int>> *)&this->m_listAction);
  sub_472990((std::list<std::pair<std::string const ,int>> *)this);
}

//----- (0047B330) --------------------------------------------------------
int __thiscall CCase::SetCondition(CCase *this, lisp::var value)
{
  lisp::var *v2; // eax
  lisp::var *v4; // eax
  unsigned int v5; // eax
  lisp::var *v6; // eax
  unsigned int v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  unsigned int v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  unsigned int v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  unsigned int v19; // eax
  lisp::var *v20; // eax
  unsigned int v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  std::locale::facet *v24; // [esp+0h] [ebp-D4h]
  std::locale::facet *v25; // [esp+4h] [ebp-D0h]
  std::locale::facet *v26; // [esp+8h] [ebp-CCh]
  std::locale::facet *v27; // [esp+Ch] [ebp-C8h]
  std::locale::facet *v28; // [esp+10h] [ebp-C4h]
  CCondItem *v29; // [esp+14h] [ebp-C0h]
  std::locale::facet *v30; // [esp+18h] [ebp-BCh]
  std::locale::facet *v31; // [esp+1Ch] [ebp-B8h]
  std::locale::facet *v32; // [esp+20h] [ebp-B4h]
  std::locale::facet *v33; // [esp+24h] [ebp-B0h]
  CMemory **v35; // [esp+30h] [ebp-A4h]
  lisp::var v36; // [esp+34h] [ebp-A0h] BYREF
  lisp::var v37; // [esp+38h] [ebp-9Ch] BYREF
  lisp::var v38; // [esp+3Ch] [ebp-98h] BYREF
  CMemory **v39; // [esp+40h] [ebp-94h]
  lisp::var v40; // [esp+44h] [ebp-90h] BYREF
  CMemory **v41; // [esp+48h] [ebp-8Ch]
  CMemory **v42; // [esp+4Ch] [ebp-88h]
  lisp::var v43; // [esp+50h] [ebp-84h] BYREF
  lisp::var v44; // [esp+54h] [ebp-80h] BYREF
  lisp::var v45; // [esp+58h] [ebp-7Ch] BYREF
  CMemory **v46; // [esp+5Ch] [ebp-78h]
  lisp::var v47; // [esp+60h] [ebp-74h] BYREF
  lisp::var v48; // [esp+64h] [ebp-70h] BYREF
  CActionItem *v49; // [esp+68h] [ebp-6Ch]
  lisp::var v50; // [esp+6Ch] [ebp-68h] BYREF
  CMemory **v51; // [esp+70h] [ebp-64h]
  CMemory **v52; // [esp+74h] [ebp-60h]
  lisp::var v53; // [esp+78h] [ebp-5Ch] BYREF
  lisp::var v54; // [esp+7Ch] [ebp-58h] BYREF
  lisp::var v55; // [esp+80h] [ebp-54h] BYREF
  CMemory **v56; // [esp+84h] [ebp-50h]
  lisp::var v57; // [esp+88h] [ebp-4Ch] BYREF
  CMemory **v58; // [esp+8Ch] [ebp-48h]
  lisp::var result; // [esp+90h] [ebp-44h] BYREF
  int nGState; // [esp+94h] [ebp-40h]
  int nBool; // [esp+98h] [ebp-3Ch]
  int nQuest; // [esp+9Ch] [ebp-38h]
  int nFlag; // [esp+A0h] [ebp-34h]
  QUESTITEM item; // [esp+A4h] [ebp-30h] BYREF
  lisp::var v; // [esp+B4h] [ebp-20h] BYREF
  CCondItem *pCondItem; // [esp+B8h] [ebp-1Ch]
  int nClass; // [esp+BCh] [ebp-18h]
  int nSpecialty; // [esp+C0h] [ebp-14h]
  lisp::var val; // [esp+C4h] [ebp-10h] BYREF
  char *szSymbol; // [esp+C8h] [ebp-Ch]
  CCondition *pCondition; // [esp+CCh] [ebp-8h] BYREF
  Symbol symbol; // [esp+D0h] [ebp-4h]

  while ( 2 )
  {
    if ( (unsigned __int8)lisp::var::null(&value) )
      return 1;
    lisp::var::pop(&value, &val);
    v2 = lisp::var::pop(&val, &result);
    szSymbol = (char *)lisp::var::operator char const *(v2);
    symbol = CObjectDB::FindSymbol(szSymbol);
    if ( symbol )
    {
      pCondition = 0;
      switch ( symbol )
      {
        case S_LEVEL:
          v56 = operator new(8u);
          if ( v56 )
          {
            v6 = lisp::var::pop(&val, &v55);
            v7 = lisp::var::operator int(v6);
            v32 = sub_47B9B0((std::locale::facet *)v56, v7);
          }
          else
          {
            v32 = 0;
          }
          pCondition = (CCondition *)v32;
          goto LABEL_49;
        case S_CLASS:
          v58 = operator new(8u);
          if ( v58 )
          {
            v4 = lisp::var::pop(&val, &v57);
            v5 = lisp::var::operator int(v4);
            v33 = sub_47B8E0((std::locale::facet *)v58, v5);
          }
          else
          {
            v33 = 0;
          }
          pCondition = (CCondition *)v33;
          goto LABEL_49;
        case S_SPECIALTY:
          v8 = lisp::var::pop(&val, &v54);
          nClass = lisp::var::operator int(v8);
          v9 = lisp::var::pop(&val, &v53);
          nSpecialty = lisp::var::operator int(v9);
          v52 = operator new(8u);
          if ( v52 )
            v31 = sub_47B9E0((std::locale::facet *)v52, (1 << nSpecialty) | (nClass << 16));
          else
            v31 = 0;
          pCondition = (CCondition *)v31;
          goto LABEL_49;
        case S_ITEM:
          v49 = (CActionItem *)operator new(0x18u);
          if ( v49 )
            v29 = (CCondItem *)CActionItem::CActionItem(v49, 0);
          else
            v29 = 0;
          pCondition = v29;
          pCondItem = v29;
          while ( !(unsigned __int8)lisp::var::null(&val) )
          {
            lisp::var::pop(&val, &v);
            QUESTITEM::QUESTITEM(&item);
            v12 = lisp::var::pop(&v, &v48);
            item.nIndex = lisp::var::operator int(v12);
            v13 = lisp::var::pop(&v, &v47);
            item.nNum = lisp::var::operator int(v13);
            sub_47CF90((int)&pCondItem->m_vecQItem, (const tagRECT *)&item);
          }
          goto LABEL_49;
        case S_PARTY:
          v46 = operator new(8u);
          if ( v46 )
          {
            v14 = lisp::var::pop(&val, &v45);
            v15 = lisp::var::operator int(v14);
            v28 = sub_47BAC0((std::locale::facet *)v46, v15);
          }
          else
          {
            v28 = 0;
          }
          pCondition = (CCondition *)v28;
          goto LABEL_49;
        case S_QUEST:
          v16 = lisp::var::pop(&val, &v44);
          nQuest = lisp::var::operator int(v16);
          v17 = lisp::var::pop(&val, &v43);
          nFlag = lisp::var::operator int(v17);
          v42 = operator new(8u);
          if ( v42 )
            v27 = sub_47BAF0((std::locale::facet *)v42, nFlag | (nQuest << 16));
          else
            v27 = 0;
          pCondition = (CCondition *)v27;
          goto LABEL_49;
        case S_CONTRIBUTE:
          v51 = operator new(8u);
          if ( v51 )
          {
            v10 = lisp::var::pop(&val, &v50);
            v11 = lisp::var::operator int(v10);
            v30 = sub_47BA10((std::locale::facet *)v51, v11);
          }
          else
          {
            v30 = 0;
          }
          pCondition = (CCondition *)v30;
          goto LABEL_49;
        case S_CLEAR:
          v41 = operator new(8u);
          if ( v41 )
          {
            v18 = lisp::var::pop(&val, &v40);
            v19 = lisp::var::operator int(v18);
            v26 = sub_47BB20((std::locale::facet *)v41, v19);
          }
          else
          {
            v26 = 0;
          }
          pCondition = (CCondition *)v26;
          goto LABEL_49;
        case S_NOTCLEAR:
          v39 = operator new(8u);
          if ( v39 )
          {
            v20 = lisp::var::pop(&val, &v38);
            v21 = lisp::var::operator int(v20);
            v25 = sub_47BB50((std::locale::facet *)v39, v21);
          }
          else
          {
            v25 = 0;
          }
          pCondition = (CCondition *)v25;
          goto LABEL_49;
        case S_GSTATE:
          v22 = lisp::var::pop(&val, &v37);
          nGState = lisp::var::operator int(v22);
          v23 = lisp::var::pop(&val, &v36);
          nBool = lisp::var::operator int(v23);
          v35 = operator new(8u);
          if ( v35 )
            v24 = sub_47BB80((std::locale::facet *)v35, nBool | (nGState << 16));
          else
            v24 = 0;
          pCondition = (CCondition *)v24;
LABEL_49:
          sub_47D000(this, (int)&pCondition);
          continue;
        default:
          LOG_ERR("CCase::SetCondition() Invalid Condition. (symbol:%d)", symbol);
          return 0;
      }
    }
    break;
  }
  LOG_ERR("CCase::SetCondition() Invalid symbol(%s)", szSymbol);
  return 0;
}

//----- (0047B8A0) --------------------------------------------------------
QUESTITEM *__thiscall QUESTITEM::QUESTITEM(QUESTITEM *this)
{
  this->nNum = 0;
  this->nPrefix = 0;
  this->nIndex = 0;
  this->bInsert = 1;
  return this;
}

//----- (0047B8E0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47B8E0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  this->__vftable = (std::locale::facet_vtbl *)off_4BC020;
  return this;
}
// 4BC020: using guessed type int (__stdcall *off_4BC020[3])(int);

//----- (0047B940) --------------------------------------------------------
std::locale::facet *__thiscall sub_47B940(std::locale::facet *this, char a2)
{
  std::locale::facet::~facet(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047B990) --------------------------------------------------------
std::locale::facet *__thiscall sub_47B990(std::locale::facet *this)
{
  return std::locale::facet::~facet(this);
}

//----- (0047B9B0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47B9B0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  this->__vftable = (std::locale::facet_vtbl *)off_4BC030;
  return this;
}
// 4BC030: using guessed type int (__stdcall *off_4BC030[18])(int);

//----- (0047B9E0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47B9E0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC038;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC038: using guessed type int (__stdcall *off_4BC038[16])(int);

//----- (0047BA10) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BA10(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC040;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC040: using guessed type int (__stdcall *off_4BC040[14])(int);

//----- (0047BA40) --------------------------------------------------------
CActionItem *__thiscall CActionItem::CActionItem(CActionItem *this, unsigned int nValue)
{
  std::locale::facet::facet((std::locale::facet *)this, nValue);
  this->__vftable = (CActionItem_vtbl *)off_4BC048;
  sub_47CF60(&this->m_vecQItem);
  return this;
}
// 4BC048: using guessed type int (__stdcall *off_4BC048[12])(int);

//----- (0047BA70) --------------------------------------------------------
void *__thiscall sub_47BA70(void *this, char a2)
{
  sub_47BAA0((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047BAA0) --------------------------------------------------------
void __thiscall sub_47BAA0(int this)
{
  std::vector<ITEMDROPINFO>::vector<ITEMDROPINFO>((std::vector<tagRECT> *)(this + 8));
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 47B970: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (0047BAC0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BAC0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC050;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC050: using guessed type int (__stdcall *off_4BC050[10])(int);

//----- (0047BAF0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BAF0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC058;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC058: using guessed type int (__stdcall *off_4BC058[8])(int);

//----- (0047BB20) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BB20(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC060;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC060: using guessed type int (__stdcall *off_4BC060[6])(int);

//----- (0047BB50) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BB50(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC068;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC068: using guessed type int (__stdcall *off_4BC068[4])(int);

//----- (0047BB80) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BB80(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC070;
  return this;
}
// 47B910: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC070: using guessed type int (__stdcall *off_4BC070[2])(int);

//----- (0047BBB0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47BBB0(std::locale::facet *this, char a2)
{
  sub_47B990(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047BBE0) --------------------------------------------------------
int __thiscall CCase::SetAction(CCase *this, lisp::var value)
{
  lisp::var *v2; // eax
  lisp::var *v4; // eax
  unsigned int v5; // eax
  lisp::var *v6; // eax
  int v7; // esi
  lisp::var *v8; // eax
  const std::pair<int const ,CGame_Character::TargetInfo> *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  unsigned int v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  unsigned int v20; // eax
  lisp::var *v21; // eax
  unsigned int v22; // eax
  lisp::var *v23; // eax
  unsigned int v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  lisp::var *v30; // eax
  lisp::var *v31; // eax
  unsigned int v32; // eax
  lisp::var *v33; // eax
  int v34; // eax
  lisp::var *v35; // eax
  int v36; // eax
  lisp::var *v37; // eax
  int v38; // eax
  std::locale::facet *v39; // [esp+4h] [ebp-14Ch]
  std::locale::facet *v40; // [esp+8h] [ebp-148h]
  std::locale::facet *v41; // [esp+Ch] [ebp-144h]
  std::locale::facet *v42; // [esp+10h] [ebp-140h]
  std::locale::facet *v43; // [esp+14h] [ebp-13Ch]
  std::locale::facet *v44; // [esp+18h] [ebp-138h]
  std::locale::facet *v45; // [esp+1Ch] [ebp-134h]
  std::locale::facet *v46; // [esp+20h] [ebp-130h]
  std::locale::facet *v47; // [esp+24h] [ebp-12Ch]
  std::locale::facet *v48; // [esp+2Ch] [ebp-124h]
  std::locale::facet *v49; // [esp+30h] [ebp-120h]
  std::locale::facet *v50; // [esp+34h] [ebp-11Ch]
  std::locale::facet *v51; // [esp+38h] [ebp-118h]
  CQuest *v52; // [esp+3Ch] [ebp-114h]
  std::locale::facet *v53; // [esp+40h] [ebp-110h]
  lisp::var v55; // [esp+4Ch] [ebp-104h] BYREF
  lisp::var v56; // [esp+50h] [ebp-100h] BYREF
  lisp::var v57; // [esp+54h] [ebp-FCh] BYREF
  CMemory **v58; // [esp+58h] [ebp-F8h]
  CMemory **v59; // [esp+5Ch] [ebp-F4h]
  lisp::var v60; // [esp+60h] [ebp-F0h] BYREF
  CMemory **v61; // [esp+64h] [ebp-ECh]
  CMemory **v62; // [esp+68h] [ebp-E8h]
  lisp::var v63; // [esp+6Ch] [ebp-E4h] BYREF
  lisp::var v64; // [esp+70h] [ebp-E0h] BYREF
  CMemory **v65; // [esp+74h] [ebp-DCh]
  lisp::var v66; // [esp+78h] [ebp-D8h] BYREF
  lisp::var v67; // [esp+7Ch] [ebp-D4h] BYREF
  CMemory **v68; // [esp+80h] [ebp-D0h]
  lisp::var v69; // [esp+84h] [ebp-CCh] BYREF
  lisp::var v70; // [esp+88h] [ebp-C8h] BYREF
  lisp::var v71; // [esp+8Ch] [ebp-C4h] BYREF
  CMemory **v72; // [esp+90h] [ebp-C0h]
  lisp::var v73; // [esp+94h] [ebp-BCh] BYREF
  CMemory **v74; // [esp+98h] [ebp-B8h]
  lisp::var v75; // [esp+9Ch] [ebp-B4h] BYREF
  CMemory **v76; // [esp+A0h] [ebp-B0h]
  lisp::var v77; // [esp+A4h] [ebp-ACh] BYREF
  lisp::var v78; // [esp+A8h] [ebp-A8h] BYREF
  lisp::var v79; // [esp+ACh] [ebp-A4h] BYREF
  lisp::var v80; // [esp+B0h] [ebp-A0h] BYREF
  lisp::var v81; // [esp+B4h] [ebp-9Ch] BYREF
  lisp::var v82; // [esp+B8h] [ebp-98h] BYREF
  CMemory **v83; // [esp+BCh] [ebp-94h]
  lisp::var v84; // [esp+C0h] [ebp-90h] BYREF
  CMemory **v85; // [esp+C4h] [ebp-8Ch]
  CMemory **v86; // [esp+C8h] [ebp-88h]
  lisp::var v87; // [esp+CCh] [ebp-84h] BYREF
  CMemory **v88; // [esp+D0h] [ebp-80h]
  char v89[8]; // [esp+D4h] [ebp-7Ch] BYREF
  int v90; // [esp+DCh] [ebp-74h]
  char v91[8]; // [esp+E0h] [ebp-70h] BYREF
  CMemory **v92; // [esp+E8h] [ebp-68h]
  lisp::var v93; // [esp+ECh] [ebp-64h] BYREF
  lisp::var v94; // [esp+F0h] [ebp-60h] BYREF
  lisp::var v95; // [esp+F4h] [ebp-5Ch] BYREF
  CMemory **v96; // [esp+F8h] [ebp-58h]
  lisp::var v97; // [esp+FCh] [ebp-54h] BYREF
  std::locale::facet *v98; // [esp+100h] [ebp-50h]
  int v99; // [esp+104h] [ebp-4Ch]
  int v100; // [esp+108h] [ebp-48h]
  int v101; // [esp+10Ch] [ebp-44h]
  int v102; // [esp+110h] [ebp-40h]
  int v103; // [esp+114h] [ebp-3Ch]
  int v104; // [esp+118h] [ebp-38h]
  QUESTITEM item; // [esp+11Ch] [ebp-34h] BYREF
  lisp::var v; // [esp+12Ch] [ebp-24h] BYREF
  CActionItem *pActionItem; // [esp+130h] [ebp-20h]
  int nSpecialty; // [esp+134h] [ebp-1Ch]
  CQuest *pQuest; // [esp+138h] [ebp-18h]
  int dwKey; // [esp+13Ch] [ebp-14h]
  lisp::var val; // [esp+140h] [ebp-10h] BYREF
  char *szSymbol; // [esp+144h] [ebp-Ch]
  std::locale::facet *pAction; // [esp+148h] [ebp-8h] BYREF
  Symbol symbol; // [esp+14Ch] [ebp-4h]

  while ( 2 )
  {
    if ( (unsigned __int8)lisp::var::null(&value) )
      return 1;
    lisp::var::pop(&value, &val);
    v2 = lisp::var::pop(&val, &v97);
    szSymbol = (char *)lisp::var::operator char const *(v2);
    symbol = CObjectDB::FindSymbol(szSymbol);
    if ( symbol )
    {
      pAction = 0;
      switch ( symbol )
      {
        case S_EXP:
          v85 = operator new(8u);
          if ( v85 )
          {
            v11 = lisp::var::pop(&val, &v84);
            v12 = lisp::var::operator int(v11);
            v49 = sub_47C5A0((std::locale::facet *)v85, v12);
          }
          else
          {
            v49 = 0;
          }
          pAction = v49;
          goto LABEL_75;
        case S_SPECIALTY:
          v10 = lisp::var::pop(&val, &v87);
          nSpecialty = lisp::var::operator int(v10);
          v86 = operator new(8u);
          if ( v86 )
            v50 = sub_47C570((std::locale::facet *)v86, 1 << nSpecialty);
          else
            v50 = 0;
          pAction = v50;
          goto LABEL_75;
        case S_TELEPORT:
          v58 = operator new(0x14u);
          if ( v58 )
            v39 = sub_47C800((std::locale::facet *)v58, 0);
          else
            v39 = 0;
          pAction = v39;
          v98 = v39;
          v33 = lisp::var::pop(&val, &v57);
          v34 = lisp::var::operator int(v33);
          v98[1].__vftable = (std::locale::facet_vtbl *)v34;
          v35 = lisp::var::pop(&val, &v56);
          v36 = lisp::var::operator int(v35);
          v98[1]._Refs = v36;
          v37 = lisp::var::pop(&val, &v55);
          v38 = lisp::var::operator int(v37);
          v98[2].__vftable = (std::locale::facet_vtbl *)v38;
          goto LABEL_75;
        case S_ITEM:
          v83 = operator new(0x18u);
          if ( v83 )
            v48 = sub_47C600((std::locale::facet *)v83, 0);
          else
            v48 = 0;
          pAction = v48;
          pActionItem = (CActionItem *)v48;
          while ( !(unsigned __int8)lisp::var::null(&val) )
          {
            lisp::var::pop(&val, &v);
            v13 = lisp::var::pop(&v, &v82);
            szSymbol = (char *)lisp::var::operator char const *(v13);
            symbol = CObjectDB::FindSymbol(szSymbol);
            QUESTITEM::QUESTITEM(&item);
            if ( symbol == S_IN )
            {
              v14 = lisp::var::pop(&v, &v81);
              item.nIndex = lisp::var::operator int(v14);
              v15 = lisp::var::pop(&v, &v80);
              item.nPrefix = lisp::var::operator int(v15);
              v16 = lisp::var::pop(&v, &v79);
              item.nNum = lisp::var::operator int(v16);
            }
            else if ( symbol == S_OUT )
            {
              v17 = lisp::var::pop(&v, &v78);
              item.nIndex = lisp::var::operator int(v17);
              v18 = lisp::var::pop(&v, &v77);
              item.nNum = lisp::var::operator int(v18);
              item.bInsert = 0;
            }
            else
            {
              LOG_ERR("CCase::SetAction() Invalid symbol for ActionItem. (symbol:%d)", symbol);
            }
            sub_47CF90((int)&pActionItem->m_vecQItem, (const tagRECT *)&item);
          }
          goto LABEL_75;
        case S_HTML:
          v96 = operator new(8u);
          if ( v96 )
          {
            v4 = lisp::var::pop(&val, &v95);
            v5 = lisp::var::operator int(v4);
            v53 = sub_47C470((std::locale::facet *)v96, v5);
          }
          else
          {
            v53 = 0;
          }
          pAction = v53;
          goto LABEL_75;
        case S_CONTRIBUTE:
          v74 = operator new(8u);
          if ( v74 )
          {
            v21 = lisp::var::pop(&val, &v73);
            v22 = lisp::var::operator int(v21);
            v46 = sub_47C6B0((std::locale::facet *)v74, v22);
          }
          else
          {
            v46 = 0;
          }
          pAction = v46;
          goto LABEL_75;
        case S_SUPOINT:
          v72 = operator new(8u);
          if ( v72 )
          {
            v23 = lisp::var::pop(&val, &v71);
            v24 = lisp::var::operator int(v23);
            v45 = sub_47C6E0((std::locale::facet *)v72, v24);
          }
          else
          {
            v45 = 0;
          }
          pAction = v45;
          goto LABEL_75;
        case S_SAVE:
          v25 = lisp::var::pop(&val, &v70);
          v103 = lisp::var::operator int(v25);
          v26 = lisp::var::pop(&val, &v69);
          v104 = lisp::var::operator int(v26);
          v68 = operator new(8u);
          if ( v68 )
            v44 = sub_47C710((std::locale::facet *)v68, v104 | (v103 << 16));
          else
            v44 = 0;
          pAction = v44;
          goto LABEL_75;
        case S_CLEAR:
          v27 = lisp::var::pop(&val, &v67);
          v101 = lisp::var::operator int(v27);
          v28 = lisp::var::pop(&val, &v66);
          v102 = lisp::var::operator int(v28);
          v65 = operator new(8u);
          if ( v65 )
            v43 = sub_47C740((std::locale::facet *)v65, v102 | (v101 << 16));
          else
            v43 = 0;
          pAction = v43;
          goto LABEL_75;
        case S_LINK:
          v6 = lisp::var::pop(&val, &v94);
          v7 = lisp::var::operator int(v6) << 16;
          v8 = lisp::var::pop(&val, &v93);
          dwKey = lisp::var::operator int(v8) | v7;
          pQuest = CQuest::FindQuest(dwKey);
          if ( !pQuest )
          {
            v92 = operator new(0x38u);
            if ( v92 )
              v52 = (CQuest *)sub_47C830(v92, dwKey);
            else
              v52 = 0;
            pQuest = v52;
            v90 = dwKey;
            std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v91);
            sub_445DF0(
              (int)dword_4E210C,
              (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v89,
              v9);
          }
          v88 = operator new(8u);
          if ( v88 )
            v51 = sub_47C510((std::locale::facet *)v88, (unsigned int)pQuest);
          else
            v51 = 0;
          pAction = v51;
          goto LABEL_75;
        case S_GSTATE:
          v29 = lisp::var::pop(&val, &v64);
          v100 = lisp::var::operator int(v29);
          v30 = lisp::var::pop(&val, &v63);
          v99 = lisp::var::operator int(v30);
          v62 = operator new(8u);
          if ( v62 )
            v42 = sub_47C770((std::locale::facet *)v62, v99 | (v100 << 16));
          else
            v42 = 0;
          pAction = v42;
          goto LABEL_75;
        case S_ITEMRAND:
          v76 = operator new(8u);
          if ( v76 )
          {
            v19 = lisp::var::pop(&val, &v75);
            v20 = lisp::var::operator int(v19);
            v47 = sub_47C680((std::locale::facet *)v76, v20);
          }
          else
          {
            v47 = 0;
          }
          pAction = v47;
          goto LABEL_75;
        case S_GUIDE:
          v61 = operator new(8u);
          if ( v61 )
          {
            v31 = lisp::var::pop(&val, &v60);
            v32 = lisp::var::operator int(v31);
            v41 = sub_47C7A0((std::locale::facet *)v61, v32);
          }
          else
          {
            v41 = 0;
          }
          pAction = v41;
          goto LABEL_75;
        case S_REDISTRIBUTE:
          v59 = operator new(8u);
          if ( v59 )
            v40 = sub_47C7D0((std::locale::facet *)v59, 0);
          else
            v40 = 0;
          pAction = v40;
LABEL_75:
          sub_47D000(&this->m_listAction, (int)&pAction);
          continue;
        default:
          LOG_ERR("CQuest::SetAction() Invalid Reward. (symbol:%d)", symbol);
          return 0;
      }
    }
    break;
  }
  LOG_ERR("CCase::SetAction() Invalid symbol(%s)", szSymbol);
  return 0;
}
// 47BD81: variable 'v9' is possibly undefined
// 4E210C: using guessed type int dword_4E210C[3];

//----- (0047C470) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C470(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  this->__vftable = (std::locale::facet_vtbl *)off_4BC110;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC110: using guessed type int (__stdcall *off_4BC110[3])(int);

//----- (0047C4A0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C4A0(std::locale::facet *this, char a2)
{
  std::locale::facet::~facet(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 47C4D0: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (0047C4F0) --------------------------------------------------------
void __thiscall sub_47C4F0(std::locale::facet *this)
{
  std::locale::facet::~facet(this);
}
// 47C4D0: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (0047C510) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C510(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC120;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC120: using guessed type int (__stdcall *off_4BC120[26])(int);

//----- (0047C570) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C570(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC128;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC128: using guessed type int (__stdcall *off_4BC128[24])(int);

//----- (0047C5A0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C5A0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC130;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC130: using guessed type int (__stdcall *off_4BC130[22])(int);

//----- (0047C5D0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C5D0(std::locale::facet *this, char a2)
{
  sub_47C4F0(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047C600) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C600(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC138;
  sub_47CF60((char *)this + 8);
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC138: using guessed type int (__stdcall *off_4BC138[20])(int);

//----- (0047C630) --------------------------------------------------------
void *__thiscall sub_47C630(void *this, char a2)
{
  sub_47C660((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047C660) --------------------------------------------------------
void __thiscall sub_47C660(int this)
{
  std::vector<ITEMDROPINFO>::vector<ITEMDROPINFO>((std::vector<tagRECT> *)(this + 8));
  std::locale::facet::~facet((std::locale::facet *)this);
}
// 47C4D0: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);

//----- (0047C680) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C680(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC140;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC140: using guessed type int (__stdcall *off_4BC140[18])(int);

//----- (0047C6B0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C6B0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC148;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC148: using guessed type int (__stdcall *off_4BC148[16])(int);

//----- (0047C6E0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C6E0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC150;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC150: using guessed type int (__stdcall *off_4BC150[14])(int);

//----- (0047C710) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C710(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC158;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC158: using guessed type int (__stdcall *off_4BC158[12])(int);

//----- (0047C740) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C740(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC160;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC160: using guessed type int (__stdcall *off_4BC160[10])(int);

//----- (0047C770) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C770(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC168;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC168: using guessed type int (__stdcall *off_4BC168[8])(int);

//----- (0047C7A0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C7A0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC170;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC170: using guessed type int (__stdcall *off_4BC170[6])(int);

//----- (0047C7D0) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C7D0(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC178;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC178: using guessed type int (__stdcall *off_4BC178[4])(int);

//----- (0047C800) --------------------------------------------------------
std::locale::facet *__thiscall sub_47C800(std::locale::facet *this, unsigned int a2)
{
  std::locale::facet::facet(this, a2);
  *(_DWORD *)this = off_4BC180;
  return this;
}
// 47C540: using guessed type _DWORD __thiscall std::locale::facet::facet(std::locale::facet *__hidden this, unsigned int);
// 4BC180: using guessed type int (__stdcall *off_4BC180[2])(int);

//----- (0047C830) --------------------------------------------------------
_DWORD *__thiscall sub_47C830(_DWORD *this, int a2)
{
  CBase::CBase();
  *this = &off_4BA5A0;
  this[8] = a2;
  this[9] = 0;
  this[10] = 0;
  sub_47D030(this + 11);
  return this;
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0047C880) --------------------------------------------------------
int __thiscall sub_47C880(std::list<tagPARTICLES *> *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  char v6[4]; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+10h] [ebp-4h] BYREF

  if ( sub_472780(this) )
    return 1;
  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(this, (std::list<tagPARTICLES *>::iterator *)&v8);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v8,
            v3) )
      break;
    v7 = *(_DWORD *)sub_40F040(&v8);
    if ( !(*(int (__thiscall **)(int, int))(*(_DWORD *)v7 + 4))(v7, a2) )
      return 0;
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v8, v6, 0);
  }
  return 1;
}

//----- (0047C910) --------------------------------------------------------
BOOL __thiscall sub_47C910(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  _DWORD *v4; // eax
  char v6[4]; // [esp+8h] [ebp-Ch] BYREF
  char v7[4]; // [esp+Ch] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v8; // [esp+10h] [ebp-4h] BYREF

  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)(this + 12),
    (std::list<tagPARTICLES *>::iterator *)&v8);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((_DWORD *)(this + 12), (int)v6);
    result = std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
               &v8,
               v2);
    if ( !result )
      break;
    v4 = (_DWORD *)sub_40F040(&v8);
    (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*v4 + 4))(*v4, a2);
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v8, v7, 0);
  }
  return result;
}

//----- (0047C980) --------------------------------------------------------
void __thiscall CQuest::_CQuest(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  CCase *v3; // [esp+Ch] [ebp-10h]
  char v4[4]; // [esp+10h] [ebp-Ch] BYREF
  char v5[4]; // [esp+14h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+18h] [ebp-4h] BYREF

  *(_DWORD *)this = &off_4BA5A0;
  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)(this + 44),
    (std::list<tagPARTICLES *>::iterator *)&v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((_DWORD *)(this + 44), (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v1) )
      break;
    v3 = *(CCase **)sub_40F040(&v6);
    if ( v3 )
      CCase::`scalar deleting destructor'(v3, 1);
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&v6, v5, 0);
  }
  sub_472990((std::list<std::pair<std::string const ,int>> *)(this + 44));
  CBase::~CBase((CBase *)this);
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0047CA20) --------------------------------------------------------
void *__thiscall CCase::`scalar deleting destructor'(CCase *this, char a2)
{
  CCase::~CCase(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047CA50) --------------------------------------------------------
void __cdecl CQuest::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  int v3; // [esp+4h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E2118);
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E210C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&it);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E210C, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v0) )
      break;
    v1 = sub_420250(&it);
    CBase::Delete(*(CBase **)(v1 + 4));
    sub_446090((int *)&it, &v3, 0);
  }
  CRWLock::WriteUnlock(&unk_4E2118);
}
// 4E210C: using guessed type int dword_4E210C[3];

//----- (0047CAC0) --------------------------------------------------------
CQuest *__cdecl CQuest::FindQuest(int dwKey)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  int v4; // [esp+4h] [ebp-Ch] BYREF
  CQuest *pQuest; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+Ch] [ebp-4h] BYREF

  pQuest = 0;
  CRWLock::ReadLock(&unk_4E2118);
  v4 = dwKey;
  sub_44AE20(dword_4E210C, &it, &v4);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E210C, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v1) )
  {
    pQuest = *(CQuest **)(sub_420250(&it) + 4);
    CIOObject::AddRef((int)pQuest);
  }
  CRWLock::ReadUnlock(&unk_4E2118);
  return pQuest;
}
// 4E210C: using guessed type int dword_4E210C[3];

//----- (0047CB40) --------------------------------------------------------
void __cdecl CQuest::CallProcess(int dwKey, CPlayer *pPlayer)
{
  CQuest *pQuest; // [esp+0h] [ebp-4h]

  pQuest = CQuest::FindQuest(dwKey);
  if ( pQuest )
  {
    if ( !pQuest->m_bLinked )
      CQuest::Process(pQuest, pPlayer);
    CIOObject::Release(pQuest);
  }
}

//----- (0047CB80) --------------------------------------------------------
BOOL __thiscall CQuest::Set(CQuest *this, enum Symbol symbol, struct lisp::var value)
{
  lisp::var *v3; // eax
  lisp::_object *v4; // ecx
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  int v8; // eax
  lisp::var v9; // [esp-4h] [ebp-48h] BYREF
  CQuest *v10; // [esp+0h] [ebp-44h]
  enum Symbol v11; // [esp+4h] [ebp-40h]
  CCase *v12; // [esp+8h] [ebp-3Ch]
  enum Symbol v13; // [esp+Ch] [ebp-38h]
  CMemory **v15; // [esp+18h] [ebp-2Ch]
  char v16[4]; // [esp+1Ch] [ebp-28h] BYREF
  unsigned int v17; // [esp+20h] [ebp-24h] BYREF
  lisp::var v18; // [esp+24h] [ebp-20h] BYREF
  lisp::var v19[3]; // [esp+28h] [ebp-1Ch] BYREF
  CCase *v20; // [esp+34h] [ebp-10h]
  lisp::var result; // [esp+38h] [ebp-Ch] BYREF
  int v22; // [esp+3Ch] [ebp-8h] BYREF
  CCase *pCase; // [esp+40h] [ebp-4h]

  if ( !this->m_pClone )
  {
    v11 = symbol;
    if ( symbol == S_INDEX )
    {
      v6 = lisp::var::pop(&value, v19);
      this->m_dwKey |= lisp::var::operator int(v6) << 16;
      v7 = lisp::var::pop(&value, &v18);
      this->m_dwKey |= lisp::var::operator int(v7);
      v17 = this->m_dwKey;
      sub_44AE20(dword_4E210C, &v22, &v17);
      v8 = sub_430C20(dword_4E210C, (int)v16);
      if ( (unsigned __int8)unknown_libname_8(v8) )
      {
        v15 = operator new(0x38u);
        if ( v15 )
          v10 = (CQuest *)sub_47C830(v15, this->m_dwKey);
        else
          v10 = 0;
        this->m_pClone = v10;
      }
      else
      {
        this->m_pClone = *(CQuest **)(sub_420250(&v22) + 4);
      }
      return 1;
    }
LABEL_11:
    v9.m_pObject = (lisp::_object *)symbol;
    lisp::var::var(&v9, &value);
    return CBase::Set(this, symbol, v9);
  }
  v13 = symbol;
  if ( symbol == S_CASE )
  {
    v20 = (CCase *)operator new(0x18u);
    if ( v20 )
      v12 = CCase::CCase(v20);
    else
      v12 = 0;
    pCase = v12;
    v9.m_pObject = v4;
    lisp::var::var(&v9, &value);
    return CQuest::SetCase(this->m_pClone, pCase, v9) != 0;
  }
  if ( v13 != S_LINKED )
    goto LABEL_11;
  v3 = lisp::var::pop(&value, &result);
  this->m_pClone->m_bLinked = lisp::var::operator int(v3);
  return 1;
}
// 47CBF5: variable 'v4' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E210C: using guessed type int dword_4E210C[3];

//----- (0047CD40) --------------------------------------------------------
CCase *__thiscall CCase::CCase(CCase *this)
{
  sub_47D030(this);
  sub_47D030(&this->m_listAction);
  return this;
}

//----- (0047CD70) --------------------------------------------------------
int __thiscall CQuest::SetCase(CQuest *this, CCase *pCase, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::_object *v4; // ecx
  lisp::var v6; // [esp-4h] [ebp-24h] BYREF
  Symbol v7; // [esp+0h] [ebp-20h]
  CQuest *v8; // [esp+4h] [ebp-1Ch]
  lisp::var result; // [esp+10h] [ebp-10h] BYREF
  char *szSymbol; // [esp+14h] [ebp-Ch]
  lisp::var v; // [esp+18h] [ebp-8h] BYREF
  Symbol symbol; // [esp+1Ch] [ebp-4h]

  v8 = this;
  while ( !(unsigned __int8)lisp::var::null(&value) )
  {
    lisp::var::pop(&value, &v);
    v3 = lisp::var::pop(&v, &result);
    szSymbol = (char *)lisp::var::operator char const *(v3);
    symbol = CObjectDB::FindSymbol(szSymbol);
    if ( symbol == S_NULL )
    {
      LOG_ERR("CQuest::SetCase() Invalid symbol(%s)", szSymbol);
      return 0;
    }
    v7 = symbol;
    if ( symbol == S_IF )
    {
      v6.m_pObject = v4;
      lisp::var::var(&v6, &v);
      if ( !CCase::SetCondition(pCase, v6) )
        return 0;
    }
    else
    {
      if ( v7 != S_THEN )
      {
        LOG_ERR("CQuest::SetCondition() Invalid Case. (symbol:%d)", symbol);
        return 0;
      }
      v6.m_pObject = v4;
      lisp::var::var(&v6, &v);
      if ( !CCase::SetAction(pCase, v6) )
        return 0;
    }
  }
  sub_47D000(&v8->m_listCase, (int)&pCase);
  return 1;
}
// 47CDED: variable 'v4' is possibly undefined

//----- (0047CE60) --------------------------------------------------------
int __thiscall CQuest::OnLoad(CQuest *this)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  char v4[8]; // [esp+8h] [ebp-10h] BYREF
  char r[8]; // [esp+10h] [ebp-8h] BYREF

  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v4);
  sub_445DF0(
    (int)dword_4E210C,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)r,
    v1);
  this->m_dwKey = 0;
  this->m_pClone = 0;
  return 1;
}
// 47CE8F: variable 'v1' is possibly undefined
// 4E210C: using guessed type int dword_4E210C[3];

//----- (0047CEC0) --------------------------------------------------------
void __thiscall CQuest::Process(CQuest *this, CPlayer *pPlayer)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  CCase *pCase; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+10h] [ebp-4h] BYREF

  std::list<std::pair<int const,IDirect3DTexture9 *>>::begin(
    (std::list<tagPARTICLES *> *)&this->m_listCase,
    (std::list<tagPARTICLES *>::iterator *)&it);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_listCase, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &it,
            v2) )
      break;
    pCase = *(CCase **)sub_40F040(&it);
    if ( sub_47C880((std::list<tagPARTICLES *> *)pCase, (int)pPlayer) )
    {
      sub_47C910((int)pCase, (int)pPlayer);
      return;
    }
    sub_47D0A0((std::list<std::pair<std::string const ,int>>::const_iterator *)&it, v5, 0);
  }
  LOG_ERR("CQuest::Proceed() No Meet Condition. (Quest:%x, PID:%d)", this->m_dwKey, pPlayer->m_nPID);
}

//----- (0047CF60) --------------------------------------------------------
std::vector<tagRECT> *__thiscall sub_47CF60(void *this)
{
  void *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<tagRECT> *v3; // [esp+0h] [ebp-8h]

  v3 = (std::vector<tagRECT> *)this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  sub_44F7C0(v3, (char)v2);
  std::vector<tagRECT>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047CF90) --------------------------------------------------------
tagRECT *__thiscall sub_47CF90(int this, const tagRECT *a2)
{
  unsigned int v2; // esi
  tagRECT *result; // eax
  int *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<tagRECT>::size((std::vector<tagRECT> *)this);
  if ( v2 >= std::vector<tagRECT>::capacity((std::vector<tagRECT> *)this) )
  {
    v4 = (int *)sub_445B40((_DWORD *)this, (int)v7);
    result = (tagRECT *)sub_47D110((std::vector<tagRECT> *)this, v6, *v4, (int)a2);
  }
  else
  {
    result = std::vector<tagRECT>::_Ufill((std::vector<tagRECT> *)this, *(tagRECT **)(this + 8), 1u, a2);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (0047D000) --------------------------------------------------------
CMemory ***__thiscall sub_47D000(_DWORD *this, int a2)
{
  int *v2; // eax
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = (int *)sub_430C20(this, (int)v5);
  return sub_47D240((std::list<tagPARTICLES *> *)this, *v2, (tagPARTICLES *const *)a2);
}

//----- (0047D030) --------------------------------------------------------
void *__thiscall sub_47D030(void *this)
{
  void *v2; // [esp-4h] [ebp-Ch] BYREF
  void *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v2);
  std::_List_val<std::pair<int const,IDirect3DTexture9 *>>::_List_val<std::pair<int const,IDirect3DTexture9 *>>(
    v3,
    (char)v2);
  *((_DWORD *)v3 + 1) = sub_47D2C0();
  *((_DWORD *)v3 + 2) = 0;
  return v3;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047D070) --------------------------------------------------------
BOOL __thiscall std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(std::vector<CIOSocket::CIOTimer>::const_iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right)
{
  return (unsigned __int8)unknown_libname_8(_Right) == 0;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0047D0A0) --------------------------------------------------------
_DWORD *__thiscall sub_47D0A0(std::list<std::pair<std::string const ,int>>::const_iterator *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *(_DWORD *)this;
  sub_41CAB0(this);
  *a2 = v4;
  return a2;
}

//----- (0047D0D0) --------------------------------------------------------
int __thiscall std::vector<tagRECT>::capacity(std::vector<tagRECT> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 4;
  else
    v2 = 0;
  return v2;
}

//----- (0047D110) --------------------------------------------------------
_DWORD *__thiscall sub_47D110(std::vector<tagRECT> *this, _DWORD *a2, int a3, int a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<tagRECT>::size(this) )
  {
    v4 = (_DWORD *)sub_430C20(this, (int)v11);
    v8 = sub_47D7D0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_47D3F0((int)this, (tagRECT *)a3, 1u, (LONG *)a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, (int)v10);
  sub_431D20(v5, a2, v7);
  return a2;
}

//----- (0047D190) --------------------------------------------------------
char __thiscall std::vector<tagRECT>::_Buy(std::vector<tagRECT> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_47D3D0(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_47D6D0(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 16 * _Capacity;
  }
  else
  {
    std::vector<tagShowdownPaticipateInfo>::_Xran(this);
  }
  return 1;
}

//----- (0047D210) --------------------------------------------------------
tagRECT *__thiscall std::vector<tagRECT>::_Ufill(std::vector<tagRECT> *this, tagRECT *_Ptr, unsigned int _Count, const tagRECT *_Val)
{
  sub_47D820(_Ptr, _Count, (int)_Val);
  return &_Ptr[_Count];
}

//----- (0047D240) --------------------------------------------------------
CMemory ***__thiscall sub_47D240(std::list<tagPARTICLES *> *this, int a2, tagPARTICLES *const *a3)
{
  std::_List_nod<tagPARTICLES *>::_Node **v3; // eax
  int *v4; // eax
  CMemory ***result; // eax
  tagPARTICLES *const *v6; // [esp-4h] [ebp-10h]
  std::_List_nod<tagPARTICLES *>::_Node *_Next; // [esp+4h] [ebp-8h]
  CMemory **v9; // [esp+8h] [ebp-4h]

  _Next = (std::_List_nod<tagPARTICLES *>::_Node *)unknown_libname_7(&a2);
  v6 = a3;
  v3 = (std::_List_nod<tagPARTICLES *>::_Node **)sub_446FF0((int)_Next);
  v9 = std::list<tagSUBPARTICLES *>::_Buynode(this, _Next, *v3, v6);
  sub_47D760(this, 1u);
  *(_DWORD *)sub_446FF0((int)_Next) = v9;
  v4 = (int *)sub_446FF0((int)v9);
  result = (CMemory ***)sub_474590(*v4);
  *result = v9;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0047D2C0) --------------------------------------------------------
int sub_47D2C0()
{
  void *v0; // eax
  void *v1; // eax
  int v3; // [esp+4h] [ebp-8h] BYREF
  int v4; // [esp+8h] [ebp-4h]

  v3 = (int)sub_446B40(1);
  v4 = 0;
  v0 = (void *)sub_474590(v3);
  sub_42F9B0(v0, (int)&v3);
  ++v4;
  v1 = (void *)sub_446FF0(v3);
  sub_42F9B0(v1, (int)&v3);
  return v3;
}

//----- (0047D360) --------------------------------------------------------
std::list<std::pair<std::string const ,int>> *__thiscall std::list<std::pair<std::string const,int>>::_Tidy(std::list<std::pair<std::string const ,int>> *this)
{
  int v1; // eax
  int v2; // eax
  std::list<std::pair<std::string const ,int>> *result; // eax

  std::list<std::pair<std::string const,int>>::clear(this);
  v1 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v1);
  v2 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  sub_4338F0(*((void **)this + 1), 1);
  result = this;
  *((_DWORD *)this + 1) = 0;
  return result;
}

//----- (0047D3D0) --------------------------------------------------------
unsigned int __thiscall sub_47D3D0(std::allocator<tagRECT> *this)
{
  return std::allocator<tagRECT>::max_size(this);
}

//----- (0047D3F0) --------------------------------------------------------
void __thiscall sub_47D3F0(int this, tagRECT *a2, unsigned int a3, LONG *a4)
{
  unsigned int v4; // esi
  char *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-28h]
  _DWORD *v8; // [esp+Ch] [ebp-20h]
  CMemory **v9; // [esp+10h] [ebp-1Ch]
  tagRECT *_Ptr; // [esp+14h] [ebp-18h]
  unsigned int v11; // [esp+18h] [ebp-14h]
  int v12; // [esp+18h] [ebp-14h]
  tagRECT _Val; // [esp+1Ch] [ebp-10h] BYREF
  unsigned int _Count; // [esp+38h] [ebp+Ch]

  _Val.left = *a4;
  _Val.top = a4[1];
  _Val.right = a4[2];
  _Val.bottom = a4[3];
  v11 = std::vector<tagRECT>::capacity((std::vector<tagRECT> *)this);
  if ( a3 )
  {
    v4 = sub_47D3D0((std::allocator<tagRECT> *)this);
    if ( v4 - std::vector<tagRECT>::size((std::vector<tagRECT> *)this) >= a3 )
    {
      if ( v11 >= a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) >> 4 >= a3 )
        {
          v8 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E30((void *)this, (int)&v8[-4 * a3], (int)v8, v8);
          sub_47D8E0(a2, &v8[-4 * a3], v8);
          std::fill<tagRECT *,tagRECT>(a2, &a2[a3], &_Val);
        }
        else
        {
          sub_431E30((void *)this, (int)a2, *(_DWORD *)(this + 8), &a2[a3]);
          std::vector<tagRECT>::_Ufill(
            (std::vector<tagRECT> *)this,
            *(tagRECT **)(this + 8),
            a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 4),
            &_Val);
          *(_DWORD *)(this + 8) += 16 * a3;
          std::fill<tagRECT *,tagRECT>(a2, (tagRECT *)(*(_DWORD *)(this + 8) - 16 * a3), &_Val);
        }
      }
      else
      {
        if ( sub_47D3D0((std::allocator<tagRECT> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this) )
          v12 = a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this);
        v9 = sub_47D6D0(v12);
        v5 = sub_431E30((void *)this, *(_DWORD *)(this + 4), (int)a2, v9);
        _Ptr = std::vector<tagRECT>::_Ufill((std::vector<tagRECT> *)this, (tagRECT *)v5, a3, &_Val);
        sub_431E30((void *)this, (int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Count = a3 + std::vector<tagRECT>::size((std::vector<tagRECT> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4313B0((void *)this, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 4);
        }
        *(_DWORD *)(this + 12) = &v9[4 * v12];
        *(_DWORD *)(this + 8) = &v9[4 * _Count];
        *(_DWORD *)(this + 4) = v9;
      }
    }
    else
    {
      std::vector<tagShowdownPaticipateInfo>::_Xran((std::vector<tagShowdownPaticipateInfo> *)this);
    }
  }
}

//----- (0047D6D0) --------------------------------------------------------
CMemory **__stdcall sub_47D6D0(int a1)
{
  return sub_47D920(a1);
}

//----- (0047D6F0) --------------------------------------------------------
CMemory **__thiscall std::list<tagSUBPARTICLES *>::_Buynode(std::list<tagPARTICLES *> *this, std::_List_nod<tagPARTICLES *>::_Node *_Next, std::_List_nod<tagPARTICLES *>::_Node *_Prev, tagPARTICLES *const *_Val)
{
  std::_List_nod<tagPARTICLES *>::_Node *v5; // [esp+8h] [ebp-8h]
  CMemory **v6; // [esp+Ch] [ebp-4h]

  v6 = sub_446B40(1);
  v5 = (std::_List_nod<tagPARTICLES *>::_Node *)operator new(0xCu, v6);
  if ( v5 )
    std::_List_nod<tagPARTICLES *>::_Node::_Node(v5, _Next, _Prev, _Val);
  return v6;
}

//----- (0047D760) --------------------------------------------------------
_DWORD *__thiscall sub_47D760(_DWORD *this, unsigned int a2)
{
  void *v2; // eax
  _DWORD *result; // eax
  std::length_error that; // [esp+4h] [ebp-40h] BYREF

  if ( sub_44B800((int)this) - this[2] < a2 )
  {
    std::string::string((std::vector<IPAddrMask> *)&that, "list<T> too long");
    std::length_error::length_error((std::length_error *)(&that._Str._Bx._Ptr + 3), &that);
    std::exception::_Raise(v2);
    sub_40F6E0((std::logic_error *)(&that._Str._Bx._Ptr + 3));
    sub_40F780(&that);
  }
  result = this;
  this[2] += a2;
  return result;
}
// 47D797: variable 'v2' is possibly undefined

//----- (0047D7D0) --------------------------------------------------------
int __thiscall sub_47D7D0(int *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *this;
  return sub_431DB0(&v3, a2);
}

//----- (0047D800) --------------------------------------------------------
std::vector<tagRECT>::iterator *__thiscall std::vector<tagRECT>::iterator::operator+=(std::vector<tagRECT>::iterator *this, int _Off)
{
  *(_DWORD *)this += 16 * _Off;
  return this;
}

//----- (0047D820) --------------------------------------------------------
char *__cdecl sub_47D820(void *a1, int a2, int a3)
{
  unknown_libname_6(&a1, &a1);
  return std::_Uninit_fill_n<tagRECT *,unsigned int,tagRECT,std::allocator<tagRECT>>((char *)a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047D860) --------------------------------------------------------
int __cdecl sub_47D860(int a1, int a2)
{
  unknown_libname_6(&a1, &a2);
  return std::_Destroy_range<tagRECT>(a1, a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047D8A0) --------------------------------------------------------
tagRECT *__cdecl std::fill<tagRECT *,tagRECT>(tagRECT *_First, tagRECT *_Last, const tagRECT *_Val)
{
  tagRECT *result; // eax

  while ( _First != _Last )
  {
    *_First = *_Val;
    result = ++_First;
  }
  return result;
}

//----- (0047D8E0) --------------------------------------------------------
_DWORD *__cdecl sub_47D8E0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  unknown_libname_6(&a1, &a3);
  return std::_Copy_backward_opt<tagRECT *,tagRECT *>(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047D920) --------------------------------------------------------
CMemory **__cdecl sub_47D920(int a1)
{
  return operator new(16 * a1);
}

//----- (0047D940) --------------------------------------------------------
char *__cdecl std::_Uninit_fill_n<tagRECT *,unsigned int,tagRECT,std::allocator<tagRECT>>(char *a1, int a2, int a3)
{
  char *result; // eax

  result = a1;
  while ( a2 )
  {
    result = (char *)sub_47DA10(a1, a3);
    --a2;
    a1 += 16;
  }
  return result;
}

//----- (0047D9A0) --------------------------------------------------------
int __cdecl std::_Destroy_range<tagRECT>(int a1, int a2)
{
  int result; // eax

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 16;
    a1 += 16;
  }
  return result;
}

//----- (0047D9D0) --------------------------------------------------------
char *__cdecl sub_47D9D0(int a1, int a2, void *a3)
{
  unknown_libname_6(&a1, &a3);
  return std::_Uninit_copy<tagRECT *,tagRECT *,std::allocator<tagRECT>>(a1, a2, (char *)a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047DA10) --------------------------------------------------------
LONG *__stdcall sub_47DA10(void *a1, int a2)
{
  return std::_Construct<tagRECT,tagRECT>((tagRECT *)a1, (const tagRECT *)a2);
}

//----- (0047DA30) --------------------------------------------------------
char *__cdecl std::_Uninit_copy<tagRECT *,tagRECT *,std::allocator<tagRECT>>(int a1, int a2, char *a3)
{
  while ( a1 != a2 )
  {
    sub_47DA10(a3, a1);
    a3 += 16;
    a1 += 16;
  }
  return a3;
}

//----- (0047DAA0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47DAA0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(this, (int)&v4, (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047DAD0) --------------------------------------------------------
int __thiscall sub_47DAD0(void *this)
{
  return sub_47DAF0(this);
}

//----- (0047DAF0) --------------------------------------------------------
int __thiscall sub_47DAF0(void *this)
{
  return sub_47DB10((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0047DB10) --------------------------------------------------------
int __thiscall sub_47DB10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_47DBC0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0047DBC0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47DBC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_47DC60((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0047DC60) --------------------------------------------------------
_DWORD *__thiscall sub_47DC60(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_47DCC0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0047DCC0) --------------------------------------------------------
int __stdcall sub_47DCC0(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_47DCC0(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0047DD40) --------------------------------------------------------
void __thiscall CRWLock::CRWLock(CRWLock *this)
{
  this->m_nCount = 0;
  this->m_nLock = 0;
  this->m_hREvent = CreateEventA(0, 0, 0, 0);
  this->m_hWEvent = CreateEventA(0, 0, 0, 0);
  this->m_dwEIP[1] = 0;
  this->m_dwEIP[0] = 0;
}

//----- (0047DDA0) --------------------------------------------------------
void __thiscall CRWLock::~CRWLock(CRWLock *this)
{
  if ( this->m_nCount )
    EBREAK();
  CloseHandle(this->m_hREvent);
  CloseHandle(this->m_hWEvent);
}

//----- (0047DDE0) --------------------------------------------------------
void __thiscall CRWLock::Wait(CRWLock *this)
{
  int v2; // [esp+4h] [ebp-4h]
  int v3; // [esp+4h] [ebp-4h]

  v2 = 4000;
  while ( --v2 >= 0 )
  {
    if ( !InterlockedCompareExchange(&this->m_nLock, 1, 0) )
      return;
    _mm_pause();
  }
  v3 = 4000;
  while ( --v3 >= 0 )
  {
    SwitchToThread();
    if ( !InterlockedCompareExchange(&this->m_nLock, 1, 0) )
      return;
  }
  do
    Sleep(1000u);
  while ( InterlockedCompareExchange(&this->m_nLock, 1, 0) );
}

//----- (0047DE70) --------------------------------------------------------
void __thiscall CRWLock::ReadLock(CRWLock *this)
{
  unsigned int v2; // [esp+8h] [ebp-8h]
  int v3; // [esp+Ch] [ebp-4h]
  int var0; // [esp+10h] [ebp+0h]
  unsigned int retaddr; // [esp+14h] [ebp+4h]

  LOWORD(v3) = InterlockedIncrement(&this->m_nCount);
  if ( (v3 & 0xFF00) != 0 )
  {
    CServer::CreateSocket((CServer *)this);
    v3 = this->m_nCount;
    do
    {
      if ( v3 < 0 )
      {
        if ( (unsigned __int16)InterlockedExchangeAdd(&this->m_nCount, 0xFFFF) == 1 )
        {
          sub_47E060(&this->m_nCount);
          SetEvent(this->m_hWEvent);
        }
        else
        {
          sub_47E060(&this->m_nCount);
        }
        WaitForSingleObject(this->m_hREvent, 0xFFFFFFFF);
        CServer::CreateSocket((CServer *)this);
        v3 = InterlockedExchangeAdd(&this->m_nCount, -65535) - 0xFFFF;
      }
      else
      {
        if ( (unsigned __int16)InterlockedExchangeAdd(&this->m_nCount, 0x7FFFFFFF) == 1 )
        {
          sub_47E060(&this->m_nCount);
          SetEvent(this->m_hWEvent);
        }
        else
        {
          sub_47E060(&this->m_nCount);
        }
        WaitForSingleObject(this->m_hWEvent, 0xFFFFFFFF);
        CServer::CreateSocket((CServer *)this);
        v3 = InterlockedExchangeAdd(&this->m_nCount, -2147483647) - 0x7FFFFFFF;
      }
    }
    while ( (v3 & 0xFF00) != 0 );
    sub_47E060(&this->m_nCount);
    if ( (v3 & 0xFF0000) != 0 )
      SetEvent(this->m_hREvent);
  }
  if ( (char)v3 == 1 )
  {
    v2 = *(_DWORD *)(var0 + 4);
    this->m_dwEIP[0] = retaddr;
    this->m_dwEIP[1] = v2;
  }
}
// 47E00A: variable 'var0' is possibly undefined

//----- (0047E030) --------------------------------------------------------
void __thiscall CServer::CreateSocket(CServer *this)
{
  if ( InterlockedCompareExchange((volatile LONG *)this + 1, 1, 0) )
    CRWLock::Wait(this);
}

//----- (0047E060) --------------------------------------------------------
LONG __thiscall sub_47E060(volatile LONG *this)
{
  return InterlockedExchange(this + 1, 0);
}

//----- (0047E080) --------------------------------------------------------
LONG __thiscall CRWLock::ReadUnlock(CRWLock *this)
{
  LONG result; // eax
  LONG v3; // [esp+4h] [ebp-4h]

  result = InterlockedDecrement(&this->m_nCount);
  v3 = result;
  if ( (result & 0x8080) != 0 )
    EBREAK(result);
  if ( !(_WORD)v3 )
  {
    result = v3 & 0xFF000000;
    if ( (v3 & 0xFF000000) != 0 )
      result = SetEvent(this->m_hWEvent);
  }
  return result;
}

//----- (0047E0D0) --------------------------------------------------------
void __thiscall CRWLock::WriteLock(CRWLock *this)
{
  unsigned int v2; // [esp+8h] [ebp-8h]
  int var0; // [esp+10h] [ebp+0h]
  unsigned int retaddr; // [esp+14h] [ebp+4h]

  if ( (unsigned __int16)InterlockedExchangeAdd(&this->m_nCount, 256) )
  {
    CServer::CreateSocket((CServer *)this);
    do
    {
      if ( (unsigned __int16)InterlockedExchangeAdd(&this->m_nCount, 16776960) == 256 )
      {
        sub_47E060(&this->m_nCount);
        SetEvent(this->m_hWEvent);
      }
      else
      {
        sub_47E060(&this->m_nCount);
      }
      WaitForSingleObject(this->m_hWEvent, 0xFFFFFFFF);
      CServer::CreateSocket((CServer *)this);
    }
    while ( (unsigned __int16)InterlockedExchangeAdd(&this->m_nCount, -16776960) );
    sub_47E060(&this->m_nCount);
  }
  v2 = *(_DWORD *)(var0 + 4);
  this->m_dwEIP[0] = retaddr;
  this->m_dwEIP[1] = v2;
}
// 47E19D: variable 'var0' is possibly undefined

//----- (0047E1C0) --------------------------------------------------------
int __fastcall CRWLock::WriteUnlock(CRWLock *this)
{
  int result; // eax
  int v3; // [esp+4h] [ebp-4h]

  result = InterlockedExchangeAdd(&this->m_nCount, -256) - 256;
  v3 = result;
  if ( (result & 0x8080) != 0 )
    EBREAK(result);
  if ( !(_WORD)v3 )
  {
    result = v3 & 0xFF000000;
    if ( (v3 & 0xFF000000) != 0 )
      result = SetEvent(this->m_hWEvent);
  }
  return result;
}

//----- (0047E220) --------------------------------------------------------
void __thiscall CScreen::CScreen(CScreen *this)
{
  CIOCriticalSection::CIOCriticalSection(&this->m_lock);
  this->m_nWidth = 0;
  this->m_nHeight = 0;
  this->m_nPitch = 0;
  this->m_nLine = 0;
  this->m_pBuffer = 0;
}

//----- (0047E270) --------------------------------------------------------
void __thiscall CScreen::~CScreen(CScreen *this)
{
  j_operator_delete(this->m_pBuffer);
  CIOCriticalSection::~CIOCriticalSection(&this->m_lock);
}
// 4A16B4: using guessed type _DWORD __cdecl j_operator_delete(_DWORD);

//----- (0047E2A0) --------------------------------------------------------
void __thiscall CScreen::Open(CScreen *this, int nWidth, int nHeight)
{
  this->m_nWidth = nWidth;
  this->m_nHeight = nHeight;
  this->m_nPitch = (nWidth + 8) & 0xFFFFFFFC;
  this->m_nLine = 0;
  this->m_pBuffer = (char *)j_operator_new(nHeight * this->m_nPitch);
  memset(this->m_pBuffer, 0, nHeight * this->m_nPitch);
}

//----- (0047E320) --------------------------------------------------------
int CScreen::Add(CScreen *this, unsigned int color, const char *format, ...)
{
  int v4; // [esp+4h] [ebp-8h]
  char *v5; // [esp+8h] [ebp-4h]
  va_list va; // [esp+20h] [ebp+14h] BYREF

  va_start(va, format);
  if ( this->m_nLine == this->m_nHeight )
  {
    v4 = this->m_nLine - 1;
    memcpy_0(this->m_pBuffer, &this->m_pBuffer[this->m_nPitch], this->m_nPitch * v4);
  }
  else
  {
    v4 = this->m_nLine;
    this->m_nLine = v4 + 1;
  }
  v5 = &this->m_pBuffer[this->m_nPitch * v4];
  *(_DWORD *)v5 = color;
  return _vsnprintf(v5 + 4, this->m_nWidth, format, va);
}

//----- (0047E3D0) --------------------------------------------------------
char *__thiscall CLink::Insert(CLink *this, CLink *pLink, char *a3)
{
  CLink *v5; // [esp+4h] [ebp-8h]
  char *v6; // [esp+8h] [ebp-4h]

  if ( this[1].m_pPrev == this[1].m_pNext )
  {
    v5 = (CLink *)((char *)this[1].m_pPrev - 1);
    memcpy_0(this->m_pNext, (char *)this[2].m_pNext + (unsigned int)this->m_pNext, (int)this[2].m_pNext * (_DWORD)v5);
  }
  else
  {
    v5 = this[1].m_pPrev;
    this[1].m_pPrev = (CLink *)((char *)&v5->m_pNext + 1);
  }
  v6 = (char *)this->m_pNext + (int)this[2].m_pNext * (_DWORD)v5;
  *(_DWORD *)v6 = pLink;
  return strncpy(v6 + 4, a3, (size_t)this->m_pPrev);
}

//----- (0047E480) --------------------------------------------------------
void __thiscall CScreen::Empty(CScreen *this)
{
  this->m_nLine = 0;
}

//----- (0047E4A0) --------------------------------------------------------
BOOL __thiscall CScreen::OnPaint(CScreen *this)
{
  int v1; // eax
  HDC hdc; // [esp+4h] [ebp-9Ch]
  struct tagPAINTSTRUCT Paint; // [esp+8h] [ebp-98h] BYREF
  int v6; // [esp+48h] [ebp-58h]
  struct tagRECT Rect; // [esp+4Ch] [ebp-54h] BYREF
  int y; // [esp+5Ch] [ebp-44h]
  struct tagTEXTMETRICA tm; // [esp+60h] [ebp-40h] BYREF
  char *v10; // [esp+98h] [ebp-8h]
  int v11; // [esp+9Ch] [ebp-4h]

  v6 = dword_4D9830;
  hdc = BeginPaint(hWnd, &Paint);
  CScreen::Lock(this);
  GetTextMetricsA(hdc, &tm);
  GetClientRect(hWnd, &Rect);
  y = 0;
  v11 = Rect.bottom / tm.tmHeight;
  if ( this->m_nLine <= Rect.bottom / tm.tmHeight )
  {
    v10 = this->m_pBuffer;
    v11 = this->m_nLine;
  }
  else
  {
    v10 = &this->m_pBuffer[this->m_nPitch * (this->m_nLine - v11)];
  }
  while ( --v11 >= 0 )
  {
    SetTextColor(hdc, *(_DWORD *)v10);
    v1 = strlen(v10 + 4);
    TextOutA(hdc, 0, y, v10 + 4, v1);
    v10 += this->m_nPitch;
    y += tm.tmHeight;
  }
  CScreen::Unlock(this);
  return EndPaint(hWnd, &Paint);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0047E5F0) --------------------------------------------------------
void __cdecl CServer::Start()
{
  time(&dword_4E2148);
  CLink::Initialize(&dword_4E2140);
  CIOObject::Release(&unk_4E2158, *(int *)&nPort);
}

//----- (0047E620) --------------------------------------------------------
void __cdecl CServer::Add(CSocket *pSocket)
{
  const std::pair<int const ,CGame_Character::TargetInfo> *v1; // eax
  int v2; // [esp+0h] [ebp-18h]
  char v3[8]; // [esp+4h] [ebp-14h] BYREF
  int v4; // [esp+Ch] [ebp-Ch]
  char v5[8]; // [esp+10h] [ebp-8h] BYREF

  CRWLock::WriteLock(&unk_4E2170);
  CLink::Insert(&pSocket->m_link, &dword_4E2140);
  v4 = CSocket::Id(pSocket);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v5);
  sub_445DF0(
    (int)dword_4E214C,
    (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v3,
    v1);
  if ( dword_4E2138 <= ++dword_4E213C )
    v2 = dword_4E213C;
  else
    v2 = dword_4E2138;
  dword_4E2138 = v2;
  CRWLock::WriteUnlock(&unk_4E2170);
}
// 47E665: variable 'v1' is possibly undefined
// 4E2138: using guessed type int dword_4E2138;
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E6B0) --------------------------------------------------------
void __cdecl CServer::Remove(CSocket *pSocket)
{
  int v1; // [esp+0h] [ebp-4h] BYREF

  CRWLock::WriteLock(&unk_4E2170);
  CLink::Remove(&pSocket->m_link);
  --dword_4E213C;
  v1 = CSocket::Id(pSocket);
  sub_47E990(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E214C,
    &v1);
  CRWLock::WriteUnlock(&unk_4E2170);
}
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E700) --------------------------------------------------------
int CServer::Size()
{
  return dword_4E213C;
}
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E710) --------------------------------------------------------
int CServer::MaxSize()
{
  return dword_4E2138;
}
// 4E2138: using guessed type int dword_4E2138;

//----- (0047E720) --------------------------------------------------------
void __cdecl CServer::Stop()
{
  CLink *pLink; // [esp+4h] [ebp-4h]

  CIOServer::Stop(&unk_4E2158);
  CRWLock::ReadLock(&unk_4E2170);
  for ( pLink = dword_4E2140.m_pNext; pLink != &dword_4E2140; pLink = pLink->m_pNext )
    CSocket::CloseSocket((CSocket *)&pLink[-14]);
  CRWLock::ReadUnlock(&unk_4E2170);
}

//----- (0047E780) --------------------------------------------------------
void __cdecl CServer::SendAlive()
{
  CSocket *a1; // [esp+0h] [ebp-8h]
  CLink *i; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock(&unk_4E2170);
  for ( i = dword_4E2140.m_pNext; i != &dword_4E2140; i = i->m_pNext )
  {
    a1 = (CSocket *)&i[-14];
    CSocket::Write((CSocket *)&i[-14], S2C_ALIVE, &DefaultNullString);
    if ( InterlockedIncrement((volatile LONG *)&i[7].m_pPrev) >= 5 )
    {
      CSocket::Logout(a1, 0);
      CSocket::Shutdown(a1);
    }
  }
  CRWLock::ReadUnlock(&unk_4E2170);
}

//----- (0047E800) --------------------------------------------------------
CSocket *__cdecl CServer::FindSocket(int nId)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  int v4; // [esp+4h] [ebp-Ch] BYREF
  CSocket *pSocket; // [esp+8h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+Ch] [ebp-4h] BYREF

  pSocket = 0;
  CRWLock::ReadLock(&unk_4E2170);
  v4 = nId;
  sub_44AE20(dword_4E214C, &v6, &v4);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E214C, (int)v3);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &v6,
         v1) )
  {
    pSocket = *(CSocket **)(sub_420250(&v6) + 4);
    CIOObject::AddRef((int)pSocket);
  }
  CRWLock::ReadUnlock(&unk_4E2170);
  return pSocket;
}

//----- (0047E880) --------------------------------------------------------
void CServer::Relogin()
{
  int v0; // eax
  u_long v1; // [esp-14h] [ebp-20h]
  int v2; // [esp-10h] [ebp-1Ch]
  int v3; // [esp-Ch] [ebp-18h]
  int v4; // [esp-8h] [ebp-14h]
  int v5; // [esp-4h] [ebp-10h]
  CSocket *v6; // [esp+0h] [ebp-Ch]
  CLink *v7; // [esp+4h] [ebp-8h]
  CLink *i; // [esp+8h] [ebp-4h]

  if ( dword_4E2168 != -1 )
  {
    CRWLock::ReadLock(&unk_4E2170);
    for ( i = dword_4E2140.m_pNext; i != &dword_4E2140; i = i->m_pNext )
    {
      v6 = (CSocket *)&i[-14];
      v7 = i[5].m_pNext;
      if ( v7 )
      {
        v5 = v6->m_nExpTime;
        v4 = v6->m_nCID;
        v3 = v6->m_nAuthType;
        v2 = v6->m_nPort;
        v1 = v6->m_addr.S_un.S_addr;
        v0 = CSocket::Id(v6);
        CAuthSocket::Write(S2A_RELOGIN, "dddwbdd", v0, v7, v1, v2, v3, v4, v5);
      }
    }
    CRWLock::ReadUnlock(&unk_4E2170);
  }
}
// 4E2168: using guessed type int dword_4E2168;

//----- (0047E940) --------------------------------------------------------
CIOSocket *__thiscall CServer::CreateSocket(CServer *this, int newSocket, sockaddr_in *addr)
{
  CSocket *pSocket; // [esp+0h] [ebp-10h]
  CMemory **v5; // [esp+8h] [ebp-8h]

  v5 = operator new(0x11Cu);
  if ( v5 )
    pSocket = CSocket::CSocket((CSocket *)v5, newSocket, addr);
  else
    pSocket = 0;
  return pSocket;
}

//----- (0047E990) --------------------------------------------------------
int __thiscall sub_47E990(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::vector<KMailSystem::CMailinfo>::iterator,std::vector<KMailSystem::CMailinfo>::iterator> *)&v5,
    a2);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_47E9F0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (0047E9F0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47E9F0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_47EAB0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0047EA90) --------------------------------------------------------
unsigned int __thiscall sub_47EA90(int this)
{
  return std::allocator<std::pair<char const * const,int>>::max_size((std::allocator<std::pair<int const ,CGame_Character::TargetInfo> > *)(this + 3));
}

//----- (0047EAB0) --------------------------------------------------------
_DWORD *__thiscall sub_47EAB0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_47EB60(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0047EB10) --------------------------------------------------------
void *__thiscall sub_47EB10(_DWORD *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_4789A0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (0047EB40) --------------------------------------------------------
int __thiscall sub_47EB40(int *this)
{
  return sub_430F90(this[1]);
}

//----- (0047EB60) --------------------------------------------------------
int __stdcall sub_47EB60(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_47EB60(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0047EBE0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_47EBE0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(this, (int)&v4, (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0047EC10) --------------------------------------------------------
int *__thiscall sub_47EC10(int *this)
{
  int *result; // eax

  this[1] = (int)sub_4471B0();
  *(_BYTE *)sub_431110(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)sub_47EB40(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (0047EC80) --------------------------------------------------------
CIOServer *__thiscall sub_47EC80(CIOServer *this)
{
  CIOServer::CIOServer(this);
  *(_DWORD *)this = &off_4BC224;
  return this;
}
// 4BC224: using guessed type int (__stdcall *off_4BC224)(int);

//----- (0047ECA0) --------------------------------------------------------
void *__thiscall sub_47ECA0(void *this, char a2)
{
  sub_47ECD0((CWin32FileIO *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047ECD0) --------------------------------------------------------
void __thiscall sub_47ECD0(CWin32FileIO *this)
{
  CAnger::~CAnger(this);
}

//----- (0047ECF0) --------------------------------------------------------
int __thiscall sub_47ECF0(void *this)
{
  return sub_47ED10(this);
}

//----- (0047ED10) --------------------------------------------------------
int __thiscall sub_47ED10(void *this)
{
  return sub_47ED30((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0047ED30) --------------------------------------------------------
int __thiscall sub_47ED30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_47E9F0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0047EDE0) --------------------------------------------------------
CInitSkill *__thiscall CInitSkill::CInitSkill(CInitSkill *this)
{
  CBase::CBase();
  this->__vftable = (CInitSkill_vtbl *)&off_4BC240;
  this->m_nV2 = 0;
  this->m_nV1 = 0;
  this->m_dwActionDelay = 0;
  this->m_dwDelay = 0;
  this->m_dwDelayPre = 0;
  this->m_nLastTime = 0;
  this->m_nDecMP = 0;
  this->m_nRage = 0;
  this->m_nRedistribute = 0;
  this->m_nLmtMaxLevel = 0;
  this->m_nLmtSkillLevel = 0;
  this->m_nLmtSkill = 0;
  this->m_dwLmtSpecialty = 0;
  this->m_nLmtLevel = 0;
  this->m_nIndex = 0;
  this->m_nClass = 0;
  return this;
}
// 4BC240: using guessed type int (__stdcall *off_4BC240)(int);

//----- (0047EEA0) --------------------------------------------------------
CInitSkill *__thiscall CInitSkill::`scalar deleting destructor'(CInitSkill *this, char a2)
{
  CInitSkill::~CInitSkill(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0047EED0) --------------------------------------------------------
void __thiscall CInitSkill::~CInitSkill(CInitSkill *this)
{
  CBase::~CBase(this);
}

//----- (0047EEF0) --------------------------------------------------------
int __thiscall CInitSkill::Set(CInitSkill *this, Symbol symbol, lisp::var value)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  int v12; // esi
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  int result; // eax
  lisp::var v22[3]; // [esp-4h] [ebp-58h] BYREF
  CInitSkill *v23; // [esp+8h] [ebp-4Ch]
  lisp::var v24; // [esp+10h] [ebp-44h] BYREF
  lisp::var v25; // [esp+14h] [ebp-40h] BYREF
  lisp::var v26; // [esp+18h] [ebp-3Ch] BYREF
  lisp::var v27; // [esp+1Ch] [ebp-38h] BYREF
  lisp::var v28; // [esp+20h] [ebp-34h] BYREF
  lisp::var v29; // [esp+24h] [ebp-30h] BYREF
  lisp::var v30; // [esp+28h] [ebp-2Ch] BYREF
  lisp::var v31; // [esp+2Ch] [ebp-28h] BYREF
  lisp::var v32; // [esp+30h] [ebp-24h] BYREF
  lisp::var v33; // [esp+34h] [ebp-20h] BYREF
  lisp::var v34; // [esp+38h] [ebp-1Ch] BYREF
  lisp::var v35; // [esp+3Ch] [ebp-18h] BYREF
  lisp::var v36; // [esp+40h] [ebp-14h] BYREF
  lisp::var v37; // [esp+44h] [ebp-10h] BYREF
  lisp::var v38; // [esp+48h] [ebp-Ch] BYREF
  lisp::var v39; // [esp+4Ch] [ebp-8h] BYREF
  lisp::var v40; // [esp+50h] [ebp-4h] BYREF

  v23 = this;
  v22[2].m_pObject = (lisp::_object *)(symbol - 2);
  switch ( symbol )
  {
    case S_INDEX:
      v4 = lisp::var::pop(&value, &v39);
      v23->m_nIndex = lisp::var::operator int(v4);
      goto LABEL_17;
    case S_MP:
      v5 = lisp::var::pop(&value, &v38);
      v23->m_nDecMP = lisp::var::operator int(v5);
      goto LABEL_17;
    case S_CLASS:
      v3 = lisp::var::pop(&value, &v40);
      v23->m_nClass = lisp::var::operator int(v3);
      goto LABEL_17;
    case S_LIMIT:
      v14 = lisp::var::pop(&value, &v30);
      v23->m_nLmtLevel = lisp::var::operator int(v14);
      v15 = lisp::var::pop(&value, &v29);
      v23->m_dwLmtSpecialty = 1 << lisp::var::operator int(v15);
      v16 = lisp::var::pop(&value, &v28);
      v23->m_nLmtSkill = lisp::var::operator int(v16);
      v17 = lisp::var::pop(&value, &v27);
      v23->m_nLmtSkillLevel = lisp::var::operator int(v17);
      goto LABEL_17;
    case S_DELAY:
      v7 = lisp::var::pop(&value, &v36);
      v23->m_dwDelayPre = lisp::var::operator int(v7);
      v8 = lisp::var::pop(&value, &v35);
      v23->m_dwDelay = v23->m_dwDelayPre + lisp::var::operator int(v8);
      v9 = lisp::var::pop(&value, &v34);
      v23->m_dwActionDelay = lisp::var::operator int(v9);
      goto LABEL_17;
    case S_LASTTIME:
      v6 = lisp::var::pop(&value, &v37);
      v23->m_nLastTime = lisp::var::operator int(v6);
      goto LABEL_17;
    case S_VALUE1:
      v10 = lisp::var::pop(&value, &v33);
      v23->m_nV1 = lisp::var::operator int(v10);
      goto LABEL_17;
    case S_VALUE2:
      v11 = lisp::var::pop(&value, &v32);
      v23->m_nV2 = lisp::var::operator int(v11);
      while ( !(unsigned __int8)lisp::var::null(&value) )
      {
        v12 = v23->m_nV2 << 8;
        v13 = lisp::var::pop(&value, &v31);
        v23->m_nV2 = (unsigned __int8)lisp::var::operator int(v13) | v12;
      }
      goto LABEL_17;
    case S_MAXLEVEL:
      v18 = lisp::var::pop(&value, &v26);
      v23->m_nLmtMaxLevel = lisp::var::operator int(v18);
      goto LABEL_17;
    case S_REDISTRIBUTE:
      v19 = lisp::var::pop(&value, &v25);
      v23->m_nRedistribute = lisp::var::operator int(v19);
      goto LABEL_17;
    case S_RAGE:
      v20 = lisp::var::pop(&value, &v24);
      v23->m_nRage = lisp::var::operator int(v20);
LABEL_17:
      result = 1;
      break;
    default:
      v22[0].m_pObject = (lisp::_object *)(symbol - 2);
      lisp::var::var(v22, &value);
      result = CBase::Set(v23, symbol, v22[0]);
      break;
  }
  return result;
}

//----- (0047F1E0) --------------------------------------------------------
int __thiscall CInitSkill::OnLoad(CInitSkill *this)
{
  int v1; // eax
  int result; // eax
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  int v5; // [esp+Ch] [ebp-Ch] BYREF
  int v6; // [esp+10h] [ebp-8h] BYREF
  _DWORD *v7; // [esp+14h] [ebp-4h]

  switch ( this->m_nClass )
  {
    case 0xFFFFFFFE:
      if ( this->m_nIndex < dword_4E2188 )
      {
        v7 = (_DWORD *)dword_4E2690[this->m_nIndex];
        goto LABEL_10;
      }
      LOG_ERR("CInitSkill::OnLoad() Invalid Monster Skill Index (%d)", this->m_nIndex);
      result = 0;
      break;
    case 0xFFFFFFFF:
      v7 = (_DWORD *)dword_4E2568[this->m_nIndex];
      goto LABEL_10;
    case 0:
    case 1:
    case 2:
      v5 = this->m_nIndex + (this->m_nClass << 16);
      sub_446130(dword_4E218C, &v6, (int)&v5);
      v1 = sub_430C20(dword_4E218C, (int)v4);
      if ( (unsigned __int8)unknown_libname_8(v1) )
      {
        result = 0;
      }
      else
      {
        v7 = *(_DWORD **)(sub_420250(&v6) + 4);
LABEL_10:
        v7[1] = this->m_nIndex;
        v7[3] = this->m_nLmtLevel;
        v7[4] = this->m_dwLmtSpecialty;
        v7[5] = this->m_nLmtSkill;
        v7[6] = this->m_nLmtSkillLevel;
        v7[7] = this->m_nLmtMaxLevel;
        v7[8] = this->m_nRedistribute;
        v7[17] = this->m_nRage;
        v7[9] = this->m_nDecMP;
        v7[13] = this->m_nLastTime;
        v7[10] = this->m_dwDelayPre;
        v7[11] = this->m_dwDelay;
        v7[12] = this->m_dwActionDelay;
        v7[14] = this->m_nV1;
        v7[15] = this->m_nV2;
        this->m_nV2 = 0;
        this->m_nV1 = 0;
        this->m_dwActionDelay = 0;
        this->m_dwDelay = 0;
        this->m_dwDelayPre = 0;
        this->m_nLastTime = 0;
        this->m_nDecMP = 0;
        this->m_nRage = 0;
        this->m_nRedistribute = 0;
        this->m_nLmtMaxLevel = 0;
        this->m_nLmtSkillLevel = 0;
        this->m_nLmtSkill = 0;
        this->m_dwLmtSpecialty = 0;
        this->m_nLmtLevel = 0;
        this->m_nIndex = 0;
        this->m_nClass = 0;
        result = 1;
      }
      break;
    default:
      LOG_ERR("CInitSkill::OnLoad() Invalid Skill Class (%d)", this->m_nClass);
      result = 0;
      break;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E2188: using guessed type int dword_4E2188;
// 4E218C: using guessed type int dword_4E218C[3];
// 4E2568: using guessed type int dword_4E2568[];
// 4E2690: using guessed type int dword_4E2690[];

//----- (0047F450) --------------------------------------------------------
CPlayerSkill *__thiscall CPlayerSkill::CPlayerSkill(CPlayerSkill *this)
{
  this->m_pOwner = 0;
  this->m_nClass = 0;
  memset(this->m_pSkill, 0, sizeof(this->m_pSkill));
  this->m_nPtLitning = 0;
  this->m_nPtIce = 0;
  this->m_nPtFire = 0;
  memset(this->m_pTranSkill, 0, sizeof(this->m_pTranSkill));
  return this;
}

//----- (0047F4D0) --------------------------------------------------------
LONG __thiscall CPlayerSkill::~CPlayerSkill(CPlayerSkill *this)
{
  LONG result; // eax
  CSkill *v3; // [esp+4h] [ebp-10h]
  int j; // [esp+8h] [ebp-Ch]
  CSkill *v5; // [esp+Ch] [ebp-8h]
  int i; // [esp+10h] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v5 = this->m_pSkill[i];
    if ( v5 )
      sub_48D900((int)v5);
    result = i + 1;
  }
  for ( j = 0; j < 9; ++j )
  {
    result = j;
    v3 = this->m_pTranSkill[j];
    if ( v3 )
      result = sub_48D900((int)v3);
  }
  return result;
}

//----- (0047F560) --------------------------------------------------------
void __cdecl CPlayerSkill::Open()
{
  std::pair<std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,CSkill *> >,0> >::iterator,bool> *v0; // [esp+0h] [ebp-10h] BYREF
  char v1; // [esp+4h] [ebp-Ch]
  int n; // [esp+8h] [ebp-8h]
  int r; // [esp+Ch] [ebp-4h]

  r = 152;
  for ( n = 0; n < r; ++n )
  {
    sub_48D6D0(
      dword_4E218C,
      (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)&v0,
      (const std::pair<int const ,CGame_Character::TargetInfo> *)(8 * n + 0x4E21A8));
    if ( !v1 )
      LOG_ERR("Duplicate key at Skill Map. (%x)", dword_4E21A8[2 * n]);
  }
}
// 4E218C: using guessed type int dword_4E218C[3];
// 4E21A8: using guessed type int dword_4E21A8[];

//----- (0047F5D0) --------------------------------------------------------
void __cdecl CPlayerSkill::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+8h] [ebp-14h] BYREF
  int v3; // [esp+Ch] [ebp-10h] BYREF
  void *v4; // [esp+10h] [ebp-Ch]
  int i; // [esp+14h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp+18h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E218C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v6);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E218C, (int)v2);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v6,
            v0) )
      break;
    v1 = sub_420250(&v6);
    operator delete(*(void **)(v1 + 4));
    sub_446090((int *)&v6, &v3, 0);
  }
  for ( i = 0; i < 9; ++i )
  {
    v4 = *(&dword_4E2668 + i);
    if ( v4 )
      operator delete(v4);
  }
}
// 4E218C: using guessed type int dword_4E218C[3];

//----- (0047F680) --------------------------------------------------------
CPlayer *__thiscall CPlayerSkill::Init(CPlayerSkill *this, CPlayer *pOwner)
{
  CPlayer *result; // eax

  this->m_pOwner = pOwner;
  result = pOwner;
  this->m_nClass = pOwner->m_nClass;
  return result;
}

//----- (0047F6B0) --------------------------------------------------------
void __thiscall CPlayerSkill::SetSkill(CPlayerSkill *this, int nSkill, int nLevel)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-Ch] BYREF
  CSkill *v8; // [esp+Ch] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator v9; // [esp+10h] [ebp-4h] BYREF

  if ( nSkill < 84 )
  {
    v7 = nSkill + (this->m_nClass << 16);
    sub_446130(dword_4E218C, &v9, (int)&v7);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E218C, (int)v6);
    if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
           &v9,
           v3) )
    {
      v4 = sub_420250(&v9);
      v8 = CSkill::Copy(*(CSkill **)(v4 + 4));
      CSkill::Init(v8, nSkill, nLevel);
      this->m_pSkill[nSkill] = v8;
    }
    else
    {
      LOG_ERR("CPlayerSkill::SetSkill() Can't find Skill(Class:%d, Skill:%d)", this->m_nClass, nSkill);
    }
  }
}
// 4E218C: using guessed type int dword_4E218C[3];

//----- (0047F760) --------------------------------------------------------
CSkill *__thiscall CSkill::Copy(CSkill *this)
{
  _DWORD *v1; // eax

  v1 = CMemoryPool_CSkill::_Alloc();
  return (CSkill *)memcpy(v1, this, 0x4Cu);
}

//----- (0047F780) --------------------------------------------------------
void __thiscall CSkill::Init(CSkill *this, int nSkill, int nLevel)
{
  this->m_nSkill = nSkill;
  this->m_nLevel = nLevel;
}

//----- (0047F7A0) --------------------------------------------------------
void __thiscall CPlayerSkill::LearnSkill(CPlayerSkill *this, int nSkill)
{
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  CSkill *pSkill; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  if ( nSkill < 84 && !CPlayerSkill::IsSkill(this, nSkill) )
  {
    v5 = nSkill + (this->m_nClass << 16);
    sub_446130(dword_4E218C, &v7, (int)&v5);
    v2 = sub_430C20(dword_4E218C, (int)v4);
    if ( !(unsigned __int8)unknown_libname_8(v2) )
    {
      pSkill = *(CSkill **)(sub_420250(&v7) + 4);
      if ( pSkill->CanLearn(pSkill, this->m_pOwner->m_nLevel, this->m_pOwner->m_dwSpecialty) )
      {
        if ( CPlayerSkill::IsLearnSkill(this, pSkill->m_nLmtSkill, pSkill->m_nLmtSkillLevel) )
        {
          pSkill = CSkill::Copy(pSkill);
          CSkill::Init(pSkill, nSkill, 1);
          pSkill->ExcutePassive(pSkill, this->m_pOwner, 0, 0);
          this->m_pSkill[nSkill] = pSkill;
          if ( CPlayerSkill::IsSpendSUPointSkill(this, nSkill) )
            this->m_pOwner->UpdateProperty(this->m_pOwner, 24, 0, 1);
          CPlayer::Write(this->m_pOwner, S2C_SKILLUP, "bb", nSkill, 1);
          CDBSocket::Write(S2D_INSERTSKILL, "dbw", this->m_pOwner->m_nPID, nSkill, this->m_pOwner->m_nSUPoint);
        }
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E218C: using guessed type int dword_4E218C[3];

//----- (0047F910) --------------------------------------------------------
int __thiscall CPlayerSkill::IsLearnSkill(CPlayerSkill *this, int nSkill, int nLevel)
{
  CSkill *pSkill; // [esp+8h] [ebp-4h]

  if ( !nSkill )
    return 1;
  pSkill = this->m_pSkill[nSkill];
  if ( !nLevel )
    return (int)this->m_pSkill[nSkill];
  return pSkill && pSkill->m_nLevel >= nLevel;
}

//----- (0047F970) --------------------------------------------------------
void __thiscall CPlayerSkill::SkillUp(CPlayerSkill *this, signed int nSkill)
{
  int v3; // [esp+4h] [ebp-8h]
  CSkill *v4; // [esp+8h] [ebp-4h]

  if ( nSkill < 84 )
  {
    v4 = this->m_pSkill[nSkill];
    if ( v4 )
    {
      if ( v4->CanSkillUp(v4, this->m_pOwner) )
      {
        v3 = v4->m_nLevel + 1;
        v4->ExcutePassive(v4, this->m_pOwner, v3, 1);
        v4->m_nLevel = v3;
        if ( CPlayerSkill::IsSpendSUPointSkill(this, nSkill) )
          this->m_pOwner->UpdateProperty(this->m_pOwner, 24, 0, 1);
        CPlayer::Write((int)this->m_pOwner, 81, "bb", nSkill, v3);
        CDBSocket::Write(S2D_SKILLUP, "dbbw", this->m_pOwner->m_nPID, nSkill, v3, this->m_pOwner->m_nSUPoint);
      }
    }
  }
}

//----- (0047FA60) --------------------------------------------------------
void __thiscall CPlayerSkill::CheatSkill(CPlayerSkill *this, int nSkill, int nLevel)
{
  int v3; // eax
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-Ch] BYREF
  int v8; // [esp+Ch] [ebp-8h] BYREF
  CSkill *pSkill; // [esp+10h] [ebp-4h]

  pSkill = this->m_pSkill[nSkill];
  if ( pSkill )
  {
    pSkill->ExcutePassive(pSkill, this->m_pOwner, nLevel, 1);
    pSkill->m_nLevel = nLevel;
  }
  else
  {
    v7 = nSkill + (this->m_nClass << 16);
    sub_446130(dword_4E218C, &v8, (int)&v7);
    v3 = sub_430C20(dword_4E218C, (int)v6);
    if ( (unsigned __int8)unknown_libname_8(v3) )
      return;
    v4 = sub_420250(&v8);
    this->m_pSkill[nSkill] = (CSkill *)CSkill::Copy(*(const void **)(v4 + 4));
    pSkill = this->m_pSkill[nSkill];
    CSkill::Init(pSkill, nSkill, nLevel);
    pSkill->ExcutePassive(pSkill, this->m_pOwner, 0, 0);
  }
  CPlayer::Write((int)this->m_pOwner, 81, "bb", nSkill, nLevel);
  CDBSocket::Write(S2D_INSERTSKILL, "dbw", this->m_pOwner->m_nPID, nSkill, this->m_pOwner->m_nSUPoint);
  CDBSocket::Write(S2D_SKILLUP, "dbbw", this->m_pOwner->m_nPID, nSkill, nLevel, this->m_pOwner->m_nSUPoint);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E218C: using guessed type int dword_4E218C[3];

//----- (0047FBB0) --------------------------------------------------------
void __thiscall CPlayerSkill::ExcuteSkill(CPlayerSkill *this, int nSkill, char *packet, char *end)
{
  CSkill *pSkill; // [esp+4h] [ebp-4h]

  if ( nSkill < 84 )
  {
    pSkill = this->m_pSkill[nSkill];
    if ( pSkill )
      pSkill->Excute(pSkill, this->m_pOwner, packet, end);
  }
}

//----- (0047FC00) --------------------------------------------------------
void __thiscall CPlayerSkill::ExcutePassiveSkill(CPlayerSkill *this)
{
  CSkill *pSkill; // [esp+4h] [ebp-8h]
  int n; // [esp+8h] [ebp-4h]

  for ( n = 0; n < 84; ++n )
  {
    pSkill = this->m_pSkill[n];
    if ( pSkill )
      pSkill->ExcutePassive(pSkill, this->m_pOwner, 0, 0);
  }
}

//----- (0047FC50) --------------------------------------------------------
int CPlayerSkill::ExcutePassiveSkill(CPlayerSkill *a1, int nSkill, ...)
{
  int result; // eax
  CSkill *v3; // [esp+4h] [ebp-4h]
  va_list va; // [esp+18h] [ebp+10h] BYREF

  va_start(va, nSkill);
  result = nSkill;
  v3 = a1->m_pSkill[nSkill];
  if ( v3 )
    result = ((int (__thiscall *)(CSkill *, CPlayer *, char *))v3->ExcutePassiveV)(v3, a1->m_pOwner, va);
  return result;
}

//----- (0047FC90) --------------------------------------------------------
void __thiscall CPlayerSkill::ExcuteTransformSkill(CPlayerSkill *this, int nSkill, char *packet, char *end)
{
  CSkill *pSkill; // [esp+4h] [ebp-4h]
  int nSkilla; // [esp+10h] [ebp+8h]

  if ( nSkill >= 64 && nSkill < 93 && this->m_pOwner->m_pTransform && CChar::IsGState(this->m_pOwner, 512) )
  {
    nSkilla = nSkill - 64;
    pSkill = this->m_pTranSkill[nSkilla];
    if ( !pSkill )
    {
      this->m_pTranSkill[nSkilla] = CSkill::Copy((CSkill *)dword_4E2668[nSkilla]);
      pSkill = this->m_pTranSkill[nSkilla];
    }
    if ( pSkill->m_nV1 == this->m_pOwner->m_nTFlag >> 4 && (this->m_pOwner->m_nTFlag & 0xF) >= pSkill->m_nLmtLevel )
      pSkill->Excute(pSkill, this->m_pOwner, packet, end);
  }
}
// 4E2668: using guessed type int dword_4E2668[];

//----- (0047FD70) --------------------------------------------------------
int __thiscall CPlayerSkill::IsSpendSUPointSkill(CPlayerSkill *this, int nSkillNum)
{
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+4h] [ebp-8h]

  if ( nSkillNum == 11 )
    return 0;
  if ( this->m_pOwner->m_dwSpecialty > 3 )
  {
    if ( nSkillNum == 30 )
      return 0;
    v3 = this->m_pOwner->m_nClass;
    if ( v3 )
    {
      if ( v3 == 1 && (this->m_pOwner->m_dwSpecialty & 8) != 0 && nSkillNum == 61 )
        return 0;
    }
    else if ( (this->m_pOwner->m_dwSpecialty & 8) != 0 && (nSkillNum == 18 || nSkillNum == 14 || nSkillNum == 35) )
    {
      return 0;
    }
  }
  else
  {
    v4 = this->m_pOwner->m_nClass;
    if ( v4 )
    {
      if ( v4 == 1 )
      {
        if ( nSkillNum == 5 )
          return 0;
        if ( nSkillNum >= 17 && nSkillNum <= 21 )
          return 0;
      }
      else if ( v4 == 2 )
      {
        if ( nSkillNum == 7 )
          return 0;
        if ( nSkillNum == 15 )
          return 0;
      }
    }
    else
    {
      if ( nSkillNum == 14 && this->m_pSkill[14] && this->m_pSkill[14]->m_nLevel == 1 )
        return 0;
      if ( nSkillNum == 4 && this->m_pSkill[4] && this->m_pSkill[4]->m_nLevel == 1 )
        return 0;
      if ( nSkillNum == 6 && this->m_pSkill[6] && this->m_pSkill[6]->m_nLevel == 1 )
        return 0;
      if ( nSkillNum == 15 )
        return 0;
    }
  }
  return 1;
}

//----- (0047FF00) --------------------------------------------------------
int __thiscall CPlayerSkill::LevelUpAutoLearnSkill(CPlayerSkill *this, int nLevel)
{
  int result; // eax
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+4h] [ebp-8h]

  if ( !nLevel )
    nLevel = this->m_pOwner->m_nLevel;
  if ( this->m_pOwner->m_dwSpecialty > 3 )
  {
    if ( nLevel == 55 || nLevel == 60 || nLevel == 65 || nLevel == 70 )
      CPlayerSkill::SkillUp(this, 30);
    result = (int)this->m_pOwner;
    v3 = this->m_pOwner->m_nClass;
    if ( v3 )
    {
      if ( v3 == 1 )
      {
        result = (int)this->m_pOwner;
        if ( (this->m_pOwner->m_dwSpecialty & 8) != 0 && nLevel == 59 )
          CPlayerSkill::LearnSkill(this, 61);
      }
    }
    else
    {
      result = (int)this->m_pOwner;
      if ( (this->m_pOwner->m_dwSpecialty & 8) != 0 )
      {
        if ( nLevel == 56 || nLevel == 62 || nLevel == 70 )
          CPlayerSkill::SkillUp(this, 18);
        if ( nLevel == 53 || nLevel == 62 )
          CPlayerSkill::SkillUp(this, 14);
        if ( nLevel == 59 )
          CPlayerSkill::LearnSkill(this, 35);
        if ( nLevel == 69 )
          CPlayerSkill::SkillUp(this, 35);
      }
    }
  }
  else
  {
    result = (int)this->m_pOwner;
    v4 = this->m_pOwner->m_nClass;
    if ( v4 )
    {
      if ( v4 == 1 )
      {
        if ( nLevel == 25 )
          CPlayerSkill::LearnSkill(this, 5);
        if ( nLevel == 35 )
          CPlayerSkill::LearnSkill(this, 18);
        if ( nLevel == 40 )
          CPlayerSkill::LearnSkill(this, 19);
        if ( nLevel == 45 )
          CPlayerSkill::LearnSkill(this, 20);
        if ( nLevel == 50 )
          CPlayerSkill::LearnSkill(this, 21);
      }
      else if ( v4 == 2 )
      {
        if ( nLevel == 25 )
          CPlayerSkill::LearnSkill(this, 15);
        if ( nLevel == 35 || nLevel == 40 || nLevel == 45 || nLevel == 50 )
          CPlayerSkill::SkillUp(this, 7);
      }
    }
    else
    {
      if ( nLevel == 15 )
        CPlayerSkill::LearnSkill(this, 14);
      if ( nLevel == 18 )
        CPlayerSkill::LearnSkill(this, 4);
      if ( nLevel == 25 )
        CPlayerSkill::LearnSkill(this, 15);
    }
  }
  return result;
}

//----- (004800E0) --------------------------------------------------------
void __thiscall CPlayerSkill::ChangeOccupationAutoLearnSkill(CPlayerSkill *this)
{
  int v1; // [esp+4h] [ebp-10h]
  int nLevel_; // [esp+Ch] [ebp-8h]
  int nLevel; // [esp+10h] [ebp-4h]

  if ( this->m_pOwner->m_dwSpecialty == 3 )
  {
    if ( this->m_pOwner->m_nLevel < 30 )
    {
LABEL_3:
      LOG_ERR("CPlayerSkill::ChangeOccupationAutoLearnSkill()  not enough Level(%d)", this->m_pOwner->m_nLevel);
      return;
    }
    CPlayerSkill::SkillUp(this, 11);
    v1 = this->m_pOwner->m_nClass;
    if ( v1 )
    {
      if ( v1 == 1 )
      {
        CPlayerSkill::LearnSkill(this, 17);
      }
      else if ( v1 == 2 )
      {
        CPlayerSkill::LearnSkill(this, 7);
      }
    }
    else
    {
      CPlayerSkill::LearnSkill(this, 6);
    }
    for ( nLevel = 31; nLevel <= 50; ++nLevel )
      CPlayerSkill::LevelUpAutoLearnSkill(this, nLevel);
  }
  else if ( this->m_pOwner->m_dwSpecialty > 3 )
  {
    if ( this->m_pOwner->m_nLevel < 50 )
      goto LABEL_3;
    CPlayerSkill::LearnSkill(this, 30);
    if ( !this->m_pOwner->m_nClass && (this->m_pOwner->m_dwSpecialty & 8) != 0 )
      CPlayerSkill::LearnSkill(this, 18);
    for ( nLevel_ = 51; nLevel_ <= this->m_pOwner->m_nLevel; ++nLevel_ )
      CPlayerSkill::LevelUpAutoLearnSkill(this, nLevel_);
  }
}

//----- (00480240) --------------------------------------------------------
void __thiscall CPlayerSkill::Redistribute(CPlayerSkill *this, unsigned int nSkill)
{
  CSkill *pSkill; // [esp+8h] [ebp-4h]

  if ( (int)nSkill < 84 )
  {
    pSkill = this->m_pSkill[nSkill];
    if ( pSkill )
    {
      if ( pSkill->m_nRedistribute
        && (CPlayer::RemoveItem(this->m_pOwner, 9, 362, 1) || CPlayer::RemoveItem(this->m_pOwner, 9, 502, 1)) )
      {
        if ( pSkill->Redistribute(pSkill, this->m_pOwner) )
          operator delete(pSkill);
      }
    }
  }
}

//----- (004802D0) --------------------------------------------------------
void __thiscall CPlayerSkill::RedistributeAll(CPlayerSkill *this)
{
  CSkill *pSkill; // [esp+8h] [ebp-8h]
  int nSkill; // [esp+Ch] [ebp-4h]

  for ( nSkill = 0; nSkill < 84; ++nSkill )
  {
    pSkill = this->m_pSkill[nSkill];
    if ( pSkill && pSkill->m_nRedistribute )
    {
      if ( pSkill->Redistribute(pSkill, this->m_pOwner) )
        operator delete(pSkill);
    }
  }
}

//----- (00480340) --------------------------------------------------------
void __thiscall CPlayerSkill::RedistributeChild(CPlayerSkill *this, int nSkill)
{
  CSkill *pSkill; // [esp+8h] [ebp-4h]

  pSkill = this->m_pSkill[nSkill];
  if ( pSkill )
  {
    if ( pSkill->Redistribute(pSkill, this->m_pOwner) )
      operator delete(pSkill);
  }
}

//----- (00480390) --------------------------------------------------------
int __thiscall CPlayerSkill::PreSkill(CPlayerSkill *this, int nSkill, int nTargetId)
{
  int result; // eax
  CSkill *v4; // [esp+4h] [ebp-4h]

  if ( nSkill >= 64 )
    return 1;
  v4 = this->m_pSkill[nSkill];
  if ( v4 )
    result = v4->PreExcute(v4, this->m_pOwner, nTargetId);
  else
    result = 0;
  return result;
}

//----- (004803E0) --------------------------------------------------------
void __thiscall CPlayerSkill::Redis2ndJobSkill(CPlayerSkill *this)
{
  CSkill *v2; // [esp+14h] [ebp-14h]
  CSkill *v3; // [esp+18h] [ebp-10h]
  CSkill *v4; // [esp+1Ch] [ebp-Ch]
  CSkill *v5; // [esp+20h] [ebp-8h]
  int i; // [esp+24h] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v5 = this->m_pSkill[i];
    if ( v5 && v5->m_nRedistribute )
    {
      if ( v5->Redistribute(v5, this->m_pOwner) )
        operator delete(v5);
    }
  }
  if ( this->m_pOwner->m_nClass )
  {
    if ( this->m_pOwner->m_nClass == 1 && (this->m_pOwner->m_dwSpecialty & 4) != 0 )
    {
      v2 = this->m_pSkill[61];
      if ( v2 )
      {
        if ( CSkill::RedistributeByForce(v2, &this->m_pOwner->__vftable) )
          operator delete(v2);
      }
    }
  }
  else if ( (this->m_pOwner->m_dwSpecialty & 4) != 0 )
  {
    v3 = this->m_pSkill[18];
    if ( v3 && CSkill::RedistributeByForce(v3, &this->m_pOwner->__vftable) )
      operator delete(v3);
    v4 = this->m_pSkill[35];
    if ( v4 && CSkill::RedistributeByForce(v4, &this->m_pOwner->__vftable) )
      operator delete(v4);
  }
  CPlayerSkill::ChangeOccupationAutoLearnSkill(this);
}

//----- (00480540) --------------------------------------------------------
void __thiscall CPlayerSkill::UpperChanceStone(CPlayerSkill *this)
{
  int v1; // eax
  char v3[4]; // [esp+8h] [ebp-44h] BYREF
  int v4[7]; // [esp+Ch] [ebp-40h] BYREF
  CSkill *pSkill________; // [esp+28h] [ebp-24h]
  CSkill *pSkill_______; // [esp+2Ch] [ebp-20h]
  int v7; // [esp+30h] [ebp-1Ch] BYREF
  CSkill *pSkill______; // [esp+34h] [ebp-18h]
  CSkill *pSkill_____; // [esp+38h] [ebp-14h]
  CSkill *pSkill____; // [esp+3Ch] [ebp-10h]
  CSkill *pSkill__; // [esp+40h] [ebp-Ch]
  CSkill *pSkill; // [esp+44h] [ebp-8h]
  int nSkill; // [esp+48h] [ebp-4h]

  for ( nSkill = 0; nSkill < 84; ++nSkill )
  {
    pSkill = this->m_pSkill[nSkill];
    if ( pSkill && pSkill->m_nRedistribute )
    {
      if ( pSkill->Redistribute(pSkill, this->m_pOwner) )
      {
        v4[6] = (int)pSkill;
        operator delete(pSkill);
      }
    }
  }
  if ( this->m_pOwner->m_nClass )
  {
    if ( this->m_pOwner->m_nClass == 1 )
    {
      pSkill_______ = this->m_pSkill[4];
      this->m_pOwner->UpdateProperty(this->m_pOwner, 24, 1, pSkill_______->m_nLevel - 1);
      if ( pSkill_______ && CSkill::RedistributeByForce(pSkill_______, this->m_pOwner) )
      {
        v4[1] = (int)pSkill_______;
        operator delete(pSkill_______);
      }
      v4[0] = (this->m_nClass << 16) + 4;
      sub_446130(dword_4E218C, &v7, (int)v4);
      v1 = sub_430C20(dword_4E218C, (int)v3);
      if ( !(unsigned __int8)unknown_libname_8(v1) )
      {
        pSkill_______ = *(CSkill **)(sub_420250(&v7) + 4);
        pSkill_______ = CSkill::Copy(pSkill_______);
        CSkill::Init(pSkill_______, 4, 1);
        pSkill_______->ExcutePassive(pSkill_______, this->m_pOwner, 0, 0);
        this->m_pSkill[4] = pSkill_______;
        CPlayer::Write(this->m_pOwner, S2C_SKILLUP, "bb", 4, 1);
        CDBSocket::Write(S2D_INSERTSKILL, "dbw", this->m_pOwner->m_nPID, 4, this->m_pOwner->m_nSUPoint);
      }
      if ( (this->m_pOwner->m_dwSpecialty & 4) != 0 )
      {
        pSkill________ = this->m_pSkill[61];
        if ( pSkill________ )
        {
          if ( CSkill::RedistributeByForce(pSkill________, this->m_pOwner) )
            operator delete(pSkill________);
        }
      }
    }
  }
  else if ( (this->m_pOwner->m_dwSpecialty & 4) != 0 )
  {
    pSkill_____ = this->m_pSkill[18];
    if ( pSkill_____ && CSkill::RedistributeByForce(pSkill_____, this->m_pOwner) )
    {
      v4[5] = (int)pSkill_____;
      operator delete(pSkill_____);
    }
    pSkill____ = this->m_pSkill[35];
    if ( pSkill____ && CSkill::RedistributeByForce(pSkill____, this->m_pOwner) )
    {
      v4[4] = (int)pSkill____;
      operator delete(pSkill____);
    }
    pSkill__ = this->m_pSkill[4];
    if ( pSkill____ && CSkill::RedistributeByForce(pSkill____, this->m_pOwner) )
    {
      v4[3] = (int)pSkill__;
      operator delete(pSkill__);
    }
    pSkill______ = this->m_pSkill[6];
    if ( pSkill____ && CSkill::RedistributeByForce(pSkill____, this->m_pOwner) )
    {
      v4[2] = (int)pSkill______;
      operator delete(pSkill______);
    }
  }
  CPlayerSkill::ChangeOccupationAutoLearnSkill(this);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E218C: using guessed type int dword_4E218C[3];

//----- (00480830) --------------------------------------------------------
CMonsterSkill *__thiscall CMonsterSkill::CMonsterSkill(CMonsterSkill *this)
{
  sub_48D680((std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)&this->m_mapMSkill);
  this->m_pOwner = 0;
  this->m_pCurSkill = 0;
  this->m_dwTick = 0;
  return this;
}

//----- (00480870) --------------------------------------------------------
int __thiscall CMonsterSkill::~CMonsterSkill(CMonsterSkill *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v5[4]; // [esp+4h] [ebp-Ch] BYREF
  int v6; // [esp+8h] [ebp-8h] BYREF
  std::vector<CIOSocket::CIOTimer>::const_iterator v7; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapMSkill,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&this->m_mapMSkill, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v7,
            v1) )
      break;
    v2 = sub_420250(&v7);
    sub_48D900(*(_DWORD *)(v2 + 4));
    sub_446090((int *)&v7, &v6, 0);
  }
  return sub_4808E0(&this->m_mapMSkill);
}

//----- (004808E0) --------------------------------------------------------
int __thiscall sub_4808E0(void *this)
{
  return sub_48D6B0(this);
}

//----- (00480900) --------------------------------------------------------
void CMonsterSkill::Open()
{
  dword_4E2188 = 41;
}
// 4E2188: using guessed type int dword_4E2188;

//----- (00480910) --------------------------------------------------------
void __cdecl CMonsterSkill::Close()
{
  int n; // [esp+4h] [ebp-8h]
  int nMax; // [esp+8h] [ebp-4h]

  nMax = dword_4E2188;
  dword_4E2188 = 0;
  for ( n = 0; n < nMax; ++n )
    operator delete((void *)dword_4E2690[n]);
}
// 4E2188: using guessed type int dword_4E2188;
// 4E2690: using guessed type int dword_4E2690[];

//----- (00480970) --------------------------------------------------------
int __thiscall CMonsterSkill::SetCurSkill(CMonsterSkill *this, int nSkill)
{
  int v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  CSkill *pSkill; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h] BYREF

  if ( this->m_pCurSkill )
    return 0;
  v6 = nSkill;
  sub_446130(&this->m_mapMSkill, &v8, (int)&v6);
  v3 = sub_430C20(&this->m_mapMSkill, (int)v5);
  if ( (unsigned __int8)unknown_libname_8(v3) )
    return 0;
  pSkill = *(CSkill **)(sub_420250(&v8) + 4);
  if ( GetTickCount() < pSkill->m_dwTick )
    return 0;
  this->m_pCurSkill = pSkill;
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00480A00) --------------------------------------------------------
int __thiscall CMonsterSkill::SetCurSkillDefault(CMonsterSkill *this)
{
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  CSkill *pSkill; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  if ( this->m_pCurSkill )
    return 0;
  std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&this->m_mapMSkill,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  v2 = sub_430C20(&this->m_mapMSkill, (int)v4);
  if ( (unsigned __int8)unknown_libname_8(v2) )
    return 0;
  pSkill = *(CSkill **)(sub_420250(v6) + 4);
  if ( GetTickCount() < pSkill->m_dwTick )
    return 0;
  this->m_pCurSkill = pSkill;
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00480A80) --------------------------------------------------------
void __thiscall CMonsterSkill::LoadSkill(CMonsterSkill *this, CMonster *pOwner)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int *v3; // eax
  int v4; // edx
  const std::pair<int const ,CGame_Character::TargetInfo> *v5; // eax
  char v7[8]; // [esp+8h] [ebp-2Ch] BYREF
  char v8[4]; // [esp+10h] [ebp-24h] BYREF
  int v9; // [esp+14h] [ebp-20h] BYREF
  char v10[8]; // [esp+18h] [ebp-1Ch] BYREF
  CSkill *pSkill; // [esp+20h] [ebp-14h]
  int nSkill; // [esp+24h] [ebp-10h]
  int nLevel; // [esp+28h] [ebp-Ch]
  std::vector<CIOSocket::CIOTimer>::const_iterator v14; // [esp+2Ch] [ebp-8h] BYREF
  std::vector<MSKILL> *vec; // [esp+30h] [ebp-4h]

  vec = &pOwner->m_pInit->m_vecMSkill;
  sub_430C20(vec, (int)&v14);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(vec, (int)v8);
    if ( !std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
            &v14,
            v2) )
      break;
    v3 = (int *)sub_420010(&v14);
    v4 = v3[1];
    nSkill = *v3;
    nLevel = v4;
    if ( nSkill < dword_4E2188 )
    {
      pSkill = CSkill::Copy(*(&dword_4E2690 + nSkill));
      CSkill::Init(pSkill, nSkill, nLevel);
      std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)v7);
      sub_48D6D0(
        (int *)&this->m_mapMSkill,
        (std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *)v10,
        v5);
      if ( !v10[4] )
        sub_48D900((int)pSkill);
    }
    sub_430E30((int *)&v14, &v9, 0);
  }
  this->m_pOwner = pOwner;
}
// 480B3A: variable 'v5' is possibly undefined
// 4E2188: using guessed type int dword_4E2188;

//----- (00480B70) --------------------------------------------------------
int __thiscall CMonsterSkill::PreSkill(CMonsterSkill *this, CChar *pTarget)
{
  int v3; // [esp+0h] [ebp-14h]
  int v5; // [esp+Ch] [ebp-8h]
  unsigned int v6; // [esp+10h] [ebp-4h]

  v6 = GetTickCount();
  if ( v6 < this->m_pOwner->m_dwNextAction || !this->m_pCurSkill )
    return 0;
  if ( this->m_dwTick )
  {
    if ( v6 >= this->m_dwTick )
      return 1;
    this->m_pCurSkill->PreExcuteM(this->m_pCurSkill, this->m_pOwner);
  }
  else
  {
    v5 = CBase::Id(this->m_pOwner);
    if ( pTarget )
      v3 = CBase::Id(pTarget);
    else
      v3 = v5;
    CChar::WriteInSight(this->m_pOwner, S2C_ACTION, "dbbd", v5, 5, this->m_pCurSkill->m_nSkill, v3);
    this->m_dwTick = this->m_pCurSkill->m_dwDelayPre + v6;
  }
  return 0;
}

//----- (00480C50) --------------------------------------------------------
void __thiscall CMonsterSkill::ExcuteSkill(CMonsterSkill *this, CChar *pTarget)
{
  if ( pTarget )
  {
    CIOObject::AddRef(pTarget, &pTarget->m_nFindRef);
    this->m_pCurSkill->ExcuteM(this->m_pCurSkill, this->m_pOwner, pTarget);
    CIOObject::Release(pTarget, &pTarget->m_nFindRef);
  }
  else
  {
    this->m_pCurSkill->ExcuteM(this->m_pCurSkill, this->m_pOwner, 0);
  }
  CMonsterSkill::ResetCurSkill(this);
}

//----- (00480CD0) --------------------------------------------------------
void __thiscall CMonsterSkill::ResetCurSkill(CMonsterSkill *this)
{
  this->m_pCurSkill = 0;
  this->m_dwTick = 0;
}

//----- (00480CF0) --------------------------------------------------------
void __thiscall CMonsterSkill::ExcuteSkillWithoutResetSkill(CMonsterSkill *this, CChar *pTarget)
{
  if ( pTarget )
  {
    CIOObject::AddRef(pTarget, &pTarget->m_nFindRef);
    this->m_pCurSkill->ExcuteM(this->m_pCurSkill, this->m_pOwner, pTarget);
    CIOObject::Release(pTarget, &pTarget->m_nFindRef);
  }
}

//----- (00480D40) --------------------------------------------------------
CSkill *__thiscall CSkill::CSkill(CSkill *this)
{
  this->__vftable = (CSkill_vtbl *)&off_4BDD60;
  this->m_nSkill = -1;
  this->m_nLevel = 0;
  this->m_nLmtLevel = 0;
  this->m_dwLmtSpecialty = 0;
  this->m_nLmtSkill = 0;
  this->m_nLmtSkillLevel = 0;
  this->m_nLmtMaxLevel = 0;
  this->m_nRedistribute = 0;
  this->m_nDecMP = 0;
  this->m_nLastTime = 0;
  this->m_dwDelayPre = 0;
  this->m_dwDelay = 0;
  this->m_dwActionDelay = 0;
  this->m_nV1 = 0;
  this->m_nV2 = 0;
  this->m_dwTick = 0;
  this->m_nRage = 0;
  this->m_nContiCnt = 0;
  return this;
}
// 4BDD60: using guessed type int (__stdcall *off_4BDD60)(int, int);

//----- (00480E10) --------------------------------------------------------
unsigned int __thiscall CSkill::GetDelay(CSkill *this, CPlayer *pOwner)
{
  unsigned int v3; // [esp+0h] [ebp-8h]

  if ( this->m_dwDelay )
    v3 = this->m_dwDelay;
  else
    v3 = 1;
  return v3;
}

//----- (00480E40) --------------------------------------------------------
BOOL __thiscall CSkill::CanLearn(CSkill *this, int nLevel, int dwSpecialty)
{
  return nLevel >= this->m_nLmtLevel && (this->m_dwLmtSpecialty & dwSpecialty) != 0;
}

//----- (00480E80) --------------------------------------------------------
BOOL __thiscall CSkill::CanExcute(CSkill *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pOwner)
      && CChar::IsNormal(pTarget)
      && pOwner->m_nMap == pTarget->m_nMap
      && !CChar::IsGState(pOwner, 512)
      && CPlayer::IsWState(pOwner, 0)
      && pOwner->m_nCurMP >= this->GetSpendMP(this, 0)
      && pOwner->CanAttack(pOwner, pTarget, 0);
}

//----- (00480F20) --------------------------------------------------------
unsigned int __thiscall CSkill::ReviseTick(CSkill *this, CPlayer *pOwner)
{
  unsigned int v3; // [esp+0h] [ebp-14h]
  unsigned int dwTick; // [esp+8h] [ebp-Ch]
  unsigned int dwDelay; // [esp+Ch] [ebp-8h]
  DWORD dwCurTick; // [esp+10h] [ebp-4h]

  dwDelay = this->GetDelay(this, pOwner);
  dwCurTick = GetTickCount();
  dwTick = this->m_dwTick;
  this->m_dwTick = dwDelay + dwCurTick;
  if ( dwCurTick >= dwTick )
    v3 = dwDelay;
  else
    v3 = dwCurTick + dwDelay - dwTick;
  return v3;
}

//----- (00480F80) --------------------------------------------------------
BOOL __stdcall CSkill::CanContiSkill(CSkill *this, CPlayer *pOwner, CChar *pChar)
{
  int nLevelGab; // [esp+4h] [ebp-4h] MAPDST

  nLevelGab = this->m_nV2 - pOwner->m_nLevel;
  if ( nLevelGab <= 0 )
  {
    if ( nLevelGab < -9 )
      nLevelGab = -9;
    nLevelGab = abs(nLevelGab);
  }
  else
  {
    if ( nLevelGab > 3 )
      nLevelGab = 3;
    nLevelGab += 10;
  }
  return dword_4D8CAC[nLevelGab] >= Random(1, 100);
}

//----- (00481000) --------------------------------------------------------
BOOL __thiscall CSkill::CanSkillUp(CSkill *this, CPlayer *pOwner)
{
  BOOL result; // eax

  if ( this->m_nLevel < this->m_nLmtMaxLevel )
    result = pOwner->m_nLevel > this->m_nLmtLevel + this->m_nLevel - 1;
  else
    result = 0;
  return result;
}

//----- (00481040) --------------------------------------------------------
int __thiscall CSkill::SpendMPRage(CSkill *this, CPlayer *pOwner)
{
  int v2; // eax

  v2 = this->GetSpendMP(this, 0);
  return ((int (__cdecl *)(CPlayer *, int, _DWORD, int))pOwner->UpdateProperty)(pOwner, 8, 0, v2);
}

//----- (00481070) --------------------------------------------------------
int __thiscall CSkill::Redistribute(CSkill *this, CPlayer *pOwner)
{
  int nBaseLevel; // [esp+4h] [ebp-4h]

  nBaseLevel = dword_4D8D00[96 * pOwner->m_nClass + this->m_nSkill];
  this->ExcutePassive(this, pOwner, nBaseLevel, 1);
  pOwner->UpdateProperty(pOwner, 24, 1, this->m_nLevel - nBaseLevel);
  this->m_nLevel = nBaseLevel;
  CPlayer::Write(pOwner, S2C_SKILLREDISTRIBUTE, "bb", this->m_nSkill, 0);
  CDBSocket::Write(S2D_SKILLREDISTRIBUTE, "dbbw", pOwner->m_nPID, this->m_nSkill, this->m_nLevel, pOwner->m_nSUPoint);
  if ( nBaseLevel )
    return 0;
  pOwner->m_skill.m_pSkill[this->m_nSkill] = 0;
  return 1;
}
// 4D8D00: using guessed type int dword_4D8D00[];

//----- (00481150) --------------------------------------------------------
int __thiscall CSkill::RedistributeByForce(CSkill *this, CPlayer *pOwner)
{
  int nBaseLevel; // [esp+4h] [ebp-4h]

  nBaseLevel = dword_4D8D00[96 * pOwner->m_nClass + this->m_nSkill];
  this->ExcutePassive(this, pOwner, nBaseLevel, 1);
  this->m_nLevel = nBaseLevel;
  CPlayer::Write(pOwner, S2C_SKILLREDISTRIBUTE, "bb", this->m_nSkill, 1);
  CDBSocket::Write(S2D_SKILLREDISTRIBUTE, "dbbw", pOwner->m_nPID, this->m_nSkill, this->m_nLevel, pOwner->m_nSUPoint);
  if ( nBaseLevel )
    return 0;
  pOwner->m_skill.m_pSkill[this->m_nSkill] = 0;
  return 1;
}
// 4D8D00: using guessed type int dword_4D8D00[];

//----- (00481210) --------------------------------------------------------
void __thiscall CBoost::Excute(CBoost *this, CPlayer *pOwner, char *packet, char *end)
{
  char byBoost; // [esp+27h] [ebp-1h] BYREF

  ScanPacket(packet, end, "b", &byBoost);
  if ( byBoost )
  {
    if ( !CChar::IsMState(pOwner, 1i64) && pOwner->m_nCurMP >= this->m_nDecMP && !CPlayer::IsWearBuffStandard(pOwner) )
    {
      if ( CChar::IsMState(pOwner, 8i64) )
        CChar::CancelBuff(pOwner, 2);
      if ( CChar::IsMState(pOwner, 0x2000i64) )
        CChar::CancelBuff(pOwner, 12);
      ((void (__thiscall *)(CPlayer *, int, _DWORD))pOwner->AddMState)(pOwner, 1, 0);
      CPlayer::Rest(pOwner, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, this->m_nDecMP);
    }
  }
  else if ( CChar::IsMState(pOwner, 1i64) )
  {
    ((void (__thiscall *)(CPlayer *, int, _DWORD))pOwner->SubMState)(pOwner, 1, 0);
  }
}

//----- (00481330) --------------------------------------------------------
BOOL __thiscall CBehead::CanExcute(CBehead *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pOwner)
      && pOwner->m_nMap == pTarget->m_nMap
      && CPlayer::IsWState(pOwner, 0)
      && pTarget->IsMonster(pTarget)
      && CChar::IsGState(pTarget, 1);
}

//----- (004813A0) --------------------------------------------------------
void __thiscall CBehead::Excute(CBehead *this, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-1Ch]
  int v9; // [esp-4h] [ebp-14h]
  DWORD nId; // [esp+4h] [ebp-Ch] BYREF
  char byKind; // [esp+Bh] [ebp-5h] BYREF
  CMonster *pMonster; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pMonster = CMonster::FindMonster(nId);
  if ( pMonster )
  {
    if ( this->CanExcute(this, pOwner, pMonster) )
    {
      v4 = CChar::GetMaxHP(pOwner);
      pOwner->UpdateProperty(pOwner, 7, 1, v4 / 10);
      v5 = CChar::GetMaxMP(pOwner);
      pOwner->UpdateProperty(pOwner, 8, 1, v5 / 10);
      CChar::SetDirection(
        pOwner,
        pMonster->m_ptPixel.x - pOwner->m_ptPixel.x,
        pMonster->m_ptPixel.y - pOwner->m_ptPixel.y);
      v9 = this->m_nLevel;
      v8 = CBase::Id(pMonster);
      v6 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, v6, v8, 0, v9);
      v7 = CBase::Id(pMonster);
      CChar::WriteInSight(pMonster, S2C_ACTION, "db", v7, 10);
      CBase::Delete(pMonster);
    }
    CIOObject::Release(pMonster, &pMonster->m_nFindRef);
  }
}

//----- (004814F0) --------------------------------------------------------
void __thiscall CUpWeapon::ExcutePassive(CUpWeapon *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  if ( bUpdate )
  {
    pOwner->m_prtyPt.nHit -= this->m_nLevel / 2;
    pOwner->m_prtyPt.nMaxAttack -= this->m_nLevel / 2 + 1;
    pOwner->m_prtyPt.nMinAttack -= this->m_nLevel / 2 + 1;
    pOwner->UpdatePrtyPt(pOwner, 9, 1, nNewLevel / 2);
    pOwner->UpdatePrtyPt(pOwner, 12, 1, nNewLevel / 2 + 1);
    pOwner->UpdatePrtyPt(pOwner, 11, 1, nNewLevel / 2 + 1);
  }
  else
  {
    pOwner->UpdatePrtyPt(pOwner, 9, 1, this->m_nLevel / 2);
    pOwner->UpdatePrtyPt(pOwner, 12, 1, this->m_nLevel / 2 + 1);
    pOwner->UpdatePrtyPt(pOwner, 11, 1, this->m_nLevel / 2 + 1);
  }
}

//----- (00481630) --------------------------------------------------------
void __thiscall CUpBow::ExcutePassive(CUpBow *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  if ( bUpdate )
  {
    pOwner->m_prtyPt.nMaxAttack -= this->m_nLevel;
    pOwner->m_prtyPt.nMinAttack -= this->m_nLevel / 2;
    pOwner->UpdatePrtyPt(pOwner, 12, 1, nNewLevel);
    pOwner->UpdatePrtyPt(pOwner, 11, 1, nNewLevel / 2);
  }
  else
  {
    pOwner->UpdatePrtyPt(pOwner, 12, 1, this->m_nLevel);
    pOwner->UpdatePrtyPt(pOwner, 11, 1, this->m_nLevel / 2);
  }
}

//----- (004816F0) --------------------------------------------------------
void __thiscall CUpConCen::ExcutePassive(CUpConCen *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  if ( bUpdate )
  {
    pOwner->m_prtyPt.nHit -= 2 * this->m_nLevel;
    pOwner->UpdatePrtyPt(pOwner, 9, 1, 2 * nNewLevel);
  }
  else
  {
    pOwner->UpdatePrtyPt(pOwner, 9, 1, 2 * this->m_nLevel);
  }
}

//----- (00481750) --------------------------------------------------------
void __thiscall CBlow::Excute(CBlow *a1, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  DWORD v5; // esi
  int v6; // eax
  int v7; // eax
  int v8; // [esp-18h] [ebp-48h]
  int v9; // [esp-10h] [ebp-40h]
  int v10; // [esp-Ch] [ebp-3Ch]
  int v11; // [esp-8h] [ebp-38h]
  int v12; // [esp-4h] [ebp-34h]
  int bFatal; // [esp+Ch] [ebp-24h] BYREF
  int nPalsyDamage; // [esp+10h] [ebp-20h] BYREF
  int nNetDamage; // [esp+14h] [ebp-1Ch] BYREF
  int bBlock; // [esp+18h] [ebp-18h]
  int bSuccess; // [esp+1Ch] [ebp-14h]
  unsigned int dwReviseTick; // [esp+20h] [ebp-10h]
  int nId; // [esp+24h] [ebp-Ch] BYREF
  char byKind; // [esp+2Bh] [ebp-5h] BYREF
  CChar *pChar; // [esp+2Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( a1->CanExcute(a1, pOwner, pChar) )
    {
      dwReviseTick = CSkill::ReviseTick(a1, pOwner);
      v5 = GetTickCount();
      pOwner->m_dwNextAction = CChar::GetASpeed(pOwner) + v5;
      CChar::SetDirection(pOwner, pChar->m_ptPixel.x - pOwner->m_ptPixel.x, pChar->m_ptPixel.y - pOwner->m_ptPixel.y);
      nNetDamage = 0;
      nPalsyDamage = 0;
      bFatal = 0;
      bSuccess = 0;
      bBlock = 0;
      bBlock = pChar->CheckBlock(pChar, pOwner);
      if ( !bBlock )
      {
        bSuccess = a1->Apply(a1, pOwner, pChar, dwReviseTick, &nNetDamage, &bFatal, &nPalsyDamage);
        if ( !bSuccess )
          pChar->Defense(pChar, pOwner);
      }
      a1->SpendMPRage(a1, pOwner);
      v12 = bSuccess | (2 * bFatal) | (4 * bBlock);
      v11 = nPalsyDamage;
      v10 = nNetDamage;
      v9 = a1->m_nLevel;
      v8 = CBase::Id(pChar);
      v6 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbbwwb", a1->m_nSkill, v6, v8, 1, v9, v10, v11, v12);
    }
    else if ( a1->m_dwDelayPre )
    {
      v7 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v7, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else if ( a1->m_dwDelayPre )
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00481970) --------------------------------------------------------
void __thiscall CBlow::AddMortal(CBlow *this, CPlayer *pOwner)
{
  if ( pOwner->m_prtyPt.nMortal < 5 )
    pOwner->UpdatePrtyPt(pOwner, 36, 1, 1);
}

//----- (004819A0) --------------------------------------------------------
BOOL __thiscall CPullSwing::CanExcute(CPullSwing *this, CPlayer *pOwner, CChar *pTarget)
{
  return CSkill::CanExcute(this, pOwner, pTarget) && CPlayer::IsWState(pOwner, 12);
}

//----- (004819F0) --------------------------------------------------------
void __thiscall CPullSwing::Excute(CPullSwing *this, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  DWORD v5; // esi
  int v6; // eax
  unsigned int v7; // esi
  int v8; // eax
  int v9; // [esp-10h] [ebp-68h]
  int v10; // [esp-Ch] [ebp-64h]
  int v11; // [esp-Ch] [ebp-64h]
  int v12; // [esp-8h] [ebp-60h]
  int v13; // [esp-8h] [ebp-60h]
  int v14; // [esp-4h] [ebp-5Ch]
  int v15; // [esp-4h] [ebp-5Ch]
  int v16; // [esp+4h] [ebp-54h]
  int nAttack; // [esp+10h] [ebp-48h]
  int bFatal; // [esp+14h] [ebp-44h] BYREF
  int bBlock; // [esp+18h] [ebp-40h]
  int bSuccess; // [esp+1Ch] [ebp-3Ch]
  int nTValue; // [esp+20h] [ebp-38h]
  int nDx; // [esp+24h] [ebp-34h]
  int nPalsyDamage; // [esp+28h] [ebp-30h] BYREF
  CChar *pTarget; // [esp+2Ch] [ebp-2Ch]
  CBaseList *pBaseList; // [esp+30h] [ebp-28h]
  int bAddMortal; // [esp+34h] [ebp-24h]
  int nNetDamage; // [esp+38h] [ebp-20h] BYREF
  int nB; // [esp+3Ch] [ebp-1Ch]
  int nValue; // [esp+40h] [ebp-18h]
  int nDy; // [esp+44h] [ebp-14h]
  unsigned int dwReviseTick; // [esp+48h] [ebp-10h]
  int nId; // [esp+4Ch] [ebp-Ch] BYREF
  char byKind; // [esp+53h] [ebp-5h] BYREF
  CChar *pChar; // [esp+54h] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      dwReviseTick = CSkill::ReviseTick(this, pOwner);
      v5 = GetTickCount();
      pOwner->m_dwNextAction = CChar::GetASpeed(pOwner) + v5;
      CChar::SetDirection(pOwner, pChar->m_ptPixel.x - pOwner->m_ptPixel.x, pChar->m_ptPixel.y - pOwner->m_ptPixel.y);
      nValue = 0;
      nB = 0;
      nDx = pChar->m_ptPixel.x - pOwner->m_ptPixel.x;
      nDy = pChar->m_ptPixel.y - pOwner->m_ptPixel.y;
      if ( nDx )
      {
        if ( nDy )
        {
          nB = pOwner->m_ptPixel.y + nDx * pOwner->m_ptPixel.x / nDy;
          nValue = nB - nDx * pChar->m_ptPixel.x / nDy - pChar->m_ptPixel.y;
        }
        else
        {
          nValue = pChar->m_ptPixel.x - pOwner->m_ptPixel.x;
        }
      }
      else
      {
        nValue = pChar->m_ptPixel.y - pOwner->m_ptPixel.y;
      }
      pTarget = 0;
      pBaseList = CSMap::GetPlayerMonsterListInRect(pOwner->m_pMap, &pChar->m_ptTile, 1);
      nNetDamage = 0;
      nPalsyDamage = 0;
      bAddMortal = 0;
      while ( pBaseList )
      {
        pTarget = (CChar *)unknown_libname_7(pBaseList);
        if ( pOwner->CanAttack(pOwner, pTarget, 0)
          && Distance(&pOwner->m_ptPixel, &pTarget->m_ptPixel) <= pOwner->m_nRange )
        {
          if ( nDx && nDy )
          {
            nTValue = nB - nDx * pTarget->m_ptPixel.x / nDy - pTarget->m_ptPixel.y;
          }
          else
          {
            v16 = nDx ? pTarget->m_ptPixel.x - pOwner->m_ptPixel.x : pTarget->m_ptPixel.y - pOwner->m_ptPixel.y;
            nTValue = v16;
          }
          if ( (nTValue ^ nValue) >= 0 )
          {
            if ( CChar::IsNormal(pTarget) )
            {
              if ( pOwner->m_nMap == pTarget->m_nMap )
              {
                bFatal = 0;
                bSuccess = 0;
                bBlock = 0;
                bBlock = pChar->CheckBlock(pChar, pOwner);
                if ( !bBlock )
                {
                  v6 = CChar::GetAttack(pOwner);
                  v7 = dwReviseTick * (v6 + this->m_nLevel * 10 * v6 / 100);
                  nAttack = v7 / this->GetDelay(this, pOwner);
                  bSuccess = pTarget->Damage(pTarget, pOwner, nAttack, &nNetDamage, &bFatal, &nPalsyDamage, this);
                  if ( !bSuccess )
                    pTarget->Defense(pTarget, pOwner);
                  if ( nNetDamage > 0 )
                  {
                    bAddMortal = 1;
                    v14 = nPalsyDamage;
                    v12 = nNetDamage;
                    v10 = CBase::Id(pTarget);
                    v9 = CBase::Id(pOwner);
                    CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", 13, this->m_nSkill, v9, v10, v12, v14);
                  }
                }
              }
            }
          }
        }
        pBaseList = CBaseList::Pop(pBaseList);
      }
      if ( bAddMortal )
        this->AddMortal(this, pOwner);
      this->SpendMPRage(this, pOwner);
      v15 = this->m_nLevel;
      v11 = CBase::Id(pChar);
      v8 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, v8, v11, 0, v15);
    }
    else if ( this->m_dwDelayPre )
    {
      v13 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v13, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else if ( this->m_dwDelayPre )
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00481E80) --------------------------------------------------------
BOOL __thiscall CPullSwing::CanSkillUp(CPullSwing *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 58;
    case 2:
      return pOwner->m_nLevel >= 62;
    case 3:
      return pOwner->m_nLevel >= 66;
    case 4:
      return pOwner->m_nLevel >= 69;
  }
  return 0;
}

//----- (00481F10) --------------------------------------------------------
unsigned int __thiscall CThunder::GetDelay(CThunder *this, CPlayer *pOwner)
{
  return this->m_dwDelay + CChar::GetASpeed(pOwner);
}

//----- (00481F30) --------------------------------------------------------
int __thiscall CThunder::Redistribute(CThunder *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 7);
  return CSkill::Redistribute(this, pOwner);
}

//----- (00481F60) --------------------------------------------------------
int __thiscall CShot::GetAttack(CShot *this, CPlayer *a2, int nBaseAttack)
{
  int m_nDex; // eax
  int nAttack; // [esp+0h] [ebp-Ch]

  m_nDex = CChar::GetDex(a2);
  if ( 7 * this->m_nLevel * m_nDex / 4 / 2 + 50 >= 70 * this->m_nLevel + 200 )
    nAttack = 70 * this->m_nLevel + 200;
  else
    nAttack = 7 * this->m_nLevel * m_nDex / 4 / 2 + 50;
  return nAttack + nBaseAttack;
}

//----- (00481FD0) --------------------------------------------------------
int __thiscall CShot::Redistribute(CShot *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 9);// HeartBreaker -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00482000) --------------------------------------------------------
int __thiscall CNegative::Apply(CNegative *this, struct CPlayer *pOwner, struct CChar *pChar, unsigned int dwReviseTick, int *nNetDamage, int *bFatal, int *nPalsyDamage)
{
  unsigned int v7; // esi
  int m_nAttack; // [esp-4h] [ebp-10h]
  int v10; // [esp-4h] [ebp-10h]
  unsigned int v11; // [esp-4h] [ebp-10h]
  int nAttack; // [esp+8h] [ebp-4h]

  m_nAttack = CChar::GetAttack(pOwner);
  nAttack = this->GetAttack(this, pOwner, m_nAttack);
  v10 = this->GetHit(this);
  if ( !CChar::CheckHit(pOwner, pChar, v10) )
    return 0;
  v7 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
  *nPalsyDamage = v7 / this->GetDelay(this, pOwner);
  v11 = dwReviseTick
      * nAttack
      / ((int (__thiscall *)(CNegative *, struct CPlayer *, int *, int *, int *, CNegative *))this->GetDelay)(
          this,
          pOwner,
          nNetDamage,
          bFatal,
          nPalsyDamage,
          this);
  return ((int (__thiscall *)(struct CChar *, struct CPlayer *, unsigned int))pChar->Damage)(pChar, pOwner, v11);
}

//----- (004820C0) --------------------------------------------------------
int __thiscall CFlameArrow::Redistribute(CFlameArrow *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 14);
  return CSkill::Redistribute(this, pOwner);
}

//----- (004820F0) --------------------------------------------------------
unsigned int __thiscall CTranscendental::GetDelay(CTranscendental *this, CPlayer *pOwner)
{
  return this->m_dwDelay + CChar::GetASpeed(pOwner) - 100 * ((this->m_nLevel + 1) / 2);
}

//----- (00482130) --------------------------------------------------------
int __thiscall CTranscendental::Redistribute(CTranscendental *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 13);// WideningWound -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00482160) --------------------------------------------------------
int __thiscall CEdge::Apply(CEdge *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nNetDamage, int bFatal, unsigned int *nPalsyDamage)
{
  int v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int nAttack; // [esp+8h] [ebp-4h]
                                                // Probably wrong function? -HighGamer
  v7 = CChar::GetAttack(pOwner);
  nAttack = this->GetAttack(this, pOwner, v7);
  v8 = this->GetHit(this);
  if ( !CChar::CheckHit(pOwner, pChar, v8) )
    return 0;
  if ( this->CanContiSkill(this, pOwner, pChar) )
  {
    v9 = CBuff::CreateBuff(7, this->m_nLevel);
    pChar->AddBuff(pChar, v9);
  }
  v10 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
  *nPalsyDamage = v10 / this->GetDelay(this, pOwner);
  v11 = ((int (__thiscall *)(CEdge *, CPlayer *, int, int, unsigned int *, CEdge *))this->GetDelay)(
          this,
          pOwner,
          nNetDamage,
          bFatal,
          nPalsyDamage,
          this);
  return ((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pChar->Damage)(
           pChar,
           pOwner,
           dwReviseTick * nAttack / v11);
}

//----- (00482260) --------------------------------------------------------
int __thiscall CUpperSmash::Apply(CUpperSmash *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, _DWORD *nNetDamage, int bFatal, unsigned int *nPalsyDamage)
{
  int v7; // eax
  int v8; // eax
  unsigned int v9; // esi
  unsigned int v10; // eax
  int bRet; // [esp+8h] [ebp-8h]
  int nAttack; // [esp+Ch] [ebp-4h]

  v7 = CChar::GetAttack(pOwner);
  nAttack = this->GetAttack(this, pOwner, v7);
  v8 = this->GetHit(this);
  if ( !CChar::CheckHit(pOwner, pChar, v8) )
    return 0;
  v9 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
  *nPalsyDamage = v9 / this->GetDelay(this, pOwner);
  v10 = ((int (__thiscall *)(CUpperSmash *, CPlayer *, _DWORD *, int, unsigned int *, CUpperSmash *))this->GetDelay)(
          this,
          pOwner,
          nNetDamage,
          bFatal,
          nPalsyDamage,
          this);
  bRet = ((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pChar->Damage)(
           pChar,
           pOwner,
           dwReviseTick * nAttack / v10);
  if ( *nNetDamage )
    this->AddMortal(this, pOwner);
  return bRet;
}

//----- (00482340) --------------------------------------------------------
int __thiscall CUpperSmash::GetAttack(CUpperSmash *this, CPlayer *pOwner, int nBaseAttack)
{
  return nBaseAttack + nBaseAttack * (10 * this->m_nLevel + 100) / 80;
}

//----- (00482370) --------------------------------------------------------
BOOL __thiscall CUpperSmash::CanSkillUp(CUpperSmash *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 57;
    case 2:
      return pOwner->m_nLevel >= 63;
    case 3:
      return pOwner->m_nLevel >= 68;
  }
  return 0;
}

//----- (004823E0) --------------------------------------------------------
BOOL __thiscall CInfernal::CanExcute(void *this, CPlayer *pOwner, CChar *pTarget)
{
  return CSkill::CanExcute((CSkill *)this, pOwner, pTarget) && pOwner->m_prtyPt.nMortal > 0;
}

//----- (00482430) --------------------------------------------------------
int __thiscall CInfernal::GetAttack(CInfernal *this, CPlayer *pOwner, int nBaseAttack)
{
  return this->m_nLevel * (5 * pOwner->m_prtyPt.nMortal + 25)
       + nBaseAttack
       + 5 * pOwner->m_prtyPt.nMortal
       + 45
       + nBaseAttack * (20 * pOwner->m_prtyPt.nMortal + 2 * this->m_nLevel + 8) / 50;
}

//----- (00482490) --------------------------------------------------------
void __thiscall CInfernal::SpendMPRage(CInfernal *this, CPlayer *pOwner)
{
  int v2; // [esp-4h] [ebp-8h]

  v2 = this->GetSpendMP(this, 0);
  pOwner->UpdateProperty(pOwner, 8, 0, v2);
  pOwner->UpdatePrtyPt(pOwner, 36, 0, pOwner->m_prtyPt.nMortal);
}

//----- (004824E0) --------------------------------------------------------
BOOL __thiscall CInfernal::CanSkillUp(CInfernal *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 56;
    case 2:
      return pOwner->m_nLevel >= 63;
    case 3:
      return pOwner->m_nLevel >= 67;
    case 4:
      return pOwner->m_nLevel >= 70;
  }
  return 0;
}

//----- (00482570) --------------------------------------------------------
BOOL __thiscall CShieldAttack::CanExcute(void *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pOwner)
      && CChar::IsNormal(pTarget)
      && pOwner->m_nMap == pTarget->m_nMap
      && !CChar::IsGState(pOwner, 512)
      && CPlayer::IsWState(pOwner, 1)
      && pOwner->m_nCurMP >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && pOwner->CanAttack(pOwner, pTarget, 0);
}

//----- (00482610) --------------------------------------------------------
int __thiscall CShieldAttack::Apply(CShieldAttack *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int *nNetDamage, int *bFatal, unsigned int *nPalsyDamage)
{
  int v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int nAttack; // [esp+8h] [ebp-4h]

  v7 = CChar::GetAttack(pOwner);
  nAttack = this->GetAttack(this, pOwner, v7);
  v8 = this->GetHit(this);
  if ( !CChar::CheckHit(pOwner, pChar, v8) )
    return 0;
  if ( this->CanContiSkill(this, pOwner, pChar) )
  {
    v9 = CBuff::CreateBuff(7, 3 * this->m_nLevel);
    pChar->AddBuff(pChar, v9);
  }
  v10 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
  *nPalsyDamage = v10 / this->GetDelay(this, pOwner);
  v11 = ((int (__thiscall *)(CShieldAttack *, CPlayer *, int *, int *, unsigned int *, CShieldAttack *))this->GetDelay)(
          this,
          pOwner,
          nNetDamage,
          bFatal,
          nPalsyDamage,
          this);
  return ((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pChar->Damage)(
           pChar,
           pOwner,
           dwReviseTick * nAttack / v11);
}

//----- (00482710) --------------------------------------------------------
int __thiscall CShieldAttack::GetAttack(CShieldAttack *this, CPlayer *pOwner, int nBaseAttack)
{
  int v4; // [esp+0h] [ebp-8h]

  if ( nBaseAttack * (10 * this->m_nLevel + 60) / 100 >= 200 )
    v4 = 200;
  else
    v4 = nBaseAttack * (10 * this->m_nLevel + 60) / 100;
  return v4 + nBaseAttack;
}

//----- (00482770) --------------------------------------------------------
BOOL __thiscall CShieldAttack::CanSkillUp(CShieldAttack *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 59;
    case 2:
      return pOwner->m_nLevel >= 64;
    case 3:
      return pOwner->m_nLevel >= 68;
  }
  return 0;
}

//----- (004827E0) --------------------------------------------------------
BOOL __thiscall CMock::CanExcute(CMock *this, CPlayer *pOwner, CChar *pTarget)
{
  return CSkill::CanExcute(this, pOwner, pTarget) && pTarget->IsMonster(pTarget);
}

//----- (00482830) --------------------------------------------------------
void __thiscall CMock::Excute(CMock *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId; // eax
  int m_nTargetId; // [esp-Ch] [ebp-24h]
  int m_nHostility; // [esp-4h] [ebp-1Ch]
  int m_nSpendMP; // [esp-4h] [ebp-1Ch]
  int m_nLevel; // [esp-4h] [ebp-1Ch]
  CMonster *pMonster; // [esp+8h] [ebp-10h]
  DWORD nId; // [esp+Ch] [ebp-Ch] BYREF
  char byKind; // [esp+13h] [ebp-5h] BYREF
  CChar *pChar; // [esp+14h] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      CChar::Lock(pChar);
      pMonster = (CMonster *)pChar;
      m_nHostility = ((int (__thiscall *)(CMock *, _DWORD))this->GetHostility)(this, 0);
      ((void (__thiscall *)(CMonster *, CPlayer *, int))pMonster->AddHostility)(pMonster, pOwner, m_nHostility);
      CChar::Unlock(pChar);
      m_nSpendMP = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, m_nSpendMP);
      m_nLevel = this->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nTargetId, 0, m_nLevel);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
}

//----- (00482960) --------------------------------------------------------
int __thiscall CMock::Redistribute(CMock *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 8);// Provocation -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00482990) --------------------------------------------------------
int __thiscall sub_482990(_DWORD *this, _DWORD *a2)
{
  return CSkill::Redistribute((CSkill *)this, (CPlayer *)a2);
}

//----- (004829B0) --------------------------------------------------------
int __thiscall CStunArrow::GetAttack(CStunArrow *this, CPlayer *pOwner, int nBaseAttack)
{
  int result; // eax
  CSkill *pSkill; // [esp+4h] [ebp-4h]

  pSkill = pOwner->m_skill.m_pSkill[3];         // Staggering Blow? -HighGamer
  if ( pSkill )
    result = 12 * this->m_nLevel + nBaseAttack + pSkill->GetAttack(pSkill, pOwner, 0);
  else
    result = 0;
  return result;
}

//----- (00482A00) --------------------------------------------------------
int __thiscall CStunArrow::Apply(CStunArrow *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int *nNetDamage, int *bFatal, unsigned int *nPalsyDamage)
{
  unsigned int v7; // esi
  CBuffMoveSpeed *v8; // eax
  int v10; // [esp-4h] [ebp-14h]
  int v11; // [esp-4h] [ebp-14h]
  unsigned int v12; // [esp-4h] [ebp-14h]
  int bSuccess; // [esp+8h] [ebp-8h]
  int nAttack; // [esp+Ch] [ebp-4h]

  v10 = CChar::GetAttack(pOwner);
  nAttack = this->GetAttack(this, pOwner, v10);
  v11 = this->GetHit(this);
  if ( !CChar::CheckHit(pOwner, pChar, v11) )
    return 0;
  v7 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
  *nPalsyDamage = v7 / this->GetDelay(this, pOwner);
  v12 = dwReviseTick
      * nAttack
      / (unsigned int)((int (__thiscall *)(CStunArrow *, CPlayer *, int *, int *, unsigned int *, CStunArrow *))this->GetDelay)(
                        this,
                        pOwner,
                        nNetDamage,
                        bFatal,
                        nPalsyDamage,
                        this);
  bSuccess = ((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pChar->Damage)(pChar, pOwner, v12);
  if ( this->CanContiSkill(this, pOwner, pChar) )
  {
    if ( CChar::IsNormal(pChar) )
    {
      v8 = CBuff::CreateBuff(7, this->m_nLevel / 2 + 1);
      pChar->AddBuff(pChar, v8);
    }
  }
  return bSuccess;
}

//----- (00482B20) --------------------------------------------------------
int __thiscall CExplosion::GetAttack(CExplosion *this, CPlayer *pOwner, int nBaseAttack)
{
  int result; // eax
  CSkill *pSkill; // [esp+4h] [ebp-4h]

  pSkill = pOwner->m_skill.m_pSkill[6];
  if ( pSkill )
    result = 19 * this->m_nLevel + nBaseAttack + pSkill->GetAttack(pSkill, pOwner, 0);
  else
    result = 0;
  return result;
}

//----- (00482B70) --------------------------------------------------------
int __thiscall CGetherShot::GetAttack(CGetherShot *this, int pOwner, int nBaseAttack)
{
  int v4; // [esp+0h] [ebp-10h]
  DWORD dwStackTick; // [esp+8h] [ebp-8h]
  int nAttack; // [esp+Ch] [ebp-4h]

  dwStackTick = GetTickCount() - this->m_dwDelayPre;
  if ( dwStackTick < 1000 )
    return 0;
  if ( dwStackTick >= 1700 )
  {
    if ( dwStackTick >= 2300 )
    {
      if ( dwStackTick >= 2600 )
      {
        if ( dwStackTick >= 2900 )
          this->m_nV1 = 5;
        else
          this->m_nV1 = 4;
      }
      else
      {
        this->m_nV1 = 3;
      }
    }
    else
    {
      this->m_nV1 = 2;
    }
  }
  else
  {
    this->m_nV1 = 1;
  }
  switch ( this->m_nV1 )
  {
    case 1:
      nAttack = nBaseAttack * (50 * this->m_nV1 + 25 * this->m_nLevel + 50) / 90;
      break;
    case 2:
      nAttack = nBaseAttack * (50 * this->m_nV1 + 32 * this->m_nLevel + 50) / 90;
      break;
    case 3:
      nAttack = nBaseAttack * (50 * this->m_nV1 + 40 * this->m_nLevel + 50) / 90;
      break;
    case 4:
      nAttack = nBaseAttack * (50 * this->m_nV1 + 47 * this->m_nLevel + 50) / 90;
      break;
    case 5:
      nAttack = nBaseAttack * (50 * this->m_nV1 + 55 * this->m_nLevel + 50) / 90;
      break;
    default:
      return 0;
  }
  if ( nAttack >= 2000 )
    v4 = 2000;
  else
    v4 = nAttack;
  return v4 + nBaseAttack;
}

//----- (00482D30) --------------------------------------------------------
int __thiscall CGetherShot::GetHit(CGetherShot *this)
{
  return (this->m_nLevel + 1) / 2 + 2 * this->m_nV1 - 1;
}

//----- (00482D60) --------------------------------------------------------
BOOL __thiscall CGetherShot::CanSkillUp(CGetherShot *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 56;
    case 2:
      return pOwner->m_nLevel >= 60;
    case 3:
      return pOwner->m_nLevel >= 66;
    case 4:
      return pOwner->m_nLevel >= 69;
  }
  return 0;
}

//----- (00482DF0) --------------------------------------------------------
int __thiscall CMysticArrow::GetAttack(CMysticArrow *this, CPlayer *pOwner, int nBaseAttack)
{
  return (this->m_nLevel + 2) * (50 * nBaseAttack / 100);
}

//----- (00482E20) --------------------------------------------------------
int __thiscall CMysticArrow::Apply(CMysticArrow *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int *nNetDamage, int *bFatal, unsigned int *nPalsyDamage)
{
  unsigned int v7; // esi
  CBuffMoveSpeed *v8; // eax
  int nAddHit; // [esp-4h] [ebp-18h]
  unsigned int v11; // [esp-4h] [ebp-18h]
  int bSuccess; // [esp+8h] [ebp-Ch]
  int nBaseAttack; // [esp+Ch] [ebp-8h]
  int nAttack; // [esp+10h] [ebp-4h]

  nBaseAttack = CChar::GetAttack(pOwner);
  nAttack = this->GetAttack(this, pOwner, nBaseAttack);
  nAddHit = this->GetHit(this);
  if ( !CChar::CheckHit(pOwner, pChar, nAddHit) )
    return 0;
  v7 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
  *nPalsyDamage = v7 / this->GetDelay(this, pOwner);
  v11 = dwReviseTick
      * nAttack
      / (unsigned int)((int (__thiscall *)(CMysticArrow *, CPlayer *, int *, int *, unsigned int *, CMysticArrow *))this->GetDelay)(
                        this,
                        pOwner,
                        nNetDamage,
                        bFatal,
                        nPalsyDamage,
                        this);
  bSuccess = ((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pChar->Damage)(pChar, pOwner, v11);
  if ( this->CanContiSkill(this, pOwner, pChar) )
  {
    v8 = CBuff::CreateBuff(39, 5, 50 * nBaseAttack / 100 / 5);
    pChar->AddBuff(pChar, v8);
  }
  return bSuccess;
}

//----- (00482F40) --------------------------------------------------------
BOOL __thiscall CMysticArrow::CanSkillUp(CMysticArrow *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )
    return pOwner->m_nLevel >= 67;
  if ( this->m_nLevel == 2 )
    return pOwner->m_nLevel >= 70;
  return 0;
}

//----- (00482FA0) --------------------------------------------------------
void __thiscall CMagic::Excute(CMagic *this, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  DWORD v5; // esi
  unsigned int v6; // esi
  int v7; // eax
  unsigned int v8; // esi
  unsigned int v9; // eax
  int m_nId; // eax
  int v11; // eax
  int m_nTargetId; // [esp-18h] [ebp-4Ch]
  int m_nLevel; // [esp-10h] [ebp-44h]
  int bFatal; // [esp+Ch] [ebp-28h] BYREF
  unsigned int nPalsyDamage; // [esp+10h] [ebp-24h] MAPDST BYREF
  int nNetDamage; // [esp+14h] [ebp-20h] MAPDST BYREF
  int bSuccess; // [esp+18h] [ebp-1Ch] MAPDST
  int nMagic; // [esp+1Ch] [ebp-18h]
  unsigned int dwReviseTick; // [esp+20h] [ebp-14h]
  int nResist; // [esp+24h] [ebp-10h]
  int nId; // [esp+28h] [ebp-Ch] BYREF
  char byKind; // [esp+2Fh] [ebp-5h] BYREF
  CChar *pChar; // [esp+30h] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      dwReviseTick = CSkill::ReviseTick(this, pOwner);
      v5 = GetTickCount();
      pOwner->m_dwNextAction = CChar::GetASpeed(pOwner) + v5;
      CChar::SetDirection(pOwner, pChar->m_ptPixel.x - pOwner->m_ptPixel.x, pChar->m_ptPixel.y - pOwner->m_ptPixel.y);
      nNetDamage = 0;
      v6 = dwReviseTick * pOwner->GetPalsyDamage(pOwner, pChar);
      nPalsyDamage = v6 / this->GetDelay(this, pOwner);
      nResist = CMagic::GetResist(this, pOwner, pChar);
      bFatal = 0;
      v7 = CChar::GetMagic(pOwner);
      nMagic = this->GetMagic(this, pOwner, v7);
      v8 = dwReviseTick * (nResist * nMagic / 100);
      v9 = ((int (__thiscall *)(CMagic *, CPlayer *, int *, int *, unsigned int *, CMagic *))this->GetDelay)(
             this,
             pOwner,
             &nNetDamage,
             &bFatal,
             &nPalsyDamage,
             this);
      bSuccess = ((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pChar->Damage)(pChar, pOwner, v8 / v9);
      if ( !bSuccess )
        pChar->Defense(pChar, pOwner);
      this->SpendMPRage(this, pOwner);
      m_nLevel = this->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(
        pOwner,
        S2C_SKILL,
        "bddbbwwb",
        this->m_nSkill,
        m_nId,
        m_nTargetId,
        1,
        m_nLevel,
        nNetDamage,
        nPalsyDamage,
        bSuccess);
      this->Apply(this, pOwner, pChar, dwReviseTick, nResist, nMagic);
    }
    else if ( this->m_dwDelayPre )
    {
      v11 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v11, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else if ( this->m_dwDelayPre )
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00483230) --------------------------------------------------------
int __thiscall CChar::GetMagic(CChar *this)
{
  int m_nMinMaigc; // eax
  int m_nMaxMagic; // [esp-4h] [ebp-Ch]

  m_nMaxMagic = CChar::GetMaxMagic(this);
  m_nMinMaigc = CChar::GetMinMagic(this);
  return Random(m_nMinMaigc, m_nMaxMagic);      // variable nMagic = total randomized -HighGamer
}

//----- (00483260) --------------------------------------------------------
int __thiscall CMagic::GetPrtyMagic(CMagic *this, CPlayer *pOwner)
{
  int nMagic; // [esp+8h] [ebp-4h]
                                                // Is this function correct? total guess -HigHGamer
  nMagic = 0;
  if ( this->GetResistNum(this) == 2 )
    nMagic = 20 * pOwner->m_skill.m_nPtLitning;
  return nMagic;
}

//----- (004832A0) --------------------------------------------------------
int __thiscall CMagic::GetDelay(CMagic *this, CPlayer *pOwner)
{
  int dwDelay; // [esp+8h] [ebp-4h]

  if ( !pOwner )
    return this->m_dwDelay;
  dwDelay = this->m_dwDelay;
  if ( !this->GetResistNum(this) )
    dwDelay -= 5 * pOwner->m_skill.m_nPtFire * this->m_dwDelayPre / 0x64;
  return dwDelay;
}

//----- (00483310) --------------------------------------------------------
int __thiscall CMagic::Apply(CMagic *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic)
{
  int result; // eax

  result = this->GetResistNum(this);
  if ( result == 1 )
    result = CMagic::ApplyPrtyIce(this, pOwner, pChar, dwReviseTick, nResist, nMagic);
  return result;
}

//----- (00483360) --------------------------------------------------------
int __thiscall CMagic::ApplyPrtyIce(void *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic)
{
  int result; // eax
  CBuffMoveSpeed *v7; // eax

  result = (int)pOwner;
  if ( pOwner->m_skill.m_nPtIce )
  {
    result = (*(int (__thiscall **)(void *, CPlayer *, CChar *))(*(_DWORD *)this + 40))(this, pOwner, pChar);
    if ( result )
    {
      v7 = CBuff::CreateBuff(0, pOwner->m_skill.m_nPtIce + 2, -20 * pOwner->m_skill.m_nPtIce);
      result = pChar->AddBuff(pChar, v7);
    }
  }
  return result;
}

//----- (004833D0) --------------------------------------------------------
int __thiscall CMagic::GetResist(CMagic *this, CChar *pOwner, CChar *pTarget)
{
  int v3; // esi
  int v4; // eax
  int v6; // [esp-4h] [ebp-18h]
  int v7; // [esp+4h] [ebp-10h]
  int nDiffLevel; // [esp+Ch] [ebp-8h]
  int nResist; // [esp+10h] [ebp-4h]

  nDiffLevel = pOwner->m_nLevel - pTarget->m_nLevel;
  v6 = this->GetResistNum(this);
  v3 = pTarget->GetFinalResist(pTarget, pOwner, v6);
  v4 = abs(nDiffLevel);
  nResist = (v3 - nDiffLevel * v4 / 6) & ((v3 - nDiffLevel * v4 / 6 < 0) - 1);
  if ( nResist >= 100 )
    v7 = 0;
  else
    v7 = 100 - nResist;
  return v7;
}

//----- (00483460) --------------------------------------------------------
int __thiscall CSpiritBlast::GetMagic(CSpiritBlast *this, CPlayer *pOwner, int nBaseMagic)
{
  int m_nLevel; // esi
  int m_nInt; // eax
  int nMagic; // [esp+4h] [ebp-Ch]

  m_nLevel = 9 * pOwner->m_nLevel / 2;
  m_nInt = CChar::GetInt(pOwner);
  if ( (m_nLevel + 5 * this->m_nLevel * m_nInt) / 2 >= 200 * this->m_nLevel + 600 )
    nMagic = 200 * this->m_nLevel + 600;
  else
    nMagic = (m_nLevel + 5 * this->m_nLevel * m_nInt) / 2;
  return nMagic + nBaseMagic;
}

//----- (004834E0) --------------------------------------------------------
BOOL __thiscall CSpiritBlast::CanSkillUp(CSpiritBlast *this, CPlayer *a2)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )
    return a2->m_nLevel >= 63;
  return 0;
}

//----- (00483520) --------------------------------------------------------
int __thiscall CFire::GetMagic(CFire *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2;
  nMagic = (v3 + 3 * this->m_nLevel * CChar::GetInt(pOwner) / 10) / 2;
  if ( nMagic >= 21 * this->m_nLevel + 30 )
    v5 = 21 * this->m_nLevel + 30;
  else
    v5 = nMagic;
  return v5 + nBaseMagic + 2 * this->m_nLevel;
}

//----- (004835A0) --------------------------------------------------------
int __thiscall CFire::Redistribute(CFire *this, CPlayer *a2)
{
  CPlayerSkill::RedistributeChild(&a2->m_skill, 25);
  CPlayerSkill::RedistributeChild(&a2->m_skill, 33);
  return CSkill::Redistribute(this, a2);
}

//----- (004835E0) --------------------------------------------------------
int __thiscall CFireExplosion::GetMagic(CFireExplosion *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2;
  nMagic = (v3 + 10 * this->m_nLevel * CChar::GetInt(pOwner) / 3) / 2 + 380;
  if ( nMagic >= 150 * this->m_nLevel + 500 )
    v5 = 150 * this->m_nLevel + 500;
  else
    v5 = nMagic;
  return v5 + nBaseMagic;
}

//----- (00483670) --------------------------------------------------------
BOOL __thiscall CFireExplosion::CanSkillUp(CFireExplosion *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )
    return pOwner->m_nLevel >= 59;
  return 0;
}

//----- (004836B0) --------------------------------------------------------
int __thiscall CFireExplosion::Redistribute(_DWORD *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 46);// Explosion -HighGamer
  return CSkill::Redistribute((CSkill *)this, pOwner);
}

//----- (004836E0) --------------------------------------------------------
int __thiscall sub_4836E0(CFireEruption *this, CPlayer *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 3 * a2->m_nLevel / 2;
  v7 = (v3 + 14 * this->m_nLevel * CChar::GetInt(a2) / 3) / 2 + 580;
  if ( v7 >= 300 * this->m_nLevel + 600 )
    v5 = 300 * this->m_nLevel + 600;
  else
    v5 = v7;
  return v5 + a3;
}

//----- (00483770) --------------------------------------------------------
int __thiscall CIce::GetMagic(CIce *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]
                                                // Guessed this function could be the function above it (sub_4836E0) too -HighGamer
  v3 = 3
     * pOwner->m_nLevel
     / 2;
  nMagic = (v3 + 3 * this->m_nLevel * CChar::GetInt(pOwner) / 13) / 2;
  if ( nMagic >= 16 * this->m_nLevel + 30 )
    v5 = 16 * this->m_nLevel + 30;
  else
    v5 = nMagic;
  return v5 + nBaseMagic;
}

//----- (004837F0) --------------------------------------------------------
int __thiscall CIce::Redistribute(CIce *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 24);// SplashyIce -HighGamer
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 32);// Hail -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00483830) --------------------------------------------------------
int __thiscall CIceLance::GetMagic(CIceLance *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int m_nInt; // eax
  int nMagic; // [esp+4h] [ebp-Ch]

  v3 = 3 * pOwner->m_nLevel / 2;
  m_nInt = CChar::GetInt(pOwner);
  if ( (v3 + 10 * this->m_nLevel * m_nInt / 4) / 2 + 240 >= 150 * this->m_nLevel + 400 )
    nMagic = 150 * this->m_nLevel + 400;
  else
    nMagic = (v3 + 10 * this->m_nLevel * m_nInt / 4) / 2 + 240;
  return nMagic + nBaseMagic;
}

//----- (004838C0) --------------------------------------------------------
BOOL __thiscall CIceLance::CanSkillUp(CIceLance *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 58;
    case 2:
      return pOwner->m_nLevel >= 64;
    case 3:
      return pOwner->m_nLevel >= 67;
  }
  return 0;
}

//----- (00483930) --------------------------------------------------------
int __thiscall CLitning::GetMagic(CLitning *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-14h]
  int v6; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2;
  nMin = (v3 + 2 * this->m_nLevel * CChar::GetInt(pOwner) / 16) / 2;
  nMax = nMin + CMagic::GetPrtyMagic(this, pOwner);
  if ( nMin >= 12 * this->m_nLevel + 30 )
    v6 = 12 * this->m_nLevel + 30;
  else
    v6 = nMin;
  if ( nMax >= 12 * this->m_nLevel + 180 )
    v5 = 12 * this->m_nLevel + 180;
  else
    v5 = nMax;
  return nBaseMagic + Random(v6, v5);
}

//----- (00483A00) --------------------------------------------------------
int __thiscall CLitning::Redistribute(CLitning *this, CPlayer *pOwner)
{
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-14h] BYREF
  int v5[2]; // [esp+8h] [ebp-10h] BYREF
  CSkill *pSkill; // [esp+10h] [ebp-8h]
  int it; // [esp+14h] [ebp-4h] BYREF

  pSkill = pOwner->m_skill.m_pSkill[4];         // Lightning Magic -HighGamer
  pOwner->UpdateProperty(pOwner, 24, 1, pSkill->m_nLevel - 1);
  if ( pSkill && CSkill::RedistributeByForce(pSkill, pOwner) )
  {
    v5[1] = (int)pSkill;
    operator delete(pSkill);
  }
  v5[0] = (pOwner->m_nClass << 16) + 4;
  sub_446130(dword_4E218C, &it, (int)v5);
  v2 = sub_430C20(dword_4E218C, (int)v4);
  if ( (unsigned __int8)unknown_libname_8(v2) )
    return 0;
  pSkill = *(CSkill **)(sub_420250(&it) + 4);
  pSkill = CSkill::Copy(pSkill);
  CSkill::Init(pSkill, 4, 1);
  pSkill->ExcutePassive(pSkill, pOwner, 0, 0);
  pOwner->m_skill.m_pSkill[4] = pSkill;
  CPlayer::Write(pOwner, S2C_SKILLUP, "bb", 4, 1);
  CDBSocket::Write(S2D_INSERTSKILL, "dbw", pOwner->m_nPID, 4, pOwner->m_nSUPoint);
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 9);// Shock Wave -HighGamer
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 23);// Lightning Blow -HighGamer
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E218C: using guessed type int dword_4E218C[3];

//----- (00483B50) --------------------------------------------------------
int __thiscall CShock::GetMagic(CShock *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v4; // esi
  int v5; // edi
  int v7; // [esp+8h] [ebp-14h]
  int v8; // [esp+Ch] [ebp-10h]
  int nMin; // [esp+14h] [ebp-8h]
  int nMax; // [esp+18h] [ebp-4h]

  v3 = 5 * pOwner->m_nLevel / 3;
  nMin = (v3 + 6 * this->m_nLevel * CChar::GetInt(pOwner) / 4) / 2 + 50;
  v4 = CMagic::GetPrtyMagic(this, pOwner);
  v5 = 5 * pOwner->m_nLevel / 3;
  nMax = v4 + (v5 + 11 * this->m_nLevel * CChar::GetInt(pOwner) / 3) / 2 + 150;
  if ( nMin >= 60 * this->m_nLevel + 200 )
    v8 = 60 * this->m_nLevel + 200;
  else
    v8 = nMin;
  if ( nMax >= 200 * this->m_nLevel + 200 )
    v7 = 200 * this->m_nLevel + 200;
  else
    v7 = nMax;
  return nBaseMagic + Random(v8, v7);
}

//----- (00483C70) --------------------------------------------------------
int __thiscall CSpark::GetMagic(CSpark *this, CPlayer *pOwner, int nBaseMagic)
{
  int v4; // esi
  int v5; // esi
  int v6; // esi
  int v7; // [esp+4h] [ebp-18h]
  int v8; // [esp+8h] [ebp-14h]
  int nMin; // [esp+10h] [ebp-Ch]
  CSkill *pSkill; // [esp+14h] [ebp-8h]
  int nMaxa; // [esp+18h] [ebp-4h]
  int nMax; // [esp+18h] [ebp-4h]

  pSkill = pOwner->m_skill.m_pSkill[4];         // Lightning Magic -HighGamer
  if ( !pSkill )
    return 0;
  v4 = 3 * pOwner->m_nLevel / 2;
  nMin = v4 + 3 * this->m_nLevel * CChar::GetInt(pOwner) / 10 / 2 + 10;
  v5 = 3 * pOwner->m_nLevel / 2;
  nMaxa = v5 + 5 * this->m_nLevel * CChar::GetInt(pOwner) / 8 / 2 + 30;
  v6 = nMaxa + CMagic::GetPrtyMagic(this, pOwner);
  nMax = pSkill->GetMagic(pSkill, pOwner, 0) + v6;
  if ( nMin >= 30 * this->m_nLevel + 150 )
    v8 = 30 * this->m_nLevel + 150;
  else
    v8 = nMin;
  if ( nMax >= 40 * this->m_nLevel + 200 )
    v7 = 40 * this->m_nLevel + 200;
  else
    v7 = nMax;
  return nBaseMagic + Random(v8, v7);
}

//----- (00483DB0) --------------------------------------------------------
int __thiscall CSpark::Redistribute(CSpark *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 31);// Lightning Summons -HighGamer
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 41);// Chain Lightning -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00483DF0) --------------------------------------------------------
int __thiscall CCallLitning::GetMagic(CCallLitning *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2 + CMagic::GetPrtyMagic(this, pOwner);
  nMin = v3 + 2 * this->m_nLevel * CChar::GetInt(pOwner) / 7 / 2 + 320;
  v4 = 3 * pOwner->m_nLevel / 2 + CMagic::GetPrtyMagic(this, pOwner);
  nMax = v4 + 10 * this->m_nLevel * CChar::GetInt(pOwner) / 2 / 2 + 320;
  if ( nMin >= this->m_nLevel + 450 )
    v7 = this->m_nLevel + 450;
  else
    v7 = nMin;
  if ( nMax >= 200 * this->m_nLevel + 700 )
    v6 = 200 * this->m_nLevel + 700;
  else
    v6 = nMax;
  return nBaseMagic + Random(v7, v6);
}

//----- (00483F10) --------------------------------------------------------
BOOL __thiscall CCallLitning::CanSkillUp(CCallLitning *this, CPlayer *pOwner)
{
  BOOL result; // eax

  if ( this->m_nLevel < this->m_nLmtMaxLevel )
    result = pOwner->m_nLevel >= 4 * this->m_nLevel + 53;
  else
    result = 0;
  return result;
}

//----- (00483F50) --------------------------------------------------------
int __thiscall CCallLitning::Redistribute(CCallLitning *this, CPlayer *a2)
{
  CPlayerSkill::RedistributeChild(&a2->m_skill, 42);// Thunder -HighGamer (Could this be CThunderLitning?) and the function above CCallLitning::CanSkillUp should be then CThunderLitning::CanSkillUp)
  return CSkill::Redistribute(this, a2);
}

//----- (00483F80) --------------------------------------------------------
int __thiscall CThunderLitning::GetMagic(CThunderLitning *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2 + CMagic::GetPrtyMagic(this, pOwner);
  nMin = v3 + 5 * this->m_nLevel * (3 * CChar::GetInt(pOwner) / 2) / 3 / 2 + 360;
  v4 = 3 * pOwner->m_nLevel / 2 + CMagic::GetPrtyMagic(this, pOwner);
  nMax = v4 + 10 * this->m_nLevel * (3 * CChar::GetInt(pOwner) / 2) / 2 / 2 + 700;
  if ( nMin >= 154 * this->m_nLevel + 456 )
    v7 = 154 * this->m_nLevel + 456;
  else
    v7 = nMin;
  if ( nMax >= 300 * this->m_nLevel + 900 )
    v6 = 300 * this->m_nLevel + 900;
  else
    v6 = nMax;
  return nBaseMagic + Random(v7, v6);
}

//----- (004840C0) --------------------------------------------------------
BOOL __thiscall CThunderLitning::CanSkillUp(CThunderLitning *this, CPlayer *pOwner)
{
  BOOL result; // eax

  if ( this->m_nLevel < this->m_nLmtMaxLevel )
    result = pOwner->m_nLevel >= 3 * this->m_nLevel + 63;// Thunder starts at level 63 could be right I guess -HighGamer
  else
    result = 0;
  return result;
}

//----- (00484100) --------------------------------------------------------
void __thiscall CMagicWide::Excute(CMagicWide *this, CPlayer *pOwner, char *packetRecv, char *endRecv)
{
  int v4; // eax
  DWORD v5; // esi
  int v6; // eax
  int v7; // eax
  unsigned int v8; // esi
  int v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int m_nId; // eax
  int v13; // eax
  int v14; // [esp-18h] [ebp-54h]
  int v15; // [esp-10h] [ebp-4Ch]
  int m_nTargetId; // [esp-Ch] [ebp-48h]
  int v17; // [esp-Ch] [ebp-48h]
  int bFatal; // [esp-4h] [ebp-40h]
  int nPalsyDamage; // [esp+Ch] [ebp-30h] BYREF
  unsigned int nNetDamage; // [esp+10h] [ebp-2Ch] MAPDST BYREF
  int bSuccess; // [esp+14h] [ebp-28h] MAPDST BYREF
  int nMagic; // [esp+1Ch] [ebp-20h]
  int nResist; // [esp+20h] [ebp-1Ch]
  CChar *pTarget; // [esp+24h] [ebp-18h]
  CBaseList *pBaseList; // [esp+28h] [ebp-14h]
  unsigned int dwReviseTick; // [esp+2Ch] [ebp-10h]
  int nId; // [esp+30h] [ebp-Ch] BYREF
  char byKind; // [esp+37h] [ebp-5h] BYREF
  CChar *pChar; // [esp+38h] [ebp-4h]

  ScanPacket(packetRecv, endRecv, "bd", &byKind, &nId);
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      dwReviseTick = CSkill::ReviseTick(this, pOwner);
      v5 = GetTickCount();
      pOwner->m_dwNextAction = CChar::GetASpeed(pOwner) + v5;
      CChar::SetDirection(pOwner, pChar->m_ptPixel.x - pOwner->m_ptPixel.x, pChar->m_ptPixel.y - pOwner->m_ptPixel.y);
      pTarget = 0;
      v6 = this->GetRadiusTile(this);
      for ( pBaseList = CSMap::GetPlayerMonsterListInRect(pOwner->m_pMap, &pChar->m_ptTile, v6);
            pBaseList;
            pBaseList = CBaseList::Pop(pBaseList) )
      {
        pTarget = (CChar *)unknown_libname_7(pBaseList);
        if ( pOwner->CanAttack(pOwner, pTarget, 0) && CChar::IsNormal(pTarget) && pOwner->m_nMap == pTarget->m_nMap )
        {
          bSuccess = 0;
          v7 = pOwner->GetPalsyDamage(pOwner, pChar);
          v8 = dwReviseTick * v7;
          nNetDamage = v8 / this->GetDelay(this, pOwner);
          nResist = CMagic::GetResist(this, pOwner, pTarget);
          nPalsyDamage = 0;
          v9 = CChar::GetMagic(pOwner);
          nMagic = this->GetMagic(this, pOwner, v9);
          if ( this->IsDamage(this) )
          {
            v10 = dwReviseTick * (nResist * nMagic / 100);
            v11 = ((int (__thiscall *)(CMagicWide *, CPlayer *, int *, int *, unsigned int *, CMagicWide *))this->GetDelay)(
                    this,
                    pOwner,
                    &bSuccess,
                    &nPalsyDamage,
                    &nNetDamage,
                    this);
            if ( !((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pTarget->Damage)(pTarget, pOwner, v10 / v11) )
              pTarget->Defense(pTarget, pOwner);
            if ( bSuccess > 0 )
            {
              m_nTargetId = CBase::Id(pTarget);
              m_nId = CBase::Id(pOwner);
              v14 = ((int (__thiscall *)(CMagicWide *, int, int, int, int, unsigned int))this->GetAddValueType)(
                      this,
                      this->m_nSkill,
                      m_nId,
                      m_nTargetId,
                      bSuccess,
                      nNetDamage);
              CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", v14);
              this->Apply(this, pOwner, pTarget, dwReviseTick, nResist, nMagic);
            }
          }
          else
          {
            this->Apply(this, pOwner, pTarget, dwReviseTick, nResist, nMagic);
            pTarget->Defense(pTarget, pOwner);
          }
        }
      }
      this->SpendMPRage(this, pOwner);
      bFatal = this->m_nLevel;
      v17 = CBase::Id(pChar);
      v15 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, v15, v17, 0, bFatal);
    }
    else if ( this->m_dwDelayPre )
    {
      v13 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v13, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else if ( this->m_dwDelayPre )
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (004844A0) --------------------------------------------------------
void __thiscall CMagicWide::ExcuteM(CMagicWide *this, CMonster *pOwner, CChar *pChar)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-18h] [ebp-40h]
  int m_nId; // [esp-10h] [ebp-38h]
  int v7; // [esp-Ch] [ebp-34h]
  int m_nTargetId; // [esp-Ch] [ebp-34h]
  int v9; // [esp-8h] [ebp-30h]
  int v10; // [esp-4h] [ebp-2Ch]
  int bFatal; // [esp-4h] [ebp-2Ch]
  int nPalsyDamage; // [esp+4h] [ebp-24h] BYREF
  int nNetDamage; // [esp+8h] [ebp-20h] BYREF
  int bSuccess; // [esp+Ch] [ebp-1Ch] BYREF
  int nMagic; // [esp+14h] [ebp-14h]
  int nResist; // [esp+18h] [ebp-10h]
  CChar *pTarget; // [esp+1Ch] [ebp-Ch]
  CBaseList *pBaseList; // [esp+20h] [ebp-8h]
  DWORD dwCurTick; // [esp+24h] [ebp-4h]

  if ( pChar )
  {
    CChar::SetDirection(pOwner, pChar->m_ptPixel.x - pOwner->m_ptPixel.x, pChar->m_ptPixel.y - pOwner->m_ptPixel.y);
    pTarget = 0;
    v3 = this->GetRadiusTile(this);
    pBaseList = CSMap::GetPlayerListInRect(pOwner->m_pMap, &pChar->m_ptTile, v3);
    dwCurTick = GetTickCount();
    this->m_dwTick = this->m_dwDelay + dwCurTick - this->m_dwDelayPre;
    pOwner->ResetNextMove(pOwner, this->m_dwActionDelay + dwCurTick, 1);
    pOwner->m_dwNextAction = this->m_dwActionDelay + dwCurTick;
    CChar::Unlock(pOwner);
    while ( pBaseList )
    {
      pTarget = (CChar *)unknown_libname_7(pBaseList);
      if ( CChar::IsNormal(pTarget) && pOwner->m_nMap == pTarget->m_nMap )
      {
        bSuccess = 0;
        nNetDamage = 0;
        nResist = CMagic::GetResist(this, pOwner, pTarget);
        nPalsyDamage = 0;
        nMagic = this->GetMagicM(this, pOwner);
        if ( this->IsDamage(this) )
        {
          if ( !pTarget->Damage(pTarget, pOwner, nResist * nMagic / 100, &bSuccess, &nPalsyDamage, &nNetDamage, this) )
            pTarget->Defense(pTarget, pOwner);
          if ( bSuccess > 0 )
          {
            v10 = nNetDamage;
            v9 = bSuccess;
            v7 = CBase::Id(pTarget);
            v4 = CBase::Id(pOwner);
            v5 = ((int (__thiscall *)(CMagicWide *, int, int, int, int, int))this->GetAddValueType)(
                   this,
                   this->m_nSkill,
                   v4,
                   v7,
                   v9,
                   v10);
            CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", v5);
            this->ApplyM(this, pOwner, pTarget);
          }
        }
        else
        {
          this->ApplyM(this, pOwner, pTarget);
          pTarget->Defense(pTarget, pOwner);
        }
      }
      pBaseList = CBaseList::Pop(pBaseList);
    }
    CChar::Lock(pOwner);
    bFatal = this->m_nLevel;
    m_nTargetId = CBase::Id(pChar);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nTargetId, 0, bFatal);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00484710) --------------------------------------------------------
void __thiscall CMagicWideSelf::Excute(CMagicWideSelf *this, CPlayer *pOwner, char *packetRecv, char *endRecv)
{
  int v4; // eax
  int v5; // eax
  DWORD v6; // esi
  int v7; // eax
  unsigned int v8; // esi
  int v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int m_nId__; // eax
  int v13; // [esp-18h] [ebp-44h]
  int m_nId_; // [esp-10h] [ebp-3Ch]
  int m_nTargetId; // [esp-Ch] [ebp-38h]
  int m_nId; // [esp-Ch] [ebp-38h]
  int bFatal; // [esp-4h] [ebp-30h]
  int nPalsyDamage; // [esp+8h] [ebp-24h] BYREF
  unsigned int nNetDamage; // [esp+Ch] [ebp-20h] MAPDST BYREF
  int bSuccess; // [esp+10h] [ebp-1Ch] MAPDST BYREF
  int nMagic; // [esp+18h] [ebp-14h]
  int nResist; // [esp+1Ch] [ebp-10h]
  CChar *pTarget; // [esp+20h] [ebp-Ch]
  CBaseList *pBaseList; // [esp+24h] [ebp-8h]
  unsigned int dwReviseTick; // [esp+28h] [ebp-4h]

  if ( this->CanExcute(this, pOwner, 0) )
  {
    pTarget = 0;
    v5 = this->GetRadiusTile(this);
    pBaseList = CSMap::GetPlayerMonsterListInRect(pOwner->m_pMap, &pOwner->m_ptTile, v5);
    dwReviseTick = CSkill::ReviseTick(this, pOwner);
    v6 = GetTickCount();
    pOwner->m_dwNextAction = CChar::GetASpeed(pOwner) + v6;
    while ( pBaseList )
    {
      pTarget = (CChar *)unknown_libname_7(pBaseList);
      if ( pOwner->CanAttack(pOwner, pTarget, 0) && CChar::IsNormal(pTarget) && pOwner->m_nMap == pTarget->m_nMap )
      {
        bSuccess = 0;
        v7 = pOwner->GetPalsyDamage(pOwner, pTarget);
        v8 = dwReviseTick * v7;
        nNetDamage = v8 / this->GetDelay(this, pOwner);
        nResist = CMagic::GetResist(this, pOwner, pTarget);
        nPalsyDamage = 0;
        v9 = CChar::GetMagic(pOwner);
        nMagic = this->GetMagic(this, pOwner, v9);
        if ( this->IsDamage(this) )
        {
          v10 = dwReviseTick * (nResist * nMagic / 100);
          v11 = ((int (__thiscall *)(CMagicWideSelf *, CPlayer *, int *, int *, unsigned int *, CMagicWideSelf *))this->GetDelay)(
                  this,
                  pOwner,
                  &bSuccess,
                  &nPalsyDamage,
                  &nNetDamage,
                  this);
          if ( !((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pTarget->Damage)(pTarget, pOwner, v10 / v11) )
            pTarget->Defense(pTarget, pOwner);
          if ( bSuccess > 0 )
          {
            m_nTargetId = CBase::Id(pTarget);
            m_nId__ = CBase::Id(pOwner);
            v13 = ((int (__thiscall *)(CMagicWideSelf *, int, int, int, int, unsigned int))this->GetAddValueType)(
                    this,
                    this->m_nSkill,
                    m_nId__,
                    m_nTargetId,
                    bSuccess,
                    nNetDamage);
            CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", v13);
            this->Apply(this, pOwner, pTarget, dwReviseTick, nResist, nMagic);
          }
        }
        else
        {
          this->Apply(this, pOwner, pTarget, dwReviseTick, nResist, nMagic);
          pTarget->Defense(pTarget, pOwner);
        }
      }
      pBaseList = CBaseList::Pop(pBaseList);
    }
    this->SpendMPRage(this, pOwner);
    bFatal = this->m_nLevel;
    m_nId = CBase::Id(pOwner);
    m_nId_ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId_, m_nId, 0, bFatal);
  }
  else if ( this->m_dwDelayPre )
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (004849E0) --------------------------------------------------------
void __thiscall CMagicWideSelf::ExcuteM(CMagicWideSelf *this, CMonster *pOwner, CChar *pChar)
{
  int v3; // eax
  int v4; // eax
  int m_nId_; // eax
  int v6; // [esp-18h] [ebp-40h]
  int v7; // [esp-Ch] [ebp-34h]
  int m_nId; // [esp-Ch] [ebp-34h]
  int bFatal; // [esp-4h] [ebp-2Ch]
  int nPalsyDamage; // [esp+4h] [ebp-24h] BYREF
  int nNetDamage; // [esp+8h] [ebp-20h] MAPDST BYREF
  int bSuccess; // [esp+Ch] [ebp-1Ch] MAPDST BYREF
  int nMagic; // [esp+14h] [ebp-14h]
  int nResist; // [esp+18h] [ebp-10h]
  CChar *pTarget; // [esp+1Ch] [ebp-Ch]
  CBaseList *pBaseList; // [esp+20h] [ebp-8h]
  DWORD dwCurTick; // [esp+24h] [ebp-4h]

  pTarget = 0;
  v3 = this->GetRadiusTile(this);
  pBaseList = CSMap::GetPlayerListInRect(pOwner->m_pMap, &pOwner->m_ptTile, v3);
  dwCurTick = GetTickCount();
  this->m_dwTick = this->m_dwDelay + dwCurTick - this->m_dwDelayPre;
  pOwner->ResetNextMove(pOwner, this->m_dwActionDelay + dwCurTick, 1);
  pOwner->m_dwNextAction = this->m_dwActionDelay + dwCurTick;
  CChar::Unlock(pOwner);
  while ( pBaseList )
  {
    pTarget = (CChar *)unknown_libname_7(pBaseList);
    if ( CChar::IsNormal(pTarget) && pOwner->m_nMap == pTarget->m_nMap )
    {
      bSuccess = 0;
      nNetDamage = 0;
      nResist = CMagic::GetResist(this, pOwner, pTarget);
      nPalsyDamage = 0;
      nMagic = this->GetMagicM(this, pOwner);
      if ( !pTarget->Damage(pTarget, pOwner, nResist * nMagic / 100, &bSuccess, &nPalsyDamage, &nNetDamage, this) )
        pTarget->Defense(pTarget, pOwner);
      if ( bSuccess > 0 )
      {
        v7 = CBase::Id(pTarget);
        v4 = CBase::Id(pOwner);
        v6 = ((int (__thiscall *)(CMagicWideSelf *, int, int, int, int, int))this->GetAddValueType)(
               this,
               this->m_nSkill,
               v4,
               v7,
               bSuccess,
               nNetDamage);
        CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", v6);
        this->ApplyM(this, pOwner, pTarget);
      }
    }
    pBaseList = CBaseList::Pop(pBaseList);
  }
  CChar::Lock(pOwner);
  bFatal = this->m_nLevel;
  m_nId = CBase::Id(pOwner);
  m_nId_ = CBase::Id(pOwner);
  CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId_, m_nId, 0, bFatal);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00484BE0) --------------------------------------------------------
void __thiscall CMagicWidePos::Excute(CMagicWidePos *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId____; // eax
  int m_nId___; // eax
  int v6; // eax
  DWORD v7; // esi
  int v8; // eax
  unsigned int v9; // esi
  int v10; // eax
  unsigned int v11; // esi
  unsigned int v12; // eax
  int m_nId; // eax
  int m_nId__; // eax
  int v15; // [esp-54h] [ebp-8Ch]
  int m_nTargetId; // [esp-48h] [ebp-80h]
  int v17; // [esp-44h] [ebp-7Ch]
  unsigned int v18; // [esp-40h] [ebp-78h]
  int m_nId_; // [esp-14h] [ebp-4Ch]
  int bFatal; // [esp-Ch] [ebp-44h]
  int nPalsyDamage; // [esp+8h] [ebp-30h] BYREF
  unsigned int nNetDamage; // [esp+Ch] [ebp-2Ch] BYREF
  int bSuccess; // [esp+10h] [ebp-28h] BYREF
  int nMagic; // [esp+18h] [ebp-20h]
  int nResist; // [esp+1Ch] [ebp-1Ch]
  CChar *pTarget; // [esp+20h] [ebp-18h]
  CBaseList *pBaseList; // [esp+24h] [ebp-14h]
  CSMap *pMap; // [esp+28h] [ebp-10h]
  tagPOINT ptPixel; // [esp+2Ch] [ebp-Ch] BYREF
  unsigned int dwReviseTick; // [esp+34h] [ebp-4h]

  ScanPacket(packet, end, "dd", &ptPixel, &ptPixel.y);
  pMap = CSMap::FindSMap(pOwner->m_nMap);
  if ( CSMap::IsValidTile(pMap, &ptPixel, 0) )
  {
    if ( this->CanExcute(this, pOwner, 0) )
    {
      ptPixel.x >>= 5;
      ptPixel.y >>= 5;
      pTarget = 0;
      v6 = this->GetRadiusTile(this);
      pBaseList = CSMap::GetPlayerMonsterListInRect(pOwner->m_pMap, &ptPixel, v6);
      dwReviseTick = CSkill::ReviseTick(this, pOwner);
      v7 = GetTickCount();
      pOwner->m_dwNextAction = CChar::GetASpeed(pOwner) + v7;
      while ( pBaseList )
      {
        pTarget = (CChar *)unknown_libname_7(pBaseList);
        if ( pOwner->CanAttack(pOwner, pTarget, 0) && CChar::IsNormal(pTarget) && pOwner->m_nMap == pTarget->m_nMap )
        {
          bSuccess = 0;
          v8 = pOwner->GetPalsyDamage(pOwner, pTarget);
          v9 = dwReviseTick * v8;
          nNetDamage = v9 / this->GetDelay(this, pOwner);
          nResist = CMagic::GetResist(this, pOwner, pTarget);
          nPalsyDamage = 0;
          v10 = CChar::GetMagic(pOwner);
          nMagic = this->GetMagic(this, pOwner, v10);
          v11 = dwReviseTick * (nResist * nMagic / 100);
          v12 = ((int (__thiscall *)(CMagicWidePos *, CPlayer *, int *, int *, unsigned int *, CMagicWidePos *))this->GetDelay)(
                  this,
                  pOwner,
                  &bSuccess,
                  &nPalsyDamage,
                  &nNetDamage,
                  this);
          if ( !((int (__thiscall *)(CChar *, CPlayer *, unsigned int))pTarget->Damage)(pTarget, pOwner, v11 / v12) )
            pTarget->Defense(pTarget, pOwner);
          if ( bSuccess > 0 )
          {
            v18 = nNetDamage;
            v17 = bSuccess;
            m_nTargetId = CBase::Id(pTarget);
            m_nId = CBase::Id(pOwner);
            v15 = ((int (__thiscall *)(CMagicWidePos *, int, int, int, int, unsigned int))this->GetAddValueType)(
                    this,
                    this->m_nSkill,
                    m_nId,
                    m_nTargetId,
                    v17,
                    v18);
            CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", v15);
            this->Apply(this, pOwner, pTarget, dwReviseTick, nResist, nMagic);
          }
        }
        pBaseList = CBaseList::Pop(pBaseList);
      }
      this->SpendMPRage(this, pOwner);
      bFatal = this->m_nLevel;
      m_nId_ = CBase::Id(pOwner);
      m_nId__ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId__, m_nId_, 0, bFatal);
    }
    else if ( this->m_dwDelayPre )
    {
      m_nId___ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId___, 0);
    }
  }
  else
  {
    m_nId____ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId____, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (00484EE0) --------------------------------------------------------
int __thiscall CMagicWideIce::GetMagic(CMagicWideIce *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]

  v3 = 5 * pOwner->m_nLevel / 3;
  nMagic = (v3 + 5 * this->m_nLevel * CChar::GetInt(pOwner) / 7) / 2;
  if ( nMagic >= 40 * this->m_nLevel + 120 )
    v5 = 40 * this->m_nLevel + 120;
  else
    v5 = nMagic;
  return v5 + nBaseMagic;
}

//----- (00484F60) --------------------------------------------------------
int __thiscall CMagicWideIce::Redistribute(CMagicWideIce *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 27);// "Frost" -HighGamer
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 44);// "Ice Restriction" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00484FA0) --------------------------------------------------------
int __thiscall CMagicWideFire::GetMagic(CExplosiveBurst *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]

  v3 = 5 * pOwner->m_nLevel / 3;
  nMagic = (v3 + 6 * this->m_nLevel * CChar::GetInt(pOwner) / 5) / 2;
  if ( nMagic >= 70 * this->m_nLevel + 150 )
    v5 = 70 * this->m_nLevel + 150;
  else
    v5 = nMagic;
  return v5 + nBaseMagic + 8 * this->m_nLevel;
}

//----- (00485030) --------------------------------------------------------
int __thiscall CMagicWideFire::Redistribute(CMagicWideFire *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 47);// "Explosive Burst" -HighGamer (Seems wrong probably cuz my jobsystem.dat is newer then server)
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485060) --------------------------------------------------------
int __thiscall CExplosiveBurst::GetMagic(CExplosiveBurst *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]

  v3 = 6 * pOwner->m_nLevel / 2;
  nMagic = (v3 + 4 * this->m_nLevel * CChar::GetInt(pOwner) / 5) / 2 + 580;
  if ( nMagic >= 900 )
    v5 = 900;
  else
    v5 = nMagic;
  return v5 + nBaseMagic;
}

//----- (004850D0) --------------------------------------------------------
int __thiscall CExplosiveBurst::Redistribute(CExplosiveBurst *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 48);// Explosive Burst -HighGamer (my jobsystem is too new cant find it)
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485100) --------------------------------------------------------
void __thiscall CMesmerization::Apply(CMesmerization *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic)
{
  CBuffMoveSpeed *v6; // eax

  if ( this->CanContiSkill(this, pOwner, pChar) )// Hypnotism -HighGamer
  {
    if ( this->m_nContiCnt < 8 )
    {
      ++this->m_nContiCnt;
      v6 = CBuff::CreateBuff(26, 5 * this->m_nLevel + 4, 0);// Hypnotism Buff - HighGamer
      pChar->AddBuff(pChar, v6);
    }
  }
}

//----- (00485170) --------------------------------------------------------
BOOL __thiscall CMesmerization::CanSkillUp(CProtect *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )                     // Hypnotism -HighGamer
  {
    case 1:
      return pOwner->m_nLevel >= 56;
    case 2:
      return pOwner->m_nLevel >= 61;
    case 3:
      return pOwner->m_nLevel >= 67;
    case 4:
      return pOwner->m_nLevel >= 70;
  }
  return 0;
}

//----- (00485200) --------------------------------------------------------
void __thiscall CMesmerization::SpendMPRage(CMesmerization *this, CPlayer *pOwner)
{
  CSkill::SpendMPRage(this, pOwner);
  this->m_nContiCnt = 0;                        // Hypnotism -HighGamer
}

//----- (00485230) --------------------------------------------------------
void __thiscall CSnowField::Apply(CSnowField *this, CPlayer *pOwner, CChar *pChar, int dwReviseTick, int nResist, int nMagic)
{
  CBuffMoveSpeed *v6; // eax

  if ( this->CanContiSkill(this, pOwner, pChar) )
  {
    if ( this->m_nContiCnt < 5 )
    {
      ++this->m_nContiCnt;
      v6 = CBuff::CreateBuff(8, 2 * this->m_nLevel + 6);// Ice Block Buff - HighGamer
      pChar->AddBuff(pChar, v6);
    }
  }
}

//----- (004852A0) --------------------------------------------------------
BOOL __thiscall CSnowField::CanSkillUp(CSnowField *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )                     // Cold Binding -HighGamer
  {
    case 1:
      return pOwner->m_nLevel >= 58;
    case 2:
      return pOwner->m_nLevel >= 63;
    case 3:
      return pOwner->m_nLevel >= 68;
  }
  return 0;
}

//----- (00485310) --------------------------------------------------------
int __thiscall CChainLitning::GetMagic(CChainLitning *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2 + CMagic::GetPrtyMagic(this, pOwner);
  nMin = v3 + 7 * this->m_nLevel * CChar::GetInt(pOwner) / 3 / 2 + 360;
  v4 = 3 * pOwner->m_nLevel / 2 + CMagic::GetPrtyMagic(this, pOwner);
  nMax = v4 + 10 * this->m_nLevel * CChar::GetInt(pOwner) / 4 / 2 + 700;
  if ( nMin >= 700 )
    v7 = 700;
  else
    v7 = nMin;
  if ( nMax >= 1000 )
    v6 = 1000;
  else
    v6 = nMax;
  return nBaseMagic + Random(v7, v6);
}

//----- (00485400) --------------------------------------------------------
int __thiscall CChainLitning::Redistribute(CChainLitning *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 43);// "Ice Restriction" -HighGamer (my jobsystem is bad i think)
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485430) --------------------------------------------------------
int __thiscall CIceRequiem::GetMagic(CIceRequiem *this, CPlayer *pOwner, int nBaseMagic)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int nMagic; // [esp+Ch] [ebp-4h]

  v3 = 3 * pOwner->m_nLevel / 2;
  nMagic = (v3 + 2 * this->m_nLevel * CChar::GetInt(pOwner) / 6) / 2 + 480;
  if ( nMagic >= 500 )
    v5 = 500;
  else
    v5 = nMagic;
  return v5 + nBaseMagic;
}

//----- (004854A0) --------------------------------------------------------
int __thiscall CIceRequiem::Redistribute(CIceRequiem *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 45);// 45 - Ice Storm ? Lol -HighGamer (jobsystem probably wrong)
  return CSkill::Redistribute(this, pOwner);
}

//----- (004854D0) --------------------------------------------------------
void __thiscall CMagicConti::Excute(CMagicConti *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId__; // eax
  int m_nId_; // eax
  int m_nId; // [esp-1Ch] [ebp-2Ch]
  int m_nSpendMP; // [esp-10h] [ebp-20h]
  int m_nLevel; // [esp-10h] [ebp-20h]
  CMagicConti *this_; // [esp+0h] [ebp-10h]
  CSMap *pMap; // [esp+4h] [ebp-Ch]
  tagPOINT ptPixel; // [esp+8h] [ebp-8h] BYREF

  ScanPacket(packet, end, "dd", &ptPixel, &ptPixel.y);
  pMap = CSMap::FindSMap(pOwner->m_nMap);
  if ( CSMap::IsValidTile(pMap, &ptPixel, 0) )  // Probably made this function wrong thats why bug happens in IDA (its __int64, but i made it int) -HighGamer
  {
    this_ = (CMagicConti *)ptPixel.y;           // This is bug in IDA.. need remove this line -HighGamer
    if ( (*(int (__thiscall **)(int, CPlayer *, int))(*(_DWORD *)ptPixel.y + 100))(ptPixel.y, pOwner, ptPixel.x) )// this line is CMagicConti-> blah blah -HighGamer
    {
      m_nSpendMP = this_->GetSpendMP(this_, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, m_nSpendMP);
      m_nLevel = this_->m_nLevel;
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this_->m_nSkill, m_nId, 0, 0, m_nLevel);
    }
    else
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
  }
  else
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (004855D0) --------------------------------------------------------
void __thiscall sub_4855D0(CMagicConti *this, CMonster *a2, tagPOINT ptPixel)
{
  if ( ptPixel.x )
    ((void (__thiscall *)(CMagicConti *, CMonster *, _DWORD, _DWORD))this->ExcuteM)(
      this,
      a2,
      *(_DWORD *)(ptPixel.x + 332),
      *(_DWORD *)(ptPixel.x + 336));            // No idea what this function is.. :\ -HighGamer
}
// 4855D0: inconsistent function type and number of purged bytes

//----- (00485610) --------------------------------------------------------
void __thiscall CMagicConti::ExcuteM(CMagicConti *this, CMonster *pOwner, tagPOINT ptPixel)
{
  int m_nId; // [esp-18h] [ebp-20h]
  int m_nId_; // [esp-10h] [ebp-18h]
  int m_nLevel; // [esp-Ch] [ebp-14h]
  int m_nId__; // [esp-4h] [ebp-Ch]
  CMagicConti *v7; // [esp+0h] [ebp-8h]
  CSMap *pMap; // [esp+4h] [ebp-4h]

  pMap = CSMap::FindSMap(pOwner->m_nMap);
  if ( CSMap::IsValidTile(pMap, &ptPixel, 0) )
  {
    v7 = (CMagicConti *)ptPixel.y;              // IDA bug (fix below with CMagicConti*)  -HighGamer
    if ( (*(int (__thiscall **)(int, CMonster *, int))(*(_DWORD *)ptPixel.y + 104))(ptPixel.y, pOwner, ptPixel.x) )
    {
      m_nLevel = v7->m_nLevel;
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", v7->m_nSkill, m_nId, 0, 0, m_nLevel);
    }
    else
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
  }
  else
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (004856D0) --------------------------------------------------------
int __thiscall CThunderStorm::AddMagicMonster(CThunderStorm *this, CPlayer *pOwner, tagPOINT ptPixel)
{
  int v3; // esi
  int v4; // edi
  int v5; // esi
  int v6; // edi
  int m_nInt; // eax
  int nMagic; // [esp-8h] [ebp-20h]
  int nMin; // [esp+Ch] [ebp-Ch]
                                                // nMax variable missing, inlined -HighGamer
  v3 = CMagic::GetPrtyMagic(this, pOwner);
  v4 = 3 * pOwner->m_nLevel / 2;
  nMin = v3 + (v4 + 5 * this->m_nLevel * (3 * CChar::GetInt(pOwner) / 2) / 3) / 2 + 360;
  v5 = CMagic::GetPrtyMagic(this, pOwner);
  v6 = 3 * pOwner->m_nLevel / 2;
  m_nInt = CChar::GetInt(pOwner);
  nMagic = Random(nMin, v5 + (v6 + 10 * this->m_nLevel * (3 * m_nInt / 2) / 2) / 2 + 700);
  return (int)CMonsterMagic::Create(228, pOwner->m_nMap, &ptPixel, 1, pOwner, nMagic, 16000);
}

//----- (004857C0) --------------------------------------------------------
CMonster *__thiscall CIceStorm::AddMagicMonster(CIceStorm *this, CPlayer *pOwner, tagPOINT ptPixel)
{
  int v3; // esi
  int m_nInt; // eax

  v3 = 3 * pOwner->m_nLevel / 2;
  m_nInt = CChar::GetInt(pOwner);
  return CMonsterMagic::Create(
           229,
           pOwner->m_nMap,
           &ptPixel,
           1,
           pOwner,
           60 * ((v3 + 10 * this->m_nLevel * m_nInt / 4) / 2 + 240) / 100,
           16000);
}

//----- (00485840) --------------------------------------------------------
int __thiscall CFireRain::AddMagicMonster(CFireRain *this, CPlayer *pOwner, tagPOINT ptPixel)
{
  int nMagic; // esi
  int m_nInt; // eax

  nMagic = 3 * pOwner->m_nLevel / 2;
  m_nInt = CChar::GetInt(pOwner);
  return (int)CMonsterMagic::Create(
                230,
                pOwner->m_nMap,
                &ptPixel,
                1,
                pOwner,
                60 * ((nMagic + 14 * this->m_nLevel * m_nInt / 3) / 2 + 380) / 100,
                16000);
}

//----- (004858C0) --------------------------------------------------------
int __thiscall CPoisonCloud::AddMagicMonster(CPoisonCloud *this, CPlayer *pOwner, tagPOINT ptPixel)
{
  int m_nAttack; // eax

  m_nAttack = CChar::GetAttack(pOwner);
  return (int)CMonsterMagic::Create(
                231,
                pOwner->m_nMap,
                &ptPixel,
                1,
                pOwner,
                (200 * this->m_nLevel + 50) * m_nAttack / 100 / 10,
                12000);
}

//----- (00485930) --------------------------------------------------------
BOOL __thiscall CPoisonCloud::CanSkillUp(CPoisonCloud *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )
    return pOwner->m_nLevel >= 70;              // "Poison Cloud" 100% -HighGamer
  return 0;
}

//----- (00485970) --------------------------------------------------------
int __thiscall CHealing::CanExcute(CHealing *this, CPlayer *pOwner, CChar *pTarget)
{
  int result; // eax
  int v4; // esi
  int v5; // edi
  int m_nId; // eax
  int m_nId_; // [esp-Ch] [ebp-24h]
  int v8; // [esp-4h] [ebp-1Ch]
  int m_nLevel; // [esp-4h] [ebp-1Ch]
  int v10; // [esp+8h] [ebp-10h]
  unsigned int dwReviseTick; // [esp+10h] [ebp-8h]
  int nMagic; // [esp+14h] [ebp-4h]

  result = this->CanExcute(this, pOwner, 0);
  if ( result )
  {
    dwReviseTick = CSkill::ReviseTick(this, pOwner);
    v4 = Random(0, 2 * this->m_nLevel);
    v5 = 15 * pOwner->m_nLevel / 10;
    nMagic = v4 + dwReviseTick * ((v5 + 5 * this->m_nLevel * CChar::GetWis(pOwner) / 10) / 2) / this->m_dwDelay + 100;
    if ( nMagic >= 50 * this->m_nLevel + 50 )
      v10 = 50 * this->m_nLevel + 50;
    else
      v10 = nMagic;
    pOwner->UpdateProperty(pOwner, 7, 1, v10);
    v8 = this->GetSpendMP(this, 0);
    pOwner->UpdateProperty(pOwner, 8, 0, v8);
    m_nLevel = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, m_nLevel);
  }
  return result;
}

//----- (00485AB0) --------------------------------------------------------
int __thiscall CHealing::Redistribute(CHealing *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 10);// 10 - Cure -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485AE0) --------------------------------------------------------
BOOL __thiscall CAuraDefense::CanExcute(CAuraDefense *this, CPlayer *a2, CChar *a3)
{
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && a2->m_nMap == a3->m_nMap
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2->m_nCurMP >= this->GetSpendMP(this, 0)
      && a3->IsPlayer(a3);
}

//----- (00485B80) --------------------------------------------------------
void __thiscall CHealingAny::Excute(CHealingAny *this, CPlayer *pOwner, char *packet, char *end)
{
  int nIncHP; // eax
  int m_nId; // eax
  int m_nTargetId; // [esp-Ch] [ebp-24h]
  int m_nId__; // [esp-8h] [ebp-20h]
  int m_nId_; // [esp-8h] [ebp-20h]
  int m_nMPSpend; // [esp-4h] [ebp-1Ch]
  int m_nLevel; // [esp-4h] [ebp-1Ch]
  unsigned int dwReviseTick; // [esp+4h] [ebp-14h]
  int nId; // [esp+Ch] [ebp-Ch] BYREF
  char byKind; // [esp+13h] [ebp-5h] BYREF
  CChar *pChar; // [esp+14h] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = (CChar *)CPlayer::FindPlayer(nId);
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      dwReviseTick = CSkill::ReviseTick(this, pOwner);
      nIncHP = this->GetIncHP(this, pOwner, pChar);
      pChar->UpdateProperty(pChar, 7, 1, dwReviseTick * nIncHP / this->m_dwDelay);
      m_nMPSpend = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, m_nMPSpend);
      m_nLevel = this->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nTargetId, 0, m_nLevel);
    }
    else if ( this->m_dwDelayPre )
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else if ( this->m_dwDelayPre )
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00485CE0) --------------------------------------------------------
int __thiscall CHealingAny::GetIncHP(CHealingAny *this, CPlayer *pOwner, CChar *pChar)
{
  int v3; // esi
  int v4; // edi
  int v5; // esi
  int v7; // [esp+8h] [ebp-Ch]
  int nIncHP; // [esp+10h] [ebp-4h]

  v3 = 30 * this->m_nLevel;
  v4 = 7 * pOwner->m_nLevel / 11;
  v5 = v3 + (v4 + 3 * this->m_nLevel * CChar::GetWis(pOwner) / 11) / 2 + 70;
  nIncHP = Random(0, 2 * this->m_nLevel) + v5;
  if ( nIncHP >= 40 * this->m_nLevel + 100 )
    v7 = 40 * this->m_nLevel + 100;
  else
    v7 = nIncHP;
  return v7;
}

//----- (00485D80) --------------------------------------------------------
int __thiscall CHealingAny::Redistribute(CHealingAny *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 16);// 16 - Revival -HighGamer
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 22);// 22 - Cure 2 -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485DC0) --------------------------------------------------------
int __thiscall CHealingAnyPlus::GetIncHP(CHealingAnyPlus *this, CPlayer *pOwner, CChar *pChar)
{
  int v3; // esi
  int v4; // edi
  int v5; // esi
  int v7; // [esp+8h] [ebp-Ch]
  int nIncHP; // [esp+10h] [ebp-4h]

  v3 = 50 * this->m_nLevel;
  v4 = 8 * pOwner->m_nLevel / 11;
  v5 = v3 + (v4 + 5 * this->m_nLevel * CChar::GetWis(pOwner) / 9) / 2 + 500;
  nIncHP = Random(0, this->m_nLevel) + v5;
  if ( nIncHP >= 50 * this->m_nLevel + 650 )
    v7 = 50 * this->m_nLevel + 650;
  else
    v7 = nIncHP;
  return v7;
}

//----- (00485E60) --------------------------------------------------------
int __thiscall CHealingAnyPlus::Redistribute(CHealingAnyPlus *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 28);// "Group Cure" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485E90) --------------------------------------------------------
int __thiscall CRestoration::GetIncHP(CRestoration *this, CPlayer *pOwner, CChar *pChar)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-Ch]
  int nIncHP; // [esp+Ch] [ebp-4h]

  v3 = 100 * this->m_nLevel;
  v4 = v3 + 11 * CChar::GetWis(pOwner) / 3 + 750;
  nIncHP = Random(0, 100) + v4;
  if ( nIncHP >= 1600 )
    v6 = 1600;
  else
    v6 = nIncHP;
  return v6;
}

//----- (00485EF0) --------------------------------------------------------
BOOL __thiscall CRestoration::CanSkillUp(CRestoration *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )                    // Cure 3 -HighGamer
    return pOwner->m_nLevel >= 60;
  if ( this->m_nLevel == 2 )
    return pOwner->m_nLevel >= 66;
  return 0;
}

//----- (00485F50) --------------------------------------------------------
int __thiscall CHealingAnyQuick::GetIncHP(int a1, CPlayer *pOwner, CChar *pChar)
{
  return 25 * CChar::GetMaxHP(pChar) / 100;
}

//----- (00485F70) --------------------------------------------------------
int __thiscall CHealingAnyQuick::Redistribute(CHealingAnyQuick *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 55);// "Perfect Cure" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00485FA0) --------------------------------------------------------
int __thiscall CHealingInstance::GetIncHP(CHealingInstance *this, CPlayer *pOwner, CChar *pChar)
{
  return (20 * this->m_nLevel + 15) * CChar::GetMaxHP(pChar) / 100;
}

//----- (00485FD0) --------------------------------------------------------
BOOL __thiscall CHealingInstance::CanSkillUp(CHealingInstance *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )                    // "Perfect Cure" -HighGamer
    return pOwner->m_nLevel >= 62;
  if ( this->m_nLevel == 2 )
    return pOwner->m_nLevel >= 69;
  return 0;
}

//----- (00486030) --------------------------------------------------------
int __stdcall CHealingGreatRe::GetIncHP(CHealingGreatRe *a1, CPlayer *pOwner, CChar *pChar)
{
  return CChar::GetMaxHP(pOwner);
}

//----- (00486050) --------------------------------------------------------
void __thiscall CRest::ExcutePassive(CRest *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // edx

  if ( bUpdate )
  {
    pOwner->m_nRestPoint -= this->m_nLevel;
    v4 = nNewLevel + pOwner->m_nRestPoint;
  }
  else
  {
    v4 = this->m_nLevel + pOwner->m_nRestPoint;
  }
  pOwner->m_nRestPoint = v4;
}

//----- (004860B0) --------------------------------------------------------
BOOL __thiscall CRest::CanSkillUp(CRest *this, CPlayer *pOwner)
{
  return this->m_nLevel == 1 && (pOwner->m_dwSpecialty & 2) != 0 && pOwner->m_nLevel >= 30;
}

//----- (004860F0) --------------------------------------------------------
void __thiscall CUpFatal::ExcutePassive(CUpFatal *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // [esp+0h] [ebp-10h]
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]

  if ( bUpdate )
  {
    pOwner->m_prtyPt.nFatal -= this->m_nLevel;
    pOwner->UpdatePrtyPt(pOwner, 31, 1, nNewLevel);
    if ( this->m_nLevel >= 10 )
      v6 = 10;
    else
      v6 = this->m_nLevel;
    pOwner->m_prtyPer.nFatal -= v6;
    if ( nNewLevel >= 10 )
      v5 = 10;
    else
      v5 = nNewLevel;
    pOwner->UpdatePrtyPer(pOwner, 31, 1, v5);
  }
  else
  {
    pOwner->UpdatePrtyPt(pOwner, 31, 1, this->m_nLevel);
    if ( this->m_nLevel >= 10 )
      v4 = 10;
    else
      v4 = this->m_nLevel;
    pOwner->UpdatePrtyPer(pOwner, 31, 1, v4);
  }
}

//----- (004861F0) --------------------------------------------------------
BOOL __thiscall CUpFatal::CanSkillUp(CUpFatal *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel > 0 && this->m_nLevel < 5 )
    return pOwner->m_nLevel > this->m_nLevel + 9;
  if ( this->m_nLevel >= 5 && this->m_nLevel < 10 )
    return pOwner->m_nLevel > this->m_nLevel + 28;
  if ( this->m_nLevel < 10 || this->m_nLevel >= 15 )
    return 0;
  return pOwner->m_nLevel > this->m_nLevel + 36;
}

//----- (004862A0) --------------------------------------------------------
int __thiscall CUpFatal::Redistribute(CUpFatal *this, CPlayer *pOwner)
{
  if ( !pOwner->m_nClass && (pOwner->m_dwSpecialty & 4) != 0 )
    CPlayerSkill::RedistributeChild(&pOwner->m_skill, 36);
  return CSkill::Redistribute(this, pOwner);
}

//----- (004862F0) --------------------------------------------------------
void __thiscall CUpFatal2::ExcutePassive(CUpFatal2 *a1, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  if ( bUpdate )
    pOwner->m_prtyPt.nFatal -= 80;
  pOwner->UpdatePrtyPt(pOwner, 31, 1, 80);
}

//----- (00486350) --------------------------------------------------------
void __thiscall CUpFatal3::ExcutePassive(CUpFatal3 *a1, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  if ( bUpdate )
    pOwner->m_prtyPt.nFatal -= 20;
  pOwner->UpdatePrtyPt(pOwner, 31, 1, 20);
}

//----- (004863B0) --------------------------------------------------------
BOOL __thiscall CMeditation::CanExcute(CMeditation *this, CPlayer *pOwner, CChar *pChar)
{
  return CChar::IsNormal(pOwner)
      && !CChar::IsGState(pOwner, 0x200)
      && CPlayer::IsWState(pOwner, 0)
      && pOwner->m_nCurMP >= pOwner->m_nLevel - 9 * this->m_nLevel;
}

//----- (00486420) --------------------------------------------------------
void __thiscall CMeditation::Excute(CMeshSpeed *this, CPlayer *pOwner, char *packet, char *end)
{
  CBuffMoveSpeed *v4; // eax
  int m_nId; // [esp-10h] [ebp-1Ch]
  int m_nId_; // [esp-Ch] [ebp-18h]
  int m_nLevel; // [esp-4h] [ebp-10h]

  if ( this->CanExcute(this, pOwner, 0) )
  {
    if ( CChar::IsMState(pOwner, 1i64) )
      ((void (__thiscall *)(CPlayer *, int, _DWORD))pOwner->SubMState)(pOwner, 1, 0);
    v4 = CBuff::CreateBuff(2, 10 * this->m_nLevel + 720, this->m_nLevel);
    pOwner->AddBuff(pOwner, v4);
    pOwner->UpdateProperty(pOwner, 8, 0, pOwner->m_nLevel - 9 * this->m_nLevel);
    m_nLevel = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, m_nLevel);
  }
}

//----- (00486500) --------------------------------------------------------
void __thiscall CUpLitning::ExcutePassive(CUpLitning *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // edx

  if ( bUpdate )
  {
    pOwner->m_skill.m_nPtLitning -= this->m_nLevel;
    v4 = nNewLevel + pOwner->m_skill.m_nPtLitning;
  }
  else
  {
    v4 = this->m_nLevel + pOwner->m_skill.m_nPtLitning;
  }
  pOwner->m_skill.m_nPtLitning = v4;
}

//----- (00486560) --------------------------------------------------------
void __thiscall CUpIce::ExcutePassive(CUpIce *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // edx

  if ( bUpdate )
  {
    pOwner->m_skill.m_nPtIce -= this->m_nLevel;
    v4 = nNewLevel + pOwner->m_skill.m_nPtIce;
  }
  else
  {
    v4 = this->m_nLevel + pOwner->m_skill.m_nPtIce;
  }
  pOwner->m_skill.m_nPtIce = v4;
}

//----- (004865C0) --------------------------------------------------------
void __thiscall CUpFire::ExcutePassive(CUpFire *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // edx

  if ( bUpdate )
  {
    pOwner->m_skill.m_nPtFire -= this->m_nLevel;
    v4 = nNewLevel + pOwner->m_skill.m_nPtFire;
  }
  else
  {
    v4 = this->m_nLevel + pOwner->m_skill.m_nPtFire;
  }
  pOwner->m_skill.m_nPtFire = v4;
}

//----- (00486620) --------------------------------------------------------
void __thiscall CFatalChance::Excute(CFatalChance *this, CPlayer *pOwner, char *packet, char *end)
{
  CBuffMoveSpeed *v4; // eax
  int m_nId; // eax
  int m_nId_; // [esp-Ch] [ebp-10h]
  int v7; // [esp-4h] [ebp-8h]
  int v8; // [esp-4h] [ebp-8h]

  if ( this->CanExcute(this, pOwner, 0) )
  {
    v4 = CBuff::CreateBuff(3, 900, 2 * this->m_nLevel + 3, this->m_nLevel);// OTP increased by +%21d! Buff / "Chance Capture" -HighGamer
    pOwner->AddBuff(pOwner, v4);
    v7 = this->GetSpendMP(this, 0);
    pOwner->UpdateProperty(pOwner, 8, 0, v7);
    v8 = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, v8);
  }
}

//----- (004866D0) --------------------------------------------------------
BOOL __thiscall CFatalChance::CanSkillUp(CFatalChance *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  switch ( this->m_nLevel )                     // "Chance Capture" -HighGamer
  {
    case 1:
      return pOwner->m_nLevel >= 35;
    case 2:
      return pOwner->m_nLevel >= 40;
    case 3:
      return pOwner->m_nLevel >= 45;
    case 4:
      return pOwner->m_nLevel >= 50;
  }
  return 0;
}

//----- (00486760) --------------------------------------------------------
BOOL __thiscall CUpBlockShield::CanSkillUp(CUpBlockShield *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel > 0 && this->m_nLevel < 3 )
    return pOwner->m_nLevel > this->m_nLevel + 29;
  if ( this->m_nLevel >= 3 && this->m_nLevel < 6 )
    return pOwner->m_nLevel > this->m_nLevel + 31;
  if ( this->m_nLevel >= 6 && this->m_nLevel < 9 )
    return pOwner->m_nLevel > this->m_nLevel + 33;
  if ( this->m_nLevel >= 9 && this->m_nLevel < 12 )
    return pOwner->m_nLevel > this->m_nLevel + 35;
  if ( this->m_nLevel < 12 || this->m_nLevel >= 15 )
    return 0;
  return pOwner->m_nLevel > this->m_nLevel + 37;
}

//----- (00486860) --------------------------------------------------------
BOOL __thiscall CRevival::CanExcute(CRevival *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pOwner)
      && !CChar::IsNormal(pTarget)
      && pOwner->m_nMap == pTarget->m_nMap
      && !CChar::IsGState(pOwner, 0x200)
      && CPlayer::IsWState(pOwner, 0)
      && pOwner->m_nCurMP >= this->GetSpendMP(this, 0)
      && pTarget->IsPlayer(pTarget)
      && !CPlayer::IsEState((CPlayer *)pTarget, 24);
}

//----- (00486910) --------------------------------------------------------
void __thiscall CRevival::Excute(CRevival *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId__; // eax
  int m_nId; // eax
  int m_nId_; // eax
  int m_nTargetId; // [esp-Ch] [ebp-1Ch]
  int v8; // [esp-4h] [ebp-14h]
  int m_nLevel; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char byKind; // [esp+Bh] [ebp-5h] BYREF
  CPlayer *pPlayer; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pPlayer = (CPlayer *)CPlayer::FindPlayer(nId);
  if ( pPlayer )
  {
    if ( this->CanExcute(this, pOwner, pPlayer) )
    {
      CPlayer::AddEState(pPlayer, 8);
      this->Apply(this, pOwner, pPlayer);
      CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 53);
      v8 = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v8);
      m_nLevel = this->m_nLevel;
      m_nTargetId = CBase::Id(pPlayer);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nTargetId, 0, m_nLevel);
    }
    else
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
    CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
  }
  else
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00486A50) --------------------------------------------------------
void __thiscall CRevival::Apply(CRevival *this, CPlayer *pOwner, CPlayer *pTarget)
{
  pTarget->m_nRevivalHP = 13 * CChar::GetMaxHP(pTarget) / 100;
  pTarget->m_nRevivalMP = 11 * CChar::GetMaxMP(pTarget) / 100;
}

//----- (00486AA0) --------------------------------------------------------
int __thiscall CRevival::Redistribute(CRevival *this, CPlayer *pOwner, CChar *pTarget)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 29);// "Restore" -HighGamer
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 34);// "Summons" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00486AE0) --------------------------------------------------------
void __thiscall CResurrection::Apply(CResurrection *this, CPlayer *pOwner, CPlayer *pTarget)
{
  int v3; // eax
  int nValue; // [esp+8h] [ebp-4h]

  v3 = CChar::GetMaxHP(pTarget);
  pTarget->m_nRevivalHP = v3 / 10 + this->m_nLevel * v3 / 4;
  nValue = CChar::GetMaxMP(pTarget);
  pTarget->m_nRevivalMP = nValue / 10 + this->m_nLevel * nValue / 10;
}

//----- (00486B60) --------------------------------------------------------
void __thiscall CReincarnate::Apply(CResurrection *this, CPlayer *pOwner, CPlayer *pTarget)
{
  int v3; // eax
  int v5; // [esp+8h] [ebp-4h]

  v3 = CChar::GetMaxHP(pTarget);
  pTarget->m_nRevivalHP = v3 / 10 + v3 * (12 * this->m_nLevel - 9) / 100;
  v5 = CChar::GetMaxMP(pTarget);
  pTarget->m_nRevivalMP = v5 / 10 + v5 * (4 * this->m_nLevel - 3) / 100;
}

//----- (00486BF0) --------------------------------------------------------
void __thiscall CUpEvade::ExcutePassive(CUpEvade *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // edx

  if ( bUpdate )
  {
    pOwner->m_prtyPer.nBlock -= this->m_nLevel + 7;
    v4 = nNewLevel + pOwner->m_prtyPer.nBlock + 7;
  }
  else
  {
    v4 = this->m_nLevel + pOwner->m_prtyPer.nBlock + 7;
  }
  pOwner->m_prtyPer.nBlock = v4;
}

//----- (00486C60) --------------------------------------------------------
int __thiscall CUpEvade::Redistribute(CUpEvade *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 20);// "Perfect Evasion 2" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00486C90) --------------------------------------------------------
void __thiscall CUpRFEvade::ExcutePassive(CUpRFEvade *this, CPlayer *pOwner, int nNewLevel, int bUpdate)
{
  int v4; // edx

  if ( bUpdate )
  {
    pOwner->m_prtyPer.nBlock -= this->m_nLevel;
    v4 = nNewLevel + pOwner->m_prtyPer.nBlock;
  }
  else
  {
    v4 = this->m_nLevel + pOwner->m_prtyPer.nBlock;
  }
  pOwner->m_prtyPer.nBlock = v4;
}

//----- (00486CF0) --------------------------------------------------------
BOOL __thiscall CUpRFEvade::CanSkillUp(CUpRFEvade *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )                    // "Perfect Evasion 2" -HighGamer
    return pOwner->m_nLevel >= 62;
  if ( this->m_nLevel == 2 )
    return pOwner->m_nLevel >= 68;
  return 0;
}

//----- (00486D50) --------------------------------------------------------
void __thiscall CStoneShield::Excute(CStoneShield *this, CPlayer *pOwner, char *packet, char *end)
{
  CBuffMoveSpeed *v4; // eax
  int m_nId; // eax
  int m_nId_; // [esp-Ch] [ebp-10h]
  int m_nId__; // [esp-8h] [ebp-Ch]
  int v8; // [esp-4h] [ebp-8h]
  int m_nLevel; // [esp-4h] [ebp-8h]

  if ( this->CanExcute(this, pOwner, 0) )
  {
    v4 = CBuff::CreateBuff(1, 900, this->m_nV1, this->m_nV2);// Bonus to Absorption and Strength Buff - HighGamer
    pOwner->AddBuff(pOwner, v4);
    v8 = this->GetSpendMP(this, 0);
    pOwner->UpdateProperty(pOwner, 8, 0, v8);
    m_nLevel = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, m_nLevel);
  }
  else
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00486E20) --------------------------------------------------------
BOOL __thiscall CHaste::CanExcute(CHaste *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pTarget)
      && pTarget->IsPlayer(pTarget)
      && !CPlayer::IsWearBuffStandard((CPlayer *)pTarget)
      && CChar::IsNormal(pOwner)
      && pOwner->m_nMap == pTarget->m_nMap
      && !CChar::IsGState(pOwner, 0x200)
      && CPlayer::IsWState(pOwner, 0)
      && pOwner->m_nCurMP >= this->GetSpendMP(this, 0);
}

//----- (00486EC0) --------------------------------------------------------
void __thiscall CHaste::Excute(CHaste *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId__; // eax
  CBuffMoveSpeed *v5; // eax
  int m_nId; // eax
  int m_nId_; // eax
  int m_nTargetId; // [esp-Ch] [ebp-1Ch]
  int v9; // [esp-4h] [ebp-14h]
  int m_nLevel; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char byKind; // [esp+Bh] [ebp-5h] BYREF
  CChar *pChar; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = (CChar *)CPlayer::FindPlayer(nId);
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      v5 = CBuff::CreateBuff(12, 600 * this->m_nLevel, 15 * this->m_nLevel);// Speed Buff - HighGamer
      pChar->AddBuff(pChar, v5);
      v9 = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v9);
      m_nLevel = this->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nTargetId, 0, m_nLevel);
    }
    else
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00487000) --------------------------------------------------------
void __thiscall CFrostBlast::Excute(CFrostBlast *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId__; // eax
  CBuffMoveSpeed *v5; // eax
  int m_nId; // [esp-1Ch] [ebp-34h]
  int m_nTargetId; // [esp-18h] [ebp-30h]
  int m_nLevel; // [esp-10h] [ebp-28h]
  int m_nId_; // [esp-8h] [ebp-20h]
  int v10; // [esp-4h] [ebp-1Ch]
  int bSuccess; // [esp+8h] [ebp-10h]
  DWORD nId; // [esp+Ch] [ebp-Ch] BYREF
  char byKind; // [esp+13h] [ebp-5h] BYREF
  CChar *pChar; // [esp+14h] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( this->CanExcute(this, pOwner, pChar) )
    {
      bSuccess = 0;
      if ( this->CanContiSkill(this, pOwner, pChar) )
      {
        bSuccess = 1;
        v5 = CBuff::CreateBuff(8, 8);           // Ice Block Buff - HighGamer
        pChar->AddBuff(pChar, v5);
      }
      pChar->Defense(pChar, pOwner);
      v10 = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v10);
      m_nLevel = this->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(
        pOwner,
        S2C_SKILL,
        "bddbbwwb",
        this->m_nSkill,
        m_nId,
        m_nTargetId,
        1,
        m_nLevel,
        0,
        0,
        bSuccess);
    }
    else
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00487190) --------------------------------------------------------
int __thiscall CFrostBlast::Redistribute(CFrostBlast *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 37);// "Cold Binding" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (004871C0) --------------------------------------------------------
void __thiscall CHealingParty::Excute(CHealingParty *this, CPlayer *pOwner, char *packet, char *end)
{
  int m_nId__; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-10h] [ebp-28h]
  int m_nId; // [esp-10h] [ebp-28h]
  int v9; // [esp-Ch] [ebp-24h]
  int m_nId_; // [esp-Ch] [ebp-24h]
  int m_nSkill; // [esp-8h] [ebp-20h]
  int v12; // [esp-4h] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-1Ch]
  int m_nLevel; // [esp-4h] [ebp-1Ch]
  int v15; // [esp+0h] [ebp-18h]
  CParty *pParty; // [esp+8h] [ebp-10h]
  unsigned int dwReviseTick; // [esp+10h] [ebp-8h]
  unsigned int nIncHP; // [esp+14h] [ebp-4h]

  if ( this->CanExcute(this, pOwner, 0) )
  {
    dwReviseTick = CSkill::ReviseTick(this, pOwner);
    nIncHP = dwReviseTick * this->GetIncHP(this, pOwner) / this->m_dwDelay;
    if ( pOwner->m_nParty )
    {
      pParty = (CParty *)sub_44D4E0(pOwner->m_nParty);
      if ( pParty )
      {
        v12 = this->GetSkillAddValue(this);
        m_nSkill = this->m_nSkill;
        v7 = this->IsPer(this);
        CParty::Healing(pParty, (int)pOwner, v7, nIncHP, m_nSkill, v12);
        CIOObject::Release(pParty);
      }
    }
    else
    {
      if ( this->IsPer(this) )
        v15 = (int)(nIncHP * CChar::GetMaxHP(pOwner)) / 100;
      else
        v15 = nIncHP;
      pOwner->UpdateProperty(pOwner, 7, 1, v15);
      v9 = CBase::Id(pOwner);
      v5 = CBase::Id(pOwner);
      v6 = ((int (__thiscall *)(CHealingParty *, int, int, int, int, _DWORD))this->GetSkillAddValue)(
             this,
             this->m_nSkill,
             v5,
             v9,
             v15,
             0);
      CChar::WriteInSight(pOwner, S2C_SKILLADDVALUE, "bbddww", v6);
    }
    v13 = this->GetSpendMP(this, 0);
    pOwner->UpdateProperty(pOwner, 8, 0, v13);
    m_nLevel = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, m_nLevel);
  }
  else if ( this->m_dwDelayPre )
  {
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00487390) --------------------------------------------------------
int __thiscall CHealingParty::GetIncHP(CHealingParty *this, CPlayer *pOwner)
{
  int v2; // esi
  __int64 v3; // rax
  int v4; // esi
  int v6; // [esp+4h] [ebp-Ch]
  int nIncHP; // [esp+Ch] [ebp-4h]

  v2 = pOwner->m_nLevel / 2;
  v3 = v2 + 8 * this->m_nLevel * CChar::GetWis(pOwner) / 7;
  v4 = 60 * this->m_nLevel + (((int)v3 - HIDWORD(v3)) >> 1);
  nIncHP = v4 + Random(0, 10 * this->m_nLevel) + 100;
  if ( nIncHP >= 180 * this->m_nLevel )
    v6 = 180 * this->m_nLevel;
  else
    v6 = nIncHP;
  return v6;
}

//----- (00487430) --------------------------------------------------------
int __thiscall CHealingParty::Redistribute(CHealingParty *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 57);// "Group Cure 2" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00487460) --------------------------------------------------------
int __thiscall CHealingPartyPlus::Redistribute(CHealingPartyPlus *this, CPlayer *pOwner)
{
  CPlayerSkill::RedistributeChild(&pOwner->m_skill, 58);// "Perfect Group Cure 2" -HighGamer
  return CSkill::Redistribute(this, pOwner);
}

//----- (00487490) --------------------------------------------------------
int __thiscall CHealingPartyIns::GetIncHP(CHealingPartyIns *this, CPlayer *pOwner)
{
  int v2; // esi

  v2 = 8 * pOwner->m_nLevel / 11;
  return v2 + Random(0, 100) + 550;
}

//----- (004874D0) --------------------------------------------------------
BOOL __thiscall CHealingPartyIns::CanSkillUp(CHealingPartyIns *this, CPlayer *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )                    // "Group Cure 2" -HighGamer
    return pOwner->m_nLevel >= 58;
  return 0;
}

//----- (00487510) --------------------------------------------------------
int __thiscall CWildAccuracy::CanExcute(CWildAccuracy *this, CPlayer *pOwner, CChar *pChar)
{
  int result; // eax
  int m_nId; // eax
  int m_nId_; // [esp-Ch] [ebp-10h]
  CBuffMoveSpeed *v6; // [esp-4h] [ebp-8h]
  int v7; // [esp-4h] [ebp-8h]
  int m_nLevel; // [esp-4h] [ebp-8h]

  result = this->CanExcute(this, pOwner, 0);
  if ( result )
  {
    v6 = CBuff::CreateBuff(9, 900, 3);          // OTP increase Buff / "Heart Breaker" -HighGamer
    pOwner->AddBuff(pOwner, v6);
    v7 = this->GetSpendMP(this, 0);
    pOwner->UpdateProperty(pOwner, 8, 0, v7);
    m_nLevel = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, m_nLevel);
  }
  return result;
}

//----- (004875B0) --------------------------------------------------------
void __thiscall CPoisonArrow::Excute(CPoisonArrow *a1, CPlayer *pOwner, char *packet, char *end)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int m_nId__; // eax
  CBuffMoveSpeed *v6; // eax
  int m_nId; // [esp-1Ch] [ebp-4Ch]
  int m_nTargetId; // [esp-18h] [ebp-48h]
  int m_nLevel; // [esp-10h] [ebp-40h]
  int m_nId_; // [esp-8h] [ebp-38h]
  int v11; // [esp-4h] [ebp-34h]
  char v14[4]; // [esp+8h] [ebp-28h] BYREF
  int nDamage; // [esp+Ch] [ebp-24h]
  int nResist; // [esp+10h] [ebp-20h]
  int bSuccess; // [esp+14h] [ebp-1Ch] MAPDST
  int nId; // [esp+18h] [ebp-18h] BYREF
  char byKind; // [esp+1Fh] [ebp-11h] BYREF
  CItem *pItem; // [esp+20h] [ebp-10h]
  int nIID; // [esp+24h] [ebp-Ch] BYREF
  CChar *pChar; // [esp+28h] [ebp-8h]
  std::vector<CIOSocket::CIOTimer>::const_iterator it; // [esp+2Ch] [ebp-4h] BYREF

  ScanPacket(packet, end, "bdd", &byKind, &nId, &nIID);
  CIOCriticalSection::Enter(&pOwner->m_lockItem.m_critical_section);
  pItem = 0;
  sub_44AE20(&pOwner->m_mapItem, &it, &nIID);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&pOwner->m_mapItem, (int)v14);
  if ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
         &it,
         v4) )
  {
    pItem = *(CItem **)(sub_420250(&it) + 4);
    if ( pItem->m_pInit->m_nIndex == 360 )      // 360 - Poison Pouch -HighGamer
    {
      if ( !pItem->UpdateNum(pItem, pOwner, 9, -1) )
        CPlayer::_OutofInven(pOwner, pItem);
    }
    else
    {
      pItem = 0;
    }
  }
  CIOCriticalSection::Leave((int)&pOwner->m_lockItem);
  if ( !pItem )
    goto LABEL_8;
  pChar = 0;
  if ( byKind )
  {
    if ( byKind == 1 )
      pChar = CMonster::FindMonster(nId);
  }
  else
  {
    pChar = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( pChar )
  {
    if ( a1->CanExcute(a1, pOwner, pChar) )
    {
      bSuccess = 0;
      if ( a1->CanContiSkill(a1, pOwner, pChar) )
      {
        bSuccess = 1;
        nResist = pChar->GetFinalResist(pChar, pOwner, 4);
        nDamage = pOwner->m_nLevel + 10 * a1->m_nLevel;
        nDamage -= nResist * nDamage / 100;
        v6 = CBuff::CreateBuff(11, 10 * a1->m_nLevel + 10, nDamage);// Poison Buff - HighGamer
        pChar->AddBuff(pChar, v6);
      }
      pChar->Defense(pChar, pOwner);
      v11 = a1->GetSpendMP(a1, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v11);
      m_nLevel = a1->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbbwwb", a1->m_nSkill, m_nId, m_nTargetId, 1, m_nLevel, 0, 0, bSuccess);
    }
    else
    {
      m_nId_ = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId_, 0);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
  else
  {
LABEL_8:
    m_nId__ = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", m_nId__, 0);
  }
}

//----- (00487860) --------------------------------------------------------
int __thiscall CWildStrength::CanExcute(CWildStrength *this, CPlayer *pOwner, CChar *pChar)
{
  int result; // eax
  int m_nId; // eax
  int m_nId_; // [esp-Ch] [ebp-10h]
  CBuffMoveSpeed *v6; // [esp-4h] [ebp-8h]
  int v7; // [esp-4h] [ebp-8h]
  int m_nLevel; // [esp-4h] [ebp-8h]

  result = this->CanExcute(this, pOwner, 0);
  if ( result )
  {
    v6 = CBuff::CreateBuff(10, 900, 5);         // Max Physical Buff / "Muscle Solidation" ? -HighGamer
    pOwner->AddBuff(pOwner, v6);
    v7 = this->GetSpendMP(this, 0);
    pOwner->UpdateProperty(pOwner, 8, 0, v7);
    m_nLevel = this->m_nLevel;
    m_nId_ = CBase::Id(pOwner);
    m_nId = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, m_nId, m_nId_, 0, m_nLevel);
  }
  return result;
}

//----- (00487900) --------------------------------------------------------
BOOL __thiscall CProtect::CanExcute(CProtect *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pOwner)
      && CChar::IsNormal(pTarget)
      && pOwner->m_nMap == pTarget->m_nMap
      && !CChar::IsGState(pOwner, 0x200)
      && CPlayer::IsWState(pOwner, 0)
      && pOwner->m_nCurMP >= this->GetSpendMP(this, 0)
      && pTarget->IsPlayer(pTarget)
      && pOwner->m_nParty
      && pOwner->m_nParty == pTarget[2].m_prtyPt.nMinMagic
      && pOwner != pTarget;
}

//----- (004879D0) --------------------------------------------------------
void __thiscall CProtect::Excute(CProtect *a1, CPlayer *pOwner, char *packet, char *end)
{
  CBuffMoveSpeed *v4; // eax
  int m_nId; // eax
  int m_nTargetId; // [esp-Ch] [ebp-1Ch]
  int m_nSpentMP; // [esp-4h] [ebp-14h]
  int m_nLevel; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char byKind; // [esp+Bh] [ebp-5h] BYREF
  CChar *pChar; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &byKind, &nId);
  pChar = (CChar *)CPlayer::FindPlayer(nId);
  if ( pChar )
  {
    if ( a1->CanExcute(a1, pOwner, pChar) )
    {
      v4 = CBuff::CreateBuff(13, 300 * a1->m_nLevel + 300, -(10 * a1->m_nLevel + 40));// Knight - "Portect" - HighGamer
      pChar->AddBuff(pChar, v4);
      m_nSpentMP = a1->GetSpendMP(a1, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, m_nSpentMP);
      m_nLevel = a1->m_nLevel;
      m_nTargetId = CBase::Id(pChar);
      m_nId = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", a1->m_nSkill, m_nId, m_nTargetId, 0, m_nLevel);
    }
    CIOObject::Release(pChar, &pChar->m_nFindRef);
  }
}

//----- (00487AE0) --------------------------------------------------------
BOOL __thiscall CMeshDefense::Apply(CMeshDefense *this, CPlayer *pOwner, CChar *pTarget, int *bSuccess)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel )
    return 0;
  if ( this->m_nLevel == 1 )                    // Mage - "Defense Improvement" - HighGamer
    return pOwner->m_nLevel >= 53;
  if ( this->m_nLevel == 2 )
    return pOwner->m_nLevel >= 62;
  return 0;
}

//----- (00487B40) --------------------------------------------------------
BOOL __thiscall CMeshDefense::CanExcute(CMeshDefense *this, CPlayer *pOwner, CChar *pTarget)
{
  return CChar::IsNormal(pOwner)
      && CChar::IsNormal(pTarget)
      && pOwner->m_nMap == pTarget->m_nMap
      && !CChar::IsGState(pOwner, 0x200)
      && CPlayer::IsWState(pOwner, 1)
      && pOwner->m_nCurMP >= this->GetSpendMP(this, 0)
      && pTarget->IsPlayer(pTarget)
      && pOwner->CanAttack(pOwner, pTarget, 0);
}

//----- (00487BF0) --------------------------------------------------------
void __thiscall CDestroySight::Apply(CDestroySight *this, CPlayer *pOwner, CChar *pTarget, int *bSuccess)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-1Ch]
  int v7; // [esp-4h] [ebp-14h]
  int v8; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char v11; // [esp+Bh] [ebp-5h] BYREF
  CChar *v12; // [esp+Ch] [ebp-4h]

  ScanPacket((char *)pTarget, (char *)bSuccess, "bd", &v11, &nId);
  v12 = (CChar *)CPlayer::FindPlayer(nId);
  if ( v12 )
  {
    if ( this->CanExcute(this, pOwner, v12) )
    {
      if ( this->CanContiSkill(this, pOwner, v12) )
      {
        v4 = CBuff::CreateBuff(7, 3);           // Faint / Stun Buff - HighGamer
        v12->AddBuff(v12, v4);
      }
      v7 = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v7);
      v8 = this->m_nLevel;
      v6 = CBase::Id(v12);
      v5 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, v5, v6, 0, v8);
    }
    CIOObject::Release(v12, &v12->m_nFindRef);
  }
}

//----- (00487CF0) --------------------------------------------------------
BOOL __thiscall CSilenceArrow::CanExcute(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((CChar *)a2)
      && CChar::IsNormal((CChar *)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState((CChar *)a2, 512)
      && CPlayer::IsWState((CPlayer *)a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && a3[115] == 1
      && (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))(*a2 + 176))(a2, a3, 0);
}

//----- (00487DB0) --------------------------------------------------------
void __thiscall CSilenceArrow::Excute(_DWORD *this, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-1Ch]
  int v10; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char v13; // [esp+Bh] [ebp-5h] BYREF
  CChar *v14; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &v13, &nId);
  v14 = (CChar *)CPlayer::FindPlayer(nId);
  if ( v14 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))*this)(this, pOwner, v14) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))(*this + 40))(this, pOwner, v14) )
      {
        v5 = CBuff::CreateBuff(15, 8);          // Silence Buff - HighGamer
        v14->AddBuff(v14, v5);
      }
      v6 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v6);
      v10 = this[2];
      v9 = CBase::Id(v14);
      v7 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this[1], v7, v9, 0, v10);
    }
    else
    {
      v8 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v14, &v14->m_nFindRef);
  }
  else
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00487EF0) --------------------------------------------------------
void __thiscall CProtectRange::Excute(CProtectRange *this, CPlayer *a1, char *packet, char *end)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-1Ch]
  int v9; // [esp-4h] [ebp-14h]
  int v10; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char v13; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v14; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &v13, &nId);
  v14 = CPlayer::FindPlayer(nId);
  if ( v14 )
  {
    if ( this->CanExcute(this, a1, (CChar *)v14) )
    {
      v5 = CBuff::CreateBuff(14, 300);
      v14->__vftable[7].OnTimerCallback(v14, (int)v5);
      v9 = this->GetSpendMP(this, 0);
      a1->UpdateProperty(a1, 8, 0, v9);
      v10 = this->m_nLevel;
      v8 = CBase::Id((CBase *)v14);
      v6 = CBase::Id(a1);
      CChar::WriteInSight(a1, S2C_SKILL, "bddbb", this->m_nSkill, v6, v8, 0, v10);
    }
    else
    {
      v7 = CBase::Id(a1);
      CChar::WriteInSight(a1, S2C_ACTION, "db", v7, 0);
    }
    CIOObject::Release(v14, (volatile int *)&v14[22]);
  }
  else
  {
    v4 = CBase::Id(a1);
    CChar::WriteInSight(a1, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00488010) --------------------------------------------------------
int __thiscall sub_488010(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // [esp+4h] [ebp-4h]

  v5 = 2 * a2[17] * a2[17] / dword_4D6AB8[a2[115]];
  if ( !a4 )
    return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 5, 1, v5 * (10 * this[2] + 14) / 100);
  a2[28] -= v5 * (10 * this[2] + 14) / 100;
  return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 5, 1, v5 * (10 * a3 + 14) / 100);
}

//----- (004880D0) --------------------------------------------------------
int __thiscall CUpReinforceVitality::ExcutePassiveV(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+8h] [ebp-4h]
  int *v5; // [esp+18h] [ebp+Ch]

  v5 = (int *)(a3 + 4);
  v4 = *v5;
  *(_DWORD *)(a2 + 112) -= *(v5 - 1) * (10 * this[2] + 14) / 100;
  result = *(_DWORD *)(a2 + 112) + v4 * (10 * this[2] + 14) / 100;
  *(_DWORD *)(a2 + 112) = result;
  return result;
}

//----- (00488160) --------------------------------------------------------
BOOL __thiscall sub_488160(_DWORD *this, int a2)
{
  BOOL result; // eax

  if ( this[2] < this[7] )
    result = *(_DWORD *)(a2 + 60) >= 5 * this[2] + 50;
  else
    result = 0;
  return result;
}

//----- (004881A0) --------------------------------------------------------
void __thiscall CRainforceDefense::Excute(_DWORD *this, CPlayer *a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-10h]
  int v8; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, _DWORD))*this)(this, a2, 0) )
  {
    v4 = CBuff::CreateBuff(27, 1200, 7 * this[2] + 14, 3 * this[2] + 14);// Defense Boost Buff -HighGamer
    a2->AddBuff(a2, v4);
    v5 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
    a2->UpdateProperty(a2, 8, 0, v5);
    v8 = this[2];
    v7 = CBase::Id(a2);
    v6 = CBase::Id(a2);
    CChar::WriteInSight(a2, S2C_SKILL, "bddbb", this[1], v6, v7, 0, v8);
  }
}

//----- (00488260) --------------------------------------------------------
BOOL __thiscall sub_488260(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // "Force of Defense" - HighGamer
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 70;
  }
  return 0;
}

//----- (004882D0) --------------------------------------------------------
BOOL __thiscall sub_4882D0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // "Range Extension" - HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 58;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 67;
  return 0;
}

//----- (00488330) --------------------------------------------------------
void __thiscall CVitalityDrain::Excute(_DWORD *this, CPlayer *a2, char *packet, char *end)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-18h] [ebp-38h]
  int v8; // [esp-10h] [ebp-30h]
  int v9; // [esp+0h] [ebp-20h]
  int v11; // [esp+Ch] [ebp-14h]
  int v12; // [esp+10h] [ebp-10h]
  int a1; // [esp+14h] [ebp-Ch] BYREF
  char v14; // [esp+1Bh] [ebp-5h] BYREF
  CChar *v15; // [esp+1Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &v14, &a1);
  v15 = 0;
  if ( v14 )
  {
    if ( v14 == 1 )
      v15 = CMonster::FindMonster(a1);
  }
  else
  {
    v15 = (CChar *)CPlayer::FindPlayer(a1);
  }
  if ( v15 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))*this)(this, a2, v15) )
    {
      v12 = 0;
      v11 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))(*this + 40))(this, a2, v15) )
      {
        v12 = 1;
        v4 = CChar::GetAttack(a2);
        if ( (40 * this[2] + 50) * v4 / 50 >= v15->m_nCurHP - 1 )
          v9 = v15->m_nCurHP - 1;
        else
          v9 = (40 * this[2] + 50) * CChar::GetAttack(a2) / 50;
        v11 = v9;
        if ( v15->IsMonster(v15) )
          *(_DWORD *)v15[1].m_szName = GetTickCount() + 20000;
        v15->UpdateProperty(v15, 7, 0, v9);
        a2->UpdateProperty(a2, 7, 1, v9 * (10 * this[2] + 20) / 50);
        v5 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
        a2->UpdateProperty(a2, 8, 0, v5);
      }
      v15->Defense(v15, a2);
      v8 = this[2];
      v7 = CBase::Id(v15);
      v6 = CBase::Id(a2);
      CChar::WriteInSight(a2, S2C_SKILL, "bddbbwwb", this[1], v6, v7, 1, v8, v11, 0, v12);
    }
    CIOObject::Release(v15, &v15->m_nFindRef);
  }
}

//----- (00488540) --------------------------------------------------------
BOOL __thiscall CVitalityDrain::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // "Life Absorption" - HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 57;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 66;
  return 0;
}

//----- (004885A0) --------------------------------------------------------
void __thiscall CSuffering::Excute_0(_DWORD *this, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-18h] [ebp-3Ch]
  int v10; // [esp-10h] [ebp-34h]
  int v11; // [esp+0h] [ebp-24h]
  int v13; // [esp+Ch] [ebp-18h]
  int v14; // [esp+Ch] [ebp-18h]
  int v15; // [esp+10h] [ebp-14h]
  int v16; // [esp+14h] [ebp-10h]
  int a1; // [esp+18h] [ebp-Ch] BYREF
  char v18; // [esp+1Fh] [ebp-5h] BYREF
  CChar *v19; // [esp+20h] [ebp-4h]

  ScanPacket(packet, end, "bd", &v18, &a1);
  v19 = 0;
  if ( v18 )
  {
    if ( v18 == 1 )
      v19 = CMonster::FindMonster(a1);
  }
  else
  {
    v19 = (CChar *)CPlayer::FindPlayer(a1);
  }
  if ( v19 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))*this)(this, pOwner, v19) )
    {
      v16 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))(*this + 40))(this, pOwner, v19) )
      {
        v16 = 1;
        v15 = v19->GetFinalResist(v19, pOwner, 3);
        v13 = (150 * this[2] + 100) * CChar::GetAttack(pOwner) / 20;
        v14 = v13 - v15 * v13 / 100;
        if ( v14 >= 4500 )
          v11 = 4500;
        else
          v11 = v14;
        v5 = CBuff::CreateBuff(29, 30, v11 / 30);// Pain Buff - HighGamer
        v19->AddBuff(v19, v5);
      }
      v19->Defense(v19, pOwner);
      v6 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v6);
      v10 = this[2];
      v9 = CBase::Id(v19);
      v7 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbbwwb", this[1], v7, v9, 1, v10, 0, 0, v16);
    }
    else
    {
      v8 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v19, &v19->m_nFindRef);
  }
  else
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (004887B0) --------------------------------------------------------
BOOL __thiscall sub_4887B0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )                            // "Pain" - HighGamer
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 68;
  }
  return 0;
}

//----- (00488820) --------------------------------------------------------
void __thiscall CInchantWeapon::Excute(CInchantWeapon *a1, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-1Ch]
  int v9; // [esp-4h] [ebp-14h]
  int v10; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char v13; // [esp+Bh] [ebp-5h] BYREF
  CChar *v14; // [esp+Ch] [ebp-4h]

  ScanPacket(packet, end, "bd", &v13, &nId);
  v14 = (CChar *)CPlayer::FindPlayer(nId);
  if ( v14 )
  {
    if ( a1->CanExcute(a1, pOwner, v14) )
    {
      v5 = CBuff::CreateBuff(36, 900, 8 * a1->m_nLevel + 16);// Refine Buff - HighGamer
      v14->AddBuff(v14, v5);
      v9 = a1->GetSpendMP(a1, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v9);
      v10 = a1->m_nLevel;
      v8 = CBase::Id(v14);
      v6 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", a1->m_nSkill, v6, v8, 0, v10);
    }
    else
    {
      v7 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v7, 0);
    }
    CIOObject::Release(v14, &v14->m_nFindRef);
  }
  else
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00488960) --------------------------------------------------------
BOOL __thiscall CSuffering::Excute(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // "Refining Weapon"
                                                // -HighGamer
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 57;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 66;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 69;
  }
  return 0;
}

//----- (004889F0) --------------------------------------------------------
void __thiscall CAuraDefense::Excute(_DWORD *this, int a1, void *Src, int a4)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-1Ch]
  int v10; // [esp-4h] [ebp-14h]
  int nId; // [esp+4h] [ebp-Ch] BYREF
  char v13; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v14; // [esp+Ch] [ebp-4h]

  ScanPacket((char *)Src, (char *)a4, "bd", &v13, &nId);
  v14 = CPlayer::FindPlayer(nId);
  if ( v14 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*this)(this, a1, v14) )
    {
      v5 = CBuff::CreateBuff(37, 600, 30 * this[2] + 5, 20 * this[2] + 5);// Defence Improvement - HighGamer
      v14->__vftable[7].OnTimerCallback(v14, (int)v5);
      v6 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a1 + 88))(a1, 8, 0, v6);
      v10 = this[2];
      v9 = CBase::Id((CBase *)v14);
      v7 = CBase::Id((CBase *)a1);
      CChar::WriteInSight((CChar *)a1, S2C_SKILL, "bddbb", this[1], v7, v9, 0, v10);
    }
    else
    {
      v8 = CBase::Id((CBase *)a1);
      CChar::WriteInSight((CChar *)a1, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v14, (volatile int *)&v14[22]);
  }
  else
  {
    v4 = CBase::Id((CBase *)a1);
    CChar::WriteInSight((CChar *)a1, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00488B30) --------------------------------------------------------
BOOL __thiscall CDash::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // Could be
                                                // "Rush"
                                                // "Defense Improvement"
                                                // -HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 62;
  return 0;
}

//----- (00488B70) --------------------------------------------------------
void __thiscall sub_488B70(_DWORD *a1, int a5, void *a6, int a7)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-20h]
  int v10; // [esp-4h] [ebp-18h]
  DWORD nId; // [esp+8h] [ebp-Ch] BYREF
  char v13; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v14; // [esp+10h] [ebp-4h]

  ScanPacket((char *)a6, (char *)a7, "bd", &v13, &nId);
  v14 = 0;
  if ( v13 )
  {
    if ( v13 == 1 )
      v14 = CMonster::FindMonster(nId);
  }
  else
  {
    v14 = CPlayer::FindPlayer(nId);
  }
  if ( v14 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v14) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v14) )
      {
        v5 = CBuff::CreateBuff(7, a1[2] + 1);   // Faint / Stun Buff - HighGamer
        v14->__vftable[7].OnTimerCallback(v14, (int)v5);
      }
      v14->__vftable[3].OnTimer(v14, a5);
      v6 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v6);
      v10 = a1[2];
      v9 = CBase::Id((CBase *)v14);
      v7 = CBase::Id((CBase *)a5);
      CChar::WriteInSight((CChar *)a5, S2C_SKILL, "bddbb", a1[1], v7, v9, 0, v10);
    }
    else
    {
      v8 = CBase::Id((CBase *)a5);
      CChar::WriteInSight((CChar *)a5, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v14, (volatile int *)&v14[22]);
  }
  else
  {
    v4 = CBase::Id((CBase *)a5);
    CChar::WriteInSight((CChar *)a5, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00488CF0) --------------------------------------------------------
void __thiscall sub_488CF0(_DWORD *a1, CPlayer *a5, char *packet, char *end)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-18h] [ebp-30h]
  int v8; // [esp-10h] [ebp-28h]
  int v10; // [esp+8h] [ebp-10h]
  DWORD nId; // [esp+Ch] [ebp-Ch] BYREF
  char v12; // [esp+13h] [ebp-5h] BYREF
  CChar *v13; // [esp+14h] [ebp-4h]

  ScanPacket(packet, end, "bd", &v12, &nId);
  v13 = 0;
  if ( v12 )
  {
    if ( v12 == 1 )
      v13 = CMonster::FindMonster(nId);
  }
  else
  {
    v13 = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( v13 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))*a1)(a1, a5, v13) )
    {
      v10 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))(*a1 + 40))(a1, a5, v13) )
      {
        v10 = 1;
        v4 = CBuff::CreateBuff(20, 15, -30 * a1[2]);// Change Of Attack Speed Buff - HighGamer
        v13->AddBuff(v13, v4);
      }
      v13->Defense(v13, a5);
      v5 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      a5->UpdateProperty(a5, 8, 0, v5);
      v8 = a1[2];
      v7 = CBase::Id(v13);
      v6 = CBase::Id(a5);
      CChar::WriteInSight(a5, S2C_SKILL, "bddbbwwb", a1[1], v6, v7, 1, v8, 0, 0, v10);
    }
    CIOObject::Release(v13, &v13->m_nFindRef);
  }
}

//----- (00488E50) --------------------------------------------------------
BOOL __thiscall CSacrifice::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // Could be
                                                // "Speed of Attack Reducer"
                                                // "Sacrifice"
                                                // -HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 61;
  return 0;
}

//----- (00488E90) --------------------------------------------------------
void __thiscall sub_488E90(_DWORD *a1, CPlayer *a5, char *packet, char *end)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-18h] [ebp-30h]
  int v10; // [esp-10h] [ebp-28h]
  int v12; // [esp+8h] [ebp-10h]
  DWORD nId; // [esp+Ch] [ebp-Ch] BYREF
  char v14; // [esp+13h] [ebp-5h] BYREF
  CChar *v15; // [esp+14h] [ebp-4h]

  ScanPacket(packet, end, "bd", &v14, &nId);
  v15 = 0;
  if ( v14 )
  {
    if ( v14 == 1 )
      v15 = CMonster::FindMonster(nId);
  }
  else
  {
    v15 = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( v15 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))*a1)(a1, a5, v15) )
    {
      v12 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, CPlayer *, CChar *))(*a1 + 40))(a1, a5, v15) )
      {
        v12 = 1;
        v5 = CBuff::CreateBuff(0, 8 * a1[2], -50);
        v15->AddBuff(v15, v5);
      }
      v15->Defense(v15, a5);
      v6 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      a5->UpdateProperty(a5, 8, 0, v6);
      v10 = a1[2];
      v9 = CBase::Id(v15);
      v7 = CBase::Id(a5);
      CChar::WriteInSight(a5, S2C_SKILL, "bddbbwwb", a1[1], v7, v9, 1, v10, 0, 0, v12);
    }
    else
    {
      v8 = CBase::Id(a5);
      CChar::WriteInSight(a5, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v15, &v15->m_nFindRef);
  }
  else
  {
    v4 = CBase::Id(a5);
    CChar::WriteInSight(a5, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00489030) --------------------------------------------------------
BOOL __thiscall CDarknessVision::CanSkillUp_0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // "Sight Interruption" - HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 58;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 69;
  return 0;
}

//----- (00489090) --------------------------------------------------------
void __thiscall CPurge::Excute(CPurge *this, CPlayer *pOwner, char *packet, char *end)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-20h]
  int v9; // [esp-4h] [ebp-18h]
  DWORD nId; // [esp+8h] [ebp-Ch] BYREF
  char v12; // [esp+Fh] [ebp-5h] BYREF
  CChar *v13; // [esp+10h] [ebp-4h]

  ScanPacket(packet, end, "bd", &v12, &nId);
  v13 = 0;
  if ( v12 )
  {
    if ( v12 == 1 )
      v13 = CMonster::FindMonster(nId);
  }
  else
  {
    v13 = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( v13 )
  {
    if ( this->CanExcute(this, pOwner, v13) )
    {
      CChar::CancelBuffPrty(v13, 4);
      v13->Defense(v13, pOwner);
      v5 = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v5);
      v9 = this->m_nLevel;
      v8 = CBase::Id(v13);
      v6 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, v6, v8, 0, v9);
    }
    else
    {
      v7 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v7, 0);
    }
    CIOObject::Release(v13, &v13->m_nFindRef);
  }
  else
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (004891E0) --------------------------------------------------------
void __thiscall CDoTele::ExcuteM(CDoTele *this, CMonster *pOwner, CChar *pChar, char *a7)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-20h]
  int v9; // [esp-4h] [ebp-18h]
  DWORD nId; // [esp+8h] [ebp-Ch] BYREF
  char v12; // [esp+Fh] [ebp-5h] BYREF
  CChar *v13; // [esp+10h] [ebp-4h]

  ScanPacket((char *)pChar, a7, "bd", &v12, &nId);
  v13 = 0;
  if ( v12 )
  {
    if ( v12 == 1 )
      v13 = CMonster::FindMonster(nId);
  }
  else
  {
    v13 = (CChar *)CPlayer::FindPlayer(nId);
  }
  if ( v13 )
  {
    if ( this->CanExcute(this, (CPlayer *)pOwner, v13) )
    {
      v13->RemoveHostility(v13, pOwner);
      v5 = this->GetSpendMP(this, 0);
      pOwner->UpdateProperty(pOwner, 8, 0, v5);
      v9 = this->m_nLevel;
      v8 = CBase::Id(v13);
      v6 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_SKILL, "bddbb", this->m_nSkill, v6, v8, 0, v9);
    }
    else
    {
      v7 = CBase::Id(pOwner);
      CChar::WriteInSight(pOwner, S2C_ACTION, "db", v7, 0);
    }
    CIOObject::Release(v13, &v13->m_nFindRef);
  }
  else
  {
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00489320) --------------------------------------------------------
BOOL __thiscall sub_489320(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((CChar *)a2)
      && CChar::IsNormal((CChar *)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState((CChar *)a2, 512)
      && CPlayer::IsWState((CPlayer *)a2, 0)
      && a2[68] > (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)this + 32))(this, a2)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && a2 != a3;
}

//----- (004893C0) --------------------------------------------------------
int __thiscall sub_4893C0(_DWORD *this, CPlayer *a2)
{
  return (5 * this[2] + 5) * CChar::GetMaxHP(a2) / 100;
}

//----- (004893F0) --------------------------------------------------------
void __thiscall CDarknessVision::CanSkillUp(_DWORD *this, int a5, void *Src, int a7)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-20h]
  int v8; // [esp-8h] [ebp-1Ch]
  int v9; // [esp-4h] [ebp-18h]
  int v10; // [esp-4h] [ebp-18h]
  int a1; // [esp+8h] [ebp-Ch] BYREF
  char v13; // [esp+Fh] [ebp-5h] BYREF
  CChar *v14; // [esp+10h] [ebp-4h]

  ScanPacket((char *)Src, (char *)a7, "bd", &v13, &a1);
  v14 = 0;
  if ( !v13 )
    v14 = (CChar *)CPlayer::FindPlayer(a1);
  if ( v14 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CChar *))*this)(this, a5, v14) )
    {
      v4 = (*(int (__thiscall **)(_DWORD *, int))(*this + 32))(this, a5);
      v14->UpdateProperty(v14, 7, 1, (25 * this[2] + 50) * v4 / 100);
      v9 = (*(int (__thiscall **)(_DWORD *, int))(*this + 32))(this, a5);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 7, 0, v9);
      v10 = this[2];
      v7 = CBase::Id(v14);
      v5 = CBase::Id((CBase *)a5);
      CChar::WriteInSight((CChar *)a5, S2C_SKILL, "bddbb", this[1], v5, v7, 0, v10);
    }
    else
    {
      v6 = CBase::Id((CBase *)a5);
      CChar::WriteInSight((CChar *)a5, S2C_ACTION, "db", v6, 0);
    }
    CIOObject::Release(v14, &v14->m_nFindRef);
  }
  else
  {
    v8 = CBase::Id((CBase *)a5);
    CChar::WriteInSight((CChar *)a5, S2C_ACTION, "db", v8, 0);
  }
}

//----- (00489550) --------------------------------------------------------
BOOL __thiscall sub_489550(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((CChar *)a2)
      && !CChar::IsGState((CChar *)a2, 512)
      && CPlayer::IsWState((CPlayer *)a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)this + 32))(this, a2);
}

//----- (004895C0) --------------------------------------------------------
int __stdcall CChangeVitality::GetSpendMP(CPlayer *a1)
{
  return 10 * CChar::GetMaxMP(a1) / 100;
}

//----- (004895E0) --------------------------------------------------------
void __thiscall sub_4895E0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-10h]
  int v7; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*this)(this, a2, 0)
    && a2[69] > (*(int (__thiscall **)(_DWORD *, _DWORD *))(*this + 32))(this, a2) )
  {
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 88))(a2, 7, 1, this[2] * 2 * a2[69]);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, _DWORD))(*a2 + 88))(a2, 8, 0, a2[69]);
  }
  else
  {
    v4 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_ACTION, "db", v4, 0);
  }
  v7 = this[2];
  v6 = CBase::Id((CBase *)a2);
  v5 = CBase::Id((CBase *)a2);
  CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v5, v6, 0, v7);
}

//----- (004896C0) --------------------------------------------------------
void __thiscall sub_4896C0(_DWORD *this, int *a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-20h]
  int v9; // [esp-4h] [ebp-18h]
  int v10; // [esp+0h] [ebp-14h]
  CBaseList *i; // [esp+8h] [ebp-Ch]
  CIOObject *v13; // [esp+Ch] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, int *, _DWORD))*this)(this, a2, 0) )
  {
    if ( a2[254] )
    {
      v13 = (CIOObject *)sub_44D4E0(a2[254]);
      if ( v13 )
      {
        for ( i = (CBaseList *)CParty::GetPlayerList((CIOCriticalSection *)v13); i; i = CBaseList::Pop(i) )
        {
          v10 = unknown_libname_7(i);
          v4 = CBuff::CreateBuff(75, 15, 350, 300);// Call Of Elastic Shield - HighGamer
          (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)v10 + 180))(v10, v4);
        }
        CIOObject::Release(v13);
      }
    }
    else
    {
      v5 = CBuff::CreateBuff(75, 15, 350, 300);
      (*(void (__thiscall **)(int *, CBuffMoveSpeed *))(*a2 + 180))(a2, v5);
    }
    v6 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
    (*(void (__cdecl **)(int *, int, _DWORD, int))(*a2 + 88))(a2, 8, 0, v6);
    v9 = this[2];
    v8 = CBase::Id((CBase *)a2);
    v7 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v7, v8, 0, v9);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (004897F0) --------------------------------------------------------
BOOL __thiscall sub_4897F0(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((CChar *)a2)
      && CChar::IsNormal((CChar *)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState((CChar *)a2, 512)
      && CPlayer::IsWState((CPlayer *)a2, 0)
      && a2[68] > (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)this + 32))(this, a2)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3);
}

//----- (00489890) --------------------------------------------------------
void __thiscall CSilenceShot::Excute(_DWORD *this, int a1, void *Src, int a4)
{
  int v4; // eax
  CBuffMoveSpeed *v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-20h]
  int v10; // [esp-4h] [ebp-18h]
  DWORD nId; // [esp+8h] [ebp-Ch] BYREF
  char v13; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v14; // [esp+10h] [ebp-4h]

  ScanPacket((char *)Src, (char *)a4, "bd", &v13, &nId);
  v14 = 0;
  if ( v13 )
  {
    if ( v13 == 1 )
      v14 = CMonster::FindMonster(nId);
  }
  else
  {
    v14 = CPlayer::FindPlayer(nId);
  }
  if ( v14 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*this)(this, a1, v14) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*this + 40))(this, a1, v14) )
      {
        v5 = CBuff::CreateBuff(81, 10, 70 * this[2] - 20);// Powerful Arrow Of Silence - HighGamer
        v14->__vftable[7].OnTimerCallback(v14, (int)v5);
      }
      v6 = (*(int (__thiscall **)(_DWORD *, int))(*this + 32))(this, a1);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a1 + 88))(a1, 7, 0, v6);
      v10 = this[2];
      v9 = CBase::Id((CBase *)v14);
      v7 = CBase::Id((CBase *)a1);
      CChar::WriteInSight((CChar *)a1, S2C_SKILL, "bddbb", this[1], v7, v9, 0, v10);
    }
    else
    {
      v8 = CBase::Id((CBase *)a1);
      CChar::WriteInSight((CChar *)a1, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v14, (volatile int *)&v14[22]);
  }
  else
  {
    v4 = CBase::Id((CBase *)a1);
    CChar::WriteInSight((CChar *)a1, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00489A10) --------------------------------------------------------
BOOL __thiscall CSkillBuff::CanExcute_0(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((CChar *)a2)
      && CChar::IsNormal((CChar *)a3)
      && a2[79] == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState((CChar *)a2, 512)
      && CPlayer::IsWState((CPlayer *)a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
}

//----- (00489AA0) --------------------------------------------------------
int __thiscall CSkillBuff::PreExcute_0(_DWORD *a1, int a5, int a6)
{
  CChar *v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v6 = 1;
  if ( !(*(int (__thiscall **)(_DWORD *))(*a1 + 88))(a1) )
  {
    v5 = (CChar *)CPlayer::FindPlayer(a6);
    if ( !v5 )
      return 0;
    if ( CChar::IsMStateEx(v5, a1[14]) )
    {
      CPlayer::Write((CPlayer *)a5, S2C_MESSAGEV, "bb", 101, a1[1]);
      v6 = 0;
    }
    CIOObject::Release(v5, &v5->m_nFindRef);
  }
  return v6;
}

//----- (00489B30) --------------------------------------------------------
void __thiscall CSkillBuff::Excute(_DWORD *this, int a1, void *Src, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-18h] [ebp-30h]
  int v10; // [esp-10h] [ebp-28h]
  int v11; // [esp-Ch] [ebp-24h]
  int v12; // [esp-4h] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-1Ch]
  int v15; // [esp+8h] [ebp-10h] BYREF
  DWORD nId; // [esp+Ch] [ebp-Ch] BYREF
  char v17; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v18; // [esp+14h] [ebp-4h]

  ScanPacket((char *)Src, (char *)a4, "bd", &v17, &nId);
  v18 = 0;
  if ( v17 )
  {
    if ( v17 == 1 )
      v18 = CMonster::FindMonster(nId);
  }
  else
  {
    v18 = CPlayer::FindPlayer(nId);
  }
  if ( v18 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*this)(this, a1, v18) )
    {
      v15 = 0;
      (*(void (__thiscall **)(_DWORD *, int, CIOObject *, int *))(*this + 80))(this, a1, v18, &v15);
      v18->__vftable[3].OnTimer(v18, a1);
      v5 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a1 + 88))(a1, 8, 0, v5);
      if ( (*(int (__thiscall **)(_DWORD *))(*this + 88))(this) )
      {
        v12 = v15;
        v10 = this[2];
        v9 = CBase::Id((CBase *)v18);
        v6 = CBase::Id((CBase *)a1);
        CChar::WriteInSight((CChar *)a1, S2C_SKILL, "bddbbwwb", this[1], v6, v9, 1, v10, 0, 0, v12);
      }
      else
      {
        v13 = this[2];
        v11 = CBase::Id((CBase *)v18);
        v7 = CBase::Id((CBase *)a1);
        CChar::WriteInSight((CChar *)a1, S2C_SKILL, "bddbb", this[1], v7, v11, 0, v13);
      }
    }
    else
    {
      v8 = CBase::Id((CBase *)a1);
      CChar::WriteInSight((CChar *)a1, S2C_ACTION, "db", v8, 0);
    }
    CIOObject::Release(v18, (volatile int *)&v18[22]);
  }
  else
  {
    v4 = CBase::Id((CBase *)a1);
    CChar::WriteInSight((CChar *)a1, S2C_ACTION, "db", v4, 0);
  }
}

//----- (00489CE0) --------------------------------------------------------
void __thiscall sub_489CE0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-14h]
  int v5; // [esp-4h] [ebp-Ch]
  DWORD v7; // [esp+4h] [ebp-4h]

  v7 = GetTickCount();
  this[16] = this[11] + v7 - this[10];
  (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a2 + 228))(a2, this[12] + v7, 1);
  a2[117] = this[12] + v7;
  (*(void (__thiscall **)(_DWORD *, _DWORD *, int))(*this + 84))(this, a2, a3);
  v5 = this[2];
  v4 = CBase::Id((CBase *)a3);
  v3 = CBase::Id((CBase *)a2);
  CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v3, v4, 0, v5);
}

//----- (00489D90) --------------------------------------------------------
int __thiscall CStrenUpStr::Apply(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(46, 1200, 6 * this[2] + 2);// Blessing of Strength - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489DD0) --------------------------------------------------------
int __thiscall CSkillBuff::CanExcute(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(47, 1200, 8 * this[2] + 3);// Blessing Of Health - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489E10) --------------------------------------------------------
BOOL __thiscall CStrenUpFatal::CanExcute(void *this, _DWORD *a2, int a3)
{
  return CSkillBuff::CanExcute_0(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (00489E60) --------------------------------------------------------
int __thiscall CSkillBuff::PreExcute(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(48, 1200, 8 * this[2] + 3);// Blessing of Agility - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489EA0) --------------------------------------------------------
BOOL __thiscall sub_489EA0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // Could be any of these
                                                // "Blessing of Health"
                                                // "Blessing of Agility"
                                                // "Lightning Resistance"
                                                // "Ice Resistance"
                                                // "Fire Resistance"
                                                // "Curse of Agility"
                                                // "Curse of Intellegence"
                                                // -HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 64;
  return 0;
}

//----- (00489EE0) --------------------------------------------------------
int __thiscall CStrenUpInt::Apply_0(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(49, 1200, 6 * this[2] + 2);// Blessing of Intelligence - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489F20) --------------------------------------------------------
BOOL __thiscall CResistPalsy::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )                     // Could be any of these
                                                // "Blessing of Intelligence"
                                                // "Curse Resistance"
                                                // "Non-Attribution Resistance"
                                                // "MP Vaporization"
                                                // -HighGamer
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 65;
  return 0;
}

//----- (00489F60) --------------------------------------------------------
int __thiscall sub_489F60(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(50, 900, 3 * this[2] + 2);// Blessing of Cirtical Hit - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489FA0) --------------------------------------------------------
BOOL __thiscall CCloudSight::CanExcute_0(void *this, _DWORD *a2, int a3)
{
  return CSkill::CanExcute((CSkill *)this, (CPlayer *)a2, (CChar *)a3)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 156))(a3) == 1;
}

//----- (00489FF0) --------------------------------------------------------
int __thiscall CMShock::ExcuteM(CMShock *this, CMonster *pOwner, CChar *pChar, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = this->CanContiSkill(this, (CPlayer *)pOwner, pChar);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(83, 15, 50 * pChar->m_nRange / -100);
    result = pChar->AddBuff(pChar, v5);
  }
  return result;
}

//----- (0048A050) --------------------------------------------------------
BOOL __thiscall sub_48A050(void *this, _DWORD *a2, int a3)
{
  return CSkill::CanExcute((CSkill *)this, (CPlayer *)a2, (CChar *)a3);
}

//----- (0048A070) --------------------------------------------------------
int __thiscall sub_48A070(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(84, 10, (250 * this[2] + 100) / 10);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A0D0) --------------------------------------------------------
BOOL __thiscall sub_48A0D0(void *this, _DWORD *a2, int a3)
{
  return CSkill::CanExcute((CSkill *)this, (CPlayer *)a2, (CChar *)a3)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (0048A120) --------------------------------------------------------
int __thiscall CMeshChance::Apply(_DWORD *this, int a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, _DWORD *))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(85, 20 * this[2] + 50, a3[64] * (25 * this[2] + 25) / -100);
    result = (*(int (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A1A0) --------------------------------------------------------
BOOL __thiscall CMeshDefense::CanSkillUp_0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;                                   // Could be any of these
                                                // Group Cure 2
                                                // Curse of Cirtical Hit
                                                // Curse of Defense
                                                // - HighGamer
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 67;
  return 0;
}

//----- (0048A1E0) --------------------------------------------------------
int __thiscall sub_48A1E0(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(86, 20 * this[2] + 50, -24 * this[2]);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A240) --------------------------------------------------------
int __thiscall CMeshHth::Apply(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(87, 20 * this[2] + 50, -12 * this[2]);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A2A0) --------------------------------------------------------
int __thiscall CStrenUpInt::Apply(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(88, 20 * this[2] + 50, -20 * this[2]);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A300) --------------------------------------------------------
int __thiscall sub_48A300(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(89, 20 * this[2] + 50, -24 * this[2]);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A360) --------------------------------------------------------
int __thiscall CCloudSight::CanExcute(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(90, 20 * this[2] + 50, -16 * this[2]);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A3C0) --------------------------------------------------------
BOOL __thiscall CMeshWis::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 66;
  return 0;
}

//----- (0048A400) --------------------------------------------------------
int __thiscall CMeshDefense::Apply(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(91, 10 * this[2] + 30, -(8 * this[2] + 4), -(6 * this[2] + 2));
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A480) --------------------------------------------------------
int __thiscall CVanishConfi::Apply(void *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(93, 15, -50);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A4D0) --------------------------------------------------------
int __thiscall CDestroySight::Apply(void *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(94, 10);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A520) --------------------------------------------------------
void __thiscall CBenefitAblation::Apply(void *this, int a2, _DWORD *a3, _DWORD *a4)
{
  if ( (*(int (__thiscall **)(void *, int, _DWORD *))(*(_DWORD *)this + 40))(this, a2, a3) )
  {
    *a4 = 1;
    CChar::CancelBuffPrty((CChar *)a3, 2);
  }
}

//----- (0048A560) --------------------------------------------------------
BOOL __thiscall CMeshDefense::CanSkillUp(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((CChar *)a2)
      && !CChar::IsGState((CChar *)a2, 512)
      && CPlayer::IsWState((CPlayer *)a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
}

//----- (0048A5D0) --------------------------------------------------------
void __thiscall CSkillSelfBuff::Excute(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-10h]
  int v8; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, int, _DWORD))*this)(this, a2, 0) )
  {
    (*(void (__thiscall **)(_DWORD *, int))(*this + 80))(this, a2);
    v4 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
    (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 8, 0, v4);
    v8 = this[2];
    v7 = CBase::Id((CBase *)a2);
    v5 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v5, v7, 0, v8);
  }
  else
  {
    v6 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_ACTION, "db", v6, 0);
  }
}

//----- (0048A680) --------------------------------------------------------
int __thiscall sub_48A680(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(69, 60, 6 * this[2] + 5, -(2 * this[2] + 3));// Berserk - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A6D0) --------------------------------------------------------
BOOL __thiscall CShootingFire::GetMagicM(CShootingFire *this, CMonster *pOwner)
{
  if ( this->m_nLevel >= this->m_nLmtMaxLevel ) // "Berserk" - HighGamer
    return 0;
  switch ( this->m_nLevel )
  {
    case 1:
      return pOwner->m_nLevel >= 56;
    case 2:
      return pOwner->m_nLevel >= 59;
    case 3:
      return pOwner->m_nLevel >= 62;
    case 4:
      return pOwner->m_nLevel >= 65;
    case 5:
      return pOwner->m_nLevel >= 70;
  }
  return 0;
}

//----- (0048A770) --------------------------------------------------------
int __thiscall sub_48A770(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(76, 900, 5 * this[2] + 10);// Lightning Resistance - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A7B0) --------------------------------------------------------
int __thiscall CResistIce::Apply(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(77, 900, 5 * this[2] + 10);// Ice Resistance - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A7F0) --------------------------------------------------------
int __thiscall CMSiegeGunBallExplosion::GetMagicM(CMSiegeGunBallExplosion *this, CMonster *pOwner)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(78, 900, 5 * this->m_nLevel + 10);// Fire Resistance -HighGamer
  return pOwner->AddBuff(pOwner, v2);
}

//----- (0048A830) --------------------------------------------------------
int __thiscall CMSiegeGunBallExplosion::ExcuteM(CMSiegeGunBallExplosion *this, CMonster *pOwner, CChar *pChar)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(79, 900, 5 * this->m_nLevel + 10);// Cure Resistance -HighGamer
  return pOwner->AddBuff(pOwner, v3);
}

//----- (0048A870) --------------------------------------------------------
int __thiscall CResistPalsy::Apply(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(80, 900, 5 * this[2] + 10);// Non Elemental Resistance Buff - HighGamer
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A8B0) --------------------------------------------------------
void __thiscall CEmergencyEscape::Apply(void *this, _DWORD *a2)
{
  CBuffMoveSpeed *v2; // eax
  CBuffMoveSpeed *v3; // eax
  CChar *v4; // [esp+4h] [ebp-10h]
  CBaseList *i; // [esp+8h] [ebp-Ch]
  CIOObject *v6; // [esp+Ch] [ebp-8h]
  int a1; // [esp+10h] [ebp-4h]

  a1 = a2[254];
  if ( a1 )
  {
    v6 = (CIOObject *)sub_44D4E0(a1);
    if ( v6 )
    {
      for ( i = (CBaseList *)CParty::GetPlayerList((CIOCriticalSection *)v6); i; i = CBaseList::Pop(i) )
      {
        v4 = (CChar *)unknown_libname_7(i);
        if ( Distance((const tagPOINT *)(a2 + 83), &v4->m_ptPixel) <= 64 )
        {
          v2 = CBuff::CreateBuff(82, 38, 200);  // Emergancy Escape Buff - HighGamer
          v4->AddBuff(v4, v2);
          CChar::CancelBuffPrty(v4, 4);
        }
      }
      CIOObject::Release(v6);
    }
  }
  else
  {
    v3 = CBuff::CreateBuff(82, 38, 200);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a2 + 180))(a2, v3);
    CChar::CancelBuffPrty((CChar *)a2, 4);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048A9A0) --------------------------------------------------------
void __thiscall CChant::Excute(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-28h]
  int v7; // [esp-4h] [ebp-20h]
  CIOObject *v9; // [esp+10h] [ebp-Ch]
  int *v10; // [esp+18h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*this)(this, a2, 0) )
  {
    v10 = (int *)(*(int (__thiscall **)(_DWORD *, _DWORD *))(*this + 80))(this, a2);
    if ( v10 )
    {
      if ( a2[254] )
      {
        v9 = (CIOObject *)sub_44D4E0(a2[254]);
        if ( v9 )
        {
          CParty::Chant(v9, a2, v10);
          CBuff::`scalar deleting destructor'((CBuff *)v10, 1);
          CIOObject::Release(v9);
        }
      }
      else
      {
        if ( a2[146] )
          CChar::CancelBuff((CChar *)a2, a2[146]);
        (*(void (__thiscall **)(_DWORD *, int *))(*a2 + 180))(a2, v10);
        a2[146] = v10[1];
      }
      v4 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 32))(this, 0);
      (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 88))(a2, 8, 0, v4);
      v7 = this[2];
      v6 = CBase::Id((CBase *)a2);
      v5 = CBase::Id((CBase *)a2);
      CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v5, v6, 0, v7);
    }
  }
}
// 48AA2C: conditional instruction was optimized away because of '%var_4.4!=0'

//----- (0048AAF0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall CChantProtect::CreateBuff(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(28, 0, 7 * this[2] + 9, 3 * this[2] + 9);// Call Of Defense Buff - HighGamer
}

//----- (0048AB30) --------------------------------------------------------
bool __thiscall std::_Tree<std::_Tmap_traits<CParty *,int,std::less<CParty *>,std::allocator<std::pair<CParty * const,int>>,0>>::find(int this, int a2)
{
  BOOL v2; // eax
                                                // "Call of Defense" - HighGamer
  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      v2 = *(_DWORD *)(a2 + 60) >= 57;
    }
    else if ( *(_DWORD *)(this + 8) == 2 )
    {
      LOBYTE(v2) = *(_DWORD *)(a2 + 60) >= 63;
    }
    else
    {
      LOBYTE(v2) = 0;
    }
  }
  else
  {
    LOBYTE(v2) = 0;
  }
  return v2;
}

//----- (0048AB90) --------------------------------------------------------
CBuffMoveSpeed *__thiscall CChantHealing::CreateBuff(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(38, 0, 8 * this[2] + 4);// Call Of Recovery - HighGamer
}

//----- (0048ABC0) --------------------------------------------------------
CSkill *__thiscall CMemoryPool<CSkill>::Alloc(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )                           // "Call of Recovery" - HighGamer
    return (CSkill *)(*(_DWORD *)(a2 + 60) >= 61);
  if ( this[2] == 2 )
    return (CSkill *)(*(_DWORD *)(a2 + 60) >= 67);
  return 0;
}

//----- (0048AC20) --------------------------------------------------------
CBuffMoveSpeed *__thiscall CChantDefLightning::CreateBuff_0(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(70, 0, 3 * this[2] + 2);// Call Of Lightning Defence - HighGamer
}

//----- (0048AC50) --------------------------------------------------------
BOOL __thiscall CChantDefFire::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )                           // Could be 
                                                // Call of Lightning Defense 
                                                // Call of Ice Defense 
                                                // Call of Fire Defense only
                                                // - HighGamer
    return *(_DWORD *)(a2 + 60) >= 57;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 64;
  return 0;
}

//----- (0048ACB0) --------------------------------------------------------
int __thiscall std::_Tree<std::_Tmap_traits<CPlayer *,int,std::less<CPlayer *>,std::allocator<std::pair<CPlayer * const,int>>,0>>::lower_bound(int this, int a2)
{
  return (int)CBuff::CreateBuff(71, 0, 3 * *(_DWORD *)(this + 8) + 2);// Call Of Ice Defence - HighGamer
}

//----- (0048ACE0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::_Tidy(std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,CSkill *> >,0> > *this, int a2)
{
  return CBuff::CreateBuff(72, 0, 3 * this->_Mysize + 2);// Call Of Fire Defence Buff - HighGamer
}

//----- (0048AD10) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48AD10(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(73, 0, 5 * this[2] + 5);// Call Of OTP Buff - HighGamer
}

//----- (0048AD40) --------------------------------------------------------
BOOL __thiscall CChantAccuracy::CanSkillUp(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )                           // "Call of On Target Point"
    return *(_DWORD *)(a2 + 60) >= 58;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 65;
  return 0;
}

//----- (0048ADA0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48ADA0(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(74, 0, 25 * this[2] + 25);// Call Of Physical Attack Buff - HighGamer
}

//----- (0048ADD0) --------------------------------------------------------
int __stdcall CTLitningBlast::GetMagic(int a1, int a2)
{
  return a2 + a2 / 5 + 2 * *(_DWORD *)(a1 + 72);
}

//----- (0048AE00) --------------------------------------------------------
BOOL __thiscall std::_Tree<std::_Tmap_traits<unsigned long,CSkill *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const,CSkill *>>,0>>::erase(_DWORD *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2) && CPlayer::IsWState(a2, 0) && a2[145] >= this[17];
}

//----- (0048AE50) --------------------------------------------------------
int __stdcall sub_48AE50(int a1, int a2)
{
  return *(_DWORD *)(a1 + 72) + a2 / 2;
}

//----- (0048AE70) --------------------------------------------------------
int __thiscall sub_48AE70(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax
  CBuffMoveSpeed *v7; // eax
  CBuffMoveSpeed *v8; // eax

  result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    v7 = CBuff::CreateBuff(0, 8, -50);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v7);
    v8 = CBuff::CreateBuff(20, 8, -50);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v8);
  }
  return result;
}

//----- (0048AED0) --------------------------------------------------------
void __thiscall sub_48AED0(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-10h]
  int (__thiscall **v7)(void *, int, _DWORD); // [esp-4h] [ebp-8h]

  if ( (**this)(this, a2, 0) )
  {
    v4 = CBuff::CreateBuff(24, 15, 0);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v4);
    ((void (__thiscall *)(int (__thiscall ***)(void *, int, _DWORD), int))(*this)[14])(this, a2);
    v7 = this[2];
    v6 = CBase::Id((CBase *)a2);
    v5 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, 63, "bddbb", this[1], v5, v6, 0, v7);
  }
}

//----- (0048AF60) --------------------------------------------------------
int __stdcall sub_48AF60(int a1, int a2)
{
  return a2 + 20 * a2 / 100 + 2 * *(_DWORD *)(a1 + 64);
}

//----- (0048AF90) --------------------------------------------------------
int __thiscall CTPhoenix::SpendMPRage(_DWORD *this, int a2)
{
  return (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 35, 0, this[17]);
}

//----- (0048AFC0) --------------------------------------------------------
int __stdcall sub_48AFC0(int a1, int a2)
{
  return a2 + 2 * *(_DWORD *)(a1 + 60);
}

//----- (0048AFE0) --------------------------------------------------------
int __thiscall CChantDefLightning::CreateBuff(void *this, CPlayer *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int v14; // [esp+8h] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v14 = (*(int (__thiscall **)(void *, CPlayer *, int))(*(_DWORD *)this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 84))(this);
  if ( !CChar::CheckHit(a2, (CChar *)a3, v8) )
    return 0;
  if ( (*(int (__thiscall **)(void *, CPlayer *, _DWORD *))(*(_DWORD *)this + 40))(this, a2, a3) )
  {
    v9 = CBuff::CreateBuff(7, 5);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v9);
  }
  v10 = a4 * a2->GetPalsyDamage(a2, (CChar *)a3);
  *a7 = v10 / (*(int (__thiscall **)(void *, CPlayer *))(*(_DWORD *)this + 36))(this, a2);
  v11 = (*(int (__thiscall **)(void *, CPlayer *, int, int, unsigned int *, void *))(*(_DWORD *)this + 36))(
          this,
          a2,
          a5,
          a6,
          a7,
          this);
  return (*(int (__thiscall **)(_DWORD *, CPlayer *, unsigned int))(*a3 + 72))(a3, a2, a4 * v14 / v11);
}

//----- (0048B0E0) --------------------------------------------------------
void __thiscall CThunder::GetAttack(CThunder *this, CPlayer *pOwner, int nBaseAttack, int a4)
{
  int v4; // eax
  int v5; // [esp-Ch] [ebp-10h]
  CBuffMoveSpeed *v6; // [esp-4h] [ebp-8h]
  int v7; // [esp-4h] [ebp-8h]

  if ( this->CanExcute(this, pOwner, 0) )
  {
    v6 = CBuff::CreateBuff(23, 15, 0);
    pOwner->AddBuff(pOwner, v6);
    this->SpendMPRage(this, pOwner);
    v7 = this->m_nLevel;
    v5 = CBase::Id(pOwner);
    v4 = CBase::Id(pOwner);
    CChar::WriteInSight(pOwner, 63, "bddbb", this->m_nSkill, v4, v5, 0, v7);
  }
}

//----- (0048B170) --------------------------------------------------------
int __thiscall CHealingPartyPlus::GetSkillAddValue(CShootingFire *this, int a2, int a3)
{
  return a3 + 20 * a3 / 100 + 2 * *(_DWORD *)(a2 + 80);
}

//----- (0048B1A0) --------------------------------------------------------
BOOL __thiscall CMock::GetHostility(CMock *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal(a3)
      && a2[79] == *(_DWORD *)(a3 + 316)
      && CPlayer::IsWState(a2, 0)
      && (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 176))(a2, a3, 0)
      && a2[145] >= *((_DWORD *)this + 17);
}

//----- (0048B230) --------------------------------------------------------
void __thiscall CTShadowFang::Excute(_DWORD *this, int a2, void *Src, int a4)
{
  int v4; // eax
  int v5; // eax
  CBuffMoveSpeed *v6; // eax
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-20h]
  int v11; // [esp-4h] [ebp-18h]
  int a1; // [esp+8h] [ebp-Ch] BYREF
  char v14; // [esp+Ch] [ebp-8h] BYREF
  char v15; // [esp+Dh] [ebp-7h] BYREF
  char v16; // [esp+Eh] [ebp-6h] BYREF
  char v17; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+10h] [ebp-4h]

  ScanPacket((char *)Src, (char *)a4, "bdbbb", &v15, &a1, &v14, &v17, &v16);
  CChar::Lock((CChar *)a2);
  if ( CPlayer::CanMove(a2) && CSMap::MovePlayer(*(CSMap **)(a2 + 320), (CPlayer *)a2, v14, v17, v16, 1, 1) )
  {
    CChar::Unlock((CChar *)a2);
    v18 = 0;
    if ( v15 )
    {
      if ( v15 == 1 )
        v18 = CMonster::FindMonster(a1);
    }
    else
    {
      v18 = CPlayer::FindPlayer(a1);
    }
    if ( v18 )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*this)(this, a2, v18) )
      {
        if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*this + 40))(this, a2, v18) )
        {
          v6 = CBuff::CreateBuff(21, 10, -50);
          v18->__vftable[7].OnTimerCallback(v18, (int)v6);
          v7 = CBuff::CreateBuff(22, 10, 0);
          v18->__vftable[7].OnTimerCallback(v18, (int)v7);
        }
        v18->__vftable[3].OnTimer(v18, a2);
        (*(void (__thiscall **)(_DWORD *, int))(*this + 56))(this, a2);
        v11 = this[2];
        v10 = CBase::Id((CBase *)v18);
        v8 = CBase::Id((CBase *)a2);
        CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v8, v10, 0, v11);
      }
      else
      {
        v9 = CBase::Id((CBase *)a2);
        CChar::WriteInSight((CChar *)a2, S2C_ACTION, "db", v9, 0);
      }
      CIOObject::Release(v18, (volatile int *)&v18[22]);
    }
    else
    {
      v5 = CBase::Id((CBase *)a2);
      CChar::WriteInSight((CChar *)a2, S2C_ACTION, "db", v5, 0);
    }
  }
  else
  {
    CChar::Unlock((CChar *)a2);
    CPlayer::Write((CPlayer *)a2, S2C_MESSAGE, "b", 68);
    v4 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_ACTION, "db", v4, 0);
  }
}

//----- (0048B440) --------------------------------------------------------
void __thiscall CTDiamondClow::Excute_0(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-10h]
  int (__thiscall **v7)(void *, int, _DWORD); // [esp-4h] [ebp-8h]

  if ( (**this)(this, a2, 0) )
  {
    v4 = CBuff::CreateBuff(25, 15, 0);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v4);
    ((void (__thiscall *)(int (__thiscall ***)(void *, int, _DWORD), int))(*this)[14])(this, a2);
    v7 = this[2];
    v6 = CBase::Id((CBase *)a2);
    v5 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, 63, "bddbb", this[1], v5, v6, 0, v7);
  }
}

//----- (0048B4D0) --------------------------------------------------------
CInfernal *__thiscall CInfernal::CInfernal(CInfernal *this, _DWORD *a2)
{
  int v2; // esi

  v2 = CChar::GetMagic(a2);
  return (CInfernal *)(3 * a2[15] + 5 * CChar::GetInt(a2) / 2 + v2);
}

//----- (0048B510) --------------------------------------------------------
int __thiscall CShieldAttack::GetSpendMP(CManaBurn *this, CPlayer *pOwner)
{
  int v2; // esi

  v2 = CChar::GetMagic(pOwner);
  return 7 * CChar::GetInt(pOwner) / 2 + v2 + 4 * *((_DWORD *)pOwner + 15);
}

//----- (0048B550) --------------------------------------------------------
int __thiscall CShot::GetDelay(CStunArrow *this, CPlayer *pOwner)
{
  return 6 * CChar::GetStr(pOwner) / 2 + 5 * *((_DWORD *)pOwner + 15) / 3;
}

//----- (0048B590) --------------------------------------------------------
CExplosion *__thiscall CExplosion::CExplosion(CExplosion *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(7, 12);
  return (CExplosion *)(*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v3);
}

//----- (0048B5C0) --------------------------------------------------------
int __thiscall CExplosion::GetSpendMP(CExplosion *this, CPlayer *pOwner)
{
  int v2; // esi

  if ( *((_DWORD *)this + 14) )
    return 6 * *((_DWORD *)pOwner + 15) + 11 * CChar::GetStr(pOwner);
  v2 = CChar::GetMagic(pOwner);
  return 5 * CChar::GetInt(pOwner) / 4 + v2 + 2 * *((_DWORD *)pOwner + 15);
}

//----- (0048B630) --------------------------------------------------------
void __thiscall CGetherShot::GetFatalRate(CGetherShot *this, int a2)
{
  int v2; // eax
  int v3; // eax
  int v4; // [esp-18h] [ebp-40h]
  int v5; // [esp-Ch] [ebp-34h]
  int v6; // [esp-8h] [ebp-30h]
  int v7; // [esp-4h] [ebp-2Ch]
  int v9; // [esp+4h] [ebp-24h] BYREF
  int v10; // [esp+8h] [ebp-20h] BYREF
  int v11; // [esp+Ch] [ebp-1Ch] BYREF
  int v13; // [esp+14h] [ebp-14h]
  int v14; // [esp+18h] [ebp-10h]
  CChar *v15; // [esp+1Ch] [ebp-Ch]
  CIOObject *v16; // [esp+20h] [ebp-8h]
  unsigned int v17; // [esp+24h] [ebp-4h]

  v17 = GetTickCount();
  if ( v17 >= this->m_dwTick )
  {
    if ( ++this->m_nContiCnt <= 13 )
    {
      if ( this->m_nContiCnt == 1 )
        CChar::AddGState((CChar *)a2, 0x4000);
      this->m_dwTick = v17 + 5000;
      v15 = 0;
      v2 = ((int (__thiscall *)(CGetherShot *))this->__vftable[1].CanExcute)(this);
      v16 = (CIOObject *)CSMap::GetPlayerListInRect(*(CSMap **)(a2 + 320), (const tagPOINT *)(a2 + 324), v2);
      CChar::Unlock((CChar *)a2);
      while ( v16 )
      {
        v15 = (CChar *)unknown_libname_7(v16);
        if ( CChar::IsNormal(v15) && *(_DWORD *)(a2 + 316) == v15->m_nMap )
        {
          v11 = 0;
          v10 = 0;
          v14 = CMagic::GetResist(this, a2, v15);
          v9 = 0;
          v13 = ((int (__thiscall *)(CGetherShot *, int))this->AddMortal)(this, a2);
          if ( !v15->Damage(v15, (CChar *)a2, v14 * v13 / 100, &v11, &v9, &v10, this) )
            v15->Defense(v15, (CChar *)a2);
          if ( v11 > 0 )
          {
            v7 = v10;
            v6 = v11;
            v5 = CBase::Id(v15);
            v3 = CBase::Id((CBase *)a2);
            v4 = ((int (__thiscall *)(CGetherShot *, int, int, int, int, int))this->__vftable[1].Excute)(
                   this,
                   this->m_nSkill,
                   v3,
                   v5,
                   v6,
                   v7);
            CChar::WriteInSight((CChar *)a2, S2C_SKILLADDVALUE, "bbddww", v4);
          }
        }
        v16 = (CIOObject *)CBaseList::Pop((CBaseList *)v16);
      }
      CChar::Lock((CChar *)a2);
    }
    else
    {
      this->m_nV1 = 1;
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048B800) --------------------------------------------------------
LONG __thiscall CTDiamondClow::Excute(_DWORD *this, CIOCriticalSection *a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v6; // [esp-18h] [ebp-3Ch]
  int v7; // [esp-10h] [ebp-34h]
  int v8; // [esp-Ch] [ebp-30h]
  int v9; // [esp-Ch] [ebp-30h]
  int v10; // [esp-8h] [ebp-2Ch]
  int v11; // [esp-4h] [ebp-28h]
  int v12; // [esp-4h] [ebp-28h]
  int v14; // [esp+4h] [ebp-20h] BYREF
  int v15; // [esp+8h] [ebp-1Ch] BYREF
  int v16; // [esp+Ch] [ebp-18h] BYREF
  int v18; // [esp+14h] [ebp-10h]
  int v19; // [esp+18h] [ebp-Ch]
  CChar *v20; // [esp+1Ch] [ebp-8h]
  CIOObject *v21; // [esp+20h] [ebp-4h]

  v20 = 0;
  v3 = (*(int (__thiscall **)(_DWORD *))(*this + 92))(this);
  v21 = (CIOObject *)CSMap::GetPlayerListInRect(
                       (CSMap *)a2[10].m_critical_section.DebugInfo,
                       (const tagPOINT *)&a2[10].m_critical_section.LockCount,
                       v3);
  a2[14].m_critical_section.SpinCount = this[12] + GetTickCount();
  CChar::Unlock((CChar *)a2);
  while ( v21 )
  {
    v20 = (CChar *)unknown_libname_7(v21);
    if ( CChar::IsNormal(v20) && a2[9].m_dwEIP[1] == v20->m_nMap )
    {
      v16 = 0;
      v15 = 0;
      v19 = CMagic::GetResist(this, (int)a2, v20);
      v14 = 0;
      v18 = (*(int (__thiscall **)(_DWORD *, CIOCriticalSection *))(*this + 88))(this, a2);
      if ( !v20->Damage(v20, (CChar *)a2, v19 * v18 / 100, &v16, &v14, &v15, (CSkill *)this) )
        v20->Defense(v20, (CChar *)a2);
      if ( v16 > 0 )
      {
        v11 = v15;
        v10 = v16;
        v8 = CBase::Id(v20);
        v4 = CBase::Id((CBase *)a2);
        v6 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*this + 96))(this, this[1], v4, v8, v10, v11);
        CChar::WriteInSight((CChar *)a2, S2C_SKILLADDVALUE, "bbddww", v6);
      }
    }
    v21 = (CIOObject *)CBaseList::Pop((CBaseList *)v21);
  }
  CChar::Lock((CChar *)a2);
  v12 = this[2];
  v9 = CBase::Id((CBase *)a2);
  v7 = CBase::Id((CBase *)a2);
  CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v7, v9, 0, v12);
  return CChar::AddGState((CChar *)a2, 0x10000);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048B9C0) --------------------------------------------------------
void __thiscall CDoTele::ExcuteM(_DWORD *this, int *a2, int a3)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-38h]
  int v5; // [esp-4h] [ebp-30h]
  CPlayer *v7; // [esp+4h] [ebp-28h]
  tagPOINT a3a; // [esp+8h] [ebp-24h] BYREF
  int v9; // [esp+10h] [ebp-1Ch]
  int nMax; // [esp+14h] [ebp-18h]
  CIOObject *i; // [esp+18h] [ebp-14h]
  DWORD v12; // [esp+1Ch] [ebp-10h]
  int nMin; // [esp+20h] [ebp-Ch]
  int v14; // [esp+24h] [ebp-8h]
  int v15; // [esp+28h] [ebp-4h]

  if ( a3 && *(_DWORD *)(a3 + 316) == a2[79] )
  {
    v12 = GetTickCount();
    this[16] = this[11] + v12 - this[10];
    (*(void (__thiscall **)(int *, DWORD, int))(*a2 + 228))(a2, this[12] + v12, 1);
    a2[117] = this[12] + v12;
    v5 = this[2];
    v4 = CBase::Id((CBase *)a3);
    v3 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbb", this[1], v3, v4, 0, v5);
    v15 = Random(0, 4);
    nMin = dword_4D62B0[2 * v15] - 96;
    nMax = dword_4D62B0[2 * v15] + 96;
    v9 = dword_4D62B4[2 * v15] - 96;
    v14 = dword_4D62B4[2 * v15] + 96;
    for ( i = (CIOObject *)CSMap::GetPlayerListInRect((CSMap *)a2[80], (const tagPOINT *)(a3 + 324), 2);
          i;
          i = (CIOObject *)CBaseList::Pop((CBaseList *)i) )
    {
      a3a.x = Random(nMin, nMax);
      a3a.y = Random(v9, v14);
      v7 = (CPlayer *)unknown_libname_7(i);
      if ( CChar::IsNormal(v7) )
        CPlayer::Teleport(v7, a2[79], &a3a, 30000, 0);
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 4D62B0: using guessed type int dword_4D62B0[];

//----- (0048BB50) --------------------------------------------------------
void __thiscall CEdge::GetSpendMP(CHealingAnyPlus *this, CPlayer *a5, int a6)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-Ch] [ebp-1Ch]
  int v6; // [esp-4h] [ebp-14h]
  int v8; // [esp+4h] [ebp-Ch] BYREF
  DWORD v9; // [esp+8h] [ebp-8h]
  CIOObject *v10; // [esp+Ch] [ebp-4h]

  v10 = (CIOObject *)CSMap::GetMonsterInRect((char *)a5->m_pMap, &a5->m_ptTile.x, this->m_nV1, 5);
  if ( v10 )
  {
    v9 = GetTickCount();
    this->m_dwTick = this->m_dwDelay + v9 - this->m_dwDelayPre;
    ((void (__thiscall *)(CPlayer *, unsigned int, int))a5->__vftable[1].OnDelete)(a5, this->m_dwActionDelay + v9, 1);
    a5->m_nContribute = this->m_dwActionDelay + v9;
    v3 = CChar::GetMaxHP(a5);
    a5->UpdateProperty(a5, 7, 1, v3 / 20);
    v6 = this->m_nLevel;
    v5 = CBase::Id(v10);
    v4 = CBase::Id(a5);
    CChar::WriteInSight((int)a5, 63, "bddbb", this->m_nSkill, v4, v5, 0, v6);
    CChar::Unlock((CIOCriticalSection *)a5);
    v8 = 0;
    ((void (__thiscall *)(CIOObject *, CPlayer *, int, int *, int *, int *, _DWORD))v10->__vftable[3].~CIOObject)(
      v10,
      a5,
      0xFFFF,
      &v8,
      &v8,
      &v8,
      0);
    CIOObject::Release(v10, (volatile int *)&v10[22]);
    CChar::Lock((CIOCriticalSection *)a5);
  }
}

//----- (0048BC80) --------------------------------------------------------
int __thiscall sub_48BC80(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(95, 180, 50);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048BCB0) --------------------------------------------------------
CMeditation *__thiscall CMeditation::CMeditation(CMeditation *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(96, 180, 50);
  return (CMeditation *)(*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048BCE0) --------------------------------------------------------
int __stdcall sub_48BCE0(int a1)
{
  return Random(3000, 4000);
}

//----- (0048BD00) --------------------------------------------------------
void __thiscall CSkill_MonsterMagic::ExcuteM(_DWORD *this, CIOCriticalSection *a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-30h]
  int v7; // [esp-8h] [ebp-2Ch]
  int v8; // [esp-4h] [ebp-28h]
  int v10; // [esp+4h] [ebp-20h] BYREF
  int v11; // [esp+8h] [ebp-1Ch] BYREF
  int v12; // [esp+Ch] [ebp-18h] BYREF
  int v14; // [esp+14h] [ebp-10h]
  int v15; // [esp+18h] [ebp-Ch]
  int v16; // [esp+1Ch] [ebp-8h]
  CIOObject *v17; // [esp+20h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, CIOCriticalSection *, _DWORD))(*this + 76))(this, a2, 0) )
  {
    v16 = 0;
    v3 = (*(int (__thiscall **)(_DWORD *))(*this + 92))(this);
    v17 = (CIOObject *)CSMap::GetPlayerMonsterListInRect(
                         a2[10].m_critical_section.DebugInfo,
                         (int)&a2[10].m_critical_section.LockCount,
                         v3);
    CChar::Unlock(a2);
    while ( v17 )
    {
      v16 = unknown_libname_7(v17);
      if ( CChar::IsNormal(v16)
        && a2[9].m_dwEIP[1] == *(_DWORD *)(v16 + 316)
        && (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2[15].m_critical_section.LockCount + 176))(
             a2[15].m_critical_section.LockCount,
             v16,
             1) )
      {
        v12 = 0;
        v11 = 0;
        v15 = CMagic::GetResist(this, a2[15].m_critical_section.LockCount, (_DWORD *)v16);
        v10 = 0;
        v14 = (*(int (__thiscall **)(_DWORD *, CIOCriticalSection *))(*this + 88))(this, a2);
        if ( (*(int (__thiscall **)(_DWORD *))(*this + 100))(this) )
        {
          if ( !(*(int (__thiscall **)(int, int, int, int *, int *, int *, _DWORD *))(*(_DWORD *)v16 + 72))(
                  v16,
                  a2[15].m_critical_section.LockCount,
                  v15 * v14 / 100,
                  &v12,
                  &v10,
                  &v11,
                  this) )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)v16 + 80))(v16, a2[15].m_critical_section.LockCount);
          if ( v12 > 0 )
          {
            v8 = v11;
            v7 = v12;
            v6 = CBase::Id((_DWORD *)v16);
            v4 = CBase::Id(a2);
            v5 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*this + 96))(
                   this,
                   this[1],
                   v4,
                   v6,
                   v7,
                   v8);
            CChar::WriteInSight((int)a2, 10, "bbddww", v5);
            (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, int))(*this + 104))(this, a2, v16);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, int))(*this + 104))(this, a2, v16);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v16 + 80))(v16, a2[15].m_critical_section.LockCount);
        }
      }
      v17 = (CIOObject *)CBaseList::Pop(v17);
    }
    CChar::Lock(a2);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048BF10) --------------------------------------------------------
int __stdcall sub_48BF10(_DWORD *a1)
{
  return CChar::GetMagic(a1);
}

//----- (0048BF30) --------------------------------------------------------
CHealingPartyIns *__thiscall CHealingPartyIns::CHealingPartyIns(CHealingPartyIns *this, int a2, int a3)
{
  return (CHealingPartyIns *)(*(int (__thiscall **)(CHealingPartyIns *, _DWORD, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 84))(
                               this,
                               *(_DWORD *)(a2 + 484),
                               a3,
                               0,
                               0,
                               0);
}

//----- (0048BF60) --------------------------------------------------------
int __thiscall CMPoisonCloud::ApplyM(void *this, int a2, int a3)
{
  int v3; // eax
  CBuffMoveSpeed *v4; // eax

  v3 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)this + 88))(this, a2);
  v4 = CBuff::CreateBuff(92, 60, v3);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (0048BFA0) --------------------------------------------------------
CPoisonArrow *__thiscall CPoisonArrow::CPoisonArrow(CPoisonArrow *this, _DWORD *a2)
{
  int v2; // esi
  int v4; // [esp+4h] [ebp-14h]
  int v5; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]

  v2 = 3 * a2[15] / 2;
  nMin = (v2 + 20 * CChar::GetInt(a2) / 16) / 2;
  if ( nMin >= 150 )
    v5 = 150;
  else
    v5 = nMin;
  if ( nMin >= 300 )
    v4 = 300;
  else
    v4 = nMin;
  return (CPoisonArrow *)Random(v5, v4);
}

//----- (0048C040) --------------------------------------------------------
CSilenceArrow *__thiscall CSilenceArrow::CSilenceArrow(CSilenceArrow *this, _DWORD *a2)
{
  int v2; // esi
  int v3; // esi
  int v5; // [esp+4h] [ebp-14h]
  int v6; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v2 = 3 * a2[15] / 2;
  nMin = v2 + 3 * this->m_nLevel * CChar::GetInt(a2) / 10 / 2 + 10;
  v3 = 3 * a2[15] / 2;
  nMax = v3 + 5 * this->m_nLevel * CChar::GetInt(a2) / 8 / 2 + 30;
  if ( nMin >= 300 )
    v6 = 300;
  else
    v6 = nMin;
  if ( nMax >= 400 )
    v5 = 400;
  else
    v5 = nMax;
  return (CSilenceArrow *)Random(v6, v5);
}

//----- (0048C110) --------------------------------------------------------
void __thiscall CMSpark::ExcuteM_0(_DWORD *this, int a2, CPlayer *a3)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-2Ch]
  int v6; // [esp+4h] [ebp-1Ch] BYREF
  int v7; // [esp+8h] [ebp-18h] BYREF
  int v8; // [esp+Ch] [ebp-14h] BYREF
  int v10; // [esp+14h] [ebp-Ch]
  int v11; // [esp+18h] [ebp-8h]
  DWORD v12; // [esp+1Ch] [ebp-4h]

  if ( a3 )
  {
    CChar::SetDirection((_DWORD *)a2, a3->m_ptPixel.x - *(_DWORD *)(a2 + 332), a3->m_ptPixel.y - *(_DWORD *)(a2 + 336));
    v12 = GetTickCount();
    this[16] = this[11] + v12 - this[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a2 + 228))(a2, this[12] + v12, 1);
    *(_DWORD *)(a2 + 468) = this[12] + v12;
    if ( CChar::IsNormal((int)a3) )
    {
      if ( *(_DWORD *)(a2 + 316) == a3->m_nMap && Distance((_DWORD *)(a2 + 332), &a3->m_ptPixel.x) < 170 )
      {
        v8 = 0;
        v7 = 0;
        v11 = CMagic::GetResist(this, a2, *(_DWORD **)(a2 + 464));
        v6 = 0;
        v10 = (*(int (__thiscall **)(_DWORD *, int))(*this + 88))(this, a2);
        if ( !a3->Damage(a3, (CChar *)a2, v11 * v10 / 100, &v8, &v6, &v7, (CSkill *)this) )
          a3->Defense(a3, (CChar *)a2);
        v4 = CBase::Id(a3);
        v3 = CBase::Id((_DWORD *)a2);
        CChar::WriteInSight(a2, 63, "bddbbwwb", this[1], v3, v4, 1, 5);
        CPlayer::Write((int)a3, 69, "bw", 7, a3->m_nCurHP);
        CPlayer::UpdatePartyMember(a3, 7);
      }
    }
  }
}

//----- (0048C2D0) --------------------------------------------------------
int __stdcall CMFireRain::GetMagicM(_DWORD *a1)
{
  int v1; // esi

  v1 = 3 * a1[15] / 2;
  return v1 + 60 * CChar::GetInt(a1) / 10;
}

//----- (0048C310) --------------------------------------------------------
void __thiscall CDestructionFlame::ExcuteM(_DWORD *this, int a2, CPlayer *a3)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-2Ch]
  int v6; // [esp+4h] [ebp-1Ch] BYREF
  int v7; // [esp+8h] [ebp-18h] BYREF
  int v8; // [esp+Ch] [ebp-14h] BYREF
  int v10; // [esp+14h] [ebp-Ch]
  int v11; // [esp+18h] [ebp-8h]
  DWORD v12; // [esp+1Ch] [ebp-4h]

  if ( a3 )
  {
    CChar::SetDirection((_DWORD *)a2, a3->m_ptPixel.x - *(_DWORD *)(a2 + 332), a3->m_ptPixel.y - *(_DWORD *)(a2 + 336));
    v12 = GetTickCount();
    this[16] = this[11] + v12 - this[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a2 + 228))(a2, this[12] + v12, 1);
    *(_DWORD *)(a2 + 468) = this[12] + v12;
    if ( CChar::IsNormal((int)a3) )
    {
      if ( *(_DWORD *)(a2 + 316) == a3->m_nMap && Distance((_DWORD *)(a2 + 332), &a3->m_ptPixel.x) < 170 )
      {
        v8 = 0;
        v7 = 0;
        v11 = CMagic::GetResist(this, a2, *(_DWORD **)(a2 + 464));
        v6 = 0;
        v10 = (*(int (__thiscall **)(_DWORD *, int))(*this + 88))(this, a2);
        if ( !a3->Damage(a3, (CChar *)a2, v11 * v10 / 100, &v8, &v6, &v7, (CSkill *)this) )
          a3->Defense(a3, (CChar *)a2);
        v4 = CBase::Id(a3);
        v3 = CBase::Id((_DWORD *)a2);
        CChar::WriteInSight(a2, 63, "bddbbwwb", this[1], v3, v4, 1, 20);
        CPlayer::Write((int)a3, 69, "bw", 7, a3->m_nCurHP);
        CPlayer::UpdatePartyMember(a3, 7);
      }
    }
  }
}

//----- (0048C4D0) --------------------------------------------------------
int __stdcall CMSpark::ExcuteM(_DWORD *a1)
{
  int v1; // esi
  int v2; // esi
  int v4; // [esp+4h] [ebp-14h]
  int v5; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v1 = 5 * a1[15] / 3;
  nMin = (v1 + 6 * *(_DWORD *)(a1[110] + 320) * CChar::GetInt(a1) / 4) / 2 + 50;
  v2 = 5 * a1[15] / 3;
  nMax = (v2 + 11 * *(_DWORD *)(a1[110] + 320) * CChar::GetInt(a1) / 3) / 2 + 150;
  if ( nMin >= 60 * *(_DWORD *)(a1[110] + 320) + 200 )
    v5 = 60 * *(_DWORD *)(a1[110] + 320) + 200;
  else
    v5 = nMin;
  if ( nMax >= 200 * *(_DWORD *)(a1[110] + 320) + 200 )
    v4 = 200 * *(_DWORD *)(a1[110] + 320) + 200;
  else
    v4 = nMax;
  return Random(v5, v4);
}

//----- (0048C610) --------------------------------------------------------
void __thiscall CVanishConfi::CVanishConfi(CVanishConfi *this, int a2, CPlayer *a3)
{
  int v3; // [esp-10h] [ebp-30h]
  int v4; // [esp-Ch] [ebp-2Ch]
  int v6; // [esp+4h] [ebp-1Ch] BYREF
  int v7; // [esp+8h] [ebp-18h] BYREF
  int v8; // [esp+Ch] [ebp-14h] BYREF
  int v10; // [esp+14h] [ebp-Ch]
  int v11; // [esp+18h] [ebp-8h]
  DWORD v12; // [esp+1Ch] [ebp-4h]

  if ( a3 )
  {
    CChar::SetDirection((_DWORD *)a2, a3->m_ptPixel.x - *(_DWORD *)(a2 + 332), a3->m_ptPixel.y - *(_DWORD *)(a2 + 336));
    v12 = GetTickCount();
    this->m_dwTick = this->m_dwDelay + v12 - this->m_dwDelayPre;
    (*(void (__thiscall **)(int, unsigned int, int))(*(_DWORD *)a2 + 228))(a2, this->m_dwActionDelay + v12, 1);
    *(_DWORD *)(a2 + 468) = this->m_dwActionDelay + v12;
    if ( CChar::IsNormal((int)a3) )
    {
      if ( *(_DWORD *)(a2 + 316) == a3->m_nMap && Distance((_DWORD *)(a2 + 332), &a3->m_ptPixel.x) < 170 )
      {
        v8 = 0;
        v7 = 0;
        v11 = CMagic::GetResist(this, a2, *(_DWORD **)(a2 + 464));
        v6 = 0;
        v10 = ((int (__thiscall *)(CVanishConfi *, int))this->IsDeBuff)(this, a2);
        if ( !a3->Damage(a3, (CChar *)a2, v11 * v10 / 100, &v8, &v6, &v7, this) )
          a3->Defense(a3, (CChar *)a2);
        v4 = CBase::Id(a3);
        v3 = CBase::Id((_DWORD *)a2);
        CChar::WriteInSight(a2, 63, "bddbbwwb", this->m_nSkill, v3, v4, 1, 2);
        CPlayer::Write((int)a3, 69, "bw", 7, a3->m_nCurHP);
        CPlayer::UpdatePartyMember(a3, 7);
      }
    }
  }
}

//----- (0048C7D0) --------------------------------------------------------
CChantHealing *__thiscall CChantHealing::CChantHealing(CChantHealing *this, _DWORD *a2)
{
  int v2; // esi
  int v4; // [esp+4h] [ebp-Ch]
  int v5; // [esp+Ch] [ebp-4h]

  v2 = 5 * a2[15] / 3;
  v5 = (v2 + 6 * *(_DWORD *)(a2[110] + 320) * CChar::GetInt(a2) / 5) / 2;
  if ( v5 >= 70 * *(_DWORD *)(a2[110] + 320) + 150 )
    v4 = 70 * *(_DWORD *)(a2[110] + 320) + 150;
  else
    v4 = v5;
  return (CChantHealing *)(v4 + 8 * *(_DWORD *)(a2[110] + 320));
}

//----- (0048C880) --------------------------------------------------------
int __thiscall sub_48C880(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int v5; // [esp-Ch] [ebp-14h]
  int v6; // [esp-4h] [ebp-Ch]
  DWORD v8; // [esp+4h] [ebp-4h]

  v8 = GetTickCount();
  this[16] = this[11] + v8 - this[10];
  (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a2 + 228))(a2, this[12] + v8, 1);
  a2[117] = this[12] + v8;
  v6 = this[2];
  v5 = CBase::Id(a2);
  v3 = CBase::Id(a2);
  CChar::WriteInSight((int)a2, 63, "bddbb", this[1], v3, v5, 0, v6);
  return (*(int (__thiscall **)(_DWORD *, _DWORD, int, _DWORD, _DWORD))(*a2 + 232))(
           a2,
           this[14],
           (int)this[15] >> 16,
           (unsigned __int8)BYTE1(this[15]),
           (unsigned __int8)this[15]);
}

//----- (0048C950) --------------------------------------------------------
void __thiscall CTGroundSplinter::CTGroundSplinter(CTGroundSplinter *this, CIOCriticalSection *a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-20h]
  int v5; // [esp-4h] [ebp-18h]
  int v7; // [esp+4h] [ebp-10h] BYREF
  int v8; // [esp+8h] [ebp-Ch] BYREF
  int v9; // [esp+Ch] [ebp-8h] BYREF
  DWORD v10; // [esp+10h] [ebp-4h]

  if ( a3 )
  {
    v7 = 0;
    v8 = 0;
    v9 = 0;
    CChar::SetDirection(
      a2,
      a3[83] - (unsigned int)a2[10].m_critical_section.OwningThread,
      a3[84] - (unsigned int)a2[10].m_critical_section.LockSemaphore);
    v10 = GetTickCount();
    this->m_dwTick = this->m_dwDelay + v10 - this->m_dwDelayPre;
    ((void (__thiscall *)(CIOCriticalSection *, unsigned int, int))a2->m_critical_section.DebugInfo[7].CriticalSection)(
      a2,
      this->m_dwActionDelay + v10,
      1);
    a2[14].m_critical_section.SpinCount = this->m_dwActionDelay + v10;
    CChar::Unlock(a2);
    (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, int, int *, int *, int *, CTGroundSplinter *))(*a3 + 72))(
      a3,
      a2,
      2 * a3[68],
      &v9,
      &v7,
      &v8,
      this);
    CChar::Lock(a2);
    v5 = this->m_nLevel;
    v4 = CBase::Id(a3);
    v3 = CBase::Id(a2);
    CChar::WriteInSight((int)a2, 63, "bddbb", this->m_nSkill, v3, v4, 0, v5);
  }
}

//----- (0048CA70) --------------------------------------------------------
CMShock *__thiscall CMShock::CMShock(CMShock *this, _DWORD *a2)
{
  int v2; // eax
  int v4; // [esp-4h] [ebp-8h]

  v4 = CChar::GetMaxAttack(a2);
  v2 = CChar::GetMaxAttack(a2);
  return (CMShock *)Random(v2, v4);
}

//----- (0048CAA0) --------------------------------------------------------
int __thiscall CDoAscension::GetAddValueType(CDoAscension *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(7, 10);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v3);
}

//----- (0048CAD0) --------------------------------------------------------
void __thiscall sub_48CAD0(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  if ( a3 )
  {
    v3 = CBuff::CreateBuff(105, 20000, 800);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v3);
  }
}

//----- (0048CB10) --------------------------------------------------------
void __thiscall sub_48CB10(_DWORD *this, CIOCriticalSection *a2, CPlayer *a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-34h]
  int v8; // [esp-Ch] [ebp-34h]
  int v9; // [esp-8h] [ebp-30h]
  int v10; // [esp-4h] [ebp-2Ch]
  int v12; // [esp+4h] [ebp-24h] BYREF
  int v13; // [esp+8h] [ebp-20h] BYREF
  int v14; // [esp+Ch] [ebp-1Ch] BYREF
  int v16; // [esp+14h] [ebp-14h]
  int v17; // [esp+18h] [ebp-10h]
  CChar *v18; // [esp+1Ch] [ebp-Ch]
  CIOObject *v19; // [esp+20h] [ebp-8h]
  DWORD v20; // [esp+24h] [ebp-4h]

  if ( a3 )
  {
    CChar::SetDirection(
      (CChar *)a2,
      a3->m_ptPixel.x - (unsigned int)a2[10].m_critical_section.OwningThread,
      a3->m_ptPixel.y - (unsigned int)a2[10].m_critical_section.LockSemaphore);
    v18 = 0;
    v3 = (*(int (__thiscall **)(_DWORD *))(*this + 92))(this);
    v19 = (CIOObject *)CSMap::GetPlayerListInRect((CSMap *)a2[10].m_critical_section.DebugInfo, &a3->m_ptTile, v3);
    v20 = GetTickCount();
    this[16] = this[11] + v20 - this[10];
    ((void (__thiscall *)(CIOCriticalSection *, DWORD, int))a2->m_critical_section.DebugInfo[7].CriticalSection)(
      a2,
      this[12] + v20,
      1);
    a2[14].m_critical_section.SpinCount = this[12] + v20;
    CChar::Unlock((CChar *)a2);
    while ( v19 )
    {
      v18 = (CChar *)unknown_libname_7(v19);
      if ( CChar::IsNormal(v18) && a2[9].m_dwEIP[1] == v18->m_nMap )
      {
        v14 = 0;
        v13 = 0;
        v17 = CMagic::GetResist(this, (int)a2, v18);
        v12 = 0;
        v16 = (*(int (__thiscall **)(_DWORD *, CIOCriticalSection *))(*this + 88))(this, a2);
        if ( (*(int (__thiscall **)(_DWORD *))(*this + 100))(this) )
        {
          if ( !v18->Damage(v18, (CChar *)a2, v17 * v16 / 100, &v14, &v12, &v13, (CSkill *)this) )
            v18->Defense(v18, (CChar *)a2);
          if ( v14 > 0 )
          {
            v10 = v13;
            v9 = v14;
            v7 = CBase::Id(v18);
            v4 = CBase::Id((CBase *)a2);
            v5 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*this + 96))(
                   this,
                   this[1],
                   v4,
                   v7,
                   v9,
                   v10);
            CChar::WriteInSight((CChar *)a2, S2C_SKILLADDVALUE, "bbddww", v5);
            (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, CChar *))(*this + 104))(this, a2, v18);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, CChar *))(*this + 104))(this, a2, v18);
          v18->Defense(v18, (CChar *)a2);
        }
      }
      v19 = (CIOObject *)CBaseList::Pop((CBaseList *)v19);
    }
    CChar::Lock((CChar *)a2);
    v8 = CBase::Id(a3);
    v6 = CBase::Id((CBase *)a2);
    CChar::WriteInSight((CChar *)a2, S2C_SKILL, "bddbbwwb", this[1], v6, v8, 1, 10);
    CPlayer::Write(a3, S2C_UPDATEPROPERTY, "bw", 7, a3->m_nCurHP);
    CPlayer::UpdatePartyMember(a3, 7);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048CDA0) --------------------------------------------------------
int __stdcall sub_48CDA0(int a1)
{
  return Random(2500, 3500);
}

//----- (0048CDC0) --------------------------------------------------------
int __stdcall sub_48CDC0(int a1)
{
  return Random(2000, 2500);
}

//----- (0048CDE0) --------------------------------------------------------
CIOCriticalSection *__stdcall CPurgatorialFlame::AddMagicMonster_0(int a1, int a2, int a3)
{
  return CMonsterMagic::Create(230, *(_DWORD *)(a1 + 316), &a2, 1, a1, 800, 60000);
}

//----- (0048CE20) --------------------------------------------------------
int __stdcall sub_48CE20(int a1)
{
  return Random(4000, 5000);
}

//----- (0048CE40) --------------------------------------------------------
void __stdcall CDemonBeastSummon::ExcuteM(int a1, int pChar)
{
  if ( pChar )
  {
    CMonsterMaguniMaster::Create(a1, pChar);
    CMonsterMaguniMaster::Create(a1, pChar);
  }
  else
  {
    CMonsterMaguniMaster::Create(a1, a1);
    CMonsterMaguniMaster::Create(a1, a1);
    LOG_ERR("CDemonBeastSummon::ExcuteM pChar is Null");
  }
}

//----- (0048CEB0) --------------------------------------------------------
int __stdcall sub_48CEB0(_DWORD *a1)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-8h]

  v3 = CChar::GetMaxAttack(a1);
  v1 = CChar::GetMinAttack(a1);
  return Random(v1, v3);
}

//----- (0048CEE0) --------------------------------------------------------
int __stdcall sub_48CEE0(int a1)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-8h]

  v3 = CChar::GetMaxAttack(*(_DWORD **)(a1 + 484));
  v1 = CChar::GetMinAttack(*(_DWORD **)(a1 + 484));
  return Random(v1, v3);
}

//----- (0048CF20) --------------------------------------------------------
void __thiscall CMSiegeGunBallExplosion::CMSiegeGunBallExplosion(CMSiegeGunBallExplosion *this, CIOCriticalSection *a2, int nY)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-18h] [ebp-40h]
  int v6; // [esp-Ch] [ebp-34h]
  int v7; // [esp-8h] [ebp-30h]
  int v8; // [esp-8h] [ebp-30h]
  int v9; // [esp-4h] [ebp-2Ch]
  int v11; // [esp+4h] [ebp-24h] BYREF
  int v12; // [esp+8h] [ebp-20h] BYREF
  int v13; // [esp+Ch] [ebp-1Ch] BYREF
  int v15; // [esp+14h] [ebp-14h]
  int v16; // [esp+18h] [ebp-10h]
  int v17; // [esp+1Ch] [ebp-Ch]
  CIOObject *v18; // [esp+20h] [ebp-8h]
  DWORD v19; // [esp+24h] [ebp-4h]

  v17 = 0;
  v3 = this->GetRadiusTile(this);
  v18 = (CIOObject *)CSMap::GetPlayerMonsterListInRect(
                       a2[10].m_critical_section.DebugInfo,
                       (int)&a2[10].m_critical_section.LockCount,
                       v3);
  v19 = GetTickCount();
  this->m_dwTick = this->m_dwDelay + v19 - this->m_dwDelayPre;
  ((void (__thiscall *)(CIOCriticalSection *, unsigned int, int))a2->m_critical_section.DebugInfo[7].CriticalSection)(
    a2,
    this->m_dwActionDelay + v19,
    1);
  a2[14].m_critical_section.SpinCount = this->m_dwActionDelay + v19;
  CChar::Unlock(a2);
  while ( v18 )
  {
    v17 = unknown_libname_7(v18);
    if ( CChar::IsNormal(v17) && a2[9].m_dwEIP[1] == *(_DWORD *)(v17 + 316) )
    {
      v13 = 0;
      v12 = 0;
      v16 = CMagic::GetResist(this, (int)a2, (_DWORD *)v17);
      v11 = 0;
      v15 = this->GetMagicM(this, (CMonster *)a2);
      if ( !(*(int (__thiscall **)(int, CIOCriticalSection *, int, int *, int *, int *, CMSiegeGunBallExplosion *))(*(_DWORD *)v17 + 72))(
              v17,
              a2,
              v16 * v15 / 100,
              &v13,
              &v11,
              &v12,
              this) )
        (*(void (__thiscall **)(int, CIOCriticalSection *))(*(_DWORD *)v17 + 80))(v17, a2);
      if ( v13 > 0 )
      {
        v9 = v12;
        v7 = v13;
        v6 = CBase::Id((_DWORD *)v17);
        v4 = CBase::Id(a2);
        v5 = ((int (__thiscall *)(CMSiegeGunBallExplosion *, int, int, int, int, int))this->GetAddValueType)(
               this,
               this->m_nSkill,
               v4,
               v6,
               v7,
               v9);
        CChar::WriteInSight((int)a2, 10, "bbddww", v5);
        this->ApplyM(this, (CMonster *)a2, (CChar *)v17);
      }
    }
    v18 = (CIOObject *)CBaseList::Pop(v18);
  }
  CChar::Lock(a2);
  v8 = CBase::Id(a2);
  CChar::WriteInSight((int)a2, 61, "db", v8, 9);
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048D100) --------------------------------------------------------
BOOL __stdcall sub_48D100(_QWORD *a1, int a2)
{
  return CChar::IsBState(a1, 0x40000000000i64) == 0;
}

//----- (0048D140) --------------------------------------------------------
int __thiscall CReturn::Excute(int *this, _DWORD *a2, int a3, int a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(int *, _DWORD *, _DWORD))*this)(this, a2, 0);
  if ( result )
  {
    CPlayer::ReturnToPoint(a2, this[14]);
    v5 = CBuff::CreateBuff(115, this[11] / 0x3E8u);
    result = (*(int (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a2 + 180))(a2, v5);
  }
  return result;
}

//----- (0048D1A0) --------------------------------------------------------
BOOL __thiscall CPurgatorialFlame::AddMagicMonster(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3)
{
  return (**this)(this, a2, 0) != 0;
}

//----- (0048D1D0) --------------------------------------------------------
void __thiscall sub_48D1D0(_DWORD *this, int a2, CPlayer *a3)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-2Ch]
  int v6; // [esp+4h] [ebp-1Ch] BYREF
  int v7; // [esp+8h] [ebp-18h] BYREF
  int v8; // [esp+Ch] [ebp-14h] BYREF
  int v10; // [esp+14h] [ebp-Ch]
  int v11; // [esp+18h] [ebp-8h]
  DWORD v12; // [esp+1Ch] [ebp-4h]

  if ( a3 )
  {
    CChar::SetDirection((_DWORD *)a2, a3->m_ptPixel.x - *(_DWORD *)(a2 + 332), a3->m_ptPixel.y - *(_DWORD *)(a2 + 336));
    v12 = GetTickCount();
    this[16] = this[11] + v12 - this[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a2 + 228))(a2, this[12] + v12, 1);
    *(_DWORD *)(a2 + 468) = this[12] + v12;
    if ( CChar::IsNormal((int)a3) )
    {
      if ( *(_DWORD *)(a2 + 316) == a3->m_nMap && Distance((_DWORD *)(a2 + 332), &a3->m_ptPixel.x) < 170 )
      {
        v8 = 0;
        v7 = 0;
        v11 = CMagic::GetResist(this, a2, *(_DWORD **)(a2 + 464));
        v6 = 0;
        v10 = (*(int (__thiscall **)(_DWORD *, int))(*this + 88))(this, a2);
        if ( !a3->Damage(a3, (CChar *)a2, v11 * v10 / 100, &v8, &v6, &v7, (CSkill *)this) )
          a3->Defense(a3, (CChar *)a2);
        v4 = CBase::Id(a3);
        v3 = CBase::Id((_DWORD *)a2);
        CChar::WriteInSight(a2, 63, "bddbbwwb", this[1], v3, v4, 1, 10);
        CPlayer::Write((int)a3, 69, "bw", 7, a3->m_nCurHP);
        CPlayer::UpdatePartyMember(a3, 7);
      }
    }
  }
}

//----- (0048D390) --------------------------------------------------------
CIOCriticalSection *__stdcall CMFujiExplosion::AddMagicMonsterM(_DWORD *a1, int a2, int a3)
{
  int v3; // eax
  int v5; // [esp-4h] [ebp-Ch]
  int a6; // [esp+4h] [ebp-4h]

  v5 = CChar::GetMaxMagic(a1);
  v3 = CChar::GetMinMagic(a1);
  a6 = Random(v3, v5);
  return CMonsterMagic::Create(82, a1[79], &a2, 1, (int)a1, a6, 5000);
}

//----- (0048D3F0) --------------------------------------------------------
int __stdcall CMMagicFuJiExplosion::GetMagicM(int a1)
{
  int v2; // eax
  int v3; // [esp-4h] [ebp-8h]

  if ( !*(_DWORD *)(a1 + 484) )
    return 0;
  v3 = CChar::GetMaxMagic(*(_DWORD **)(a1 + 484));
  v2 = CChar::GetMinMagic(*(_DWORD **)(a1 + 484));
  return Random(v2, v3);
}

//----- (0048D440) --------------------------------------------------------
void __thiscall CMMagicFuJiExplosion::ExcuteM(_DWORD *this, CIOCriticalSection *a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-30h]
  int v7; // [esp-8h] [ebp-2Ch]
  int v8; // [esp-4h] [ebp-28h]
  int v10; // [esp+4h] [ebp-20h] BYREF
  int v11; // [esp+8h] [ebp-1Ch] BYREF
  int v12; // [esp+Ch] [ebp-18h] BYREF
  int v14; // [esp+14h] [ebp-10h]
  int v15; // [esp+18h] [ebp-Ch]
  CChar *v16; // [esp+1Ch] [ebp-8h]
  CIOObject *v17; // [esp+20h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, CIOCriticalSection *, _DWORD))(*this + 76))(this, a2, 0) )
  {
    v16 = 0;
    v3 = (*(int (__thiscall **)(_DWORD *))(*this + 92))(this);
    v17 = (CIOObject *)CSMap::GetPlayerListInRect(
                         (CSMap *)a2[10].m_critical_section.DebugInfo,
                         (const tagPOINT *)&a2[10].m_critical_section.LockCount,
                         v3);
    ++a2[16].m_critical_section.SpinCount;
    CChar::Unlock((CChar *)a2);
    while ( v17 )
    {
      v16 = (CChar *)unknown_libname_7(v17);
      if ( CChar::IsNormal(v16)
        && a2[9].m_dwEIP[1] == v16->m_nMap
        && (*(int (__thiscall **)(int, CChar *, int))(*(_DWORD *)a2[15].m_critical_section.LockCount + 176))(
             a2[15].m_critical_section.LockCount,
             v16,
             1) )
      {
        v12 = 0;
        v11 = 0;
        v15 = CMagic::GetResist(this, a2[15].m_critical_section.LockCount, v16);
        v10 = 0;
        v14 = (*(int (__thiscall **)(_DWORD *, CIOCriticalSection *))(*this + 88))(this, a2);
        if ( (int)a2[16].m_critical_section.SpinCount > 2 )
          v14 *= a2[16].m_critical_section.SpinCount - 1;
        if ( (*(int (__thiscall **)(_DWORD *))(*this + 100))(this) )
        {
          if ( !v16->Damage(
                  v16,
                  (CChar *)a2[15].m_critical_section.LockCount,
                  v15 * v14 / 100,
                  &v12,
                  &v10,
                  &v11,
                  (CSkill *)this) )
            v16->Defense(v16, (CChar *)a2[15].m_critical_section.LockCount);
          if ( v12 > 0 )
          {
            v8 = v11;
            v7 = v12;
            v6 = CBase::Id(v16);
            v4 = CBase::Id((CBase *)a2);
            v5 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*this + 96))(
                   this,
                   this[1],
                   v4,
                   v6,
                   v7,
                   v8);
            CChar::WriteInSight((CChar *)a2, S2C_SKILLADDVALUE, "bbddww", v5);
            (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, CChar *))(*this + 104))(this, a2, v16);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, CIOCriticalSection *, CChar *))(*this + 104))(this, a2, v16);
          v16->Defense(v16, (CChar *)a2[15].m_critical_section.LockCount);
        }
      }
      v17 = (CIOObject *)CBaseList::Pop((CBaseList *)v17);
    }
    CChar::Lock((CChar *)a2);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);

//----- (0048D680) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_48D680(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(this, (int)&v4, (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (0048D6B0) --------------------------------------------------------
int __thiscall sub_48D6B0(void *this)
{
  return sub_48D930((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (0048D6D0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *__thiscall sub_48D6D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator,bool> *a2, const std::pair<int const ,CGame_Character::TargetInfo> *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_478AB0(this);
  v22 = (std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *)this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)sub_474590((int)a3);
    v23 = sub_48D9E0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_474590((int)v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270((int)this, (int)v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(v20);
  }
  v11 = (_DWORD *)sub_474590((int)a3);
  v7 = unknown_libname_7(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_48D9E0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)sub_420270((int)this, (int)v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<int,D3DXMATRIX,std::less<int>,std::allocator<std::pair<int const,D3DXMATRIX>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<unsigned long,tagSibmanRankInfo,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,tagSibmanRankInfo> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_7(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0048D880) --------------------------------------------------------
_DWORD *CMemoryPool_CSkill::_Alloc()
{
  _DWORD *result; // eax
  CSkill *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+4h] [ebp-8h]
  CFindPath::NODE *v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter(&stru_4DA75C.m_lock);
  v3 = stru_4DA75C.m_pT;
  if ( stru_4DA75C.m_pT )
  {
    stru_4DA75C.m_pT = (CFindPath::NODE *)stru_4DA75C.m_pT->f;
    CIOSpinLock::Leave(&stru_4DA75C.m_lock);
    result = &v3->pParent;
  }
  else
  {
    CIOSpinLock::Leave(&stru_4DA75C.m_lock);
    v2 = operator new(0x4Cu);
    if ( v2 )
      v1 = CSkill::CSkill((CSkill *)v2);
    else
      v1 = 0;
    result = &v1->__vftable;
  }
  return result;
}

//----- (0048D900) --------------------------------------------------------
LONG __cdecl sub_48D900(int a1)
{
  CIOSpinLock::Enter(&stru_4DA75C.m_lock);
  *(_DWORD *)(a1 + 4) = stru_4DA75C.m_pT;
  stru_4DA75C.m_pT = (CFindPath::NODE *)a1;
  return CIOSpinLock::Leave(&stru_4DA75C.m_lock);
}

//----- (0048D930) --------------------------------------------------------
int __thiscall sub_48D930(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  std::vector<CIOSocket::CIOTimer>::const_iterator v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6._Myptr = *(CIOSocket::CIOTimer **)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_48DA20(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (0048D9E0) --------------------------------------------------------
BOOL __stdcall sub_48D9E0(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (0048DA00) --------------------------------------------------------
_DWORD *__thiscall sub_48DA00(_DWORD *this)
{
  *this += 8;
  return this;
}

//----- (0048DA20) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_48DA20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, std::vector<CIOSocket::CIOTimer>::const_iterator a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_48DAC0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              &a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0048DAC0) --------------------------------------------------------
_DWORD *__thiscall sub_48DAC0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_48DC30(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (0048DB20) --------------------------------------------------------
int __thiscall sub_48DB20(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_431110(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_431110(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_431110(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_42F920(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0048DBE0) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *__thiscall std::_Tree_nod<std::_Tmap_traits<char const *,int,iless,std::allocator<std::pair<char const * const,int>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *_Rarg, const std::pair<int const ,CGame_Character::TargetInfo> *_Val, char _Carg)
{
  int v6; // edx
  std::_Tree_nod<std::_Tmap_traits<int,CGame_Character::TargetInfo,std::less<int>,std::allocator<std::pair<int const ,CGame_Character::TargetInfo> >,0> >::_Node *result; // eax

  *(_DWORD *)this = _Larg;
  *((_DWORD *)this + 1) = _Parg;
  *((_DWORD *)this + 2) = _Rarg;
  v6 = *((_DWORD *)_Val + 1);
  result = this;
  *((_DWORD *)this + 3) = *(_DWORD *)_Val;
  *((_DWORD *)this + 4) = v6;
  *((_BYTE *)this + 20) = _Carg;
  *((_BYTE *)this + 21) = 0;
  return result;
}

//----- (0048DC30) --------------------------------------------------------
int __stdcall sub_48DC30(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_48DC30(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (0048DCB0) --------------------------------------------------------
_DWORD *__thiscall sub_48DCB0(_DWORD *this)
{
  CSkill::CSkill((CSkill *)this);
  *this = &off_4BC3F0;
  return this;
}
// 4BC3F0: using guessed type int (__stdcall *off_4BC3F0)(int, int);

//----- (0048DCD0) --------------------------------------------------------
_DWORD *__thiscall sub_48DCD0(_DWORD *this)
{
  CSkill::CSkill((CSkill *)this);
  *this = &off_4BC440;
  return this;
}
// 4BC440: using guessed type int (__stdcall *off_4BC440)(int, int);

//----- (0048DCF0) --------------------------------------------------------
_DWORD *__thiscall sub_48DCF0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BC490;
  return this;
}
// 4BC490: using guessed type int (__stdcall *off_4BC490)(int, int);

//----- (0048DD10) --------------------------------------------------------
_DWORD *__thiscall sub_48DD10(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BC4E0;
  return this;
}
// 4BC4E0: using guessed type int (__stdcall *off_4BC4E0)(int, int);

//----- (0048DD30) --------------------------------------------------------
_DWORD *__thiscall sub_48DD30(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BC530;
  return this;
}
// 4BC530: using guessed type int (__stdcall *off_4BC530)(int, int);

//----- (0048DD50) --------------------------------------------------------
_DWORD *__thiscall sub_48DD50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BC580;
  return this;
}
// 4BC580: using guessed type int (__stdcall *off_4BC580)(int, int);

//----- (0048DD70) --------------------------------------------------------
_DWORD *__thiscall sub_48DD70(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC5D0;
  return this;
}
// 4BC5D0: using guessed type int (__stdcall *off_4BC5D0)(int, int);

//----- (0048DD90) --------------------------------------------------------
_DWORD *__thiscall sub_48DD90(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BC630;
  return this;
}
// 4BC630: using guessed type int (__stdcall *off_4BC630)(int, int);

//----- (0048DDB0) --------------------------------------------------------
int __thiscall sub_48DDB0(_DWORD *this, int a2)
{
  return this[9] + 9 * this[2];
}

//----- (0048DDD0) --------------------------------------------------------
_DWORD *__thiscall sub_48DDD0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC690;
  return this;
}
// 4BC690: using guessed type int (__stdcall *off_4BC690)(int, int);

//----- (0048DDF0) --------------------------------------------------------
int __thiscall sub_48DDF0(_DWORD *this, int a2, int a3)
{
  return a3 + 8 * this[2];
}

//----- (0048DE10) --------------------------------------------------------
int __thiscall sub_48DE10(_DWORD *this)
{
  return this[2] / 2;
}

//----- (0048DE30) --------------------------------------------------------
_DWORD *__thiscall sub_48DE30(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC6F0;
  return this;
}
// 4BC6F0: using guessed type int (__stdcall *off_4BC6F0)(int, int);

//----- (0048DE50) --------------------------------------------------------
int sub_48DE50()
{
  return 100;
}

//----- (0048DE60) --------------------------------------------------------
int __thiscall sub_48DE60(_DWORD *this, int a2)
{
  return this[9] + 3 * this[2];
}

//----- (0048DE80) --------------------------------------------------------
int __thiscall sub_48DE80(_DWORD *this, int a2)
{
  return this[11] - 100 * this[2];
}

//----- (0048DEA0) --------------------------------------------------------
int __thiscall sub_48DEA0(_DWORD *this)
{
  return 2 * this[2];
}

//----- (0048DEC0) --------------------------------------------------------
_DWORD *__thiscall sub_48DEC0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BC750;
  return this;
}
// 4BC750: using guessed type int (__stdcall *off_4BC750)(int, int);

//----- (0048DEE0) --------------------------------------------------------
int __thiscall sub_48DEE0(_DWORD *this)
{
  return 150 * this[2] + 50;
}

//----- (0048DF00) --------------------------------------------------------
int __thiscall sub_48DF00(_DWORD *this, int a2)
{
  return this[9] + this[2];
}

//----- (0048DF20) --------------------------------------------------------
_DWORD *__thiscall sub_48DF20(_DWORD *this)
{
  sub_48DEC0(this);
  *this = &off_4BC7A0;
  return this;
}
// 4BC7A0: using guessed type int (__stdcall *off_4BC7A0)(int, int);

//----- (0048DF40) --------------------------------------------------------
int __thiscall sub_48DF40(_DWORD *this)
{
  return 200 * this[2] + 800;
}

//----- (0048DF60) --------------------------------------------------------
int __thiscall sub_48DF60(_DWORD *this, int a2)
{
  return this[9] + 4 * this[2];
}

//----- (0048DF80) --------------------------------------------------------
_DWORD *__thiscall sub_48DF80(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC7F0;
  return this;
}
// 4BC7F0: using guessed type int (__stdcall *off_4BC7F0)(int, int);

//----- (0048DFA0) --------------------------------------------------------
int __stdcall sub_48DFA0(int a1, int a2)
{
  return a2;
}

//----- (0048DFB0) --------------------------------------------------------
int __thiscall sub_48DFB0(_DWORD *this)
{
  return -6 * this[2];
}

//----- (0048DFD0) --------------------------------------------------------
int __thiscall sub_48DFD0(_DWORD *this, int a2)
{
  return 2 * this[2];
}

//----- (0048DFF0) --------------------------------------------------------
_DWORD *__thiscall sub_48DFF0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC850;
  return this;
}
// 4BC850: using guessed type int (__stdcall *off_4BC850)(int, int);

//----- (0048E010) --------------------------------------------------------
int __thiscall sub_48E010(_DWORD *this, int a2, int a3)
{
  return a3 + 12 * this[2];
}

//----- (0048E030) --------------------------------------------------------
_DWORD *__thiscall sub_48E030(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC8B0;
  return this;
}
// 4BC8B0: using guessed type int (__stdcall *off_4BC8B0)(int, int);

//----- (0048E050) --------------------------------------------------------
int __thiscall CTranscendental::GetAttack_0(CTranscendental *this, int a2, int a3)
{
  return a3 + 50 * this->m_nLevel + 150;
}

//----- (0048E070) --------------------------------------------------------
int sub_48E070()
{
  return 200;
}

//----- (0048E080) --------------------------------------------------------
_DWORD *__thiscall sub_48E080(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC910;
  return this;
}
// 4BC910: using guessed type int (__stdcall *off_4BC910)(int, int);

//----- (0048E0A0) --------------------------------------------------------
int __thiscall RandomSomething(CCellMap *this, unsigned int a2, int a3)
{
  int v3; // esi

  v3 = a3 + 20 * (int)this->m_pTile + 60;
  return v3 + Random(0, (int)this->m_pTile);
}

//----- (0048E0E0) --------------------------------------------------------
int sub_48E0E0()
{
  return 50;
}

//----- (0048E0F0) --------------------------------------------------------
int __thiscall sub_48E0F0(_DWORD *this)
{
  return this[2] + this[2] / 2;
}

//----- (0048E110) --------------------------------------------------------
_DWORD *__thiscall sub_48E110(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC970;
  return this;
}
// 4BC970: using guessed type int (__stdcall *off_4BC970)(int, int);

//----- (0048E130) --------------------------------------------------------
int __thiscall sub_48E130(_DWORD *this, int a2, int a3)
{
  return a3 + 10 * this[2] + 50;
}

//----- (0048E150) --------------------------------------------------------
int __thiscall sub_48E150(_DWORD *this)
{
  return this[2] + 9;
}

//----- (0048E170) --------------------------------------------------------
_DWORD *__thiscall sub_48E170(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC9D0;
  return this;
}
// 4BC9D0: using guessed type int (__stdcall *off_4BC9D0)(int, int);

//----- (0048E190) --------------------------------------------------------
int __thiscall CFatalWound::GetAttack(CFatalWound *this, int a2, int a3)
{
  int v3; // esi

  v3 = a3 + 24 * this->m_nLevel + 80;
  return v3 + Random(0, this->m_nLevel);
}

//----- (0048E1D0) --------------------------------------------------------
_DWORD *__thiscall sub_48E1D0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCA30;
  return this;
}
// 4BCA30: using guessed type int (__stdcall *off_4BCA30)(int, int);

//----- (0048E1F0) --------------------------------------------------------
_DWORD *__thiscall sub_48E1F0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCA90;
  return this;
}
// 4BCA90: using guessed type int (__stdcall *off_4BCA90)(int, int);

//----- (0048E210) --------------------------------------------------------
_DWORD *__thiscall sub_48E210(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCAF0;
  return this;
}
// 4BCAF0: using guessed type int (__stdcall *off_4BCAF0)(int, int);

//----- (0048E230) --------------------------------------------------------
_DWORD *__thiscall sub_48E230(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCB50;
  return this;
}
// 4BCB50: using guessed type int (__stdcall *off_4BCB50)(int, int);

//----- (0048E250) --------------------------------------------------------
_DWORD *__thiscall sub_48E250(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCBB0;
  return this;
}
// 4BCBB0: using guessed type int (__stdcall *off_4BCBB0)(int, int);

//----- (0048E270) --------------------------------------------------------
int sub_48E270()
{
  return 75;
}

//----- (0048E280) --------------------------------------------------------
CMock *__thiscall CMock::CMock(CMock *this, int a2)
{
  return (CMock *)(this->m_nDecMP + 3 * this->m_nLevel / 2);
}

//----- (0048E2B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E2B0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCC10;
  return this;
}
// 4BCC10: using guessed type int (__stdcall *off_4BCC10)(int, int);

//----- (0048E2D0) --------------------------------------------------------
int __thiscall sub_48E2D0(_DWORD *this, int a2)
{
  return this[9] + 5 * this[2];
}

//----- (0048E2F0) --------------------------------------------------------
int __thiscall sub_48E2F0(_DWORD *this)
{
  return this[2] + 5;
}

//----- (0048E310) --------------------------------------------------------
int __thiscall sub_48E310(_DWORD *this, int a2, int a3)
{
  this[10] = GetTickCount();
  return 1;
}

//----- (0048E330) --------------------------------------------------------
_DWORD *__thiscall sub_48E330(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCC70;
  return this;
}
// 4BCC70: using guessed type int (__stdcall *off_4BCC70)(int, int);

//----- (0048E350) --------------------------------------------------------
_DWORD *__thiscall sub_48E350(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BCCD0;
  return this;
}
// 4BCCD0: using guessed type int (__stdcall *off_4BCCD0)(int, int);

//----- (0048E370) --------------------------------------------------------
_DWORD *__thiscall sub_48E370(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BCD30;
  return this;
}
// 4BCD30: using guessed type int (__stdcall *off_4BCD30)(int, int);

//----- (0048E390) --------------------------------------------------------
_DWORD *__thiscall sub_48E390(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BCD90;
  return this;
}
// 4BCD90: using guessed type int (__stdcall *off_4BCD90)(int, int);

//----- (0048E3B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E3B0(_DWORD *this)
{
  sub_48E390(this);
  *this = &off_4BCDF0;
  return this;
}
// 4BCDF0: using guessed type int (__stdcall *off_4BCDF0)(int, int);

//----- (0048E3D0) --------------------------------------------------------
_DWORD *__thiscall sub_48E3D0(_DWORD *this)
{
  sub_48E390(this);
  *this = &off_4BCE50;
  return this;
}
// 4BCE50: using guessed type int (__stdcall *off_4BCE50)(int, int);

//----- (0048E3F0) --------------------------------------------------------
_DWORD *__thiscall sub_48E3F0(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BCEB0;
  return this;
}
// 4BCEB0: using guessed type int (__stdcall *off_4BCEB0)(int, int);

//----- (0048E410) --------------------------------------------------------
int __thiscall CTranscendental::GetAttack(CTranscendental *this, int a2)
{
  return this->m_nDecMP + this->m_nLevel / 4;
}

//----- (0048E440) --------------------------------------------------------
_DWORD *__thiscall sub_48E440(_DWORD *this)
{
  sub_48E3F0(this);
  *this = &off_4BCF10;
  return this;
}
// 4BCF10: using guessed type int (__stdcall *off_4BCF10)(int, int);

//----- (0048E460) --------------------------------------------------------
_DWORD *__thiscall sub_48E460(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BCF70;
  return this;
}
// 4BCF70: using guessed type int (__stdcall *off_4BCF70)(int, int);

//----- (0048E480) --------------------------------------------------------
int __thiscall sub_48E480(_DWORD *this, int a2)
{
  return this[9] + this[2] / 2;
}

//----- (0048E4A0) --------------------------------------------------------
_DWORD *__thiscall sub_48E4A0(_DWORD *this)
{
  sub_48E460(this);
  *this = &off_4BCFD0;
  return this;
}
// 4BCFD0: using guessed type int (__stdcall *off_4BCFD0)(int, int);

//----- (0048E4C0) --------------------------------------------------------
_DWORD *__thiscall sub_48E4C0(_DWORD *this)
{
  sub_48E460(this);
  *this = &off_4BD030;
  return this;
}
// 4BD030: using guessed type int (__stdcall *off_4BD030)(int, int);

//----- (0048E4E0) --------------------------------------------------------
int __thiscall sub_48E4E0(_DWORD *this, int a2)
{
  return this[2] + this[9];
}

//----- (0048E500) --------------------------------------------------------
_DWORD *__thiscall sub_48E500(_DWORD *this)
{
  sub_48E460(this);
  *this = &off_4BD090;
  return this;
}
// 4BD090: using guessed type int (__stdcall *off_4BD090)(int, int);

//----- (0048E520) --------------------------------------------------------
_DWORD *__thiscall sub_48E520(_DWORD *this)
{
  sub_48E460(this);
  *this = &off_4BD0F0;
  return this;
}
// 4BD0F0: using guessed type int (__stdcall *off_4BD0F0)(int, int);

//----- (0048E540) --------------------------------------------------------
_DWORD *__thiscall sub_48E540(_DWORD *this)
{
  sub_48E560(this);
  *this = &off_4BD150;
  return this;
}
// 4BD150: using guessed type int (__stdcall *off_4BD150)(int, int);

//----- (0048E560) --------------------------------------------------------
_DWORD *__thiscall sub_48E560(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD1C0;
  return this;
}
// 4BD1C0: using guessed type int (__stdcall *off_4BD1C0)(int, int);

//----- (0048E580) --------------------------------------------------------
_DWORD *__thiscall sub_48E580(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BD230;
  return this;
}
// 4BD230: using guessed type int (__stdcall *off_4BD230)(int, int);

//----- (0048E5B0) --------------------------------------------------------
int sub_48E5B0()
{
  return 9;
}

//----- (0048E5C0) --------------------------------------------------------
_DWORD *__thiscall sub_48E5C0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD2A0;
  return this;
}
// 4BD2A0: using guessed type int (__stdcall *off_4BD2A0)(int, int);

//----- (0048E5E0) --------------------------------------------------------
_DWORD *__thiscall sub_48E5E0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD310;
  return this;
}
// 4BD310: using guessed type int (__stdcall *off_4BD310)(int, int);

//----- (0048E600) --------------------------------------------------------
_DWORD *__thiscall sub_48E600(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD380;
  return this;
}
// 4BD380: using guessed type int (__stdcall *off_4BD380)(int, int);

//----- (0048E620) --------------------------------------------------------
_DWORD *__thiscall sub_48E620(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD3F0;
  return this;
}
// 4BD3F0: using guessed type int (__stdcall *off_4BD3F0)(int, int);

//----- (0048E640) --------------------------------------------------------
int sub_48E640()
{
  return 7;
}

//----- (0048E650) --------------------------------------------------------
_DWORD *__thiscall sub_48E650(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD460;
  return this;
}
// 4BD460: using guessed type int (__stdcall *off_4BD460)(int, int);

//----- (0048E670) --------------------------------------------------------
int sub_48E670()
{
  return 8;
}

//----- (0048E680) --------------------------------------------------------
_DWORD *__thiscall sub_48E680(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BD4D0;
  return this;
}
// 4BD4D0: using guessed type int (__stdcall *off_4BD4D0)(int, int);

//----- (0048E6A0) --------------------------------------------------------
_DWORD *__thiscall sub_48E6A0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD540;
  return this;
}
// 4BD540: using guessed type int (__stdcall *off_4BD540)(int, int);

//----- (0048E6C0) --------------------------------------------------------
_DWORD *__thiscall sub_48E6C0(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4BD5B0;
  return this;
}
// 4BD5B0: using guessed type int (__stdcall *off_4BD5B0)(int, int);

//----- (0048E6E0) --------------------------------------------------------
_DWORD *__thiscall sub_48E6E0(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BD620;
  return this;
}
// 4BD620: using guessed type int (__stdcall *off_4BD620)(int, int);

//----- (0048E700) --------------------------------------------------------
int __stdcall sub_48E700(int a1, int a2, int a3)
{
  return 0;
}

//----- (0048E710) --------------------------------------------------------
_DWORD *__thiscall sub_48E710(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4BD690;
  return this;
}
// 4BD690: using guessed type int (__stdcall *off_4BD690)(int, int);

//----- (0048E730) --------------------------------------------------------
_DWORD *__thiscall sub_48E730(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4BD700;
  return this;
}
// 4BD700: using guessed type int (__stdcall *off_4BD700)(int, int);

//----- (0048E750) --------------------------------------------------------
_DWORD *__thiscall sub_48E750(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4BD770;
  return this;
}
// 4BD770: using guessed type int (__stdcall *off_4BD770)(int, int);

//----- (0048E770) --------------------------------------------------------
int __thiscall sub_48E770(_DWORD *this, int a2)
{
  return this[9] + 16 * this[2];
}

//----- (0048E790) --------------------------------------------------------
_DWORD *__thiscall sub_48E790(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BD7E0;
  return this;
}
// 4BD7E0: using guessed type int (__stdcall *off_4BD7E0)(int, int);

//----- (0048E7B0) --------------------------------------------------------
int __thiscall sub_48E7B0(_DWORD *this, int a2)
{
  return this[9] + 6 * this[2];
}

//----- (0048E7D0) --------------------------------------------------------
_DWORD *__thiscall sub_48E7D0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BD830;
  return this;
}
// 4BD830: using guessed type int (__stdcall *off_4BD830)(int, int);

//----- (0048E7F0) --------------------------------------------------------
int __thiscall sub_48E7F0(_DWORD *this, int a2)
{
  return this[9] + 2 * this[2];
}

//----- (0048E810) --------------------------------------------------------
_DWORD *__thiscall sub_48E810(_DWORD *this)
{
  sub_48E7D0(this);
  *this = &off_4BD888;
  return this;
}
// 4BD888: using guessed type int (__stdcall *off_4BD888)(int, int);

//----- (0048E830) --------------------------------------------------------
int __thiscall sub_48E830(_DWORD *this)
{
  return this[9] + 2 * this[2];
}

//----- (0048E850) --------------------------------------------------------
_DWORD *__thiscall sub_48E850(_DWORD *this)
{
  sub_48E7D0(this);
  *this = &off_4BD8E0;
  return this;
}
// 4BD8E0: using guessed type int (__stdcall *off_4BD8E0)(int, int);

//----- (0048E870) --------------------------------------------------------
int __thiscall sub_48E870(_DWORD *this)
{
  return this[9] + 4 * this[2];
}

//----- (0048E890) --------------------------------------------------------
_DWORD *__thiscall sub_48E890(_DWORD *this)
{
  sub_48E7D0(this);
  *this = &off_4BD938;
  return this;
}
// 4BD938: using guessed type int (__stdcall *off_4BD938)(int, int);

//----- (0048E8B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E8B0(_DWORD *this)
{
  sub_48E7D0(this);
  *this = &off_4BD990;
  return this;
}
// 4BD990: using guessed type int (__stdcall *off_4BD990)(int, int);

//----- (0048E8D0) --------------------------------------------------------
int __thiscall sub_48E8D0(_DWORD *this, int a2)
{
  return this[9] + 30 * this[2];
}

//----- (0048E8F0) --------------------------------------------------------
_DWORD *__thiscall sub_48E8F0(_DWORD *this)
{
  sub_48E7D0(this);
  *this = &off_4BD9E8;
  return this;
}
// 4BD9E8: using guessed type int (__stdcall *off_4BD9E8)(int, int);

//----- (0048E910) --------------------------------------------------------
_DWORD *__thiscall sub_48E910(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDA40;
  return this;
}
// 4BDA40: using guessed type int (__stdcall *off_4BDA40)(int, int);

//----- (0048E930) --------------------------------------------------------
_DWORD *__thiscall sub_48E930(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDA90;
  return this;
}
// 4BDA90: using guessed type int (__stdcall *off_4BDA90)(int, int);

//----- (0048E950) --------------------------------------------------------
_DWORD *__thiscall sub_48E950(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDAE0;
  return this;
}
// 4BDAE0: using guessed type int (__stdcall *off_4BDAE0)(int, int);

//----- (0048E970) --------------------------------------------------------
_DWORD *__thiscall sub_48E970(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDB30;
  return this;
}
// 4BDB30: using guessed type int (__stdcall *off_4BDB30)(int, int);

//----- (0048E990) --------------------------------------------------------
_DWORD *__thiscall sub_48E990(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDB80;
  return this;
}
// 4BDB80: using guessed type int (__stdcall *off_4BDB80)(int, int);

//----- (0048E9B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E9B0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDBD0;
  return this;
}
// 4BDBD0: using guessed type int (__stdcall *off_4BDBD0)(int, int);

//----- (0048E9D0) --------------------------------------------------------
_DWORD *__thiscall sub_48E9D0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDC20;
  return this;
}
// 4BDC20: using guessed type int (__stdcall *off_4BDC20)(int, int);

//----- (0048E9F0) --------------------------------------------------------
_DWORD *__thiscall sub_48E9F0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDC70;
  return this;
}
// 4BDC70: using guessed type int (__stdcall *off_4BDC70)(int, int);

//----- (0048EA10) --------------------------------------------------------
_DWORD *__thiscall sub_48EA10(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDCC0;
  return this;
}
// 4BDCC0: using guessed type int (__stdcall *off_4BDCC0)(int, int);

//----- (0048EA30) --------------------------------------------------------
_DWORD *__thiscall sub_48EA30(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDD10;
  return this;
}
// 4BDD10: using guessed type int (__stdcall *off_4BDD10)(int, int);

//----- (0048EA50) --------------------------------------------------------
_DWORD *__thiscall sub_48EA50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDD60;
  return this;
}
// 4BDD60: using guessed type int (__stdcall *off_4BDD60)(int, int);

//----- (0048EA70) --------------------------------------------------------
_DWORD *__thiscall sub_48EA70(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDDB0;
  return this;
}
// 4BDDB0: using guessed type int (__stdcall *off_4BDDB0)(int, int);

//----- (0048EA90) --------------------------------------------------------
_DWORD *__thiscall sub_48EA90(_DWORD *this)
{
  sub_48EA70(this);
  *this = &off_4BDE08;
  return this;
}
// 4BDE08: using guessed type int (__stdcall *off_4BDE08)(int, int);

//----- (0048EAB0) --------------------------------------------------------
int __thiscall sub_48EAB0(_DWORD *this, int a2)
{
  return this[9] - 30 * this[2];
}

//----- (0048EAD0) --------------------------------------------------------
_DWORD *__thiscall sub_48EAD0(_DWORD *this)
{
  sub_48EA70(this);
  *this = &off_4BDE60;
  return this;
}
// 4BDE60: using guessed type int (__stdcall *off_4BDE60)(int, int);

//----- (0048EAF0) --------------------------------------------------------
int __thiscall sub_48EAF0(_DWORD *this, int a2)
{
  return this[9] + 80 * this[2];
}

//----- (0048EB10) --------------------------------------------------------
_DWORD *__thiscall sub_48EB10(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDEB8;
  return this;
}
// 4BDEB8: using guessed type int (__stdcall *off_4BDEB8)(int, int);

//----- (0048EB30) --------------------------------------------------------
_DWORD *__thiscall sub_48EB30(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDF08;
  return this;
}
// 4BDF08: using guessed type int (__stdcall *off_4BDF08)(int, int);

//----- (0048EB50) --------------------------------------------------------
_DWORD *__thiscall sub_48EB50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDF58;
  return this;
}
// 4BDF58: using guessed type int (__stdcall *off_4BDF58)(int, int);

//----- (0048EB70) --------------------------------------------------------
_DWORD *__thiscall sub_48EB70(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDFA8;
  return this;
}
// 4BDFA8: using guessed type int (__stdcall *off_4BDFA8)(int, int);

//----- (0048EB90) --------------------------------------------------------
_DWORD *__thiscall sub_48EB90(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BDFF8;
  return this;
}
// 4BDFF8: using guessed type int (__stdcall *off_4BDFF8)(int, int);

//----- (0048EBB0) --------------------------------------------------------
_DWORD *__thiscall sub_48EBB0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE048;
  return this;
}
// 4BE048: using guessed type int (__stdcall *off_4BE048)(int, int);

//----- (0048EBD0) --------------------------------------------------------
int sub_48EBD0()
{
  return 4;
}

//----- (0048EBE0) --------------------------------------------------------
_DWORD *__thiscall sub_48EBE0(_DWORD *this)
{
  sub_48EBB0(this);
  *this = &off_4BE0A8;
  return this;
}
// 4BE0A8: using guessed type int (__stdcall *off_4BE0A8)(int, int);

//----- (0048EC00) --------------------------------------------------------
_DWORD *__thiscall sub_48EC00(_DWORD *this)
{
  sub_48EBB0(this);
  *this = &off_4BE108;
  return this;
}
// 4BE108: using guessed type int (__stdcall *off_4BE108)(int, int);

//----- (0048EC20) --------------------------------------------------------
int __thiscall sub_48EC20(_DWORD *this, int a2)
{
  return this[9] + 40 * this[2];
}

//----- (0048EC40) --------------------------------------------------------
int sub_48EC40()
{
  return 11;
}

//----- (0048EC50) --------------------------------------------------------
_DWORD *__thiscall sub_48EC50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE168;
  return this;
}
// 4BE168: using guessed type int (__stdcall *off_4BE168)(int, int);

//----- (0048EC70) --------------------------------------------------------
_DWORD *__thiscall sub_48EC70(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE1B8;
  return this;
}
// 4BE1B8: using guessed type int (__stdcall *off_4BE1B8)(int, int);

//----- (0048EC90) --------------------------------------------------------
_DWORD *__thiscall sub_48EC90(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE208;
  return this;
}
// 4BE208: using guessed type int (__stdcall *off_4BE208)(int, int);

//----- (0048ECB0) --------------------------------------------------------
_DWORD *__thiscall sub_48ECB0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE258;
  return this;
}
// 4BE258: using guessed type void (__thiscall *off_4BE258)(CMeshStr *__hidden this, struct CPlayer *, struct CChar *, int *);

//----- (0048ECD0) --------------------------------------------------------
int __thiscall sub_48ECD0(_DWORD *this, int a2)
{
  return this[9] + 25 * this[2];
}

//----- (0048ECF0) --------------------------------------------------------
_DWORD *__thiscall sub_48ECF0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE2A8;
  return this;
}
// 4BE2A8: using guessed type int (__stdcall *off_4BE2A8)(int, int);

//----- (0048ED10) --------------------------------------------------------
_DWORD *__thiscall sub_48ED10(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE2F8;
  return this;
}
// 4BE2F8: using guessed type int (__stdcall *off_4BE2F8)(int, int);

//----- (0048ED30) --------------------------------------------------------
_DWORD *__thiscall sub_48ED30(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE348;
  return this;
}
// 4BE348: using guessed type int (__stdcall *off_4BE348)(int, int);

//----- (0048ED50) --------------------------------------------------------
_DWORD *__thiscall sub_48ED50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE398;
  return this;
}
// 4BE398: using guessed type int (__stdcall *off_4BE398)(int, int);

//----- (0048ED70) --------------------------------------------------------
BOOL __thiscall CUpReinforceVitality::CanLearn(_DWORD *this, int a2, unsigned int a3)
{
  return a2 >= this[3] && a3 > 3;
}

//----- (0048EDB0) --------------------------------------------------------
_DWORD *__thiscall sub_48EDB0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE3E8;
  return this;
}
// 4BE3E8: using guessed type int (__stdcall *off_4BE3E8)(int, int);

//----- (0048EDD0) --------------------------------------------------------
_DWORD *__thiscall sub_48EDD0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE438;
  return this;
}
// 4BE438: using guessed type int (__stdcall *off_4BE438)(int, int);

//----- (0048EDF0) --------------------------------------------------------
_DWORD *__thiscall sub_48EDF0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE488;
  return this;
}
// 4BE488: using guessed type int (__stdcall *off_4BE488)(int, int);

//----- (0048EE10) --------------------------------------------------------
int __thiscall sub_48EE10(_DWORD *this, int a2)
{
  return this[9] + 8 * this[2];
}

//----- (0048EE30) --------------------------------------------------------
_DWORD *__thiscall sub_48EE30(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE4D8;
  return this;
}
// 4BE4D8: using guessed type int (__stdcall *off_4BE4D8)(int, int);

//----- (0048EE50) --------------------------------------------------------
_DWORD *__thiscall sub_48EE50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE528;
  return this;
}
// 4BE528: using guessed type int (__stdcall *off_4BE528)(int, int);

//----- (0048EE70) --------------------------------------------------------
int __thiscall sub_48EE70(_DWORD *this, int a2)
{
  return this[9] + 12 * this[2];
}

//----- (0048EE90) --------------------------------------------------------
_DWORD *__thiscall sub_48EE90(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE578;
  return this;
}
// 4BE578: using guessed type int (__stdcall *off_4BE578)(int, int);

//----- (0048EEB0) --------------------------------------------------------
int __thiscall sub_48EEB0(_DWORD *this, int a2)
{
  return this[9] + 31 * this[2];
}

//----- (0048EED0) --------------------------------------------------------
_DWORD *__thiscall sub_48EED0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE5C8;
  return this;
}
// 4BE5C8: using guessed type int (__stdcall *off_4BE5C8)(int, int);

//----- (0048EEF0) --------------------------------------------------------
_DWORD *__thiscall sub_48EEF0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE618;
  return this;
}
// 4BE618: using guessed type int (__stdcall *off_4BE618)(int, int);

//----- (0048EF10) --------------------------------------------------------
_DWORD *__thiscall sub_48EF10(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE668;
  return this;
}
// 4BE668: using guessed type int (__stdcall *off_4BE668)(int, int);

//----- (0048EF30) --------------------------------------------------------
int __thiscall sub_48EF30(_DWORD *this, int a2)
{
  return this[9] + 11 * this[2];
}

//----- (0048EF50) --------------------------------------------------------
_DWORD *__thiscall sub_48EF50(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE6B8;
  return this;
}
// 4BE6B8: using guessed type int (__stdcall *off_4BE6B8)(int, int);

//----- (0048EF70) --------------------------------------------------------
_DWORD *__thiscall sub_48EF70(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE708;
  return this;
}
// 4BE708: using guessed type int (__stdcall *off_4BE708)(int, int);

//----- (0048EF90) --------------------------------------------------------
_DWORD *__thiscall sub_48EF90(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE758;
  return this;
}
// 4BE758: using guessed type int (__stdcall *off_4BE758)(int, int);

//----- (0048EFB0) --------------------------------------------------------
int __thiscall sub_48EFB0(_DWORD *this, int a2)
{
  return this[9];
}

//----- (0048EFD0) --------------------------------------------------------
_DWORD *__thiscall sub_48EFD0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE7A8;
  return this;
}
// 4BE7A8: using guessed type int (__stdcall *off_4BE7A8)(int, int);

//----- (0048EFF0) --------------------------------------------------------
_DWORD *__thiscall sub_48EFF0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE7F8;
  return this;
}
// 4BE7F8: using guessed type int (__stdcall *off_4BE7F8)(int, int);

//----- (0048F010) --------------------------------------------------------
_DWORD *__thiscall sub_48F010(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE848;
  return this;
}
// 4BE848: using guessed type int (__stdcall *off_4BE848)(int, int);

//----- (0048F030) --------------------------------------------------------
_DWORD *__thiscall sub_48F030(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE898;
  return this;
}
// 4BE898: using guessed type int (__stdcall *off_4BE898)(int, int);

//----- (0048F050) --------------------------------------------------------
int __thiscall sub_48F050(_DWORD *this, int a2)
{
  return this[9] + 20 * this[2];
}

//----- (0048F070) --------------------------------------------------------
_DWORD *__thiscall sub_48F070(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BE8E8;
  return this;
}
// 4BE8E8: using guessed type int (__stdcall *off_4BE8E8)(int, int);

//----- (0048F090) --------------------------------------------------------
_DWORD *__thiscall sub_48F090(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BE948;
  return this;
}
// 4BE948: using guessed type int (__stdcall *off_4BE948)(int, int);

//----- (0048F0B0) --------------------------------------------------------
int __thiscall sub_48F0B0(_DWORD *this, int a2)
{
  return this[9] + 32 * this[2];
}

//----- (0048F0D0) --------------------------------------------------------
_DWORD *__thiscall sub_48F0D0(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BE9A8;
  return this;
}
// 4BE9A8: using guessed type int (__stdcall *off_4BE9A8)(int, int);

//----- (0048F0F0) --------------------------------------------------------
int __thiscall sub_48F0F0(_DWORD *this, int a2)
{
  return this[9] + 27 * this[2];
}

//----- (0048F110) --------------------------------------------------------
_DWORD *__thiscall sub_48F110(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEA08;
  return this;
}
// 4BEA08: using guessed type int (__stdcall *off_4BEA08)(int, int);

//----- (0048F130) --------------------------------------------------------
int __thiscall sub_48F130(_DWORD *this, int a2)
{
  return this[9] + 26 * this[2];
}

//----- (0048F150) --------------------------------------------------------
_DWORD *__thiscall sub_48F150(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEA68;
  return this;
}
// 4BEA68: using guessed type int (__stdcall *off_4BEA68)(int, int);

//----- (0048F170) --------------------------------------------------------
int __thiscall sub_48F170(_DWORD *this, int a2)
{
  return this[9] + 36 * this[2];
}

//----- (0048F190) --------------------------------------------------------
_DWORD *__thiscall sub_48F190(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEAC8;
  return this;
}
// 4BEAC8: using guessed type int (__stdcall *off_4BEAC8)(int, int);

//----- (0048F1B0) --------------------------------------------------------
int __thiscall sub_48F1B0(_DWORD *this, int a2)
{
  return this[9] + 38 * this[2];
}

//----- (0048F1D0) --------------------------------------------------------
_DWORD *__thiscall sub_48F1D0(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEB28;
  return this;
}
// 4BEB28: using guessed type int (__stdcall *off_4BEB28)(int, int);

//----- (0048F1F0) --------------------------------------------------------
int __stdcall sub_48F1F0(int a1)
{
  return 0;
}

//----- (0048F200) --------------------------------------------------------
_DWORD *__thiscall sub_48F200(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEB88;
  return this;
}
// 4BEB88: using guessed type int (__stdcall *off_4BEB88)(int, int);

//----- (0048F220) --------------------------------------------------------
_DWORD *__thiscall sub_48F220(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEBE8;
  return this;
}
// 4BEBE8: using guessed type int (__stdcall *off_4BEBE8)(int, int);

//----- (0048F240) --------------------------------------------------------
_DWORD *__thiscall sub_48F240(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEC48;
  return this;
}
// 4BEC48: using guessed type int (__stdcall *off_4BEC48)(int, int);

//----- (0048F260) --------------------------------------------------------
_DWORD *__thiscall sub_48F260(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BECA8;
  return this;
}
// 4BECA8: using guessed type int (__stdcall *off_4BECA8)(int, int);

//----- (0048F280) --------------------------------------------------------
_DWORD *__thiscall sub_48F280(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BED08;
  return this;
}
// 4BED08: using guessed type int (__stdcall *off_4BED08)(int, int);

//----- (0048F2A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F2A0(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BED68;
  return this;
}
// 4BED68: using guessed type int (__stdcall *off_4BED68)(int, int);

//----- (0048F2C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F2C0(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEDC8;
  return this;
}
// 4BEDC8: using guessed type int (__stdcall *off_4BEDC8)(int, int);

//----- (0048F2E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F2E0(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEE28;
  return this;
}
// 4BEE28: using guessed type int (__stdcall *off_4BEE28)(int, int);

//----- (0048F300) --------------------------------------------------------
_DWORD *__thiscall sub_48F300(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEE88;
  return this;
}
// 4BEE88: using guessed type int (__stdcall *off_4BEE88)(int, int);

//----- (0048F320) --------------------------------------------------------
_DWORD *__thiscall sub_48F320(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEEE8;
  return this;
}
// 4BEEE8: using guessed type int (__stdcall *off_4BEEE8)(int, int);

//----- (0048F340) --------------------------------------------------------
_DWORD *__thiscall sub_48F340(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BEF48;
  return this;
}
// 4BEF48: using guessed type int (__stdcall *off_4BEF48)(int, int);

//----- (0048F360) --------------------------------------------------------
_DWORD *__thiscall sub_48F360(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BEFA8;
  return this;
}
// 4BEFA8: using guessed type int (__stdcall *off_4BEFA8)(int, int);

//----- (0048F380) --------------------------------------------------------
_DWORD *__thiscall sub_48F380(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BF000;
  return this;
}
// 4BF000: using guessed type int (__stdcall *off_4BF000)(int, int);

//----- (0048F3A0) --------------------------------------------------------
int __thiscall sub_48F3A0(_DWORD *this, int a2)
{
  return this[9] + 15 * this[2];
}

//----- (0048F3C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F3C0(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF058;
  return this;
}
// 4BF058: using guessed type int (__stdcall *off_4BF058)(int, int);

//----- (0048F3E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F3E0(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF0B0;
  return this;
}
// 4BF0B0: using guessed type int (__stdcall *off_4BF0B0)(int, int);

//----- (0048F400) --------------------------------------------------------
_DWORD *__thiscall sub_48F400(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF108;
  return this;
}
// 4BF108: using guessed type int (__stdcall *off_4BF108)(int, int);

//----- (0048F420) --------------------------------------------------------
_DWORD *__thiscall sub_48F420(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF160;
  return this;
}
// 4BF160: using guessed type int (__stdcall *off_4BF160)(int, int);

//----- (0048F440) --------------------------------------------------------
int __thiscall sub_48F440(_DWORD *this, int a2)
{
  return this[9] + 14 * this[2];
}

//----- (0048F460) --------------------------------------------------------
_DWORD *__thiscall sub_48F460(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF1B8;
  return this;
}
// 4BF1B8: using guessed type int (__stdcall *off_4BF1B8)(int, int);

//----- (0048F480) --------------------------------------------------------
_DWORD *__thiscall sub_48F480(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF210;
  return this;
}
// 4BF210: using guessed type int (__stdcall *off_4BF210)(int, int);

//----- (0048F4A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F4A0(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF268;
  return this;
}
// 4BF268: using guessed type int (__stdcall *off_4BF268)(int, int);

//----- (0048F4C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F4C0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BF2C0;
  return this;
}
// 4BF2C0: using guessed type int (__stdcall *off_4BF2C0)(int, int);

//----- (0048F4E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F4E0(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF318;
  return this;
}
// 4BF318: using guessed type int (__stdcall *off_4BF318)(int, int);

//----- (0048F500) --------------------------------------------------------
_DWORD *__thiscall sub_48F500(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF370;
  return this;
}
// 4BF370: using guessed type int (__stdcall *off_4BF370)(int, int);

//----- (0048F520) --------------------------------------------------------
_DWORD *__thiscall sub_48F520(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF3C8;
  return this;
}
// 4BF3C8: using guessed type int (__stdcall *off_4BF3C8)(int, int);

//----- (0048F540) --------------------------------------------------------
_DWORD *__thiscall sub_48F540(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF420;
  return this;
}
// 4BF420: using guessed type int (__stdcall *off_4BF420)(int, int);

//----- (0048F560) --------------------------------------------------------
_DWORD *__thiscall sub_48F560(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF478;
  return this;
}
// 4BF478: using guessed type int (__stdcall *off_4BF478)(int, int);

//----- (0048F580) --------------------------------------------------------
_DWORD *__thiscall sub_48F580(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF4D0;
  return this;
}
// 4BF4D0: using guessed type int (__stdcall *off_4BF4D0)(int, int);

//----- (0048F5A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F5A0(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4BF528;
  return this;
}
// 4BF528: using guessed type int (__thiscall *off_4BF528)(CMock *__hidden this);

//----- (0048F5C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F5C0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BF588;
  return this;
}
// 4BF588: using guessed type void *off_4BF588;

//----- (0048F5E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F5E0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BF5F8;
  return this;
}
// 4BF5F8: using guessed type void *off_4BF5F8;

//----- (0048F600) --------------------------------------------------------
_DWORD *__thiscall sub_48F600(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BF648;
  return this;
}
// 4BF648: using guessed type int (__thiscall *off_4BF648)(CMock *__hidden this);

//----- (0048F620) --------------------------------------------------------
_DWORD *__thiscall sub_48F620(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BF6A8;
  return this;
}
// 4BF6A8: using guessed type int (__thiscall *off_4BF6A8)(CMock *__hidden this);

//----- (0048F640) --------------------------------------------------------
_DWORD *__thiscall sub_48F640(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BF708;
  return this;
}
// 4BF708: using guessed type void *off_4BF708;

//----- (0048F660) --------------------------------------------------------
_DWORD *__thiscall sub_48F660(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BF758;
  return this;
}
// 4BF758: using guessed type int (__thiscall *off_4BF758)(CMock *__hidden this);

//----- (0048F680) --------------------------------------------------------
_DWORD *__thiscall sub_48F680(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BF7B8;
  return this;
}
// 4BF7B8: using guessed type int (__thiscall *off_4BF7B8)(CMock *__hidden this);

//----- (0048F6A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F6A0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BF808;
  return this;
}
// 4BF808: using guessed type void *off_4BF808;

//----- (0048F6C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F6C0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BF858;
  return this;
}
// 4BF858: using guessed type int (__stdcall *off_4BF858)(int, int);

//----- (0048F6E0) --------------------------------------------------------
int sub_48F6E0()
{
  return 14;
}

//----- (0048F6F0) --------------------------------------------------------
_DWORD *__thiscall sub_48F6F0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BF8C8;
  return this;
}
// 4BF8C8: using guessed type int (__stdcall *off_4BF8C8)(int, int);

//----- (0048F710) --------------------------------------------------------
int sub_48F710()
{
  return 15;
}

//----- (0048F720) --------------------------------------------------------
_DWORD *__thiscall sub_48F720(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BF938;
  return this;
}
// 4BF938: using guessed type int (__stdcall *off_4BF938)(int, int);

//----- (0048F740) --------------------------------------------------------
_DWORD *__thiscall sub_48F740(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BF9A8;
  return this;
}
// 4BF9A8: using guessed type int (__stdcall *off_4BF9A8)(int, int);

//----- (0048F760) --------------------------------------------------------
int __thiscall sub_48F760(_DWORD *this)
{
  return this[14] != 0 ? 40 : 10;
}

//----- (0048F780) --------------------------------------------------------
int __thiscall sub_48F780(_DWORD *this)
{
  return this[14] != 0 ? 4 : 0;
}

//----- (0048F7A0) --------------------------------------------------------
int __thiscall sub_48F7A0(_DWORD *this)
{
  return (this[14] != 0) + 17;
}

//----- (0048F7C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F7C0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BFA68;
  return this;
}
// 4BFA68: using guessed type int (__stdcall *off_4BFA68)(int, int);

//----- (0048F7E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F7E0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BFAB8;
  return this;
}
// 4BFAB8: using guessed type int (__stdcall *off_4BFAB8)(int, int);

//----- (0048F800) --------------------------------------------------------
_DWORD *__thiscall sub_48F800(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BFB08;
  return this;
}
// 4BFB08: using guessed type int (__stdcall *off_4BFB08)(int, int);

//----- (0048F820) --------------------------------------------------------
_DWORD *__thiscall sub_48F820(_DWORD *this)
{
  sub_48F090(this);
  *this = &off_4BFB68;
  return this;
}
// 4BFB68: using guessed type int (__stdcall *off_4BFB68)(int, int);

//----- (0048F840) --------------------------------------------------------
_DWORD *__thiscall sub_48F840(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BFBC8;
  return this;
}
// 4BFBC8: using guessed type int (__stdcall *off_4BFBC8)(int, int);

//----- (0048F860) --------------------------------------------------------
int sub_48F860()
{
  return 22;
}

//----- (0048F870) --------------------------------------------------------
_DWORD *__thiscall sub_48F870(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFC38;
  return this;
}
// 4BFC38: using guessed type int (__stdcall *off_4BFC38)(int, int);

//----- (0048F890) --------------------------------------------------------
_DWORD *__thiscall sub_48F890(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BFCA8;
  return this;
}
// 4BFCA8: using guessed type int (__stdcall *off_4BFCA8)(int, int);

//----- (0048F8B0) --------------------------------------------------------
BOOL __thiscall CSkill_MonsterMagic::CanExcuteM(_DWORD *this, int a2, int a3)
{
  unsigned int v3; // edx

  v3 = this[16] % 2u;
  ++this[16];
  return v3 == 0;
}

//----- (0048F900) --------------------------------------------------------
int sub_48F900()
{
  return 19;
}

//----- (0048F910) --------------------------------------------------------
_DWORD *__thiscall sub_48F910(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFD18;
  return this;
}
// 4BFD18: using guessed type int (__stdcall *off_4BFD18)(int, int);

//----- (0048F930) --------------------------------------------------------
int sub_48F930()
{
  return 20;
}

//----- (0048F940) --------------------------------------------------------
_DWORD *__thiscall sub_48F940(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFD88;
  return this;
}
// 4BFD88: using guessed type int (__stdcall *off_4BFD88)(int, int);

//----- (0048F960) --------------------------------------------------------
int sub_48F960()
{
  return 21;
}

//----- (0048F970) --------------------------------------------------------
_DWORD *__thiscall sub_48F970(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFDF8;
  return this;
}
// 4BFDF8: using guessed type int (__stdcall *off_4BFDF8)(int, int);

//----- (0048F990) --------------------------------------------------------
_DWORD *__thiscall sub_48F990(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BFA18;
  return this;
}
// 4BFA18: using guessed type int (__stdcall *off_4BFA18)(int, int);

//----- (0048F9B0) --------------------------------------------------------
_DWORD *__thiscall sub_48F9B0(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4BFE68;
  return this;
}
// 4BFE68: using guessed type int (__stdcall *off_4BFE68)(int, int);

//----- (0048F9D0) --------------------------------------------------------
_DWORD *__thiscall sub_48F9D0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BFEB8;
  return this;
}
// 4BFEB8: using guessed type int (__stdcall *off_4BFEB8)(int, int);

//----- (0048F9F0) --------------------------------------------------------
int sub_48F9F0()
{
  return 23;
}

//----- (0048FA00) --------------------------------------------------------
_DWORD *__thiscall sub_48FA00(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BFF28;
  return this;
}
// 4BFF28: using guessed type int (__stdcall *off_4BFF28)(int, int);

//----- (0048FA20) --------------------------------------------------------
int sub_48FA20()
{
  return 24;
}

//----- (0048FA30) --------------------------------------------------------
_DWORD *__thiscall sub_48FA30(_DWORD *this)
{
  sub_48F720(this);
  *this = &off_4BFF98;
  return this;
}
// 4BFF98: using guessed type int (__stdcall *off_4BFF98)(int, int);

//----- (0048FA50) --------------------------------------------------------
int sub_48FA50()
{
  return 6;
}

//----- (0048FA60) --------------------------------------------------------
int sub_48FA60()
{
  return 25;
}

//----- (0048FA70) --------------------------------------------------------
_DWORD *__thiscall sub_48FA70(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4C0008;
  return this;
}
// 4C0008: using guessed type int (__stdcall *off_4C0008)(int, int);

//----- (0048FA90) --------------------------------------------------------
_DWORD *__thiscall sub_48FA90(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4C0068;
  return this;
}
// 4C0068: using guessed type int (__stdcall *off_4C0068)(int, int);

//----- (0048FAB0) --------------------------------------------------------
_DWORD *__thiscall sub_48FAB0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4C00D8;
  return this;
}
// 4C00D8: using guessed type int (__stdcall *off_4C00D8)(int, int);

//----- (0048FAD0) --------------------------------------------------------
int sub_48FAD0()
{
  return 10;
}

//----- (0048FAF0) --------------------------------------------------------
_DWORD *__thiscall sub_48FAF0(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4C0148;
  return this;
}
// 4C0148: using guessed type int (__stdcall *off_4C0148)(int, int);

//----- (0048FB10) --------------------------------------------------------
_DWORD *__thiscall sub_48FB10(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4C01B8;
  return this;
}
// 4C01B8: using guessed type int (__stdcall *off_4C01B8)(int, int);

//----- (0048FB30) --------------------------------------------------------
_DWORD *__thiscall sub_48FB30(_DWORD *this)
{
  CSkill::CSkill(this);
  *this = &off_4C0218;
  return this;
}
// 4C0218: using guessed type int (__stdcall *off_4C0218)(int, int);

//----- (0048FB50) --------------------------------------------------------
_DWORD *__thiscall sub_48FB50(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4C0268;
  return this;
}
// 4C0268: using guessed type int (__stdcall *off_4C0268)(int, int);

//----- (0048FB70) --------------------------------------------------------
_DWORD *__thiscall sub_48FB70(_DWORD *this)
{
  sub_48FB50(this);
  *this = &off_4C02C8;
  return this;
}
// 4C02C8: using guessed type int (__stdcall *off_4C02C8)(int, int);

//----- (0048FB90) --------------------------------------------------------
_DWORD *__thiscall sub_48FB90(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4C0328;
  return this;
}
// 4C0328: using guessed type int (__stdcall *off_4C0328)(int, int);

//----- (0048FBB0) --------------------------------------------------------
_DWORD *__thiscall sub_48FBB0(_DWORD *this)
{
  sub_48FB50(this);
  *this = &off_4C0388;
  return this;
}
// 4C0388: using guessed type int (__stdcall *off_4C0388)(int, int);

//----- (0048FBD0) --------------------------------------------------------
_DWORD *__thiscall sub_48FBD0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4C03E8;
  return this;
}
// 4C03E8: using guessed type int (__stdcall *off_4C03E8)(int, int);

//----- (0048FBF0) --------------------------------------------------------
_DWORD *__thiscall sub_48FBF0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4C0458;
  return this;
}
// 4C0458: using guessed type int (__stdcall *off_4C0458)(int, int);

//----- (0048FC20) --------------------------------------------------------
_DWORD *__thiscall sub_48FC20(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4C04C8;
  return this;
}
// 4C04C8: using guessed type int (__stdcall *off_4C04C8)(int, int);

//----- (0048FC40) --------------------------------------------------------
int sub_48FC40()
{
  return 3;
}

//----- (0048FC50) --------------------------------------------------------
int sub_48FC50()
{
  return 26;
}

//----- (0048FC60) --------------------------------------------------------
_DWORD *__thiscall sub_48FC60(_DWORD *this)
{
  sub_48E370(this);
  *this = &off_4C0538;
  return this;
}
// 4C0538: using guessed type int (__stdcall *off_4C0538)(int, int);

//----- (0048FC90) --------------------------------------------------------
_DWORD *__thiscall sub_48FC90(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4C0598;
  return this;
}
// 4C0598: using guessed type int (__stdcall *off_4C0598)(int, int);

//----- (0048FCB0) --------------------------------------------------------
_DWORD *__thiscall sub_48FCB0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4C0608;
  return this;
}
// 4C0608: using guessed type int (__stdcall *off_4C0608)(int, int);

//----- (0048FCD0) --------------------------------------------------------
int sub_48FCD0()
{
  return 28;
}

//----- (0048FCE0) --------------------------------------------------------
CMMagicFuJiExplosion *__thiscall CMMagicFuJiExplosion::CMMagicFuJiExplosion(CMMagicFuJiExplosion *this)
{
  sub_48F890(this);
  *(_DWORD *)this = &off_4C0678;
  *((_DWORD *)this + 19) = 0;
  return this;
}
// 4C0678: using guessed type int (__stdcall *off_4C0678)(int, int);

//----- (0048FD10) --------------------------------------------------------
int sub_48FD10()
{
  return 29;
}

//----- (0048FD20) --------------------------------------------------------
_DWORD *__thiscall sub_48FD20(_DWORD *this, int a2, int a3)
{
  *this = a2;
  this[1] = a3;
  this[2] = 0;
  this[3] = 0;
  return this;
}

//----- (0048FD60) --------------------------------------------------------
std::codecvt_base *__thiscall CCellMap::_CCellMap_0(std::codecvt_base **this)
{
  std::codecvt_base *result; // eax

  result = (std::codecvt_base *)this;
  if ( this[2] )
  {
    result = this[2];
    if ( result )
      result = std::codecvt_base::`vector deleting destructor'(this[2], 3u);
  }
  if ( this[3] )
  {
    result = this[3];
    if ( result )
      result = (std::codecvt_base *)CCompleteFire::CCompleteFire((CCompleteFire *)this[3], 3);
  }
  return result;
}

//----- (0048FDE0) --------------------------------------------------------
std::codecvt_base *__thiscall std::codecvt_base::`vector deleting destructor'(std::codecvt_base *this, unsigned int a2)
{
  std::codecvt_base *result; // eax

  if ( (a2 & 2) != 0 )
  {
    `vector destructor iterator'(this, 8u, this[-1]._Refs, (void (__thiscall *)(void *))CTile::~CTile);
    if ( (a2 & 1) != 0 )
      j_operator_delete(&this[-1]._Refs);
    result = (std::codecvt_base *)((char *)this - 4);
  }
  else
  {
    CTile::~CTile(this);
    if ( (a2 & 1) != 0 )
      operator delete(this);
    result = this;
  }
  return result;
}
// 4A16B4: using guessed type _DWORD __cdecl sub_4A16B4(_DWORD);

//----- (0048FE50) --------------------------------------------------------
CCompleteFire *__thiscall CCompleteFire::CCompleteFire(CCompleteFire *this, char a2)
{
  CCompleteFire *result; // eax

  if ( (a2 & 2) != 0 )
  {
    `vector destructor iterator'(this, 0x18u, this[-1].m_nContiCnt, (void (__thiscall *)(void *))CRWLock::~CRWLock);
    if ( (a2 & 1) != 0 )
      j_operator_delete(&this[-1].m_nContiCnt);
    result = (CCompleteFire *)((char *)this - 4);
  }
  else
  {
    CRWLock::~CRWLock((CRWLock *)this);
    if ( (a2 & 1) != 0 )
      operator delete(this);
    result = this;
  }
  return result;
}
// 4A16B4: using guessed type _DWORD __cdecl sub_4A16B4(_DWORD);

//----- (0048FEC0) --------------------------------------------------------
int __thiscall CCellMap::AllocTile(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // [esp+0h] [ebp-14h]
  _DWORD *v3; // [esp+4h] [ebp-10h]
  _DWORD *v5; // [esp+Ch] [ebp-8h]
  _DWORD *v6; // [esp+10h] [ebp-4h]

  if ( this[2] || this[3] )
  {
    LOG_ERR("CCellMap::AllocTile() Can't allocate Tile. CellMap(%d,%d)", *this, this[1]);
    result = 0;
  }
  else
  {
    v6 = (_DWORD *)j_operator_new(0x80004u);
    if ( v6 )
    {
      *v6 = 0x10000;
      `vector constructor iterator'(v6 + 1, 8u, 0x10000, CTile::CTile);
      v3 = v6 + 1;
    }
    else
    {
      v3 = 0;
    }
    this[2] = v3;
    v5 = (_DWORD *)j_operator_new(0x1804u);
    if ( v5 )
    {
      *v5 = 256;
      `vector constructor iterator'(v5 + 1, 0x18u, 256, (void *(__thiscall *)(void *))CRWLock::CRWLock);
      v2 = v5 + 1;
    }
    else
    {
      v2 = 0;
    }
    this[3] = v2;
    result = 1;
  }
  return result;
}

//----- (0048FFB0) --------------------------------------------------------
int __thiscall CMFireFlowerExplosion::CMFireFlowerExplosion(_DWORD *this, FILE *Stream)
{
  int j; // [esp+4h] [ebp-10h]
  int i; // [esp+8h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  if ( !sub_4A17A2(&v7, 4u, 1u, Stream) )
    return 0;
  if ( v7 == 1 )
  {
    v6 = this[2];
    for ( i = 0; i < 256; ++i )
    {
      for ( j = 0; j < 256; ++j )
      {
        if ( !sub_4A17A2((void *)(v6 + 4), 4u, 1u, Stream) )
        {
          LOG_ERR("CCellMap::ReadTileAttr() Invalid Tile Attr. (Tile:%d,%d)", j, i);
          return 0;
        }
        v6 += 8;
      }
    }
  }
  return 1;
}

//----- (00490070) --------------------------------------------------------
CRWLock *__thiscall CCellMap::ReadLock(_DWORD *this, int a2)
{
  CRWLock *result; // eax
  int j; // [esp+4h] [ebp-20h]
  CRWLock *i; // [esp+8h] [ebp-1Ch]
  CRWLock *v6; // [esp+Ch] [ebp-18h]
  int v7[2]; // [esp+10h] [ebp-14h] BYREF
  int v8; // [esp+18h] [ebp-Ch]
  CRWLock *v9; // [esp+1Ch] [ebp-8h]
  int v10; // [esp+20h] [ebp-4h]

  if ( this )
  {
    CCellMap::_CCellMap(this, (_DWORD *)a2, v7);
    v6 = (CRWLock *)(this[3] + 24 * (v7[0] + 16 * (_DWORD)v9));
    v10 = 16 - (v8 - v7[0]);
    result = v9;
    for ( i = v9; (int)i < v7[1]; i = (CRWLock *)((char *)i + 1) )
    {
      result = (CRWLock *)v7[0];
      for ( j = v7[0]; j < v8; ++j )
      {
        CRWLock::ReadLock(v6);
        result = ++v6;
      }
      v6 += v10;
    }
  }
  return result;
}

//----- (00490120) --------------------------------------------------------
int __thiscall CCellMap::_CCellMap(_DWORD *this, _DWORD *a2, int *a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-30h]
  int v5; // [esp+4h] [ebp-2Ch]
  int v6; // [esp+8h] [ebp-28h]
  int v7; // [esp+Ch] [ebp-24h]
  int v8; // [esp+14h] [ebp-1Ch]
  int v9; // [esp+18h] [ebp-18h]
  int v10; // [esp+1Ch] [ebp-14h]
  int v11; // [esp+28h] [ebp-8h]
  int v12; // [esp+2Ch] [ebp-4h]

  v11 = a2[3];
  v10 = a2[2];
  v8 = a2[1];
  v12 = *this << 8;
  v9 = this[1] << 8;
  if ( *a2 <= v12 )
    v7 = 0;
  else
    v7 = (int)(unsigned __int8)*a2 >> 4;
  *a3 = v7;
  if ( v11 <= v9 )
    v6 = 0;
  else
    v6 = (int)(unsigned __int8)v11 >> 4;
  a3[3] = v6;
  if ( v10 >= v12 + 256 )
    v5 = 16;
  else
    v5 = (((unsigned __int8)v10 - 1) >> 4) + 1;
  a3[2] = v5;
  if ( v8 >= v9 + 256 )
    v4 = 16;
  else
    v4 = (((unsigned __int8)v8 - 1) >> 4) + 1;
  result = v4;
  a3[1] = v4;
  return result;
}

//----- (00490220) --------------------------------------------------------
int __thiscall sub_490220(_DWORD *a1, _DWORD *a2)
{
  int result; // eax
  int j; // [esp+4h] [ebp-20h]
  int i; // [esp+8h] [ebp-1Ch]
  CRWLock *v6; // [esp+Ch] [ebp-18h]
  int v7[2]; // [esp+10h] [ebp-14h] BYREF
  int v8; // [esp+18h] [ebp-Ch]
  int v9; // [esp+1Ch] [ebp-8h]
  int v10; // [esp+20h] [ebp-4h]

  if ( a1 )
  {
    CCellMap::_CCellMap(a1, a2, v7);
    v6 = (CRWLock *)(a1[3] + 24 * (v7[0] + 16 * v9));
    v10 = 16 - (v8 - v7[0]);
    result = v9;
    for ( i = v9; i < v7[1]; ++i )
    {
      result = v7[0];
      for ( j = v7[0]; j < v8; ++j )
      {
        CRWLock::ReadUnlock(v6);
        result = (int)&v6[1];
        ++v6;
      }
      v6 += v10;
    }
  }
  return result;
}

//----- (004902D0) --------------------------------------------------------
CRWLock *__thiscall CCellMap::ReadUnlock_0(_DWORD *this, int a2, int a3)
{
  CRWLock *result; // eax
  int l; // [esp+4h] [ebp-38h]
  int k; // [esp+8h] [ebp-34h]
  int j; // [esp+Ch] [ebp-30h]
  CRWLock *i; // [esp+10h] [ebp-2Ch]
  CRWLock *v9; // [esp+14h] [ebp-28h]
  int v10[4]; // [esp+18h] [ebp-24h] BYREF
  int v11; // [esp+28h] [ebp-14h]
  int v12[2]; // [esp+2Ch] [ebp-10h] BYREF
  int v13; // [esp+34h] [ebp-8h]
  CRWLock *v14; // [esp+38h] [ebp-4h]

  if ( this )
  {
    CCellMap::GetRWLockRect_0(this, (_DWORD *)a2, v12);
    CCellMap::GetRWLockRect_0(this, (_DWORD *)a3, v10);
    v9 = (CRWLock *)(this[3] + 24 * (v12[0] + 16 * (_DWORD)v14));
    v11 = 16 - (v13 - v12[0]);
    for ( i = v14; (int)i < v10[3]; i = (CRWLock *)((char *)i + 1) )
    {
      for ( j = v12[0]; j < v13; ++j )
        CRWLock::ReadLock(v9++);
      v9 += v11;
    }
    while ( 1 )
    {
      result = i;
      if ( (int)i >= v10[1] )
        break;
      for ( k = v12[0]; k < v10[0]; ++k )
        CRWLock::ReadLock(v9++);
      while ( k < v10[2] )
      {
        CRWLock::WriteLock(v9);
        ++k;
        ++v9;
      }
      while ( k < v13 )
      {
        CRWLock::ReadLock(v9);
        ++k;
        ++v9;
      }
      i = (CRWLock *)((char *)i + 1);
      v9 += v11;
    }
    while ( (int)i < v12[1] )
    {
      for ( l = v12[0]; l < v13; ++l )
        CRWLock::ReadLock(v9++);
      i = (CRWLock *)((char *)i + 1);
      result = &v9[v11];
      v9 = result;
    }
  }
  return result;
}

//----- (00490470) --------------------------------------------------------
int __thiscall CCellMap::GetRWLockRect_0(_DWORD *this, _DWORD *a2, int *a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-40h]
  int v5; // [esp+4h] [ebp-3Ch]
  int v6; // [esp+8h] [ebp-38h]
  int v7; // [esp+Ch] [ebp-34h]
  int v8; // [esp+10h] [ebp-30h]
  int v9; // [esp+14h] [ebp-2Ch]
  int v10; // [esp+18h] [ebp-28h]
  int v11; // [esp+1Ch] [ebp-24h]
  int v12; // [esp+24h] [ebp-1Ch]
  int v13; // [esp+28h] [ebp-18h]
  int v14; // [esp+2Ch] [ebp-14h]
  int v15; // [esp+38h] [ebp-8h]
  int v16; // [esp+3Ch] [ebp-4h]

  v15 = a2[3];
  v14 = a2[2];
  v12 = a2[1];
  v16 = *this << 8;
  v13 = this[1] << 8;
  if ( *a2 < v16 + 256 )
  {
    if ( *a2 <= v16 )
      v10 = 0;
    else
      v10 = (int)(unsigned __int8)*a2 >> 4;
    v11 = v10;
  }
  else
  {
    v11 = 16;
  }
  *a3 = v11;
  if ( v15 < v13 + 256 )
  {
    if ( v15 <= v13 )
      v8 = 0;
    else
      v8 = (int)(unsigned __int8)v15 >> 4;
    v9 = v8;
  }
  else
  {
    v9 = 16;
  }
  a3[3] = v9;
  if ( v14 > v16 )
  {
    if ( v14 >= v16 + 256 )
      v6 = 16;
    else
      v6 = (((unsigned __int8)v14 - 1) >> 4) + 1;
    v7 = v6;
  }
  else
  {
    v7 = 0;
  }
  a3[2] = v7;
  result = v12;
  if ( v12 > v13 )
  {
    if ( v12 >= v13 + 256 )
      v4 = 16;
    else
      v4 = (((unsigned __int8)v12 - 1) >> 4) + 1;
    result = v4;
    v5 = v4;
  }
  else
  {
    v5 = 0;
  }
  a3[1] = v5;
  return result;
}

//----- (004905E0) --------------------------------------------------------
CRWLock *__thiscall sub_4905E0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  CRWLock *result; // eax
  int l; // [esp+4h] [ebp-38h]
  int k; // [esp+8h] [ebp-34h]
  int j; // [esp+Ch] [ebp-30h]
  CRWLock *i; // [esp+10h] [ebp-2Ch]
  CRWLock *v9; // [esp+14h] [ebp-28h]
  int v10[4]; // [esp+18h] [ebp-24h] BYREF
  int v11; // [esp+28h] [ebp-14h]
  int v12[2]; // [esp+2Ch] [ebp-10h] BYREF
  int v13; // [esp+34h] [ebp-8h]
  CRWLock *v14; // [esp+38h] [ebp-4h]

  if ( a1 )
  {
    CCellMap::GetRWLockRect_0(a1, a2, v12);
    CCellMap::GetRWLockRect_0(a1, a3, v10);
    v9 = (CRWLock *)(a1[3] + 24 * (v12[0] + 16 * (_DWORD)v14));
    v11 = 16 - (v13 - v12[0]);
    for ( i = v14; (int)i < v10[3]; i = (CRWLock *)((char *)i + 1) )
    {
      for ( j = v12[0]; j < v13; ++j )
        CRWLock::ReadUnlock(v9++);
      v9 += v11;
    }
    while ( 1 )
    {
      result = i;
      if ( (int)i >= v10[1] )
        break;
      for ( k = v12[0]; k < v10[0]; ++k )
        CRWLock::ReadUnlock(v9++);
      while ( k < v10[2] )
      {
        CRWLock::WriteUnlock(v9);
        ++k;
        ++v9;
      }
      while ( k < v13 )
      {
        CRWLock::ReadUnlock(v9);
        ++k;
        ++v9;
      }
      i = (CRWLock *)((char *)i + 1);
      v9 += v11;
    }
    while ( (int)i < v12[1] )
    {
      for ( l = v12[0]; l < v13; ++l )
        CRWLock::ReadUnlock(v9++);
      i = (CRWLock *)((char *)i + 1);
      result = &v9[v11];
      v9 = result;
    }
  }
  return result;
}

//----- (00490780) --------------------------------------------------------
void __thiscall CSellMap::SendDelete(CCellMap *a1, int a2, _DWORD *a3, int a4)
{
  tagPOINT a2a; // [esp+4h] [ebp-10h] BYREF
  CTile *v5; // [esp+Ch] [ebp-8h]
  char v6[4]; // [esp+10h] [ebp-4h]

  if ( a1 )
  {
    a2a.x = (unsigned __int8)*a3;
    a2a.y = (unsigned __int8)a3[1];
    v5 = CCellMap::GetTile(a1, &a2a);
    for ( *(_DWORD *)v6 = v5->m_pHead; *(_DWORD *)v6; *(_DWORD *)v6 = CBase::Next(*(CBase **)v6) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v6 + 16) == -6 )
      {
        v5->m_pHead = 0;
        ELOG("CSellMap::SendDelete %p %p\n", v6[0], **(_DWORD **)v6);
        EBREAK();
        return;
      }
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)v6 + 44))(*(_DWORD *)v6, a2, a4);
    }
  }
}

//----- (00490830) --------------------------------------------------------
void __thiscall CCellMap::GetRWLockRect(CCellMap *a1, int a2, _DWORD *a3, int a4)
{
  int v4; // eax
  _DWORD a2a[2]; // [esp+4h] [ebp-10h] BYREF
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h]

  if ( a1 )
  {
    a2a[0] = (unsigned __int8)*a3;
    a2a[1] = (unsigned __int8)a3[1];
    v6 = (_DWORD *)CCellMap::GetTile(a1, a2a);
    for ( *(_DWORD *)v7 = *v6; *(_DWORD *)v7; *(_DWORD *)v7 = CBase::Next(*(_DWORD *)v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v7 + 16) == -6 )
      {
        *v6 = 0;
        ELOG("CSellMap::SendMove %p %p\n", v7[0]);
        EBREAK(v4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)v7 + 48))(*(_DWORD *)v7, a2, a4);
    }
  }
}
// 4908B3: variable 'v4' is possibly undefined
// 43E420: using guessed type int __thiscall unknown_libname_9(_DWORD);

//----- (004908E0) --------------------------------------------------------
void __thiscall CSellMap::SendCreate(CCellMap *a1, int a2, _DWORD *a3, int a4)
{
  int v4; // eax
  _DWORD a2a[2]; // [esp+4h] [ebp-10h] BYREF
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h]

  if ( a1 )
  {
    a2a[0] = (unsigned __int8)*a3;
    a2a[1] = (unsigned __int8)a3[1];
    v6 = (_DWORD *)CCellMap::GetTile(a1, a2a);
    for ( *(_DWORD *)v7 = *v6; *(_DWORD *)v7; *(_DWORD *)v7 = CBase::Next(*(_DWORD *)v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v7 + 16) == -6 )
      {
        *v6 = 0;
        ELOG("CSellMap::SendCreate %p %p\n", v7[0]);
        EBREAK(v4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)v7 + 52))(*(_DWORD *)v7, a2, a4);
    }
  }
}
// 490963: variable 'v4' is possibly undefined
// 43E420: using guessed type int __thiscall unknown_libname_9(_DWORD);

//----- (00490990) --------------------------------------------------------
void __thiscall CSellMap::SendPacket(CCellMap *this, _DWORD *src, int a3)
{
  int v3; // eax
  _DWORD a2[2]; // [esp+4h] [ebp-10h] BYREF
  _DWORD *v5; // [esp+Ch] [ebp-8h]
  char v6[4]; // [esp+10h] [ebp-4h]

  if ( this )
  {
    a2[0] = (unsigned __int8)*src;
    a2[1] = (unsigned __int8)src[1];
    v5 = (_DWORD *)CCellMap::GetTile(this, a2);
    for ( *(_DWORD *)v6 = *v5; *(_DWORD *)v6; *(_DWORD *)v6 = CBase::Next(*(_DWORD *)v6) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v6 + 16) == -6 )
      {
        *v5 = 0;
        ELOG("CSellMap::SendPacket %p %p\n", v6[0]);
        EBREAK(v3);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v6 + 40))(*(_DWORD *)v6, a3);
    }
  }
}
// 490A13: variable 'v3' is possibly undefined
// 43E420: using guessed type int __thiscall unknown_libname_9(_DWORD);

//----- (00490A40) --------------------------------------------------------
void __thiscall CCellMap::GetPlayerList(CCellMap *this, const tagPOINT *ptT, struct CBaseList **ppList)
{
  tagPOINT _ptT; // [esp+4h] [ebp-10h] BYREF
  CTile *pTile; // [esp+Ch] [ebp-8h]
  CBase *pBase; // [esp+10h] [ebp-4h]

  if ( this )
  {
    _ptT.x = (unsigned __int8)ptT->x;
    _ptT.y = (unsigned __int8)ptT->y;
    pTile = CCellMap::GetTile(this, &_ptT);
    for ( pBase = pTile->m_pHead; pBase; pBase = CBase::Next(pBase) )
    {
      if ( pBase->m_pNext == (CBase *)-6 )
      {
        pTile->m_pHead = 0;
        ELOG("CSellMap::GetPlayerList %p %p\n", (char)pBase, pBase->__vftable);
        EBREAK();
        return;
      }
      if ( pBase->IsPlayer(pBase) )
        *ppList = (struct CBaseList *)CBaseList::Push(*ppList, pBase);
    }
  }
}

//----- (00490B00) --------------------------------------------------------
void __thiscall CCellMap::GetPlayerMonsterList(CCellMap *this, const tagPOINT *ptT, struct CBaseList **ppList)
{
  tagPOINT _ptT; // [esp+4h] [ebp-10h] BYREF
  CTile *pTile; // [esp+Ch] [ebp-8h]
  CBase *pBase; // [esp+10h] [ebp-4h]

  if ( this )
  {
    _ptT.x = (unsigned __int8)ptT->x;
    _ptT.y = (unsigned __int8)ptT->y;
    pTile = CCellMap::GetTile(this, &_ptT);
    for ( pBase = pTile->m_pHead; pBase; pBase = CBase::Next(pBase) )
    {
      if ( pBase->m_pNext == (CBase *)-6 )
      {
        pTile->m_pHead = 0;
        ELOG("CSellMap::GetPlayerMonsterList %p %p\n", (char)pBase, pBase->__vftable);
        EBREAK();
        return;
      }
      if ( pBase->IsPlayer(pBase) || pBase->IsMonster(pBase) )
        *ppList = (struct CBaseList *)CBaseList::Push(*ppList, pBase);
    }
  }
}

//----- (00490BD0) --------------------------------------------------------
int __thiscall CCellMap::GetClosestPlayer(CCellMap *this, const tagPOINT *ptT, CPlayer **ppPlayer)
{
  CPlayer *pPlayer; // [esp+4h] [ebp-14h]
  tagPOINT _ptT; // [esp+8h] [ebp-10h] BYREF
  CTile *pTile; // [esp+10h] [ebp-8h]
  CBase *pBase; // [esp+14h] [ebp-4h]

  if ( !this )
    return 0;
  _ptT.x = (unsigned __int8)ptT->x;
  _ptT.y = (unsigned __int8)ptT->y;
  pTile = CCellMap::GetTile(this, &_ptT);
  for ( pBase = pTile->m_pHead; pBase; pBase = CBase::Next(pBase) )
  {
    if ( pBase->m_pNext == (CBase *)-6 )
    {
      pTile->m_pHead = 0;
      ELOG("CSellMap::GetClosestPlayer %p %p\n", (char)pBase, pBase->__vftable);
      EBREAK();
      return 0;
    }
    if ( pBase->IsPlayer(pBase) )
    {
      pPlayer = (CPlayer *)pBase;
      if ( CChar::IsNormal((CChar *)pBase) )
      {
        if ( !CChar::IsGState(pPlayer, 0x2000) && pPlayer->m_nAdmin != 4 )
        {
          CIOObject::AddRef(pPlayer, &pPlayer->m_nTargetRef);
          *ppPlayer = pPlayer;
          return 1;
        }
      }
    }
  }
  return 0;
}

//----- (00490CD0) --------------------------------------------------------
int __thiscall CCellMap::GetMonster(CCellMap *this, const tagPOINT *ptT, int nMonIndex, CMonster **ppMonster)
{
  CMonster *pMonster; // [esp+4h] [ebp-14h]
  tagPOINT _ptT; // [esp+8h] [ebp-10h] BYREF
  CTile *pTile; // [esp+10h] [ebp-8h]
  CBase *pBase; // [esp+14h] [ebp-4h]

  if ( !this )
    return 0;
  _ptT.x = (unsigned __int8)ptT->x;
  _ptT.y = (unsigned __int8)ptT->y;
  pTile = CCellMap::GetTile(this, &_ptT);
  for ( pBase = pTile->m_pHead; pBase; pBase = CBase::Next(pBase) )
  {
    if ( pBase->m_pNext == (CBase *)-6 )
    {
      pTile->m_pHead = 0;
      ELOG("CSellMap::GetMonster %p %p\n", (char)pBase, pBase->__vftable);
      EBREAK();
      return 0;
    }
    if ( pBase->IsMonster(pBase) )
    {
      pMonster = (CMonster *)pBase;
      if ( CChar::IsNormal((CChar *)pBase) )
      {
        if ( nMonIndex == pMonster->m_pInit->m_nIndex )
        {
          CIOObject::AddRef(pMonster, &pMonster->m_nFindRef);
          *ppMonster = pMonster;
          return 1;
        }
      }
    }
  }
  return 0;
}

//----- (00490DC0) --------------------------------------------------------
CSMap *__thiscall CSMap::CSMap(CSMap *this)
{
  this->m_nIndex = 0;
  this->m_nKind = 0;
  memset(this->m_pSlot, 0, sizeof(this->m_pSlot));
  return this;
}

//----- (00490E00) --------------------------------------------------------
void __thiscall CSMap::~CSMap(CSMap *this)
{
  int i; // [esp+10h] [ebp-8h]
                                                // variable: nMax = 4096 -HighGamer
  for ( i = 0; i < 4096; ++i )
  {
    if ( this->m_pSlot[i] )
      CCellMap::`scalar deleting destructor'(this->m_pSlot[i], 1);
  }
}

//----- (00490E70) --------------------------------------------------------
CCellMap *__thiscall CCellMap::`scalar deleting destructor'(CCellMap *this, char a2)
{
  CCellMap::_CCellMap_0((std::codecvt_base **)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00490EA0) --------------------------------------------------------
int __cdecl CSMap::LoadSMap(CInitMap *a1)
{
  int result; // eax
  _DWORD *v2; // [esp+4h] [ebp-24h]
  CSMap *v3; // [esp+8h] [ebp-20h]
  CMemory **v4; // [esp+14h] [ebp-14h]
  CSMap *v5; // [esp+18h] [ebp-10h]
  CSMap *v6; // [esp+1Ch] [ebp-Ch]
  FILE *Stream; // [esp+20h] [ebp-8h]

  Stream = fopen(a1->m_szPath, "rb");
  if ( Stream )
  {
    v6 = CSMap::FindSMap(a1->m_nIndex);
    if ( !v6 )
    {
      v5 = (CSMap *)operator new(0x4008u);
      if ( v5 )
        v3 = CSMap::CSMap(v5);
      else
        v3 = 0;
      dword_4E2738 = (int)v3;
      v6 = v3;
    }
    v4 = operator new(0x10u);
    if ( v4 )
      v2 = sub_48FD20(v4, a1->m_nX, a1->m_nY);
    else
      v2 = 0;
    *((_DWORD *)&v6->m_pSlot[64 * a1->m_nY] + a1->m_nX) = v2;
    if ( CCellMap::AllocTile(v2) && CMFireFlowerExplosion::CMFireFlowerExplosion(v2, Stream) )
    {
      fclose(Stream);
      result = 1;
    }
    else
    {
      LOG_ERR("Map loading is failed. (%s)", a1->m_szPath);
      fclose(Stream);
      if ( v6 )
        CSMap::`scalar deleting destructor'(v6, 1);
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CSMap::LoadMap() Can't read map(%s).", a1->m_szPath);
    result = 0;
  }
  return result;
}
// 4E2738: using guessed type int dword_4E2738;

//----- (00491010) --------------------------------------------------------
_DWORD *__thiscall CSMap::`scalar deleting destructor'(_DWORD *this, char a2)
{
  CSMap::~CSMap((CSMap *)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00491040) --------------------------------------------------------
void __cdecl CSMap::FreeSMap()
{
  if ( dword_4E2738 )
    CSMap::`scalar deleting destructor'((_DWORD *)dword_4E2738, 1);
}
// 4E2738: using guessed type int dword_4E2738;

//----- (00491080) --------------------------------------------------------
CSMap *__cdecl CSMap::FindSMap(int nMap)
{
  CSMap *result; // eax

  if ( nMap < 32 )
    result = (CSMap *)dword_4E2738;
  else
    result = 0;
  return result;
}
// 4E2738: using guessed type int dword_4E2738;

//----- (004910A0) --------------------------------------------------------
int __thiscall CSMap::ReadLock(CSMap *this, const tagRECT *rtTile, const tagRECT *rtMap)
{
  int result; // eax
  _DWORD *v4; // [esp+0h] [ebp-18h]
  LONG j; // [esp+8h] [ebp-10h]
  LONG i; // [esp+Ch] [ebp-Ch]
  CCellMap **ppCell; // [esp+10h] [ebp-8h]
  int nPitch; // [esp+14h] [ebp-4h]

  ppCell = &this->m_pSlot[64 * rtMap->bottom] + rtMap->left;
  result = 64 - (rtMap->right - rtMap->left);
  nPitch = result;
  for ( i = rtMap->bottom; i < rtMap->top; ++i )
  {
    for ( j = rtMap->left; j < rtMap->right; ++j )
    {
      v4 = *ppCell++;
      CCellMap::ReadLock(v4, (int)rtTile);
    }
    ppCell += nPitch;
    result = i + 1;
  }
  return result;
}

//----- (00491150) --------------------------------------------------------
int __thiscall CSMap::ReadUnlock(CSMap *this, const tagRECT *rtTile, const tagRECT *rtMap)
{
  int result; // eax
  _DWORD *a1a; // [esp+0h] [ebp-18h]
  LONG j; // [esp+8h] [ebp-10h]
  LONG i; // [esp+Ch] [ebp-Ch]
  CCellMap **ppCell; // [esp+10h] [ebp-8h]
  int nPitch; // [esp+14h] [ebp-4h]

  ppCell = &this->m_pSlot[64 * rtMap->bottom] + rtMap->left;
  result = 64 - (rtMap->right - rtMap->left);
  nPitch = result;
  for ( i = rtMap->bottom; i < rtMap->top; ++i )
  {
    for ( j = rtMap->left; j < rtMap->right; ++j )
    {
      a1a = *ppCell++;
      sub_490220(a1a, rtTile);
    }
    ppCell += nPitch;
    result = i + 1;
  }
  return result;
}

//----- (00491200) --------------------------------------------------------
int __thiscall CSMap::ReadWriteLock(CSMap *this, const tagRECT *rtRTile, const tagRECT *rtWTile, const tagRECT *rtMap)
{
  int result; // eax
  _DWORD *v5; // [esp+0h] [ebp-18h]
  LONG j; // [esp+8h] [ebp-10h]
  LONG i; // [esp+Ch] [ebp-Ch]
  CCellMap **ppCell; // [esp+10h] [ebp-8h]
  int nPitch; // [esp+14h] [ebp-4h]

  ppCell = &this->m_pSlot[64 * rtMap->bottom] + rtMap->left;
  result = 64 - (rtMap->right - rtMap->left);
  nPitch = result;
  for ( i = rtMap->bottom; i < rtMap->top; ++i )
  {
    for ( j = rtMap->left; j < rtMap->right; ++j )
    {
      v5 = *ppCell++;
      CCellMap::ReadUnlock_0(v5, (int)rtRTile, (int)rtWTile);
    }
    ppCell += nPitch;
    result = i + 1;
  }
  return result;
}

//----- (004912B0) --------------------------------------------------------
void __thiscall CSMap::ReadWriteUnlock(CSMap *this, const tagRECT *rtRTile, const tagRECT *rtWTile, const tagRECT *rtMap)
{
  _DWORD *a1a; // [esp+0h] [ebp-18h]
  LONG j; // [esp+8h] [ebp-10h]
  LONG i; // [esp+Ch] [ebp-Ch]
  CCellMap **ppCell; // [esp+10h] [ebp-8h]
  int nPitch; // [esp+14h] [ebp-4h]

  ppCell = &this->m_pSlot[64 * rtMap->bottom] + rtMap->left;
  nPitch = 64 - (rtMap->right - rtMap->left);
  for ( i = rtMap->bottom; i < rtMap->top; ++i )
  {
    for ( j = rtMap->left; j < rtMap->right; ++j )
    {
      a1a = *ppCell++;
      sub_4905E0(a1a, rtRTile, rtWTile);
    }
    ppCell += nPitch;
  }
}

//----- (00491360) --------------------------------------------------------
int __thiscall CSMap::SetOnMap(CSMap *this, CBase *base, const tagPOINT *ptT)
{
  CTile *pTile; // eax
  CRWLock *v5; // [esp+4h] [ebp-10h]
  tagPOINT a2a; // [esp+8h] [ebp-Ch] BYREF
  CCellMap *v7; // [esp+10h] [ebp-4h]

  v7 = CSMap::_GetCellMap(this, ptT);
  if ( !v7 )
    return 0;
  a2a.x = (unsigned __int8)ptT->x;
  a2a.y = (unsigned __int8)ptT->y;
  v5 = CCellMap::GetLock(v7, &a2a);
  CRWLock::WriteLock(v5);
  pTile = CCellMap::GetTile(v7, &a2a);
  CTile::AddBase(pTile, base);
  CRWLock::WriteUnlock(v5);
  return 1;
}

//----- (004913E0) --------------------------------------------------------
int __thiscall CSMap::RemoveFromMap(CSMap *this, CBase *pBase, tagPOINT *ptT)
{
  CTile *v4; // eax
  CRWLock *v5; // [esp+4h] [ebp-10h]
  tagPOINT a2a; // [esp+8h] [ebp-Ch] BYREF
  CCellMap *v7; // [esp+10h] [ebp-4h]

  v7 = CSMap::_GetCellMap(this, ptT);
  if ( !v7 )
    return 0;
  a2a.x = (unsigned __int8)ptT->x;
  a2a.y = (unsigned __int8)ptT->y;
  v5 = CCellMap::GetLock(v7, &a2a);
  CRWLock::WriteLock(v5);
  v4 = CCellMap::GetTile(v7, &a2a);
  CTile::RemoveBase(v4, pBase);
  CRWLock::WriteUnlock(v5);
  return 1;
}

//----- (00491460) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
int __thiscall CSMap::MovePlayer(CSMap *this, CPlayer *pPlayer, int dx, int dy, int dz, int bEndPos, int bDash)
{
  int v7; // edx
  int result; // eax
  int v9; // eax
  int v10; // eax
  int m_nID_; // eax
  CTile **v12; // eax
  int v13; // eax
  int v14; // eax
  int m_nID; // eax
  CCellMap *v16; // eax
  CCellMap *v17; // eax
  CCellMap *v18; // eax
  CCellMap *v19; // eax
  CCellMap *v20; // eax
  CCellMap *v21; // eax
  CCellMap *v22; // eax
  CCellMap *v23; // eax
  CCellMap *v24; // eax
  CCellMap *v25; // eax
  CCellMap *v26; // eax
  CCellMap *v27; // eax
  CCellMap *v28; // eax
  CCellMap *v29; // eax
  CCellMap *v30; // eax
  CCellMap *v31; // eax
  CCellMap *v32; // eax
  CCellMap *v33; // eax
  CCellMap *v34; // eax
  CCellMap *v35; // eax
  CCellMap *v36; // eax
  CCellMap *v37; // eax
  CCellMap *v38; // eax
  CCellMap *v39; // eax
  CCellMap *v40; // eax
  CCellMap *v41; // eax
  CCellMap *v42; // eax
  CCellMap *v43; // eax
  CCellMap *v44; // eax
  CCellMap *v45; // eax
  CCellMap *v46; // eax
  CCellMap *v47; // eax
  CCellMap *v48; // eax
  int m_nClass; // [esp-44h] [ebp-E8h]
  tagPOINT m_ptPixel; // [esp-40h] [ebp-E4h]
  int m_nZ; // [esp-38h] [ebp-DCh]
  int m_nDir; // [esp-34h] [ebp-D8h]
  int m_nGState; // [esp-30h] [ebp-D4h]
  int m_nFace; // [esp-24h] [ebp-C8h]
  int m_nHair; // [esp-20h] [ebp-C4h]
  __int64 m_nMState; // [esp-1Ch] [ebp-C0h]
  int *szGuildClassTitle; // [esp-14h] [ebp-B8h]
  tagPOINT m_ptPixel_; // [esp-10h] [ebp-B4h]
  int *szGuildName; // [esp-10h] [ebp-B4h]
  int m_nGID; // [esp-Ch] [ebp-B0h]
  int m_nZ_; // [esp-8h] [ebp-ACh]
  int m_nTFlag; // [esp-8h] [ebp-ACh]
  int m_nDir_; // [esp-4h] [ebp-A8h]
  int m_nStandard; // [esp-4h] [ebp-A8h]
  CIOBuffer *v65; // [esp-4h] [ebp-A8h]
  CIOBuffer *v66; // [esp-4h] [ebp-A8h]
  CIOBuffer *v67; // [esp-4h] [ebp-A8h]
  CIOBuffer *v68; // [esp-4h] [ebp-A8h]
  CIOBuffer *v69; // [esp-4h] [ebp-A8h]
  CIOBuffer *v70; // [esp-4h] [ebp-A8h]
  CIOBuffer *v71; // [esp-4h] [ebp-A8h]
  CIOBuffer *v72; // [esp-4h] [ebp-A8h]
  CIOBuffer *v73; // [esp-4h] [ebp-A8h]
  CIOBuffer *v74; // [esp-4h] [ebp-A8h]
  CIOBuffer *v75; // [esp-4h] [ebp-A8h]
  CIOBuffer *v76; // [esp-4h] [ebp-A8h]
  CIOBuffer *v77; // [esp-4h] [ebp-A8h]
  CIOBuffer *v78; // [esp-4h] [ebp-A8h]
  CIOBuffer *v79; // [esp-4h] [ebp-A8h]
  CIOBuffer *v80; // [esp-4h] [ebp-A8h]
  CIOBuffer *v81; // [esp-4h] [ebp-A8h]
  CIOBuffer *v82; // [esp-4h] [ebp-A8h]
  CIOBuffer *v83; // [esp-4h] [ebp-A8h]
  CIOBuffer *v84; // [esp-4h] [ebp-A8h]
  CIOBuffer *v85; // [esp-4h] [ebp-A8h]
  CIOBuffer *v86; // [esp-4h] [ebp-A8h]
  CIOBuffer *v87; // [esp-4h] [ebp-A8h]
  CIOBuffer *v88; // [esp-4h] [ebp-A8h]
  CIOBuffer *v89; // [esp-4h] [ebp-A8h]
  CIOBuffer *v90; // [esp-4h] [ebp-A8h]
  CIOBuffer *v91; // [esp-4h] [ebp-A8h]
  CIOBuffer *v92; // [esp-4h] [ebp-A8h]
  CIOBuffer *v93; // [esp-4h] [ebp-A8h]
  CIOBuffer *v94; // [esp-4h] [ebp-A8h]
  CIOBuffer *v95; // [esp-4h] [ebp-A8h]
  CIOBuffer *v96; // [esp-4h] [ebp-A8h]
  CIOBuffer *v97; // [esp-4h] [ebp-A8h]
  tagRECT rtESight; // [esp+4h] [ebp-A0h] BYREF
  CTile *pEndTile_; // [esp+14h] [ebp-90h]
  CTile *pEndTile; // [esp+18h] [ebp-8Ch]
  tagPOINT _ptTS; // [esp+1Ch] [ebp-88h] BYREF
  tagPOINT _ptTE; // [esp+24h] [ebp-80h] BYREF
  CIOBuffer *pCreateBuffer; // [esp+2Ch] [ebp-78h]
  tagRECT rtUnion; // [esp+30h] [ebp-74h] BYREF
  tagPOINT ptTStart; // [esp+40h] [ebp-64h] BYREF
  tagPOINT ptPEnd; // [esp+48h] [ebp-5Ch] OVERLAPPED BYREF
  int nLimit; // [esp+50h] [ebp-54h]
  struct tagRECT rtSSight; // [esp+54h] [ebp-50h] BYREF
  tagRECT rtMap; // [esp+64h] [ebp-40h] BYREF
  CIOBuffer *pDeleteBuffer; // [esp+74h] [ebp-30h]
  tagPOINT ptTEnd; // [esp+78h] [ebp-2Ch] BYREF
  tagRECT rtMove; // [esp+80h] [ebp-24h] BYREF
  CIOBuffer *pMoveBuffer; // [esp+90h] [ebp-14h]
  CCellMap *pSCell; // [esp+94h] [ebp-10h]
  tagPOINT ptT; // [esp+98h] [ebp-Ch] BYREF
  CCellMap *pECell; // [esp+A0h] [ebp-4h]
  int Numbera; // [esp+B0h] [ebp+Ch]
  int a3a; // [esp+B4h] [ebp+10h]

  v7 = pPlayer->m_ptTile.y;
  ptTStart.x = pPlayer->m_ptTile.x;
  ptTStart.y = v7;
  ptPEnd.x = dx + pPlayer->m_ptPixel.x;
  ptPEnd.y = dy + pPlayer->m_ptPixel.y;
  ptTEnd.x = ptPEnd.x >> 5;
  ptTEnd.y = ptPEnd.y >> 5;
  pSCell = CSMap::GetCellMap(this, &ptTStart);
  if ( !pSCell )
    return 0;
  pECell = CSMap::GetCellMap(this, &ptTEnd);
  if ( !pECell )
    return 0;
  nLimit = bDash != 0 ? 100 : 64;
  v9 = abs(dx);
  if ( v9 <= nLimit && (v10 = abs(dy), v10 <= nLimit) )
  {
    CSMap::GetRect(this, &ptTStart, &rtSSight, 25);
    CSMap::GetRect(this, &ptTEnd, &rtESight, 25);
    if ( dx <= 0 )
    {
      rtMove.left = ptTEnd.x;
      rtMove.right = ptTStart.x + 1;
      rtUnion.left = rtESight.left;
      rtUnion.right = rtSSight.right;
    }
    else
    {
      rtMove.left = ptTStart.x;
      rtMove.right = ptTEnd.x + 1;
      rtUnion.left = rtSSight.left;
      rtUnion.right = rtESight.right;
    }
    if ( dy <= 0 )
    {
      rtMove.top = ptTStart.y + 1;
      rtMove.bottom = ptTEnd.y;
      rtUnion.top = rtSSight.top;
      rtUnion.bottom = rtESight.bottom;
    }
    else
    {
      rtMove.top = ptTEnd.y + 1;
      rtMove.bottom = ptTStart.y;
      rtUnion.top = rtESight.top;
      rtUnion.bottom = rtSSight.bottom;
    }
    _ptTS.x = LOBYTE(ptTStart.x);
    _ptTS.y = LOBYTE(ptTStart.y);
    CSMap::GetCellMapRect(this, &rtUnion, &rtMap);
    pEndTile = (CTile *)(rtMap.left + (rtMap.bottom << 6));
    if ( (int)pEndTile >= 0 && (int)pEndTile <= 4096 )
    {
      CSMap::ReadWriteLock(this, &rtUnion, &rtMove, &rtMap);
      v12 = (CTile **)CCellMap::GetTile(pSCell, &_ptTS);
      if ( CTile::RemoveBase((CTile *)v12, pPlayer) )
      {
        CChar::SetXY(pPlayer, &ptPEnd);
        pPlayer->m_nZ += dz;
        CChar::SetDirection(pPlayer, dx, dy);
        _ptTE.x = LOBYTE(ptTEnd.x);
        _ptTE.y = LOBYTE(ptTEnd.y);
        pEndTile_ = CCellMap::GetTile(pECell, &_ptTE);
        CTile::AddBase(pEndTile_, pPlayer);
        v13 = CBase::Id(pPlayer);
        pDeleteBuffer = (CIOBuffer *)MakePacket(S2C_REMOVEPLAYER, "d", v13);
        v14 = CBase::Id(pPlayer);
        if ( bDash )
        {
          pMoveBuffer = (CIOBuffer *)MakePacket((enum S2C_PROTOCOL)((bEndPos != 0) + 101), "dbbb", v14, dx, dy, dz);
          CPlayer::Send(pPlayer, pMoveBuffer);
        }
        else
        {
          pMoveBuffer = (CIOBuffer *)MakePacket((enum S2C_PROTOCOL)((bEndPos != 0) + 34), "dbbb", v14, dx, dy, dz);
        }
        m_nStandard = pPlayer->m_nStandard;
        m_nTFlag = pPlayer->m_nTFlag;
        m_nGID = pPlayer->m_nGID;
        szGuildName = CPlayer::GetGuildName((int *)pPlayer);
        szGuildClassTitle = CPlayer::GetGuildClassTitle((int *)pPlayer);
        m_nMState = pPlayer->m_nMState;
        m_nHair = pPlayer->m_nHair;
        m_nFace = pPlayer->m_nFace;
        m_nGState = pPlayer->m_nGState;
        m_nDir = pPlayer->m_nDir;
        m_nZ = pPlayer->m_nZ;
        m_ptPixel = pPlayer->m_ptPixel;
        m_nClass = pPlayer->m_nClass;
        m_nID = CBase::Id(pPlayer);
        pCreateBuffer = (CIOBuffer *)MakePacket(
                                       S2C_CREATEPLAYER,
                                       "dsbdddwdmbbIssdbd",
                                       m_nID,
                                       pPlayer->m_szName,
                                       m_nClass,
                                       m_ptPixel.x,
                                       m_ptPixel.y,
                                       m_nZ,
                                       m_nDir,
                                       m_nGState,
                                       pPlayer->m_wWearItem,
                                       14,
                                       m_nFace,
                                       m_nHair,
                                       m_nMState,
                                       szGuildClassTitle,
                                       szGuildName,
                                       m_nGID,
                                       m_nTFlag,
                                       m_nStandard);
        Numbera = ptTEnd.x - ptTStart.x;
        a3a = ptTEnd.y - ptTStart.y;
        if ( ptTEnd.x == ptTStart.x )
        {
          if ( a3a )
          {
            if ( a3a <= 0 )
            {
              for ( ptT.y = rtESight.bottom; ptT.y < rtSSight.bottom; ++ptT.y )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                {
                  v69 = pCreateBuffer;
                  v20 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendCreate(v20, (int)pPlayer, &ptT, (int)v69);
                }
              }
              while ( ptT.y < rtESight.top )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                {
                  v70 = pMoveBuffer;
                  v21 = CSMap::_GetCellMap(this, &ptT);
                  CCellMap::GetRWLockRect(v21, (int)pPlayer, &ptT, (int)v70);
                }
                ++ptT.y;
              }
              while ( ptT.y < rtSSight.top )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                {
                  v71 = pDeleteBuffer;
                  v22 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendDelete(v22, (int)pPlayer, &ptT, (int)v71);
                }
                ++ptT.y;
              }
            }
            else
            {
              for ( ptT.y = rtSSight.bottom; ptT.y < rtESight.bottom; ++ptT.y )
              {
                for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                {
                  v66 = pDeleteBuffer;
                  v17 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendDelete(v17, (int)pPlayer, &ptT, (int)v66);
                }
              }
              while ( ptT.y < rtSSight.top )
              {
                for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                {
                  v67 = pMoveBuffer;
                  v18 = CSMap::_GetCellMap(this, &ptT);
                  CCellMap::GetRWLockRect(v18, (int)pPlayer, &ptT, (int)v67);
                }
                ++ptT.y;
              }
              while ( ptT.y < rtESight.top )
              {
                for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                {
                  v68 = pCreateBuffer;
                  v19 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendCreate(v19, (int)pPlayer, &ptT, (int)v68);
                }
                ++ptT.y;
              }
            }
          }
          else
          {
            for ( ptT.y = rtSSight.bottom; ptT.y < rtSSight.top; ++ptT.y )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
              {
                v65 = pMoveBuffer;
                v16 = CSMap::_GetCellMap(this, &ptT);
                CCellMap::GetRWLockRect(v16, (int)pPlayer, &ptT, (int)v65);
              }
            }
          }
        }
        else if ( Numbera <= 0 )
        {
          if ( Numbera < 0 )
          {
            if ( a3a )
            {
              if ( a3a <= 0 )
              {
                for ( ptT.y = rtESight.bottom; ptT.y < rtSSight.bottom; ++ptT.y )
                {
                  for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                  {
                    v93 = pCreateBuffer;
                    v44 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendCreate(v44, (int)pPlayer, &ptT, (int)v93);
                  }
                }
                while ( ptT.y < rtESight.top )
                {
                  for ( ptT.x = rtESight.left; ptT.x < rtSSight.left; ++ptT.x )
                  {
                    v94 = pCreateBuffer;
                    v45 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendCreate(v45, (int)pPlayer, &ptT, (int)v94);
                  }
                  while ( ptT.x < rtESight.right )
                  {
                    v95 = pMoveBuffer;
                    v46 = CSMap::_GetCellMap(this, &ptT);
                    CCellMap::GetRWLockRect(v46, (int)pPlayer, &ptT, (int)v95);
                    ++ptT.x;
                  }
                  while ( ptT.x < rtSSight.right )
                  {
                    v96 = pDeleteBuffer;
                    v47 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendDelete(v47, (int)pPlayer, &ptT, (int)v96);
                    ++ptT.x;
                  }
                  ++ptT.y;
                }
                while ( ptT.y < rtSSight.top )
                {
                  for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                  {
                    v97 = pDeleteBuffer;
                    v48 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendDelete(v48, (int)pPlayer, &ptT, (int)v97);
                  }
                  ++ptT.y;
                }
              }
              else
              {
                for ( ptT.y = rtSSight.bottom; ptT.y < rtESight.bottom; ++ptT.y )
                {
                  for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                  {
                    v88 = pDeleteBuffer;
                    v39 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendDelete(v39, (int)pPlayer, &ptT, (int)v88);
                  }
                }
                while ( ptT.y < rtSSight.top )
                {
                  for ( ptT.x = rtESight.left; ptT.x < rtSSight.left; ++ptT.x )
                  {
                    v89 = pCreateBuffer;
                    v40 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendCreate(v40, (int)pPlayer, &ptT, (int)v89);
                  }
                  while ( ptT.x < rtESight.right )
                  {
                    v90 = pMoveBuffer;
                    v41 = CSMap::_GetCellMap(this, &ptT);
                    CCellMap::GetRWLockRect(v41, (int)pPlayer, &ptT, (int)v90);
                    ++ptT.x;
                  }
                  while ( ptT.x < rtSSight.right )
                  {
                    v91 = pDeleteBuffer;
                    v42 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendDelete(v42, (int)pPlayer, &ptT, (int)v91);
                    ++ptT.x;
                  }
                  ++ptT.y;
                }
                while ( ptT.y < rtESight.top )
                {
                  for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                  {
                    v92 = pCreateBuffer;
                    v43 = CSMap::_GetCellMap(this, &ptT);
                    CSellMap::SendCreate(v43, (int)pPlayer, &ptT, (int)v92);
                  }
                  ++ptT.y;
                }
              }
            }
            else
            {
              for ( ptT.y = rtESight.bottom; ptT.y < rtESight.top; ++ptT.y )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtSSight.left; ++ptT.x )
                {
                  v85 = pCreateBuffer;
                  v36 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendCreate(v36, (int)pPlayer, &ptT, (int)v85);
                }
                while ( ptT.x < rtESight.right )
                {
                  v86 = pMoveBuffer;
                  v37 = CSMap::_GetCellMap(this, &ptT);
                  CCellMap::GetRWLockRect(v37, (int)pPlayer, &ptT, (int)v86);
                  ++ptT.x;
                }
                while ( ptT.x < rtSSight.right )
                {
                  v87 = pDeleteBuffer;
                  v38 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendDelete(v38, (int)pPlayer, &ptT, (int)v87);
                  ++ptT.x;
                }
              }
            }
          }
        }
        else if ( a3a )
        {
          if ( a3a <= 0 )
          {
            for ( ptT.y = rtESight.bottom; ptT.y < rtSSight.bottom; ++ptT.y )
            {
              for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
              {
                v80 = pCreateBuffer;
                v31 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendCreate(v31, (int)pPlayer, &ptT, (int)v80);
              }
            }
            while ( ptT.y < rtESight.top )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtESight.left; ++ptT.x )
              {
                v81 = pDeleteBuffer;
                v32 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendDelete(v32, (int)pPlayer, &ptT, (int)v81);
              }
              while ( ptT.x < rtSSight.right )
              {
                v82 = pMoveBuffer;
                v33 = CSMap::_GetCellMap(this, &ptT);
                CCellMap::GetRWLockRect(v33, (int)pPlayer, &ptT, (int)v82);
                ++ptT.x;
              }
              while ( ptT.x < rtESight.right )
              {
                v83 = pCreateBuffer;
                v34 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendCreate(v34, (int)pPlayer, &ptT, (int)v83);
                ++ptT.x;
              }
              ++ptT.y;
            }
            while ( ptT.y < rtSSight.top )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
              {
                v84 = pDeleteBuffer;
                v35 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendDelete(v35, (int)pPlayer, &ptT, (int)v84);
              }
              ++ptT.y;
            }
          }
          else
          {
            for ( ptT.y = rtSSight.bottom; ptT.y < rtESight.bottom; ++ptT.y )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
              {
                v75 = pDeleteBuffer;
                v26 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendDelete(v26, (int)pPlayer, &ptT, (int)v75);
              }
            }
            while ( ptT.y < rtSSight.top )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtESight.left; ++ptT.x )
              {
                v76 = pDeleteBuffer;
                v27 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendDelete(v27, (int)pPlayer, &ptT, (int)v76);
              }
              while ( ptT.x < rtSSight.right )
              {
                v77 = pMoveBuffer;
                v28 = CSMap::_GetCellMap(this, &ptT);
                CCellMap::GetRWLockRect(v28, (int)pPlayer, &ptT, (int)v77);
                ++ptT.x;
              }
              while ( ptT.x < rtESight.right )
              {
                v78 = pCreateBuffer;
                v29 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendCreate(v29, (int)pPlayer, &ptT, (int)v78);
                ++ptT.x;
              }
              ++ptT.y;
            }
            while ( ptT.y < rtESight.top )
            {
              for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
              {
                v79 = pCreateBuffer;
                v30 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendCreate(v30, (int)pPlayer, &ptT, (int)v79);
              }
              ++ptT.y;
            }
          }
        }
        else
        {
          for ( ptT.y = rtSSight.bottom; ptT.y < rtSSight.top; ++ptT.y )
          {
            for ( ptT.x = rtSSight.left; ptT.x < rtESight.left; ++ptT.x )
            {
              v72 = pDeleteBuffer;
              v23 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendDelete(v23, (int)pPlayer, &ptT, (int)v72);
            }
            while ( ptT.x < rtSSight.right )
            {
              v73 = pMoveBuffer;
              v24 = CSMap::_GetCellMap(this, &ptT);
              CCellMap::GetRWLockRect(v24, (int)pPlayer, &ptT, (int)v73);
              ++ptT.x;
            }
            while ( ptT.x < rtESight.right )
            {
              v74 = pCreateBuffer;
              v25 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendCreate(v25, (int)pPlayer, &ptT, (int)v74);
              ++ptT.x;
            }
          }
        }
        if ( (pEndTile_->m_dwAttr & 0x10000) != 0 )
          CPortal::OpenPortal(pPlayer);
        CSMap::ReadWriteUnlock(this, &rtUnion, &rtMove, &rtMap);
        CIOBuffer::Release(pDeleteBuffer);
        CIOBuffer::Release(pCreateBuffer);
        CIOBuffer::Release(pMoveBuffer);
        result = 1;
      }
      else
      {
        CSMap::ReadWriteUnlock(this, &rtUnion, &rtMove, &rtMap);
        result = 0;
      }
    }
    else
    {
      ELOG(
        "CSMap::MovePlayer rtMap.left(%d) rtMap.bottom(%d) nIndex(%d) PID(%d) Name(%s)",
        rtMap.left,
        rtMap.bottom,
        pEndTile,
        pPlayer->m_nPID,
        pPlayer->m_szName);
      if ( dword_4E2754 < GetTickCount() && ++dword_4E2740 < 5 )
        EBREAK();
      result = 0;
    }
  }
  else
  {
    LOG_NORMAL("move hack PID(%d) Delta(%d,%d)", pPlayer->m_nPID, dx, dy);
    m_nDir_ = pPlayer->m_nDir;
    m_nZ_ = pPlayer->m_nZ;
    m_ptPixel_ = pPlayer->m_ptPixel;
    m_nID_ = CBase::Id(pPlayer);
    CPlayer::Write(pPlayer, S2C_MOVEBEFORE, "ddddw", m_nID_, m_ptPixel_.x, m_ptPixel_.y, m_nZ_, m_nDir_);
    result = 0;
  }
  return result;
}
// 491A8A: conditional instruction was optimized away because of '%_dx.4<0'
// 491E2B: conditional instruction was optimized away because of '%_dx.4<0'
// 492241: conditional instruction was optimized away because of '%_dx.4<0'
// 491460: variables would overlap: lvar "ptPEnd" ^9C.8(user-defined) and stkvar "ptPEnd" ^9C.16(has user info)
// 4E2740: using guessed type int dword_4E2740;
// 4E2754: using guessed type int dword_4E2754;

//----- (00492440) --------------------------------------------------------
void __thiscall CSMap::GetRect(CSMap *this, const struct tagPOINT *pt, struct tagRECT *rt, int nRadius)
{
  LONG v4; // [esp+0h] [ebp-14h]
  LONG v5; // [esp+4h] [ebp-10h]
  LONG v6; // [esp+8h] [ebp-Ch]
  LONG v7; // [esp+Ch] [ebp-8h]

  if ( pt->x - nRadius >= 0 )
    v7 = pt->x - nRadius;
  else
    v7 = 0;
  rt->left = v7;
  if ( pt->y - nRadius >= 0 )
    v6 = pt->y - nRadius;
  else
    v6 = 0;
  rt->bottom = v6;
  if ( pt->x + nRadius + 1 <= 0x4000 )
    v5 = pt->x + nRadius + 1;
  else
    v5 = 0x4000;
  rt->right = v5;
  if ( pt->y + nRadius + 1 <= 0x4000 )
    v4 = pt->y + nRadius + 1;
  else
    v4 = 0x4000;
  rt->top = v4;
}

//----- (00492510) --------------------------------------------------------
void __thiscall CSMap::GetCellMapRect(CSMap *this, const tagRECT *rtTile, tagRECT *rtMap)
{
  rtMap->left = rtTile->left >> 8;
  rtMap->bottom = rtTile->bottom >> 8;
  rtMap->right = ((rtTile->right - 1) >> 8) + 1;
  rtMap->top = ((rtTile->top - 1) >> 8) + 1;
}

//----- (00492570) --------------------------------------------------------
CCellMap *__thiscall CSMap::GetCellMap(CSMap *this, const tagPOINT *ptT)
{
  CCellMap *result; // eax

  if ( ptT->x >= 0 && ptT->x >> 8 < 64 && ptT->y >= 0 && ptT->y >> 8 < 64 )
    result = CSMap::_GetCellMap(this, ptT);
  else
    result = 0;
  return result;
}

//----- (004925C0) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
int __thiscall CSMap::MoveMonster(CSMap *this, CMonster *pMonster, int _dx, int _dy, int bEndPos, int bRun)
{
  int v6; // edx
  int result; // eax
  int _nID; // eax
  CTile *v9; // eax
  CTile *v10; // eax
  int m_nID_; // eax
  int m_nID__; // eax
  int m_nID; // eax
  CCellMap *v14; // eax
  CCellMap *v15; // eax
  CCellMap *v16; // eax
  CCellMap *v17; // eax
  CCellMap *v18; // eax
  CCellMap *v19; // eax
  CCellMap *v20; // eax
  CCellMap *v21; // eax
  CCellMap *v22; // eax
  CCellMap *v23; // eax
  CCellMap *v24; // eax
  CCellMap *v25; // eax
  CCellMap *v26; // eax
  CCellMap *v27; // eax
  CCellMap *v28; // eax
  CCellMap *v29; // eax
  CCellMap *v30; // eax
  CCellMap *v31; // eax
  CCellMap *v32; // eax
  CCellMap *v33; // eax
  CCellMap *v34; // eax
  CCellMap *v35; // eax
  CCellMap *v36; // eax
  CCellMap *v37; // eax
  CCellMap *v38; // eax
  CCellMap *v39; // eax
  CCellMap *v40; // eax
  CCellMap *v41; // eax
  CCellMap *v42; // eax
  CCellMap *v43; // eax
  CCellMap *v44; // eax
  CCellMap *v45; // eax
  CCellMap *v46; // eax
  tagPOINT m_ptPixel; // [esp-30h] [ebp-C8h]
  int m_nDir; // [esp-28h] [ebp-C0h]
  int m_nCurHP; // [esp-24h] [ebp-BCh]
  int m_nMaxHP; // [esp-20h] [ebp-B8h]
  int m_nGState; // [esp-1Ch] [ebp-B4h]
  __int64 m_nMState; // [esp-18h] [ebp-B0h]
  int szGuildName; // [esp-10h] [ebp-A8h]
  char *v54; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v55; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v56; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v57; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v58; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v59; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v60; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v61; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v62; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v63; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v64; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v65; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v66; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v67; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v68; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v69; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v70; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v71; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v72; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v73; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v74; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v75; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v76; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v77; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v78; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v79; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v80; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v81; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v82; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v83; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v84; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v85; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v86; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v87; // [esp-4h] [ebp-9Ch]
  struct tagRECT rtESight; // [esp+4h] [ebp-94h] BYREF
  tagPOINT _ptTS; // [esp+14h] [ebp-84h] BYREF
  tagPOINT _ptTE; // [esp+1Ch] [ebp-7Ch] BYREF
  CIOBuffer *pCreateBuffer; // [esp+24h] [ebp-74h]
  tagRECT rtUnion; // [esp+28h] [ebp-70h] BYREF
  struct tagPOINT ptTStart; // [esp+38h] [ebp-60h] BYREF
  tagPOINT ptPEnd; // [esp+40h] [ebp-58h] OVERLAPPED BYREF
  struct tagRECT rtSSight; // [esp+48h] [ebp-50h] BYREF
  tagRECT rtMap; // [esp+58h] [ebp-40h] BYREF
  CIOBuffer *pDeleteBuffer; // [esp+68h] [ebp-30h]
  struct tagPOINT ptTEnd; // [esp+6Ch] [ebp-2Ch] BYREF
  tagRECT rtMove; // [esp+74h] [ebp-24h] BYREF
  CIOBuffer *pMoveBuffer; // [esp+84h] [ebp-14h]
  CCellMap *pSCell; // [esp+88h] [ebp-10h]
  tagPOINT ptT; // [esp+8Ch] [ebp-Ch] BYREF
  CCellMap *pECell; // [esp+94h] [ebp-4h]
  int Numbera; // [esp+A4h] [ebp+Ch]
  int a7a; // [esp+A8h] [ebp+10h]

  v6 = pMonster->m_ptTile.y;
  ptTStart.x = pMonster->m_ptTile.x;
  ptTStart.y = v6;
  ptPEnd.x = _dx + pMonster->m_ptPixel.x;
  ptPEnd.y = _dy + pMonster->m_ptPixel.y;
  ptTEnd.x = ptPEnd.x >> 5;
  ptTEnd.y = ptPEnd.y >> 5;
  pSCell = CSMap::GetCellMap(this, &ptTStart);
  if ( !pSCell )
    return 0;
  pECell = CSMap::GetCellMap(this, &ptTEnd);
  if ( !pECell )
    return 0;
  if ( _dx <= 127 && _dx >= -128 && _dy <= 127 && _dy >= -128 )
  {
    CSMap::GetRect(this, &ptTStart, &rtSSight, 25);
    CSMap::GetRect(this, &ptTEnd, &rtESight, 25);
    if ( _dx <= 0 )
    {
      rtMove.left = ptTEnd.x;
      rtMove.right = ptTStart.x + 1;
      rtUnion.left = rtESight.left;
      rtUnion.right = rtSSight.right;
    }
    else
    {
      rtMove.left = ptTStart.x;
      rtMove.right = ptTEnd.x + 1;
      rtUnion.left = rtSSight.left;
      rtUnion.right = rtESight.right;
    }
    if ( _dy <= 0 )
    {
      rtMove.top = ptTStart.y + 1;
      rtMove.bottom = ptTEnd.y;
      rtUnion.top = rtSSight.top;
      rtUnion.bottom = rtESight.bottom;
    }
    else
    {
      rtMove.top = ptTEnd.y + 1;
      rtMove.bottom = ptTStart.y;
      rtUnion.top = rtESight.top;
      rtUnion.bottom = rtSSight.bottom;
    }
    _ptTS.x = LOBYTE(ptTStart.x);
    _ptTS.y = LOBYTE(ptTStart.y);
    CSMap::GetCellMapRect(this, &rtUnion, &rtMap);
    CSMap::ReadWriteLock(this, &rtUnion, &rtMove, &rtMap);
    v9 = CCellMap::GetTile(pSCell, &_ptTS);
    if ( CTile::RemoveBase(v9, pMonster) )
    {
      CChar::SetXY(pMonster, &ptPEnd);
      CChar::SetDirection(pMonster, _dx, _dy);
      _ptTE.x = LOBYTE(ptTEnd.x);
      _ptTE.y = LOBYTE(ptTEnd.y);
      v10 = CCellMap::GetTile(pECell, &_ptTE);
      CTile::AddBase(v10, pMonster);
      m_nID_ = CBase::Id(pMonster);
      pDeleteBuffer = (CIOBuffer *)MakePacket(S2C_REMOVEMONSTER, "d", m_nID_);
      m_nID__ = CBase::Id(pMonster);
      pMoveBuffer = (CIOBuffer *)MakePacket((enum S2C_PROTOCOL)((bEndPos != 0) + 36), "dbbb", m_nID__, _dx, _dy, bRun);
      v54 = pMonster->GetOperatorName(pMonster);
      szGuildName = ((int (__thiscall *)(CMonster *, int, int, char *))pMonster->GetGuildName)(
                      pMonster,
                      pMonster->m_pInit->m_nRace,
                      pMonster->m_nGID,
                      v54);
      m_nMState = pMonster->m_nMState;
      m_nGState = pMonster->m_nGState;
      m_nMaxHP = CChar::GetMaxHP(pMonster);
      m_nCurHP = pMonster->m_nCurHP;
      m_nDir = pMonster->m_nDir;
      m_ptPixel = pMonster->m_ptPixel;
      m_nID = CBase::Id(pMonster);
      pCreateBuffer = (CIOBuffer *)MakePacket(
                                     S2C_CREATEMONSTER,
                                     "wdddwdddIsbds",
                                     pMonster->m_pInit->m_nIndex,
                                     m_nID,
                                     m_ptPixel.x,
                                     m_ptPixel.y,
                                     m_nDir,
                                     m_nCurHP,
                                     m_nMaxHP,
                                     m_nGState,
                                     m_nMState,
                                     szGuildName);
      Numbera = ptTEnd.x - ptTStart.x;
      a7a = ptTEnd.y - ptTStart.y;
      if ( ptTEnd.x == ptTStart.x )
      {
        if ( a7a )
        {
          if ( a7a <= 0 )
          {
            for ( ptT.y = rtESight.bottom; ptT.y < rtSSight.bottom; ++ptT.y )
            {
              for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
              {
                v59 = pCreateBuffer;
                v18 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v18, &ptT, (int)v59);
              }
            }
            while ( ptT.y < rtESight.top )
            {
              for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
              {
                v60 = pMoveBuffer;
                v19 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v19, &ptT, (int)v60);
              }
              ++ptT.y;
            }
            while ( ptT.y < rtSSight.top )
            {
              for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
              {
                v61 = pDeleteBuffer;
                v20 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v20, &ptT, (int)v61);
              }
              ++ptT.y;
            }
          }
          else
          {
            for ( ptT.y = rtSSight.bottom; ptT.y < rtESight.bottom; ++ptT.y )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
              {
                v56 = pDeleteBuffer;
                v15 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v15, &ptT, (int)v56);
              }
            }
            while ( ptT.y < rtSSight.top )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
              {
                v57 = pMoveBuffer;
                v16 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v16, &ptT, (int)v57);
              }
              ++ptT.y;
            }
            while ( ptT.y < rtESight.top )
            {
              for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
              {
                v58 = pCreateBuffer;
                v17 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v17, &ptT, (int)v58);
              }
              ++ptT.y;
            }
          }
        }
        else
        {
          for ( ptT.y = rtSSight.bottom; ptT.y < rtSSight.top; ++ptT.y )
          {
            for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
            {
              v55 = pMoveBuffer;
              v14 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v14, &ptT, (int)v55);
            }
          }
        }
      }
      else if ( Numbera <= 0 )
      {
        if ( Numbera < 0 )
        {
          if ( a7a )
          {
            if ( a7a <= 0 )
            {
              for ( ptT.y = rtESight.bottom; ptT.y < rtSSight.bottom; ++ptT.y )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                {
                  v83 = pCreateBuffer;
                  v42 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v42, &ptT, (int)v83);
                }
              }
              while ( ptT.y < rtESight.top )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtSSight.left; ++ptT.x )
                {
                  v84 = pCreateBuffer;
                  v43 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v43, &ptT, (int)v84);
                }
                while ( ptT.x < rtESight.right )
                {
                  v85 = pMoveBuffer;
                  v44 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v44, &ptT, (int)v85);
                  ++ptT.x;
                }
                while ( ptT.x < rtSSight.right )
                {
                  v86 = pDeleteBuffer;
                  v45 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v45, &ptT, (int)v86);
                  ++ptT.x;
                }
                ++ptT.y;
              }
              while ( ptT.y < rtSSight.top )
              {
                for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                {
                  v87 = pDeleteBuffer;
                  v46 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v46, &ptT, (int)v87);
                }
                ++ptT.y;
              }
            }
            else
            {
              for ( ptT.y = rtSSight.bottom; ptT.y < rtESight.bottom; ++ptT.y )
              {
                for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
                {
                  v78 = pDeleteBuffer;
                  v37 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v37, &ptT, (int)v78);
                }
              }
              while ( ptT.y < rtSSight.top )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtSSight.left; ++ptT.x )
                {
                  v79 = pCreateBuffer;
                  v38 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v38, &ptT, (int)v79);
                }
                while ( ptT.x < rtESight.right )
                {
                  v80 = pMoveBuffer;
                  v39 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v39, &ptT, (int)v80);
                  ++ptT.x;
                }
                while ( ptT.x < rtSSight.right )
                {
                  v81 = pDeleteBuffer;
                  v40 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v40, &ptT, (int)v81);
                  ++ptT.x;
                }
                ++ptT.y;
              }
              while ( ptT.y < rtESight.top )
              {
                for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
                {
                  v82 = pCreateBuffer;
                  v41 = CSMap::_GetCellMap(this, &ptT);
                  CSellMap::SendPacket(v41, &ptT, (int)v82);
                }
                ++ptT.y;
              }
            }
          }
          else
          {
            for ( ptT.y = rtESight.bottom; ptT.y < rtESight.top; ++ptT.y )
            {
              for ( ptT.x = rtESight.left; ptT.x < rtSSight.left; ++ptT.x )
              {
                v75 = pCreateBuffer;
                v34 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v34, &ptT, (int)v75);
              }
              while ( ptT.x < rtESight.right )
              {
                v76 = pMoveBuffer;
                v35 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v35, &ptT, (int)v76);
                ++ptT.x;
              }
              while ( ptT.x < rtSSight.right )
              {
                v77 = pDeleteBuffer;
                v36 = CSMap::_GetCellMap(this, &ptT);
                CSellMap::SendPacket(v36, &ptT, (int)v77);
                ++ptT.x;
              }
            }
          }
        }
      }
      else if ( a7a )
      {
        if ( a7a <= 0 )
        {
          for ( ptT.y = rtESight.bottom; ptT.y < rtSSight.bottom; ++ptT.y )
          {
            for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
            {
              v70 = pCreateBuffer;
              v29 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v29, &ptT, (int)v70);
            }
          }
          while ( ptT.y < rtESight.top )
          {
            for ( ptT.x = rtSSight.left; ptT.x < rtESight.left; ++ptT.x )
            {
              v71 = pDeleteBuffer;
              v30 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v30, &ptT, (int)v71);
            }
            while ( ptT.x < rtSSight.right )
            {
              v72 = pMoveBuffer;
              v31 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v31, &ptT, (int)v72);
              ++ptT.x;
            }
            while ( ptT.x < rtESight.right )
            {
              v73 = pCreateBuffer;
              v32 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v32, &ptT, (int)v73);
              ++ptT.x;
            }
            ++ptT.y;
          }
          while ( ptT.y < rtSSight.top )
          {
            for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
            {
              v74 = pDeleteBuffer;
              v33 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v33, &ptT, (int)v74);
            }
            ++ptT.y;
          }
        }
        else
        {
          for ( ptT.y = rtSSight.bottom; ptT.y < rtESight.bottom; ++ptT.y )
          {
            for ( ptT.x = rtSSight.left; ptT.x < rtSSight.right; ++ptT.x )
            {
              v65 = pDeleteBuffer;
              v24 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v24, &ptT, (int)v65);
            }
          }
          while ( ptT.y < rtSSight.top )
          {
            for ( ptT.x = rtSSight.left; ptT.x < rtESight.left; ++ptT.x )
            {
              v66 = pDeleteBuffer;
              v25 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v25, &ptT, (int)v66);
            }
            while ( ptT.x < rtSSight.right )
            {
              v67 = pMoveBuffer;
              v26 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v26, &ptT, (int)v67);
              ++ptT.x;
            }
            while ( ptT.x < rtESight.right )
            {
              v68 = pCreateBuffer;
              v27 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v27, &ptT, (int)v68);
              ++ptT.x;
            }
            ++ptT.y;
          }
          while ( ptT.y < rtESight.top )
          {
            for ( ptT.x = rtESight.left; ptT.x < rtESight.right; ++ptT.x )
            {
              v69 = pCreateBuffer;
              v28 = CSMap::_GetCellMap(this, &ptT);
              CSellMap::SendPacket(v28, &ptT, (int)v69);
            }
            ++ptT.y;
          }
        }
      }
      else
      {
        for ( ptT.y = rtSSight.bottom; ptT.y < rtSSight.top; ++ptT.y )
        {
          for ( ptT.x = rtSSight.left; ptT.x < rtESight.left; ++ptT.x )
          {
            v62 = pDeleteBuffer;
            v21 = CSMap::_GetCellMap(this, &ptT);
            CSellMap::SendPacket(v21, &ptT, (int)v62);
          }
          while ( ptT.x < rtSSight.right )
          {
            v63 = pMoveBuffer;
            v22 = CSMap::_GetCellMap(this, &ptT);
            CSellMap::SendPacket(v22, &ptT, (int)v63);
            ++ptT.x;
          }
          while ( ptT.x < rtESight.right )
          {
            v64 = pCreateBuffer;
            v23 = CSMap::_GetCellMap(this, &ptT);
            CSellMap::SendPacket(v23, &ptT, (int)v64);
            ++ptT.x;
          }
        }
      }
      CSMap::ReadWriteUnlock(this, &rtUnion, &rtMove, &rtMap);
      CIOBuffer::Release(pDeleteBuffer);
      CIOBuffer::Release(pCreateBuffer);
      CIOBuffer::Release(pMoveBuffer);
      result = 1;
    }
    else
    {
      CSMap::ReadWriteUnlock(this, &rtUnion, &rtMove, &rtMap);
      result = 0;
    }
  }
  else
  {
    _nID = CBase::Id(pMonster);
    LOG_NORMAL("invalid monster move(%d : %d, %d)", _nID, _dx, _dy);
    result = 0;
  }
  return result;
}
// 492A81: conditional instruction was optimized away because of '%_dy.4<0'
// 492DF6: conditional instruction was optimized away because of '%_dy.4<0'
// 4931D8: conditional instruction was optimized away because of '%_dy.4<0'
// 4925C0: variables would overlap: lvar "ptPEnd" ^80.8(user-defined) and stkvar "rtSSight" ^80.16(has user info)

//----- (00493390) --------------------------------------------------------
int __thiscall CSMap::SendCreateInSight(CSMap *this, CPlayer *pPlayer, const tagPOINT *ptTCenter, CIOBuffer *pBuffer)
{
  CCellMap *pCell; // eax
  tagRECT rtSight; // [esp+4h] [ebp-28h] BYREF
  tagRECT rtMap; // [esp+14h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+24h] [ebp-8h] BYREF

  CSMap::GetRect(this, ptTCenter, &rtSight, 25);
  CSMap::GetCellMapRect(this, &rtSight, &rtMap);
  CSMap::ReadLock(this, &rtSight, &rtMap);
  for ( ptT.y = rtSight.bottom; ptT.y < rtSight.top; ++ptT.y )
  {
    for ( ptT.x = rtSight.left; ptT.x < rtSight.right; ++ptT.x )
    {
      pCell = CSMap::_GetCellMap(this, &ptT);
      CSellMap::SendCreate(pCell, (int)pPlayer, &ptT, (int)pBuffer);
    }
  }
  return CSMap::ReadUnlock(this, &rtSight, &rtMap);
}

//----- (00493440) --------------------------------------------------------
int __thiscall CSMap::SendPacketInRect(CSMap *this, const tagPOINT *ptTCenter, CIOBuffer *pBuffer, int nRadius)
{
  CCellMap *pCell; // eax
  tagRECT rtSight; // [esp+4h] [ebp-28h] BYREF
  tagRECT rtMap; // [esp+14h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+24h] [ebp-8h] BYREF

  CSMap::GetRect(this, ptTCenter, &rtSight, nRadius);
  CSMap::GetCellMapRect(this, &rtSight, &rtMap);
  CSMap::ReadLock(this, &rtSight, &rtMap);
  for ( ptT.y = rtSight.bottom; ptT.y < rtSight.top; ++ptT.y )
  {
    for ( ptT.x = rtSight.left; ptT.x < rtSight.right; ++ptT.x )
    {
      pCell = CSMap::_GetCellMap(this, &ptT);
      CSellMap::SendPacket(pCell, &ptT, (int)pBuffer);
    }
  }
  return CSMap::ReadUnlock(this, &rtSight, &rtMap);
}

//----- (004934F0) --------------------------------------------------------
CBaseList *__thiscall CSMap::GetPlayerListInRect(CSMap *this, const tagPOINT *ptTCenter, int nRadius)
{
  CCellMap *pCell; // eax
  tagRECT rtRange; // [esp+4h] [ebp-2Ch] BYREF
  CBaseList *pList; // [esp+14h] [ebp-1Ch] BYREF
  tagRECT rtMap; // [esp+18h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+28h] [ebp-8h] BYREF

  pList = 0;
  CSMap::GetRect(this, ptTCenter, &rtRange, nRadius);
  CSMap::GetCellMapRect(this, &rtRange, &rtMap);
  CSMap::ReadLock(this, &rtRange, &rtMap);
  for ( ptT.y = rtRange.bottom; ptT.y < rtRange.top; ++ptT.y )
  {
    for ( ptT.x = rtRange.left; ptT.x < rtRange.right; ++ptT.x )
    {
      pCell = CSMap::_GetCellMap(this, &ptT);
      CCellMap::GetPlayerList(pCell, &ptT, &pList);
    }
  }
  CSMap::ReadUnlock(this, &rtRange, &rtMap);
  return pList;
}

//----- (004935A0) --------------------------------------------------------
CBaseList *__thiscall CSMap::GetPlayerMonsterListInRect(CSMap *this, const tagPOINT *ptTCenter, int nRadius)
{
  CCellMap *pCell; // eax
  tagRECT rtRange; // [esp+4h] [ebp-2Ch] BYREF
  CBaseList *pList; // [esp+14h] [ebp-1Ch] BYREF
  tagRECT rtMap; // [esp+18h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+28h] [ebp-8h] BYREF

  pList = 0;
  CSMap::GetRect(this, ptTCenter, &rtRange, nRadius);
  CSMap::GetCellMapRect(this, &rtRange, &rtMap);
  CSMap::ReadLock(this, &rtRange, &rtMap);
  for ( ptT.y = rtRange.bottom; ptT.y < rtRange.top; ++ptT.y )
  {
    for ( ptT.x = rtRange.left; ptT.x < rtRange.right; ++ptT.x )
    {
      pCell = CSMap::_GetCellMap(this, &ptT);
      CCellMap::GetPlayerMonsterList(pCell, &ptT, &pList);
    }
  }
  CSMap::ReadUnlock(this, &rtRange, &rtMap);
  return pList;
}

//----- (00493650) --------------------------------------------------------
CPlayer *__thiscall CSMap::GetClosestPlayerInRect(CSMap *this, const tagPOINT *ptTCenter, int nRadius)
{
  CCellMap *v3; // eax
  int i; // [esp+8h] [ebp-30h]
  tagRECT rtRange; // [esp+Ch] [ebp-2Ch] BYREF
  CPlayer *pPlayer; // [esp+1Ch] [ebp-1Ch] BYREF
  tagRECT rtMap; // [esp+20h] [ebp-18h] BYREF
  tagPOINT ptT; // [esp+30h] [ebp-8h] BYREF

  pPlayer = 0;
  CSMap::GetRect(this, ptTCenter, &rtRange, nRadius);
  CSMap::GetCellMapRect(this, &rtRange, &rtMap);
  CSMap::ReadLock(this, &rtRange, &rtMap);
  for ( i = 1; i <= nRadius; ++i )
  {
    for ( ptT.y = ptTCenter->y - i; ptT.y <= i + ptTCenter->y; ++ptT.y )
    {
      for ( ptT.x = ptTCenter->x - i; ptT.x <= i + ptTCenter->x; ++ptT.x )
      {
        v3 = CSMap::_GetCellMap(this, &ptT);
        if ( CCellMap::GetClosestPlayer(v3, &ptT, &pPlayer) )
          goto LABEL_14;
        if ( ptT.y != ptTCenter->y - i && ptT.y != i + ptTCenter->y )
          ptT.x += 2 * i - 1;
      }
    }
  }
LABEL_14:
  CSMap::ReadUnlock(this, &rtRange, &rtMap);
  return pPlayer;
}

//----- (00493770) --------------------------------------------------------
CMonster *__thiscall CSMap::GetMonsterInRect(CSMap *this, const tagPOINT *ptTCenter, int nMonIndex, int nRadius)
{
  CCellMap *v4; // eax
  int i; // [esp+8h] [ebp-30h]
  tagRECT rtRange; // [esp+Ch] [ebp-2Ch] BYREF
  tagRECT rtMap; // [esp+1Ch] [ebp-1Ch] BYREF
  tagPOINT ptT; // [esp+2Ch] [ebp-Ch] BYREF
  CMonster *pMonster; // [esp+34h] [ebp-4h] BYREF

  pMonster = 0;
  CSMap::GetRect(this, ptTCenter, &rtRange, nRadius);
  CSMap::GetCellMapRect(this, &rtRange, &rtMap);
  CSMap::ReadLock(this, &rtRange, &rtMap);
  for ( i = 1; i <= nRadius; ++i )
  {
    for ( ptT.y = ptTCenter->y - i; ptT.y <= i + ptTCenter->y; ++ptT.y )
    {
      for ( ptT.x = ptTCenter->x - i; ptT.x <= i + ptTCenter->x; ++ptT.x )
      {
        v4 = CSMap::_GetCellMap(this, &ptT);
        if ( CCellMap::GetMonster(v4, &ptT, nMonIndex, &pMonster) )
          goto LABEL_14;
        if ( ptT.y != ptTCenter->y - i && ptT.y != i + ptTCenter->y )
          ptT.x += 2 * i - 1;
      }
    }
  }
LABEL_14:
  CSMap::ReadUnlock(this, &rtRange, &rtMap);
  return pMonster;
}

//----- (004938A0) --------------------------------------------------------
void __thiscall CSMap::PickUpItem(CSMap *this, CPlayer *pPlayer, int nId, const tagPOINT *ptT)
{
  int v4; // eax
  tagPOINT v5; // [esp+4h] [ebp-3Ch] BYREF
  CIOBuffer *v6; // [esp+Ch] [ebp-34h]
  tagPOINT v7; // [esp+10h] [ebp-30h] BYREF
  CIOBuffer *v8; // [esp+18h] [ebp-28h]
  CIOBuffer *v9; // [esp+1Ch] [ebp-24h]
  CRWLock *pLock; // [esp+20h] [ebp-20h]
  tagPOINT _ptT; // [esp+24h] [ebp-1Ch] BYREF
  CItem *pItem; // [esp+2Ch] [ebp-14h]
  CTile **pTile; // [esp+30h] [ebp-10h]
  int bSuccess; // [esp+34h] [ebp-Ch]
  CCellMap *pCell; // [esp+38h] [ebp-8h]
  CIOCriticalSection *a1; // [esp+3Ch] [ebp-4h]

  pCell = CSMap::GetCellMap(this, ptT);
  if ( !pCell )
    return;
  pItem = 0;
  _ptT.x = (unsigned __int8)ptT->x;
  _ptT.y = (unsigned __int8)ptT->y;
  pLock = CCellMap::GetLock(pCell, &_ptT);
  CIOCriticalSection::Enter(&pPlayer->m_lockItem.m_critical_section);
  CRWLock::WriteLock(pLock);
  pTile = (CTile **)CCellMap::GetTile(pCell, &_ptT);
  bSuccess = 0;
  a1 = 0;
  pItem = CTile::GetItem((CTile *)pTile, nId);
  if ( pItem && !CBase::IsDeleted(pItem) && Distance(&pPlayer->m_ptPixel, &pItem->m_ptPixel) <= 64 )
  {
    if ( pItem->m_nKeyID && (pItem->m_bParty || (v4 = CBase::Id(pPlayer), pItem->m_nKeyID != v4)) )
    {
      if ( pItem->m_bParty && pItem->m_nKeyID == pPlayer->m_nParty )
      {
        a1 = (CIOCriticalSection *)sub_44D4E0(pItem->m_nKeyID);
        if ( a1 )
        {
          CTile::RemoveBase((CTile *)pTile, pItem);
          CRWLock::WriteUnlock(pLock);
          CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
          CParty::StoreItem(a1, (CMemory *)pItem);
          bSuccess = 1;
          goto LABEL_18;
        }
      }
      else
      {
        CPlayer::Write(pPlayer, S2C_MESSAGE, "b", 23);
      }
    }
    else
    {
      CIOObject::AddRef((int)pItem);
      if ( CPlayer::_InsertItem(pPlayer, 12, pItem) == 1 )
      {
        CTile::RemoveBase((CTile *)pTile, pItem);
        pItem->m_bParty = 0;
        pItem->m_nKeyID = 0;
        pItem->m_dwTick = 0;
        pItem->m_pMap = 0;
        bSuccess = 1;
      }
      CIOObject::Release(pItem);
    }
  }
  CRWLock::WriteUnlock(pLock);
  CIOCriticalSection::Leave((int)&pPlayer->m_lockItem);
LABEL_18:
  if ( bSuccess )
  {
    if ( a1 )
    {
      CParty::DistributeItem(a1, &pPlayer->m_ptPixel.x);
      CIOObject::Release((CIOObject *)a1);
    }
    else
    {
      if ( (pItem->m_pInit->m_nIndex >= 665 && pItem->m_pInit->m_nIndex <= 668
         || pItem->m_pInit->m_nIndex >= 802 && pItem->m_pInit->m_nIndex <= 825
         || pItem->m_pInit->m_nIndex >= 856 && pItem->m_pInit->m_nIndex <= 867
         || pItem->m_pInit->m_nIndex == 688)
        && abs(pPlayer->m_ptPixel.x - 57367) < 1000
        && abs(pPlayer->m_ptPixel.y - 9077) < 1001 )
      {
        v7.x = 1792;
        v7.y = 284;
        v8 = (CIOBuffer *)MakePacket(S2C_MESSAGEV, "bsw", 42, pPlayer->m_szName, pItem->m_pInit->m_nIndex);
        CSMap::SendPacketInRect(pPlayer->m_pMap, &v7, v8, 32);
        CIOBuffer::Release(v8);
      }
      if ( (pItem->m_pInit->m_nIndex >= 673 && pItem->m_pInit->m_nIndex <= 687
         || pItem->m_pInit->m_nIndex >= 826 && pItem->m_pInit->m_nIndex <= 855)
        && abs(pPlayer->m_ptPixel.x - 20284) < 1160
        && abs(pPlayer->m_ptPixel.y - 67480) < 1212 )
      {
        v5.x = 634;
        v5.y = 2109;
        v6 = (CIOBuffer *)MakePacket(S2C_MESSAGEV, "bsw", 42, pPlayer->m_szName, pItem->m_pInit->m_nIndex);
        CSMap::SendPacketInRect(pPlayer->m_pMap, &v5, v6, 38);
        CIOBuffer::Release(v6);
      }
    }
    v9 = (CIOBuffer *)MakePacket(S2C_REMOVEITEM, "d", nId);
    CSMap::SendPacketInRect(pPlayer->m_pMap, ptT, v9, 25);
    CIOBuffer::Release(v9);
  }
}

//----- (00493CD0) --------------------------------------------------------
void __thiscall CMapObject::OnTimer(CMapObject *this, int nId)
{
  CIOCriticalSection::Enter(&this->m_lock.m_critical_section);
  this->m_nCurState = this->m_nNextState;
  switch ( this->m_nCurState )
  {
    case 0:
      break;
    case 1:
      this->m_nNextState = 2;
      CPlayer::WriteInMap(this->m_nMap, S2C_MAPSTATE, "bb", this->m_nCurState, 95);
      CIOObject::AddTimer(this, 0x186A0u, 0);
      break;
    case 2:
      this->m_nNextState = 3;
      CNPCScenario::MirrorGState(1, 2);
      CNPCScenario::ThroneGState(1, 4);
      CPlayer::WriteInMap(this->m_nMap, S2C_MAPSTATE, "bb", this->m_nCurState, 96);
      CIOObject::AddTimer(this, 0x222E0u, 0);
      break;
    case 3:
      this->m_nNextState = 4;
      CNPCScenario::ThroneGState(1, 8);
      CPlayer::WriteInMap(this->m_nMap, S2C_MAPSTATE, "bb", this->m_nCurState, 97);
      CIOObject::AddTimer(this, 0x7530u, 0);
      break;
    case 4:
      this->m_nNextState = 5;
      CPlayer::WriteInMap(this->m_nMap, S2C_MAPSTATE, "bb", this->m_nCurState, 98);
      CIOObject::AddTimer(this, 0x7530u, 0);
      break;
    case 5:
      this->m_nNextState = 0;
      this->m_nCurState = 0;
      CMonsterTowerBoss::Create();
      break;
    default:
      this->m_nNextState = 0;
      this->m_nCurState = 0;
      break;
  }
  CIOCriticalSection::Leave((int)&this->m_lock);
}

//----- (00493E80) --------------------------------------------------------
void __thiscall CMapObject::SetState(CMapObject *pBit, int nMap, int nState)
{
  pBit->m_nMap = nMap;
  pBit->m_nNextState = nState;
  pBit->OnTimer(pBit, 0);
}

//----- (00493EB0) --------------------------------------------------------
int __thiscall CMapObject::GetState(CMapObject *this)
{
  int nState; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter(&this->m_lock.m_critical_section);
  nState = this->m_nCurState;
  CIOCriticalSection::Leave((int)&this->m_lock);
  return nState;
}

//----- (00493EE0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *__thiscall sub_493EE0(std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *this)
{
  struct localeinfo_struct *v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = _LocaleUpdate::GetLocaleT((_LocaleUpdate *)&v5);
  sub_47A720(this, (int)&v4, (int)v1);
  return this;
}
// 44B910: using guessed type struct localeinfo_struct *__thiscall _LocaleUpdate::GetLocaleT(_LocaleUpdate *__hidden this);

//----- (00493F10) --------------------------------------------------------
void *__thiscall _f(void *this)
{
  CIOObject::CIOObject((CIOObject *)this);
  *(_DWORD *)this = &off_4C0934;
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)((char *)this + 28));
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 4) = 0;
  return this;
}
// 4C0934: using guessed type int (__stdcall *off_4C0934)(int);

//----- (00493F60) --------------------------------------------------------
void *__thiscall sub_493F60(void *this, char a2)
{
  sub_493F90(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00493F90) --------------------------------------------------------
int __thiscall sub_493F90(void *this)
{
  int result; // eax

  *(_DWORD *)this = &off_4C0934;
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)((char *)this + 28));
  std::locale::facet::~facet((std::locale::facet *)this);
  return result;
}
// 423960: using guessed type void __thiscall std::locale::facet::~facet(std::locale::facet *__hidden this);
// 4C0934: using guessed type int (__stdcall *off_4C0934)(int);

//----- (00493FC0) --------------------------------------------------------
int __thiscall sub_493FC0(void *this)
{
  return sub_493FE0(this);
}

//----- (00493FE0) --------------------------------------------------------
int __thiscall sub_493FE0(void *this)
{
  return sub_494000((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this);
}

//----- (00494000) --------------------------------------------------------
int __thiscall sub_494000(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, (int)v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4940B0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = sub_474590(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return result;
}

//----- (004940B0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4940B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *a2, int a3, int a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_8(v4)
    && (v5 = sub_430C20(this, (int)v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_494150((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>,0>>::begin(
      this,
      a2);
    result = a2;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50(this, &v9, *v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00494150) --------------------------------------------------------
_DWORD *__thiscall sub_494150(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_4941B0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)sub_47EB40(this);
  *result = this[1];
  return result;
}

//----- (004941B0) --------------------------------------------------------
int __stdcall sub_4941B0(void *a1)
{
  int result; // eax
  void **v2; // eax
  void *i; // [esp+4h] [ebp-4h]

  for ( i = a1; ; a1 = i )
  {
    result = *(char *)sub_431110((int)i);
    if ( result )
      break;
    v2 = (void **)sub_430F90((int)i);
    sub_4941B0(*v2);
    i = *(void **)sub_474590((int)i);
    sub_44CD70((int)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}

//----- (00494230) --------------------------------------------------------
int __stdcall IsValidNMID(const char *name)
{
  const char *namea; // [esp+8h] [ebp+8h]

  if ( !*name )
    return 0;
  do
  {
    if ( *(unsigned __int8 *)name >= 0x80u )
    {
      namea = name + 1;
      if ( *(unsigned __int8 *)namea < 0x80u )
        return 0;
      name = namea + 1;
    }
    else
    {
      if ( *(unsigned __int8 *)name <= 0x20u || strchr("',\"", *name) )
        return 0;
      ++name;
    }
  }
  while ( *name );
  return 1;
}

//----- (004942C0) --------------------------------------------------------
CSocket *__thiscall CSocket::CSocket(CSocket *this, int socket, sockaddr_in *addr)
{
  CIOSocket::CIOSocket(this, socket);
  this->__vftable = (CSocket_vtbl *)&off_4C0950;
  this->m_bit = 0;
  this->m_nId = InterlockedIncrement(&dword_4E2ED8);
  this->m_nEncodeCode = 0;
  this->m_nDecodeCode = 0;
  this->bIsGetHSCryptKey = 0;
  this->m_addr.S_un.S_addr = addr->sin_addr.S_un.S_addr;
  this->m_nPort = addr->sin_port;
  this->m_pPlayer = 0;
  this->m_dwTick = 0;
  this->m_nUID = 0;
  this->m_nNoReplyCnt = 0;
  this->m_nExpTime = 0;
  this->m_timePrev = 0;
  this->m_nCID = 0;
  memset(this->m_szBillingInfo, 0, sizeof(this->m_szBillingInfo));
  memset(this->m_byHSCliInfo, 0, sizeof(this->m_byHSCliInfo));
  this->m_pulHSEntry = 0;
  this->m_bHSIsFirstCheck = 1;
  this->m_bHSIsWaitAck = 0;
  this->m_dwHSTick = GetTickCount();
  return this;
}
// 4C0950: using guessed type int (__stdcall *off_4C0950)(int);

//----- (00494400) --------------------------------------------------------
void *__thiscall CSocket::`scalar deleting destructor'(CSocket *this, char a2)
{
  CSocket::~CSocket(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00494430) --------------------------------------------------------
void __thiscall CSocket::~CSocket(CSocket *this)
{
  this->__vftable = (CSocket_vtbl *)&off_4C0950;
  CIOSocket::_CIOSocket((CIOBuffer **)this);
}
// 4C0950: using guessed type int (__stdcall *off_4C0950)(int);

//----- (00494450) --------------------------------------------------------
void __thiscall CSocket::OnCreate(CSocket *this)
{
  char *v1; // eax
  int m_nPort; // [esp-8h] [ebp-Ch]
  CSocket *pSocket; // [esp+0h] [ebp-4h]

  pSocket = this;
  m_nPort = this->m_nPort;
  v1 = inet_ntoa(this->m_addr);
  LOG_INFO("new connection in_addr(%s) port(%d) socket(%p)", v1, m_nPort, this);
  CServer::Add(pSocket);
  sub_4243D0(pSocket);
  if ( dword_4E118C < CServer::Size() && pSocket->m_addr.S_un.S_addr != inet_addr("211.108.45.218") )
  {
    CSocket::Write(pSocket, S2C_CLOSE, "b", 6);
    CSocket::Logout(pSocket, 6);
    CIOSocket::GracefulClose(pSocket);
  }
}
// 4E118C: using guessed type int dword_4E118C;

//----- (004944F0) --------------------------------------------------------
void __thiscall CSocket::OnRead(CSocket *this)
{
  char *v1; // eax
  int v2; // [esp-8h] [ebp-28h]
  char *v3; // [esp-8h] [ebp-28h]
  int m_nID; // [esp-4h] [ebp-24h]
  int v5; // [esp-4h] [ebp-24h]
  char v6; // [esp+3h] [ebp-1Dh]
  PACKET *packet; // [esp+8h] [ebp-18h] MAPDST
  int nType; // [esp+10h] [ebp-10h]
  size_t nSize; // [esp+14h] [ebp-Ch]
  size_t dwLeft; // [esp+1Ch] [ebp-4h]

  if ( this->m_nPendingWrite <= 0xFFFF )
  {
    dwLeft = this->m_pReadBuf->m_dwSize;
    for ( packet = (PACKET *)this->m_pReadBuf; ; packet = (PACKET *)((char *)packet + nSize) )
    {
      if ( dwLeft < 3 )
        goto LABEL_5;
      nType = packet->byType;
      nSize = packet->wSize;
      if ( dwLeft < nSize )
        break;
      if ( packet->wSize < 3u )
      {
        LOG_ERR("invalid buffer size. (type:%d, size:%d, bit:%X)", nType, nSize, this->m_bit);
        CIOSocket::WriteCallback(this);
        return;
      }
      v6 = this->m_nDecodeCode++ & 0x3F;
      Decode(v6, &packet->byType, nSize - 2);
      if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0 )
      {
        if ( this->bIsGetHSCryptKey )
        {
          if ( (int)(nSize - 3) > 0 )
          {
            packet = (PACKET *)_HsCrypt_GetDecMsg(packet->data, nSize - 3, (int)&unk_4E158E, packet->data, nSize - 3);
            if ( packet )
            {
              LOG_ERR("_HsCrypt_GetDecMsg() is Failed.  ErrorType(%d)", packet);
              CSocket::Write(this, S2C_CLOSE, "b", 1);
              CIOSocket::WriteCallback(this);
              return;
            }
          }
        }
      }
      CSocket::Process(this, packet);
      dwLeft -= nSize;
    }
    if ( packet->wSize <= 8000u )
    {
LABEL_5:
      CIOSocket::Read(this, dwLeft);
      return;
    }
    v5 = CSocket::Id(this);
    v3 = inet_ntoa(this->m_addr);
    LOG_NORMAL(
      "exceed buffer size. (type %d) (size %d) (bit %X) (addr %s) (SID %x) ",
      nType,
      nSize,
      this->m_bit,
      v3,
      v5);
    CIOSocket::WriteCallback(this);
  }
  else
  {
    m_nID = CSocket::Id(this);
    v2 = this->m_nPendingWrite;
    v1 = inet_ntoa(this->m_addr);
    LOG_NORMAL("close pending socket (addr %s) (bytes %d) (id %x)", v1, v2, m_nID);
    CIOSocket::WriteCallback(this);
  }
}

//----- (00494700) --------------------------------------------------------
void __thiscall CSocket::OnClose(CSocket *this)
{
  CPlayer *pPlayer; // [esp+4h] [ebp-4h]

  CServer::Remove(this);
  CSocket::Logout(this, 0);
  pPlayer = this->m_pPlayer;
  if ( pPlayer )
  {
    CScreen::Lock((CScreen *)this);
    this->m_pPlayer = 0;
    CScreen::Unlock((CScreen *)this);
    CIOObject::Release(pPlayer, &pPlayer->m_nSocketRef);
  }
}

//----- (00494760) --------------------------------------------------------
void __thiscall CSocket::CloseSocket(CSocket *this)
{
  linger linger; // [esp+4h] [ebp-8h] BYREF
  SOCKET hSocket; // [esp+8h] [ebp-4h]

  CScreen::Lock((CScreen *)this);
  hSocket = InterlockedExchange((volatile LONG *)&this->m_hSocket, 0);
  CScreen::Unlock((CScreen *)this);
  linger.l_onoff = 1;
  linger.l_linger = 0;
  setsockopt(hSocket, SOL_SOCKET, SO_LINGER, (const char *)&linger, 4);
  closesocket(hSocket);
}

//----- (004947C0) --------------------------------------------------------
void __thiscall CSocket::Shutdown(CSocket *this)
{
  CScreen::Lock((CScreen *)this);
  shutdown(this->m_hSocket, 2);
  CScreen::Unlock((CScreen *)this);
}

//----- (004947F0) --------------------------------------------------------
void __thiscall CSocket::Send(CSocket *this, CIOBuffer *pBuffer)
{
  int dwRet; // [esp+4h] [ebp-4h]

  if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0
    && this->bIsGetHSCryptKey
    && pBuffer->m_dwSize != 3
    && (dwRet = _HsCrypt_GetEncMsg(
                  &pBuffer->m_buffer[3],
                  pBuffer->m_dwSize - 3,
                  (int)&unk_4E1368,
                  &pBuffer->m_buffer[3],
                  pBuffer->m_dwSize - 3)) != 0 )
  {
    LOG_ERR("_HsCrypt_GetEncMsg() is Failed.  ErrorType(%d)", dwRet);
    CSocket::Write(this, S2C_CLOSE, "b", 1);
    CIOSocket::WriteCallback(this);
  }
  else
  {
    Encode(this->m_nEncodeCode, (unsigned __int8 *)&pBuffer->m_buffer[2], pBuffer->m_dwSize - 2);
    CIOSocket::Write(this, pBuffer);
  }
}

//----- (004948C0) --------------------------------------------------------
void CSocket::Write(CSocket *this, enum S2C_PROTOCOL nType, const char *formal, ...)
{
  CIOBuffer *pBuffer; // [esp+0h] [ebp-10h]

  pBuffer = CIOBuffer::Alloc();
  pBuffer->m_buffer[2] = nType;
  *(_WORD *)pBuffer->m_buffer = (unsigned __int16)WritePacket(&pBuffer->m_buffer[3], (char *)&formal) - (_WORD)pBuffer;
  pBuffer->m_dwSize = *(unsigned __int16 *)pBuffer->m_buffer;
  CSocket::Send(this, pBuffer);
}

//----- (00494930) --------------------------------------------------------
void __thiscall CSocket::Process(CSocket *this, PACKET *mainpacket)
{
  int v2; // eax
  char *v3; // eax
  char *v4; // eax
  char *v5; // [esp-10h] [ebp-190h]
  int v6; // [esp-Ch] [ebp-18Ch]
  char *v7; // [esp-8h] [ebp-188h]
  char *v8; // [esp-8h] [ebp-188h]
  CPlayer *v9; // [esp-8h] [ebp-188h]
  int v10; // [esp-4h] [ebp-184h]
  int v11; // [esp-4h] [ebp-184h]
  int v12; // [esp-4h] [ebp-184h]
  int v13; // [esp-4h] [ebp-184h]
  int v14; // [esp-4h] [ebp-184h]
  int v15; // [esp-4h] [ebp-184h]
  char byCRCAckMsg[52]; // [esp+Ch] [ebp-174h] BYREF
  __int16 v18; // [esp+41h] [ebp-13Fh]
  char v19; // [esp+43h] [ebp-13Dh]
  int dwRet___; // [esp+44h] [ebp-13Ch]
  char byGuidAckMsg[20]; // [esp+48h] [ebp-138h] BYREF
  int dwRet__; // [esp+5Ch] [ebp-124h]
  int PID; // [esp+60h] [ebp-120h] BYREF
  int nGID_; // [esp+64h] [ebp-11Ch] BYREF
  int nPID_; // [esp+68h] [ebp-118h] BYREF
  unsigned __int8 bySvrId; // [esp+6Fh] [ebp-111h] BYREF
  char *szNewName; // [esp+70h] [ebp-110h] BYREF
  char *szName_; // [esp+74h] [ebp-10Ch] BYREF
  int nPID; // [esp+78h] [ebp-108h] BYREF
  unsigned __int8 byWis; // [esp+7Fh] [ebp-101h] BYREF
  unsigned __int8 byJob; // [esp+80h] [ebp-100h] BYREF
  unsigned __int8 byDex; // [esp+81h] [ebp-FFh] BYREF
  unsigned __int8 byHair; // [esp+82h] [ebp-FEh] BYREF
  unsigned __int8 byInt; // [esp+83h] [ebp-FDh] BYREF
  const char *szName; // [esp+84h] [ebp-FCh] BYREF
  unsigned __int8 byHth; // [esp+89h] [ebp-F7h] BYREF
  unsigned __int8 byFace; // [esp+8Ah] [ebp-F6h] BYREF
  unsigned __int8 byStr; // [esp+8Bh] [ebp-F5h] BYREF
  _BYTE *szPWD; // [esp+8Ch] [ebp-F4h] BYREF
  char *szID; // [esp+90h] [ebp-F0h] BYREF
  char byGuidReqMsg[20]; // [esp+94h] [ebp-ECh] BYREF
  int dwRet_; // [esp+A8h] [ebp-D8h]
  int resProtocolTestSvr; // [esp+ACh] [ebp-D4h]
  char temp; // [esp+B3h] [ebp-CDh] BYREF
  int resProtocolTestCli; // [esp+B4h] [ebp-CCh] BYREF
  int nCode; // [esp+B8h] [ebp-C8h]
  int dwTick_; // [esp+BCh] [ebp-C4h] BYREF
  _BYTE byCRCReqMsg[157]; // [esp+C0h] [ebp-C0h] BYREF
  __int16 v49; // [esp+15Dh] [ebp-23h]
  char v50; // [esp+15Fh] [ebp-21h]
  int v51; // [esp+160h] [ebp-20h]
  int dwRet; // [esp+164h] [ebp-1Ch]
  unsigned int dwCurTick; // [esp+168h] [ebp-18h]
  int dwTick; // [esp+16Ch] [ebp-14h] BYREF
  int nDiff; // [esp+170h] [ebp-10h]
  char *packet; // [esp+174h] [ebp-Ch]
  char *end; // [esp+178h] [ebp-8h]
  enum C2S_PROTOCOL nType; // [esp+17Ch] [ebp-4h]

  v51 = dword_4D9830;
  packet = mainpacket->data;
  end = (char *)mainpacket + mainpacket->wSize;
  nType = mainpacket->byType;
  if ( nType >= C2S_START )
  {
    if ( this->m_pPlayer )
    {
      CPlayer::Process(this->m_pPlayer, nType, packet, (int)end);
    }
    else
    {
LABEL_83:
      if ( !CSocket::IsSBit(this, 6) )
      {
        v15 = CSocket::Id(this);
        v9 = this->m_pPlayer;
        v6 = this->m_nPort;
        v5 = inet_ntoa(this->m_addr);
        LOG_NORMAL(
          "Invalid state at CSocket::Process() Type(%d) UID(%d) Bit(%x) Addr(%s) Port(%d) Player(%p) SID(%x)",
          nType,
          this->m_nUID,
          this->m_bit,
          v5,
          v6,
          v9,
          v15);
      }
    }
  }
  else
  {
    switch ( nType )
    {
      case C2S_RESTOREPLAYER:
        if ( (this->m_bit & 0x4E) != 2 )
          goto LABEL_83;
        ScanPacket(packet, end, "d", &PID);
        CDBSocket::Write(S2D_RESTOREPLAYER, "ddd", this->m_nId, this->m_nUID, PID);
        return;
      case C2S_ACKGUID:
        if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
        {
          byGuidAckMsg[0] = 0;
          *(_DWORD *)&byGuidAckMsg[1] = 0;
          *(_DWORD *)&byGuidAckMsg[5] = 0;
          *(_DWORD *)&byGuidAckMsg[9] = 0;
          *(_DWORD *)&byGuidAckMsg[13] = 0;
          *(_WORD *)&byGuidAckMsg[17] = 0;
          byGuidAckMsg[19] = 0;
          ScanPacket(packet, end, "m", byGuidAckMsg, 20);
          dwRet__ = AntiCpSvr_AnalyzeGuidAckMsg(byGuidAckMsg, this->m_byHSCliInfo, &this->m_pulHSEntry);
          if ( dwRet__ )
          {
            if ( (dword_4E1174[0] & 2) == 0 )
            {
              v13 = dwRet__;
              v4 = inet_ntoa(this->m_addr);
              LOG_ERR(
                "_AntiCpSvr_AnalyzeGuidAckMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                this->m_nUID,
                v4,
                v13);
              CSocket::Write(this, S2C_CLOSE, "b", 1);
              CSocket::Logout(this, 1);
            }
          }
        }
        return;
      case C2S_LOGIN:
        if ( (this->m_bit & 0x43) != 0 )
          goto LABEL_83;
        if ( (dword_4E1174[0] & 8) != 0 )
        {
          ScanPacket(packet, end, "ss", &szID, 17, &szPWD, 9);
          if ( !IsValidNMID(szID) )
          {
LABEL_44:
            CSocket::Write(this, S2C_ANS_LOGIN, "b", 2);
            return;
          }
          if ( !*szPWD )
          {
            CSocket::Write(this, S2C_ANS_LOGIN, "b", 3);
            return;
          }
        }
        else
        {
          ScanPacket(packet, end, "ss", &szID, 17, &szPWD, 17);
          if ( !IsValidAdminName(szID) )
            goto LABEL_44;
        }
        CAuthSocket::Write(S2A_LOGIN, "dssdw", this->m_nId, szID, szPWD, this->m_addr.S_un.S_addr, this->m_nPort);
        BitSet((volatile signed __int32 *)&this->m_bit, 0);
        break;
      case C2S_ACKCRC:
        if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
        {
          byCRCAckMsg[0] = 0;
          memset(&byCRCAckMsg[1], 0, 52u);
          v18 = 0;
          v19 = 0;
          ScanPacket(packet, end, "m", byCRCAckMsg, 56);
          this->m_bHSIsWaitAck = 0;
          dwRet___ = AntiCpSvr_AnalyzeAckMsg(this->m_pulHSEntry, byCRCAckMsg, this->m_byHSCliInfo);
          if ( !dwRet___ || (dword_4E1174[0] & 2) != 0 )
          {
            if ( this->m_bHSIsFirstCheck )
              this->m_bHSIsFirstCheck = 0;
          }
          else
          {
            v14 = dwRet___;
            v8 = inet_ntoa(this->m_addr);
            LOG_ERR("_AntiCpSvr_AnalyzeAckMsg is failed. UID: (%d) IP(%s) ERROR TYPE (%d)", this->m_nUID, v8, v14);
            CSocket::Write(this, S2C_CLOSE, "b", 1);
            CSocket::Logout(this, 1);
          }
        }
        return;
      case C2S_NEWPLAYER:
        if ( (this->m_bit & 0x4E) != 2 )
          goto LABEL_83;
        packet = ScanPacket(packet, end, "s", &szName, 15);
        if ( IsValidName(szName) )
        {
          ScanPacket(packet, end, "bbbbbbbb", &byJob, &byStr, &byHth, &byInt, &byWis, &byDex, &byFace, &byHair);
          CDBSocket::Write(
            S2D_NEWPLAYER,
            "dsdbbbbbbbb",
            this->m_nId,
            szName,
            this->m_nUID,
            byJob,
            byStr,
            byHth,
            byInt,
            byWis,
            byDex,
            byFace,
            byHair);
        }
        else
        {
          CSocket::Write(this, S2C_MESSAGE, "b", 4);
        }
        return;
      case C2S_ALIVE:
        InterlockedDecrement(&this->m_nNoReplyCnt);
        ScanPacket(packet, end, "d", &dwTick);
        nDiff = dwTick - GetTickCount() - this->m_dwTick;
        if ( nDiff <= 10000 )
        {
          if ( nDiff < -10000 )
          {
            if ( nDiff < -30000 )
            {
              v10 = CSocket::Id(this);
              LOG_NORMAL("[SpeedHack] UID(%d) Diff(%d) SID(%x)", this->m_nUID, nDiff, v10);
            }
            this->m_dwTick += nDiff + 10000;
          }
        }
        else if ( nDiff <= 30000 )
        {
          this->m_dwTick += 1000;
        }
        else
        {
          v2 = CSocket::Id(this);
          LOG_NORMAL("[SpeedHack] UID(%d) Diff(%d) SID(%x)", this->m_nUID, nDiff, v2);
          CSocket::Write(this, S2C_CLOSE, "b", 4);
          CSocket::Logout(this, 4);
        }
        if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
        {
          dwCurTick = GetTickCount();
          if ( this->m_bHSIsWaitAck && this->m_dwHSTick - 115000 < dwCurTick )
          {
            CSocket::Write(this, S2C_CLOSE, "b", 1);
            CSocket::Logout(this, 1);
          }
          if ( this->m_dwHSTick < dwCurTick )
          {
            byCRCReqMsg[0] = 0;
            memset(&byCRCReqMsg[1], 0, 156u);
            v49 = 0;
            v50 = 0;
            if ( this->m_bHSIsFirstCheck )
              dwRet = AntiCpSvr_MakeReqMsg(this->m_pulHSEntry, byCRCReqMsg, this->m_byHSCliInfo, 7);
            else
              dwRet = AntiCpSvr_MakeReqMsg(this->m_pulHSEntry, byCRCReqMsg, this->m_byHSCliInfo, 1);
            if ( !dwRet || (dword_4E1174[0] & 2) != 0 )
            {
              CSocket::Write(this, S2C_REQCRC, "m", byCRCReqMsg, 160);
              this->m_dwHSTick = dwCurTick + 120000;
              this->m_bHSIsWaitAck = 1;
            }
            else
            {
              v11 = dwRet;
              v7 = inet_ntoa(this->m_addr);
              LOG_ERR("_AntiCpSvr_MakeReqMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)", this->m_nUID, v7, v11);
              CSocket::Write(this, S2C_CLOSE, "b", 1);
              CSocket::Logout(this, 1);
            }
          }
        }
        return;
      case C2S_COPYPLAYER:
        if ( (this->m_bit & 0x4E) != 2 )
          goto LABEL_83;
        if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
        {
          ScanPacket(packet, end, "bss", &bySvrId, &szName_, 17, &szNewName, 15);
          if ( IsValidAdminName(szName_) && IsValidName(szNewName) )
          {
            BitSet((volatile signed __int32 *)&this->m_bit, 2u);
            CDBSocket::Write(S2D_CHECKCOPY, "dbdss", this->m_nId, bySvrId, this->m_nUID, szName_, szNewName);
          }
          else
          {
            CSocket::Write(this, S2C_MESSAGE, "b", 4);
          }
        }
        return;
      case C2S_DELPLAYER:
        if ( (this->m_bit & 0x4E) != 2 )
          goto LABEL_83;
        ScanPacket(packet, end, "d", &nPID);
        if ( nPID )
          CDBSocket::Write(S2D_DELPLAYER, "ddd", nPID, this->m_nUID, this->m_nId);
        return;
      case C2S_CONNECT:
        if ( (this->m_bit & 0x43) != 0 )
          goto LABEL_83;
        ScanPacket(packet, end, "d", &dwTick_);
        this->m_dwTick = dwTick_ - GetTickCount();
        nCode = Random(1, 63);
        this->nProtocolTestValue = Random(100000, 2000000000);
        if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0 )
        {
          CSocket::Write(
            this,
            S2C_CODE,
            "dbddddbbbmm",
            this->nProtocolTestValue,
            nCode,
            dword_4E117C,
            dword_4E2148,
            *(_DWORD *)dword_4E1174,
            dword_4E1178,
            dword_4E1188,
            dword_4E1184,
            stru_4E35B4.m_nRef,
            &unk_4E1368,
            550,
            &unk_4E158E,
            550);
          this->bIsGetHSCryptKey = 1;
        }
        else
        {
          CSocket::Write(
            this,
            S2C_CODE,
            "dbddddbbb",
            this->nProtocolTestValue,
            nCode,
            dword_4E117C,
            dword_4E2148,
            *(_DWORD *)dword_4E1174,
            dword_4E1178,
            dword_4E1188,
            dword_4E1184,
            stru_4E35B4.m_nRef);
        }
        this->m_nDecodeCode = nCode;
        this->m_nEncodeCode = nCode;
        return;
      case C2S_ANS_CODE:
        if ( (this->m_bit & 0x43) != 0 )
          goto LABEL_83;
        if ( *packet )
        {
          resProtocolTestSvr = this->nProtocolTestValue % (int)uValue + 9052;
          ScanPacket(packet, end, "bd", &temp, &resProtocolTestCli);
          if ( resProtocolTestCli >= 9052 && resProtocolTestSvr == resProtocolTestCli )
          {
            if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
            {
              byGuidReqMsg[0] = 0;
              *(_DWORD *)&byGuidReqMsg[1] = 0;
              *(_DWORD *)&byGuidReqMsg[5] = 0;
              *(_DWORD *)&byGuidReqMsg[9] = 0;
              *(_DWORD *)&byGuidReqMsg[13] = 0;
              *(_WORD *)&byGuidReqMsg[17] = 0;
              byGuidReqMsg[19] = 0;
              dwRet_ = AntiCpSvr_MakeGuidReqMsg(byGuidReqMsg, this->m_byHSCliInfo);
              if ( !dwRet_ || (dword_4E1174[0] & 2) != 0 )
              {
                CSocket::Write(this, S2C_REQGUID, "m", byGuidReqMsg, 20);
              }
              else
              {
                v12 = dwRet_;
                v3 = inet_ntoa(this->m_addr);
                LOG_ERR(
                  "_AntiCpSvr_MakeGuidReqMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                  this->m_nUID,
                  v3,
                  v12);
                CSocket::Write(this, S2C_CLOSE, "b", 1);
                CSocket::Logout(this, 1);
              }
            }
          }
          else
          {
            CSocket::Write(this, S2C_CLOSE, "b", 10);
            CSocket::Logout(this, 10);
          }
        }
        else
        {
          CIOSocket::WriteCallback(this);
        }
        return;
      case C2S_LOADPLAYER:
        if ( (this->m_bit & 0x4E) != 2 )
          goto LABEL_83;
        ScanPacket(packet, end, "dd", &nPID_, &nGID_);
        CSocket::LoadPlayer((int)this, nPID_, nGID_);
        return;
      default:
        goto LABEL_83;
    }
  }
}
// 4B4008: using guessed type int (__stdcall *AntiCpSvr_MakeGuidReqMsg)(_DWORD, _DWORD);
// 4B400C: using guessed type int (__stdcall *AntiCpSvr_MakeReqMsg)(_DWORD, _DWORD, _DWORD, _DWORD);
// 4B4018: using guessed type int (__stdcall *AntiCpSvr_AnalyzeAckMsg)(_DWORD, _DWORD, _DWORD);
// 4B401C: using guessed type int (__stdcall *AntiCpSvr_AnalyzeGuidAckMsg)(_DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E1178: using guessed type int dword_4E1178;
// 4E117C: using guessed type int dword_4E117C;
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;

//----- (00495770) --------------------------------------------------------
void __thiscall CSocket::OnLogin(CSocket *this, int nFlag, int nUID, int nType, int nExpTime, int nCID, const char *szBillingInfo)
{
  int n_nID; // eax
  u_long n_UserIP; // [esp-1Ch] [ebp-24h]
  int n_UserPort; // [esp-18h] [ebp-20h]

  if ( nFlag == 1 )
  {
    CScreen::Lock((CScreen *)this);
    if ( CSocket::IsSBit(this, 6) )
    {
      n_UserPort = this->m_nPort;
      n_UserIP = this->m_addr.S_un.S_addr;
      n_nID = CSocket::Id(this);
      CAuthSocket::Write(S2A_LOGOUT, "dddwbdddb", n_nID, nUID, n_UserIP, n_UserPort, nType, 0, 0, 0, 7);
    }
    else
    {
      if ( this->m_nUID )                       // Force crash to Debug mode MainSvr if UID = 0 lol -HighGamer
        EBREAK();
      this->m_nUID = nUID;
      this->m_nAuthType = nType | (nCID != 0 ? 512 : 256);
      this->m_nExpTime = nExpTime;
      time(&this->m_timeLogin);
      this->m_timePrev = this->m_timeLogin;
      memcpy(this->m_szBillingInfo, szBillingInfo, 0xAu);
      CDBSocket::Write(S2D_LOGIN, "dd", this->m_nId, nUID);
    }
    CScreen::Unlock((CScreen *)this);
  }
  else if ( nFlag > 1 && nFlag <= 9 )
  {
    CSocket::Write(this, S2C_ANS_LOGIN, "b", nFlag);
    BitReset((volatile signed __int32 *)&this->m_bit, 0);
  }
  else
  {
    CSocket::Write(this, S2C_ANS_LOGIN, "b", 0);
    BitReset((volatile signed __int32 *)&this->m_bit, 0);
  }
}

//----- (004958F0) --------------------------------------------------------
void __thiscall CSocket::OnLogin(CSocket *this, char *packet, int nCount, int nSize)
{
  BitSet((volatile signed __int32 *)&this->m_bit, 1u);
  if ( stru_4E35B4.m_nRef == 1 && (dword_4E1174[0] & 4) != 0 )
    CSocket::Write(this, S2C_BILLINGINFO, "bd", this->m_nAuthType & 0x30, this->m_nExpTime);
  CSocket::Write(this, S2C_PLAYERINFO, "bdbm", this->m_nAuthType, this->m_nExpTime, nCount, packet, nSize);
}

//----- (00495980) --------------------------------------------------------
void __thiscall CSocket::OnUserCount(CSocket *this, int nSvrId, int nUser, int nMaxUser)
{
  CSocket::Write(this, S2C_MESSAGEV, "bbww", 15, nSvrId, nUser, nMaxUser);
}

//----- (004959B0) --------------------------------------------------------
void __thiscall CSocket::OnUserAllCount(CSocket *this, int nAllUser, int nMaxAllUser, int nAllAccount)
{
  CSocket::Write(this, S2C_MESSAGEV, "bwwd", 16, nAllUser, nMaxAllUser, nAllAccount);
}

//----- (004959E0) --------------------------------------------------------
void __thiscall CSocket::OnNewPlayer(CSocket *this, int nAns, char *packet)
{
  int nNewItemId; // [esp-4h] [ebp-14h]
  CItem *pItem; // [esp+4h] [ebp-Ch]
  unsigned __int8 byJob; // [esp+Bh] [ebp-5h] BYREF
  int nPID; // [esp+Ch] [ebp-4h] BYREF

  if ( nAns == 1 )
  {
    ReadPacket(packet, "db", &nPID, &byJob);
    if ( nPID )
    {
      pItem = CItem::CreateItem(dword_4D6AC4[byJob], 0, 1, -1);
      if ( pItem )
      {
        nNewItemId = CItem::NewIID();
        pItem->Insert(pItem, nPID, nNewItemId);
      }
    }
    CDBSocket::Write(S2D_LOGIN, "dd", this->m_nId, this->m_nUID);
  }
  else
  {
    CSocket::Write(this, S2C_ANS_NEWPLAYER, "b", nAns);
  }
}

//----- (00495A90) --------------------------------------------------------
void __thiscall CSocket::OnDelPlayer(CSocket *this, int nAns)
{
  switch ( nAns )
  {
    case 1:
      goto LABEL_6;
    case 2:
      CAuthSocket::Write(S2A_EVENT, "bddbd", 5, 0, this->m_nUID, 4, 0);
LABEL_6:
      CDBSocket::Write(S2D_LOGIN, "dd", this->m_nId, this->m_nUID);
      return;
    case 3:
      CSocket::Write(this, S2C_MESSAGE, "b", 103);
      break;
  }
}

//----- (00495B20) --------------------------------------------------------
void __thiscall CSocket::Logout(CSocket *this, int nLogoutType)
{
  time_t v2; // eax
  CPlayer *pPlayer; // [esp+4h] [ebp-4h]

  CScreen::Lock((CScreen *)this);
  if ( this->m_nUID )
  {
    v2 = time(0);
    CAuthSocket::Write(
      S2A_LOGOUT,
      "dddwbdddb",
      this->m_nId,
      this->m_nUID,
      this->m_addr.S_un.S_addr,
      this->m_nPort,
      this->m_nAuthType,
      this->m_nCID,
      this->m_timeLogin,
      v2,
      nLogoutType);
    this->m_nUID = 0;
  }
  BitSet((volatile signed __int32 *)&this->m_bit, 6u);
  pPlayer = this->m_pPlayer;
  if ( pPlayer )
  {
    CIOObject::AddRef(pPlayer, &pPlayer->m_nFindRef);
    CScreen::Unlock((CScreen *)this);
    CBase::Delete(pPlayer);
    CIOObject::Release(pPlayer, &pPlayer->m_nFindRef);
  }
  else
  {
    CScreen::Unlock((CScreen *)this);
  }
}

//----- (00495C20) --------------------------------------------------------
void __thiscall CSocket::OnKickOut(CIOCriticalSection *a1)
{
  CSocket::Write((int)a1, 45, "b", 3);
  CSocket::Logout(a1, 3);
}

//----- (00495C50) --------------------------------------------------------
void __thiscall CSocket::OnBlockAccount(CSocket *this, int a2, int a3, const char *a4)
{
  char v5[132]; // [esp+4h] [ebp-88h] BYREF
  int v6; // [esp+88h] [ebp-4h]

  v6 = dword_4D9830;
  if ( a2 == 1 )
  {
    sprintf(v5, "[Account Block] ID(%s), UID(%d)", a4, a3);
    CSocket::Write(this, S2C_NOTICE, "s", v5);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00495CC0) --------------------------------------------------------
void __thiscall CSocket::OnFreeAccount(CSocket *this, int a2, int a3, const char *a4)
{
  char v5[132]; // [esp+4h] [ebp-88h] BYREF
  int v6; // [esp+88h] [ebp-4h]

  v6 = dword_4D9830;
  if ( a2 == 1 )
  {
    sprintf(v5, "[Account Free] ID(%s), UID(%d)", a4, a3);
    CSocket::Write(this, S2C_NOTICE, "s", v5);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00495D30) --------------------------------------------------------
void __thiscall CSocket::LoadPlayer(CSocket *this, int a2, int a3)
{
  CPlayer *v3; // [esp+0h] [ebp-14h]
  CPlayer *v5; // [esp+8h] [ebp-Ch]
  bool v6; // [esp+Ch] [ebp-8h]
  CPlayer *item; // [esp+10h] [ebp-4h]

  item = this->m_pPlayer;
  CScreen::Lock((CScreen *)this);
  v5 = (CPlayer *)operator new(0x690u);
  if ( v5 )
    v3 = CPlayer::CPlayer(v5, this, this->m_nUID, a2);
  else
    v3 = 0;
  this->m_pPlayer = v3;
  CIOObject::AddRef(this->m_pPlayer, &this->m_pPlayer->m_nSocketRef);
  CScreen::Unlock((CScreen *)this);
  if ( item )
  {
    CBase::Delete(item);
    CIOObject::Release(item, &item->m_nSocketRef);
  }
  BitSet((volatile signed __int32 *)&this->m_bit, 3u);
  v6 = 0;
  if ( a3 )
  {
    if ( CGuild::IsLoad(a3) )
      a3 = 0;
    else
      v6 = CAlliance::IsLoad(a3) == 0;
  }
  CDBSocket::Write(S2D_LOADPLAYER, "ddddb", a2, a3, this->m_nUID, this->m_nId, v6);
}

//----- (00495E50) --------------------------------------------------------
void __thiscall CSocket::OnLoadPlayer(void *this, int a2, int a3)
{
  CIOObject *v4; // [esp+4h] [ebp-4h]

  if ( a2 == 1 )
  {
    CScreen::Lock((CScreen *)this);
    v4 = (CIOObject *)*((_DWORD *)this + 30);
    if ( v4 )
    {
      CIOObject::AddRef(v4, (volatile int *)&v4[22]);
      CScreen::Unlock((CScreen *)this);
      if ( CPlayer::OnLoadPlayer(v4, (_BYTE *)a3) )
      {
        BitSet((volatile signed __int32 *)this + 27, 4u);
        if ( (dword_4E1178 & 0x100) != 0 )
          CAuthSocket::Write(S2A_EVENT_LOGIN, "dd", v4[28].__vftable, v4[28].m_nRef);
      }
      else
      {
        BitReset((volatile signed __int32 *)this + 27, 3u);
        CSocket::Write((CSocket *)this, S2C_MESSAGE, "b", 7);
      }
      CIOObject::Release(v4, (volatile int *)&v4[22]);
    }
    else
    {
      CScreen::Unlock((CScreen *)this);
    }
  }
  else
  {
    BitReset((volatile signed __int32 *)this + 27, 3u);
    if ( a2 == 2 )
      CSocket::Write((CSocket *)this, S2C_MESSAGE, "b", 7);
    else
      CSocket::Write((CSocket *)this, S2C_MESSAGE, "b", 8);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00495F90) --------------------------------------------------------
void __thiscall CSocket::OnCheckCopy(CIOCriticalSection *this, int a2, int a3, int a4, int a5)
{
  unsigned int v6; // [esp+4h] [ebp-4h]

  if ( a2 == 2 )
  {
    CScreen::Lock((CScreen *)this);
    if ( CSocket::IsSBit((CSocket *)this, 6) )
    {
      CScreen::Unlock((CScreen *)this);
    }
    else
    {
      v6 = this[4].m_dwEIP[0];
      CScreen::Unlock((CScreen *)this);
      CAuthSocket::Write(S2A_REQUESTCOPY, "dbdss", this[8].m_dwEIP[0], a3, v6, a4, a5);
    }
  }
  else
  {
    BitReset((volatile signed __int32 *)&this[3].m_critical_section.OwningThread, 2u);
    CSocket::Write((CSocket *)this, S2C_ANS_COPYPLAYER, "b", a2);
  }
}

//----- (00496030) --------------------------------------------------------
void __thiscall CSocket::OnRequestCopy(int this, int a2, void *a3, int a4)
{
  int v4; // eax
  int i; // [esp+4h] [ebp-14h]
  char *v7; // [esp+8h] [ebp-10h]
  unsigned __int8 v8; // [esp+12h] [ebp-6h] BYREF
  unsigned __int8 v9; // [esp+13h] [ebp-5h] BYREF
  int v10; // [esp+14h] [ebp-4h]
  char *v11; // [esp+24h] [ebp+Ch]

  if ( a2 == 1 )
  {
    CScreen::Lock((CScreen *)this);
    if ( CSocket::IsSBit((CSocket *)this, 6) )
    {
      CScreen::Unlock((CScreen *)this);
    }
    else
    {
      v10 = *(_DWORD *)(this + 152);
      CScreen::Unlock((CScreen *)this);
      v11 = (char *)ReadPacket((char *)a3, "b", &v8);
      v7 = (char *)ReadPacket(&v11[v8], "b", &v9);
      for ( i = 0; i < v9; ++i )
      {
        v4 = CItem::NewIID();
        PutNumeric<int>(v7, v4);
        v7 += 26;
      }
      CDBSocket::Write(S2D_COPYPLAYER, "ddm", *(_DWORD *)(this + 280), v10, v11, a4 - (_DWORD)v11);
    }
  }
  else
  {
    BitReset((volatile signed __int32 *)(this + 108), 2u);
    CSocket::Write((CSocket *)this, S2C_ANS_COPYPLAYER, "b", a2);
  }
}

//----- (00496150) --------------------------------------------------------
void __thiscall CSocket::OnCopyPlayer(CIOCriticalSection *a1, int a2)
{
  if ( a2 == 1 )
  {
    CSocket::Write((CSocket *)a1, S2C_CLOSE, "b", 8);
    CSocket::Logout((CSocket *)a1, 8);
  }
  else
  {
    BitReset((volatile signed __int32 *)&a1[3].m_critical_section.OwningThread, 2u);
    CSocket::Write((CSocket *)a1, S2C_ANS_COPYPLAYER, "b", a2);
  }
}

//----- (004961B0) --------------------------------------------------------
void __cdecl CStatus::Update()
{
  int v0; // eax
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax

  CScreen::Lock((CScreen *)dword_4E2EDC);
  CScreen::Empty((CScreen *)dword_4E2EDC);
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Running Thread : %d", dword_4E0FDC);
  v0 = CIOSocket::PendingWrite((CSocket *)dword_4DA7B8);
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Pending DB Output : %d", v0);
  v1 = CIOSocket::PendingWrite((CSocket *)dword_4DA6F0);
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Pending Auth Output : %d", v1);
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " ====================");
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Change of Currency : %d", dword_4E2014);
  v2 = CServer::MaxSize();
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Max. Connection : %d", v2);
  v3 = CServer::Size();
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Cur. Connection : %d", v3);
  v4 = CMonster::Size();
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " Monster : %d", v4);
  v5 = CNPC::Size();
  CScreen::Add((CScreen *)dword_4E2EDC, 0, " NPC : %d", v5);
  CScreen::Unlock((CScreen *)dword_4E2EDC);
  InvalidateRect(hWnd, 0, 1);
}
// 4DA6F0: using guessed type int dword_4DA6F0[4];
// 4DA7B8: using guessed type int dword_4DA7B8[4];
// 4E2EDC: using guessed type int dword_4E2EDC[13];

//----- (004962E0) --------------------------------------------------------
int __thiscall CIOSocket::PendingWrite(CSocket *this)
{
  return this->m_nPendingWrite;
}

//----- (00496300) --------------------------------------------------------
void *__thiscall CTables::CTables_0(void *this)
{
  int v2; // [esp+4h] [ebp-18h]
  int l; // [esp+8h] [ebp-14h]
  int k; // [esp+Ch] [ebp-10h]
  int v5; // [esp+10h] [ebp-Ch]
  int j; // [esp+14h] [ebp-8h]
  int i; // [esp+18h] [ebp-4h]

  dword_4E35B0 = 6;
  dword_4E35AC = 11;
  dword_4E35A8 = 6;
  for ( i = 0; i < 10; ++i )
  {
    for ( j = 0; j < 21; ++j )
    {
      v5 = dword_4D8528[21 * i + j];
      switch ( v5 )
      {
        case 100:
          dword_4E3260[21 * i + j] = 6;
          break;
        case 50:
          dword_4E3260[21 * i + j] = 5;
          break;
        case 25:
          dword_4E3260[21 * i + j] = 4;
          break;
        default:
          dword_4E3260[21 * i + j] = 3;
          break;
      }
    }
  }
  for ( k = 0; k < 10; ++k )
  {
    for ( l = 0; l < 21; ++l )
    {
      v2 = dword_4D8870[21 * k + l];
      switch ( v2 )
      {
        case 100:
          dword_4E2F18[21 * k + l] = 0;
          break;
        case 50:
          dword_4E2F18[21 * k + l] = 1;
          break;
        case 25:
          dword_4E2F18[21 * k + l] = 2;
          break;
        default:
          dword_4E2F18[21 * k + l] = 3;
          break;
      }
    }
  }
  return this;
}
// 4E35A8: using guessed type int dword_4E35A8;
// 4E35AC: using guessed type int dword_4E35AC;
// 4E35B0: using guessed type int dword_4E35B0;

//----- (004964E0) --------------------------------------------------------
void *__thiscall CTile::~CTile(void *this)
{
  void *result; // eax
  CItem *v2; // [esp+4h] [ebp-8h]
  CItem *item; // [esp+8h] [ebp-4h]

  result = this;
  for ( item = *(CItem **)this; item; item = v2 )
  {
    v2 = (CItem *)item->m_pNext;
    item->m_pNext = (CBase *)-6;
    result = (void *)CBase::Delete(item);
  }
  return result;
}

//----- (00496520) --------------------------------------------------------
int __thiscall CTile::AddBase(CTile *this, CBase *pBase)
{
  int result; // eax

  if ( pBase->m_pNext != (CBase *)-6 )
    EBREAK();
  result = (int)this->m_pHead;
  pBase->m_pNext = this->m_pHead;
  this->m_pHead = pBase;
  return result;
}

//----- (00496550) --------------------------------------------------------
int __thiscall CTile::RemoveBase(CTile *this, CBase *pBase)
{
  CBase *p; // [esp+8h] [ebp-4h]

  while ( 1 )
  {
    p = this->m_pHead;
    if ( this->m_pHead == pBase )
    {
      this->m_pHead = CBase::Next(pBase);
      pBase->m_pNext = (CBase *)-6;
      return 1;
    }
    if ( !p )
      break;
    this = (CTile *)&p->m_pNext;
  }
  return 0;
}

//----- (004965B0) --------------------------------------------------------
CItem *__thiscall CTile::GetItem(CTile *this, int nId)
{
  CBase *pBase; // [esp+8h] [ebp-4h]

  for ( pBase = this->m_pHead; pBase; pBase = CBase::Next(pBase) )
  {
    if ( pBase->m_pNext == (CBase *)-6 )
    {
      this->m_pHead = 0;
      ELOG("CTile::GetItem %p %p\n", (char)pBase, pBase->__vftable);
      EBREAK();
      return 0;
    }
    if ( pBase->IsItem(pBase) && nId == CBase::Id(pBase) )
      return (CItem *)pBase;
  }
  return 0;
}

//----- (00496640) --------------------------------------------------------
CTrade *__thiscall CTrade::CTrade(CTrade *this, int a2, int a3)
{
  CBase::CBase();
  this->__vftable = (CTrade_vtbl *)&off_4C0E08;
  BitSet((volatile signed __int32 *)&this->m_bit, 1u);
  this->m_pCaller = (CPlayer *)a2;
  this->m_pAcc = (CPlayer *)a3;
  return this;
}
// 4C0E08: using guessed type int (__stdcall *off_4C0E08)(int);

//----- (00496690) --------------------------------------------------------
void *__thiscall sub_496690(void *this, char a2)
{
  CTables::CTables((CTables **)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004966C0) --------------------------------------------------------
void __thiscall CTables::CTables(CTables **this)
{
  *this = (CTables *)&off_4C0E08;
  CIOObject::Release((CIOObject *)this[8]);
  CIOObject::Release((CIOObject *)this[9]);
  CBase::~CBase((CBase *)this);
}
// 4C0E08: using guessed type int (__stdcall *off_4C0E08)(int);

//----- (00496700) --------------------------------------------------------
void __cdecl CTrade::CreateTrade(CPlayer *pCaller, struct CPlayer *pAcc)
{
  int v2; // eax
  int v3; // [esp-4h] [ebp-10h]
  CTrade *pTrade; // [esp+0h] [ebp-Ch]
  CMemory **v5; // [esp+4h] [ebp-8h]

  BothLock(pCaller, pAcc);
  if ( !CBase::IsDeleted(pCaller) && !CBase::IsDeleted(pAcc) )
  {
    if ( Distance(&pCaller->m_ptPixel, &pAcc->m_ptPixel) <= 64 )
    {
      if ( pCaller->m_pTrade )
      {
        CPlayer::Write(pAcc, S2C_MESSAGE, "b", 19);
      }
      else if ( pAcc->m_pTrade )
      {
        CPlayer::Write(pCaller, S2C_MESSAGE, "b", 19);
      }
      else
      {
        CIOObject::AddRef((int)pCaller);
        CIOObject::AddRef((int)pAcc);
        v5 = operator new(0x28u);
        if ( v5 )
          pTrade = CTrade::CTrade((CTrade *)v5, (int)pCaller, (int)pAcc);
        else
          pTrade = 0;
        pAcc->m_pTrade = pTrade;
        pCaller->m_pTrade = pTrade;
        v2 = CBase::Id(pAcc);
        CPlayer::Write(pCaller, S2C_OPENTRADE, "bd", 1, v2);
        v3 = CBase::Id(pCaller);
        CPlayer::Write(pAcc, S2C_OPENTRADE, "bd", 1, v3);
      }
    }
    else
    {
      CPlayer::Write(pCaller, S2C_MESSAGE, "b", 24);
      CPlayer::Write(pAcc, S2C_MESSAGE, "b", 24);
    }
  }
  BothUnlock(pCaller, pAcc);
}

//----- (00496880) --------------------------------------------------------
void __thiscall CTrade::OnDelete(CTrade *this)
{
  BothLock(this->m_pCaller, this->m_pAcc);
  if ( !BitSet((volatile signed __int32 *)&this->m_bit, 4u) )
  {
    CPlayer::_EndTrade(this->m_pCaller, 2);
    CPlayer::_EndTrade(this->m_pAcc, 2);
  }
  BothUnlock(this->m_pCaller, this->m_pAcc);
  sub_402180((int)this);
}

//----- (004968F0) --------------------------------------------------------
void __thiscall CTrade::Cancel(CIOCriticalSection **this, int a2)
{
  BothLock((CPlayer *)this[8], (CPlayer *)this[9]);
  if ( BitSet((volatile signed __int32 *)this + 5, 2u) )
  {
    BothUnlock((CPlayer *)this[8], (CPlayer *)this[9]);
  }
  else
  {
    if ( !BitSet((volatile signed __int32 *)this + 5, 4u) )
    {
      CPlayer::_EndTrade((CPlayer *)this[8], 3);
      CPlayer::_EndTrade((CPlayer *)this[9], 3);
    }
    BothUnlock((CPlayer *)this[8], (CPlayer *)this[9]);
    CBase::Delete((CBase *)this);
  }
}

//----- (00496990) --------------------------------------------------------
void __thiscall CTrade::TradeAgreed(CTrade *this, CPlayer *pPlayer)
{
  CPlayer *v2; // eax

  BothLock(this->m_pCaller, this->m_pAcc);
  CPlayer::AddEState(pPlayer, 4);
  v2 = CTrade::GetOther(this, pPlayer);
  CPlayer::Write(v2, S2C_MESSAGE, "b", 22);
  if ( CPlayer::IsEState(this->m_pCaller, 4) && CPlayer::IsEState(this->m_pAcc, 4) )
  {
    if ( Distance(&this->m_pCaller->m_ptPixel, &this->m_pAcc->m_ptPixel) <= 64
      && !BitSet((volatile signed __int32 *)&this->m_bit, 4u) )
    {
      ItemLock(this->m_pCaller, this->m_pAcc);
      if ( CPlayer::_CheckTrade(this->m_pCaller) && CPlayer::_CheckTrade(this->m_pAcc) )
      {
        CPlayer::_TradeItem(this->m_pCaller, this->m_pAcc);
        CPlayer::_TradeItem(this->m_pAcc, this->m_pCaller);
        CPlayer::_EndTrade(this->m_pCaller, 1);
        CPlayer::_EndTrade(this->m_pAcc, 1);
      }
      else
      {
        CPlayer::_EndTrade(this->m_pCaller, 2);
        CPlayer::_EndTrade(this->m_pAcc, 2);
      }
      ItemUnlock(this->m_pCaller, this->m_pAcc);
    }
    BothUnlock(this->m_pCaller, this->m_pAcc);
    CBase::Delete(this);
  }
  else
  {
    BothUnlock(this->m_pCaller, this->m_pAcc);
  }
}

//----- (00496B30) --------------------------------------------------------
void __stdcall Encode(char chCodeNum, unsigned __int8 *ptr, int len)
{
  unsigned __int8 *v3; // [esp+0h] [ebp-4h]

  if ( chCodeNum < 0 || chCodeNum >= 64 )
    EBREAK();
  v3 = &ptr[len];
  while ( ptr != v3 )
  {
    *ptr = g_chEncodeCode[256 * chCodeNum + *ptr];
    ++ptr;
  }
}

//----- (00496B90) --------------------------------------------------------
void __stdcall Decode(char chCodeNum, unsigned __int8 *ptr, int len)
{
  unsigned __int8 *v3; // [esp+0h] [ebp-4h]

  if ( chCodeNum >= 64 )
    EBREAK(chCodeNum);
  v3 = &ptr[len];
  while ( ptr != v3 )
  {
    *ptr = g_chDecodeCode[256 * chCodeNum + *ptr];
    ++ptr;
  }
}

//----- (00496BE0) --------------------------------------------------------
time_t __cdecl InitRandom()
{
  unsigned int v0; // eax
  time_t result; // eax
  int i; // [esp+0h] [ebp-4h]
  int j; // [esp+0h] [ebp-4h]

  v0 = time(0);
  srand(v0);
  result = time(0);
  dword_4E36C8[0] = result;
  for ( i = 1; i < 32; ++i )
  {
    dword_4E36C8[i] = 1103515245 * dword_4E36C4[i] + 12345;
    result = i + 1;
  }
  dword_4E36C0 = 2;
  for ( j = 0; j < 310; ++j )
    result = Random();
  return result;
}
// 4E36C4: using guessed type int dword_4E36C4[];

//----- (00496C70) --------------------------------------------------------
int __cdecl Random()
{
  return (unsigned int)_Random() >> 1;
}

//----- (00496C80) --------------------------------------------------------
int __cdecl _Random()
{
  char v0; // al

  v0 = InterlockedIncrement(&dword_4E36C0);
  dword_4E36C8[v0 & 0x1F] += dword_4E36C8[(v0 - 3) & 0x1F];
  return dword_4E36C8[v0 & 0x1F];
}

//----- (00496CD0) --------------------------------------------------------
int __fastcall BitSet(volatile signed __int32 *a1, unsigned int a2)
{
  int result; // eax

  if ( _interlockedbittestandset(a1, a2) )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00496CE0) --------------------------------------------------------
int __fastcall BitReset(volatile signed __int32 *a1, unsigned int a2)
{
  int result; // eax

  if ( _interlockedbittestandreset(a1, a2) )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00496CF0) --------------------------------------------------------
char *__stdcall WritePacket(char *a1, char *a2)
{
  int v2; // ecx
  int result; // [esp+4h] [ebp-14h]
  size_t v5; // [esp+8h] [ebp-10h]
  void *v6; // [esp+Ch] [ebp-Ch]
  char *v7; // [esp+10h] [ebp-8h]
  char *v8; // [esp+14h] [ebp-4h]
  char *a5; // [esp+24h] [ebp+Ch]
  char *a5a; // [esp+24h] [ebp+Ch]

  a5 = a2 + 4;
  v8 = (char *)*((_DWORD *)a5 - 1);
  while ( 1 )
  {
    result = *v8++;
    switch ( result )
    {
      case 0:
        return a1;
      case 66:
      case 98:
        a5 += 4;
        *a1++ = *(a5 - 4);
        break;
      case 73:
        a5 += 8;
        *(_DWORD *)a1 = *((_DWORD *)a5 - 2);
        *((_DWORD *)a1 + 1) = *((_DWORD *)a5 - 1);
        a1 += 8;
        break;
      case 77:
      case 109:
        a5a = a5 + 4;
        v6 = (void *)*((_DWORD *)a5a - 1);
        a5 = a5a + 4;
        v5 = *((_DWORD *)a5 - 1);
        memcpy(a1, v6, v5);
        a1 += v5;
        break;
      case 83:
      case 115:
        a5 += 4;
        v7 = (char *)*((_DWORD *)a5 - 1);
        if ( v7 )
        {
          do
          {
            *a1 = *v7;
            v2 = *a1++;
            ++v7;
          }
          while ( v2 );
        }
        else
        {
          *a1++ = 0;
        }
        break;
      case 87:
      case 119:
        a5 += 4;
        *(_WORD *)a1 = *((_WORD *)a5 - 2);
        a1 += 2;
        break;
      case 100:
        a5 += 4;
        *(_DWORD *)a1 = *((_DWORD *)a5 - 1);
        a1 += 4;
        break;
      default:
        EBREAK();
        break;
    }
  }
}

//----- (00496F10) --------------------------------------------------------
char *WritePacket(char *packet, const char *formal, ...)
{
  return WritePacket(packet, (char *)&formal);
}

//----- (00496F40) --------------------------------------------------------
char *__stdcall ReadPacketV(char *a1, int a2)
{
  _DWORD *v2; // edx
  int v4; // ecx
  int result; // [esp+4h] [ebp-1Ch]
  int v7; // [esp+8h] [ebp-18h]
  char **v8; // [esp+Ch] [ebp-14h]
  size_t v9; // [esp+10h] [ebp-10h]
  void *v10; // [esp+14h] [ebp-Ch]
  char *v11; // [esp+18h] [ebp-8h]
  char *v12; // [esp+1Ch] [ebp-4h]
  int a5; // [esp+2Ch] [ebp+Ch]
  int a5a; // [esp+2Ch] [ebp+Ch]
  int a5b; // [esp+2Ch] [ebp+Ch]

  a5 = a2 + 4;
  v12 = *(char **)(a5 - 4);
  while ( 1 )
  {
    result = *v12++;
    switch ( result )
    {
      case 0:
        return a1;
      case 66:
        a5 += 4;
        **(_DWORD **)(a5 - 4) = *a1++;
        break;
      case 73:
        a5 += 4;
        v2 = *(_DWORD **)(a5 - 4);
        *v2 = *(_DWORD *)a1;
        v2[1] = *((_DWORD *)a1 + 1);
        a1 += 8;
        break;
      case 77:
        a5b = a5 + 4;
        v8 = *(char ***)(a5b - 4);
        a5 = a5b + 4;
        v7 = *(_DWORD *)(a5 - 4);
        *v8 = a1;
        a1 += v7;
        break;
      case 83:
        a5 += 4;
        v11 = *(char **)(a5 - 4);
        do
        {
          *v11 = *a1;
          v4 = *v11++;
          ++a1;
        }
        while ( v4 );
        break;
      case 87:
        a5 += 4;
        **(_DWORD **)(a5 - 4) = *(unsigned __int16 *)a1;
        a1 += 2;
        break;
      case 98:
        a5 += 4;
        **(_BYTE **)(a5 - 4) = *a1++;
        break;
      case 100:
        a5 += 4;
        **(_DWORD **)(a5 - 4) = *(_DWORD *)a1;
        a1 += 4;
        break;
      case 109:
        a5a = a5 + 4;
        v10 = *(void **)(a5a - 4);
        a5 = a5a + 4;
        v9 = *(_DWORD *)(a5 - 4);
        memcpy(v10, a1, v9);
        a1 += v9;
        break;
      case 115:
        a5 += 4;
        **(_DWORD **)(a5 - 4) = a1;
        while ( *a1++ )
          ;
        break;
      case 119:
        a5 += 4;
        **(_WORD **)(a5 - 4) = *(_WORD *)a1;
        a1 += 2;
        break;
      default:
        EBREAK(result);
        break;
    }
  }
}

//----- (00497220) --------------------------------------------------------
void *ReadPacket(char *a1, char *a2, ...)
{
  return ReadPacketV(a1, (int)&a2);
}

//----- (00497250) --------------------------------------------------------
char *__stdcall ScanPacketV(char *a1, unsigned int a2, int a3)
{
  _DWORD *v3; // edx
  int v5; // edx
  char *v7; // [esp+0h] [ebp-34h]
  char *v8; // [esp+4h] [ebp-30h]
  int result; // [esp+Ch] [ebp-28h]
  size_t v10; // [esp+10h] [ebp-24h]
  void *v11; // [esp+14h] [ebp-20h]
  char *v12; // [esp+18h] [ebp-1Ch]
  int v13; // [esp+1Ch] [ebp-18h]
  int v14; // [esp+24h] [ebp-10h]
  char **v15; // [esp+28h] [ebp-Ch]
  char *v16; // [esp+30h] [ebp-4h]
  int a6; // [esp+44h] [ebp+10h]
  int a6a; // [esp+44h] [ebp+10h]
  int a6b; // [esp+44h] [ebp+10h]
  int a6c; // [esp+44h] [ebp+10h]

  a6 = a3 + 4;
  v16 = *(char **)(a6 - 4);
  while ( 1 )
  {
LABEL_2:
    result = *v16++;
    switch ( result )
    {
      case 0:
        return a1;
      case 66:
        if ( (unsigned int)a1 < a2 )
        {
          a6 += 4;
          **(_DWORD **)(a6 - 4) = *a1++;
        }
        continue;
      case 73:
        if ( (unsigned int)(a1 + 8) <= a2 )
        {
          a6 += 4;
          v3 = *(_DWORD **)(a6 - 4);
          *v3 = *(_DWORD *)a1;
          v3[1] = *((_DWORD *)a1 + 1);
          a1 += 8;
        }
        continue;
      case 83:
        a6b = a6 + 4;
        v12 = *(char **)(a6b - 4);
        a6 = a6b + 4;
        v13 = *(_DWORD *)(a6 - 4);
        if ( v13 <= 0 )
          EBREAK(*(_DWORD *)(a6 - 4));
        if ( a1 == (char *)a2 )
        {
          *v12 = 0;
          continue;
        }
        if ( (unsigned int)&a1[v13] >= a2 )
          v7 = (char *)a2;
        else
          v7 = &a1[v13];
        while ( 1 )
        {
          *v12 = *a1;
          v5 = *v12++;
          ++a1;
          if ( !v5 )
            goto LABEL_2;
          if ( a1 == v7 )
          {
            *(v12 - 1) = 0;
            goto LABEL_2;
          }
        }
      case 87:
        if ( (unsigned int)(a1 + 2) <= a2 )
        {
          a6 += 4;
          **(_DWORD **)(a6 - 4) = *(unsigned __int16 *)a1;
          a1 += 2;
        }
        continue;
      case 98:
        if ( (unsigned int)a1 < a2 )
        {
          a6 += 4;
          **(_BYTE **)(a6 - 4) = *a1++;
        }
        continue;
      case 100:
        if ( (unsigned int)(a1 + 4) <= a2 )
        {
          a6 += 4;
          **(_DWORD **)(a6 - 4) = *(_DWORD *)a1;
          a1 += 4;
        }
        continue;
      case 109:
        a6c = a6 + 4;
        v11 = *(void **)(a6c - 4);
        a6 = a6c + 4;
        v10 = *(_DWORD *)(a6 - 4);
        if ( (unsigned int)&a1[v10] <= a2 )
        {
          memcpy(v11, a1, v10);
          a1 += v10;
        }
        continue;
      case 115:
        a6a = a6 + 4;
        v15 = *(char ***)(a6a - 4);
        a6 = a6a + 4;
        v14 = *(_DWORD *)(a6 - 4);
        *v15 = a1;
        if ( (unsigned int)&a1[v14] >= a2 )
          v8 = (char *)a2;
        else
          v8 = &a1[v14];
        break;
      case 119:
        if ( (unsigned int)(a1 + 2) <= a2 )
        {
          a6 += 4;
          **(_WORD **)(a6 - 4) = *(_WORD *)a1;
          a1 += 2;
        }
        continue;
      default:
        EBREAK(result);
        continue;
    }
    while ( a1 != v8 )
    {
      if ( !*a1++ )
        goto LABEL_2;
    }
    *v15 = &DefaultNullString;
  }
}

//----- (004975F0) --------------------------------------------------------
char *ScanPacket(char *Src, char *a5, const char *a6, ...)
{
  return ScanPacketV(Src, (unsigned int)a5, (int)&a6);
}

//----- (00497620) --------------------------------------------------------
char *__stdcall GetString(char *packet, char *str)
{
  int v2; // ecx

  do
  {
    *str = *packet;
    v2 = *str++;
    ++packet;
  }
  while ( v2 );
  return packet;
}

//----- (00497660) --------------------------------------------------------
char *__stdcall PutString(char *a1, const char *a2)
{
  int v2; // ecx

  do
  {
    *a1 = *a2;
    v2 = *a1++;
    ++a2;
  }
  while ( v2 );
  return a1;
}

//----- (004976A0) --------------------------------------------------------
void __cdecl init_codepage()
{
  int v0; // [esp+0h] [ebp-8h]
  int i; // [esp+4h] [ebp-4h]

  for ( i = 0; i < 256; ++i )
  {
    if ( IsDBCSLeadByte(i) )
      LOBYTE(v0) = -1;
    else
      v0 = tolower(i) & 0x7F;
    MEMORY[0x4E35C0][i] = v0;
  }
}

//----- (00497700) --------------------------------------------------------
int __stdcall mbstricmp(const char *s1, const char *s2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+0h] [ebp-Ch]
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+4h] [ebp-8h]

  while ( 1 )
  {
    while ( 1 )
    {
      v5 = *(unsigned __int8 *)s1++;
      v3 = *(unsigned __int8 *)s2++;
      if ( MEMORY[0x4E35C0][v5] >= 0 )
        break;
      v6 = v5 - v3;
      if ( !v6 )
      {
        v7 = *(unsigned __int8 *)s1++;
        v4 = *(unsigned __int8 *)s2++;
        v6 = v7 - v4;
        if ( !v6 )
          continue;
      }
      return v6;
    }
    if ( MEMORY[0x4E35C0][v5] != MEMORY[0x4E35C0][v3] )
      break;
    if ( !v5 )
      return 0;
  }
  return MEMORY[0x4E35C0][v5] - MEMORY[0x4E35C0][v3];
}

//----- (004977B0) --------------------------------------------------------
int __stdcall IsValidString(const char *str)
{
  int result; // eax
  int v2; // eax
  const char *v3; // [esp+Ch] [ebp+8h]
  const char *v4; // [esp+Ch] [ebp+8h]

  if ( !*str )
    return 0;
  if ( MEMORY[0x4E35B8] )
  {
    if ( MEMORY[0x4E35B8] == 1 )
    {
      while ( 1 )
      {
        if ( isalnum(*(unsigned __int8 *)str) || strchr(" \n", *(unsigned __int8 *)str) )
        {
          ++str;
        }
        else
        {
          if ( *(unsigned __int8 *)str < 0xB0u || *(unsigned __int8 *)str > 0xF7u )
            return 0;
          v2 = *(unsigned __int8 *)str;
          v4 = str + 1;
          if ( v2 == 215 )
          {
            if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 > 0xF9u )
              return 0;
          }
          else if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 == 255 )
          {
            return 0;
          }
          str = v4 + 1;
        }
        if ( !*str )
          goto LABEL_41;
      }
    }
    if ( MEMORY[0x4E35B8] == 2 )
    {
      while ( isalnum(*(unsigned __int8 *)str) || strchr(" \n", *(unsigned __int8 *)str) )
      {
        if ( !*++str )
          goto LABEL_41;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    do
    {
      if ( isalnum(*(unsigned __int8 *)str) || strchr(" \n", *(unsigned __int8 *)str) )
      {
        ++str;
      }
      else
      {
        if ( *(unsigned __int8 *)str < 0xB0u || *(unsigned __int8 *)str > 0xC8u )
          return 0;
        v3 = str + 1;
        if ( *(unsigned __int8 *)v3 < 0xA1u || *(unsigned __int8 *)v3 == 255 )
          return 0;
        str = v3 + 1;
      }
    }
    while ( *str );
LABEL_41:
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004979C0) --------------------------------------------------------
int __stdcall IsValidName(const char *name)
{
  int result; // eax
  int v2; // edx
  const char *v3; // [esp+Ch] [ebp+8h]
  const char *v4; // [esp+Ch] [ebp+8h]

  if ( !*name )
    return 0;
  if ( MEMORY[0x4E35B8] )
  {
    if ( MEMORY[0x4E35B8] == 1 )
    {
      while ( 1 )
      {
        if ( isalnum(*(unsigned __int8 *)name) )
        {
          ++name;
        }
        else
        {
          if ( *(unsigned __int8 *)name < 0xB0u || *(unsigned __int8 *)name > 0xF7u )
            return 0;
          v2 = *(unsigned __int8 *)name;
          v4 = name + 1;
          if ( v2 == 215 )
          {
            if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 > 0xF9u )
              return 0;
          }
          else if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 == 255 )
          {
            return 0;
          }
          name = v4 + 1;
        }
        if ( !*name )
          goto LABEL_38;
      }
    }
    if ( MEMORY[0x4E35B8] == 2 )
    {
      while ( isalnum(*(unsigned __int8 *)name) )
      {
        if ( !*++name )
          goto LABEL_38;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    do
    {
      if ( isalnum(*(unsigned __int8 *)name) )
      {
        ++name;
      }
      else
      {
        if ( *(unsigned __int8 *)name < 0xB0u || *(unsigned __int8 *)name > 0xC8u )
          return 0;
        v3 = name + 1;
        if ( *(unsigned __int8 *)v3 < 0xA1u || *(unsigned __int8 *)v3 == 255 )
          return 0;
        name = v3 + 1;
      }
    }
    while ( *name );
LABEL_38:
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00497B80) --------------------------------------------------------
int __stdcall IsValidAdminName(const char *name)
{
  const char *v2; // [esp+8h] [ebp+8h]

  if ( !*name )
    return 0;
  do
  {
    if ( MEMORY[0x4E35C0][*(unsigned __int8 *)name] >= 0 )
    {
      if ( !isalnum(*(unsigned __int8 *)name) && !strchr("_<>", *(unsigned __int8 *)name) )
        return 0;
      ++name;
    }
    else
    {
      v2 = name + 1;
      if ( !*v2 )
        return 0;
      name = v2 + 1;
    }
  }
  while ( *name );
  return 1;
}

//----- (00497C20) --------------------------------------------------------
std::string *__cdecl GetUniqueName(std::string *result)
{
  CHAR *i; // [esp+0h] [ebp-114h]
  CHAR Str[268]; // [esp+4h] [ebp-110h] BYREF
  int v4; // [esp+110h] [ebp-4h]

  v4 = dword_4D9830;
  GetModuleFileNameA(0, Str, 0x104u);
  for ( i = Str; *i; ++i )
  {
    if ( *i == 92 )
      *i = 47;
  }
  std::string::string(result, Str);
  return result;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00497CB0) --------------------------------------------------------
void __thiscall InitCodePage::InitCodePage(InitCodePage *this)
{
  init_codepage();
  dword_4E3748 = GetACP();
}
// 4E3748: using guessed type int dword_4E3748;

//----- (00497CE0) --------------------------------------------------------
int __stdcall _HsCrypt_InitCrypt(int a1)
{
  if ( !a1 )
    return 110594;
  memset((void *)(a1 + 16), 0, 0x20Cu);
  memset((void *)(a1 + 566), 0, 0x20Cu);
  sub_49EFED(a1 + 16, (int *)a1, 16);
  sub_49F008(a1 + 566, (int *)a1, 16);
  return 0;
}

//----- (00497D5D) --------------------------------------------------------
int __stdcall _HsCrypt_GetEncMsg(void *Src, int a2, int a3, void *a4, int a5)
{
  if ( !Src || !a2 || !a3 || !a4 || !a5 )
    return 110595;
  AES_ECB_Encrypt(a3, a4, Src, a2, (int)&unk_4CD658);
  return 0;
}

//----- (00497DA8) --------------------------------------------------------
int __stdcall _HsCrypt_GetDecMsg(void *Src, int a2, int a3, void *a4, int a5)
{
  if ( !Src || !a2 || !a3 || !a4 || !a5 )
    return 110596;
  sub_49F10F(a3, a4, Src, a2, (int)&unk_4CD658);
  return 0;
}

//----- (00497DF3) --------------------------------------------------------
int __stdcall _HsCrypt_FSeek(FILE *Stream, int a2)
{
  __int32 v3; // [esp+0h] [ebp-4h]

  if ( a2 )
    v3 = a2 / 16;
  else
    v3 = 0;
  return fseek(Stream, 16 * v3, 0);
}

//----- (004983BD) --------------------------------------------------------
unsigned int __stdcall _HsCrypt_EncFfile(FILE *Stream, void *a2, size_t ElementCount, unsigned int *a4, unsigned __int8 *a5)
{
  void *v5; // esp
  unsigned int result; // eax
  _DWORD v7[6]; // [esp-Ch] [ebp-2038h] BYREF
  int v8; // [esp+Ch] [ebp-2020h]
  size_t v9; // [esp+10h] [ebp-201Ch]
  char Src; // [esp+14h] [ebp-2018h] BYREF
  char v11[4092]; // [esp+15h] [ebp-2017h] BYREF
  __int16 v12; // [esp+1011h] [ebp-101Bh]
  char v13; // [esp+1013h] [ebp-1019h]
  char v14; // [esp+1014h] [ebp-1018h] BYREF
  char v15[4092]; // [esp+1015h] [ebp-1017h] BYREF
  __int16 v16; // [esp+2011h] [ebp-1Bh]
  char v17; // [esp+2013h] [ebp-19h]
  CPPEH_RECORD ms_exc; // [esp+2014h] [ebp-18h]

  v5 = alloca(8212);
  ms_exc.old_esp = (DWORD)v7;
  v8 = 0;
  v9 = 0;
  Src = 0;
  memset(v11, 0, sizeof(v11));
  v12 = 0;
  v13 = 0;
  v14 = 0;
  memset(v15, 0, sizeof(v15));
  v16 = 0;
  v17 = 0;
  ms_exc.registration.TryLevel = 0;
  if ( Stream && a2 && ElementCount && ElementCount <= 0x1000 && a4 && a5 )
  {
    v9 = sub_4A17A2(&Src, 1u, ElementCount, Stream);
    if ( v9 )
    {
      v8 = _HsCrypt_GetEncMsg(&Src, v9, (int)a5, &v14, 4096);
      if ( v8 )
      {
        v7[3] = 110626;
        ms_exc.registration.TryLevel = -1;
        result = 110626;
      }
      else
      {
        memcpy(a2, &v14, v9);
        *a4 = v9;
        result = 0;
      }
    }
    else
    {
      v7[4] = 110625;
      ms_exc.registration.TryLevel = -1;
      result = 110625;
    }
  }
  else
  {
    v7[5] = 110624;
    ms_exc.registration.TryLevel = -1;
    result = 110624;
  }
  return result;
}

//----- (00498577) --------------------------------------------------------
unsigned int __stdcall _HsCrypt_FileFEnc(char *FileName, void *Src, void *a3)
{
  void *v3; // esp
  int v5; // eax
  unsigned int a4; // [esp+20h] [ebp-1590h] BYREF
  FILE *Stream; // [esp+24h] [ebp-158Ch]
  FILE *stream; // [esp+28h] [ebp-1588h]
  unsigned int v9; // [esp+2Ch] [ebp-1584h]
  int a1[4]; // [esp+30h] [ebp-1580h] BYREF
  unsigned __int8 a5[1100]; // [esp+40h] [ebp-1570h] BYREF
  CHAR NewFileName[260]; // [esp+48Ch] [ebp-1124h] BYREF
  char a2; // [esp+590h] [ebp-1020h] BYREF
  char v14[4092]; // [esp+591h] [ebp-101Fh] BYREF
  __int16 v15; // [esp+158Dh] [ebp-23h]
  char v16; // [esp+158Fh] [ebp-21h]
  unsigned int v17; // [esp+1590h] [ebp-20h]
  unsigned __int32 v18; // [esp+1594h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+1598h] [ebp-18h] BYREF

  v3 = alloca(5528);
  v9 = 0;
  a4 = 0;
  v17 = 0;
  v18 = 0;
  a2 = 0;
  memset(v14, 0, sizeof(v14));
  v15 = 0;
  v16 = 0;
  NewFileName[0] = 0;
  memset(&NewFileName[1], 0, 0x100u);
  *(_WORD *)&NewFileName[257] = 0;
  NewFileName[259] = 0;
  stream = 0;
  Stream = 0;
  ms_exc.registration.TryLevel = 0;
  if ( FileName && a3 )
  {
    stream = fopen(FileName, "rb+");
    if ( !stream )
    {
      _local_unwind2(&ms_exc.registration, -1);
      return 110609;
    }
    v5 = _fileno(stream);
    v18 = _filelength(v5);
    if ( v18 == -1 )
    {
      _local_unwind2(&ms_exc.registration, -1);
      return 110610;
    }
    if ( !v18 )
    {
      _local_unwind2(&ms_exc.registration, -1);
      return 110611;
    }
    memcpy(a1, Src, sizeof(a1));
    v9 = _HsCrypt_InitCrypt((int)a1);
    if ( v9 )
    {
      _local_unwind2(&ms_exc.registration, -1);
      return 110612;
    }
    sprintf(NewFileName, "%s.bak", FileName);
    memcpy(a3, NewFileName, 0x104u);
    if ( !CopyFileA(FileName, NewFileName, 0) )
    {
      _local_unwind2(&ms_exc.registration, -1);
      return 110613;
    }
    Stream = fopen(NewFileName, "rb");
    if ( !Stream )
    {
      _local_unwind2(&ms_exc.registration, -1);
      return 110609;
    }
    while ( v17 < v18 )
    {
      v9 = _HsCrypt_EncFfile(Stream, &a2, 0x1000u, &a4, a5);
      if ( v9 )
      {
        _local_unwind2(&ms_exc.registration, -1);
        return 110614;
      }
      v17 += a4;
      v9 = fread_0(&a2, 1u, a4, stream);
      if ( v9 < a4 )
      {
        _local_unwind2(&ms_exc.registration, -1);
        return 110615;
      }
    }
    v9 = 0;
  }
  else
  {
    v9 = 110608;
  }
  ms_exc.registration.TryLevel = -1;
  if ( stream )
  {
    fclose(stream);
    stream = 0;
  }
  if ( Stream )
  {
    fclose(Stream);
    Stream = 0;
  }
  return v9;
}
// 4A076A: using guessed type _DWORD __cdecl _local_unwind2(_DWORD, _DWORD);

//----- (00498920) --------------------------------------------------------
unsigned int __cdecl convert_key(int a1)
{
  unsigned int result; // eax
  unsigned int i; // [esp+4h] [ebp-4h]

  for ( i = 4; i < 4 * *(_DWORD *)(a1 + 516); ++i )
  {
    *(_DWORD *)(a1 + 4 * i + 256) = dword_4D2308[*(unsigned __int8 *)(a1 + 4 * i + 256)] ^ dword_4D1F08[(unsigned __int8)BYTE1(*(_DWORD *)(a1 + 4 * i + 256))] ^ dword_4D1B08[(unsigned __int8)BYTE2(*(_DWORD *)(a1 + 4 * i + 256))] ^ dword_4D1708[(unsigned __int8)HIBYTE(*(_DWORD *)(a1 + 4 * i + 256))];
    result = i + 1;
  }
  return result;
}

//----- (004989CB) --------------------------------------------------------
__int16 __cdecl aes_set_key(int *a1, int a2, char a3, int a4)
{
  __int16 result; // ax
  int v5; // [esp+8h] [ebp-34h]
  int v6; // [esp+8h] [ebp-34h]
  int v7; // [esp+8h] [ebp-34h]
  int v8; // [esp+8h] [ebp-34h]
  int v9; // [esp+8h] [ebp-34h]
  int v10; // [esp+8h] [ebp-34h]
  int v11; // [esp+8h] [ebp-34h]
  int v12; // [esp+8h] [ebp-34h]
  int v13; // [esp+Ch] [ebp-30h]
  int v14; // [esp+Ch] [ebp-30h]
  int v15; // [esp+Ch] [ebp-30h]
  int v16; // [esp+Ch] [ebp-30h]
  int v17; // [esp+Ch] [ebp-30h]
  int v18; // [esp+Ch] [ebp-30h]
  int v19; // [esp+Ch] [ebp-30h]
  int v20; // [esp+Ch] [ebp-30h]
  int v21; // [esp+10h] [ebp-2Ch]
  int v22; // [esp+10h] [ebp-2Ch]
  int v23; // [esp+10h] [ebp-2Ch]
  int v24; // [esp+10h] [ebp-2Ch]
  int v25; // [esp+10h] [ebp-2Ch]
  int v26; // [esp+10h] [ebp-2Ch]
  int v27; // [esp+10h] [ebp-2Ch]
  int v28; // [esp+10h] [ebp-2Ch]
  int v29; // [esp+14h] [ebp-28h]
  int v30; // [esp+14h] [ebp-28h]
  int v31; // [esp+14h] [ebp-28h]
  int v32; // [esp+14h] [ebp-28h]
  int v33; // [esp+14h] [ebp-28h]
  int v34; // [esp+14h] [ebp-28h]
  int v35; // [esp+14h] [ebp-28h]
  int v36; // [esp+14h] [ebp-28h]
  int v37; // [esp+18h] [ebp-24h]
  int v38; // [esp+18h] [ebp-24h]
  int v39; // [esp+18h] [ebp-24h]
  int v40; // [esp+18h] [ebp-24h]
  int v41; // [esp+18h] [ebp-24h]
  int v42; // [esp+18h] [ebp-24h]
  int v43; // [esp+18h] [ebp-24h]
  int v44; // [esp+18h] [ebp-24h]
  int v45; // [esp+1Ch] [ebp-20h]
  int v46; // [esp+1Ch] [ebp-20h]
  int v47; // [esp+1Ch] [ebp-20h]
  int v48; // [esp+1Ch] [ebp-20h]
  int v49; // [esp+1Ch] [ebp-20h]
  int v50; // [esp+1Ch] [ebp-20h]
  int v51; // [esp+1Ch] [ebp-20h]
  int v52; // [esp+1Ch] [ebp-20h]
  unsigned int v53; // [esp+1Ch] [ebp-20h]
  int v54; // [esp+1Ch] [ebp-20h]
  int v55; // [esp+1Ch] [ebp-20h]
  int v56; // [esp+1Ch] [ebp-20h]
  int v57; // [esp+1Ch] [ebp-20h]
  int v58; // [esp+1Ch] [ebp-20h]
  int v59; // [esp+1Ch] [ebp-20h]
  int v60; // [esp+1Ch] [ebp-20h]
  int v61; // [esp+1Ch] [ebp-20h]
  int v62; // [esp+1Ch] [ebp-20h]
  unsigned int v63; // [esp+1Ch] [ebp-20h]
  int v64; // [esp+1Ch] [ebp-20h]
  int v65; // [esp+1Ch] [ebp-20h]
  int v66; // [esp+1Ch] [ebp-20h]
  int v67; // [esp+1Ch] [ebp-20h]
  int v68; // [esp+1Ch] [ebp-20h]
  int v69; // [esp+1Ch] [ebp-20h]
  int v70; // [esp+1Ch] [ebp-20h]
  int v71; // [esp+1Ch] [ebp-20h]
  int v72; // [esp+1Ch] [ebp-20h]
  int v73; // [esp+1Ch] [ebp-20h]
  int v74; // [esp+1Ch] [ebp-20h]
  int v75; // [esp+1Ch] [ebp-20h]
  int v76; // [esp+1Ch] [ebp-20h]
  int v77; // [esp+1Ch] [ebp-20h]
  int v78; // [esp+1Ch] [ebp-20h]
  int v79; // [esp+1Ch] [ebp-20h]
  int v80; // [esp+1Ch] [ebp-20h]
  int v81; // [esp+1Ch] [ebp-20h]
  unsigned int v82; // [esp+1Ch] [ebp-20h]
  int v83; // [esp+1Ch] [ebp-20h]
  int v84; // [esp+1Ch] [ebp-20h]
  int v85; // [esp+1Ch] [ebp-20h]
  int v86; // [esp+1Ch] [ebp-20h]
  int v87; // [esp+1Ch] [ebp-20h]
  int v88; // [esp+1Ch] [ebp-20h]
  int v89; // [esp+1Ch] [ebp-20h]
  int v90; // [esp+20h] [ebp-1Ch]
  int v91; // [esp+20h] [ebp-1Ch]
  int v92; // [esp+20h] [ebp-1Ch]
  int v93; // [esp+20h] [ebp-1Ch]
  int v94; // [esp+20h] [ebp-1Ch]
  int v95; // [esp+20h] [ebp-1Ch]
  int v96; // [esp+20h] [ebp-1Ch]
  int v97; // [esp+20h] [ebp-1Ch]
  int v98; // [esp+20h] [ebp-1Ch]
  int v99; // [esp+20h] [ebp-1Ch]
  int v100; // [esp+20h] [ebp-1Ch]
  int v101; // [esp+20h] [ebp-1Ch]
  int v102; // [esp+20h] [ebp-1Ch]
  int v103; // [esp+20h] [ebp-1Ch]
  int v104; // [esp+20h] [ebp-1Ch]
  int v105; // [esp+20h] [ebp-1Ch]
  int v106; // [esp+20h] [ebp-1Ch]
  int v107; // [esp+20h] [ebp-1Ch]
  int v108; // [esp+20h] [ebp-1Ch]
  int v109; // [esp+20h] [ebp-1Ch]
  int v110; // [esp+20h] [ebp-1Ch]
  int v111; // [esp+20h] [ebp-1Ch]
  int v112; // [esp+20h] [ebp-1Ch]
  int v113; // [esp+20h] [ebp-1Ch]
  int v114; // [esp+20h] [ebp-1Ch]
  int v115; // [esp+20h] [ebp-1Ch]
  int v116; // [esp+20h] [ebp-1Ch]
  int v117; // [esp+20h] [ebp-1Ch]
  int v118; // [esp+20h] [ebp-1Ch]
  int v119; // [esp+20h] [ebp-1Ch]
  int v120; // [esp+20h] [ebp-1Ch]
  int v121; // [esp+20h] [ebp-1Ch]
  int v122; // [esp+20h] [ebp-1Ch]
  int v123; // [esp+20h] [ebp-1Ch]
  int v124; // [esp+20h] [ebp-1Ch]
  int v125; // [esp+20h] [ebp-1Ch]
  int v126; // [esp+20h] [ebp-1Ch]
  int v127; // [esp+20h] [ebp-1Ch]
  int v128; // [esp+20h] [ebp-1Ch]
  int v129; // [esp+20h] [ebp-1Ch]
  int v130; // [esp+20h] [ebp-1Ch]
  int v131; // [esp+20h] [ebp-1Ch]
  int v132; // [esp+20h] [ebp-1Ch]
  int v133; // [esp+20h] [ebp-1Ch]
  int v134; // [esp+20h] [ebp-1Ch]
  int v135; // [esp+24h] [ebp-18h]
  int v136; // [esp+24h] [ebp-18h]
  int v137; // [esp+24h] [ebp-18h]
  int v138; // [esp+24h] [ebp-18h]
  int v139; // [esp+24h] [ebp-18h]
  int v140; // [esp+24h] [ebp-18h]
  int v141; // [esp+24h] [ebp-18h]
  int v142; // [esp+24h] [ebp-18h]
  int v143; // [esp+24h] [ebp-18h]
  int v144; // [esp+24h] [ebp-18h]
  int v145; // [esp+24h] [ebp-18h]
  int v146; // [esp+24h] [ebp-18h]
  int v147; // [esp+24h] [ebp-18h]
  int v148; // [esp+24h] [ebp-18h]
  int v149; // [esp+24h] [ebp-18h]
  int v150; // [esp+24h] [ebp-18h]
  int v151; // [esp+24h] [ebp-18h]
  int v152; // [esp+24h] [ebp-18h]
  int v153; // [esp+24h] [ebp-18h]
  int v154; // [esp+24h] [ebp-18h]
  int v155; // [esp+24h] [ebp-18h]
  int v156; // [esp+24h] [ebp-18h]
  int v157; // [esp+24h] [ebp-18h]
  int v158; // [esp+24h] [ebp-18h]
  int v159; // [esp+24h] [ebp-18h]
  int v160; // [esp+24h] [ebp-18h]
  int v161; // [esp+24h] [ebp-18h]
  int v162; // [esp+24h] [ebp-18h]
  int v163; // [esp+24h] [ebp-18h]
  int v164; // [esp+24h] [ebp-18h]
  int v165; // [esp+24h] [ebp-18h]
  int v166; // [esp+24h] [ebp-18h]
  int v167; // [esp+24h] [ebp-18h]
  int v168; // [esp+24h] [ebp-18h]
  int v169; // [esp+24h] [ebp-18h]
  int v170; // [esp+24h] [ebp-18h]
  int v171; // [esp+24h] [ebp-18h]
  int v172; // [esp+24h] [ebp-18h]
  int v173; // [esp+24h] [ebp-18h]
  int v174; // [esp+24h] [ebp-18h]
  int v175; // [esp+24h] [ebp-18h]
  int v176; // [esp+24h] [ebp-18h]
  int v177; // [esp+24h] [ebp-18h]
  int v178; // [esp+24h] [ebp-18h]
  int v179; // [esp+28h] [ebp-14h]
  int v180; // [esp+28h] [ebp-14h]
  int v181; // [esp+28h] [ebp-14h]
  int v182; // [esp+28h] [ebp-14h]
  int v183; // [esp+28h] [ebp-14h]
  int v184; // [esp+28h] [ebp-14h]
  int v185; // [esp+28h] [ebp-14h]
  int v186; // [esp+28h] [ebp-14h]
  int v187; // [esp+28h] [ebp-14h]
  int v188; // [esp+28h] [ebp-14h]
  int v189; // [esp+28h] [ebp-14h]
  int v190; // [esp+28h] [ebp-14h]
  int v191; // [esp+28h] [ebp-14h]
  int v192; // [esp+28h] [ebp-14h]
  int v193; // [esp+28h] [ebp-14h]
  int v194; // [esp+28h] [ebp-14h]
  int v195; // [esp+28h] [ebp-14h]
  int v196; // [esp+28h] [ebp-14h]
  int v197; // [esp+28h] [ebp-14h]
  int v198; // [esp+28h] [ebp-14h]
  int v199; // [esp+28h] [ebp-14h]
  int v200; // [esp+28h] [ebp-14h]
  int v201; // [esp+28h] [ebp-14h]
  int v202; // [esp+28h] [ebp-14h]
  int v203; // [esp+28h] [ebp-14h]
  int v204; // [esp+28h] [ebp-14h]
  int v205; // [esp+28h] [ebp-14h]
  int v206; // [esp+28h] [ebp-14h]
  int v207; // [esp+28h] [ebp-14h]
  int v208; // [esp+28h] [ebp-14h]
  int v209; // [esp+28h] [ebp-14h]
  int v210; // [esp+28h] [ebp-14h]
  int v211; // [esp+28h] [ebp-14h]
  int v212; // [esp+28h] [ebp-14h]
  int v213; // [esp+28h] [ebp-14h]
  int v214; // [esp+28h] [ebp-14h]
  int v215; // [esp+28h] [ebp-14h]
  int v216; // [esp+28h] [ebp-14h]
  int v217; // [esp+28h] [ebp-14h]
  int v218; // [esp+2Ch] [ebp-10h]
  int v219; // [esp+2Ch] [ebp-10h]
  int v220; // [esp+2Ch] [ebp-10h]
  int v221; // [esp+2Ch] [ebp-10h]
  int v222; // [esp+2Ch] [ebp-10h]
  int v223; // [esp+2Ch] [ebp-10h]
  int v224; // [esp+2Ch] [ebp-10h]
  int v225; // [esp+2Ch] [ebp-10h]
  int v226; // [esp+2Ch] [ebp-10h]
  int v227; // [esp+2Ch] [ebp-10h]
  int v228; // [esp+2Ch] [ebp-10h]
  int v229; // [esp+2Ch] [ebp-10h]
  int v230; // [esp+2Ch] [ebp-10h]
  int v231; // [esp+2Ch] [ebp-10h]
  int v232; // [esp+2Ch] [ebp-10h]
  int v233; // [esp+2Ch] [ebp-10h]
  int v234; // [esp+2Ch] [ebp-10h]
  int v235; // [esp+2Ch] [ebp-10h]
  int v236; // [esp+2Ch] [ebp-10h]
  int v237; // [esp+2Ch] [ebp-10h]
  int v238; // [esp+2Ch] [ebp-10h]
  int v239; // [esp+2Ch] [ebp-10h]
  int v240; // [esp+2Ch] [ebp-10h]
  int v241; // [esp+2Ch] [ebp-10h]
  int v242; // [esp+2Ch] [ebp-10h]
  int v243; // [esp+2Ch] [ebp-10h]
  int v244; // [esp+2Ch] [ebp-10h]
  int v245; // [esp+2Ch] [ebp-10h]
  int v246; // [esp+2Ch] [ebp-10h]
  int v247; // [esp+2Ch] [ebp-10h]
  int v248; // [esp+2Ch] [ebp-10h]
  int v249; // [esp+2Ch] [ebp-10h]
  int v250; // [esp+2Ch] [ebp-10h]
  int v251; // [esp+2Ch] [ebp-10h]
  int v252; // [esp+2Ch] [ebp-10h]
  int v253; // [esp+2Ch] [ebp-10h]
  int v254; // [esp+2Ch] [ebp-10h]
  int v255; // [esp+2Ch] [ebp-10h]
  int v256; // [esp+2Ch] [ebp-10h]
  int v257; // [esp+2Ch] [ebp-10h]
  int v258; // [esp+2Ch] [ebp-10h]
  int v259; // [esp+2Ch] [ebp-10h]
  int v260; // [esp+2Ch] [ebp-10h]
  int v261; // [esp+2Ch] [ebp-10h]
  unsigned int v262; // [esp+2Ch] [ebp-10h]
  int v263; // [esp+2Ch] [ebp-10h]
  int v264; // [esp+2Ch] [ebp-10h]
  int v265; // [esp+2Ch] [ebp-10h]
  int v266; // [esp+2Ch] [ebp-10h]
  int v267; // [esp+2Ch] [ebp-10h]
  int v268; // [esp+2Ch] [ebp-10h]
  int v269; // [esp+2Ch] [ebp-10h]
  int v270; // [esp+2Ch] [ebp-10h]
  int v271; // [esp+2Ch] [ebp-10h]
  int v272; // [esp+2Ch] [ebp-10h]
  int v273; // [esp+2Ch] [ebp-10h]
  int v274; // [esp+2Ch] [ebp-10h]
  int v275; // [esp+2Ch] [ebp-10h]
  int v276; // [esp+2Ch] [ebp-10h]
  int v277; // [esp+2Ch] [ebp-10h]
  int v278; // [esp+2Ch] [ebp-10h]
  int v279; // [esp+2Ch] [ebp-10h]
  int v280; // [esp+2Ch] [ebp-10h]
  int v281; // [esp+2Ch] [ebp-10h]
  int v282; // [esp+2Ch] [ebp-10h]
  int v283; // [esp+2Ch] [ebp-10h]
  int v284; // [esp+30h] [ebp-Ch]
  int v285; // [esp+30h] [ebp-Ch]
  int v286; // [esp+30h] [ebp-Ch]
  int v287; // [esp+30h] [ebp-Ch]
  int v288; // [esp+30h] [ebp-Ch]
  int v289; // [esp+30h] [ebp-Ch]
  int v290; // [esp+30h] [ebp-Ch]
  int v291; // [esp+30h] [ebp-Ch]
  int v292; // [esp+30h] [ebp-Ch]
  int v293; // [esp+30h] [ebp-Ch]
  int v294; // [esp+30h] [ebp-Ch]
  int v295; // [esp+30h] [ebp-Ch]
  int v296; // [esp+30h] [ebp-Ch]
  int v297; // [esp+30h] [ebp-Ch]
  int v298; // [esp+30h] [ebp-Ch]
  int v299; // [esp+30h] [ebp-Ch]
  int v300; // [esp+30h] [ebp-Ch]
  int v301; // [esp+30h] [ebp-Ch]
  int v302; // [esp+30h] [ebp-Ch]
  int v303; // [esp+30h] [ebp-Ch]
  int v304; // [esp+30h] [ebp-Ch]
  int v305; // [esp+30h] [ebp-Ch]
  int v306; // [esp+30h] [ebp-Ch]
  int v307; // [esp+30h] [ebp-Ch]
  int v308; // [esp+30h] [ebp-Ch]
  int v309; // [esp+30h] [ebp-Ch]
  int v310; // [esp+30h] [ebp-Ch]
  int v311; // [esp+30h] [ebp-Ch]
  int v312; // [esp+30h] [ebp-Ch]
  int v313; // [esp+34h] [ebp-8h]
  int v314; // [esp+34h] [ebp-8h]
  int v315; // [esp+34h] [ebp-8h]
  int v316; // [esp+34h] [ebp-8h]
  int v317; // [esp+34h] [ebp-8h]
  int v318; // [esp+34h] [ebp-8h]
  int v319; // [esp+34h] [ebp-8h]
  int v320; // [esp+34h] [ebp-8h]
  int v321; // [esp+34h] [ebp-8h]
  int v322; // [esp+34h] [ebp-8h]
  int v323; // [esp+34h] [ebp-8h]
  int v324; // [esp+34h] [ebp-8h]
  int v325; // [esp+34h] [ebp-8h]
  int v326; // [esp+34h] [ebp-8h]
  int v327; // [esp+34h] [ebp-8h]
  int v328; // [esp+34h] [ebp-8h]
  int v329; // [esp+34h] [ebp-8h]
  int v330; // [esp+34h] [ebp-8h]
  int v331; // [esp+34h] [ebp-8h]
  int v332; // [esp+34h] [ebp-8h]
  int v333; // [esp+34h] [ebp-8h]
  int v334; // [esp+34h] [ebp-8h]
  int v335; // [esp+34h] [ebp-8h]
  int v336; // [esp+34h] [ebp-8h]
  int v337; // [esp+34h] [ebp-8h]
  int v338; // [esp+34h] [ebp-8h]
  int v339; // [esp+34h] [ebp-8h]
  int v340; // [esp+34h] [ebp-8h]
  int v341; // [esp+34h] [ebp-8h]
  int v342; // [esp+34h] [ebp-8h]
  int v343; // [esp+34h] [ebp-8h]
  int v344; // [esp+34h] [ebp-8h]
  int v345; // [esp+34h] [ebp-8h]
  int v346; // [esp+34h] [ebp-8h]
  int v347; // [esp+34h] [ebp-8h]
  int v348; // [esp+34h] [ebp-8h]
  int v349; // [esp+34h] [ebp-8h]
  int v350; // [esp+34h] [ebp-8h]
  int v351; // [esp+34h] [ebp-8h]
  int v352; // [esp+34h] [ebp-8h]
  int v353; // [esp+34h] [ebp-8h]
  int v354; // [esp+34h] [ebp-8h]
  int v355; // [esp+34h] [ebp-8h]
  int v356; // [esp+34h] [ebp-8h]
  int v357; // [esp+34h] [ebp-8h]
  int v358; // [esp+34h] [ebp-8h]
  int v359; // [esp+34h] [ebp-8h]
  int v360; // [esp+34h] [ebp-8h]
  int v361; // [esp+34h] [ebp-8h]
  int v362; // [esp+38h] [ebp-4h]
  int v363; // [esp+38h] [ebp-4h]
  int v364; // [esp+38h] [ebp-4h]
  int v365; // [esp+38h] [ebp-4h]
  int v366; // [esp+38h] [ebp-4h]
  int v367; // [esp+38h] [ebp-4h]
  int v368; // [esp+38h] [ebp-4h]
  int v369; // [esp+38h] [ebp-4h]
  int v370; // [esp+38h] [ebp-4h]
  int v371; // [esp+38h] [ebp-4h]
  int v372; // [esp+38h] [ebp-4h]
  int v373; // [esp+38h] [ebp-4h]
  int v374; // [esp+38h] [ebp-4h]
  int v375; // [esp+38h] [ebp-4h]

  if ( (a3 & 3) == 0 )
    return 0;
  *(_BYTE *)(a4 + 520) = a3 & 3 | *(_BYTE *)(a4 + 520) & 0xFC;
  if ( (*(_BYTE *)(a4 + 520) & 1) != 0 )
  {
    v45 = *a1;
    *(_DWORD *)a4 = *a1;
    v90 = a1[1];
    *(_DWORD *)(a4 + 4) = v90;
    v135 = a1[2];
    *(_DWORD *)(a4 + 8) = v135;
    v179 = a1[3];
    *(_DWORD *)(a4 + 12) = v179;
    switch ( a2 )
    {
      case 0:
        result = 4 * *(_DWORD *)(a4 + 512);
        break;
      case 16:
        v46 = dword_4CF308[HIBYTE(v179)] ^ dword_4CEF08[(unsigned __int8)v179] ^ dword_4CEB08[BYTE1(v179)] ^ dword_4CE708[BYTE2(v179)] ^ 0x1000000 ^ v45;
        *(_DWORD *)(a4 + 16) = v46;
        v91 = v46 ^ v90;
        *(_DWORD *)(a4 + 20) = v91;
        v136 = v91 ^ v135;
        *(_DWORD *)(a4 + 24) = v136;
        v180 = v136 ^ v179;
        *(_DWORD *)(a4 + 28) = v180;
        v47 = dword_4CF308[HIBYTE(v180)] ^ dword_4CEF08[(unsigned __int8)v180] ^ dword_4CEB08[BYTE1(v180)] ^ dword_4CE708[BYTE2(v180)] ^ 0x2000000 ^ v46;
        *(_DWORD *)(a4 + 32) = v47;
        v92 = v47 ^ v91;
        *(_DWORD *)(a4 + 36) = v92;
        v137 = v92 ^ v136;
        *(_DWORD *)(a4 + 40) = v137;
        v181 = v137 ^ v180;
        *(_DWORD *)(a4 + 44) = v181;
        v48 = dword_4CF308[HIBYTE(v181)] ^ dword_4CEF08[(unsigned __int8)v181] ^ dword_4CEB08[BYTE1(v181)] ^ dword_4CE708[BYTE2(v181)] ^ 0x4000000 ^ v47;
        *(_DWORD *)(a4 + 48) = v48;
        v93 = v48 ^ v92;
        *(_DWORD *)(a4 + 52) = v93;
        v138 = v93 ^ v137;
        *(_DWORD *)(a4 + 56) = v138;
        v182 = v138 ^ v181;
        *(_DWORD *)(a4 + 60) = v182;
        v49 = dword_4CF308[HIBYTE(v182)] ^ dword_4CEF08[(unsigned __int8)v182] ^ dword_4CEB08[BYTE1(v182)] ^ dword_4CE708[BYTE2(v182)] ^ 0x8000000 ^ v48;
        *(_DWORD *)(a4 + 64) = v49;
        v94 = v49 ^ v93;
        *(_DWORD *)(a4 + 68) = v94;
        v139 = v94 ^ v138;
        *(_DWORD *)(a4 + 72) = v139;
        v183 = v139 ^ v182;
        *(_DWORD *)(a4 + 76) = v183;
        v50 = dword_4CF308[HIBYTE(v183)] ^ dword_4CEF08[(unsigned __int8)v183] ^ dword_4CEB08[BYTE1(v183)] ^ dword_4CE708[BYTE2(v183)] ^ 0x10000000 ^ v49;
        *(_DWORD *)(a4 + 80) = v50;
        v95 = v50 ^ v94;
        *(_DWORD *)(a4 + 84) = v95;
        v140 = v95 ^ v139;
        *(_DWORD *)(a4 + 88) = v140;
        v184 = v140 ^ v183;
        *(_DWORD *)(a4 + 92) = v184;
        v51 = dword_4CF308[HIBYTE(v184)] ^ dword_4CEF08[(unsigned __int8)v184] ^ dword_4CEB08[BYTE1(v184)] ^ dword_4CE708[BYTE2(v184)] ^ 0x20000000 ^ v50;
        *(_DWORD *)(a4 + 96) = v51;
        v96 = v51 ^ v95;
        *(_DWORD *)(a4 + 100) = v96;
        v141 = v96 ^ v140;
        *(_DWORD *)(a4 + 104) = v141;
        v185 = v141 ^ v184;
        *(_DWORD *)(a4 + 108) = v185;
        v52 = dword_4CF308[HIBYTE(v185)] ^ dword_4CEF08[(unsigned __int8)v185] ^ dword_4CEB08[BYTE1(v185)] ^ dword_4CE708[BYTE2(v185)] ^ 0x40000000 ^ v51;
        *(_DWORD *)(a4 + 112) = v52;
        v97 = v52 ^ v96;
        *(_DWORD *)(a4 + 116) = v97;
        v142 = v97 ^ v141;
        *(_DWORD *)(a4 + 120) = v142;
        v186 = v142 ^ v185;
        *(_DWORD *)(a4 + 124) = v186;
        v53 = dword_4CF308[HIBYTE(v186)] ^ dword_4CEF08[(unsigned __int8)v186] ^ dword_4CEB08[BYTE1(v186)] ^ dword_4CE708[BYTE2(v186)] ^ 0x80000000 ^ v52;
        *(_DWORD *)(a4 + 128) = v53;
        v98 = v53 ^ v97;
        *(_DWORD *)(a4 + 132) = v98;
        v143 = v98 ^ v142;
        *(_DWORD *)(a4 + 136) = v143;
        v187 = v143 ^ v186;
        *(_DWORD *)(a4 + 140) = v187;
        v54 = dword_4CF308[HIBYTE(v187)] ^ dword_4CEF08[(unsigned __int8)v187] ^ dword_4CEB08[BYTE1(v187)] ^ dword_4CE708[BYTE2(v187)] ^ 0x1B000000 ^ v53;
        *(_DWORD *)(a4 + 144) = v54;
        v99 = v54 ^ v98;
        *(_DWORD *)(a4 + 148) = v99;
        v144 = v99 ^ v143;
        *(_DWORD *)(a4 + 152) = v144;
        v188 = v144 ^ v187;
        *(_DWORD *)(a4 + 156) = v188;
        v55 = dword_4CF308[HIBYTE(v188)] ^ dword_4CEF08[(unsigned __int8)v188] ^ dword_4CEB08[BYTE1(v188)] ^ dword_4CE708[BYTE2(v188)] ^ 0x36000000 ^ v54;
        *(_DWORD *)(a4 + 160) = v55;
        v100 = v55 ^ v99;
        *(_DWORD *)(a4 + 164) = v100;
        v145 = v100 ^ v144;
        *(_DWORD *)(a4 + 168) = v145;
        *(_DWORD *)(a4 + 172) = v145 ^ v188;
        *(_DWORD *)(a4 + 512) = 4;
        *(_DWORD *)(a4 + 516) = 10;
        goto LABEL_10;
      case 24:
        v218 = a1[4];
        *(_DWORD *)(a4 + 16) = v218;
        v284 = a1[5];
        *(_DWORD *)(a4 + 20) = v284;
        v56 = dword_4CF308[HIBYTE(v284)] ^ dword_4CEF08[(unsigned __int8)v284] ^ dword_4CEB08[BYTE1(v284)] ^ dword_4CE708[BYTE2(v284)] ^ 0x1000000 ^ v45;
        *(_DWORD *)(a4 + 24) = v56;
        v101 = v56 ^ v90;
        *(_DWORD *)(a4 + 28) = v101;
        v146 = v101 ^ v135;
        *(_DWORD *)(a4 + 32) = v146;
        v189 = v146 ^ v179;
        *(_DWORD *)(a4 + 36) = v189;
        v219 = v189 ^ v218;
        *(_DWORD *)(a4 + 40) = v219;
        v285 = v219 ^ v284;
        *(_DWORD *)(a4 + 44) = v285;
        v57 = dword_4CF308[HIBYTE(v285)] ^ dword_4CEF08[(unsigned __int8)v285] ^ dword_4CEB08[BYTE1(v285)] ^ dword_4CE708[BYTE2(v285)] ^ 0x2000000 ^ v56;
        *(_DWORD *)(a4 + 48) = v57;
        v102 = v57 ^ v101;
        *(_DWORD *)(a4 + 52) = v102;
        v147 = v102 ^ v146;
        *(_DWORD *)(a4 + 56) = v147;
        v190 = v147 ^ v189;
        *(_DWORD *)(a4 + 60) = v190;
        v220 = v190 ^ v219;
        *(_DWORD *)(a4 + 64) = v220;
        v286 = v220 ^ v285;
        *(_DWORD *)(a4 + 68) = v286;
        v58 = dword_4CF308[HIBYTE(v286)] ^ dword_4CEF08[(unsigned __int8)v286] ^ dword_4CEB08[BYTE1(v286)] ^ dword_4CE708[BYTE2(v286)] ^ 0x4000000 ^ v57;
        *(_DWORD *)(a4 + 72) = v58;
        v103 = v58 ^ v102;
        *(_DWORD *)(a4 + 76) = v103;
        v148 = v103 ^ v147;
        *(_DWORD *)(a4 + 80) = v148;
        v191 = v148 ^ v190;
        *(_DWORD *)(a4 + 84) = v191;
        v221 = v191 ^ v220;
        *(_DWORD *)(a4 + 88) = v221;
        v287 = v221 ^ v286;
        *(_DWORD *)(a4 + 92) = v287;
        v59 = dword_4CF308[HIBYTE(v287)] ^ dword_4CEF08[(unsigned __int8)v287] ^ dword_4CEB08[BYTE1(v287)] ^ dword_4CE708[BYTE2(v287)] ^ 0x8000000 ^ v58;
        *(_DWORD *)(a4 + 96) = v59;
        v104 = v59 ^ v103;
        *(_DWORD *)(a4 + 100) = v104;
        v149 = v104 ^ v148;
        *(_DWORD *)(a4 + 104) = v149;
        v192 = v149 ^ v191;
        *(_DWORD *)(a4 + 108) = v192;
        v222 = v192 ^ v221;
        *(_DWORD *)(a4 + 112) = v222;
        v288 = v222 ^ v287;
        *(_DWORD *)(a4 + 116) = v288;
        v60 = dword_4CF308[HIBYTE(v288)] ^ dword_4CEF08[(unsigned __int8)v288] ^ dword_4CEB08[BYTE1(v288)] ^ dword_4CE708[BYTE2(v288)] ^ 0x10000000 ^ v59;
        *(_DWORD *)(a4 + 120) = v60;
        v105 = v60 ^ v104;
        *(_DWORD *)(a4 + 124) = v105;
        v150 = v105 ^ v149;
        *(_DWORD *)(a4 + 128) = v150;
        v193 = v150 ^ v192;
        *(_DWORD *)(a4 + 132) = v193;
        v223 = v193 ^ v222;
        *(_DWORD *)(a4 + 136) = v223;
        v289 = v223 ^ v288;
        *(_DWORD *)(a4 + 140) = v289;
        v61 = dword_4CF308[HIBYTE(v289)] ^ dword_4CEF08[(unsigned __int8)v289] ^ dword_4CEB08[BYTE1(v289)] ^ dword_4CE708[BYTE2(v289)] ^ 0x20000000 ^ v60;
        *(_DWORD *)(a4 + 144) = v61;
        v106 = v61 ^ v105;
        *(_DWORD *)(a4 + 148) = v106;
        v151 = v106 ^ v150;
        *(_DWORD *)(a4 + 152) = v151;
        v194 = v151 ^ v193;
        *(_DWORD *)(a4 + 156) = v194;
        v224 = v194 ^ v223;
        *(_DWORD *)(a4 + 160) = v224;
        v290 = v224 ^ v289;
        *(_DWORD *)(a4 + 164) = v290;
        v62 = dword_4CF308[HIBYTE(v290)] ^ dword_4CEF08[(unsigned __int8)v290] ^ dword_4CEB08[BYTE1(v290)] ^ dword_4CE708[BYTE2(v290)] ^ 0x40000000 ^ v61;
        *(_DWORD *)(a4 + 168) = v62;
        v107 = v62 ^ v106;
        *(_DWORD *)(a4 + 172) = v107;
        v152 = v107 ^ v151;
        *(_DWORD *)(a4 + 176) = v152;
        v195 = v152 ^ v194;
        *(_DWORD *)(a4 + 180) = v195;
        v225 = v195 ^ v224;
        *(_DWORD *)(a4 + 184) = v225;
        v291 = v225 ^ v290;
        *(_DWORD *)(a4 + 188) = v291;
        v63 = dword_4CF308[HIBYTE(v291)] ^ dword_4CEF08[(unsigned __int8)v291] ^ dword_4CEB08[BYTE1(v291)] ^ dword_4CE708[BYTE2(v291)] ^ 0x80000000 ^ v62;
        *(_DWORD *)(a4 + 192) = v63;
        v108 = v63 ^ v107;
        *(_DWORD *)(a4 + 196) = v108;
        v153 = v108 ^ v152;
        *(_DWORD *)(a4 + 200) = v153;
        *(_DWORD *)(a4 + 204) = v153 ^ v195;
        *(_DWORD *)(a4 + 512) = 6;
        *(_DWORD *)(a4 + 516) = 12;
        goto LABEL_10;
      case 32:
        v226 = a1[4];
        *(_DWORD *)(a4 + 16) = v226;
        v292 = a1[5];
        *(_DWORD *)(a4 + 20) = v292;
        v313 = a1[6];
        *(_DWORD *)(a4 + 24) = v313;
        v362 = a1[7];
        *(_DWORD *)(a4 + 28) = v362;
        v64 = dword_4CF308[HIBYTE(v362)] ^ dword_4CEF08[(unsigned __int8)v362] ^ dword_4CEB08[BYTE1(v362)] ^ dword_4CE708[BYTE2(v362)] ^ 0x1000000 ^ v45;
        *(_DWORD *)(a4 + 32) = v64;
        v109 = v64 ^ v90;
        *(_DWORD *)(a4 + 36) = v109;
        v154 = v109 ^ v135;
        *(_DWORD *)(a4 + 40) = v154;
        v196 = v154 ^ v179;
        *(_DWORD *)(a4 + 44) = v196;
        v227 = dword_4CF308[(unsigned __int8)v196] ^ dword_4CEF08[BYTE1(v196)] ^ dword_4CEB08[BYTE2(v196)] ^ dword_4CE708[HIBYTE(v196)] ^ v226;
        *(_DWORD *)(a4 + 48) = v227;
        v293 = v227 ^ v292;
        *(_DWORD *)(a4 + 52) = v293;
        v314 = v293 ^ v313;
        *(_DWORD *)(a4 + 56) = v314;
        v363 = v314 ^ v362;
        *(_DWORD *)(a4 + 60) = v363;
        v65 = dword_4CF308[HIBYTE(v363)] ^ dword_4CEF08[(unsigned __int8)v363] ^ dword_4CEB08[BYTE1(v363)] ^ dword_4CE708[BYTE2(v363)] ^ 0x2000000 ^ v64;
        *(_DWORD *)(a4 + 64) = v65;
        v110 = v65 ^ v109;
        *(_DWORD *)(a4 + 68) = v110;
        v155 = v110 ^ v154;
        *(_DWORD *)(a4 + 72) = v155;
        v197 = v155 ^ v196;
        *(_DWORD *)(a4 + 76) = v197;
        v228 = dword_4CF308[(unsigned __int8)v197] ^ dword_4CEF08[BYTE1(v197)] ^ dword_4CEB08[BYTE2(v197)] ^ dword_4CE708[HIBYTE(v197)] ^ v227;
        *(_DWORD *)(a4 + 80) = v228;
        v294 = v228 ^ v293;
        *(_DWORD *)(a4 + 84) = v294;
        v315 = v294 ^ v314;
        *(_DWORD *)(a4 + 88) = v315;
        v364 = v315 ^ v363;
        *(_DWORD *)(a4 + 92) = v364;
        v66 = dword_4CF308[HIBYTE(v364)] ^ dword_4CEF08[(unsigned __int8)v364] ^ dword_4CEB08[BYTE1(v364)] ^ dword_4CE708[BYTE2(v364)] ^ 0x4000000 ^ v65;
        *(_DWORD *)(a4 + 96) = v66;
        v111 = v66 ^ v110;
        *(_DWORD *)(a4 + 100) = v111;
        v156 = v111 ^ v155;
        *(_DWORD *)(a4 + 104) = v156;
        v198 = v156 ^ v197;
        *(_DWORD *)(a4 + 108) = v198;
        v229 = dword_4CF308[(unsigned __int8)v198] ^ dword_4CEF08[BYTE1(v198)] ^ dword_4CEB08[BYTE2(v198)] ^ dword_4CE708[HIBYTE(v198)] ^ v228;
        *(_DWORD *)(a4 + 112) = v229;
        v295 = v229 ^ v294;
        *(_DWORD *)(a4 + 116) = v295;
        v316 = v295 ^ v315;
        *(_DWORD *)(a4 + 120) = v316;
        v365 = v316 ^ v364;
        *(_DWORD *)(a4 + 124) = v365;
        v67 = dword_4CF308[HIBYTE(v365)] ^ dword_4CEF08[(unsigned __int8)v365] ^ dword_4CEB08[BYTE1(v365)] ^ dword_4CE708[BYTE2(v365)] ^ 0x8000000 ^ v66;
        *(_DWORD *)(a4 + 128) = v67;
        v112 = v67 ^ v111;
        *(_DWORD *)(a4 + 132) = v112;
        v157 = v112 ^ v156;
        *(_DWORD *)(a4 + 136) = v157;
        v199 = v157 ^ v198;
        *(_DWORD *)(a4 + 140) = v199;
        v230 = dword_4CF308[(unsigned __int8)v199] ^ dword_4CEF08[BYTE1(v199)] ^ dword_4CEB08[BYTE2(v199)] ^ dword_4CE708[HIBYTE(v199)] ^ v229;
        *(_DWORD *)(a4 + 144) = v230;
        v296 = v230 ^ v295;
        *(_DWORD *)(a4 + 148) = v296;
        v317 = v296 ^ v316;
        *(_DWORD *)(a4 + 152) = v317;
        v366 = v317 ^ v365;
        *(_DWORD *)(a4 + 156) = v366;
        v68 = dword_4CF308[HIBYTE(v366)] ^ dword_4CEF08[(unsigned __int8)v366] ^ dword_4CEB08[BYTE1(v366)] ^ dword_4CE708[BYTE2(v366)] ^ 0x10000000 ^ v67;
        *(_DWORD *)(a4 + 160) = v68;
        v113 = v68 ^ v112;
        *(_DWORD *)(a4 + 164) = v113;
        v158 = v113 ^ v157;
        *(_DWORD *)(a4 + 168) = v158;
        v200 = v158 ^ v199;
        *(_DWORD *)(a4 + 172) = v200;
        v231 = dword_4CF308[(unsigned __int8)v200] ^ dword_4CEF08[BYTE1(v200)] ^ dword_4CEB08[BYTE2(v200)] ^ dword_4CE708[HIBYTE(v200)] ^ v230;
        *(_DWORD *)(a4 + 176) = v231;
        v297 = v231 ^ v296;
        *(_DWORD *)(a4 + 180) = v297;
        v318 = v297 ^ v317;
        *(_DWORD *)(a4 + 184) = v318;
        v367 = v318 ^ v366;
        *(_DWORD *)(a4 + 188) = v367;
        v69 = dword_4CF308[HIBYTE(v367)] ^ dword_4CEF08[(unsigned __int8)v367] ^ dword_4CEB08[BYTE1(v367)] ^ dword_4CE708[BYTE2(v367)] ^ 0x20000000 ^ v68;
        *(_DWORD *)(a4 + 192) = v69;
        v114 = v69 ^ v113;
        *(_DWORD *)(a4 + 196) = v114;
        v159 = v114 ^ v158;
        *(_DWORD *)(a4 + 200) = v159;
        v201 = v159 ^ v200;
        *(_DWORD *)(a4 + 204) = v201;
        v232 = dword_4CF308[(unsigned __int8)v201] ^ dword_4CEF08[BYTE1(v201)] ^ dword_4CEB08[BYTE2(v201)] ^ dword_4CE708[HIBYTE(v201)] ^ v231;
        *(_DWORD *)(a4 + 208) = v232;
        v298 = v232 ^ v297;
        *(_DWORD *)(a4 + 212) = v298;
        v319 = v298 ^ v318;
        *(_DWORD *)(a4 + 216) = v319;
        v368 = v319 ^ v367;
        *(_DWORD *)(a4 + 220) = v368;
        v70 = dword_4CF308[HIBYTE(v368)] ^ dword_4CEF08[(unsigned __int8)v368] ^ dword_4CEB08[BYTE1(v368)] ^ dword_4CE708[BYTE2(v368)] ^ 0x40000000 ^ v69;
        *(_DWORD *)(a4 + 224) = v70;
        v115 = v70 ^ v114;
        *(_DWORD *)(a4 + 228) = v115;
        v160 = v115 ^ v159;
        *(_DWORD *)(a4 + 232) = v160;
        *(_DWORD *)(a4 + 236) = v160 ^ v201;
        *(_DWORD *)(a4 + 512) = 8;
        *(_DWORD *)(a4 + 516) = 14;
        goto LABEL_10;
      default:
        *(_BYTE *)(a4 + 520) &= 0xFCu;
        result = 0;
        break;
    }
  }
  else
  {
LABEL_10:
    if ( (*(_BYTE *)(a4 + 520) & 2) != 0 )
    {
      v71 = *a1;
      *(_DWORD *)(a4 + 256) = *a1;
      v116 = a1[1];
      *(_DWORD *)(a4 + 260) = v116;
      v161 = a1[2];
      *(_DWORD *)(a4 + 264) = v161;
      v202 = a1[3];
      *(_DWORD *)(a4 + 268) = v202;
      switch ( a2 )
      {
        case 0:
          result = 4 * *(_DWORD *)(a4 + 512);
          break;
        case 16:
          v233 = dword_4CF308[HIBYTE(v202)] ^ dword_4CEF08[(unsigned __int8)v202] ^ dword_4CEB08[BYTE1(v202)] ^ dword_4CE708[BYTE2(v202)] ^ 0x1000000;
          v72 = v233 ^ v202 ^ v161 ^ v116 ^ v71;
          v234 = *(_DWORD *)(a4 + 256) ^ v233;
          *(_DWORD *)(a4 + 272) = dword_4D2308[(unsigned __int8)v234] ^ dword_4D1F08[BYTE1(v234)] ^ dword_4D1B08[BYTE2(v234)] ^ dword_4D1708[HIBYTE(v234)];
          v235 = *(_DWORD *)(a4 + 260) ^ v234;
          *(_DWORD *)(a4 + 276) = dword_4D2308[(unsigned __int8)v235] ^ dword_4D1F08[BYTE1(v235)] ^ dword_4D1B08[BYTE2(v235)] ^ dword_4D1708[HIBYTE(v235)];
          v236 = *(_DWORD *)(a4 + 264) ^ v235;
          *(_DWORD *)(a4 + 280) = dword_4D2308[(unsigned __int8)v236] ^ dword_4D1F08[BYTE1(v236)] ^ dword_4D1B08[BYTE2(v236)] ^ dword_4D1708[HIBYTE(v236)];
          v237 = *(_DWORD *)(a4 + 268) ^ v236;
          *(_DWORD *)(a4 + 284) = dword_4D2308[(unsigned __int8)v237] ^ dword_4D1F08[BYTE1(v237)] ^ dword_4D1B08[BYTE2(v237)] ^ dword_4D1708[HIBYTE(v237)];
          v238 = dword_4CF308[HIBYTE(v72)] ^ dword_4CEF08[(unsigned __int8)v72] ^ dword_4CEB08[BYTE1(v72)] ^ dword_4CE708[BYTE2(v72)] ^ 0x2000000;
          v117 = v238 ^ v202 ^ v116;
          v239 = *(_DWORD *)(a4 + 272) ^ dword_4D2308[(unsigned __int8)v238] ^ dword_4D1F08[BYTE1(v238)] ^ dword_4D1B08[BYTE2(v238)] ^ dword_4D1708[HIBYTE(v238)];
          *(_DWORD *)(a4 + 288) = v239;
          v240 = *(_DWORD *)(a4 + 276) ^ v239;
          *(_DWORD *)(a4 + 292) = v240;
          v241 = *(_DWORD *)(a4 + 280) ^ v240;
          *(_DWORD *)(a4 + 296) = v241;
          *(_DWORD *)(a4 + 300) = *(_DWORD *)(a4 + 284) ^ v241;
          v242 = dword_4CF308[HIBYTE(v117)] ^ dword_4CEF08[(unsigned __int8)v117] ^ dword_4CEB08[BYTE1(v117)] ^ dword_4CE708[BYTE2(v117)] ^ 0x4000000;
          v162 = v242 ^ v202 ^ v161;
          v243 = *(_DWORD *)(a4 + 288) ^ dword_4D2308[(unsigned __int8)v242] ^ dword_4D1F08[BYTE1(v242)] ^ dword_4D1B08[BYTE2(v242)] ^ dword_4D1708[HIBYTE(v242)];
          *(_DWORD *)(a4 + 304) = v243;
          v244 = *(_DWORD *)(a4 + 292) ^ v243;
          *(_DWORD *)(a4 + 308) = v244;
          v245 = *(_DWORD *)(a4 + 296) ^ v244;
          *(_DWORD *)(a4 + 312) = v245;
          *(_DWORD *)(a4 + 316) = *(_DWORD *)(a4 + 300) ^ v245;
          v246 = dword_4CF308[HIBYTE(v162)] ^ dword_4CEF08[(unsigned __int8)v162] ^ dword_4CEB08[BYTE1(v162)] ^ dword_4CE708[BYTE2(v162)] ^ 0x8000000;
          v203 = v246 ^ v202;
          v247 = *(_DWORD *)(a4 + 304) ^ dword_4D2308[(unsigned __int8)v246] ^ dword_4D1F08[BYTE1(v246)] ^ dword_4D1B08[BYTE2(v246)] ^ dword_4D1708[HIBYTE(v246)];
          *(_DWORD *)(a4 + 320) = v247;
          v248 = *(_DWORD *)(a4 + 308) ^ v247;
          *(_DWORD *)(a4 + 324) = v248;
          v249 = *(_DWORD *)(a4 + 312) ^ v248;
          *(_DWORD *)(a4 + 328) = v249;
          *(_DWORD *)(a4 + 332) = *(_DWORD *)(a4 + 316) ^ v249;
          v250 = dword_4CF308[HIBYTE(v203)] ^ dword_4CEF08[(unsigned __int8)v203] ^ dword_4CEB08[BYTE1(v203)] ^ dword_4CE708[BYTE2(v203)] ^ 0x10000000;
          v73 = v250 ^ v72;
          v251 = *(_DWORD *)(a4 + 320) ^ dword_4D2308[(unsigned __int8)v250] ^ dword_4D1F08[BYTE1(v250)] ^ dword_4D1B08[BYTE2(v250)] ^ dword_4D1708[HIBYTE(v250)];
          *(_DWORD *)(a4 + 336) = v251;
          v252 = *(_DWORD *)(a4 + 324) ^ v251;
          *(_DWORD *)(a4 + 340) = v252;
          v253 = *(_DWORD *)(a4 + 328) ^ v252;
          *(_DWORD *)(a4 + 344) = v253;
          *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 332) ^ v253;
          v254 = dword_4CF308[HIBYTE(v73)] ^ dword_4CEF08[(unsigned __int8)v73] ^ dword_4CEB08[BYTE1(v73)] ^ dword_4CE708[BYTE2(v73)] ^ 0x20000000;
          v118 = v254 ^ v117;
          v255 = *(_DWORD *)(a4 + 336) ^ dword_4D2308[(unsigned __int8)v254] ^ dword_4D1F08[BYTE1(v254)] ^ dword_4D1B08[BYTE2(v254)] ^ dword_4D1708[HIBYTE(v254)];
          *(_DWORD *)(a4 + 352) = v255;
          v256 = *(_DWORD *)(a4 + 340) ^ v255;
          *(_DWORD *)(a4 + 356) = v256;
          v257 = *(_DWORD *)(a4 + 344) ^ v256;
          *(_DWORD *)(a4 + 360) = v257;
          *(_DWORD *)(a4 + 364) = *(_DWORD *)(a4 + 348) ^ v257;
          v258 = dword_4CF308[HIBYTE(v118)] ^ dword_4CEF08[(unsigned __int8)v118] ^ dword_4CEB08[BYTE1(v118)] ^ dword_4CE708[BYTE2(v118)] ^ 0x40000000;
          v163 = v258 ^ v162;
          v259 = *(_DWORD *)(a4 + 352) ^ dword_4D2308[(unsigned __int8)v258] ^ dword_4D1F08[BYTE1(v258)] ^ dword_4D1B08[BYTE2(v258)] ^ dword_4D1708[HIBYTE(v258)];
          *(_DWORD *)(a4 + 368) = v259;
          v260 = *(_DWORD *)(a4 + 356) ^ v259;
          *(_DWORD *)(a4 + 372) = v260;
          v261 = *(_DWORD *)(a4 + 360) ^ v260;
          *(_DWORD *)(a4 + 376) = v261;
          *(_DWORD *)(a4 + 380) = *(_DWORD *)(a4 + 364) ^ v261;
          v262 = dword_4CF308[HIBYTE(v163)] ^ dword_4CEF08[(unsigned __int8)v163] ^ dword_4CEB08[BYTE1(v163)] ^ dword_4CE708[BYTE2(v163)] ^ 0x80000000;
          v204 = v262 ^ v203;
          v263 = *(_DWORD *)(a4 + 368) ^ dword_4D2308[(unsigned __int8)v262] ^ dword_4D1F08[BYTE1(v262)] ^ dword_4D1B08[BYTE2(v262)] ^ dword_4D1708[HIBYTE(v262)];
          *(_DWORD *)(a4 + 384) = v263;
          v264 = *(_DWORD *)(a4 + 372) ^ v263;
          *(_DWORD *)(a4 + 388) = v264;
          v265 = *(_DWORD *)(a4 + 376) ^ v264;
          *(_DWORD *)(a4 + 392) = v265;
          *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 380) ^ v265;
          v266 = dword_4CF308[HIBYTE(v204)] ^ dword_4CEF08[(unsigned __int8)v204] ^ dword_4CEB08[BYTE1(v204)] ^ dword_4CE708[BYTE2(v204)] ^ 0x1B000000;
          v74 = v266 ^ v73;
          v267 = *(_DWORD *)(a4 + 384) ^ dword_4D2308[(unsigned __int8)v266] ^ dword_4D1F08[BYTE1(v266)] ^ dword_4D1B08[BYTE2(v266)] ^ dword_4D1708[HIBYTE(v266)];
          *(_DWORD *)(a4 + 400) = v267;
          v268 = *(_DWORD *)(a4 + 388) ^ v267;
          *(_DWORD *)(a4 + 404) = v268;
          v269 = *(_DWORD *)(a4 + 392) ^ v268;
          *(_DWORD *)(a4 + 408) = v269;
          *(_DWORD *)(a4 + 412) = *(_DWORD *)(a4 + 396) ^ v269;
          v119 = dword_4CF308[HIBYTE(v74)] ^ dword_4CEF08[(unsigned __int8)v74] ^ dword_4CEB08[BYTE1(v74)] ^ dword_4CE708[BYTE2(v74)] ^ 0x36000000 ^ v118;
          *(_DWORD *)(a4 + 416) = v204 ^ v163 ^ v119 ^ v74;
          *(_DWORD *)(a4 + 420) = v204 ^ v119;
          *(_DWORD *)(a4 + 424) = v119 ^ v74;
          *(_DWORD *)(a4 + 428) = v119;
          *(_DWORD *)(a4 + 512) = 4;
          *(_DWORD *)(a4 + 516) = 10;
          goto LABEL_17;
        case 24:
          v270 = a1[4];
          *(_DWORD *)(a4 + 272) = dword_4D2308[(unsigned __int8)v270] ^ dword_4D1F08[BYTE1(v270)] ^ dword_4D1B08[BYTE2(v270)] ^ dword_4D1708[HIBYTE(v270)];
          v299 = a1[5];
          *(_DWORD *)(a4 + 276) = dword_4D2308[(unsigned __int8)v299] ^ dword_4D1F08[BYTE1(v299)] ^ dword_4D1B08[BYTE2(v299)] ^ dword_4D1708[HIBYTE(v299)];
          v75 = dword_4CF308[HIBYTE(v299)] ^ dword_4CEF08[(unsigned __int8)v299] ^ dword_4CEB08[BYTE1(v299)] ^ dword_4CE708[BYTE2(v299)] ^ 0x1000000 ^ v71;
          *(_DWORD *)(a4 + 280) = dword_4D2308[(unsigned __int8)v75] ^ dword_4D1F08[BYTE1(v75)] ^ dword_4D1B08[BYTE2(v75)] ^ dword_4D1708[HIBYTE(v75)];
          v120 = v75 ^ v116;
          *(_DWORD *)(a4 + 284) = dword_4D2308[(unsigned __int8)v120] ^ dword_4D1F08[BYTE1(v120)] ^ dword_4D1B08[BYTE2(v120)] ^ dword_4D1708[HIBYTE(v120)];
          v164 = v120 ^ v161;
          *(_DWORD *)(a4 + 288) = dword_4D2308[(unsigned __int8)v164] ^ dword_4D1F08[BYTE1(v164)] ^ dword_4D1B08[BYTE2(v164)] ^ dword_4D1708[HIBYTE(v164)];
          v205 = v164 ^ v202;
          *(_DWORD *)(a4 + 292) = dword_4D2308[(unsigned __int8)v205] ^ dword_4D1F08[BYTE1(v205)] ^ dword_4D1B08[BYTE2(v205)] ^ dword_4D1708[HIBYTE(v205)];
          v271 = v205 ^ v270;
          *(_DWORD *)(a4 + 296) = dword_4D2308[(unsigned __int8)v271] ^ dword_4D1F08[BYTE1(v271)] ^ dword_4D1B08[BYTE2(v271)] ^ dword_4D1708[HIBYTE(v271)];
          v300 = v271 ^ v299;
          *(_DWORD *)(a4 + 300) = dword_4D2308[(unsigned __int8)v300] ^ dword_4D1F08[BYTE1(v300)] ^ dword_4D1B08[BYTE2(v300)] ^ dword_4D1708[HIBYTE(v300)];
          v320 = dword_4CF308[HIBYTE(v300)] ^ dword_4CEF08[(unsigned __int8)v300] ^ dword_4CEB08[BYTE1(v300)] ^ dword_4CE708[BYTE2(v300)] ^ 0x2000000;
          v76 = v320 ^ v75;
          v321 = *(_DWORD *)(a4 + 280) ^ dword_4D2308[(unsigned __int8)v320] ^ dword_4D1F08[BYTE1(v320)] ^ dword_4D1B08[BYTE2(v320)] ^ dword_4D1708[HIBYTE(v320)];
          *(_DWORD *)(a4 + 304) = v321;
          v121 = v76 ^ v120;
          v322 = *(_DWORD *)(a4 + 284) ^ v321;
          *(_DWORD *)(a4 + 308) = v322;
          v165 = v121 ^ v164;
          v323 = *(_DWORD *)(a4 + 288) ^ v322;
          *(_DWORD *)(a4 + 312) = v323;
          v206 = v165 ^ v205;
          v324 = *(_DWORD *)(a4 + 292) ^ v323;
          *(_DWORD *)(a4 + 316) = v324;
          v272 = v206 ^ v271;
          v325 = *(_DWORD *)(a4 + 296) ^ v324;
          *(_DWORD *)(a4 + 320) = v325;
          v301 = v272 ^ v300;
          *(_DWORD *)(a4 + 324) = *(_DWORD *)(a4 + 300) ^ v325;
          v326 = dword_4CF308[HIBYTE(v301)] ^ dword_4CEF08[(unsigned __int8)v301] ^ dword_4CEB08[BYTE1(v301)] ^ dword_4CE708[BYTE2(v301)] ^ 0x4000000;
          v77 = v326 ^ v76;
          v327 = *(_DWORD *)(a4 + 304) ^ dword_4D2308[(unsigned __int8)v326] ^ dword_4D1F08[BYTE1(v326)] ^ dword_4D1B08[BYTE2(v326)] ^ dword_4D1708[HIBYTE(v326)];
          *(_DWORD *)(a4 + 328) = v327;
          v122 = v77 ^ v121;
          v328 = *(_DWORD *)(a4 + 308) ^ v327;
          *(_DWORD *)(a4 + 332) = v328;
          v166 = v122 ^ v165;
          v329 = *(_DWORD *)(a4 + 312) ^ v328;
          *(_DWORD *)(a4 + 336) = v329;
          v207 = v166 ^ v206;
          v330 = *(_DWORD *)(a4 + 316) ^ v329;
          *(_DWORD *)(a4 + 340) = v330;
          v273 = v207 ^ v272;
          v331 = *(_DWORD *)(a4 + 320) ^ v330;
          *(_DWORD *)(a4 + 344) = v331;
          v302 = v273 ^ v301;
          *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 324) ^ v331;
          v332 = dword_4CF308[HIBYTE(v302)] ^ dword_4CEF08[(unsigned __int8)v302] ^ dword_4CEB08[BYTE1(v302)] ^ dword_4CE708[BYTE2(v302)] ^ 0x8000000;
          v78 = v332 ^ v77;
          v333 = *(_DWORD *)(a4 + 328) ^ dword_4D2308[(unsigned __int8)v332] ^ dword_4D1F08[BYTE1(v332)] ^ dword_4D1B08[BYTE2(v332)] ^ dword_4D1708[HIBYTE(v332)];
          *(_DWORD *)(a4 + 352) = v333;
          v123 = v78 ^ v122;
          v334 = *(_DWORD *)(a4 + 332) ^ v333;
          *(_DWORD *)(a4 + 356) = v334;
          v167 = v123 ^ v166;
          v335 = *(_DWORD *)(a4 + 336) ^ v334;
          *(_DWORD *)(a4 + 360) = v335;
          v208 = v167 ^ v207;
          v336 = *(_DWORD *)(a4 + 340) ^ v335;
          *(_DWORD *)(a4 + 364) = v336;
          v274 = v208 ^ v273;
          v337 = *(_DWORD *)(a4 + 344) ^ v336;
          *(_DWORD *)(a4 + 368) = v337;
          v303 = v274 ^ v302;
          *(_DWORD *)(a4 + 372) = *(_DWORD *)(a4 + 348) ^ v337;
          v338 = dword_4CF308[HIBYTE(v303)] ^ dword_4CEF08[(unsigned __int8)v303] ^ dword_4CEB08[BYTE1(v303)] ^ dword_4CE708[BYTE2(v303)] ^ 0x10000000;
          v79 = v338 ^ v78;
          v339 = *(_DWORD *)(a4 + 352) ^ dword_4D2308[(unsigned __int8)v338] ^ dword_4D1F08[BYTE1(v338)] ^ dword_4D1B08[BYTE2(v338)] ^ dword_4D1708[HIBYTE(v338)];
          *(_DWORD *)(a4 + 376) = v339;
          v124 = v79 ^ v123;
          v340 = *(_DWORD *)(a4 + 356) ^ v339;
          *(_DWORD *)(a4 + 380) = v340;
          v168 = v124 ^ v167;
          v341 = *(_DWORD *)(a4 + 360) ^ v340;
          *(_DWORD *)(a4 + 384) = v341;
          v209 = v168 ^ v208;
          v342 = *(_DWORD *)(a4 + 364) ^ v341;
          *(_DWORD *)(a4 + 388) = v342;
          v275 = v209 ^ v274;
          v343 = *(_DWORD *)(a4 + 368) ^ v342;
          *(_DWORD *)(a4 + 392) = v343;
          v304 = v275 ^ v303;
          *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 372) ^ v343;
          v344 = dword_4CF308[HIBYTE(v304)] ^ dword_4CEF08[(unsigned __int8)v304] ^ dword_4CEB08[BYTE1(v304)] ^ dword_4CE708[BYTE2(v304)] ^ 0x20000000;
          v80 = v344 ^ v79;
          v345 = *(_DWORD *)(a4 + 376) ^ dword_4D2308[(unsigned __int8)v344] ^ dword_4D1F08[BYTE1(v344)] ^ dword_4D1B08[BYTE2(v344)] ^ dword_4D1708[HIBYTE(v344)];
          *(_DWORD *)(a4 + 400) = v345;
          v125 = v80 ^ v124;
          v346 = *(_DWORD *)(a4 + 380) ^ v345;
          *(_DWORD *)(a4 + 404) = v346;
          v169 = v125 ^ v168;
          v347 = *(_DWORD *)(a4 + 384) ^ v346;
          *(_DWORD *)(a4 + 408) = v347;
          v210 = v169 ^ v209;
          v348 = *(_DWORD *)(a4 + 388) ^ v347;
          *(_DWORD *)(a4 + 412) = v348;
          v276 = v210 ^ v275;
          v349 = *(_DWORD *)(a4 + 392) ^ v348;
          *(_DWORD *)(a4 + 416) = v349;
          v305 = v276 ^ v304;
          *(_DWORD *)(a4 + 420) = *(_DWORD *)(a4 + 396) ^ v349;
          v350 = dword_4CF308[HIBYTE(v305)] ^ dword_4CEF08[(unsigned __int8)v305] ^ dword_4CEB08[BYTE1(v305)] ^ dword_4CE708[BYTE2(v305)] ^ 0x40000000;
          v81 = v350 ^ v80;
          v351 = *(_DWORD *)(a4 + 400) ^ dword_4D2308[(unsigned __int8)v350] ^ dword_4D1F08[BYTE1(v350)] ^ dword_4D1B08[BYTE2(v350)] ^ dword_4D1708[HIBYTE(v350)];
          *(_DWORD *)(a4 + 424) = v351;
          v126 = v81 ^ v125;
          v352 = *(_DWORD *)(a4 + 404) ^ v351;
          *(_DWORD *)(a4 + 428) = v352;
          v170 = v126 ^ v169;
          v353 = *(_DWORD *)(a4 + 408) ^ v352;
          *(_DWORD *)(a4 + 432) = v353;
          v211 = v170 ^ v210;
          v354 = *(_DWORD *)(a4 + 412) ^ v353;
          *(_DWORD *)(a4 + 436) = v354;
          v355 = *(_DWORD *)(a4 + 416) ^ v354;
          *(_DWORD *)(a4 + 440) = v355;
          v306 = v211 ^ v276 ^ v305;
          *(_DWORD *)(a4 + 444) = *(_DWORD *)(a4 + 420) ^ v355;
          v82 = dword_4CF308[HIBYTE(v306)] ^ dword_4CEF08[(unsigned __int8)v306] ^ dword_4CEB08[BYTE1(v306)] ^ dword_4CE708[BYTE2(v306)] ^ 0x80000000 ^ v81;
          *(_DWORD *)(a4 + 448) = v82;
          v127 = v82 ^ v126;
          *(_DWORD *)(a4 + 452) = v127;
          v171 = v127 ^ v170;
          *(_DWORD *)(a4 + 456) = v171;
          *(_DWORD *)(a4 + 460) = v171 ^ v211;
          *(_DWORD *)(a4 + 512) = 6;
          *(_DWORD *)(a4 + 516) = 12;
          goto LABEL_17;
        case 32:
          v277 = a1[4];
          *(_DWORD *)(a4 + 272) = dword_4D2308[(unsigned __int8)v277] ^ dword_4D1F08[BYTE1(v277)] ^ dword_4D1B08[BYTE2(v277)] ^ dword_4D1708[HIBYTE(v277)];
          v307 = a1[5];
          *(_DWORD *)(a4 + 276) = dword_4D2308[(unsigned __int8)v307] ^ dword_4D1F08[BYTE1(v307)] ^ dword_4D1B08[BYTE2(v307)] ^ dword_4D1708[HIBYTE(v307)];
          v356 = a1[6];
          *(_DWORD *)(a4 + 280) = dword_4D2308[(unsigned __int8)v356] ^ dword_4D1F08[BYTE1(v356)] ^ dword_4D1B08[BYTE2(v356)] ^ dword_4D1708[HIBYTE(v356)];
          v369 = a1[7];
          *(_DWORD *)(a4 + 284) = dword_4D2308[(unsigned __int8)v369] ^ dword_4D1F08[BYTE1(v369)] ^ dword_4D1B08[BYTE2(v369)] ^ dword_4D1708[HIBYTE(v369)];
          v83 = dword_4CF308[HIBYTE(v369)] ^ dword_4CEF08[(unsigned __int8)v369] ^ dword_4CEB08[BYTE1(v369)] ^ dword_4CE708[BYTE2(v369)] ^ 0x1000000 ^ v71;
          *(_DWORD *)(a4 + 288) = dword_4D2308[(unsigned __int8)v83] ^ dword_4D1F08[BYTE1(v83)] ^ dword_4D1B08[BYTE2(v83)] ^ dword_4D1708[HIBYTE(v83)];
          v128 = v83 ^ v116;
          *(_DWORD *)(a4 + 292) = dword_4D2308[(unsigned __int8)v128] ^ dword_4D1F08[BYTE1(v128)] ^ dword_4D1B08[BYTE2(v128)] ^ dword_4D1708[HIBYTE(v128)];
          v172 = v128 ^ v161;
          *(_DWORD *)(a4 + 296) = dword_4D2308[(unsigned __int8)v172] ^ dword_4D1F08[BYTE1(v172)] ^ dword_4D1B08[BYTE2(v172)] ^ dword_4D1708[HIBYTE(v172)];
          v212 = v172 ^ v202;
          *(_DWORD *)(a4 + 300) = dword_4D2308[(unsigned __int8)v212] ^ dword_4D1F08[BYTE1(v212)] ^ dword_4D1B08[BYTE2(v212)] ^ dword_4D1708[HIBYTE(v212)];
          v278 = dword_4CF308[(unsigned __int8)v212] ^ dword_4CEF08[BYTE1(v212)] ^ dword_4CEB08[BYTE2(v212)] ^ dword_4CE708[HIBYTE(v212)] ^ v277;
          *(_DWORD *)(a4 + 304) = dword_4D2308[(unsigned __int8)v278] ^ dword_4D1F08[BYTE1(v278)] ^ dword_4D1B08[BYTE2(v278)] ^ dword_4D1708[HIBYTE(v278)];
          v308 = v278 ^ v307;
          *(_DWORD *)(a4 + 308) = dword_4D2308[(unsigned __int8)v308] ^ dword_4D1F08[BYTE1(v308)] ^ dword_4D1B08[BYTE2(v308)] ^ dword_4D1708[HIBYTE(v308)];
          v357 = v308 ^ v356;
          *(_DWORD *)(a4 + 312) = dword_4D2308[(unsigned __int8)v357] ^ dword_4D1F08[BYTE1(v357)] ^ dword_4D1B08[BYTE2(v357)] ^ dword_4D1708[HIBYTE(v357)];
          v370 = v357 ^ v369;
          *(_DWORD *)(a4 + 316) = dword_4D2308[(unsigned __int8)v370] ^ dword_4D1F08[BYTE1(v370)] ^ dword_4D1B08[BYTE2(v370)] ^ dword_4D1708[HIBYTE(v370)];
          v37 = dword_4CF308[HIBYTE(v370)] ^ dword_4CEF08[(unsigned __int8)v370] ^ dword_4CEB08[BYTE1(v370)] ^ dword_4CE708[BYTE2(v370)] ^ 0x2000000;
          v84 = v37 ^ v83;
          v38 = *(_DWORD *)(a4 + 288) ^ dword_4D2308[(unsigned __int8)v37] ^ dword_4D1F08[BYTE1(v37)] ^ dword_4D1B08[BYTE2(v37)] ^ dword_4D1708[HIBYTE(v37)];
          *(_DWORD *)(a4 + 320) = v38;
          v129 = v84 ^ v128;
          v39 = *(_DWORD *)(a4 + 292) ^ v38;
          *(_DWORD *)(a4 + 324) = v39;
          v173 = v129 ^ v172;
          v40 = *(_DWORD *)(a4 + 296) ^ v39;
          *(_DWORD *)(a4 + 328) = v40;
          v213 = v173 ^ v212;
          *(_DWORD *)(a4 + 332) = *(_DWORD *)(a4 + 300) ^ v40;
          v41 = dword_4CF308[(unsigned __int8)v213] ^ dword_4CEF08[BYTE1(v213)] ^ dword_4CEB08[BYTE2(v213)] ^ dword_4CE708[HIBYTE(v213)];
          v279 = v41 ^ v278;
          v42 = *(_DWORD *)(a4 + 304) ^ dword_4D2308[(unsigned __int8)v41] ^ dword_4D1F08[BYTE1(v41)] ^ dword_4D1B08[BYTE2(v41)] ^ dword_4D1708[HIBYTE(v41)];
          *(_DWORD *)(a4 + 336) = v42;
          v309 = v279 ^ v308;
          v43 = *(_DWORD *)(a4 + 308) ^ v42;
          *(_DWORD *)(a4 + 340) = v43;
          v358 = v309 ^ v357;
          v44 = *(_DWORD *)(a4 + 312) ^ v43;
          *(_DWORD *)(a4 + 344) = v44;
          v371 = v358 ^ v370;
          *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 316) ^ v44;
          v29 = dword_4CF308[HIBYTE(v371)] ^ dword_4CEF08[(unsigned __int8)v371] ^ dword_4CEB08[BYTE1(v371)] ^ dword_4CE708[BYTE2(v371)] ^ 0x4000000;
          v85 = v29 ^ v84;
          v30 = *(_DWORD *)(a4 + 320) ^ dword_4D2308[(unsigned __int8)v29] ^ dword_4D1F08[BYTE1(v29)] ^ dword_4D1B08[BYTE2(v29)] ^ dword_4D1708[HIBYTE(v29)];
          *(_DWORD *)(a4 + 352) = v30;
          v130 = v85 ^ v129;
          v31 = *(_DWORD *)(a4 + 324) ^ v30;
          *(_DWORD *)(a4 + 356) = v31;
          v174 = v130 ^ v173;
          v32 = *(_DWORD *)(a4 + 328) ^ v31;
          *(_DWORD *)(a4 + 360) = v32;
          v214 = v174 ^ v213;
          *(_DWORD *)(a4 + 364) = *(_DWORD *)(a4 + 332) ^ v32;
          v33 = dword_4CF308[(unsigned __int8)v214] ^ dword_4CEF08[BYTE1(v214)] ^ dword_4CEB08[BYTE2(v214)] ^ dword_4CE708[HIBYTE(v214)];
          v280 = v33 ^ v279;
          v34 = *(_DWORD *)(a4 + 336) ^ dword_4D2308[(unsigned __int8)v33] ^ dword_4D1F08[BYTE1(v33)] ^ dword_4D1B08[BYTE2(v33)] ^ dword_4D1708[HIBYTE(v33)];
          *(_DWORD *)(a4 + 368) = v34;
          v310 = v280 ^ v309;
          v35 = *(_DWORD *)(a4 + 340) ^ v34;
          *(_DWORD *)(a4 + 372) = v35;
          v359 = v310 ^ v358;
          v36 = *(_DWORD *)(a4 + 344) ^ v35;
          *(_DWORD *)(a4 + 376) = v36;
          v372 = v359 ^ v371;
          *(_DWORD *)(a4 + 380) = *(_DWORD *)(a4 + 348) ^ v36;
          v21 = dword_4CF308[HIBYTE(v372)] ^ dword_4CEF08[(unsigned __int8)v372] ^ dword_4CEB08[BYTE1(v372)] ^ dword_4CE708[BYTE2(v372)] ^ 0x8000000;
          v86 = v21 ^ v85;
          v22 = *(_DWORD *)(a4 + 352) ^ dword_4D2308[(unsigned __int8)v21] ^ dword_4D1F08[BYTE1(v21)] ^ dword_4D1B08[BYTE2(v21)] ^ dword_4D1708[HIBYTE(v21)];
          *(_DWORD *)(a4 + 384) = v22;
          v131 = v86 ^ v130;
          v23 = *(_DWORD *)(a4 + 356) ^ v22;
          *(_DWORD *)(a4 + 388) = v23;
          v175 = v131 ^ v174;
          v24 = *(_DWORD *)(a4 + 360) ^ v23;
          *(_DWORD *)(a4 + 392) = v24;
          v215 = v175 ^ v214;
          *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 364) ^ v24;
          v25 = dword_4CF308[(unsigned __int8)v215] ^ dword_4CEF08[BYTE1(v215)] ^ dword_4CEB08[BYTE2(v215)] ^ dword_4CE708[HIBYTE(v215)];
          v281 = v25 ^ v280;
          v26 = *(_DWORD *)(a4 + 368) ^ dword_4D2308[(unsigned __int8)v25] ^ dword_4D1F08[BYTE1(v25)] ^ dword_4D1B08[BYTE2(v25)] ^ dword_4D1708[HIBYTE(v25)];
          *(_DWORD *)(a4 + 400) = v26;
          v311 = v281 ^ v310;
          v27 = *(_DWORD *)(a4 + 372) ^ v26;
          *(_DWORD *)(a4 + 404) = v27;
          v360 = v311 ^ v359;
          v28 = *(_DWORD *)(a4 + 376) ^ v27;
          *(_DWORD *)(a4 + 408) = v28;
          v373 = v360 ^ v372;
          *(_DWORD *)(a4 + 412) = *(_DWORD *)(a4 + 380) ^ v28;
          v13 = dword_4CF308[HIBYTE(v373)] ^ dword_4CEF08[(unsigned __int8)v373] ^ dword_4CEB08[BYTE1(v373)] ^ dword_4CE708[BYTE2(v373)] ^ 0x10000000;
          v87 = v13 ^ v86;
          v14 = *(_DWORD *)(a4 + 384) ^ dword_4D2308[(unsigned __int8)v13] ^ dword_4D1F08[BYTE1(v13)] ^ dword_4D1B08[BYTE2(v13)] ^ dword_4D1708[HIBYTE(v13)];
          *(_DWORD *)(a4 + 416) = v14;
          v132 = v87 ^ v131;
          v15 = *(_DWORD *)(a4 + 388) ^ v14;
          *(_DWORD *)(a4 + 420) = v15;
          v176 = v132 ^ v175;
          v16 = *(_DWORD *)(a4 + 392) ^ v15;
          *(_DWORD *)(a4 + 424) = v16;
          v216 = v176 ^ v215;
          *(_DWORD *)(a4 + 428) = *(_DWORD *)(a4 + 396) ^ v16;
          v17 = dword_4CF308[(unsigned __int8)v216] ^ dword_4CEF08[BYTE1(v216)] ^ dword_4CEB08[BYTE2(v216)] ^ dword_4CE708[HIBYTE(v216)];
          v282 = v17 ^ v281;
          v18 = *(_DWORD *)(a4 + 400) ^ dword_4D2308[(unsigned __int8)v17] ^ dword_4D1F08[BYTE1(v17)] ^ dword_4D1B08[BYTE2(v17)] ^ dword_4D1708[HIBYTE(v17)];
          *(_DWORD *)(a4 + 432) = v18;
          v312 = v282 ^ v311;
          v19 = *(_DWORD *)(a4 + 404) ^ v18;
          *(_DWORD *)(a4 + 436) = v19;
          v361 = v312 ^ v360;
          v20 = *(_DWORD *)(a4 + 408) ^ v19;
          *(_DWORD *)(a4 + 440) = v20;
          v374 = v361 ^ v373;
          *(_DWORD *)(a4 + 444) = *(_DWORD *)(a4 + 412) ^ v20;
          v5 = dword_4CF308[HIBYTE(v374)] ^ dword_4CEF08[(unsigned __int8)v374] ^ dword_4CEB08[BYTE1(v374)] ^ dword_4CE708[BYTE2(v374)] ^ 0x20000000;
          v88 = v5 ^ v87;
          v6 = *(_DWORD *)(a4 + 416) ^ dword_4D2308[(unsigned __int8)v5] ^ dword_4D1F08[BYTE1(v5)] ^ dword_4D1B08[BYTE2(v5)] ^ dword_4D1708[HIBYTE(v5)];
          *(_DWORD *)(a4 + 448) = v6;
          v133 = v88 ^ v132;
          v7 = *(_DWORD *)(a4 + 420) ^ v6;
          *(_DWORD *)(a4 + 452) = v7;
          v177 = v133 ^ v176;
          v8 = *(_DWORD *)(a4 + 424) ^ v7;
          *(_DWORD *)(a4 + 456) = v8;
          v217 = v177 ^ v216;
          *(_DWORD *)(a4 + 460) = *(_DWORD *)(a4 + 428) ^ v8;
          v9 = dword_4CF308[(unsigned __int8)v217] ^ dword_4CEF08[BYTE1(v217)] ^ dword_4CEB08[BYTE2(v217)] ^ dword_4CE708[HIBYTE(v217)];
          v283 = v9 ^ v282;
          v10 = *(_DWORD *)(a4 + 432) ^ dword_4D2308[(unsigned __int8)v9] ^ dword_4D1F08[BYTE1(v9)] ^ dword_4D1B08[BYTE2(v9)] ^ dword_4D1708[HIBYTE(v9)];
          *(_DWORD *)(a4 + 464) = v10;
          v11 = *(_DWORD *)(a4 + 436) ^ v10;
          *(_DWORD *)(a4 + 468) = v11;
          v12 = *(_DWORD *)(a4 + 440) ^ v11;
          *(_DWORD *)(a4 + 472) = v12;
          v375 = v283 ^ v312 ^ v361 ^ v374;
          *(_DWORD *)(a4 + 476) = *(_DWORD *)(a4 + 444) ^ v12;
          v89 = dword_4CF308[HIBYTE(v375)] ^ dword_4CEF08[(unsigned __int8)v375] ^ dword_4CEB08[BYTE1(v375)] ^ dword_4CE708[BYTE2(v375)] ^ 0x40000000 ^ v88;
          *(_DWORD *)(a4 + 480) = v89;
          v134 = v89 ^ v133;
          *(_DWORD *)(a4 + 484) = v134;
          v178 = v134 ^ v177;
          *(_DWORD *)(a4 + 488) = v178;
          *(_DWORD *)(a4 + 492) = v178 ^ v217;
          *(_DWORD *)(a4 + 512) = 8;
          *(_DWORD *)(a4 + 516) = 14;
          goto LABEL_17;
        default:
          *(_BYTE *)(a4 + 520) &= 0xFCu;
          result = 0;
          break;
      }
    }
    else
    {
LABEL_17:
      result = 1;
    }
  }
  return result;
}
// 4CD694: using guessed type int dword_4CD694;
// 4CD698: using guessed type int dword_4CD698;
// 4CD69C: using guessed type int dword_4CD69C;
// 4CD6A0: using guessed type int dword_4CD6A0;
// 4CD6A4: using guessed type int dword_4CD6A4;
// 4CD6A8: using guessed type int dword_4CD6A8;
// 4CD6AC: using guessed type int dword_4CD6AC;
// 4CD6B0: using guessed type int dword_4CD6B0;
// 4CD6B4: using guessed type int dword_4CD6B4;
// 4CD6B8: using guessed type int dword_4CD6B8;

//----- (0049C998) --------------------------------------------------------
__int16 __cdecl aes_encrypt(_DWORD *a1, int *a2, int a3)
{
  int v4; // [esp+0h] [ebp-28h]
  int v5; // [esp+4h] [ebp-24h]
  int v6; // [esp+4h] [ebp-24h]
  int v7; // [esp+4h] [ebp-24h]
  int v8; // [esp+4h] [ebp-24h]
  int v9; // [esp+4h] [ebp-24h]
  int v10; // [esp+4h] [ebp-24h]
  int v11; // [esp+4h] [ebp-24h]
  int v12; // [esp+8h] [ebp-20h]
  int v13; // [esp+8h] [ebp-20h]
  int v14; // [esp+8h] [ebp-20h]
  int v15; // [esp+8h] [ebp-20h]
  int v16; // [esp+8h] [ebp-20h]
  int v17; // [esp+8h] [ebp-20h]
  int v18; // [esp+8h] [ebp-20h]
  int v19; // [esp+Ch] [ebp-1Ch]
  int v20; // [esp+Ch] [ebp-1Ch]
  int v21; // [esp+Ch] [ebp-1Ch]
  int v22; // [esp+Ch] [ebp-1Ch]
  int v23; // [esp+Ch] [ebp-1Ch]
  int v24; // [esp+Ch] [ebp-1Ch]
  int v25; // [esp+Ch] [ebp-1Ch]
  int v26; // [esp+10h] [ebp-18h]
  int v27; // [esp+10h] [ebp-18h]
  int v28; // [esp+10h] [ebp-18h]
  int v29; // [esp+10h] [ebp-18h]
  int v30; // [esp+10h] [ebp-18h]
  int v31; // [esp+10h] [ebp-18h]
  int v32; // [esp+10h] [ebp-18h]
  int v33; // [esp+14h] [ebp-14h]
  int v34; // [esp+14h] [ebp-14h]
  int v35; // [esp+14h] [ebp-14h]
  int v36; // [esp+14h] [ebp-14h]
  int v37; // [esp+14h] [ebp-14h]
  int v38; // [esp+18h] [ebp-10h]
  int v39; // [esp+18h] [ebp-10h]
  int v40; // [esp+18h] [ebp-10h]
  int v41; // [esp+18h] [ebp-10h]
  int v42; // [esp+18h] [ebp-10h]
  int v43; // [esp+1Ch] [ebp-Ch]
  int v44; // [esp+1Ch] [ebp-Ch]
  int v45; // [esp+1Ch] [ebp-Ch]
  int v46; // [esp+1Ch] [ebp-Ch]
  int v47; // [esp+1Ch] [ebp-Ch]
  int v48; // [esp+20h] [ebp-8h]
  int v49; // [esp+20h] [ebp-8h]
  int v50; // [esp+20h] [ebp-8h]
  int v51; // [esp+20h] [ebp-8h]
  int v52; // [esp+20h] [ebp-8h]
  _DWORD *v53; // [esp+24h] [ebp-4h]

  if ( (*(_BYTE *)(a3 + 520) & 1) == 0 )
    return 0;
  v33 = *(_DWORD *)a3 ^ *a1;
  v38 = *(_DWORD *)(a3 + 4) ^ a1[1];
  v43 = *(_DWORD *)(a3 + 8) ^ a1[2];
  v48 = *(_DWORD *)(a3 + 12) ^ a1[3];
  v53 = (_DWORD *)(a3 + 4 * (4 * *(_DWORD *)(a3 + 516) - 36));
  v4 = *(_DWORD *)(a3 + 516);
  switch ( v4 )
  {
    case 10:
      goto LABEL_8;
    case 12:
LABEL_7:
      v6 = dword_4CE308[(unsigned __int8)v48] ^ dword_4CDF08[BYTE1(v43)] ^ dword_4CDB08[BYTE2(v38)] ^ dword_4CD708[HIBYTE(v33)] ^ *(v53 - 8);
      v13 = dword_4CE308[(unsigned __int8)v33] ^ dword_4CDF08[BYTE1(v48)] ^ dword_4CDB08[BYTE2(v43)] ^ dword_4CD708[HIBYTE(v38)] ^ *(v53 - 7);
      v20 = dword_4CE308[(unsigned __int8)v38] ^ dword_4CDF08[BYTE1(v33)] ^ dword_4CDB08[BYTE2(v48)] ^ dword_4CD708[HIBYTE(v43)] ^ *(v53 - 6);
      v27 = dword_4CE308[(unsigned __int8)v43] ^ dword_4CDF08[BYTE1(v38)] ^ dword_4CDB08[BYTE2(v33)] ^ dword_4CD708[HIBYTE(v48)] ^ *(v53 - 5);
      v33 = dword_4CE308[(unsigned __int8)v27] ^ dword_4CDF08[BYTE1(v20)] ^ dword_4CDB08[BYTE2(v13)] ^ dword_4CD708[HIBYTE(v6)] ^ *(v53 - 4);
      v38 = dword_4CE308[(unsigned __int8)v6] ^ dword_4CDF08[BYTE1(v27)] ^ dword_4CDB08[BYTE2(v20)] ^ dword_4CD708[HIBYTE(v13)] ^ *(v53 - 3);
      v43 = dword_4CE308[(unsigned __int8)v13] ^ dword_4CDF08[BYTE1(v6)] ^ dword_4CDB08[BYTE2(v27)] ^ dword_4CD708[HIBYTE(v20)] ^ *(v53 - 2);
      v48 = dword_4CE308[(unsigned __int8)v20] ^ dword_4CDF08[BYTE1(v13)] ^ dword_4CDB08[BYTE2(v6)] ^ dword_4CD708[HIBYTE(v27)] ^ *(v53 - 1);
LABEL_8:
      v7 = dword_4CE308[(unsigned __int8)v48] ^ dword_4CDF08[BYTE1(v43)] ^ dword_4CDB08[BYTE2(v38)] ^ dword_4CD708[HIBYTE(v33)] ^ *v53;
      v14 = dword_4CE308[(unsigned __int8)v33] ^ dword_4CDF08[BYTE1(v48)] ^ dword_4CDB08[BYTE2(v43)] ^ dword_4CD708[HIBYTE(v38)] ^ v53[1];
      v21 = dword_4CE308[(unsigned __int8)v38] ^ dword_4CDF08[BYTE1(v33)] ^ dword_4CDB08[BYTE2(v48)] ^ dword_4CD708[HIBYTE(v43)] ^ v53[2];
      v28 = dword_4CE308[(unsigned __int8)v43] ^ dword_4CDF08[BYTE1(v38)] ^ dword_4CDB08[BYTE2(v33)] ^ dword_4CD708[HIBYTE(v48)] ^ v53[3];
      v34 = dword_4CE308[(unsigned __int8)v28] ^ dword_4CDF08[BYTE1(v21)] ^ dword_4CDB08[BYTE2(v14)] ^ dword_4CD708[HIBYTE(v7)] ^ v53[4];
      v39 = dword_4CE308[(unsigned __int8)v7] ^ dword_4CDF08[BYTE1(v28)] ^ dword_4CDB08[BYTE2(v21)] ^ dword_4CD708[HIBYTE(v14)] ^ v53[5];
      v44 = dword_4CE308[(unsigned __int8)v14] ^ dword_4CDF08[BYTE1(v7)] ^ dword_4CDB08[BYTE2(v28)] ^ dword_4CD708[HIBYTE(v21)] ^ v53[6];
      v49 = dword_4CE308[(unsigned __int8)v21] ^ dword_4CDF08[BYTE1(v14)] ^ dword_4CDB08[BYTE2(v7)] ^ dword_4CD708[HIBYTE(v28)] ^ v53[7];
      v8 = dword_4CE308[(unsigned __int8)v49] ^ dword_4CDF08[BYTE1(v44)] ^ dword_4CDB08[BYTE2(v39)] ^ dword_4CD708[HIBYTE(v34)] ^ v53[8];
      v15 = dword_4CE308[(unsigned __int8)v34] ^ dword_4CDF08[BYTE1(v49)] ^ dword_4CDB08[BYTE2(v44)] ^ dword_4CD708[HIBYTE(v39)] ^ v53[9];
      v22 = dword_4CE308[(unsigned __int8)v39] ^ dword_4CDF08[BYTE1(v34)] ^ dword_4CDB08[BYTE2(v49)] ^ dword_4CD708[HIBYTE(v44)] ^ v53[10];
      v29 = dword_4CE308[(unsigned __int8)v44] ^ dword_4CDF08[BYTE1(v39)] ^ dword_4CDB08[BYTE2(v34)] ^ dword_4CD708[HIBYTE(v49)] ^ v53[11];
      v35 = dword_4CE308[(unsigned __int8)v29] ^ dword_4CDF08[BYTE1(v22)] ^ dword_4CDB08[BYTE2(v15)] ^ dword_4CD708[HIBYTE(v8)] ^ v53[12];
      v40 = dword_4CE308[(unsigned __int8)v8] ^ dword_4CDF08[BYTE1(v29)] ^ dword_4CDB08[BYTE2(v22)] ^ dword_4CD708[HIBYTE(v15)] ^ v53[13];
      v45 = dword_4CE308[(unsigned __int8)v15] ^ dword_4CDF08[BYTE1(v8)] ^ dword_4CDB08[BYTE2(v29)] ^ dword_4CD708[HIBYTE(v22)] ^ v53[14];
      v50 = dword_4CE308[(unsigned __int8)v22] ^ dword_4CDF08[BYTE1(v15)] ^ dword_4CDB08[BYTE2(v8)] ^ dword_4CD708[HIBYTE(v29)] ^ v53[15];
      v9 = dword_4CE308[(unsigned __int8)v50] ^ dword_4CDF08[BYTE1(v45)] ^ dword_4CDB08[BYTE2(v40)] ^ dword_4CD708[HIBYTE(v35)] ^ v53[16];
      v16 = dword_4CE308[(unsigned __int8)v35] ^ dword_4CDF08[BYTE1(v50)] ^ dword_4CDB08[BYTE2(v45)] ^ dword_4CD708[HIBYTE(v40)] ^ v53[17];
      v23 = dword_4CE308[(unsigned __int8)v40] ^ dword_4CDF08[BYTE1(v35)] ^ dword_4CDB08[BYTE2(v50)] ^ dword_4CD708[HIBYTE(v45)] ^ v53[18];
      v30 = dword_4CE308[(unsigned __int8)v45] ^ dword_4CDF08[BYTE1(v40)] ^ dword_4CDB08[BYTE2(v35)] ^ dword_4CD708[HIBYTE(v50)] ^ v53[19];
      v36 = dword_4CE308[(unsigned __int8)v30] ^ dword_4CDF08[BYTE1(v23)] ^ dword_4CDB08[BYTE2(v16)] ^ dword_4CD708[HIBYTE(v9)] ^ v53[20];
      v41 = dword_4CE308[(unsigned __int8)v9] ^ dword_4CDF08[BYTE1(v30)] ^ dword_4CDB08[BYTE2(v23)] ^ dword_4CD708[HIBYTE(v16)] ^ v53[21];
      v46 = dword_4CE308[(unsigned __int8)v16] ^ dword_4CDF08[BYTE1(v9)] ^ dword_4CDB08[BYTE2(v30)] ^ dword_4CD708[HIBYTE(v23)] ^ v53[22];
      v51 = dword_4CE308[(unsigned __int8)v23] ^ dword_4CDF08[BYTE1(v16)] ^ dword_4CDB08[BYTE2(v9)] ^ dword_4CD708[HIBYTE(v30)] ^ v53[23];
      v10 = dword_4CE308[(unsigned __int8)v51] ^ dword_4CDF08[BYTE1(v46)] ^ dword_4CDB08[BYTE2(v41)] ^ dword_4CD708[HIBYTE(v36)] ^ v53[24];
      v17 = dword_4CE308[(unsigned __int8)v36] ^ dword_4CDF08[BYTE1(v51)] ^ dword_4CDB08[BYTE2(v46)] ^ dword_4CD708[HIBYTE(v41)] ^ v53[25];
      v24 = dword_4CE308[(unsigned __int8)v41] ^ dword_4CDF08[BYTE1(v36)] ^ dword_4CDB08[BYTE2(v51)] ^ dword_4CD708[HIBYTE(v46)] ^ v53[26];
      v31 = dword_4CE308[(unsigned __int8)v46] ^ dword_4CDF08[BYTE1(v41)] ^ dword_4CDB08[BYTE2(v36)] ^ dword_4CD708[HIBYTE(v51)] ^ v53[27];
      v37 = dword_4CE308[(unsigned __int8)v31] ^ dword_4CDF08[BYTE1(v24)] ^ dword_4CDB08[BYTE2(v17)] ^ dword_4CD708[HIBYTE(v10)] ^ v53[28];
      v42 = dword_4CE308[(unsigned __int8)v10] ^ dword_4CDF08[BYTE1(v31)] ^ dword_4CDB08[BYTE2(v24)] ^ dword_4CD708[HIBYTE(v17)] ^ v53[29];
      v47 = dword_4CE308[(unsigned __int8)v17] ^ dword_4CDF08[BYTE1(v10)] ^ dword_4CDB08[BYTE2(v31)] ^ dword_4CD708[HIBYTE(v24)] ^ v53[30];
      v52 = dword_4CE308[(unsigned __int8)v24] ^ dword_4CDF08[BYTE1(v17)] ^ dword_4CDB08[BYTE2(v10)] ^ dword_4CD708[HIBYTE(v31)] ^ v53[31];
      v11 = dword_4CE308[(unsigned __int8)v52] ^ dword_4CDF08[BYTE1(v47)] ^ dword_4CDB08[BYTE2(v42)] ^ dword_4CD708[HIBYTE(v37)] ^ v53[32];
      v18 = dword_4CE308[(unsigned __int8)v37] ^ dword_4CDF08[BYTE1(v52)] ^ dword_4CDB08[BYTE2(v47)] ^ dword_4CD708[HIBYTE(v42)] ^ v53[33];
      v25 = dword_4CE308[(unsigned __int8)v42] ^ dword_4CDF08[BYTE1(v37)] ^ dword_4CDB08[BYTE2(v52)] ^ dword_4CD708[HIBYTE(v47)] ^ v53[34];
      v32 = dword_4CE308[(unsigned __int8)v47] ^ dword_4CDF08[BYTE1(v42)] ^ dword_4CDB08[BYTE2(v37)] ^ dword_4CD708[HIBYTE(v52)] ^ v53[35];
      v33 = dword_4CF308[(unsigned __int8)v32] ^ dword_4CEF08[BYTE1(v25)] ^ dword_4CEB08[BYTE2(v18)] ^ dword_4CE708[HIBYTE(v11)] ^ v53[36];
      v38 = dword_4CF308[(unsigned __int8)v11] ^ dword_4CEF08[BYTE1(v32)] ^ dword_4CEB08[BYTE2(v25)] ^ dword_4CE708[HIBYTE(v18)] ^ v53[37];
      v43 = dword_4CF308[(unsigned __int8)v18] ^ dword_4CEF08[BYTE1(v11)] ^ dword_4CEB08[BYTE2(v32)] ^ dword_4CE708[HIBYTE(v25)] ^ v53[38];
      v48 = dword_4CF308[(unsigned __int8)v25] ^ dword_4CEF08[BYTE1(v18)] ^ dword_4CEB08[BYTE2(v11)] ^ dword_4CE708[HIBYTE(v32)] ^ v53[39];
      break;
    case 14:
      v5 = dword_4CE308[(unsigned __int8)v48] ^ dword_4CDF08[BYTE1(v43)] ^ dword_4CDB08[BYTE2(v38)] ^ dword_4CD708[HIBYTE(v33)] ^ *(v53 - 16);
      v12 = dword_4CE308[(unsigned __int8)v33] ^ dword_4CDF08[BYTE1(v48)] ^ dword_4CDB08[BYTE2(v43)] ^ dword_4CD708[HIBYTE(v38)] ^ *(v53 - 15);
      v19 = dword_4CE308[(unsigned __int8)v38] ^ dword_4CDF08[BYTE1(v33)] ^ dword_4CDB08[BYTE2(v48)] ^ dword_4CD708[HIBYTE(v43)] ^ *(v53 - 14);
      v26 = dword_4CE308[(unsigned __int8)v43] ^ dword_4CDF08[BYTE1(v38)] ^ dword_4CDB08[BYTE2(v33)] ^ dword_4CD708[HIBYTE(v48)] ^ *(v53 - 13);
      v33 = dword_4CE308[(unsigned __int8)v26] ^ dword_4CDF08[BYTE1(v19)] ^ dword_4CDB08[BYTE2(v12)] ^ dword_4CD708[HIBYTE(v5)] ^ *(v53 - 12);
      v38 = dword_4CE308[(unsigned __int8)v5] ^ dword_4CDF08[BYTE1(v26)] ^ dword_4CDB08[BYTE2(v19)] ^ dword_4CD708[HIBYTE(v12)] ^ *(v53 - 11);
      v43 = dword_4CE308[(unsigned __int8)v12] ^ dword_4CDF08[BYTE1(v5)] ^ dword_4CDB08[BYTE2(v26)] ^ dword_4CD708[HIBYTE(v19)] ^ *(v53 - 10);
      v48 = dword_4CE308[(unsigned __int8)v19] ^ dword_4CDF08[BYTE1(v12)] ^ dword_4CDB08[BYTE2(v5)] ^ dword_4CD708[HIBYTE(v26)] ^ *(v53 - 9);
      goto LABEL_7;
  }
  *a2 = v33;
  a2[1] = v38;
  a2[2] = v43;
  a2[3] = v48;
  return 1;
}

//----- (0049DCC7) --------------------------------------------------------
__int16 __cdecl aes_decrypt(_DWORD *a1, int *a2, int a3)
{
  int v4; // [esp+0h] [ebp-28h]
  int v5; // [esp+4h] [ebp-24h]
  int v6; // [esp+4h] [ebp-24h]
  int v7; // [esp+4h] [ebp-24h]
  int v8; // [esp+4h] [ebp-24h]
  int v9; // [esp+4h] [ebp-24h]
  int v10; // [esp+4h] [ebp-24h]
  int v11; // [esp+4h] [ebp-24h]
  int v12; // [esp+8h] [ebp-20h]
  int v13; // [esp+8h] [ebp-20h]
  int v14; // [esp+8h] [ebp-20h]
  int v15; // [esp+8h] [ebp-20h]
  int v16; // [esp+8h] [ebp-20h]
  int v17; // [esp+8h] [ebp-20h]
  int v18; // [esp+8h] [ebp-20h]
  int v19; // [esp+Ch] [ebp-1Ch]
  int v20; // [esp+Ch] [ebp-1Ch]
  int v21; // [esp+Ch] [ebp-1Ch]
  int v22; // [esp+Ch] [ebp-1Ch]
  int v23; // [esp+Ch] [ebp-1Ch]
  int v24; // [esp+Ch] [ebp-1Ch]
  int v25; // [esp+Ch] [ebp-1Ch]
  int v26; // [esp+10h] [ebp-18h]
  int v27; // [esp+10h] [ebp-18h]
  int v28; // [esp+10h] [ebp-18h]
  int v29; // [esp+10h] [ebp-18h]
  int v30; // [esp+10h] [ebp-18h]
  int v31; // [esp+10h] [ebp-18h]
  int v32; // [esp+10h] [ebp-18h]
  int v33; // [esp+14h] [ebp-14h]
  int v34; // [esp+14h] [ebp-14h]
  int v35; // [esp+14h] [ebp-14h]
  int v36; // [esp+14h] [ebp-14h]
  int v37; // [esp+14h] [ebp-14h]
  int v38; // [esp+18h] [ebp-10h]
  int v39; // [esp+18h] [ebp-10h]
  int v40; // [esp+18h] [ebp-10h]
  int v41; // [esp+18h] [ebp-10h]
  int v42; // [esp+18h] [ebp-10h]
  int v43; // [esp+1Ch] [ebp-Ch]
  int v44; // [esp+1Ch] [ebp-Ch]
  int v45; // [esp+1Ch] [ebp-Ch]
  int v46; // [esp+1Ch] [ebp-Ch]
  int v47; // [esp+1Ch] [ebp-Ch]
  int v48; // [esp+20h] [ebp-8h]
  int v49; // [esp+20h] [ebp-8h]
  int v50; // [esp+20h] [ebp-8h]
  int v51; // [esp+20h] [ebp-8h]
  int v52; // [esp+20h] [ebp-8h]

  if ( (*(_BYTE *)(a3 + 520) & 2) == 0 )
    return 0;
  v33 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 256) ^ *a1;
  v38 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 260) ^ a1[1];
  v43 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 264) ^ a1[2];
  v48 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 268) ^ a1[3];
  v4 = *(_DWORD *)(a3 + 516);
  switch ( v4 )
  {
    case 10:
      goto LABEL_8;
    case 12:
LABEL_7:
      v6 = dword_4D0308[(unsigned __int8)v38] ^ dword_4CFF08[BYTE1(v43)] ^ dword_4CFB08[BYTE2(v48)] ^ dword_4CF708[HIBYTE(v33)] ^ *(_DWORD *)(a3 + 432);
      v13 = dword_4D0308[(unsigned __int8)v43] ^ dword_4CFF08[BYTE1(v48)] ^ dword_4CFB08[BYTE2(v33)] ^ dword_4CF708[HIBYTE(v38)] ^ *(_DWORD *)(a3 + 436);
      v20 = dword_4D0308[(unsigned __int8)v48] ^ dword_4CFF08[BYTE1(v33)] ^ dword_4CFB08[BYTE2(v38)] ^ dword_4CF708[HIBYTE(v43)] ^ *(_DWORD *)(a3 + 440);
      v27 = dword_4D0308[(unsigned __int8)v33] ^ dword_4CFF08[BYTE1(v38)] ^ dword_4CFB08[BYTE2(v43)] ^ dword_4CF708[HIBYTE(v48)] ^ *(_DWORD *)(a3 + 444);
      v33 = dword_4D0308[(unsigned __int8)v13] ^ dword_4CFF08[BYTE1(v20)] ^ dword_4CFB08[BYTE2(v27)] ^ dword_4CF708[HIBYTE(v6)] ^ *(_DWORD *)(a3 + 416);
      v38 = dword_4D0308[(unsigned __int8)v20] ^ dword_4CFF08[BYTE1(v27)] ^ dword_4CFB08[BYTE2(v6)] ^ dword_4CF708[HIBYTE(v13)] ^ *(_DWORD *)(a3 + 420);
      v43 = dword_4D0308[(unsigned __int8)v27] ^ dword_4CFF08[BYTE1(v6)] ^ dword_4CFB08[BYTE2(v13)] ^ dword_4CF708[HIBYTE(v20)] ^ *(_DWORD *)(a3 + 424);
      v48 = dword_4D0308[(unsigned __int8)v6] ^ dword_4CFF08[BYTE1(v13)] ^ dword_4CFB08[BYTE2(v20)] ^ dword_4CF708[HIBYTE(v27)] ^ *(_DWORD *)(a3 + 428);
LABEL_8:
      v7 = dword_4D0308[(unsigned __int8)v38] ^ dword_4CFF08[BYTE1(v43)] ^ dword_4CFB08[BYTE2(v48)] ^ dword_4CF708[HIBYTE(v33)] ^ *(_DWORD *)(a3 + 400);
      v14 = dword_4D0308[(unsigned __int8)v43] ^ dword_4CFF08[BYTE1(v48)] ^ dword_4CFB08[BYTE2(v33)] ^ dword_4CF708[HIBYTE(v38)] ^ *(_DWORD *)(a3 + 404);
      v21 = dword_4D0308[(unsigned __int8)v48] ^ dword_4CFF08[BYTE1(v33)] ^ dword_4CFB08[BYTE2(v38)] ^ dword_4CF708[HIBYTE(v43)] ^ *(_DWORD *)(a3 + 408);
      v28 = dword_4D0308[(unsigned __int8)v33] ^ dword_4CFF08[BYTE1(v38)] ^ dword_4CFB08[BYTE2(v43)] ^ dword_4CF708[HIBYTE(v48)] ^ *(_DWORD *)(a3 + 412);
      v34 = dword_4D0308[(unsigned __int8)v14] ^ dword_4CFF08[BYTE1(v21)] ^ dword_4CFB08[BYTE2(v28)] ^ dword_4CF708[HIBYTE(v7)] ^ *(_DWORD *)(a3 + 384);
      v39 = dword_4D0308[(unsigned __int8)v21] ^ dword_4CFF08[BYTE1(v28)] ^ dword_4CFB08[BYTE2(v7)] ^ dword_4CF708[HIBYTE(v14)] ^ *(_DWORD *)(a3 + 388);
      v44 = dword_4D0308[(unsigned __int8)v28] ^ dword_4CFF08[BYTE1(v7)] ^ dword_4CFB08[BYTE2(v14)] ^ dword_4CF708[HIBYTE(v21)] ^ *(_DWORD *)(a3 + 392);
      v49 = dword_4D0308[(unsigned __int8)v7] ^ dword_4CFF08[BYTE1(v14)] ^ dword_4CFB08[BYTE2(v21)] ^ dword_4CF708[HIBYTE(v28)] ^ *(_DWORD *)(a3 + 396);
      v8 = dword_4D0308[(unsigned __int8)v39] ^ dword_4CFF08[BYTE1(v44)] ^ dword_4CFB08[BYTE2(v49)] ^ dword_4CF708[HIBYTE(v34)] ^ *(_DWORD *)(a3 + 368);
      v15 = dword_4D0308[(unsigned __int8)v44] ^ dword_4CFF08[BYTE1(v49)] ^ dword_4CFB08[BYTE2(v34)] ^ dword_4CF708[HIBYTE(v39)] ^ *(_DWORD *)(a3 + 372);
      v22 = dword_4D0308[(unsigned __int8)v49] ^ dword_4CFF08[BYTE1(v34)] ^ dword_4CFB08[BYTE2(v39)] ^ dword_4CF708[HIBYTE(v44)] ^ *(_DWORD *)(a3 + 376);
      v29 = dword_4D0308[(unsigned __int8)v34] ^ dword_4CFF08[BYTE1(v39)] ^ dword_4CFB08[BYTE2(v44)] ^ dword_4CF708[HIBYTE(v49)] ^ *(_DWORD *)(a3 + 380);
      v35 = dword_4D0308[(unsigned __int8)v15] ^ dword_4CFF08[BYTE1(v22)] ^ dword_4CFB08[BYTE2(v29)] ^ dword_4CF708[HIBYTE(v8)] ^ *(_DWORD *)(a3 + 352);
      v40 = dword_4D0308[(unsigned __int8)v22] ^ dword_4CFF08[BYTE1(v29)] ^ dword_4CFB08[BYTE2(v8)] ^ dword_4CF708[HIBYTE(v15)] ^ *(_DWORD *)(a3 + 356);
      v45 = dword_4D0308[(unsigned __int8)v29] ^ dword_4CFF08[BYTE1(v8)] ^ dword_4CFB08[BYTE2(v15)] ^ dword_4CF708[HIBYTE(v22)] ^ *(_DWORD *)(a3 + 360);
      v50 = dword_4D0308[(unsigned __int8)v8] ^ dword_4CFF08[BYTE1(v15)] ^ dword_4CFB08[BYTE2(v22)] ^ dword_4CF708[HIBYTE(v29)] ^ *(_DWORD *)(a3 + 364);
      v9 = dword_4D0308[(unsigned __int8)v40] ^ dword_4CFF08[BYTE1(v45)] ^ dword_4CFB08[BYTE2(v50)] ^ dword_4CF708[HIBYTE(v35)] ^ *(_DWORD *)(a3 + 336);
      v16 = dword_4D0308[(unsigned __int8)v45] ^ dword_4CFF08[BYTE1(v50)] ^ dword_4CFB08[BYTE2(v35)] ^ dword_4CF708[HIBYTE(v40)] ^ *(_DWORD *)(a3 + 340);
      v23 = dword_4D0308[(unsigned __int8)v50] ^ dword_4CFF08[BYTE1(v35)] ^ dword_4CFB08[BYTE2(v40)] ^ dword_4CF708[HIBYTE(v45)] ^ *(_DWORD *)(a3 + 344);
      v30 = dword_4D0308[(unsigned __int8)v35] ^ dword_4CFF08[BYTE1(v40)] ^ dword_4CFB08[BYTE2(v45)] ^ dword_4CF708[HIBYTE(v50)] ^ *(_DWORD *)(a3 + 348);
      v36 = dword_4D0308[(unsigned __int8)v16] ^ dword_4CFF08[BYTE1(v23)] ^ dword_4CFB08[BYTE2(v30)] ^ dword_4CF708[HIBYTE(v9)] ^ *(_DWORD *)(a3 + 320);
      v41 = dword_4D0308[(unsigned __int8)v23] ^ dword_4CFF08[BYTE1(v30)] ^ dword_4CFB08[BYTE2(v9)] ^ dword_4CF708[HIBYTE(v16)] ^ *(_DWORD *)(a3 + 324);
      v46 = dword_4D0308[(unsigned __int8)v30] ^ dword_4CFF08[BYTE1(v9)] ^ dword_4CFB08[BYTE2(v16)] ^ dword_4CF708[HIBYTE(v23)] ^ *(_DWORD *)(a3 + 328);
      v51 = dword_4D0308[(unsigned __int8)v9] ^ dword_4CFF08[BYTE1(v16)] ^ dword_4CFB08[BYTE2(v23)] ^ dword_4CF708[HIBYTE(v30)] ^ *(_DWORD *)(a3 + 332);
      v10 = dword_4D0308[(unsigned __int8)v41] ^ dword_4CFF08[BYTE1(v46)] ^ dword_4CFB08[BYTE2(v51)] ^ dword_4CF708[HIBYTE(v36)] ^ *(_DWORD *)(a3 + 304);
      v17 = dword_4D0308[(unsigned __int8)v46] ^ dword_4CFF08[BYTE1(v51)] ^ dword_4CFB08[BYTE2(v36)] ^ dword_4CF708[HIBYTE(v41)] ^ *(_DWORD *)(a3 + 308);
      v24 = dword_4D0308[(unsigned __int8)v51] ^ dword_4CFF08[BYTE1(v36)] ^ dword_4CFB08[BYTE2(v41)] ^ dword_4CF708[HIBYTE(v46)] ^ *(_DWORD *)(a3 + 312);
      v31 = dword_4D0308[(unsigned __int8)v36] ^ dword_4CFF08[BYTE1(v41)] ^ dword_4CFB08[BYTE2(v46)] ^ dword_4CF708[HIBYTE(v51)] ^ *(_DWORD *)(a3 + 316);
      v37 = dword_4D0308[(unsigned __int8)v17] ^ dword_4CFF08[BYTE1(v24)] ^ dword_4CFB08[BYTE2(v31)] ^ dword_4CF708[HIBYTE(v10)] ^ *(_DWORD *)(a3 + 288);
      v42 = dword_4D0308[(unsigned __int8)v24] ^ dword_4CFF08[BYTE1(v31)] ^ dword_4CFB08[BYTE2(v10)] ^ dword_4CF708[HIBYTE(v17)] ^ *(_DWORD *)(a3 + 292);
      v47 = dword_4D0308[(unsigned __int8)v31] ^ dword_4CFF08[BYTE1(v10)] ^ dword_4CFB08[BYTE2(v17)] ^ dword_4CF708[HIBYTE(v24)] ^ *(_DWORD *)(a3 + 296);
      v52 = dword_4D0308[(unsigned __int8)v10] ^ dword_4CFF08[BYTE1(v17)] ^ dword_4CFB08[BYTE2(v24)] ^ dword_4CF708[HIBYTE(v31)] ^ *(_DWORD *)(a3 + 300);
      v11 = dword_4D0308[(unsigned __int8)v42] ^ dword_4CFF08[BYTE1(v47)] ^ dword_4CFB08[BYTE2(v52)] ^ dword_4CF708[HIBYTE(v37)] ^ *(_DWORD *)(a3 + 272);
      v18 = dword_4D0308[(unsigned __int8)v47] ^ dword_4CFF08[BYTE1(v52)] ^ dword_4CFB08[BYTE2(v37)] ^ dword_4CF708[HIBYTE(v42)] ^ *(_DWORD *)(a3 + 276);
      v25 = dword_4D0308[(unsigned __int8)v52] ^ dword_4CFF08[BYTE1(v37)] ^ dword_4CFB08[BYTE2(v42)] ^ dword_4CF708[HIBYTE(v47)] ^ *(_DWORD *)(a3 + 280);
      v32 = dword_4D0308[(unsigned __int8)v37] ^ dword_4CFF08[BYTE1(v42)] ^ dword_4CFB08[BYTE2(v47)] ^ dword_4CF708[HIBYTE(v52)] ^ *(_DWORD *)(a3 + 284);
      v33 = dword_4D1308[(unsigned __int8)v18] ^ dword_4D0F08[BYTE1(v25)] ^ dword_4D0B08[BYTE2(v32)] ^ dword_4D0708[HIBYTE(v11)] ^ *(_DWORD *)(a3 + 256);
      v38 = dword_4D1308[(unsigned __int8)v25] ^ dword_4D0F08[BYTE1(v32)] ^ dword_4D0B08[BYTE2(v11)] ^ dword_4D0708[HIBYTE(v18)] ^ *(_DWORD *)(a3 + 260);
      v43 = dword_4D1308[(unsigned __int8)v32] ^ dword_4D0F08[BYTE1(v11)] ^ dword_4D0B08[BYTE2(v18)] ^ dword_4D0708[HIBYTE(v25)] ^ *(_DWORD *)(a3 + 264);
      v48 = dword_4D1308[(unsigned __int8)v11] ^ dword_4D0F08[BYTE1(v18)] ^ dword_4D0B08[BYTE2(v25)] ^ dword_4D0708[HIBYTE(v32)] ^ *(_DWORD *)(a3 + 268);
      break;
    case 14:
      v5 = dword_4D0308[(unsigned __int8)v38] ^ dword_4CFF08[BYTE1(v43)] ^ dword_4CFB08[BYTE2(v48)] ^ dword_4CF708[HIBYTE(v33)] ^ *(_DWORD *)(a3 + 464);
      v12 = dword_4D0308[(unsigned __int8)v43] ^ dword_4CFF08[BYTE1(v48)] ^ dword_4CFB08[BYTE2(v33)] ^ dword_4CF708[HIBYTE(v38)] ^ *(_DWORD *)(a3 + 468);
      v19 = dword_4D0308[(unsigned __int8)v48] ^ dword_4CFF08[BYTE1(v33)] ^ dword_4CFB08[BYTE2(v38)] ^ dword_4CF708[HIBYTE(v43)] ^ *(_DWORD *)(a3 + 472);
      v26 = dword_4D0308[(unsigned __int8)v33] ^ dword_4CFF08[BYTE1(v38)] ^ dword_4CFB08[BYTE2(v43)] ^ dword_4CF708[HIBYTE(v48)] ^ *(_DWORD *)(a3 + 476);
      v33 = dword_4D0308[(unsigned __int8)v12] ^ dword_4CFF08[BYTE1(v19)] ^ dword_4CFB08[BYTE2(v26)] ^ dword_4CF708[HIBYTE(v5)] ^ *(_DWORD *)(a3 + 448);
      v38 = dword_4D0308[(unsigned __int8)v19] ^ dword_4CFF08[BYTE1(v26)] ^ dword_4CFB08[BYTE2(v5)] ^ dword_4CF708[HIBYTE(v12)] ^ *(_DWORD *)(a3 + 452);
      v43 = dword_4D0308[(unsigned __int8)v26] ^ dword_4CFF08[BYTE1(v5)] ^ dword_4CFB08[BYTE2(v12)] ^ dword_4CF708[HIBYTE(v19)] ^ *(_DWORD *)(a3 + 456);
      v48 = dword_4D0308[(unsigned __int8)v5] ^ dword_4CFF08[BYTE1(v12)] ^ dword_4CFB08[BYTE2(v19)] ^ dword_4CF708[HIBYTE(v26)] ^ *(_DWORD *)(a3 + 460);
      goto LABEL_7;
  }
  *a2 = v33;
  a2[1] = v38;
  a2[2] = v43;
  a2[3] = v48;
  return 1;
}

//----- (0049EFED) --------------------------------------------------------
__int16 __cdecl sub_49EFED(int a1, int *a2, int a3)
{
  return aes_set_key(a2, a3, 1, a1);
}

//----- (0049F008) --------------------------------------------------------
__int16 __cdecl sub_49F008(int a1, int *a2, int a3)
{
  return aes_set_key(a2, a3, 2, a1);
}

//----- (0049F030) --------------------------------------------------------
void *__cdecl AES_ECB_Encrypt(int a1, void *a2, void *Src, int a4, int a5)
{
  void *result; // eax
  int v6; // [esp+0h] [ebp-28h]
  int i; // [esp+4h] [ebp-24h]
  int v8[4]; // [esp+8h] [ebp-20h] BYREF
  _DWORD v9[4]; // [esp+18h] [ebp-10h] BYREF

  result = (void *)a4;
  v6 = a4 - 16;
  while ( v6 >= 0 )
  {
    memcpy(v9, Src, sizeof(v9));
    aes_encrypt(v9, v8, a1);
    memcpy(a2, v8, 0x10u);
    v6 -= 16;
    result = (char *)Src + 16;
    Src = (char *)Src + 16;
    a2 = (char *)a2 + 16;
  }
  if ( v6 != -16 )
  {
    memcpy(v9, Src, v6 + 16);
    for ( i = 0; i < v6 + 16; ++i )
      *((_BYTE *)v9 + i) ^= *(_BYTE *)(i + a5);
    result = memcpy(a2, v9, v6 + 16);
  }
  return result;
}

//----- (0049F10F) --------------------------------------------------------
void *__cdecl sub_49F10F(int a1, void *a2, void *a3, int a4, int a5)
{
  void *result; // eax
  int v6; // [esp+0h] [ebp-28h]
  int i; // [esp+4h] [ebp-24h]
  int v8[4]; // [esp+8h] [ebp-20h] BYREF
  _DWORD a1a[4]; // [esp+18h] [ebp-10h] BYREF

  result = (void *)a4;
  v6 = a4 - 16;
  while ( v6 >= 0 )
  {
    memcpy(a1a, a3, sizeof(a1a));
    aes_decrypt(a1a, v8, a1);
    memcpy(a2, v8, 0x10u);
    v6 -= 16;
    result = (char *)a3 + 16;
    a3 = (char *)a3 + 16;
    a2 = (char *)a2 + 16;
  }
  if ( v6 != -16 )
  {
    memcpy(a1a, a3, v6 + 16);
    for ( i = 0; i < v6 + 16; ++i )
      *((_BYTE *)a1a + i) ^= *(_BYTE *)(i + a5);
    result = memcpy(a2, a1a, v6 + 16);
  }
  return result;
}

//----- (0049F1EE) --------------------------------------------------------
void __thiscall __noreturn std::_String_base::_Xran(std::_String_base *this)
{
  std::logic_error pExceptionObject; // [esp+0h] [ebp-50h] BYREF
  std::string _Message; // [esp+28h] [ebp-28h] BYREF
  int v3; // [esp+4Ch] [ebp-4h]

  std::string::string((std::vector<IPAddrMask> *)&_Message, "invalid string position");
  v3 = 0;
  std::logic_error::logic_error(&pExceptionObject, &_Message);
  pExceptionObject.__vftable = (std::logic_error_vtbl *)&std::out_of_range::`vftable';
  _CxxThrowException(&pExceptionObject, &_TI3_AVout_of_range_std__);
}
// 4D2724: using guessed type int (__stdcall *std::out_of_range::`vftable')(int);

//----- (0049F22E) --------------------------------------------------------
std::logic_error *__thiscall std::logic_error::logic_error(std::logic_error *this, const std::logic_error *__that)
{
  exception::exception(this, __that);
  *(_DWORD *)this = &off_4D270C;
  std::string::string((std::logic_error *)((char *)this + 12), (const std::logic_error *)((char *)__that + 12));
  return this;
}
// 4A243F: using guessed type exception *__thiscall exception::exception(exception *__hidden this, const struct exception *);
// 4D270C: using guessed type int (__stdcall *off_4D270C)(int);

//----- (0049F271) --------------------------------------------------------
std::logic_error *__thiscall sub_49F271(std::logic_error *this, const std::logic_error *a2)
{
  std::logic_error::logic_error(this, a2);
  *(_DWORD *)this = &std::out_of_range::`vftable';
  return this;
}
// 4D2724: using guessed type int (__stdcall *std::out_of_range::`vftable')(int);

//----- (0049F289) --------------------------------------------------------
void __noreturn sub_49F289()
{
  std::logic_error pExceptionObject; // [esp+0h] [ebp-50h] BYREF
  std::string _Message; // [esp+28h] [ebp-28h] BYREF
  int v2; // [esp+4Ch] [ebp-4h]

  std::string::string((std::vector<IPAddrMask> *)&_Message, "string too long");
  v2 = 0;
  std::logic_error::logic_error(&pExceptionObject, &_Message);
  pExceptionObject.__vftable = (std::logic_error_vtbl *)&std::length_error::`vftable';
  _CxxThrowException(&pExceptionObject, &_TI3_AVlength_error_std__);
}
// 4D2718: using guessed type int (__stdcall *std::length_error::`vftable')(int);

//----- (0049F2C9) --------------------------------------------------------
std::logic_error *__thiscall sub_49F2C9(std::logic_error *this, const std::logic_error *a2)
{
  std::logic_error::logic_error(this, a2);
  *(_DWORD *)this = &std::length_error::`vftable';
  return this;
}
// 4D2718: using guessed type int (__stdcall *std::length_error::`vftable')(int);

//----- (0049F65E) --------------------------------------------------------
void __thiscall sub_49F65E(void *this)
{
  if ( this != (void *)dword_4D9830 )
    report_failure();
}
// 49F62D: using guessed type int report_failure(void);
// 4D9830: using guessed type int dword_4D9830;

//----- (004A0647) --------------------------------------------------------
int __cdecl sub_4A0647(int a1)
{
  int result; // eax

  result = dword_4E3750;
  dword_4E3750 = a1;
  return result;
}
// 4E3750: using guessed type int dword_4E3750;

//----- (004A0FE3) --------------------------------------------------------
unsigned int __cdecl fread_0(void *buffer, unsigned int size, unsigned int count, _iobuf *stream)
{
  unsigned int v5; // [esp+Ch] [ebp-1Ch]

  _lock_file(stream);
  v5 = fwrite(buffer, size, count, stream);
  _unlock_file(stream);
  return v5;
}

//----- (004A1236) --------------------------------------------------------
int sub_4A1236()
{
  return flsall(1);
}
// 4A1111: using guessed type _DWORD __cdecl flsall(_DWORD);

//----- (004A17A2) --------------------------------------------------------
size_t __cdecl sub_4A17A2(void *a1, size_t a2, size_t a3, FILE *a4)
{
  size_t v5; // [esp+Ch] [ebp-1Ch]

  _lock_file(a4);
  v5 = fread(a1, a2, a3, a4);
  _unlock_file(a4);
  return v5;
}

//----- (004A2489) --------------------------------------------------------
void __thiscall sub_4A2489(void *this)
{
  bool v1; // zf

  v1 = *((_DWORD *)this + 2) == 0;
  *(_DWORD *)this = &exception::`vftable';
  if ( !v1 )
    free(*((void **)this + 1));
}
// 4D2AA0: using guessed type int (__stdcall *exception::`vftable')(char);

//----- (004A24AC) --------------------------------------------------------
void *__thiscall sub_4A24AC(void *this, char a2)
{
  sub_4A2489(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004A7BF9) --------------------------------------------------------
void __cdecl _RTC_Initialize()
{
  void (**i)(void); // [esp+Ch] [ebp-1Ch]

  for ( i = dword_4D3C90; i < dword_4D3C90; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (004A7C3D) --------------------------------------------------------
void __cdecl sub_4A7C3D()
{
  void (**i)(void); // [esp+Ch] [ebp-1Ch]

  for ( i = &dword_4D3C98; i < &dword_4D3C98; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (004A89F9) --------------------------------------------------------
void __cdecl __noreturn _inconsistency()
{
  if ( off_4DA1C8 )
    off_4DA1C8();
  terminate();
}
// 4DA1C8: using guessed type int (*off_4DA1C8)(void);

//----- (004AA18E) --------------------------------------------------------
int __cdecl sub_4AA18E(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4DA3E0);
}
// 4AA036: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (004AA1A4) --------------------------------------------------------
int __cdecl sub_4AA1A4(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4DA3F8);
}
// 4AA036: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (004AA1BA) --------------------------------------------------------
int __cdecl _atodbl(_CRT_DOUBLE *Result, char *String)
{
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[12]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+10h] [ebp-4h]

  v5 = dword_4D9830;
  __strgtold12(v4, v3, String, 0, 0, 0, 0);
  return sub_4AA18E((int)v4, (int)Result);
}
// 4AAC97: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004AA1F7) --------------------------------------------------------
int __cdecl sub_4AA1F7(int a1, int a2)
{
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[12]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+10h] [ebp-4h]

  v5 = dword_4D9830;
  __strgtold12(v4, v3, a2, 0, 0, 0, 0);
  return sub_4AA1A4((int)v4, a1);
}
// 4AAC97: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004ABF90) --------------------------------------------------------
int sub_4ABF90()
{
  CAuthSocket::CAuthSocket(dword_4DA6F0);
  return atexit(sub_4B2FC0);
}
// 4DA6F0: using guessed type int dword_4DA6F0[4];

//----- (004ABFB0) --------------------------------------------------------
int sub_4ABFB0()
{
  CMemoryPool<CFindPath::NODE>::CPool::CPool((int)&stru_4DA75C);
  return atexit(sub_4B2FE0);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (004ABFD0) --------------------------------------------------------
int sub_4ABFD0()
{
  CMemoryPool<CFindPath::NODE>::CPool::CPool((int)&stru_4DA764);
  return atexit((void (__cdecl *)())sub_4B2FD0);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004ABFF0) --------------------------------------------------------
int sub_4ABFF0()
{
  CMemoryPool<CFindPath::NODE>::CPool::CPool((int)&stru_4DA770);
  return atexit(sub_4B2FF0);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004AC010) --------------------------------------------------------
int sub_4AC010()
{
  CCalendar::CCalendar(&unk_4DA798);
  return atexit(sub_4B3000);
}

//----- (004AC030) --------------------------------------------------------
int sub_4AC030()
{
  CDBSocket::CDBSocket(dword_4DA7B8);
  return atexit(sub_4B3010);
}
// 4DA7B8: using guessed type int dword_4DA7B8[4];

//----- (004AC050) --------------------------------------------------------
int sub_4AC050()
{
  CMemoryPool<CFindPath::NODE>::CPool::CPool((int)&stru_4DA824);
  return atexit((void (__cdecl *)())sub_4B3020);
}
// 4DA824: using guessed type int dword_4DA824;

//----- (004AC070) --------------------------------------------------------
_DWORD *sub_4AC070()
{
  return CFindPath::NODE::NODE(stru_4E0908, -1, -1);
}

//----- (004AC090) --------------------------------------------------------
int sub_4AC090()
{
  CMemoryPool<CFindPath::NODE>::CPool::CPool((int)&stru_4E0900);
  return atexit(sub_4B3030);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (004AC0B0) --------------------------------------------------------
int sub_4AC0B0()
{
  std::map<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>>::map<char const *,CBillingLogin *,StrCmp,std::allocator<std::pair<char const * const,CBillingLogin *>>>((std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *)dword_4E094C);
  return atexit((void (__cdecl *)())sub_4B3040);
}
// 4E094C: using guessed type int dword_4E094C[3];

//----- (004AC0D0) --------------------------------------------------------
int sub_4AC0D0()
{
  std::list<tagSUBPARTICLES *>::list<tagSUBPARTICLES *>((std::list<tagPARTICLES *> *)dword_4E0958);
  return atexit((void (__cdecl *)())sub_4B3050);
}
// 4E0958: using guessed type int dword_4E0958[3];

//----- (004AC0F0) --------------------------------------------------------
int sub_4AC0F0()
{
  sub_418A00(dword_4E0968);
  return atexit((void (__cdecl *)())sub_4B3060);
}

//----- (004AC110) --------------------------------------------------------
int sub_4AC110()
{
  sub_418A00(dword_4E0974);
  return atexit((void (__cdecl *)())sub_4B3070);
}
// 4E0974: using guessed type int dword_4E0974[3];

//----- (004AC130) --------------------------------------------------------
int sub_4AC130()
{
  CRWLock::CRWLock(&unk_4E0980);
  return atexit((void (__cdecl *)())sub_4B3080);
}

//----- (004AC150) --------------------------------------------------------
int sub_4AC150()
{
  sub_41D000(dword_4E09A4);
  return atexit((void (__cdecl *)())sub_4B3090);
}

//----- (004AC170) --------------------------------------------------------
int sub_4AC170()
{
  CRWLock::CRWLock(&unk_4E09B0);
  return atexit((void (__cdecl *)())sub_4B30A0);
}

//----- (004AC190) --------------------------------------------------------
int sub_4AC190()
{
  sub_41D030(dword_4E09C8);
  return atexit((void (__cdecl *)())sub_4B30B0);
}

//----- (004AC1B0) --------------------------------------------------------
int sub_4AC1B0()
{
  CRWLock::CRWLock(&unk_4E09D4);
  return atexit((void (__cdecl *)())sub_4B30C0);
}

//----- (004AC1D0) --------------------------------------------------------
int sub_4AC1D0()
{
  sub_420920(dword_4E09F0);
  return atexit((void (__cdecl *)())sub_4B30D0);
}

//----- (004AC1F0) --------------------------------------------------------
void sub_4AC1F0()
{
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A00);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A08);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A30);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A38);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A40);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A48);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A50);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A58);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A60);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A68);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A70);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A78);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A80);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A88);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A90);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0A98);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AA0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AA8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AB0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AB8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AC0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AC8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AD0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AD8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AE0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AE8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AF0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0AF8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B00);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B08);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B30);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B38);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B40);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B48);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B50);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B58);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B60);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E0B68);
}

//----- (004AC930) --------------------------------------------------------
int sub_4AC930()
{
  CIOException::CInit::CInit(&unk_4E0DB4);
  return atexit(sub_4B30E0);
}

//----- (004AC950) --------------------------------------------------------
int sub_4AC950()
{
  CIOCriticalSection::CIOCriticalSection(&unk_4E0FE8);
  return atexit(sub_4B30F0);
}

//----- (004AC970) --------------------------------------------------------
int sub_4AC970()
{
  return atexit((void (__cdecl *)())sub_4B3100);
}

//----- (004AC990) --------------------------------------------------------
int sub_4AC990()
{
  sub_425830(&unk_4E100C);
  return atexit((void (__cdecl *)())sub_4B3110);
}

//----- (004AC9B0) --------------------------------------------------------
int sub_4AC9B0()
{
  sub_425880(&unk_4E1020);
  return atexit(sub_4B3120);
}

//----- (004AC9D0) --------------------------------------------------------
int sub_4AC9D0()
{
  return `vector constructor iterator'(_t, 8u, 16, (void *(__thiscall *)(void *))CIOBuffer::CSlot::CSlot);
}

//----- (004AC9F0) --------------------------------------------------------
int sub_4AC9F0()
{
  sub_42F980(dword_4E10B4);
  return atexit((void (__cdecl *)())sub_4B3130);
}
// 4E10B4: using guessed type int dword_4E10B4[3];

//----- (004ACA10) --------------------------------------------------------
int sub_4ACA10()
{
  sub_42F9D0(dword_4E10C0);
  return atexit((void (__cdecl *)())sub_4B3140);
}
// 4E10C0: using guessed type int dword_4E10C0[3];

//----- (004ACA30) --------------------------------------------------------
int sub_4ACA30()
{
  sub_42FA10(dword_4E10CC);
  return atexit((void (__cdecl *)())sub_4B3150);
}
// 4E10CC: using guessed type int dword_4E10CC[3];

//----- (004ACA50) --------------------------------------------------------
int sub_4ACA50()
{
  CRWLock::CRWLock(&unk_4E10D8);
  return atexit(sub_4B3160);
}

//----- (004ACA70) --------------------------------------------------------
int sub_4ACA70()
{
  sub_432030(dword_4E10F0);
  return atexit((void (__cdecl *)())sub_4B3170);
}
// 4E10F0: using guessed type int dword_4E10F0[3];

//----- (004ACA90) --------------------------------------------------------
int sub_4ACA90()
{
  sub_4320A0(dword_4E10FC);
  return atexit((void (__cdecl *)())sub_4B3180);
}
// 4E10FC: using guessed type int dword_4E10FC[3];

//----- (004ACAB0) --------------------------------------------------------
std::ios_base *sub_4ACAB0()
{
  return lisp::var::var((std::ios_base *)&v);
}

//----- (004ACAC0) --------------------------------------------------------
std::ios_base *sub_4ACAC0()
{
  return sub_4324B0((std::ios_base *)&unk_4E110C);
}

//----- (004ACAD0) --------------------------------------------------------
int sub_4ACAD0()
{
  CScreen::CScreen((CScreen *)&unk_4E1128);
  return atexit(sub_4B3190);
}

//----- (004ACAF0) --------------------------------------------------------
int sub_4ACAF0()
{
  return atexit((void (__cdecl *)())sub_4B31A0);
}

//----- (004ACB10) --------------------------------------------------------
int sub_4ACB10()
{
  std::string::string(&stru_4E1194);
  return atexit(sub_4B31B0);
}

//----- (004ACB30) --------------------------------------------------------
int sub_4ACB30()
{
  std::string::string(&stru_4E11B0);
  return atexit(sub_4B31C0);
}

//----- (004ACB50) --------------------------------------------------------
int sub_4ACB50()
{
  std::string::string(&stru_4E11CC);
  return atexit(sub_4B31D0);
}

//----- (004ACB70) --------------------------------------------------------
int sub_4ACB70()
{
  std::string::string(&stru_4E11E8);
  return atexit(sub_4B31E0);
}

//----- (004ACB90) --------------------------------------------------------
int sub_4ACB90()
{
  std::string::string(&stru_4E1204);
  return atexit(sub_4B31F0);
}

//----- (004ACBB0) --------------------------------------------------------
int sub_4ACBB0()
{
  std::string::string(&stru_4E1220);
  return atexit(sub_4B3200);
}

//----- (004ACBD0) --------------------------------------------------------
int sub_4ACBD0()
{
  std::string::string(&stru_4E123C);
  return atexit(sub_4B3210);
}

//----- (004ACBF0) --------------------------------------------------------
int sub_4ACBF0()
{
  sub_433BC0(dword_4E1258);
  return atexit((void (__cdecl *)())sub_4B3220);
}
// 4E1258: using guessed type int dword_4E1258[3];

//----- (004ACC10) --------------------------------------------------------
int sub_4ACC10()
{
  std::string::string(&stru_4E1264);
  return atexit(sub_4B3230);
}

//----- (004ACC30) --------------------------------------------------------
void *sub_4ACC30()
{
  return CMemory::CInit::CInit(&unk_4E1808);
}

//----- (004ACC40) --------------------------------------------------------
DWORD sub_4ACC40()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E181C = result;
  return result;
}
// 4E181C: using guessed type int dword_4E181C;

//----- (004ACC50) --------------------------------------------------------
int sub_4ACC50()
{
  sub_447760(dword_4E1820);
  return atexit((void (__cdecl *)())sub_4B3240);
}
// 4E1820: using guessed type int dword_4E1820[3];

//----- (004ACC70) --------------------------------------------------------
int sub_4ACC70()
{
  CIOCriticalSection::CIOCriticalSection(&unk_4E182C);
  return atexit(sub_4B3250);
}

//----- (004ACC90) --------------------------------------------------------
int sub_4ACC90()
{
  sub_447790(dword_4E184C);
  return atexit((void (__cdecl *)())sub_4B3260);
}
// 4E184C: using guessed type int dword_4E184C[3];

//----- (004ACCB0) --------------------------------------------------------
int sub_4ACCB0()
{
  CRWLock::CRWLock(&unk_4E1858);
  return atexit(sub_4B3270);
}

//----- (004ACCD0) --------------------------------------------------------
int sub_4ACCD0()
{
  sub_4477C0(dword_4E1870);
  return atexit((void (__cdecl *)())sub_4B3280);
}
// 4E1870: using guessed type int dword_4E1870[3];

//----- (004ACCF0) --------------------------------------------------------
int sub_4ACCF0()
{
  CRWLock::CRWLock(&unk_4E187C);
  return atexit(sub_4B3290);
}

//----- (004ACD10) --------------------------------------------------------
int sub_4ACD10()
{
  CGenMonster::CGenMonster(&unk_4E1898);
  return atexit(sub_4B32A0);
}

//----- (004ACD30) --------------------------------------------------------
int sub_4ACD30()
{
  `vector constructor iterator'(
    &unk_4E18F0,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  return atexit((void (__cdecl *)())sub_4B32B0);
}

//----- (004ACD60) --------------------------------------------------------
int sub_4ACD60()
{
  CMonsterObject::CMonsterObject((int)&unk_4E1930);
  return atexit(sub_4B32D0);
}

//----- (004ACD80) --------------------------------------------------------
int sub_4ACD80()
{
  CMonsterObject::CMonsterObject((int)&unk_4E1998);
  return atexit(sub_4B32E0);
}

//----- (004ACDA0) --------------------------------------------------------
int sub_4ACDA0()
{
  CMonsterObject::CMonsterObject((int)&unk_4E1A00);
  return atexit(sub_4B32F0);
}

//----- (004ACDC0) --------------------------------------------------------
int sub_4ACDC0()
{
  sub_44B880(dword_4E1A9C);
  return atexit((void (__cdecl *)())sub_4B3300);
}
// 4E1A9C: using guessed type int dword_4E1A9C[3];

//----- (004ACDE0) --------------------------------------------------------
int sub_4ACDE0()
{
  sub_44B8B0(dword_4E1AA8);
  return atexit((void (__cdecl *)())sub_4B3310);
}
// 4E1AA8: using guessed type int dword_4E1AA8[3];

//----- (004ACE00) --------------------------------------------------------
int sub_4ACE00()
{
  sub_44B8E0(dword_4E1AB4);
  return atexit((void (__cdecl *)())sub_4B3320);
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (004ACE20) --------------------------------------------------------
int sub_4ACE20()
{
  CRWLock::CRWLock(&unk_4E1AC0);
  return atexit(sub_4B3330);
}

//----- (004ACE40) --------------------------------------------------------
int sub_4ACE40()
{
  CNPCObject::CNPCObject((int)&unk_4E1AD8);
  return atexit(sub_4B3340);
}

//----- (004ACE60) --------------------------------------------------------
int sub_4ACE60()
{
  CIOCriticalSection::CIOCriticalSection(&unk_4E1B38);
  return atexit(sub_4B3350);
}

//----- (004ACE80) --------------------------------------------------------
int sub_4ACE80()
{
  CIOCriticalSection::CIOCriticalSection(&unk_4E1B58);
  return atexit(sub_4B3360);
}

//----- (004ACEA0) --------------------------------------------------------
int sub_4ACEA0()
{
  CIOCriticalSection::CIOCriticalSection(&unk_4E1B78);
  return atexit(sub_4B3370);
}

//----- (004ACEC0) --------------------------------------------------------
int sub_4ACEC0()
{
  sub_44CD40(dword_4E1B9C);
  return atexit((void (__cdecl *)())sub_4B3380);
}

//----- (004ACEE0) --------------------------------------------------------
void sub_4ACEE0()
{
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BA8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BB0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BB8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BC0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BC8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BD0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BD8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BE0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BE8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BF0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1BF8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C00);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C08);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C30);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C38);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C40);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C48);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C50);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C58);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C60);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C68);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C70);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C78);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C80);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C88);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C90);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1C98);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CA0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CA8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CB0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CB8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CC0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CC8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CD0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CD8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CE0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CE8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CF0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1CF8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D00);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D08);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D30);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D38);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D40);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D48);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D50);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D58);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D60);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D68);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D70);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D78);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D80);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D88);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D90);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1D98);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DA0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DA8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DB0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DB8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DC0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DC8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DD0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DD8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DE0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DE8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DF0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1DF8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E00);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E08);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E30);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E38);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E40);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E48);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E50);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E58);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E60);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E68);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E70);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E78);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E80);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E88);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E90);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1E98);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EA0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EA8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EB0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EB8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EC0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EC8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1ED0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1ED8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EE0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EE8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EF0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1EF8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F00);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F08);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F30);
}

//----- (004AE1D0) --------------------------------------------------------
int sub_4AE1D0()
{
  sub_44CD90(dword_4E1F38);
  return atexit((void (__cdecl *)())sub_4B3390);
}
// 4E1F38: using guessed type int dword_4E1F38[4];

//----- (004AE1F0) --------------------------------------------------------
void sub_4AE1F0()
{
  CMemory **v0; // [esp+3Ch] [ebp-A4h]
  CMemory **v1; // [esp+48h] [ebp-98h]
  CMemory **v2; // [esp+54h] [ebp-8Ch]
  CMemory **v3; // [esp+60h] [ebp-80h]
  CMemory **v4; // [esp+6Ch] [ebp-74h]
  CMemory **v5; // [esp+78h] [ebp-68h]
  CMemory **v6; // [esp+84h] [ebp-5Ch]
  CMemory **v7; // [esp+90h] [ebp-50h]
  CMemory **v8; // [esp+9Ch] [ebp-44h]
  CMemory **v9; // [esp+A8h] [ebp-38h]
  CMemory **v10; // [esp+B4h] [ebp-2Ch]
  CMemory **v11; // [esp+C0h] [ebp-20h]
  CMemory **v12; // [esp+CCh] [ebp-14h]
  CMemory **v13; // [esp+D8h] [ebp-8h]

  v13 = operator new(0xB4u);
  if ( v13 )
    CInitMap::CInitMap((CInitMap *)v13);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F48);
  v12 = operator new(0x14Cu);
  if ( v12 )
    CInitMonster::CInitMonster((CInitMonster *)v12);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F50);
  v11 = operator new(0x58u);
  if ( v11 )
    CGenMonster::CGenMonster((CGenMonster *)v11);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F58);
  v10 = operator new(0xB8u);
  if ( v10 )
    CInitItem::CInitItem((CInitItem *)v10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F60);
  v9 = operator new(0x38u);
  if ( v9 )
    CPrefix::CPrefix((CPrefix *)v9);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F68);
  v8 = operator new(0x34u);
  if ( v8 )
    CGroup::CGroup((CGroup *)v8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F70);
  v7 = operator new(0x34u);
  if ( v7 )
    CItemGroup::CItemGroup(v7);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F78);
  v6 = operator new(0x28u);
  if ( v6 )
    CInitNPC::CInitNPC((CInitNPC *)v6);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F80);
  v5 = operator new(0xB4u);
  if ( v5 )
    CGenNPC::CGenNPC((CGenNPC *)v5);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F88);
  v4 = operator new(0x60u);
  if ( v4 )
    CInitSkill::CInitSkill(v4);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F90);
  v3 = operator new(0x38u);
  if ( v3 )
    CQuest::CQuest((CQuest *)v3);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1F98);
  v2 = operator new(0x34u);
  if ( v2 )
    CGoto::CGoto((CGoto *)v2);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1FA0);
  v1 = operator new(0x48u);
  if ( v1 )
    CPortal::CPortal((CPortal *)v1);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1FA8);
  v0 = operator new(0x34u);
  if ( v0 )
    CGoods::CGoods((CGoods *)v0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E1FB0);
}

//----- (004AE6A0) --------------------------------------------------------
DWORD sub_4AE6A0()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E1FC0 = result;
  return result;
}
// 4E1FC0: using guessed type int dword_4E1FC0;

//----- (004AE6B0) --------------------------------------------------------
int sub_4AE6B0()
{
  sub_44FB90(dword_4E1FC4);
  return atexit((void (__cdecl *)())sub_4B33A0);
}

//----- (004AE6D0) --------------------------------------------------------
int sub_4AE6D0()
{
  CIOCriticalSection::CIOCriticalSection(&unk_4E1FD0);
  return atexit(sub_4B33B0);
}

//----- (004AE6F0) --------------------------------------------------------
DWORD sub_4AE6F0()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E201C = result;
  return result;
}
// 4E201C: using guessed type int dword_4E201C;

//----- (004AE700) --------------------------------------------------------
int sub_4AE700()
{
  sub_47A6F0(dword_4E2020);
  return atexit((void (__cdecl *)())sub_4B33C0);
}

//----- (004AE720) --------------------------------------------------------
int sub_4AE720()
{
  CRWLock::CRWLock(&unk_4E202C);
  return atexit(sub_4B33D0);
}

//----- (004AE740) --------------------------------------------------------
int sub_4AE740()
{
  sub_47A760((std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)dword_4E2044);
  return atexit((void (__cdecl *)())sub_4B33E0);
}

//----- (004AE760) --------------------------------------------------------
int sub_4AE760()
{
  CRWLock::CRWLock(&unk_4E2050);
  return atexit(sub_4B33F0);
}

//----- (004AE780) --------------------------------------------------------
int sub_4AE780()
{
  sub_47A6F0(dword_4E2068);
  return atexit((void (__cdecl *)())sub_4B3400);
}

//----- (004AE7A0) --------------------------------------------------------
int sub_4AE7A0()
{
  `vector constructor iterator'(
    &stru_4E2078,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  return atexit((void (__cdecl *)())sub_4B3410);
}

//----- (004AE7D0) --------------------------------------------------------
int sub_4AE7D0()
{
  CRWLock::CRWLock(&unk_4E20B8);
  return atexit(sub_4B3430);
}

//----- (004AE7F0) --------------------------------------------------------
int sub_4AE7F0()
{
  sub_47A790(dword_4E20D0);
  return atexit((void (__cdecl *)())sub_4B3440);
}
// 4E20D0: using guessed type int dword_4E20D0[3];

//----- (004AE810) --------------------------------------------------------
int sub_4AE810()
{
  CRWLock::CRWLock(&unk_4E20DC);
  return atexit(sub_4B3450);
}

//----- (004AE830) --------------------------------------------------------
int sub_4AE830()
{
  sub_47A8B0(&unk_4E20F4);
  return atexit(sub_4B3460);
}

//----- (004AE850) --------------------------------------------------------
int sub_4AE850()
{
  sub_47DAA0((std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)dword_4E210C);
  return atexit((void (__cdecl *)())sub_4B3470);
}
// 4E210C: using guessed type int dword_4E210C[3];

//----- (004AE870) --------------------------------------------------------
int sub_4AE870()
{
  CRWLock::CRWLock(&unk_4E2118);
  return atexit(sub_4B3480);
}

//----- (004AE890) --------------------------------------------------------
int sub_4AE890()
{
  sub_47EBE0((std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)dword_4E214C);
  return atexit((void (__cdecl *)())sub_4B3490);
}

//----- (004AE8B0) --------------------------------------------------------
int sub_4AE8B0()
{
  sub_47EC80(&unk_4E2158);
  return atexit(sub_4B34A0);
}

//----- (004AE8D0) --------------------------------------------------------
int sub_4AE8D0()
{
  CRWLock::CRWLock(&unk_4E2170);
  return atexit(sub_4B34B0);
}

//----- (004AE8F0) --------------------------------------------------------
int sub_4AE8F0()
{
  sub_48D680((std::_Tree<std::_Tmap_traits<int,std::string,std::less<int>,std::allocator<std::pair<int const ,std::string > >,0> > *)dword_4E218C);
  return atexit((void (__cdecl *)())sub_4B34C0);
}
// 4E218C: using guessed type int dword_4E218C[3];

//----- (004AE910) --------------------------------------------------------
int sub_4AE910()
{
  sub_48D680(&stru_4E2198);
  return atexit((void (__cdecl *)())sub_4B34D0);
}

//----- (004AE930) --------------------------------------------------------
void sub_4AE930()
{
  CMemory **v0; // [esp+264h] [ebp-71Ch]
  CMemory **v1; // [esp+270h] [ebp-710h]
  CMemory **v2; // [esp+27Ch] [ebp-704h]
  CMemory **v3; // [esp+288h] [ebp-6F8h]
  CMemory **v4; // [esp+294h] [ebp-6ECh]
  CMemory **v5; // [esp+2A0h] [ebp-6E0h]
  CMemory **v6; // [esp+2ACh] [ebp-6D4h]
  CMemory **v7; // [esp+2B8h] [ebp-6C8h]
  CMemory **v8; // [esp+2C4h] [ebp-6BCh]
  CMemory **v9; // [esp+2D0h] [ebp-6B0h]
  CMemory **v10; // [esp+2DCh] [ebp-6A4h]
  CMemory **v11; // [esp+2E8h] [ebp-698h]
  CMemory **v12; // [esp+2F4h] [ebp-68Ch]
  CMemory **v13; // [esp+300h] [ebp-680h]
  CMemory **v14; // [esp+30Ch] [ebp-674h]
  CMemory **v15; // [esp+318h] [ebp-668h]
  CMemory **v16; // [esp+324h] [ebp-65Ch]
  CMemory **v17; // [esp+330h] [ebp-650h]
  CMemory **v18; // [esp+33Ch] [ebp-644h]
  CMemory **v19; // [esp+348h] [ebp-638h]
  CMemory **v20; // [esp+354h] [ebp-62Ch]
  CMemory **v21; // [esp+360h] [ebp-620h]
  CMemory **v22; // [esp+36Ch] [ebp-614h]
  CMemory **v23; // [esp+378h] [ebp-608h]
  CMemory **v24; // [esp+384h] [ebp-5FCh]
  CMemory **v25; // [esp+390h] [ebp-5F0h]
  CMemory **v26; // [esp+39Ch] [ebp-5E4h]
  CMemory **v27; // [esp+3A8h] [ebp-5D8h]
  CMemory **v28; // [esp+3B4h] [ebp-5CCh]
  CMemory **v29; // [esp+3C0h] [ebp-5C0h]
  CMemory **v30; // [esp+3CCh] [ebp-5B4h]
  CMemory **v31; // [esp+3D8h] [ebp-5A8h]
  CMemory **v32; // [esp+3E4h] [ebp-59Ch]
  CMemory **v33; // [esp+3F0h] [ebp-590h]
  CMemory **v34; // [esp+3FCh] [ebp-584h]
  CMemory **v35; // [esp+408h] [ebp-578h]
  CMemory **v36; // [esp+414h] [ebp-56Ch]
  CMemory **v37; // [esp+420h] [ebp-560h]
  CMemory **v38; // [esp+42Ch] [ebp-554h]
  CMemory **v39; // [esp+438h] [ebp-548h]
  CMemory **v40; // [esp+444h] [ebp-53Ch]
  CMemory **v41; // [esp+450h] [ebp-530h]
  CMemory **v42; // [esp+45Ch] [ebp-524h]
  CMemory **v43; // [esp+468h] [ebp-518h]
  CMemory **v44; // [esp+474h] [ebp-50Ch]
  CMemory **v45; // [esp+480h] [ebp-500h]
  CMemory **v46; // [esp+48Ch] [ebp-4F4h]
  CMemory **v47; // [esp+498h] [ebp-4E8h]
  CMemory **v48; // [esp+4A4h] [ebp-4DCh]
  CMemory **v49; // [esp+4B0h] [ebp-4D0h]
  CMemory **v50; // [esp+4BCh] [ebp-4C4h]
  CMemory **v51; // [esp+4C8h] [ebp-4B8h]
  CMemory **v52; // [esp+4D4h] [ebp-4ACh]
  CMemory **v53; // [esp+4E0h] [ebp-4A0h]
  CMemory **v54; // [esp+4ECh] [ebp-494h]
  CMemory **v55; // [esp+4F8h] [ebp-488h]
  CMemory **v56; // [esp+504h] [ebp-47Ch]
  CMemory **v57; // [esp+510h] [ebp-470h]
  CMemory **v58; // [esp+51Ch] [ebp-464h]
  CMemory **v59; // [esp+528h] [ebp-458h]
  CMemory **v60; // [esp+534h] [ebp-44Ch]
  CMemory **v61; // [esp+540h] [ebp-440h]
  CMemory **v62; // [esp+54Ch] [ebp-434h]
  CMemory **v63; // [esp+558h] [ebp-428h]
  CMemory **v64; // [esp+564h] [ebp-41Ch]
  CMemory **v65; // [esp+570h] [ebp-410h]
  CMemory **v66; // [esp+57Ch] [ebp-404h]
  CMemory **v67; // [esp+588h] [ebp-3F8h]
  CMemory **v68; // [esp+594h] [ebp-3ECh]
  CMemory **v69; // [esp+5A0h] [ebp-3E0h]
  CMemory **v70; // [esp+5ACh] [ebp-3D4h]
  CMemory **v71; // [esp+5B8h] [ebp-3C8h]
  CMemory **v72; // [esp+5C4h] [ebp-3BCh]
  CMemory **v73; // [esp+5D0h] [ebp-3B0h]
  CMemory **v74; // [esp+5DCh] [ebp-3A4h]
  CMemory **v75; // [esp+5E8h] [ebp-398h]
  CMemory **v76; // [esp+5F4h] [ebp-38Ch]
  CMemory **v77; // [esp+600h] [ebp-380h]
  CMemory **v78; // [esp+60Ch] [ebp-374h]
  CMemory **v79; // [esp+618h] [ebp-368h]
  CMemory **v80; // [esp+624h] [ebp-35Ch]
  CMemory **v81; // [esp+630h] [ebp-350h]
  CMemory **v82; // [esp+63Ch] [ebp-344h]
  CMemory **v83; // [esp+648h] [ebp-338h]
  CMemory **v84; // [esp+654h] [ebp-32Ch]
  CMemory **v85; // [esp+660h] [ebp-320h]
  CMemory **v86; // [esp+66Ch] [ebp-314h]
  CMemory **v87; // [esp+678h] [ebp-308h]
  CMemory **v88; // [esp+684h] [ebp-2FCh]
  CMemory **v89; // [esp+690h] [ebp-2F0h]
  CMemory **v90; // [esp+69Ch] [ebp-2E4h]
  CMemory **v91; // [esp+6A8h] [ebp-2D8h]
  CMemory **v92; // [esp+6B4h] [ebp-2CCh]
  CMemory **v93; // [esp+6C0h] [ebp-2C0h]
  CMemory **v94; // [esp+6CCh] [ebp-2B4h]
  CMemory **v95; // [esp+6D8h] [ebp-2A8h]
  CMemory **v96; // [esp+6E4h] [ebp-29Ch]
  CMemory **v97; // [esp+6F0h] [ebp-290h]
  CMemory **v98; // [esp+6FCh] [ebp-284h]
  CMemory **v99; // [esp+708h] [ebp-278h]
  CMemory **v100; // [esp+714h] [ebp-26Ch]
  CMemory **v101; // [esp+720h] [ebp-260h]
  CMemory **v102; // [esp+72Ch] [ebp-254h]
  CMemory **v103; // [esp+738h] [ebp-248h]
  CMemory **v104; // [esp+744h] [ebp-23Ch]
  CMemory **v105; // [esp+750h] [ebp-230h]
  CMemory **v106; // [esp+75Ch] [ebp-224h]
  CMemory **v107; // [esp+768h] [ebp-218h]
  CMemory **v108; // [esp+774h] [ebp-20Ch]
  CMemory **v109; // [esp+780h] [ebp-200h]
  CMemory **v110; // [esp+78Ch] [ebp-1F4h]
  CMemory **v111; // [esp+798h] [ebp-1E8h]
  CMemory **v112; // [esp+7A4h] [ebp-1DCh]
  CMemory **v113; // [esp+7B0h] [ebp-1D0h]
  CMemory **v114; // [esp+7BCh] [ebp-1C4h]
  CMemory **v115; // [esp+7C8h] [ebp-1B8h]
  CMemory **v116; // [esp+7D4h] [ebp-1ACh]
  CMemory **v117; // [esp+7E0h] [ebp-1A0h]
  CMemory **v118; // [esp+7ECh] [ebp-194h]
  CMemory **v119; // [esp+7F8h] [ebp-188h]
  CMemory **v120; // [esp+804h] [ebp-17Ch]
  CMemory **v121; // [esp+810h] [ebp-170h]
  CMemory **v122; // [esp+81Ch] [ebp-164h]
  CMemory **v123; // [esp+828h] [ebp-158h]
  CMemory **v124; // [esp+834h] [ebp-14Ch]
  CMemory **v125; // [esp+840h] [ebp-140h]
  CMemory **v126; // [esp+84Ch] [ebp-134h]
  CMemory **v127; // [esp+858h] [ebp-128h]
  CMemory **v128; // [esp+864h] [ebp-11Ch]
  CMemory **v129; // [esp+870h] [ebp-110h]
  CMemory **v130; // [esp+87Ch] [ebp-104h]
  CMemory **v131; // [esp+888h] [ebp-F8h]
  CMemory **v132; // [esp+894h] [ebp-ECh]
  CMemory **v133; // [esp+8A0h] [ebp-E0h]
  CMemory **v134; // [esp+8ACh] [ebp-D4h]
  CMemory **v135; // [esp+8B8h] [ebp-C8h]
  CMemory **v136; // [esp+8C4h] [ebp-BCh]
  CMemory **v137; // [esp+8D0h] [ebp-B0h]
  CMemory **v138; // [esp+8DCh] [ebp-A4h]
  CMemory **v139; // [esp+8E8h] [ebp-98h]
  CMemory **v140; // [esp+8F4h] [ebp-8Ch]
  CMemory **v141; // [esp+900h] [ebp-80h]
  CMemory **v142; // [esp+90Ch] [ebp-74h]
  CMemory **v143; // [esp+918h] [ebp-68h]
  CMemory **v144; // [esp+924h] [ebp-5Ch]
  CMemory **v145; // [esp+930h] [ebp-50h]
  CMemory **v146; // [esp+93Ch] [ebp-44h]
  CMemory **v147; // [esp+948h] [ebp-38h]
  CMemory **v148; // [esp+954h] [ebp-2Ch]
  CMemory **v149; // [esp+960h] [ebp-20h]
  CMemory **v150; // [esp+96Ch] [ebp-14h]
  CMemory **v151; // [esp+978h] [ebp-8h]

  v151 = operator new(0x4Cu);
  if ( v151 )
    sub_48DCD0(v151);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&dword_4E21A8);
  v150 = operator new(0x4Cu);
  if ( v150 )
    sub_48DCF0(v150);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21B0);
  v149 = operator new(0x4Cu);
  if ( v149 )
    sub_48DD10(v149);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21B8);
  v148 = operator new(0x4Cu);
  if ( v148 )
    sub_48DDD0(v148);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21C0);
  v147 = operator new(0x4Cu);
  if ( v147 )
    sub_48DEC0(v147);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21C8);
  v146 = operator new(0x4Cu);
  if ( v146 )
    sub_48E030(v146);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21D0);
  v145 = operator new(0x4Cu);
  if ( v145 )
    sub_48EA30(v145);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21D8);
  v144 = operator new(0x4Cu);
  if ( v144 )
    sub_48E080(v144);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21E0);
  v143 = operator new(0x4Cu);
  if ( v143 )
    sub_48DF20(v143);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21E8);
  v142 = operator new(0x4Cu);
  if ( v142 )
    sub_48E110(v142);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21F0);
  v141 = operator new(0x4Cu);
  if ( v141 )
    sub_48EC50(v141);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E21F8);
  v140 = operator new(0x4Cu);
  if ( v140 )
    sub_48E910(v140);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2200);
  v139 = operator new(0x4Cu);
  if ( v139 )
    sub_48E930(v139);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2208);
  v138 = operator new(0x4Cu);
  if ( v138 )
    sub_48E170(v138);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2210);
  v137 = operator new(0x4Cu);
  if ( v137 )
    sub_48ECB0(v137);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2218);
  v136 = operator new(0x4Cu);
  if ( v136 )
    sub_48ECF0(v136);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2220);
  v135 = operator new(0x4Cu);
  if ( v135 )
    sub_48E1D0(v135);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2228);
  v134 = operator new(0x4Cu);
  if ( v134 )
    sub_48E1F0(v134);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2230);
  v133 = operator new(0x4Cu);
  if ( v133 )
    sub_48EE30(v133);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2238);
  v132 = operator new(0x4Cu);
  if ( v132 )
    sub_48F4A0(v132);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2240);
  v131 = operator new(0x4Cu);
  if ( v131 )
    sub_48EA50(v131);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2248);
  v130 = operator new(0x4Cu);
  if ( v130 )
    sub_48EED0(v130);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2250);
  v129 = operator new(0x4Cu);
  if ( v129 )
    sub_48E210(v129);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2258);
  v128 = operator new(0x4Cu);
  if ( v128 )
    sub_48F4E0(v128);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2260);
  v127 = operator new(0x4Cu);
  if ( v127 )
    sub_48F360(v127);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2268);
  v126 = operator new(0x4Cu);
  if ( v126 )
    sub_48DD70(v126);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2270);
  v125 = operator new(0x4Cu);
  if ( v125 )
    sub_48EFD0(v125);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2278);
  v124 = operator new(0x4Cu);
  if ( v124 )
    sub_48F500(v124);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2280);
  v123 = operator new(0x4Cu);
  if ( v123 )
    sub_48F520(v123);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2288);
  v122 = operator new(0x4Cu);
  if ( v122 )
    sub_48F540(v122);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2290);
  v121 = operator new(0x4Cu);
  if ( v121 )
    sub_48ED50(v121);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2298);
  v120 = operator new(0x4Cu);
  if ( v120 )
    sub_48F560(v120);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22A0);
  v119 = operator new(0x4Cu);
  if ( v119 )
    sub_48F580(v119);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22A8);
  v118 = operator new(0x4Cu);
  if ( v118 )
    sub_48EFF0(v118);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22B0);
  v117 = operator new(0x4Cu);
  if ( v117 )
    sub_48F010(v117);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22B8);
  v116 = operator new(0x4Cu);
  if ( v116 )
    sub_48EAD0(v116);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22C0);
  v115 = operator new(0x4Cu);
  if ( v115 )
    sub_48E970(v115);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22C8);
  v114 = operator new(0x4Cu);
  if ( v114 )
    sub_48DCB0(v114);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22D0);
  v113 = operator new(0x4Cu);
  if ( v113 )
    sub_48EA50(v113);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22D8);
  v112 = operator new(0x4Cu);
  if ( v112 )
    sub_48EA50(v112);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22E0);
  v111 = operator new(0x4Cu);
  if ( v111 )
    sub_48DCD0(v111);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22E8);
  v110 = operator new(0x4Cu);
  if ( v110 )
    sub_48DCF0(v110);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22F0);
  v109 = operator new(0x4Cu);
  if ( v109 )
    sub_48E390(v109);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E22F8);
  v108 = operator new(0x4Cu);
  if ( v108 )
    sub_48E3F0(v108);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2300);
  v107 = operator new(0x4Cu);
  if ( v107 )
    sub_48E460(v107);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2308);
  v106 = operator new(0x4Cu);
  if ( v106 )
    sub_48ED30(v106);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2310);
  v105 = operator new(0x4Cu);
  if ( v105 )
    sub_48E790(v105);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2318);
  v104 = operator new(0x4Cu);
  if ( v104 )
    sub_48E4A0(v104);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2320);
  v103 = operator new(0x4Cu);
  if ( v103 )
    sub_48E7D0(v103);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2328);
  v102 = operator new(0x4Cu);
  if ( v102 )
    sub_48E910(v102);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2330);
  v101 = operator new(0x4Cu);
  if ( v101 )
    sub_48E9B0(v101);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2338);
  v100 = operator new(0x4Cu);
  if ( v100 )
    sub_48E9D0(v100);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2340);
  v99 = operator new(0x4Cu);
  if ( v99 )
    sub_48E9F0(v99);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2348);
  v98 = operator new(0x4Cu);
  if ( v98 )
    sub_48E990(v98);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2350);
  v97 = operator new(0x4Cu);
  if ( v97 )
    sub_48EA70(v97);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2358);
  v96 = operator new(0x4Cu);
  if ( v96 )
    sub_48EB50(v96);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2360);
  v95 = operator new(0x4Cu);
  if ( v95 )
    sub_48EB50(v95);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2368);
  v94 = operator new(0x4Cu);
  if ( v94 )
    sub_48EB50(v94);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2370);
  v93 = operator new(0x4Cu);
  if ( v93 )
    sub_48EB50(v93);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2378);
  v92 = operator new(0x4Cu);
  if ( v92 )
    sub_48EB50(v92);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2380);
  v91 = operator new(0x4Cu);
  if ( v91 )
    sub_48E810(v91);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2388);
  v90 = operator new(0x4Cu);
  if ( v90 )
    sub_48E4C0(v90);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2390);
  v89 = operator new(0x4Cu);
  if ( v89 )
    sub_48E680(v89);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2398);
  v88 = operator new(0x4Cu);
  if ( v88 )
    sub_48E5C0(v88);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23A0);
  v87 = operator new(0x4Cu);
  if ( v87 )
    sub_48EB70(v87);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23A8);
  v86 = operator new(0x4Cu);
  if ( v86 )
    sub_48EB90(v86);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23B0);
  v85 = operator new(0x4Cu);
  if ( v85 )
    sub_48EBB0(v85);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23B8);
  v84 = operator new(0x4Cu);
  if ( v84 )
    sub_48E890(v84);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23C0);
  v83 = operator new(0x4Cu);
  if ( v83 )
    sub_48ED50(v83);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23C8);
  v82 = operator new(0x4Cu);
  if ( v82 )
    sub_48E500(v82);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23D0);
  v81 = operator new(0x4Cu);
  if ( v81 )
    sub_48E440(v81);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23D8);
  v80 = operator new(0x4Cu);
  if ( v80 )
    sub_48E3B0(v80);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23E0);
  v79 = operator new(0x4Cu);
  if ( v79 )
    sub_48EA90(v79);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23E8);
  v78 = operator new(0x4Cu);
  if ( v78 )
    sub_48E850(v78);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23F0);
  v77 = operator new(0x4Cu);
  if ( v77 )
    sub_48E5E0(v77);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E23F8);
  v76 = operator new(0x4Cu);
  if ( v76 )
    sub_48E600(v76);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2400);
  v75 = operator new(0x4Cu);
  if ( v75 )
    sub_48EE50(v75);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2408);
  v74 = operator new(0x4Cu);
  if ( v74 )
    sub_48EE90(v74);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2410);
  v73 = operator new(0x4Cu);
  if ( v73 )
    sub_48E350(v73);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2418);
  v72 = operator new(0x4Cu);
  if ( v72 )
    sub_48E620(v72);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2420);
  v71 = operator new(0x4Cu);
  if ( v71 )
    sub_48E520(v71);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2428);
  v70 = operator new(0x4Cu);
  if ( v70 )
    sub_48E6C0(v70);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2430);
  v69 = operator new(0x4Cu);
  if ( v69 )
    sub_48E650(v69);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2438);
  v68 = operator new(0x4Cu);
  if ( v68 )
    sub_48E710(v68);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2440);
  v67 = operator new(0x4Cu);
  if ( v67 )
    sub_48E3D0(v67);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2448);
  v66 = operator new(0x4Cu);
  if ( v66 )
    sub_48E540(v66);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2450);
  v65 = operator new(0x4Cu);
  if ( v65 )
    sub_48E730(v65);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2458);
  v64 = operator new(0x4Cu);
  if ( v64 )
    sub_48F070(v64);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2460);
  v63 = operator new(0x4Cu);
  if ( v63 )
    sub_48F0D0(v63);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2468);
  v62 = operator new(0x4Cu);
  if ( v62 )
    sub_48F110(v62);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2470);
  v61 = operator new(0x4Cu);
  if ( v61 )
    sub_48F150(v61);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2478);
  v60 = operator new(0x4Cu);
  if ( v60 )
    sub_48F190(v60);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2480);
  v59 = operator new(0x4Cu);
  if ( v59 )
    sub_48EF50(v59);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2488);
  v58 = operator new(0x4Cu);
  if ( v58 )
    sub_48E8B0(v58);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2490);
  v57 = operator new(0x4Cu);
  if ( v57 )
    sub_48EF70(v57);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2498);
  v56 = operator new(0x4Cu);
  if ( v56 )
    sub_48EBE0(v56);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24A0);
  v55 = operator new(0x4Cu);
  if ( v55 )
    sub_48EC00(v55);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24A8);
  v54 = operator new(0x4Cu);
  if ( v54 )
    sub_48E8F0(v54);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24B0);
  v53 = operator new(0x4Cu);
  if ( v53 )
    sub_48EF70(v53);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24B8);
  v52 = operator new(0x4Cu);
  if ( v52 )
    sub_48EF90(v52);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24C0);
  v51 = operator new(0x4Cu);
  if ( v51 )
    sub_48DCB0(v51);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24C8);
  v50 = operator new(0x4Cu);
  if ( v50 )
    sub_48EA50(v50);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24D0);
  v49 = operator new(0x4Cu);
  if ( v49 )
    sub_48EA50(v49);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24D8);
  v48 = operator new(0x4Cu);
  if ( v48 )
    sub_48DCD0(v48);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24E0);
  v47 = operator new(0x4Cu);
  if ( v47 )
    sub_48DCF0(v47);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24E8);
  v46 = operator new(0x4Cu);
  if ( v46 )
    sub_48DD30(v46);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24F0);
  v45 = operator new(0x4Cu);
  if ( v45 )
    sub_48DE30(v45);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E24F8);
  v44 = operator new(0x4Cu);
  if ( v44 )
    sub_48DF80(v44);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2500);
  v43 = operator new(0x4Cu);
  if ( v43 )
    sub_48DD50(v43);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2508);
  v42 = operator new(0x4Cu);
  if ( v42 )
    sub_48DFF0(v42);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2510);
  v41 = operator new(0x4Cu);
  if ( v41 )
    sub_48EA10(v41);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2518);
  v40 = operator new(0x4Cu);
  if ( v40 )
    sub_48EB10(v40);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2520);
  v39 = operator new(0x4Cu);
  if ( v39 )
    sub_48E230(v39);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2528);
  v38 = operator new(0x4Cu);
  if ( v38 )
    sub_48EC90(v38);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2530);
  v37 = operator new(0x4Cu);
  if ( v37 )
    sub_48E910(v37);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2538);
  v36 = operator new(0x4Cu);
  if ( v36 )
    sub_48E930(v36);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2540);
  v35 = operator new(0x4Cu);
  if ( v35 )
    sub_48EC70(v35);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2548);
  v34 = operator new(0x4Cu);
  if ( v34 )
    sub_48E250(v34);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2550);
  v33 = operator new(0x4Cu);
  if ( v33 )
    sub_48ED10(v33);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2558);
  v32 = operator new(0x4Cu);
  if ( v32 )
    sub_48E2B0(v32);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2560);
  v31 = operator new(0x4Cu);
  if ( v31 )
    sub_48EDB0(v31);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&dword_4E2568);
  v30 = operator new(0x4Cu);
  if ( v30 )
    sub_48EDD0(v30);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2570);
  v29 = operator new(0x4Cu);
  if ( v29 )
    sub_48EDF0(v29);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2578);
  v28 = operator new(0x4Cu);
  if ( v28 )
    sub_48EB30(v28);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2580);
  v27 = operator new(0x4Cu);
  if ( v27 )
    sub_48E330(v27);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2588);
  v26 = operator new(0x4Cu);
  if ( v26 )
    sub_48EEF0(v26);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2590);
  v25 = operator new(0x4Cu);
  if ( v25 )
    sub_48EF10(v25);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2598);
  v24 = operator new(0x4Cu);
  if ( v24 )
    sub_48F3C0(v24);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25A0);
  v23 = operator new(0x4Cu);
  if ( v23 )
    sub_48F3E0(v23);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25A8);
  v22 = operator new(0x4Cu);
  if ( v22 )
    sub_48F400(v22);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25B0);
  v21 = operator new(0x4Cu);
  if ( v21 )
    sub_48F030(v21);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25B8);
  v20 = operator new(0x4Cu);
  if ( v20 )
    sub_48F420(v20);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25C0);
  v19 = operator new(0x4Cu);
  if ( v19 )
    sub_48F460(v19);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25C8);
  v18 = operator new(0x4Cu);
  if ( v18 )
    sub_48ED50(v18);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25D0);
  v17 = operator new(0x4Cu);
  if ( v17 )
    sub_48F480(v17);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25D8);
  v16 = operator new(0x4Cu);
  if ( v16 )
    sub_48E950(v16);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25E0);
  v15 = operator new(0x4Cu);
  if ( v15 )
    sub_48F1D0(v15);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25E8);
  v14 = operator new(0x4Cu);
  if ( v14 )
    sub_48F200(v14);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25F0);
  v13 = operator new(0x4Cu);
  if ( v13 )
    sub_48F220(v13);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E25F8);
  v12 = operator new(0x4Cu);
  if ( v12 )
    sub_48F240(v12);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2600);
  v11 = operator new(0x4Cu);
  if ( v11 )
    sub_48F260(v11);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2608);
  v10 = operator new(0x4Cu);
  if ( v10 )
    sub_48F280(v10);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2610);
  v9 = operator new(0x4Cu);
  if ( v9 )
    sub_48F2A0(v9);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2618);
  v8 = operator new(0x4Cu);
  if ( v8 )
    sub_48F2C0(v8);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2620);
  v7 = operator new(0x4Cu);
  if ( v7 )
    sub_48F2E0(v7);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2628);
  v6 = operator new(0x4Cu);
  if ( v6 )
    sub_48E750(v6);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2630);
  v5 = operator new(0x4Cu);
  if ( v5 )
    sub_48F300(v5);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2638);
  v4 = operator new(0x4Cu);
  if ( v4 )
    sub_48F320(v4);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2640);
  v3 = operator new(0x4Cu);
  if ( v3 )
    sub_48F340(v3);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2648);
  v2 = operator new(0x4Cu);
  if ( v2 )
    sub_48DCB0(v2);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2650);
  v1 = operator new(0x4Cu);
  if ( v1 )
    sub_48EA50(v1);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2658);
  v0 = operator new(0x4Cu);
  if ( v0 )
    sub_48EA50(v0);
  std::pair<unsigned char *,unsigned char *>::pair<unsigned char *,unsigned char *>((CAtlTraceSettings *)&unk_4E2660);
}
// 4E21A8: using guessed type int dword_4E21A8;
// 4E2568: using guessed type int dword_4E2568;

//----- (004B23C0) --------------------------------------------------------
_DWORD *sub_4B23C0()
{
  _DWORD *result; // eax
  _DWORD *v1; // [esp+0h] [ebp-48h]
  _DWORD *v2; // [esp+4h] [ebp-44h]
  _DWORD *v3; // [esp+8h] [ebp-40h]
  _DWORD *v4; // [esp+Ch] [ebp-3Ch]
  _DWORD *v5; // [esp+10h] [ebp-38h]
  _DWORD *v6; // [esp+14h] [ebp-34h]
  _DWORD *v7; // [esp+18h] [ebp-30h]
  _DWORD *v8; // [esp+1Ch] [ebp-2Ch]
  _DWORD *v9; // [esp+20h] [ebp-28h]
  CMemory **v10; // [esp+28h] [ebp-20h]
  CMemory **v11; // [esp+2Ch] [ebp-1Ch]
  CMemory **v12; // [esp+30h] [ebp-18h]
  CMemory **v13; // [esp+34h] [ebp-14h]
  CMemory **v14; // [esp+38h] [ebp-10h]
  CMemory **v15; // [esp+3Ch] [ebp-Ch]
  CMemory **v16; // [esp+40h] [ebp-8h]
  CMemory **v17; // [esp+44h] [ebp-4h]

  v17 = operator new(0x4Cu);
  if ( v17 )
    v9 = sub_48F5A0(v17);
  else
    v9 = 0;
  dword_4E2668[0] = (int)v9;
  v16 = operator new(0x4Cu);
  if ( v16 )
    v8 = sub_48F5C0(v16);
  else
    v8 = 0;
  dword_4E266C = (int)v8;
  v15 = operator new(0x4Cu);
  if ( v15 )
    v7 = sub_48F5E0(v15);
  else
    v7 = 0;
  dword_4E2670 = (int)v7;
  v14 = operator new(0x4Cu);
  if ( v14 )
    v6 = sub_48F600(v14);
  else
    v6 = 0;
  dword_4E2674 = (int)v6;
  v13 = operator new(0x4Cu);
  if ( v13 )
    v5 = sub_48F620(v13);
  else
    v5 = 0;
  dword_4E2678 = (int)v5;
  v12 = operator new(0x4Cu);
  if ( v12 )
    v4 = sub_48F640(v12);
  else
    v4 = 0;
  dword_4E267C = (int)v4;
  v11 = operator new(0x4Cu);
  if ( v11 )
    v3 = sub_48F660(v11);
  else
    v3 = 0;
  dword_4E2680 = (int)v3;
  v10 = operator new(0x4Cu);
  if ( v10 )
    v2 = sub_48F680(v10);
  else
    v2 = 0;
  dword_4E2684 = (int)v2;
  result = operator new(0x4Cu);
  if ( result )
  {
    result = sub_48F6A0(result);
    v1 = result;
  }
  else
  {
    v1 = 0;
  }
  dword_4E2688 = (int)v1;
  return result;
}
// 4E2668: using guessed type int dword_4E2668[];
// 4E266C: using guessed type int dword_4E266C;
// 4E2670: using guessed type int dword_4E2670;
// 4E2674: using guessed type int dword_4E2674;
// 4E2678: using guessed type int dword_4E2678;
// 4E267C: using guessed type int dword_4E267C;
// 4E2680: using guessed type int dword_4E2680;
// 4E2684: using guessed type int dword_4E2684;
// 4E2688: using guessed type int dword_4E2688;

//----- (004B2580) --------------------------------------------------------
CMMagicFuJiExplosion *sub_4B2580()
{
  CMMagicFuJiExplosion *result; // eax
  CMMagicFuJiExplosion *v1; // [esp+0h] [ebp-148h]
  _DWORD *v2; // [esp+4h] [ebp-144h]
  _DWORD *v3; // [esp+8h] [ebp-140h]
  _DWORD *v4; // [esp+Ch] [ebp-13Ch]
  _DWORD *v5; // [esp+10h] [ebp-138h]
  _DWORD *v6; // [esp+14h] [ebp-134h]
  _DWORD *v7; // [esp+18h] [ebp-130h]
  _DWORD *v8; // [esp+1Ch] [ebp-12Ch]
  _DWORD *v9; // [esp+20h] [ebp-128h]
  _DWORD *v10; // [esp+24h] [ebp-124h]
  _DWORD *v11; // [esp+28h] [ebp-120h]
  _DWORD *v12; // [esp+2Ch] [ebp-11Ch]
  _DWORD *v13; // [esp+30h] [ebp-118h]
  _DWORD *v14; // [esp+34h] [ebp-114h]
  _DWORD *v15; // [esp+38h] [ebp-110h]
  _DWORD *v16; // [esp+3Ch] [ebp-10Ch]
  _DWORD *v17; // [esp+40h] [ebp-108h]
  _DWORD *v18; // [esp+44h] [ebp-104h]
  _DWORD *v19; // [esp+48h] [ebp-100h]
  _DWORD *v20; // [esp+4Ch] [ebp-FCh]
  _DWORD *v21; // [esp+50h] [ebp-F8h]
  _DWORD *v22; // [esp+54h] [ebp-F4h]
  _DWORD *v23; // [esp+58h] [ebp-F0h]
  _DWORD *v24; // [esp+5Ch] [ebp-ECh]
  _DWORD *v25; // [esp+60h] [ebp-E8h]
  _DWORD *v26; // [esp+64h] [ebp-E4h]
  _DWORD *v27; // [esp+68h] [ebp-E0h]
  _DWORD *v28; // [esp+6Ch] [ebp-DCh]
  _DWORD *v29; // [esp+70h] [ebp-D8h]
  _DWORD *v30; // [esp+74h] [ebp-D4h]
  _DWORD *v31; // [esp+78h] [ebp-D0h]
  _DWORD *v32; // [esp+7Ch] [ebp-CCh]
  _DWORD *v33; // [esp+80h] [ebp-C8h]
  _DWORD *v34; // [esp+84h] [ebp-C4h]
  _DWORD *v35; // [esp+88h] [ebp-C0h]
  _DWORD *v36; // [esp+8Ch] [ebp-BCh]
  _DWORD *v37; // [esp+90h] [ebp-B8h]
  _DWORD *v38; // [esp+94h] [ebp-B4h]
  _DWORD *v39; // [esp+98h] [ebp-B0h]
  _DWORD *v40; // [esp+9Ch] [ebp-ACh]
  _DWORD *v41; // [esp+A0h] [ebp-A8h]
  CMemory **v42; // [esp+A8h] [ebp-A0h]
  CMemory **v43; // [esp+ACh] [ebp-9Ch]
  CMemory **v44; // [esp+B0h] [ebp-98h]
  CMemory **v45; // [esp+B4h] [ebp-94h]
  CMemory **v46; // [esp+B8h] [ebp-90h]
  CMemory **v47; // [esp+BCh] [ebp-8Ch]
  CMemory **v48; // [esp+C0h] [ebp-88h]
  CMemory **v49; // [esp+C4h] [ebp-84h]
  CMemory **v50; // [esp+C8h] [ebp-80h]
  CMemory **v51; // [esp+CCh] [ebp-7Ch]
  CMemory **v52; // [esp+D0h] [ebp-78h]
  CMemory **v53; // [esp+D4h] [ebp-74h]
  CMemory **v54; // [esp+D8h] [ebp-70h]
  CMemory **v55; // [esp+DCh] [ebp-6Ch]
  CMemory **v56; // [esp+E0h] [ebp-68h]
  CMemory **v57; // [esp+E4h] [ebp-64h]
  CMemory **v58; // [esp+E8h] [ebp-60h]
  CMemory **v59; // [esp+ECh] [ebp-5Ch]
  CMemory **v60; // [esp+F0h] [ebp-58h]
  CMemory **v61; // [esp+F4h] [ebp-54h]
  CMemory **v62; // [esp+F8h] [ebp-50h]
  CMemory **v63; // [esp+FCh] [ebp-4Ch]
  CMemory **v64; // [esp+100h] [ebp-48h]
  CMemory **v65; // [esp+104h] [ebp-44h]
  CMemory **v66; // [esp+108h] [ebp-40h]
  CMemory **v67; // [esp+10Ch] [ebp-3Ch]
  CMemory **v68; // [esp+110h] [ebp-38h]
  CMemory **v69; // [esp+114h] [ebp-34h]
  CMemory **v70; // [esp+118h] [ebp-30h]
  CMemory **v71; // [esp+11Ch] [ebp-2Ch]
  CMemory **v72; // [esp+120h] [ebp-28h]
  CMemory **v73; // [esp+124h] [ebp-24h]
  CMemory **v74; // [esp+128h] [ebp-20h]
  CMemory **v75; // [esp+12Ch] [ebp-1Ch]
  CMemory **v76; // [esp+130h] [ebp-18h]
  CMemory **v77; // [esp+134h] [ebp-14h]
  CMemory **v78; // [esp+138h] [ebp-10h]
  CMemory **v79; // [esp+13Ch] [ebp-Ch]
  CMemory **v80; // [esp+140h] [ebp-8h]
  CMemory **v81; // [esp+144h] [ebp-4h]

  v81 = operator new(0x4Cu);
  if ( v81 )
    v41 = sub_48F6C0(v81);
  else
    v41 = 0;
  dword_4E2690[0] = (int)v41;
  v80 = operator new(0x4Cu);
  if ( v80 )
    v40 = sub_48F6F0(v80);
  else
    v40 = 0;
  dword_4E2694 = (int)v40;
  v79 = operator new(0x4Cu);
  if ( v79 )
    v39 = sub_48F990(v79);
  else
    v39 = 0;
  dword_4E2698 = (int)v39;
  v78 = operator new(0x4Cu);
  if ( v78 )
    v38 = sub_48F720(v78);
  else
    v38 = 0;
  dword_4E269C = (int)v38;
  v77 = operator new(0x4Cu);
  if ( v77 )
    v37 = sub_48F7C0(v77);
  else
    v37 = 0;
  dword_4E26A0 = (int)v37;
  v76 = operator new(0x4Cu);
  if ( v76 )
    v36 = sub_48F7E0(v76);
  else
    v36 = 0;
  dword_4E26A4 = (int)v36;
  v75 = operator new(0x4Cu);
  if ( v75 )
    v35 = sub_48F800(v75);
  else
    v35 = 0;
  dword_4E26A8 = (int)v35;
  v74 = operator new(0x4Cu);
  if ( v74 )
    v34 = sub_48F820(v74);
  else
    v34 = 0;
  dword_4E26AC = (int)v34;
  v73 = operator new(0x4Cu);
  if ( v73 )
    v33 = sub_48F740(v73);
  else
    v33 = 0;
  dword_4E26B0 = (int)v33;
  v72 = operator new(0x4Cu);
  if ( v72 )
    v32 = sub_48F870(v72);
  else
    v32 = 0;
  dword_4E26B4 = (int)v32;
  v71 = operator new(0x4Cu);
  if ( v71 )
    v31 = sub_48F910(v71);
  else
    v31 = 0;
  dword_4E26B8 = (int)v31;
  v70 = operator new(0x4Cu);
  if ( v70 )
    v30 = sub_48F940(v70);
  else
    v30 = 0;
  dword_4E26BC = (int)v30;
  v69 = operator new(0x4Cu);
  if ( v69 )
    v29 = sub_48F970(v69);
  else
    v29 = 0;
  dword_4E26C0 = (int)v29;
  v68 = operator new(0x4Cu);
  if ( v68 )
    v28 = sub_48F840(v68);
  else
    v28 = 0;
  dword_4E26C4 = (int)v28;
  v67 = operator new(0x4Cu);
  if ( v67 )
    v27 = sub_48EA50(v67);
  else
    v27 = 0;
  dword_4E26C8 = (int)v27;
  v66 = operator new(0x4Cu);
  if ( v66 )
    v26 = sub_48F990(v66);
  else
    v26 = 0;
  dword_4E26CC = (int)v26;
  v65 = operator new(0x4Cu);
  if ( v65 )
    v25 = sub_48F990(v65);
  else
    v25 = 0;
  dword_4E26D0 = (int)v25;
  v64 = operator new(0x4Cu);
  if ( v64 )
    v24 = sub_48F9B0(v64);
  else
    v24 = 0;
  dword_4E26D4 = (int)v24;
  v63 = operator new(0x4Cu);
  if ( v63 )
    v23 = sub_48F9D0(v63);
  else
    v23 = 0;
  dword_4E26D8 = (int)v23;
  v62 = operator new(0x4Cu);
  if ( v62 )
    v22 = sub_48FA00(v62);
  else
    v22 = 0;
  dword_4E26DC = (int)v22;
  v61 = operator new(0x4Cu);
  if ( v61 )
    v21 = sub_48FA30(v61);
  else
    v21 = 0;
  dword_4E26E0 = (int)v21;
  v60 = operator new(0x4Cu);
  if ( v60 )
    v20 = sub_48F990(v60);
  else
    v20 = 0;
  dword_4E26E4 = (int)v20;
  v59 = operator new(0x4Cu);
  if ( v59 )
    v19 = sub_48FA70(v59);
  else
    v19 = 0;
  dword_4E26E8 = (int)v19;
  v58 = operator new(0x4Cu);
  if ( v58 )
    v18 = sub_48FA90(v58);
  else
    v18 = 0;
  dword_4E26EC = (int)v18;
  v57 = operator new(0x4Cu);
  if ( v57 )
    v17 = sub_48EA50(v57);
  else
    v17 = 0;
  dword_4E26F0 = (int)v17;
  v56 = operator new(0x4Cu);
  if ( v56 )
    v16 = sub_48FAB0(v56);
  else
    v16 = 0;
  dword_4E26F4 = (int)v16;
  v55 = operator new(0x4Cu);
  if ( v55 )
    v15 = sub_48FAF0(v55);
  else
    v15 = 0;
  dword_4E26F8 = (int)v15;
  v54 = operator new(0x4Cu);
  if ( v54 )
    v14 = sub_48FB10(v54);
  else
    v14 = 0;
  dword_4E26FC = (int)v14;
  v53 = operator new(0x4Cu);
  if ( v53 )
    v13 = sub_48FB30(v53);
  else
    v13 = 0;
  dword_4E2700 = (int)v13;
  v52 = operator new(0x4Cu);
  if ( v52 )
    v12 = sub_48FB50(v52);
  else
    v12 = 0;
  dword_4E2704 = (int)v12;
  v51 = operator new(0x4Cu);
  if ( v51 )
    v11 = sub_48FB70(v51);
  else
    v11 = 0;
  dword_4E2708 = (int)v11;
  v50 = operator new(0x4Cu);
  if ( v50 )
    v10 = sub_48FB90(v50);
  else
    v10 = 0;
  dword_4E270C = (int)v10;
  v49 = operator new(0x4Cu);
  if ( v49 )
    v9 = sub_48FBB0(v49);
  else
    v9 = 0;
  dword_4E2710 = (int)v9;
  v48 = operator new(0x4Cu);
  if ( v48 )
    v8 = sub_48FBD0(v48);
  else
    v8 = 0;
  dword_4E2714 = (int)v8;
  v47 = operator new(0x4Cu);
  if ( v47 )
    v7 = sub_48FBF0(v47);
  else
    v7 = 0;
  dword_4E2718 = (int)v7;
  v46 = operator new(0x4Cu);
  if ( v46 )
    v6 = sub_48F990(v46);
  else
    v6 = 0;
  dword_4E271C = (int)v6;
  v45 = operator new(0x4Cu);
  if ( v45 )
    v5 = sub_48FC20(v45);
  else
    v5 = 0;
  dword_4E2720 = (int)v5;
  v44 = operator new(0x4Cu);
  if ( v44 )
    v4 = sub_48FC60(v44);
  else
    v4 = 0;
  dword_4E2724 = (int)v4;
  v43 = operator new(0x4Cu);
  if ( v43 )
    v3 = sub_48FC90(v43);
  else
    v3 = 0;
  dword_4E2728 = (int)v3;
  v42 = operator new(0x4Cu);
  if ( v42 )
    v2 = sub_48FCB0(v42);
  else
    v2 = 0;
  dword_4E272C = (int)v2;
  result = (CMMagicFuJiExplosion *)operator new(0x50u);
  if ( result )
  {
    result = CMMagicFuJiExplosion::CMMagicFuJiExplosion(result);
    v1 = result;
  }
  else
  {
    v1 = 0;
  }
  dword_4E2730 = (int)v1;
  return result;
}
// 4E2690: using guessed type int dword_4E2690[];
// 4E2694: using guessed type int dword_4E2694;
// 4E2698: using guessed type int dword_4E2698;
// 4E269C: using guessed type int dword_4E269C;
// 4E26A0: using guessed type int dword_4E26A0;
// 4E26A4: using guessed type int dword_4E26A4;
// 4E26A8: using guessed type int dword_4E26A8;
// 4E26AC: using guessed type int dword_4E26AC;
// 4E26B0: using guessed type int dword_4E26B0;
// 4E26B4: using guessed type int dword_4E26B4;
// 4E26B8: using guessed type int dword_4E26B8;
// 4E26BC: using guessed type int dword_4E26BC;
// 4E26C0: using guessed type int dword_4E26C0;
// 4E26C4: using guessed type int dword_4E26C4;
// 4E26C8: using guessed type int dword_4E26C8;
// 4E26CC: using guessed type int dword_4E26CC;
// 4E26D0: using guessed type int dword_4E26D0;
// 4E26D4: using guessed type int dword_4E26D4;
// 4E26D8: using guessed type int dword_4E26D8;
// 4E26DC: using guessed type int dword_4E26DC;
// 4E26E0: using guessed type int dword_4E26E0;
// 4E26E4: using guessed type int dword_4E26E4;
// 4E26E8: using guessed type int dword_4E26E8;
// 4E26EC: using guessed type int dword_4E26EC;
// 4E26F0: using guessed type int dword_4E26F0;
// 4E26F4: using guessed type int dword_4E26F4;
// 4E26F8: using guessed type int dword_4E26F8;
// 4E26FC: using guessed type int dword_4E26FC;
// 4E2700: using guessed type int dword_4E2700;
// 4E2704: using guessed type int dword_4E2704;
// 4E2708: using guessed type int dword_4E2708;
// 4E270C: using guessed type int dword_4E270C;
// 4E2710: using guessed type int dword_4E2710;
// 4E2714: using guessed type int dword_4E2714;
// 4E2718: using guessed type int dword_4E2718;
// 4E271C: using guessed type int dword_4E271C;
// 4E2720: using guessed type int dword_4E2720;
// 4E2724: using guessed type int dword_4E2724;
// 4E2728: using guessed type int dword_4E2728;
// 4E272C: using guessed type int dword_4E272C;
// 4E2730: using guessed type int dword_4E2730;

//----- (004B2F00) --------------------------------------------------------
DWORD sub_4B2F00()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E2744 = result;
  return result;
}
// 4E2744: using guessed type int dword_4E2744;

//----- (004B2F10) --------------------------------------------------------
int sub_4B2F10()
{
  sub_493EE0(&stru_4E2748);
  return atexit((void (__cdecl *)())sub_4B34E0);
}

//----- (004B2F30) --------------------------------------------------------
DWORD sub_4B2F30()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E2754 = result;
  return result;
}
// 4E2754: using guessed type int dword_4E2754;

//----- (004B2F40) --------------------------------------------------------
int sub_4B2F40()
{
  `vector constructor iterator'(dword_4E2758, 0x3Cu, 32, _f);
  return atexit((void (__cdecl *)())sub_4B34F0);
}

//----- (004B2F70) --------------------------------------------------------
int sub_4B2F70()
{
  CScreen::CScreen((CScreen *)dword_4E2EDC);
  return atexit(sub_4B3510);
}
// 4E2EDC: using guessed type int dword_4E2EDC[13];

//----- (004B2F90) --------------------------------------------------------
int sub_4B2F90()
{
  CTables::CTables_0(&stru_4E35B4);
  return atexit(sub_4B3520);
}

//----- (004B2FB0) --------------------------------------------------------
void sub_4B2FB0()
{
  InitCodePage::InitCodePage(&unk_4E374C);
}

//----- (004B2FC0) --------------------------------------------------------
void __cdecl sub_4B2FC0()
{
  CAuthSocket::~CAuthSocket(dword_4DA6F0);
}
// 4DA6F0: using guessed type int dword_4DA6F0[4];

//----- (004B2FD0) --------------------------------------------------------
LONG __cdecl sub_4B2FD0()
{
  return CMemoryPool<CAuthPacket>::CPool::~CPool(&stru_4DA764);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004B2FE0) --------------------------------------------------------
void __cdecl sub_4B2FE0()
{
  CMemoryPool<CSkill>::CPool::~CPool();
}

//----- (004B2FF0) --------------------------------------------------------
void __cdecl sub_4B2FF0()
{
  sub_4024F0(&stru_4DA770);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004B3000) --------------------------------------------------------
void __cdecl sub_4B3000()
{
  CCalendar::~CCalendar((std::locale::facet *)&unk_4DA798);
}

//----- (004B3010) --------------------------------------------------------
void __cdecl sub_4B3010()
{
  CDBSocket::~CDBSocket(dword_4DA7B8);
}
// 4DA7B8: using guessed type int dword_4DA7B8[4];

//----- (004B3020) --------------------------------------------------------
LONG __cdecl sub_4B3020()
{
  return CDBPacket::~CDBPacket(&stru_4DA824);
}
// 4DA824: using guessed type int dword_4DA824;

//----- (004B3030) --------------------------------------------------------
void __cdecl sub_4B3030()
{
  CMemoryPool<CFindPath::NODE>::CPool::~CPool(&stru_4E0900);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (004B3040) --------------------------------------------------------
int __cdecl sub_4B3040()
{
  return sub_410880(dword_4E094C);
}
// 4E094C: using guessed type int dword_4E094C[3];

//----- (004B3050) --------------------------------------------------------
std::list<std::pair<std::string const ,int>> *__cdecl sub_4B3050()
{
  return sub_472990((std::list<std::pair<std::string const ,int>> *)dword_4E0958);
}
// 4E0958: using guessed type int dword_4E0958[3];

//----- (004B3060) --------------------------------------------------------
int __cdecl sub_4B3060()
{
  return sub_418A30(dword_4E0968);
}

//----- (004B3070) --------------------------------------------------------
int __cdecl sub_4B3070()
{
  return sub_418A30(dword_4E0974);
}
// 4E0974: using guessed type int dword_4E0974[3];

//----- (004B3080) --------------------------------------------------------
void __cdecl sub_4B3080()
{
  CRWLock::~CRWLock(&unk_4E0980);
}

//----- (004B3090) --------------------------------------------------------
int __cdecl sub_4B3090()
{
  return sub_41D060(dword_4E09A4);
}

//----- (004B30A0) --------------------------------------------------------
void __cdecl sub_4B30A0()
{
  CRWLock::~CRWLock(&unk_4E09B0);
}

//----- (004B30B0) --------------------------------------------------------
int __cdecl sub_4B30B0()
{
  return sub_41D1F0(dword_4E09C8);
}

//----- (004B30C0) --------------------------------------------------------
void __cdecl sub_4B30C0()
{
  CRWLock::~CRWLock(&unk_4E09D4);
}

//----- (004B30D0) --------------------------------------------------------
int __cdecl sub_4B30D0()
{
  return sub_4209C0(dword_4E09F0);
}

//----- (004B30E0) --------------------------------------------------------
void __cdecl sub_4B30E0()
{
  CIOException::CInit::~CInit(&unk_4E0DB4);
}

//----- (004B30F0) --------------------------------------------------------
void __cdecl sub_4B30F0()
{
  CIOCriticalSection::~CIOCriticalSection(&unk_4E0FE8);
}

//----- (004B3100) --------------------------------------------------------
int __cdecl sub_4B3100()
{
  return sub_423710();
}

//----- (004B3110) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__cdecl sub_4B3110()
{
  return sub_4258D0(&unk_4E100C);
}

//----- (004B3120) --------------------------------------------------------
void __cdecl sub_4B3120()
{
  CIOObject::~CIOObject((std::locale::facet *)&unk_4E1020);
}

//----- (004B3130) --------------------------------------------------------
int __cdecl sub_4B3130()
{
  return sub_42FA40(dword_4E10B4);
}
// 4E10B4: using guessed type int dword_4E10B4[3];

//----- (004B3140) --------------------------------------------------------
int __cdecl sub_4B3140()
{
  return sub_42FBD0(dword_4E10C0);
}
// 4E10C0: using guessed type int dword_4E10C0[3];

//----- (004B3150) --------------------------------------------------------
int __cdecl sub_4B3150()
{
  return sub_42FD60(dword_4E10CC);
}
// 4E10CC: using guessed type int dword_4E10CC[3];

//----- (004B3160) --------------------------------------------------------
void __cdecl sub_4B3160()
{
  CRWLock::~CRWLock(&unk_4E10D8);
}

//----- (004B3170) --------------------------------------------------------
int __cdecl sub_4B3170()
{
  return sub_4320D0(dword_4E10F0);
}
// 4E10F0: using guessed type int dword_4E10F0[3];

//----- (004B3180) --------------------------------------------------------
int __cdecl sub_4B3180()
{
  return sub_432260(dword_4E10FC);
}
// 4E10FC: using guessed type int dword_4E10FC[3];

//----- (004B3190) --------------------------------------------------------
void __cdecl sub_4B3190()
{
  CScreen::~CScreen((CScreen *)&unk_4E1128);
}

//----- (004B31A0) --------------------------------------------------------
unsigned int __cdecl sub_4B31A0()
{
  return CLog::CInit::~CInit(&unk_4E115C);
}

//----- (004B31B0) --------------------------------------------------------
void __cdecl sub_4B31B0()
{
  sub_40F780(&stru_4E1194);
}

//----- (004B31C0) --------------------------------------------------------
void __cdecl sub_4B31C0()
{
  sub_40F780(&stru_4E11B0);
}

//----- (004B31D0) --------------------------------------------------------
void __cdecl sub_4B31D0()
{
  sub_40F780(&stru_4E11CC);
}

//----- (004B31E0) --------------------------------------------------------
void __cdecl sub_4B31E0()
{
  sub_40F780(&stru_4E11E8);
}

//----- (004B31F0) --------------------------------------------------------
void __cdecl sub_4B31F0()
{
  sub_40F780(&stru_4E1204);
}

//----- (004B3200) --------------------------------------------------------
void __cdecl sub_4B3200()
{
  sub_40F780(&stru_4E1220);
}

//----- (004B3210) --------------------------------------------------------
void __cdecl sub_4B3210()
{
  sub_40F780(&stru_4E123C);
}

//----- (004B3220) --------------------------------------------------------
int __cdecl sub_4B3220()
{
  return sub_433BF0(dword_4E1258);
}
// 4E1258: using guessed type int dword_4E1258[3];

//----- (004B3230) --------------------------------------------------------
void __cdecl sub_4B3230()
{
  sub_40F780(&stru_4E1264);
}

//----- (004B3240) --------------------------------------------------------
int __cdecl sub_4B3240()
{
  return sub_4477F0(dword_4E1820);
}
// 4E1820: using guessed type int dword_4E1820[3];

//----- (004B3250) --------------------------------------------------------
void __cdecl sub_4B3250()
{
  CIOCriticalSection::~CIOCriticalSection(&unk_4E182C);
}

//----- (004B3260) --------------------------------------------------------
int __cdecl sub_4B3260()
{
  return sub_447980(dword_4E184C);
}
// 4E184C: using guessed type int dword_4E184C[3];

//----- (004B3270) --------------------------------------------------------
void __cdecl sub_4B3270()
{
  CRWLock::~CRWLock(&unk_4E1858);
}

//----- (004B3280) --------------------------------------------------------
int __cdecl sub_4B3280()
{
  return sub_447A70(dword_4E1870);
}
// 4E1870: using guessed type int dword_4E1870[3];

//----- (004B3290) --------------------------------------------------------
void __cdecl sub_4B3290()
{
  CRWLock::~CRWLock(&unk_4E187C);
}

//----- (004B32A0) --------------------------------------------------------
void __cdecl sub_4B32A0()
{
  CGenMonster::~CGenMonster((std::locale::facet *)&unk_4E1898);
}

//----- (004B32B0) --------------------------------------------------------
char *__cdecl sub_4B32B0()
{
  return `vector destructor iterator'(
           &unk_4E18F0,
           0x20u,
           2,
           (void (__thiscall *)(void *))CIOCriticalSection::~CIOCriticalSection);
}

//----- (004B32D0) --------------------------------------------------------
void __cdecl sub_4B32D0()
{
  CNPCObject::~CNPCObject(&unk_4E1930);
}

//----- (004B32E0) --------------------------------------------------------
void __cdecl sub_4B32E0()
{
  CNPCObject::~CNPCObject(&unk_4E1998);
}

//----- (004B32F0) --------------------------------------------------------
void __cdecl sub_4B32F0()
{
  CNPCObject::~CNPCObject(&unk_4E1A00);
}

//----- (004B3300) --------------------------------------------------------
int __cdecl sub_4B3300()
{
  return sub_44B920(dword_4E1A9C);
}
// 4E1A9C: using guessed type int dword_4E1A9C[3];

//----- (004B3310) --------------------------------------------------------
int __cdecl sub_4B3310()
{
  return sub_44BB90(dword_4E1AA8);
}
// 4E1AA8: using guessed type int dword_4E1AA8[3];

//----- (004B3320) --------------------------------------------------------
int __cdecl sub_4B3320()
{
  return sub_44BE00(dword_4E1AB4);
}
// 4E1AB4: using guessed type int dword_4E1AB4[3];

//----- (004B3330) --------------------------------------------------------
void __cdecl sub_4B3330()
{
  CRWLock::~CRWLock(&unk_4E1AC0);
}

//----- (004B3340) --------------------------------------------------------
void __cdecl sub_4B3340()
{
  CNPCObject::~CNPCObject(&unk_4E1AD8);
}

//----- (004B3350) --------------------------------------------------------
void __cdecl sub_4B3350()
{
  CIOCriticalSection::~CIOCriticalSection(&unk_4E1B38);
}

//----- (004B3360) --------------------------------------------------------
void __cdecl sub_4B3360()
{
  CIOCriticalSection::~CIOCriticalSection(&unk_4E1B58);
}

//----- (004B3370) --------------------------------------------------------
void __cdecl sub_4B3370()
{
  CIOCriticalSection::~CIOCriticalSection(&unk_4E1B78);
}

//----- (004B3380) --------------------------------------------------------
int __cdecl sub_4B3380()
{
  return sub_44CEE0(dword_4E1B9C);
}

//----- (004B3390) --------------------------------------------------------
int __cdecl sub_4B3390()
{
  return sub_44D150(dword_4E1F38);
}
// 4E1F38: using guessed type int dword_4E1F38[4];

//----- (004B33A0) --------------------------------------------------------
int __cdecl sub_4B33A0()
{
  return sub_44FBF0(dword_4E1FC4);
}

//----- (004B33B0) --------------------------------------------------------
void __cdecl sub_4B33B0()
{
  CIOCriticalSection::~CIOCriticalSection(&unk_4E1FD0);
}

//----- (004B33C0) --------------------------------------------------------
int __cdecl sub_4B33C0()
{
  return sub_47A8D0(dword_4E2020);
}

//----- (004B33D0) --------------------------------------------------------
void __cdecl sub_4B33D0()
{
  CRWLock::~CRWLock(&unk_4E202C);
}

//----- (004B33E0) --------------------------------------------------------
int __cdecl sub_4B33E0()
{
  return sub_47A9C0(dword_4E2044);
}

//----- (004B33F0) --------------------------------------------------------
void __cdecl sub_4B33F0()
{
  CRWLock::~CRWLock(&unk_4E2050);
}

//----- (004B3400) --------------------------------------------------------
int __cdecl sub_4B3400()
{
  return sub_47A8D0(dword_4E2068);
}

//----- (004B3410) --------------------------------------------------------
char *__cdecl sub_4B3410()
{
  return `vector destructor iterator'(
           &stru_4E2078,
           0x20u,
           2,
           (void (__thiscall *)(void *))CIOCriticalSection::~CIOCriticalSection);
}

//----- (004B3430) --------------------------------------------------------
void __cdecl sub_4B3430()
{
  CRWLock::~CRWLock(&unk_4E20B8);
}

//----- (004B3440) --------------------------------------------------------
std::list<std::pair<std::string const ,int>> *__cdecl sub_4B3440()
{
  return sub_472990((std::list<std::pair<std::string const ,int>> *)dword_4E20D0);
}
// 4E20D0: using guessed type int dword_4E20D0[3];

//----- (004B3450) --------------------------------------------------------
void __cdecl sub_4B3450()
{
  CRWLock::~CRWLock(&unk_4E20DC);
}

//----- (004B3460) --------------------------------------------------------
void __cdecl sub_4B3460()
{
  CIOObject::~CIOObject((std::locale::facet *)&unk_4E20F4);
}

//----- (004B3470) --------------------------------------------------------
int __cdecl sub_4B3470()
{
  return sub_47DAD0(dword_4E210C);
}
// 4E210C: using guessed type int dword_4E210C[3];

//----- (004B3480) --------------------------------------------------------
void __cdecl sub_4B3480()
{
  CRWLock::~CRWLock(&unk_4E2118);
}

//----- (004B3490) --------------------------------------------------------
int __cdecl sub_4B3490()
{
  return sub_47ECF0(dword_4E214C);
}

//----- (004B34A0) --------------------------------------------------------
void __cdecl sub_4B34A0()
{
  sub_47ECD0((CWin32FileIO *)&unk_4E2158);
}

//----- (004B34B0) --------------------------------------------------------
void __cdecl sub_4B34B0()
{
  CRWLock::~CRWLock(&unk_4E2170);
}

//----- (004B34C0) --------------------------------------------------------
int __cdecl sub_4B34C0()
{
  return sub_4808E0(dword_4E218C);
}
// 4E218C: using guessed type int dword_4E218C[3];

//----- (004B34D0) --------------------------------------------------------
int __cdecl sub_4B34D0()
{
  return sub_4808E0(&stru_4E2198);
}

//----- (004B34E0) --------------------------------------------------------
int __cdecl sub_4B34E0()
{
  return sub_493FC0(&stru_4E2748);
}

//----- (004B34F0) --------------------------------------------------------
char *__cdecl sub_4B34F0()
{
  return `vector destructor iterator'(dword_4E2758, 0x3Cu, 32, (void (__thiscall *)(void *))sub_493F90);
}

//----- (004B3510) --------------------------------------------------------
void __cdecl sub_4B3510()
{
  CScreen::~CScreen((CScreen *)dword_4E2EDC);
}
// 4E2EDC: using guessed type int dword_4E2EDC[13];

//----- (004B3520) --------------------------------------------------------
void __cdecl sub_4B3520()
{
  CIOObject::OnWaitCallback((std::_Init_locks *)&stru_4E35B4);
}
// 401130: using guessed type void __thiscall std::_Init_locks::~_Init_locks(std::_Init_locks *__hidden this);

// nfuncs=3728 queued=3372 decompiled=3372 lumina nreq=0 worse=0 better=0
// ALL OK, 3372 function(s) have been successfully decompiled
